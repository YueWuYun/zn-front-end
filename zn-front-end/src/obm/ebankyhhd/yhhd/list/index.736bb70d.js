/*! @ncctag {"provider":"test","date":"2020-5-11 21:44:38"} */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nc-lightapp-front"),require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["nc-lightapp-front","react","react-dom"],t):"object"==typeof exports?exports["obm/ebankyhhd/yhhd/list/index"]=t(require("nc-lightapp-front"),require("react"),require("react-dom")):e["obm/ebankyhhd/yhhd/list/index"]=t(e["nc-lightapp-front"],e.React,e.ReactDOM)}(window,(function(e,t,n){return function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="../../../../",n(n.s=4)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(t){var n=a.cacheTools.get("3610HD_L01_back");console.log(t),a.cacheTools.set("3610HD_L01_back","0"),a.cacheTools.set("3610HD_L01_search",t);var o=e.table.getTablePageInfo("YhhdVO"),r={conditions:t.conditions||t,pageInfo:o,pagecode:"3610HD_L01",queryAreaCode:"search",oid:"0001ZZ100000000066A3",queryType:"simple"};(0,a.ajax)({url:"/nccloud/obm/ebankyhhd/query.do",data:r,success:function(t){var o=t.success,r=t.data;o&&(r?(e.table.setAllTableData("YhhdVO",t.data.YhhdVO),a.cacheTools.set("3610HD_L01_data",r.YhhdVO),n&&"0"!==n||i(e,r.YhhdVO.allpks.length)):(e.table.setAllTableData("YhhdVO",{rows:[]}),n&&"0"!==n||i(e)))}})}};var a=n(0);function i(e,t){if(t&&t>0){var n=e.MutiInit.getIntl("3610HD")&&e.MutiInit.getIntl("3610HD").get("3610HD-000011"),i=e.MutiInit.getIntl("3610HD")&&e.MutiInit.getIntl("3610HD").get("3610HD-000012");(0,a.toast)({duration:6,color:"success",content:n+t+i})}else(0,a.toast)({duration:6,color:"warning",content:e.MutiInit.getIntl("3610HD")&&e.MutiInit.getIntl("3610HD").get("3610HD-000013")})}},function(e,t,n){"use strict";var a,i,o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,i=!1,o=void 0;try{for(var r,l=e[Symbol.iterator]();!(a=(r=l.next()).done)&&(n.push(r.value),!t||n.length!==t);a=!0);}catch(e){i=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),p=f(s),d=f(n(2)),c=n(0),u=n(5);function f(e){return e&&e.__esModule?e:{default:e}}var h=c.high.NCUploader,m=(c.high.ApproveDetail,c.high.BillTrack),g=c.base.NCModal,v=c.base.NCButton,b=(c.base.NCUpload,c.base.NCCheckbox,a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.call(n),n.props=e,n.searchId="search",n.tableId="YhhdVO",n.inputId="input",n.filepath="",n.state={data:{},billId:"",billno:"",showmodal:!1,showbilltrack:!1,showbilltrackpk:"",showbilltracktype:"",showlinkquerybill:!1,selvalue:null,selpks:null,billtype:null,selhandlinkmap:new Map},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),l(t,[{key:"componentDidMount",value:function(){this.toggleShow()}},{key:"render",value:function(){var e=this,t=this.props,n=t.table,a=t.button,i=t.form,l=t.search,s=t.modal,d=(this.props.button.getButtons(),n.createSimpleTable),f=(this.props.button.createButtonApp,a.createButton,a.getButtons,i.createForm),b=l.NCCreateSearch,y=s.createModal,w=this.state,x=w.showUploader,I=w.target,_=w.billno,k=w.billId;return y("printService",{className:"print-service"}),p.default.createElement("iframe",{id:"printServiceframe",name:"printServiceframe",style:{display:"none"}}),p.default.createElement("div",{className:"nc-bill-list"},p.default.createElement("div",{className:"nc-bill-header-area"},p.default.createElement("div",{className:"header-title-search-area"},(0,c.createPageIcon)(),p.default.createElement("h2",{className:"title-search-detail"},this.props.MutiInit.getIntl("3610HD")&&this.props.MutiInit.getIntl("3610HD").get("3610HD-000016"))),p.default.createElement("div",{className:"header-button-area"},this.props.button.createButtonApp({area:"list_head",buttonLimit:4,onButtonClick:u.buttonClick.bind(this),popContainer:document.querySelector(".header-button-area")}))),p.default.createElement("div",{className:"nc-bill-search-area"},b("search",{onAfterEvent:u.onAfterEvent.bind(this),showAdvBtn:!1,clickSearchBtn:u.searchBtnClick.bind(this),oid:"0001ZZ100000000066A3",defaultConditionsNum:4})),p.default.createElement("div",{className:"nc-bill-table-area",style:{borderRadius:"3px 3px 0 0",overflow:"hidden"}},d(this.tableId,{adaptionHeight:!0,handlePageInfoChange:u.pageInfoClick,tableModelConfirm:u.tableModelConfirm,onSelected:this.updateButtonStatus.bind(this),onSelectedAll:this.updateButtonStatus.bind(this),showCheck:!0,showIndex:!0})),p.default.createElement("div",{className:"nc-faith-demo-div2"},x&&p.default.createElement(h,{billId:k,target:I,placement:"bottom",billNo:_,onHide:this.onHideUploader})),p.default.createElement("div",null,p.default.createElement(m,{show:this.state.showbilltrack,close:function(){e.setState({showbilltrack:!1})},pk:this.state.showbilltrackpk,type:this.state.showbilltracktype})),y("download",{title:this.props.MutiInit.getIntl("3610HD")&&this.props.MutiInit.getIntl("3610HD").get("3610HD-000015"),className:"senior",hasCloseBtn:!0,style:{width:"520px",height:"268px"},content:p.default.createElement("div",{className:"form-wrapper"},f("download",{style:{width:"520px",height:"268px"},onAfterEvent:u.afterEvent.bind(this)})),beSureBtnClick:function(){var t=i.getAllFormValue("download");if(i.isCheckNow("download")){var n={model:r({pageInfo:{pageIndex:0,pageSize:10,total:0,totalPage:0}},t)};(0,c.ajax)({url:"/nccloud/obm/ebankyhhd/download.do",data:n,success:function(t){var n=t.success,a=t.data;n&&(a&&a[e.tableId]?(e.props.table.setAllTableData(e.tableId,a[e.tableId]),c.cacheTools.set("3610HD_L01_data",a[e.tableId])):e.props.table.setAllTableData(e.tableId,{rows:[]}))}})}}}),y("linkquery",{title:this.props.MutiInit.getIntl("3610HD")&&this.props.MutiInit.getIntl("3610HD").get("3610HD-000017"),className:"senior",hasCloseBtn:!0,style:{width:"520px",height:"268px"},content:p.default.createElement("div",{className:"form-wrapper"},f("linkquery",{style:{width:"520px",height:"268px"},onAfterEvent:u.afterEvent.bind(this)})),beSureBtnClick:function(){var t=i.getAllFormValue("linkquery");if(i.isCheckNow("linkquery")){var n=e.state.selvalue,a=n.acct_no.value,o=n.dc_flag.value,l=n.trsamt.value;e.setState({billtype:t.rows[0].values.billtype.value}),t.rows[0].values.account.value=a,t.rows[0].values.direction.value=o,t.rows[0].values.money.value=l;var s={model:r({pageInfo:{pageIndex:0,pageSize:10,total:0,totalPage:0}},t)};(0,c.ajax)({url:"/nccloud/obm/ebankyhhd/handlinkquery.do",data:s,success:function(t){var n=t.success,a=t.data;n&&a&&a.linkquerytable?e.props.table.setAllTableData("linkquerytable",a.linkquerytable):e.props.table.setAllTableData("linkquerytable",{rows:[]}),e.props.modal.show("linkquerytable"),e.state.selhandlinkmap.clear()}})}}}),y("linkquerytable",{title:this.props.MutiInit.getIntl("3610HD")&&this.props.MutiInit.getIntl("3610HD").get("3610HD-000018"),className:"nc-bill-table-area",hasCloseBtn:!0,content:p.default.createElement("div",{className:"form-wrapper"},d("linkquerytable",{handlePageInfoChange:u.pageInfoClickHand,tableModelConfirm:u.tableModelConfirm,onSelected:this.updateSelhandlink.bind(this),onSelectedAll:this.updateSelhandlinkAll.bind(this),showCheck:!0,showIndex:!0,height:"400px"})),beSureBtnClick:function(){var t=0,n="",a="",i="",r="",l=0,s=e.state.selvalue,p=s.dc_flag.value,d=parseFloat(s.trsamt.value),f=s.bank_seq_no.value,h=s.pk_yhhd.value,m=e.state.selhandlinkmap,g=m.size;if(0==g)return(0,c.toast)({color:"warning",content:e.props.MutiInit.getIntl("3610HD")&&e.props.MutiInit.getIntl("3610HD").get("3610HD-000019")}),{};var v=!0,b=!1,y=void 0;try{for(var w,x=m[Symbol.iterator]();!(v=(w=x.next()).done);v=!0){var I=w.value,_=o(I,2),k=_[0],D=_[1];n=k,a=D.billcode.value,i+=n,r+=a,t<g-1&&(i+=",",r+=","),l+="d"==p||"D"==p?parseFloat(D.paylocal.value):parseFloat(D.receivelocal.value),t++}}catch(e){b=!0,y=e}finally{try{!v&&x.return&&x.return()}finally{if(b)throw y}}if(l!=d)(0,c.toast)({color:"warning",content:e.props.MutiInit.getIntl("3610HD")&&e.props.MutiInit.getIntl("3610HD").get("3610HD-000019")});else{var S=e.props.table.getPks("YhhdVO"),O={pk_yhhd:h,billtype:e.state.billtype,transerial:f,selpks:i,money:d,selbillnos:r};(0,c.ajax)({url:"/nccloud/obm/ebankyhhd/handlink.do",data:O,success:function(t){var n=t.success;t.data;n?((0,u.pageInfoClick)(e.props,null,S),(0,c.toast)({color:"success",content:e.props.MutiInit.getIntl("3610HD").get("3610HD-000028")})):(0,c.toast)({color:"warning",content:e.props.MutiInit.getIntl("3610HD")&&e.props.MutiInit.getIntl("3610HD").get("3610HD-000020")})}})}}}),y("linkcancel",{title:this.props.MutiInit.getIntl("3610HD")&&this.props.MutiInit.getIntl("3610HD").get("3610HD-000021"),className:"senior",hasCloseBtn:!0,style:{width:"520px",height:"268px"},content:p.default.createElement("div",{className:"form-wrapper"},this.props.MutiInit.getIntl("3610HD")&&this.props.MutiInit.getIntl("3610HD").get("3610HD-000022")),beSureBtnClick:function(){var t=e.state.selpks,n=e.props.table.getPks("YhhdVO"),a={selpks:t};(0,c.ajax)({url:"/nccloud/obm/ebankyhhd/handlinkcancel.do",data:a,success:function(t){var a=t.success;t.data;a?(0,u.pageInfoClick)(e.props,null,n):(0,c.toast)({color:"warning",content:e.props.MutiInit.getIntl("3610HD")&&e.props.MutiInit.getIntl("3610HD").get("3610HD-000023")})}})}}),p.default.createElement(g,{show:this.state.showlinkquerybill,onHide:this.LinkCloseClick,style:{width:"800px"}},p.default.createElement(g.Header,null,p.default.createElement(g.Title,null,this.props.MutiInit.getIntl("3610HD")&&this.props.MutiInit.getIntl("3610HD").get("3610HD-000024"))," "),p.default.createElement(g.Body,null,p.default.createElement("div",null,d("linkquerybill",{handlePageInfoChange:u.pageInfoClickBill,tableModelConfirm:u.tableModelConfirm,showCheck:!0,showIndex:!0,height:"400px"}))),p.default.createElement(g.Footer,null,p.default.createElement(v,{onClick:this.LinkViewClick},this.props.MutiInit.getIntl("3610HD")&&this.props.MutiInit.getIntl("3610HD").get("3610HD-000025")),"  ",p.default.createElement(v,{onClick:this.LinkCloseClick},this.props.MutiInit.getIntl("3610HD")&&this.props.MutiInit.getIntl("3610HD").get("3610HD-000026")),"  ")))}}]),t}(s.Component),i=function(){var e=this;this.getButtonNames=function(e){return"main-button"},this.getData=function(){},this.toggleShow=function(){e.props.button.setDisabled({download:!1,refresh:!1,downloadfile:!0,file:!0,linkquery:!0,printBtn:!0,outputBtn:!0,linkBtn:!0,linkCancelBtn:!0})},this.updateSelhandlink=function(t,n,a,i,o){var r=a.pk_detail.value,l=e.state.selhandlinkmap;1==o?l.has(r)||l.set(r,a):l.has(r)&&l.delete(r),e.setState({selhandlinkmap:l})},this.updateSelhandlinkAll=function(t,n,a,i){for(var o=0,r=e.state.selhandlinkmap;o<i;){var l=t.table.getAllTableData("linkquerytable").rows[o].values,s=l.pk_detail.value;1==a?r.has(s)||r.set(s,l):r.has(s)&&r.delete(s),o+=1}e.setState({selhandlinkmap:r})},this.updateButtonStatus=function(){var t=e.props.table.getCheckedRows("YhhdVO");e.props.button.setDisabled({downloadfile:t&&t.length<1,file:t&&t.length<1,printBtn:t&&t.length<1,outputBtn:t&&t.length<1});var n=!1,a=!1,i=0,o=null,r=null,l=!1,s=!1;null==t||0==t.length||t.length>1?(n=!1,s=!1,e.setState({selvalue:null})):(o=t[0].index,r=e.props.table.getAllTableData("YhhdVO").rows[o].values,e.setState({selvalue:r}),1==r.autolink.value?(n=!1,s=!0):null==(l=r.handlink.value)||0==l?(n=!0,s=!1):(n=!1,s=!0));var p=!n,d=!s,c=[];if(t.forEach((function(e){c.push(e.data.values.pk_yhhd.value)})),e.setState({selpks:c}),null==t||0==t.length)a=!1;else for(i=0,a=!0;i<t.length;){if(null==(l=(r=t[i].data.values).handlink.value)||0==l){a=!1;break}i+=1}var u=!a;e.props.button.setDisabled({linkBtn:p,linkCancelBtn:u,linkquery:d})},this.onHideUploader=function(){e.setState({showUploader:!1})},this.InputCancelClick=function(){e.setState({showmodal:!1})},this.InputClick=function(){e.setState({showmodal:!0})},this.InputOkClick=function(){var t=form.getAllFormValue("download");if(form.isCheckNow("download")){var n={model:r({pageInfo:{pageIndex:0,pageSize:10,total:0,totalPage:0}},t)};(0,c.ajax)({url:"/nccloud/obm/ebankyhhd/download.do",data:n,success:function(t){var n=t.success,a=t.data;n&&(a&&a[e.tableId]?(e.props.table.setAllTableData(e.tableId,a[e.tableId]),c.cacheTools.set("3610HD_L01_data",a[e.tableId])):e.props.table.setAllTableData(e.tableId,{rows:[]})),e.setState({showmodal:!1})}})}},this.buttonYes=function(){var t={begdate:e.state.querycond.begdate,enddate:e.state.querycond.enddate,org:e.state.querycond.org,curacc:e.state.querycond.curacc};(0,c.ajax)({url:"/nccloud/obm/ebankyhhd/query.do",data:t,success:function(t){console.log("123");var n=t.success,a=t.data;n&&(a&&a.YhhdVO?e.props.table.setAllTableData("YhhdVO",a.YhhdVO):e.props.table.setAllTableData("YhhdVO",{rows:[]}))}})},this.LinkCloseClick=function(){e.setState({showlinkquerybill:!1})},this.LinkViewClick=function(){var t;if(null!=(t=e.props.table.getCheckedRows("linkquerybill"))&&0!=t.length)if(t.length>1)(0,c.toast)({color:"warning",content:e.props.MutiInit.getIntl("3610PAYR")&&e.props.MutiInit.getIntl("3610PAYR").get("3610PAYR-000030")+"！"});else{var n=t[0].data.values,a=n.pk_bill.value,i=n.pk_billtype.value;n.billcode.value;"D2"==i||0==i.search("F2")?e.props.openTo("/nccloud/resources/arap/gatheringbill/gatheringbill/main/index.html#/card",{id:a,status:"browse",scene:"linksce",appcode:"20060GBM",pagecode:"20060GBM_CARD_LINK"}):"D3"==i||0==i.search("F3")?e.props.openTo("/nccloud/resources/arap/paybill/paybill/main/index.html#/card",{id:a,status:"browse",scene:"linksce",appcode:"20080EBM",pagecode:"20080EBM_CARD_LINK"}):"D4"==i||0==i.search("F4")?e.props.openTo("/nccloud/resources/cmp/billmanagement/recbill/linkcard/index.html",{status:"browse",id:a,scene:"linksce",appcode:"36070RBM",pagecode:"36070RBMLINK_C01"}):"D5"==i||0==i.search("F5")?e.props.openTo("/nccloud/resources/cmp/billmanagement/paybill/linkcard/index.html",{status:"browse",id:a,scene:"linksce",appcode:"36070PBR",pagecode:"36070PBR_C02"}):0==i.search("263")?e.props.openTo("/nccloud/resources/erm/ybz/ybz/viewbill/index.html?tradetype=263X-Cxx-TYJKD",{status:"browse",id:a,scene:"linksce",appcode:"201102JTYF",pagecode:"201102JTYF_C"}):0==i.search("264")?"2647"==i?e.props.openTo("/nccloud/resources/erm/ybz/ybz/viewbill/index.html?tradetype=2647",{status:"browse",id:a,scene:"linksce",appcode:"201102HKD",pagecode:"201102HKD_card_001"}):e.props.openTo("/nccloud/resources/erm/ybz/ybz/viewbill/index.html?tradetype=264X-Cxx-TYBXD",{status:"browse",id:a,scene:"linksce",appcode:"201102BTYF",pagecode:"201102BTYF_C"}):"36J1"==i||"36J5"==i?e.props.openTo("",{status:"browse",id:a,scene:"linksce",appcode:"36300TP",pagecode:"36300TP_L01"}):"36J2"==i||"36J7"==i?e.props.openTo("/nccloud/resources/fts/commission/commissiongathering/main/index.html#/linkcard",{status:"browse",id:a,scene:"linksce",appcode:"36300TG",pagecode:"36300TG_C01_LINK"}):"36K4"==i?e.props.openTo("/nccloud/resources/sf/delivery/delivery/main/index.html#/cardlinkq",{status:"browse",id:a,scene:"linksce",appcode:"36320FDA",pagecode:"36320FDA_Q01"}):"36K2"==i&&e.props.openTo("/nccloud/resources/sf/allocation/allocate/main/index.html#/linkcard",{status:"browse",id:a,scene:"linksce",appcode:"36320FA",pagecode:"36320FA_LINKC01"})}else(0,c.toast)({color:"warning",content:e.props.MutiInit.getIntl("3610PAYR")&&e.props.MutiInit.getIntl("3610PAYR").get("3610PAYR-000024")})}},a);b=(0,c.createPage)({mutiLangCode:"3610HD",initTemplate:u.initTemplate})(b),d.default.render(p.default.createElement(b,null),document.querySelector("#app"))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refresh=t.onAfterEvent=t.pageInfoClickBill=t.pageInfoClickHand=t.pageInfoClick=t.searchBtnClick=t.tableModelConfirm=t.afterEvent=t.initTemplate=t.buttonClick=void 0;var a=f(n(6)),i=f(n(9)),o=f(n(10)),r=f(n(11)),l=f(n(3)),s=f(n(12)),p=f(n(13)),d=f(n(14)),c=f(n(15)),u=f(n(17));function f(e){return e&&e.__esModule?e:{default:e}}t.buttonClick=a.default,t.initTemplate=i.default,t.afterEvent=o.default,t.tableModelConfirm=r.default,t.searchBtnClick=l.default,t.pageInfoClick=s.default,t.pageInfoClickHand=p.default,t.pageInfoClickBill=d.default,t.onAfterEvent=c.default,t.refresh=u.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=this;switch(console.log(t),t){case"download":this.props.modal.show("download");break;case"refresh":l(e);break;case"downloadfile":var i=e.table.getCheckedRows("YhhdVO");if(null==i||0==i.length)return void(0,a.toast)({color:"warning",content:this.props.MutiInit.getIntl("3610HD")&&this.props.MutiInit.getIntl("3610HD").get("3610HD-000001")});for(var o=[],s=0;s<i.length;s++)o[s]=i[s].data.values.pk_yhhd.value;(0,a.ajax)({url:"/nccloud/obm/ebankyhhd/downloadfile.do",data:{pk:o},success:function(t){var i=t.success;t.data;if(i){var r=[];r=a.cacheTools.get("3610HD_L01_data");for(var l=0;l<r.rows.length;l++){var s=r.rows[l].values.pk_yhhd.value;o.indexOf(s)>-1&&(r.rows[l].values.downfileflag.value=!0)}var p=new Number(r.pageInfo.pageIndex)-1;return r.pageInfo.pageIndex=p+"",e.table.setAllTableData("YhhdVO",r),a.cacheTools.set("3610HD_L01_data",r),void(0,a.toast)({duration:3,color:"success",title:n.props.MutiInit.getIntl("3610HD")&&n.props.MutiInit.getIntl("3610HD").get("3610HD-000002"),content:n.props.MutiInit.getIntl("3610HD")&&n.props.MutiInit.getIntl("3610HD").get("3610HD-000003")})}}});break;case"printBtn":var p=e.table.getCheckedRows(this.tableId);if(0==p.length)return void(0,a.toast)({duration:3,color:"warning",title:this.props.MutiInit.getIntl("3610HD")&&this.props.MutiInit.getIntl("3610HD").get("3610HD-000004"),content:this.props.MutiInit.getIntl("3610HD")&&this.props.MutiInit.getIntl("3610HD").get("3610HD-000005")});var d=[];p.forEach((function(e){d.push(e.data.values.pk_yhhd.value)}));var c=[],u=[],f=null,h="",m=0;null!=d&&(d.forEach((function(e){m>0&&(h+=","),m+=1,h+=e})),(0,a.ajax)({url:"/nccloud/obm/ebankyhhd/attachment.do",data:{billId:h,fullPath:h},success:function(t){t.data&&t.date!=[]&&(t.data.forEach((function(e){console.log(e),null!=e.pk&&null!=e.pk_doc&&null!=e.name&&null!=(f=e.name.split(".")[1])&&""!=f&&(1,u.push(e.pk_doc+"."+f),c.push(f))})),r(e,"/nccloud/obm/ebankyhhd/print.do",{oids:u,suffx:c,funcode:"10220SLOG",appcode:"10220SLOG",nodekey:null,download:"fileStream",type:"3"},!1))}}));break;case"previewBtn":var g=e.table.getCheckedRows(this.tableId);if(0==g.length)return void(0,a.toast)({duration:3,color:"warning",title:this.props.MutiInit.getIntl("3610HD")&&this.props.MutiInit.getIntl("3610HD").get("3610HD-000004"),content:this.props.MutiInit.getIntl("3610HD")&&this.props.MutiInit.getIntl("3610HD").get("3610HD-000005")});var v=[];g.forEach((function(e){v.push(e.data.values.pk_yhhd.value)})),(0,a.print)("pdf","/nccloud/obm/ebankyhhd/print.do",{billtype:"YHHD",funcode:"3610HD",oids:v});break;case"outputBtn":!function(e){var t=e.table.getCheckedRows("YhhdVO"),n=[];t.forEach((function(e){n.push(e.data.values.pk_yhhd.value)})),(0,a.output)({url:"/nccloud/obm/ebankyhhd/output.do",data:{oids:n,outputType:"output"}})}(e);break;case"file":var b=e.table.getCheckedRows(this.tableId),y="",w="";if(1!=b.length)return void(0,a.toast)({duration:3,color:"warning",title:this.props.MutiInit.getIntl("3610HD")&&this.props.MutiInit.getIntl("3610HD").get("3610HD-000004"),content:this.props.MutiInit.getIntl("3610HD")&&this.props.MutiInit.getIntl("3610HD").get("3610HD-000006")});if(b.forEach((function(e){e.data.values.pk_yhhd&&null!=e.data.values.pk_yhhd.value&&(y=e.data.values.pk_yhhd.value),e.data.values.bill_no&&null!=e.data.values.bill_no.value&&(w=e.data.values.bill_no.value)})),console.log(w,this.props.MutiInit.getIntl("3610HD")&&this.props.MutiInit.getIntl("3610HD").get("3610HD-000007")),console.log(y,"pk_rec"),console.log(w,"bill_no"),!y)return void(0,a.toast)({duration:3,color:"warning",title:this.props.MutiInit.getIntl("3610HD")&&this.props.MutiInit.getIntl("3610HD").get("3610HD-000004"),content:this.props.MutiInit.getIntl("3610HD")&&this.props.MutiInit.getIntl("3610HD").get("3610HD-000008")});this.setState({billId:y,billno:w,showUploader:!this.state.showUploader,target:null});break;case"linkquery":var x=e.table.getCheckedRows(this.tableId);if(1!=x.length)return void(0,a.toast)({color:"warning",content:this.props.MutiInit.getIntl("3610HD")&&this.props.MutiInit.getIntl("3610HD").get("3610HD-000009")});var I=void 0;x.forEach((function(e){e.data.values.pk_yhhd&&e.data.values.pk_yhhd.value&&(I=e.data.values.pk_yhhd.value)})),console.log(I,"billtrack_showbilltrackpk");var _={pk_yhhd:I};(0,a.ajax)({url:"/nccloud/obm/ebankyhhd/linkquerybill.do",data:_,success:function(t){var i=t.success,o=t.data;i?(o&&o.linkquerybill?e.table.setAllTableData("linkquerybill",o.linkquerybill):e.table.setAllTableData("linkquerybill",{rows:[]}),n.setState({showlinkquerybill:!0})):(0,a.toast)({color:"warning",content:n.props.MutiInit.getIntl("3610HD")&&n.props.MutiInit.getIntl("3610HD").get("3610HD-000027")})}});break;case"linkBtn":for(var k=e.table.getCheckedRows("YhhdVO")[0].index,D=e.table.getAllTableData("YhhdVO").rows[k].values.dc_flag.value,S=e.meta.getMeta(),O=S.linkquery.items,P=null==O?0:O.length,C=null,T=0;T<P;T++)if("billtype"==O[T].attrcode){C=O[T];break}C.options;var M=null;M="c"==D||"C"==D?[{display:this.props.MutiInit.getIntl("3610HD").get("3610HD-000029"),value:1},{display:this.props.MutiInit.getIntl("3610HD").get("3610HD-000031"),value:3},{display:this.props.MutiInit.getIntl("3610HD").get("3610HD-000033"),value:5}]:[{display:this.props.MutiInit.getIntl("3610HD").get("3610HD-000030"),value:2},{display:this.props.MutiInit.getIntl("3610HD").get("3610HD-000032"),value:4},{display:this.props.MutiInit.getIntl("3610HD").get("3610HD-000034"),value:6},{display:this.props.MutiInit.getIntl("3610HD").get("3610HD-000035"),value:7}],C.options=M,e.meta.setMeta(S),this.props.modal.show("linkquery");break;case"linkCancelBtn":this.props.modal.show("linkcancel")}};var a=n(0),i=o(n(7));o(n(3));function o(e){return e&&e.__esModule?e:{default:e}}var r=i.default.printOnClient;i.default.printPreview,i.default.printerView;var l=function(e){var t=e.search.getAllSearchData("search",!1),n=e.table.getTablePageInfo("YhhdVO"),i={conditions:t.conditions||t,pageInfo:n,pagecode:"3610HD_L01",queryAreaCode:"search",oid:"0001ZZ100000000066A3",queryType:"simple"};console.log(i),(0,a.ajax)({url:"/nccloud/obm/ebankyhhd/query.do",data:i,success:function(t){var n=t.success,i=t.data;n&&(i?(e.table.setAllTableData("YhhdVO",t.data.YhhdVO),(0,a.toast)({color:"success",content:e.MutiInit.getIntl("3610HD")&&e.MutiInit.getIntl("3610HD").get("3610HD-000036")})):(e.table.setAllTableData("YhhdVO",{rows:[]}),(0,a.toast)({color:"warning",content:e.MutiInit.getIntl("3610HD")&&e.MutiInit.getIntl("3610HD").get("3610HD-000013")})))},error:function(e){console.log(e.message)}})}},function(e,t,n){"use strict";(function(e){var a,i,o,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(l,s){"object"==r(t)&&"object"==r(e)?e.exports=s(n(0),n(2),n(1)):(i=[n(0),n(2),n(1)],void 0===(o="function"==typeof(a=s)?a.apply(t,i):a)||(e.exports=o))}(window,(function(e,t,n){return function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==(void 0===e?"undefined":r(e))&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="../../../../",n(n.s=39)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,a=e[1]||"",i=e[3];if(!i)return a;if(t&&"function"==typeof btoa){var o=(n=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),r=i.sources.map((function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"}));return[a].concat(r).concat([o]).join("\n")}return[a].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var a={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(a[o]=!0)}for(i=0;i<e.length;i++){var r=e[i];"number"==typeof r[0]&&a[r[0]]||(n&&!r[2]?r[2]=n:n&&(r[2]="("+r[2]+") and ("+n+")"),t.push(r))}},t}},function(e,t,n){var a,i,o={},l=(a=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=a.apply(this,arguments)),i}),s=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e.call(this,n)),t[n]}}((function(e){return document.querySelector(e)})),p=null,d=0,c=[],u=n(5);function f(e,t){for(var n=0;n<e.length;n++){var a=e[n],i=o[a.id];if(i){i.refs++;for(var r=0;r<i.parts.length;r++)i.parts[r](a.parts[r]);for(;r<a.parts.length;r++)i.parts.push(y(a.parts[r],t))}else{var l=[];for(r=0;r<a.parts.length;r++)l.push(y(a.parts[r],t));o[a.id]={id:a.id,refs:1,parts:l}}}}function h(e,t){for(var n=[],a={},i=0;i<e.length;i++){var o=e[i],r=t.base?o[0]+t.base:o[0],l={css:o[1],media:o[2],sourceMap:o[3]};a[r]?a[r].parts.push(l):n.push(a[r]={id:r,parts:[l]})}return n}function m(e,t){var n=s(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var a=c[c.length-1];if("top"===e.insertAt)a?a.nextSibling?n.insertBefore(t,a.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),c.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function g(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=c.indexOf(e);t>=0&&c.splice(t,1)}function v(e){var t=document.createElement("style");return e.attrs.type="text/css",b(t,e.attrs),m(e,t),t}function b(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function y(e,t){var n,a,i,o;if(t.transform&&e.css){if(!(o=t.transform(e.css)))return function(){};e.css=o}if(t.singleton){var r=d++;n=p||(p=v(t)),a=I.bind(null,n,r,!1),i=I.bind(null,n,r,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",b(t,e.attrs),m(e,t),t}(t),a=k.bind(null,n,t),i=function(){g(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(t),a=_.bind(null,n),i=function(){g(n)});return a(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;a(e=t)}else i()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=("undefined"==typeof document?"undefined":r(document)))throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==r(t.attrs)?t.attrs:{},t.singleton||(t.singleton=l()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=h(e,t);return f(n,t),function(e){for(var a=[],i=0;i<n.length;i++){var r=n[i];(l=o[r.id]).refs--,a.push(l)}for(e&&f(h(e,t),t),i=0;i<a.length;i++){var l;if(0===(l=a[i]).refs){for(var s=0;s<l.parts.length;s++)l.parts[s]();delete o[l.id]}}}};var w,x=(w=[],function(e,t){return w[e]=t,w.filter(Boolean).join("\n")});function I(e,t,n,a){var i=n?"":a.css;if(e.styleSheet)e.styleSheet.cssText=x(t,i);else{var o=document.createTextNode(i),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(o,r[t]):e.appendChild(o)}}function _(e,t){var n=t.css,a=t.media;if(a&&e.setAttribute("media",a),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function k(e,t,n){var a=n.css,i=n.sourceMap,o=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||o)&&(a=u(a)),i&&(a+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var r=new Blob([a],{type:"text/css"}),l=e.href;e.href=URL.createObjectURL(r),l&&URL.revokeObjectURL(l)}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,a=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var i,o=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(o)?e:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:a+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")}))}},,function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.gerRequestVO=t.isWindowSystem=t.findCurrPrinterNameObjById=t.initTempalteIdInfo=t.initFormVal=t.modifyMeta=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=n(0),o=i.viewModel.getGlobalStorage;function r(e){return!Object.keys(e).length}function l(e){return!e||!Object.keys(e).length}var s=function(e){var t=[];return e.nccloudPrinterList.length?(e.nccloudPrinterList.forEach((function(e){t.push(a({},e,{display:e.printerName,value:e.printerId}))})),t):t},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return"Array"!==Object.prototype.toString.call(e).slice(8,-1)||!e.length};function d(e,t){var n=this.state.responseAllData.currentNCCloudPrinter,a=void 0===n?{}:n;if(!t&&r(a)||!t&&!a.printerName)return e[0];if(!t&&!r(a))return function(e,t){var n={};return p(e)?n:n=e.find((function(e){return e.printerName==t.printerName}))}(e,a);if(t){var i=e.find((function(e){return t===e.printerId}));return!i||r(i)?e[0]:i}}function c(e,t){return d.call(this,e,t)}function u(e,t){var n=[];return e.nccloudPaperResourceList&&e.nccloudPaperResourceList.length?(e.nccloudPaperResourceList.forEach((function(e){n.push({display:e.paperSourceName,value:e.paperSourceId})})),n):n}function f(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=[];return e.paperList&&e.paperList.length?(e.paperList.forEach((function(e){t.push(a({},e,{display:e.paperName,value:e.paperId}))})),t):t}function h(e){var t=this.state.responseAllData,n=(void 0===t?{}:t).currentNccloudPaper,a=void 0===n?{}:n,i={};return r(a)?e.paperList[0]:(i=e.paperList.find((function(e){return e.paperName.trim()==a.paperName.trim()})))?i:(i=e.paperList.find((function(e){return e.paperName.trim().includes("自定义纸张")||e.paperId.trim().includes("defined")})),i=Object.assign({},i,a))}var m=function(e){var t=[];return p(e.nccloudTemplateInfoList)||e.nccloudTemplateInfoList.forEach((function(e){t.push({display:e.templateName,value:e.templateId})})),t};function g(){var e={},t=this.props.form.getAllFormValue("printRange").rows[0].values;for(var n in t)e[n]=t[n].value;return e.doubleside=0!=e.doubleside,e.isDuplex=1!=e.doubleside,e}function v(){var e={},t=this.props.form.getAllFormValue("printMachine").rows[0].values;for(var n in t)e[n]=t[n].value;return e}function b(){var e={},t=this.props.form.getAllFormValue("printStyle").rows[0].values;for(var n in t)e[n]=t[n].value;return e}t.modifyMeta=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.state.responseAllData,n=this.props.meta.getMeta(),a=s.call(this,t);if(this.printerVO=c.call(this,t.nccloudPrinterList,e),a){var i=u.call(this,this.printerVO,e),o=f.call(this,this.printerVO,e),r=m.call(this,t);n.printTemplate.items.map((function(e){"templateInfoList"===e.attrcode&&(e.options=r)})),n.printMachine.items.map((function(e){"PrinterList"===e.attrcode&&(e.options=a),"paperResourceList"===e.attrcode&&(e.options=i)})),n.printStyle.items.map((function(e){"paperList"===e.attrcode&&(e.options=o)})),this.props.meta.setMeta(n)}else toast({content:this.state.json.index_067})},t.initFormVal=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2];var t=this.state.configParams,n={};if(console.log({ais:JSON.parse(o("localStorage",t.asid))}),this.state.asid&&o("localStorage",t.asid)){var a=JSON.parse(o("localStorage",t.asid)).toEndInfo;n=JSON.parse(a.ncclouPrintSetting)}var i=this.state.json.index_027,r=0;!l(n)&&n.doubleside&&(n.isDuplex?n.isDuplex&&(i=this.state.json.index_029,r=2):(i=this.state.json.index_028,r=1));var s={rows:[{values:{pageRangeType:{display:l(n)?this.state.json.index_000:n.pageRangeType.display,value:l(n)?0:n.pageRangeType},pageFrom:{value:l(n)?1:n.pageFrom},pageTo:{value:l(n)?1:n.pageTo},pageWholeType:{display:l(n)||0==n.pageWholeType?this.state.json.index_020:1==n.pageWholeType?this.state.json.index_021:this.state.json.index_022,value:l(n)?0:n.pageWholeType},copies:{value:l(n)?1:n.copies||1},collated:{value:!l(n)&&n.collated},doubleside:{display:i,value:r}}}]};!l(n)&&n.doubleside.value&&this.props.form.setFormItemsDisabled("printRange",{isDuplex:!1}),l(n)||1!=n.pageRangeType.value||this.props.form.setFormItemsVisible("printRange",{pageFrom:!0,pageTo:!0});var p={rows:[{values:{PrinterList:{display:this.printerVO.printerName,value:this.printerVO.printerId},printerStatus:{display:this.printerVO.printerStatus?this.state.json.index_062:this.state.json.index_063,value:this.printerVO.printerStatus},twoSide:{display:this.printerVO.twoSide?this.state.json.index_064:this.state.json.index_065,value:this.printerVO.twoSide},paperResourceList:{display:this.printerVO.nccloudPaperResourceList.length?this.printerVO.nccloudPaperResourceList[0].paperSourceName:"",value:this.printerVO.nccloudPaperResourceList.length?this.printerVO.nccloudPaperResourceList[0].paperSourceId:""}}}]},d=h.call(this,this.printerVO),c={rows:[{values:{paperList:{display:d.paperName,value:d.paperId},paperWidth:{value:e.nccloudPaperDirect?d.paperHeight:d.paperWidth},paperHeight:{value:e.nccloudPaperDirect?d.paperWidth:d.paperHeight},nccloudPaperDirect:{display:e.nccloudPaperDirect?this.state.json.index_039:this.state.json.index_038,value:e.nccloudPaperDirect||!1},isMultiColor:{value:!1}}}]};this.props.form.setFormItemsDisabled("printStyle",{paperWidth:this.state.json.index_015!==d.paperName,paperHeight:this.state.json.index_015!==d.paperName}),this.props.form.setAllFormValue({printRange:s}),this.props.form.setAllFormValue({printMachine:p}),this.props.form.setAllFormValue({printStyle:c})},t.initTempalteIdInfo=function(e){var t=this.state.configParams.printTemplateID,n={};if(p(e.nccloudTemplateInfoList))return{display:"",value:""};n=e.nccloudTemplateInfoList[0],t?(n=e.nccloudTemplateInfoList.find((function(e){return e.templateId==t})))&&!p(e.nccloudTemplateInfoList)||(n=e.nccloudTemplateInfoList[0]):e.currentNCCloudTemplateInfo&&Object.keys(e.currentNCCloudTemplateInfo).length&&(n=e.currentNCCloudTemplateInfo),this.props.form.setFormItemsValue("printTemplate",{templateInfoList:{display:n.templateName,value:n.templateId}})},t.findCurrPrinterNameObjById=d,t.isWindowSystem=function(){return navigator.userAgent.toLowerCase().includes("windows")},t.gerRequestVO=function(){console.log(this.props.params);var e=(0,i.deepClone)(this.props.params),t=this.state.nopreview;e.formulaConfig&&delete e.formulaConfig;var n,a,o={},r={},l={},s=b.call(this),p=v.call(this),d=g.call(this);for(var c in p)l[c]=p[c];var u=this.props.form.getFormItemsValue("printMachine","PrinterList");for(var f in l.printerId=u.value,l.printerName=u.display,l.PrinterList&&delete l.PrinterList,s)r[f]=s[f];var h=this.props.form.getFormItemsValue("printStyle","paperList");for(var m in r.paperList&&delete r.paperList,r.paperName=h.display,r.paperId=h.value,o.nccloudPaperDirect=r.nccloudPaperDirect,d)o[m]=d[m];o.doubleside=0!=o.doubleside,o.isDuplex=1!=o.doubleside,o.isMultiColor=r.isMultiColor,delete r.isMultiColor;var y=this.props.form.getFormItemsValue("printMachine","paperResourceList");n={paperSourceId:y.value||"",paperSourceName:y.display||""};var w=this.props.form.getFormItemsValue("printTemplate","templateInfoList");return a={templateId:w.value||"",templateName:w.display||""},o=Object.assign({},o,{currentNccloudPaper:r,currentNCCloudPaperResource:n,currentNCCloudPrinter:l,currentNCCloudTemplateInfo:a,nopreview:t}),console.log({requestVO:Object.assign({},e,{ncclouPrintSetting:o})}),Object.assign({},e,{printTemplateID:a.templateId||null,ncclouPrintSetting:JSON.stringify(o),printSetting:JSON.stringify(o),nopreview:t})}},function(e,t,n){(function(e){var n="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(e){return void 0===e?"undefined":r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":r(e)};!function(a,i){var o={};a.PubSub=o;var r=a.define;!function(e){var t={},a=-1;function i(e){var t;for(t in e)if(e.hasOwnProperty(t))return!0;return!1}function o(e,t,n){try{e(t,n)}catch(e){setTimeout(function(e){return function(){throw e}}(e),0)}}function r(e,t,n){e(t,n)}function l(e,n,a,i){var l,s=t[n],p=i?r:o;if(t.hasOwnProperty(n))for(l in s)s.hasOwnProperty(l)&&p(s[l],e,a)}function s(e,a,o,r){var s=function(e,t,n){return function(){var a=String(e),i=a.lastIndexOf(".");for(l(e,e,t,n);-1!==i;)i=(a=a.substr(0,i)).lastIndexOf("."),l(e,a,t,n)}}(e="symbol"===(void 0===e?"undefined":n(e))?e.toString():e,a,r);return!!function(e){for(var n=String(e),a=Boolean(t.hasOwnProperty(n)&&i(t[n])),o=n.lastIndexOf(".");!a&&-1!==o;)o=(n=n.substr(0,o)).lastIndexOf("."),a=Boolean(t.hasOwnProperty(n)&&i(t[n]));return a}(e)&&(!0===o?s():setTimeout(s,0),!0)}e.publish=function(t,n){return s(t,n,!1,e.immediateExceptions)},e.publishSync=function(t,n){return s(t,n,!0,e.immediateExceptions)},e.subscribe=function(e,i){if("function"!=typeof i)return!1;e="symbol"===(void 0===e?"undefined":n(e))?e.toString():e,t.hasOwnProperty(e)||(t[e]={});var o="uid_"+String(++a);return t[e][o]=i,o},e.subscribeOnce=function(t,n){var a=e.subscribe(t,(function(){e.unsubscribe(a),n.apply(this,arguments)}));return e},e.clearAllSubscriptions=function(){t={}},e.clearSubscriptions=function(e){var n;for(n in t)t.hasOwnProperty(n)&&0===n.indexOf(e)&&delete t[n]},e.unsubscribe=function(n){var a,i,o,r="string"==typeof n&&(t.hasOwnProperty(n)||function(e){var n;for(n in t)if(t.hasOwnProperty(n)&&0===n.indexOf(e))return!0;return!1}(n)),l=!r&&"string"==typeof n,s="function"==typeof n,p=!1;if(!r){for(a in t)if(t.hasOwnProperty(a)){if(i=t[a],l&&i[n]){delete i[n],p=n;break}if(s)for(o in i)i.hasOwnProperty(o)&&i[o]===n&&(delete i[o],p=!0)}return p}e.clearSubscriptions(n)}}(o),"function"==typeof r&&r.amd?r((function(){return o})):"object"===n(t)&&(void 0!==e&&e.exports&&(t=e.exports=o),t.PubSub=o,e.exports=t=o)}("object"===("undefined"==typeof window?"undefined":n(window))&&window||void 0)}).call(this,n(10)(e))},,function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},,,,function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.default=function(e,t,n){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments[4],r=function(o,r){r?s(e,t,n,a,i,o):console.log("未加载到多语资源")};(0,o.getMultiLang)({moduleId:"contains_printOnClient",callback:r})},l(n(2)),l(n(1));var i=l(n(15)),o=n(0),r=n(7);function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e,t,n,i,r,l){var s=n.ncclouPrintSetting;s&&s.printTemplateID?p(e,t,a({},n,{printTemplateID:i?s.printTemplateID:n.printTemplateID,printSetting:JSON.stringify(s)}),r,l):i?function(e,t,n,i,r){var l=null;(0,o.ajax)({method:"post",url:"/nccloud/platform/print/queryTemplates.do",data:n,success:function(s){var d=s.success,c=s.data;if(d){if(!c||!c.length)return(0,o.toast)({color:"warning",content:r.index_048});l=c[0].m_ctemplateid?c[0].m_ctemplateid:null,p(e,t,a({},n,{printTemplateID:l}),i,r)}}})}(e,t,n,r,l):p(e,t,n,r,l)};function p(e,t,n,o,l){var s=(0,r.isWindowSystem)()?"1":"2";n.sysType&&(s=n.sysType),(0,i.default)({newProps:e,params:a({},n,{realData:n.realData||!1,download:"preview",sysType:s}),url:t,enctype:2},o,l)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=s(n(1)),o=n(0),r=s(n(42)),l=s(n(16));function s(e){return e&&e.__esModule?e:{default:e}}var p,d,c=o.base.NCLoading,u=window.document.createElement("div");function f(e){i.default.render(React.createElement(c,{show:!0,fullScreen:!0,container:e}),e)}function h(e){e.className="",i.default.unmountComponentAtNode(e),e.parentElement&&e.parentElement.removeChild(e)}window.document.body.appendChild(u),u.className="nc-loading-hidden",t.default=(p=regeneratorRuntime.mark((function e(t){var n,s,p,d,c,m,g,v,b,y,w,x,I,_,k=t.newProps,D=t.params,S=t.url,O=t.enctype,P=t.hasModal,C=void 0!==P&&P,T=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},M=arguments[2];return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D.hadPlugin){e.next=10;break}return f(u),e.next=4,(0,l.default)(k,S,{});case 4:if("error"!==e.sent){e.next=9;break}return(0,o.toast)({color:"error",content:M.index_052}),h(u),e.abrupt("return");case 9:h(u);case 10:for(_ in C||(n=document.body,(s=document.createElement("section")).classList.add("form-preview-print-contain"),n.appendChild(s),i.default.render(React.createElement(r.default,a({},k,{params:D,url:S,onEnsureInfoSave:T})),s)),p="",d="",(c=window.parent.location.hash.split("?"))&&c[1]&&(m=c[1].split("&"))&&m instanceof Array&&m.forEach((function(e){-1!=e.indexOf("=")&&e.split("=")&&e.split("=")instanceof Array&&("n"===e.split("=")[0]&&e.split("=")[1]&&(p=decodeURIComponent(decodeURIComponent(e.split("=")[1]))),"c"===e.split("=")[0]&&e.split("=")[1]&&(d=decodeURIComponent(decodeURIComponent(e.split("=")[1]))))})),g=(p||null)+"-"+(window.actionName||null),v={sys_busiaction:g,sys_appcode:d,sys_ts:(new Date).getTime()},O=function(e){switch(e){case 1:return"multipart/form-data";case 2:return"application/x-www-form-urlencoded";case 3:return"text/plain";default:return"multipart/form-data"}}(O),b=[{target:"printPreviewModal",method:"POST",enctype:O,type:"hidden",action:S||""},document.createElement("form")],y=b[0],w=b[1],Object.assign(w,y),x=a({},D,v,{formulaConfig:null}),I=function(e){if(x[e]instanceof Array)x[e].forEach((function(t,n){var a=document.createElement("input");a.type="hidden",a.name=e,a.value=t,w.appendChild(a)}));else{var t=document.createElement("input");t.type="hidden",t.name=e,t.value=x[e],w.appendChild(t)}},x)I(_);return document.body.appendChild(w),w.submit(),document.body.removeChild(w),e.abrupt("return",!1);case 26:case"end":return e.stop()}}),e,this)})),d=function(){var e=p.apply(this,arguments);return new Promise((function(t,n){return function a(i,o){try{var r=e[i](o),l=r.value}catch(e){return void n(e)}if(!r.done)return Promise.resolve(l).then((function(e){a("next",e)}),(function(e){a("throw",e)}));t(l)}("next")}))},function(e){return d.apply(this,arguments)})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,i){var o=null;return new Promise((function(r,l){if(null!=o&&1==o.readyState)(0,a.toast)({color:"warning",content:i.index_043});else if("WebSocket"in window){o=null;var s=new WebSocket("ws://"+(n.socketIp||"127.0.0.1")+":9999/websocket");s.onopen=function(e){console.log("连接成功")},s.onclose=function(e){console.log("关闭连接")},s.onerror=function(a){return e.openTo("/uap/printExeDown/ExeDownload/main/index.html?pk_message=dd",{appcode:n.appcode,pagecode:n.pagecode,actionUrl:t}),r("error")},s.onmessage=function(e){console.log("msg",JSON.parse(e.data));var t={};if(e&&(Object.keys(e).length||e.data))return s.close(),t.nccloudPrinterList=JSON.parse(e.data).nccloudPrinterList,r(t)};var p={},d=setInterval((function(){if(s.readyState==WebSocket.OPEN){clearInterval(d),(p=Object.assign({},n,{compalteAddress:t,type:"2",nccloudsessionid:n.nccloudsessionid})).formulaConfig&&delete p.formulaConfig;var e=JSON.stringify(p);s.send(e)}}),1e3)}else(0,a.toast)({color:"warning",content:i.index_046})}))};var a=n(0)},,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var a=l(n(40)),i=l(n(41)),o=l(n(50)),r=l(n(8));function l(e){return e&&e.__esModule?e:{default:e}}var s={printOnClient:a.default,printPreview:i.default,printerView:o.default,PubSub:r.default};t.default=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.default=function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],l=function(l,s,d){(0,o.isWindowSystem)()?(0,i.getMultiLang)({moduleId:"contains_printOnClient",callback:function(a,i,o){i?p(e,t,n,r,a):console.log("未加载到多语资源")}}):(0,i.print)("pdf",t,a({},n,{sysType:(0,o.isWindowSystem)()?"1":"2"}),r)};l()},r(n(2)),r(n(1));var i=n(0),o=n(7);function r(e){return e&&e.__esModule?e:{default:e}}var l=i.Cipher.opaqueDecrypt,s=i.viewModel.getGlobalStorage,p=function(e,t,n,o,r){(0,i.ajax)({url:"/nccloud/riart/printtool/sessionid.do",data:{printTemplateID:n.printTemplateID,nodekey:n.nodekey,appcode:n.appcode,num:3==n.type?n.oids.length.toString():"1"},success:function(p){var c=p.success,f=p.data;if(c)if(f.authority){var h=null;f.asid&&l(s("localStorage",f.asid))&&(h=JSON.parse(l(s("localStorage",f.asid))).toEndInfo);var m=a({},n,{nccloudsessionid:f.sessionid,ncclouPrintSetting:h,asid:f.asid});h&&h.printTemplateID?u(e,t,a({},m,{printTemplateID:h.printTemplateID}),r):o?d(e,t,m,r):u(e,t,m,r)}else(0,i.toast)({color:"warning",content:r.index_051});else(0,i.toast)({color:"error",content:r.index_047})},error:function(e){console.error(e.message)}})},d=function(e,t,n,o){var r=null;(0,i.ajax)({method:"post",url:"/nccloud/platform/print/queryTemplates.do",data:n,success:function(l){var s=l.success,p=l.data;if(s){if(!p||!p.length)return(0,i.toast)({color:"warning",content:"未查询到任何模板信息"});r=p[0].m_ctemplateid?p[0].m_ctemplateid:null,u(e,t,a({},n,{printTemplateID:r}),o)}},error:function(e){(0,i.toast)({color:"danger",content:e.message})}})},c=null,u=function(e,t,n,a){var o=null,r=n.beginUrl||window.location.protocol+"//"+window.location.hostname+":"+window.location.port,p=l(s("localStorage","cowboy")),d=s("localStorage","rockin")||!1;if(null!=o&&1==o.readyState)(0,i.toast)({color:"warning",content:a.index_043});else if("WebSocket"in window){o=null;var u=new WebSocket("ws://"+(n.socketIp||"127.0.0.1")+":9999/websocket");u.onopen=function(e){console.log("连接成功"),c=window.open("");var t="<div><h2 style='border-bottom: 1px solid #ddd;padding: 10px 0'>"+a.index_050+'</h2>\n          <div style="width: 560px; margin: 0 auto; position: relative;">\n            <div style="display:inline-block; text-align:center;">\n              <p><img style="width: 34px; height: 34px;" src="https://images.gitee.com/uploads/images/2019/0314/110540_e2d0849a_919028.png"/></p>\n              <span>'+a.index_058+'</span>\n            </div>\n            <p style="width:180px; border-bottom: 1px solid #ddd;position: absolute; top: 23px; left: 48px;"></p>\n            <div style="display:inline-block; text-align:center; margin-left: 150px;">\n              <p><img style="width: 40px; height: 40px;" src="https://images.gitee.com/uploads/images/2019/0314/110508_a5f9c80c_919028.png"/></p>\n              <span>'+a.index_059+'</span>\n            </div>\n            <p style="width:180px; border-bottom: 1px solid #ddd;position: absolute; top: 23px; left: 286px;"></p>\n            <div style="display:inline-block; text-align:center; margin-left: 150px;"">\n              <p><img style="width: 34px; height: 34px;" src="https://images.gitee.com/uploads/images/2019/0314/110518_e60c0d16_919028.png"/></p>\n              <span>...</span>\n            </div>\n          </div>\n        </div>    \n        ';c.document.body.innerHTML=t},u.onclose=function(e){console.log("关闭连接")},u.onerror=function(a){e.openTo("/uap/printExeDown/ExeDownload/main/index.html?pk_message=dd",{appcode:n.appcode,pagecode:n.pagecode,actionUrl:t})},u.onmessage=function(e){var t="<div><h2 style='border-bottom: 1px solid #ddd;padding: 10px 0'>"+a.index_050+'</h2>\n          <div style="width: 560px; margin: 0 auto; position: relative;">\n            <div style="display:inline-block; text-align:center;">\n              <p><img style="width: 34px; height: 34px;" src="https://images.gitee.com/uploads/images/2019/0314/110540_e2d0849a_919028.png"/></p>\n              <span>'+a.index_058+'</span>\n            </div>\n            <p style="width:180px; border-bottom: 1px solid #ddd;position: absolute; top: 23px; left: 48px;"></p>\n            <div style="display:inline-block; text-align:center; margin-left: 150px;">\n              <p><img style="width: 40px; height: 40px;" src="https://images.gitee.com/uploads/images/2019/0314/110508_a5f9c80c_919028.png"/></p>\n              <span>'+a.index_059+'</span>\n            </div>\n            <p style="width:180px; border-bottom: 1px solid #ddd;position: absolute; top: 23px; left: 286px;"></p>\n            <div style="display:inline-block; text-align:center; margin-left: 102px;"">\n              <p><img style="width: 34px; height: 34px;" src="https://images.gitee.com/uploads/images/2019/0314/110533_f85d3142_919028.png"/></p>\n              <span>'+a.index_061+"</span>\n            </div>\n          </div>\n        </div>    \n        ",n="<div><h2 style='border-bottom: 1px solid #ddd;padding: 10px 0'>"+a.index_050+'</h2>\n          <div style="width: 560px; margin: 0 auto; position: relative;">\n            <div style="display:inline-block; text-align:center;">\n              <p><img style="width: 34px; height: 34px;" src="https://images.gitee.com/uploads/images/2019/0314/110540_e2d0849a_919028.png"/></p>\n              <span>'+a.index_058+'</span>\n            </div>\n            <p style="width:180px; border-bottom: 1px solid #ddd;position: absolute; top: 23px; left: 48px;"></p>\n            <div style="display:inline-block; text-align:center; margin-left: 150px;">\n              <p><img style="width: 40px; height: 40px;" src="https://images.gitee.com/uploads/images/2019/0314/110508_a5f9c80c_919028.png"/></p>\n              <span>'+a.index_059+'</span>\n            </div>\n            <p style="width:180px; border-bottom: 1px solid #ddd;position: absolute; top: 23px; left: 286px;"></p>\n            <div style="display:inline-block; text-align:center; margin-left: 96px;"">\n              <p><img style="width: 30px; height: 30px;" src="https://images.gitee.com/uploads/images/2019/0314/110526_3b417874_919028.png"/></p>\n              <span>'+a.index_060+"</span>\n            </div>\n          </div>\n        </div>    \n        ";e&&(Object.keys(e).length||e.data)&&(u.close(),c.document.body.innerHTML=e.data.includes(a.index_056)?t:n)};var f={},h=setInterval((function(){if(u.readyState==WebSocket.OPEN){clearInterval(h),f=Object.assign({},n,{compalteAddress:t,type:n.type,nccloudsessionid:n.nccloudsessionid,download:n.download||null,suffx:n.suffx||null,beginUrl:r,aeskey:p,rockin:d}),s("localStorage",n.printTemplateID)&&(f.ncclouPrintSetting=JSON.parse(s("localStorage",f.printTemplateID)).toEndInfo);var e=JSON.stringify(f);u.send(e)}}),1e3)}else(0,i.toast)({color:"warning",content:a.index_057+"websocket"})}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.default=function(e,t,n){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if((0,r.isWindowSystem)()){var l=function(a,i){i?d(e,t,n,o,a):console.log("未加载到多语资源")};(0,i.getMultiLang)({moduleId:"contains_printOnClient",callback:l})}else(0,i.print)("pdf",t,a({},n,{sysType:(0,r.isWindowSystem)()?"1":"2"}),o)},l(n(2)),l(n(1));var i=n(0),o=l(n(14)),r=n(7);function l(e){return e&&e.__esModule?e:{default:e}}var s=i.Cipher.opaqueDecrypt,p=i.viewModel.getGlobalStorage,d=function(e,t,n,o,r){(0,i.ajax)({url:"/nccloud/riart/printtool/sessionid.do",data:{printTemplateID:n.printTemplateID,nodekey:n.nodekey,appcode:n.appcode,num:"1"},success:function(l){var s=l.success,d=l.data;if(s){var u=null;d.asid&&p("localStorage",d.asid)&&(u=JSON.parse(p("localStorage",d.asid)).toEndInfo);var f=a({},n,{nccloudsessionid:d.sessionid,ncclouPrintSetting:u,asid:d.asid,isPrinterView:!1,searchTemplate:o,authority:d.authority,hidePreviewCheck:!0});c(e,t,f,o,r)}else(0,i.toast)({color:"error",content:r.index_047})},error:function(e){console.error(e.message)}})},c=function(e,t,n,r,l){(0,o.default)(e,t,n,r,(function(o){n.authority?f(e,t,a({},o,{type:n.virType?n.virType:"1"}),l):(0,i.toast)({color:"warning",content:l.index_051})}))},u=null,f=function(e,t,n,a){var o=null,r=n.beginUrl||window.location.protocol+"//"+window.location.hostname+":"+window.location.port,l=s(p("localStorage","cowboy")),d=p("localStorage","rockin")||!1;if(null!=o&&1==o.readyState)(0,i.toast)({color:"warning",content:a.index_043});else if("WebSocket"in window){o=null;var c=new WebSocket("ws://"+(n.socketIp||"127.0.0.1")+":9999/websocket");c.onopen=function(e){console.log("连接成功"),(u=window.open("")).document.title=a.index_049;var t="<div><h2 style='border-bottom: 1px solid #ddd;padding: 10px 0'>"+a.index_050+'</h2>\n          <div style="width: 560px; margin: 0 auto; position: relative;">\n            <div style="display:inline-block; text-align:center;">\n              <p><img style="width: 34px; height: 34px;" src="https://images.gitee.com/uploads/images/2019/0314/110540_e2d0849a_919028.png"/></p>\n              <span>'+a.index_058+'</span>\n            </div>\n            <p style="width:180px; border-bottom: 1px solid #ddd;position: absolute; top: 23px; left: 48px;"></p>\n            <div style="display:inline-block; text-align:center; margin-left: 150px;">\n              <p><img style="width: 40px; height: 40px;" src="https://images.gitee.com/uploads/images/2019/0314/110508_a5f9c80c_919028.png"/></p>\n              <span>'+a.index_059+'</span>\n            </div>\n            <p style="width:180px; border-bottom: 1px solid #ddd;position: absolute; top: 23px; left: 286px;"></p>\n            <div style="display:inline-block; text-align:center; margin-left: 150px;"">\n              <p><img style="width: 34px; height: 34px;" src="https://images.gitee.com/uploads/images/2019/0314/110518_e60c0d16_919028.png"/></p>\n              <span>...</span>\n            </div>\n          </div>\n        </div>    \n        ';u.document.body.innerHTML=t},c.onclose=function(e){console.log("关闭连接")},c.onerror=function(a){e.openTo("/uap/printExeDown/ExeDownload/main/index.html?pk_message=dd",{appcode:n.appcode,pagecode:n.pagecode,actionUrl:t})},c.onmessage=function(e){var t="<div><h2 style='border-bottom: 1px solid #ddd;padding: 10px 0'>"+a.index_050+'</h2>\n          <div style="width: 560px; margin: 0 auto; position: relative;">\n            <div style="display:inline-block; text-align:center;">\n              <p><img style="width: 34px; height: 34px;" src="https://images.gitee.com/uploads/images/2019/0314/110540_e2d0849a_919028.png"/></p>\n              <span>'+a.index_058+'</span>\n            </div>\n            <p style="width:180px; border-bottom: 1px solid #ddd;position: absolute; top: 23px; left: 48px;"></p>\n            <div style="display:inline-block; text-align:center; margin-left: 150px;">\n              <p><img style="width: 40px; height: 40px;" src="https://images.gitee.com/uploads/images/2019/0314/110508_a5f9c80c_919028.png"/></p>\n              <span>'+a.index_059+'</span>\n            </div>\n            <p style="width:180px; border-bottom: 1px solid #ddd;position: absolute; top: 23px; left: 286px;"></p>\n            <div style="display:inline-block; text-align:center; margin-left: 102px;"">\n              <p><img style="width: 34px; height: 34px;" src="https://images.gitee.com/uploads/images/2019/0314/110533_f85d3142_919028.png"/></p>\n              <span>'+a.index_061+"</span>\n            </div>\n          </div>\n        </div>    \n        ",n="<div><h2 style='border-bottom: 1px solid #ddd;padding: 10px 0'>"+a.index_050+'</h2>\n          <div style="width: 560px; margin: 0 auto; position: relative;">\n            <div style="display:inline-block; text-align:center;">\n              <p><img style="width: 34px; height: 34px;" src="https://images.gitee.com/uploads/images/2019/0314/110540_e2d0849a_919028.png"/></p>\n              <span>'+a.index_058+'</span>\n            </div>\n            <p style="width:180px; border-bottom: 1px solid #ddd;position: absolute; top: 23px; left: 48px;"></p>\n            <div style="display:inline-block; text-align:center; margin-left: 150px;">\n              <p><img style="width: 40px; height: 40px;" src="https://images.gitee.com/uploads/images/2019/0314/110508_a5f9c80c_919028.png"/></p>\n              <span>'+a.index_059+'</span>\n            </div>\n            <p style="width:180px; border-bottom: 1px solid #ddd;position: absolute; top: 23px; left: 286px;"></p>\n            <div style="display:inline-block; text-align:center; margin-left: 96px;"">\n              <p><img style="width: 30px; height: 30px;" src="https://images.gitee.com/uploads/images/2019/0314/110526_3b417874_919028.png"/></p>\n              <span>'+a.index_060+"</span>\n            </div>\n          </div>\n        </div>    \n        ";e&&(Object.keys(e).length||e.data)&&(c.close(),u.document.body.innerHTML=e.data.includes(a.index_056)?t:n)};var f={},h=setInterval((function(){if(c.readyState==WebSocket.OPEN){clearInterval(h),f=Object.assign({},n,{compalteAddress:t,type:n.type,nccloudsessionid:n.nccloudsessionid,download:null,beginUrl:r,aeskey:l,rockin:d});var e=JSON.stringify(f);c.send(e)}}),1e3)}else(0,i.toast)({color:"warning",content:a.index_057+"websocket"})}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(2),l=y(o),s=y(n(1)),p=n(0),d=y(n(43)),c=y(n(44)),u=y(n(45)),f=y(n(15)),h=n(7),m=y(n(16)),g=y(n(46)),v=y(n(47)),b=y(n(8));function y(e){return e&&e.__esModule?e:{default:e}}function w(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function a(i,o){try{var r=t[i](o),l=r.value}catch(e){return void n(e)}if(!r.done)return Promise.resolve(l).then((function(e){a("next",e)}),(function(e){a("throw",e)}));e(l)}("next")}))}}var x=p.viewModel.getCookie,I=p.viewModel.setGlobalStorage,_=p.viewModel.getGlobalStorage,k=(p.viewModel.removeGlobalStorage,new(0,p.gzip)),D=p.Cipher.opaqueDecrypt,S=p.base.NCButton,O=(p.base.NCInput,p.base.NCRow),P=p.base.NCCol,C=p.base.NCIcon,T=p.base.NCCheckbox,M=p.base.NCLoading;n(48);var j=function(e){function t(e){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i,o,l=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return l.saveFrontCache=function(){var e=h.gerRequestVO.call(l),t=a({},e),n={toEndInfo:t};return I("localStorage",l.state.asid,JSON.stringify(n)),t},l.save=function(){l.cancel();var e=l.saveFrontCache();l.props.onEnsureInfoSave&&"function"==typeof l.props.onEnsureInfoSave&&l.props.onEnsureInfoSave(e)},l.cancel=function(){l.setState({modalVis:!1});var e=s.default.findDOMNode(l);s.default.unmountComponentAtNode(e);var t=e.parentNode;t.parentNode&&t.parentNode.removeChild(t)},l.getCurrentPages=(i=w(regeneratorRuntime.mark((function e(t){var i,o,r,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=l.state.configParams,o=i.printTemplateID,r=null,i.asid&&_("localStorage",i.asid)&&(r=JSON.stringify(JSON.parse(_("localStorage",i.asid)).toEndInfo)),s=a({},i,{printTemplateID:o,appcode:i.appcode,nodeKey:i.nodekey,ncclouPrintSetting:r?a({},r,{changeType:1}):r,download:"preview",sysType:3}),(0,v.default)({newProps:l.props,url:t.url,params:s,enctype:2}),console.log("gzipStatus",_("localStorage","gzip")),l.getUnzipCurrentPage("current");case 8:case"end":return e.stop()}}),e,n)}))),function(e){return i.apply(this,arguments)}),l.getTotalPages=function(e){var t=(0,p.deepClone)(e.params),n=a({},t,{download:"previewTotalPages"});(0,g.default)({newProps:l.props,url:e.url,params:n,enctype:2}),console.log("gzipStatus",_("localStorage","gzip")),l.getUnzipTotalPage("total")},l.getUnzipCurrentPage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"current",t=D(_("localStorage","cowboy")),n=x("cookiets")||Date.now(),a=(n=isNaN(n)?n:Number(n))+"";t=a+t.substring(0,t.length-a.length);var i=l,o=0,r=setInterval((function(){var n="total"==e?window.frames.totalPageIframe:window.frames.currentPageIframe;if(n){(o+=1)>200&&clearInterval(r);var a=n.document.getElementsByTagName("pre")[0];if(a&&a.innerHTML){console.log(_("localStorage","rockin"));var l=a.innerHTML;"string"==typeof a.innerHTML&&"true"==_("localStorage","rockin")&&(l=p.Cipher.decrypt(a.innerHTML,t)),clearInterval(r),l="1"==_("localStorage","gzip")?k.unzip(l):JSON.parse(l),console.log("res",l),"total"==e?i.setState({totalPages:l.data}):"current"===e&&i.setState({currentPages:l.data})}}}),800)},l.getUnzipTotalPage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"total",t=D(_("localStorage","cowboy")),n=x("cookiets")||Date.now(),a=(n=isNaN(n)?n:Number(n))+"";t=a+t.substring(0,t.length-a.length);var i=l,o=0,r=setInterval((function(){var n="total"==e?window.frames.totalPageIframe:window.frames.currentPageIframe;if(n){(o+=1)>2e3&&clearInterval(r);var a=n.document.getElementsByTagName("pre")[0];if(a&&a.innerHTML){console.log(_("localStorage","rockin"));var l=a.innerHTML;"string"==typeof a.innerHTML&&"true"==_("localStorage","rockin")&&(l=p.Cipher.decrypt(a.innerHTML,t)),clearInterval(r),l="1"==_("localStorage","gzip")?k.unzip(l):JSON.parse(l),console.log("res",l),"total"==e?i.setState({totalPages:l.data}):"current"===e&&i.setState({currentPages:l.data})}}}),1e3)},l.initFormData=(o=w(regeneratorRuntime.mark((function e(){var t,i,o,r,s,d,c,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.state.configParams,i=u.printTemplateID?u.printTemplateID:t.printTemplateID,e.next=4,(0,m.default)(l.props,l.props.url,a({},t,{printTemplateID:i}),l.state.json);case 4:o=e.sent,r=l.state.responseAllData,s=o.nccloudPrinterList,l.setState({nccloudPrinterList:s}),d=l,c=null,t.asid&&_("localStorage",t.asid)&&(c=JSON.stringify(JSON.parse(_("localStorage",t.asid)).toEndInfo)),l.setState({currPrintTemplateID:i,nopreview:!!c&&JSON.parse(c).nopreview||!1}),(0,p.ajax)({url:"/nccloud/riart/printtool/down.do",data:{printTemplateID:i,appcode:t.appcode,nodeKey:t.nodekey,ncclouPrintSetting:u.printTemplateID?a({},c,{changeType:1}):c},success:function(e){var t=e.success;if(e.data,t){if(r=a({},e.data,{nccloudPrinterList:s,printTemplateID:i}),c&&!r.currentNCCloudPrinter){var n=JSON.parse(JSON.parse(c).ncclouPrintSetting),o=n.currentNCCloudPrinter;r.currentNCCloudPrinter=o;var l=n.currentNCCloudPaperResource;r.currentNCCloudPaperResource=l}d.setState({responseAllData:r});var p=!u.printTemplateID;d.formatData(r,p)}}});case 13:case"end":return e.stop()}}),e,n)}))),function(){return o.apply(this,arguments)}),l.formatData=function(e,t){h.modifyMeta.call(l,e.printerId||""),h.initFormVal.call(l,e,"",e.printTemplateID),t&&h.initTempalteIdInfo.call(l,e)},l.reloadPDFile=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";l.toggleShowLoad.call(l,!0);var t=h.gerRequestVO.call(l),n=l.state.configParams;(0,f.default)({newProps:l.props,params:a({},t,{printTemplateID:e||n.printTemplateID,changeType:e?1:2,hadPlugin:!0}),url:l.props.url,enctype:2,hasModal:!0},l.state.json),setTimeout((function(){l.toggleShowLoad.call(l,!1)}),1500)},l.resetIframeStyle=function(){},l.changePreviewStatus=function(e){l.setState({nopreview:e})},l.output=function(){var e=l.state,t=e.configParams,n=e.configUrl;(0,p.output)({url:n,data:a({},t,{download:null,outputType:"output",searchTemplate:!1}),callback:l.onButtonClick})},l.state={showLoad:!1,modalVis:!1,nopreview:!1,totalPages:0,currentPages:0,asid:l.props.params.asid,responseAllData:{nccloudPrinterList:[],currentNCCloudTemplateInfo:{},currentNccloudPaper:{},nccloudTemplateInfoList:[],currentNCCloudPrinter:{}},json:{},init:null,configParams:l.props.params,configUrl:l.props.url},l}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentWillMount",value:function(){var e=this;(0,p.getMultiLang)({moduleId:"contains_printOnClient",callback:function(t,n,a){n?e.setState({json:t,inlt:a}):console.log("未加载到多语资源")}})}},{key:"componentDidMount",value:function(){var e=this,t=this.state.configParams;this.setState({showModal:!0}),this.initFormData(),this.getTotalPages({params:t,url:this.props.url}),this.getCurrentPages({params:t,url:this.props.url}),b.default.subscribe("modifySfVar",(function(n,a){var i=JSON.parse(decodeURI(t.userjson));for(var o in a)i[o]=a[o];t.userjson=encodeURI(JSON.stringify(i)),e.setState({configParams:t})})),b.default.subscribe("modifySfPaper",(function(t,n){var i=e.state.configParams,o=i.printTemplateID,r=void 0===o?null:o,l=i.userjson,s=void 0===l?{}:l;for(var p in s=JSON.parse(decodeURI(s)),n)s[p]=n[p];i.userjson=encodeURI(JSON.stringify(s));var d=h.gerRequestVO.call(e);(0,f.default)({newProps:e.props,params:a({},d,{printTemplateID:r||i.printTemplateID,changeType:r?1:2,hadPlugin:!0}),url:e.props.url,enctype:2,hasModal:!0},e.state.json)}))}},{key:"toggleShowLoad",value:function(e){this.setState({showLoad:e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.form,a=t.params,i=n.createForm,r=this.state,s=r.showModal,p=r.configParams;return console.log({configParams:p}),l.default.createElement("div",{className:"print-preview-model",style:{display:s?"block":"none"}},l.default.createElement("iframe",{id:"totalPageIframe",name:"totalPageIframe",style:{display:"none"}}),l.default.createElement("iframe",{id:"currentPageIframe",name:"currentPageIframe",style:{display:"none"}}),l.default.createElement("div",{className:"print-preview-model-dialog"}),l.default.createElement("div",{className:"model-body"},l.default.createElement("header",{className:"model-header"},l.default.createElement("span",null,this.state.json.index_003),l.default.createElement(C,{type:"uf-close",className:"close-modal",onClick:this.cancel})),l.default.createElement(O,null,l.default.createElement(P,{md:9},l.default.createElement("div",{style:{position:"absolute",zIndex:100,height:57,backgroundColor:"#525659",width:"97%"}}),l.default.createElement("iframe",{id:"printPreviewModal",name:"printPreviewModal",style:{width:"100%",height:"430px"},onLoad:function(){e.resetIframeStyle()}})),l.default.createElement(P,{md:3},l.default.createElement(M,{container:this,show:this.state.showLoad}),l.default.createElement("div",{className:"print-form-contain"},a.hideTemplate?null:l.default.createElement(o.Fragment,null,l.default.createElement("h4",{className:"header-title header-title-first"},this.state.json.index_004),i("printTemplate",{onAfterEvent:u.default.bind(this),onBeforeEvent:c.default.bind(this)})),l.default.createElement("h4",{className:"header-title"},this.state.json.index_005),i("printRange",{onAfterEvent:u.default.bind(this),onBeforeEvent:c.default.bind(this)}),l.default.createElement("h4",{className:"header-title"},this.state.json.index_006),i("printMachine",{onAfterEvent:u.default.bind(this),onBeforeEvent:c.default.bind(this)}),l.default.createElement("h4",{className:"header-title"},this.state.json.index_007),i("printStyle",{onAfterEvent:u.default.bind(this),onBeforeEvent:c.default.bind(this)}),a.formulaConfig?a.formulaConfig:null))),l.default.createElement("footer",{className:"model-footer"},p.hidePreviewCheck?null:l.default.createElement(T,{checked:this.state.nopreview,fieldid:"preview_check",value:this.state.nopreview,onChange:this.changePreviewStatus},this.state.json.index_008),a.hideTemplate?null:l.default.createElement("p",{className:"total-paegs"},"(",this.state.json.index_009,this.state.currentPages,this.state.json.index_010,")",this.state.json.index_011,this.state.totalPages,this.state.json.index_010),l.default.createElement(S,{onClick:this.save,fieldid:"print_btn",colors:"danger"},this.state.json.index_012),p.notNeedOutPutBtn?null:l.default.createElement(S,{onClick:this.output,fieldid:"output_btn"},this.state.json.index_013),l.default.createElement(S,{onClick:this.cancel,fieldid:"cancel_btn"},this.state.json.index_014))))}}]),t}(o.Component);j=(0,p.createPage)({initTemplate:d.default})(j),t.default=j},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={};(0,a.getMultiLang)({moduleId:"contains_printOnClient",callback:function(n,a,o){a?(t={printTemplate:{moduletype:"form",items:[{attrcode:"templateInfoList",placeholder:"",value:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"select",showClear:!1,options:[],label:n.index_004+"："}],status:"edit"},printRange:{moduletype:"form",items:[{attrcode:"pageRangeType",placeholder:"",value:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"radio",showClear:!1,options:[{display:""+n.index_000,value:0},{display:""+n.index_016,value:1}],label:n.index_005+"："},{attrcode:"pageFrom",placeholder:"",value:"",leftspace:0,rightspace:0,required:!1,visible:!1,itemtype:"number",label:""+n.index_018},{attrcode:"pageTo",placeholder:"",value:"",leftspace:0,rightspace:0,required:!1,visible:!1,itemtype:"number",label:""+n.index_019},{attrcode:"pageWholeType",placeholder:"",value:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"select",showClear:!1,options:[{display:""+n.index_020,value:0},{display:""+n.index_021,value:1},{display:""+n.index_022,value:2}],label:""+n.index_023},{attrcode:"copies",placeholder:"",value:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"number",label:""+n.index_024},{attrcode:"collated",placeholder:"",value:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"switch",label:""+n.index_025},{attrcode:"doubleside",placeholder:"",value:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"select",showClear:!1,label:""+n.index_026,options:[{display:""+n.index_027,value:0},{display:""+n.index_028,value:1},{display:""+n.index_029,value:2}]}],status:"edit"},printMachine:{moduletype:"form",items:[{attrcode:"PrinterList",placeholder:"",value:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"select",showClear:!1,options:[],label:""+n.index_030},i({attrcode:"printerStatus",placeholder:"",value:"",leftspace:0,rightspace:0,required:!1,visible:!0,disabled:!0,itemtype:"input",label:""+n.index_031},"disabled",!0),{attrcode:"paperResourceList",placeholder:"",value:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"select",showClear:!1,options:[],label:""+n.index_032},{attrcode:"twoSide",placeholder:"",value:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"input",label:""+n.index_033,disabled:!0}],status:"edit"},printStyle:{moduletype:"form",items:[{attrcode:"paperList",placeholder:"",value:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"select",showClear:!1,options:[],label:""+n.index_034},{attrcode:"paperWidth",placeholder:"",value:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"input",label:""+n.index_035,disabled:!0},{attrcode:"paperHeight",placeholder:"",value:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"input",label:""+n.index_036,disabled:!0},{attrcode:"nccloudPaperDirect",placeholder:"",value:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"radio",label:""+n.index_037,options:[{display:""+n.index_038,value:!1},{display:""+n.index_039,value:!0}]},{attrcode:"isMultiColor",placeholder:"",value:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"switch",label:""+n.index_040}],status:"edit"}},e.meta.setMeta(t)):console.log("未加载到多语资源")}})};var a=n(0);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,a,i){return["pageFrom","pageTo"].includes(n)&&function(e,t){1!=e.form.getFormItemsValue(t,"pageRangeType")&&e.form.setFormItemsValue(t,{pageRangeType:{display:"页面",value:1}})}(e,t),!0}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,a,s){var p=a.value.key?a.value.key:a.value;if(a.display,"PrinterList"===n&&o.call(this,p),"nccloudPaperDirect"===n&&i.call(this,p),["paperList"].includes(n)&&a!==s){var d=this.props.meta.getMeta(),c=[];d.printStyle.items.map((function(e){"paperList"===e.attrcode&&(c=e.options)})),console.log({paperList:c}),r.call(this,c,p),this.props.form.setFormItemsDisabled(t,{paperWidth:this.state.json.index_015!==a.display,paperHeight:this.state.json.index_015!==a.display})}["templateInfoList"].includes(n)&&l.call(this,p),"pageRangeType"===n&&e.form.setFormItemsVisible("printRange",{pageFrom:!!Number(p),pageTo:!!Number(p)})};var a=n(7);function i(e){var t=this.props.form.getFormItemsValue("printStyle",["paperWidth","paperHeight"]);console.log({printStyleVO:t}),this.props.form.setFormItemsValue("printStyle",{paperWidth:{value:t[1].value},paperHeight:{value:t[0].value}}),this.reloadPDFile()}function o(e){a.modifyMeta.call(this,e);var t=this.props.form.getFormItemsValue("printStyle","paperList"),n=this.props.form.getFormItemsValue("printMachine","paperResourceList"),i=[],o=[],r=!1,l=this.props.meta.getMeta(),s=this.state.responseAllData.nccloudPrinterList.find((function(t){return e==t.printerId}));l.printStyle.items.find((function(e){if("paperList"===e.attrcode)return i=e.options,!0})),l.printMachine.items.find((function(e){if("paperResourceList"===e.attrcode)return o=e.options,!0})),o.length&&(r=o.some((function(e){return e.display==n.display}))),i.some((function(e){return e.display==t.display}))||(this.props.form.setFormItemsValue("printStyle",{paperList:{display:i[0].display,value:i[0].value}}),this.reloadPDFile()),!o.length||r?this.props.form.setFormItemsValue("printMachine",{paperResourceList:{display:o.length?o[0].display:"",value:o.length?o[0].value:""}}):this.props.form.setFormItemsValue("printMachine",{paperResourceList:{display:n.display?n.display:o[0].display,value:n.value?n.value:o[0].value}}),this.props.form.setFormItemsValue("printMachine",{printerStatus:{display:s.printerStatus?this.state.json.index_062:this.state.json.index_063,value:s.printerStatus},twoSide:{display:s.twoSide?this.state.json.index_064:this.state.json.index_065,value:s.twoSide}})}function r(e,t){var n=e.find((function(e){return e.value===t}));this.props.form.setFormItemsValue("printStyle",{paperWidth:{value:parseInt(n.paperWidth)},paperHeight:{value:parseInt(n.paperHeight)},nccloudPaperDirect:{value:n.paperWidth<n.paperHeight}}),this.reloadPDFile()}function l(e){this.initFormData({printTemplateID:e}),this.reloadPDFile(e)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var a,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.default=function(e){e.newProps;var t=e.params,n=e.url,a=e.enctype,o=(e.hasModal,arguments.length>1&&void 0!==arguments[1]&&arguments[1],""),r="",l=window.parent.location.hash.split("?");if(l&&l[1]){var s=l[1].split("&");s&&s instanceof Array&&s.forEach((function(e){-1!=e.indexOf("=")&&e.split("=")&&e.split("=")instanceof Array&&("n"===e.split("=")[0]&&e.split("=")[1]&&(o=decodeURIComponent(decodeURIComponent(e.split("=")[1]))),"c"===e.split("=")[0]&&e.split("=")[1]&&(r=decodeURIComponent(decodeURIComponent(e.split("=")[1]))))}))}var p=(o||null)+"-"+(window.actionName||null),d={sys_busiaction:p,sys_appcode:r,sys_ts:(new Date).getTime()},c=[{target:"totalPageIframe",method:"POST",enctype:a=function(e){switch(e){case 1:return"multipart/form-data";case 2:return"application/x-www-form-urlencoded";case 3:return"text/plain";default:return"multipart/form-data"}}(a),type:"hidden",action:n||""},document.createElement("form")],u=c[0],f=c[1];Object.assign(f,u);var h=i({},t,d),m=function(e){if(h[e]instanceof Array)h[e].forEach((function(t,n){var a=document.createElement("input");a.type="hidden",a.name=e,a.value=t,f.appendChild(a)}));else{var t=document.createElement("input");t.type="hidden",t.name=e,t.value=h[e],f.appendChild(t)}};for(var g in h)m(g);return document.body.appendChild(f),f.submit(),document.body.removeChild(f),!1},(a=n(1))&&a.__esModule},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var a,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.default=function(e){e.newProps;var t=e.params,n=e.url,a=e.enctype,o=(e.hasModal,arguments.length>1&&void 0!==arguments[1]&&arguments[1],""),r="",l=window.parent.location.hash.split("?");if(l&&l[1]){var s=l[1].split("&");s&&s instanceof Array&&s.forEach((function(e){-1!=e.indexOf("=")&&e.split("=")&&e.split("=")instanceof Array&&("n"===e.split("=")[0]&&e.split("=")[1]&&(o=decodeURIComponent(decodeURIComponent(e.split("=")[1]))),"c"===e.split("=")[0]&&e.split("=")[1]&&(r=decodeURIComponent(decodeURIComponent(e.split("=")[1]))))}))}var p=(o||null)+"-"+(window.actionName||null),d={sys_busiaction:p,sys_appcode:r,sys_ts:(new Date).getTime()},c=[{target:"currentPageIframe",method:"POST",enctype:a=function(e){switch(e){case 1:return"multipart/form-data";case 2:return"application/x-www-form-urlencoded";case 3:return"text/plain";default:return"multipart/form-data"}}(a),type:"hidden",action:n||""},document.createElement("form")],u=c[0],f=c[1];Object.assign(f,u);var h=i({},t,d),m=function(e){if(h[e]instanceof Array)h[e].forEach((function(t,n){var a=document.createElement("input");a.type="hidden",a.name=e,a.value=t,f.appendChild(a)}));else{var t=document.createElement("input");t.type="hidden",t.name=e,t.value=h[e],f.appendChild(t)}};for(var g in h)m(g);return document.body.appendChild(f),f.submit(),document.body.removeChild(f),!1},(a=n(1))&&a.__esModule},function(e,t,n){var a=n(49);"string"==typeof a&&(a=[[e.i,a,""]]);n(4)(a,{transform:void 0}),a.locals&&(e.exports=a.locals)},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,".print-preview-model .u-col-md-9,\n.print-preview-model .u-col-md-3 {\n  padding-right: 0;\n}\n.print-preview-model .u-col-md-9 {\n  width: 73%;\n}\n.print-preview-model .u-col-md-3 {\n  padding-left: 0;\n  width: 27%;\n}\n.print-preview-model .print-preview-model-dialog {\n  position: fixed;\n  z-index: 100;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.4);\n}\n.print-preview-model .lightapp-component-form {\n  padding: 0;\n}\n.print-preview-model .lightapp-component-form .form-item .form-item-label {\n  width: 100px;\n  min-width: 50px;\n}\n.print-preview-model .lightapp-component-form .form-item .form-item-control {\n  width: calc(100% - 100px);\n}\n.print-preview-model .model-body {\n  position: fixed;\n  z-index: 110;\n  left: 50%;\n  top: 20px;\n  -webkit-transform: translateX(-50%);\n          transform: translateX(-50%);\n  width: 80%;\n  height: 520px;\n  top: 360;\n  background: #fff;\n}\n.print-preview-model .model-header {\n  padding: 12px 15px;\n  background: #f3f3f3;\n  font-size: 16px;\n}\n.print-preview-model .model-header .close-modal {\n  float: right;\n  cursor: pointer;\n}\n.print-preview-model .model-footer {\n  position: relative;\n  padding: 10px 8px;\n  text-align: right;\n  border-top: 1px solid #ddd;\n}\n.print-preview-model .model-footer .u-checkbox {\n  float: left;\n  line-height: 18px;\n}\n.print-preview-model .model-footer .u-checkbox-label {\n  padding-top: 5px;\n}\n.print-preview-model .model-footer .u-checkbox-label::before,\n.print-preview-model .model-footer .u-checkbox-label::after {\n  top: 8px;\n}\n.print-preview-model .print-form-contain {\n  height: 430px;\n  width: 95%;\n  overflow-y: auto;\n}\n.print-preview-model .header-title {\n  padding: 0 0 0 16px;\n  margin-top: 5px;\n  height: 32px;\n  line-height: 32px;\n  font-size: 13px;\n  background-color: #eceff5;\n}\n.print-preview-model .header-title.header-title-first {\n  margin-top: 0;\n}\n.print-preview-model .total-paegs {\n  position: absolute;\n  right: 26%;\n  bottom: 18px;\n}\n.print-preview-model .group-form-wrapper {\n  position: relative;\n}\n.print-preview-model .form-item.pageFrom,\n.print-preview-model .form-item.pageTo {\n  position: relative;\n  left: 86px;\n  top: 0;\n}\n.print-preview-model .form-item.pageFrom .form-item-label,\n.print-preview-model .form-item.pageTo .form-item-label {\n  padding-right: 5px;\n  width: 45px;\n  min-width: 0;\n}\n.print-preview-model .form-item.pageFrom .form-item-control,\n.print-preview-model .form-item.pageTo .form-item-control {\n  width: 46px;\n  padding-right: 0;\n}\n.print-preview-model .pageFrom,\n.print-preview-model .pageTo {\n  width: 32% !important;\n}\n",""])},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.default=function(e,t,n){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if((0,r.isWindowSystem)()){var l=function(a,i,r){i?d(e,t,n,o,a):console.log("未加载到多语资源")};(0,i.getMultiLang)({moduleId:"contains_printOnClient",callback:l})}else(0,i.print)("pdf",t,a({},n,{sysType:(0,r.isWindowSystem)()?"1":"2"}),o)},l(n(2)),l(n(1));var i=n(0),o=l(n(14)),r=n(7);function l(e){return e&&e.__esModule?e:{default:e}}var s=i.Cipher.opaqueDecrypt,p=i.viewModel.getGlobalStorage,d=function(e,t,n,o,r){(0,i.ajax)({url:"/nccloud/riart/printtool/sessionid.do",data:{printTemplateID:n.printTemplateID,nodekey:n.nodekey,appcode:n.appcode,num:"1"},success:function(l){var s=l.success,d=l.data;if(s){var u=null;d.asid&&p("localStorage",d.asid)&&(u=JSON.parse(p("localStorage",d.asid)).toEndInfo);var h=a({},n,{nccloudsessionid:d.sessionid,ncclouPrintSetting:u,asid:d.asid,isPrinterView:!0,searchTemplate:o,authority:d.authority});if(u&&u.printTemplateID&&u.nopreview){var m=(0,i.deepClone)(u);m=m.ncclouPrintSetting,h=Object.assign({},h,{ncclouPrintSetting:m}),f(e,t,a({},h,{printTemplateID:o?u.printTemplateID:n.printTemplateID}),r)}else c(e,t,h,o,r)}else(0,i.toast)({color:"error",content:r.index_047})},error:function(e){console.error(e.message)}})},c=function(e,t,n,a,i){(0,o.default)(e,t,n,a,(function(a){var o=Object.assign({},a,{type:n.virType?n.virType:"1"});console.log({queryParams:o}),f(e,t,o,i)}))},u=null,f=function(e,t,n,a){var o=null,r=n.beginUrl||window.location.protocol+"//"+window.location.hostname+":"+window.location.port,l=s(p("localStorage","cowboy")),d=p("localStorage","rockin")||!1;if(null!=o&&1==o.readyState)(0,i.toast)({color:"warning",content:a.index_043});else if("WebSocket"in window){o=null;var c=new WebSocket("ws://"+(n.socketIp||"127.0.0.1")+":9999/websocket");c.onopen=function(e){console.log("连接成功"),(u=window.open("")).document.title=a.index_049;var t="<div><h2 style='border-bottom: 1px solid #ddd;padding: 10px 0'>"+a.index_050+'</h2>\n          <div style="width: 560px; margin: 0 auto; position: relative;">\n            <div style="display:inline-block; text-align:center;">\n              <p><img style="width: 34px; height: 34px;" src="https://images.gitee.com/uploads/images/2019/0314/110540_e2d0849a_919028.png"/></p>\n              <span>'+a.index_058+'</span>\n            </div>\n            <p style="width:180px; border-bottom: 1px solid #ddd;position: absolute; top: 23px; left: 48px;"></p>\n            <div style="display:inline-block; text-align:center; margin-left: 150px;">\n              <p><img style="width: 40px; height: 40px;" src="https://images.gitee.com/uploads/images/2019/0314/110508_a5f9c80c_919028.png"/></p>\n              <span>'+a.index_059+'</span>\n            </div>\n            <p style="width:180px; border-bottom: 1px solid #ddd;position: absolute; top: 23px; left: 286px;"></p>\n            <div style="display:inline-block; text-align:center; margin-left: 150px;"">\n              <p><img style="width: 34px; height: 34px;" src="https://images.gitee.com/uploads/images/2019/0314/110518_e60c0d16_919028.png"/></p>\n              <span>...</span>\n            </div>\n          </div>\n        </div>    \n        ';u.document.body.innerHTML=t},c.onclose=function(e){console.log("关闭连接")},c.onerror=function(a){e.openTo("/uap/printExeDown/ExeDownload/main/index.html?pk_message=dd",{appcode:n.appcode,pagecode:n.pagecode,actionUrl:t})},c.onmessage=function(e){var t="<div><h2 style='border-bottom: 1px solid #ddd;padding: 10px 0'>"+a.index_050+'</h2>\n          <div style="width: 560px; margin: 0 auto; position: relative;">\n            <div style="display:inline-block; text-align:center;">\n              <p><img style="width: 34px; height: 34px;" src="https://images.gitee.com/uploads/images/2019/0314/110540_e2d0849a_919028.png"/></p>\n              <span>'+a.index_058+'</span>\n            </div>\n            <p style="width:180px; border-bottom: 1px solid #ddd;position: absolute; top: 23px; left: 48px;"></p>\n            <div style="display:inline-block; text-align:center; margin-left: 150px;">\n              <p><img style="width: 40px; height: 40px;" src="https://images.gitee.com/uploads/images/2019/0314/110508_a5f9c80c_919028.png"/></p>\n              <span>'+a.index_059+'</span>\n            </div>\n            <p style="width:180px; border-bottom: 1px solid #ddd;position: absolute; top: 23px; left: 286px;"></p>\n            <div style="display:inline-block; text-align:center; margin-left: 102px;"">\n              <p><img style="width: 34px; height: 34px;" src="https://images.gitee.com/uploads/images/2019/0314/110533_f85d3142_919028.png"/></p>\n              <span>'+a.index_061+"</span>\n            </div>\n          </div>\n        </div>    \n        ",n="<div><h2 style='border-bottom: 1px solid #ddd;padding: 10px 0'>"+a.index_050+'</h2>\n          <div style="width: 560px; margin: 0 auto; position: relative;">\n            <div style="display:inline-block; text-align:center;">\n              <p><img style="width: 34px; height: 34px;" src="https://images.gitee.com/uploads/images/2019/0314/110540_e2d0849a_919028.png"/></p>\n              <span>'+a.index_058+'</span>\n            </div>\n            <p style="width:180px; border-bottom: 1px solid #ddd;position: absolute; top: 23px; left: 48px;"></p>\n            <div style="display:inline-block; text-align:center; margin-left: 150px;">\n              <p><img style="width: 40px; height: 40px;" src="https://images.gitee.com/uploads/images/2019/0314/110508_a5f9c80c_919028.png"/></p>\n              <span>'+a.index_059+'</span>\n            </div>\n            <p style="width:180px; border-bottom: 1px solid #ddd;position: absolute; top: 23px; left: 286px;"></p>\n            <div style="display:inline-block; text-align:center; margin-left: 96px;"">\n              <p><img style="width: 30px; height: 30px;" src="https://images.gitee.com/uploads/images/2019/0314/110526_3b417874_919028.png"/></p>\n              <span>'+a.index_060+"</span>\n            </div>\n          </div>\n        </div>    \n        ";e&&(Object.keys(e).length||e.data)&&(c.close(),u.document.body.innerHTML=e.data.includes(a.index_056)?t:n)};var f={},h=setInterval((function(){if(c.readyState==WebSocket.OPEN){clearInterval(h),f=Object.assign({},n,{compalteAddress:t,type:n.type,nccloudsessionid:n.nccloudsessionid,download:null,beginUrl:r,aeskey:l,rockin:d});var e=JSON.stringify(f);c.send(e)}}),1e3)}else(0,i.toast)({color:"warning",content:"不支持websocket"})}}])}))}).call(this,n(8)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.createUIDom({pagecode:s,appcode:"3610HD"},(function(t){if(t){if(t.template){var n=t.template;n.download.status="edit",n.linkquery.status="edit",n=function(e,t){return t.search.items.find((function(e){return"acct_no"===e.attrcode})).isMultiSelectedEnabled=!0,t.search.items.find((function(e){return"pk_accorg"===e.attrcode})).isMultiSelectedEnabled=!0,t.download.items.find((function(e){return"acct_no"===e.attrcode})).isMultiSelectedEnabled=!0,t.download.items.find((function(e){return"pk_accorg"===e.attrcode})).isMultiSelectedEnabled=!0,t.search.items.map((function(t){"pk_accorg"==t.attrcode?t.queryCondition=function(){return{funcode:"3610HD",TreeRefActionExt:"nccloud.web.tmpub.filter.FinanceOrgPermissionFilter"}}:"acct_no"==t.attrcode&&(t.queryCondition=function(){var t=null,n=null;return e.search.getSearchValByField("search","acct_no")&&(t=e.search.getSearchValByField("search","pk_accorg").value.firstvalue),e.search.getSearchValByField("search","banktype")&&(n=e.search.getSearchValByField("search","banktype").value.firstvalue),{refnodename:"核算归属权",funcode:"3610HD",pk_org:t,permissonOrgs:!0,pk_banktype:n,GridRefActionExt:"nccloud.web.obm.refbuilder.BankAccRefBuilder"}})})),t.download.items.map((function(t){"pk_accorg"==t.attrcode?t.queryCondition=function(){return{funcode:"3610HD",TreeRefActionExt:"nccloud.web.tmpub.filter.FinanceOrgPermissionFilter"}}:"acct_no"==t.attrcode&&(t.queryCondition=function(){var t=null,n=null;return e.form.getFormItemsValue("download","acct_no")&&(t=e.form.getFormItemsValue("download","pk_accorg").value),e.form.getFormItemsValue("download","banktype")&&(n=e.form.getFormItemsValue("download","banktype").value),{refnodename:"核算归属权",funcode:"3610HD",pk_org:t,permissonOrgs:!0,pk_banktype:n,GridRefActionExt:"nccloud.web.obm.refbuilder.BankAccRefBuilder"}})})),t.YhhdVO.items=t.YhhdVO.items.map((function(e,t){return"bill_no"==e.attrcode&&(e.render=function(e,t,n){var a=React.createElement("div",null,t.bill_no.value);return React.createElement(l,{trigger:"hover",placement:"top",inverse:!1,overlay:a},React.createElement("a",{style:{textDecoration:"",cursor:"pointer"},onClick:function(){}},t&&t.bill_no&&t.bill_no.value))}),e})),t}(e,n),e.meta.setMeta(n,(function(){var t=i.cacheTools.get("3610HD_L01_search");console.log(t),t&&(i.cacheTools.set("3610HD_L01_back","1"),e.search.setSearchValue("search",t),(0,r.default)(e,t))}))}if(t.button){var a=t.button;e.button.setButtons(a)}}}))};var a,i=n(0),o=n(3),r=(a=o)&&a.__esModule?a:{default:a};i.base.NCPopconfirm,i.base.NCIcon;var l=i.base.NCTooltip,s="3610HD_L01"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,o,r,l,s){if(t===i&&("begindate"===n||"enddate"===n)){var p=e.form.getFormItemsValue(i,"begindate").value,d=e.form.getFormItemsValue(i,"enddate").value;if(p&&d){var c=new Date(p),u=new Date(d).getTime()-c.getTime();Math.floor(u/864e5)>31&&(e.form.setFormItemsValue(t,{enddate:{value:"",display:""}}),(0,a.toast)({content:this.props.MutiInit.getIntl("3610HD")&&this.props.MutiInit.getIntl("3610HD").get("3610HD-000000"),color:"warning"}))}}};var a=n(0),i="download"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){};n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var o={allpks:n,pageid:"3610HD_L01"};(0,a.ajax)({url:"/nccloud/obm/ebankyhhd/querypage.do",data:o,success:function(t){var n=t.success,o=t.data;n&&(o?(e.table.setAllTableData(i,o[i]),a.cacheTools.set("3610HD_L01_data",o[i])):e.table.setAllTableData(i,{rows:[]}))}})};var a=n(0),i="YhhdVO"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var o={allpks:n,pageid:"3610HD_L01"};(0,a.ajax)({url:"/nccloud/obm/ebankyhhd/querypagehand.do",data:o,success:function(t){var n=t.success,a=t.data;n&&(a?e.table.setAllTableData(i,a[i]):e.table.setAllTableData(i,{rows:[]}))}})};var a=n(0),i="linkquerytable"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var o={allpks:n,pageid:"3610HD_L01"};(0,a.ajax)({url:"/nccloud/obm/ebankyhhd/querypagebill.do",data:o,success:function(t){var n=t.success,a=t.data;n&&(a?e.table.setAllTableData(i,a[i]):e.table.setAllTableData(i,{rows:[]}))}})};var a=n(0),i="linkquerybill"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=this.props.search;if("banktype"===e)n.setSearchValByField(a.searchid,"acct_no",{value:"",display:""});else if("pk_accorg"===e)t.refpk&&(n.getSearchValByField(a.searchid,"banktype")&&n.setSearchValByField(a.searchid,"banktype",{value:"",display:""}),n.getSearchValByField(a.searchid,"acct_no")&&n.setSearchValByField(a.searchid,"acct_no",{value:"",display:""}));else if("acct_no"===e){var i="",o="";t.length>0&&t[0].values&&(i=t[0].values.bd_banktypeid.value,o=t[0].values.pk_banktype.value,n.setSearchValByField(a.searchid,"banktype",{value:i,display:o}))}};var a=n(16)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.searchid="search"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.search.getAllSearchData("search",!1),n=e.table.getTablePageInfo("YhhdVO"),i={conditions:t.conditions||t,pageInfo:n,pagecode:"3610HD_L01",queryAreaCode:"search",oid:"0001ZZ100000000066A3",queryType:"simple"};console.log(i),(0,a.ajax)({url:"/nccloud/obm/ebankyhhd/query.do",data:i,success:function(t){var n=t.success,a=t.data;n&&(a?e.table.setAllTableData("YhhdVO",t.data.YhhdVO):e.table.setAllTableData("YhhdVO",{rows:[]}))},error:function(e){console.log(e.message)}})};var a=n(0)}])}));
//# sourceMappingURL=index.736bb70d.js.map