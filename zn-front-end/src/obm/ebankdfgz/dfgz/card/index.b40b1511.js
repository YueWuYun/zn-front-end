/*! @ncctag {"provider":"test","date":"2020-5-11 21:42:48"} */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nc-lightapp-front"),require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["nc-lightapp-front","react","react-dom"],t):"object"==typeof exports?exports["obm/ebankdfgz/dfgz/card/index"]=t(require("nc-lightapp-front"),require("react"),require("react-dom")):e["obm/ebankdfgz/dfgz/card/index"]=t(e["nc-lightapp-front"],e.React,e.ReactDOM)}(window,(function(e,t,a){return function(e){var t={};function a(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,a),r.l=!0,r.exports}return a.m=e,a.c=t,a.d=function(e,t,o){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(o,r,function(t){return e[t]}.bind(null,r));return o},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="../../../../",a(a.s=22)}([function(t,a){t.exports=e},,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.tableId="pk_dfgz_b",t.formId="head",t.searchCashCode="search_dfgz",t.searchId="search",t.inputId="input",t.pagecode="3610PAYR_C01",t.appcode="3610PAYR",t.appid="0001Z61000000003AE2F",t.list_page_url="/obm/ebankdfgz/dfgz/list/index.html",t.card_page_url="/obm/ebankdfgz/dfgz/card/index.html",t.editButtons=["save","saveCommit","saveAdd","cancel"],t.browseButtons=["add","edit","gennew","delete","copy","commit","unCommit","import","filemanage","approveinfo","qlpaybill","download","confirm","gennew","print","output","refresh","back"],t.browseButtons1=["add","edit","gennew","delete","copy","commit","import","filemanage","print","printgroup","output","qlpaybill","refresh"],t.browseButtons2=["add","copy","gennew","unCommit","import","filemanage","approveinfo","print","printgroup","output","qlpaybill","refresh"],t.browseButtons3=["add","copy","gennew","import","unCommit","filemanage","approveinfo","print","printgroup","output","qlpaybill","refresh"],t.browseButtons4=["add","copy","gennew","import","unCommit","filemanage","approveinfo","print","printgroup","qlpaybill","output","refresh"],t.browseButtons5=["add","copy","gennew","download","confirm","import","filemanage","approveinfo","qlpaybill","print","printgroup","output","refresh"],t.browseButtons7=["add","copy","gennew","import","filemanage","approveinfo","qlpaybill","print","printgroup","output","refresh"],t.browseButtons8=["add","copy","gennew","import","filemanage","approveinfo","qlpaybill","print","printgroup","output","refresh"],t.browseButtons6=["add"],t.dataSource="tm.obm.ebankdfgz.dfgz"},function(e,a){e.exports=t},function(e,t){e.exports=a},,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),r=a(3),l=d(r),s=(d(a(4)),a(0)),n=a(2),i=a(23);function d(e){return e&&e.__esModule?e:{default:e}}function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}s.base.NCFormControl,s.base.NCAnchor,s.base.NCScrollLink;var p=s.base.NCScrollElement,c=s.base.NCAffix,f=(s.base.NCBackBtn,s.cardCache.getNextId),m=(s.cardCache.getCurrentLastId,s.cardCache.deleteCacheById),b=(s.cardCache.deleteCacheId,s.cardCache.getCacheById,s.cardCache.updateCache),g=s.cardCache.addCache,I=(s.cardCache.setDefData,s.cardCache.getDefData,s.base.NCModal),h=s.base.NCButton,v=s.base.NCUpload,y=s.high.NCUploader,k=s.high.ApproveDetail,w=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.getdata=function(){var e={pk:a.props.getUrlParam("id"),pageCode:n.pagecode};(0,s.ajax)({url:"/nccloud/obm/ebankdfgz/querycard.do",data:e,success:function(e){if(e.data){if(e.data.head){a.props.form.setAllFormValue(u({},n.formId,e.data.head[n.formId]));var t=e.data.head[n.formId].rows[0].values.vbillno.value;a.setState({vbillno:t})}e.data.body&&a.props.cardTable.setTableData(n.tableId,e.data.body[n.tableId])}else a.props.form.EmptyAllFormValue(n.formId),a.props.cardTable.setTableData(n.tableId,{rows:[]});a.toggleShow()}})},a.toggleShow=function(){var e=a.props.getUrlParam("status");if("add"==e&&(a.props.form.EmptyAllFormValue(n.formId),a.setState({vbillno:""}),a.props.cardTable.setTableData(n.tableId,{rows:[]}),a.props.initMetaByPkorg(),a.props.button.setButtonVisible(["addLine","delLine","copyLine"],!0),a.props.button.setButtonDisabled(["addLine","delLine","copyLine"],!0),a.props.button.setButtonVisible(n.browseButtons,!1),a.props.button.setButtonVisible(n.editButtons,!0),a.props.button.setDisabled({addLine:!1,insLine:!1,delLine:!1,copyLine:!1}),a.props.cardPagination.setCardPaginationVisible("cardPaginationBtn",!1),a.props.cardTable.setStatus(n.tableId,"edit"),a.props.form.setFormStatus(n.formId,"edit")),"edit"==e&&(a.props.button.setButtonVisible(n.browseButtons,!1),a.props.button.setButtonVisible(n.editButtons,!0),a.props.button.setDisabled({addLine:!1,insLine:!1,delLine:!1,copyLine:!1}),a.props.cardPagination.setCardPaginationVisible("cardPaginationBtn",!1),a.props.button.setButtonVisible(["addLine","delLine","copyLine"],!0),a.props.cardTable.setStatus(n.tableId,"edit"),a.props.form.setFormStatus(n.formId,"edit")),"browse"==e)if(a.props.button.setButtonVisible(n.editButtons,!1),a.props.button.setButtonVisible(n.browseButtons,!1),a.props.cardPagination.setCardPaginationVisible("cardPaginationBtn",!0),a.props.button.setButtonVisible(["addLine","delLine","copyLine"],!1),a.props.cardTable.setStatus(n.tableId,"browse"),a.props.form.setFormStatus(n.formId,"browse"),a.props.button.setMainButton(["add"],!1),a.props.button.setMainButton(["commit","unCommit"],!1),a.props.button.setMainButton(["download"],!1),a.props.form.getFormItemsValue(n.formId,"vbillstatus")){var t=a.props.form.getFormItemsValue(n.formId,"vbillstatus").value;if("0"===t)a.props.button.setButtonVisible(n.browseButtons2,!0),a.props.button.setMainButton(["unCommit"],!0);else if("1"===t)if(a.props.form.getFormItemsValue(n.formId,"billpaystate")){var o=a.props.form.getFormItemsValue(n.formId,"billpaystate").value;"2"===o?(a.props.button.setButtonVisible(n.browseButtons5,!0),a.props.button.setMainButton(["download"],!0)):"0"===o?(a.props.button.setButtonVisible(n.browseButtons8,!0),a.props.button.setMainButton(["add"],!0)):"1"===o?(a.props.button.setButtonVisible(n.browseButtons7,!0),a.props.button.setMainButton(["add"],!0)):(a.props.button.setButtonVisible(n.browseButtons4,!0),a.props.button.setMainButton(["unCommit"],!0))}else a.props.button.setButtonVisible(n.browseButtons4,!0),a.props.button.setMainButton(["unCommit"],!0);else"2"===t?(a.props.button.setButtonVisible(n.browseButtons3,!0),a.props.button.setMainButton(["add"],!0)):"-1"===t?(a.props.button.setButtonVisible(n.browseButtons1,!0),a.props.button.setMainButton(["commit"],!0)):"3"===t?(a.props.button.setButtonVisible(n.browseButtons3,!0),a.props.button.setMainButton(["unCommit"],!0)):(a.props.button.setButtonVisible(n.browseButtons6,!0),a.props.button.setMainButton(["add"],!0))}else a.props.button.setButtonVisible(n.browseButtons6,!0),a.props.button.setMainButton(["add"],!0);if("copy"==e){a.props.button.setButtonVisible(n.browseButtons,!1),a.props.button.setButtonVisible(n.editButtons,!0),a.props.button.setDisabled({addLine:!1,insLine:!1,delLine:!1,copyLine:!1}),a.props.cardPagination.setCardPaginationVisible("cardPaginationBtn",!1),a.props.button.setButtonVisible(["addLine","delLine","copyLine"],!0),a.props.cardTable.setStatus(n.tableId,"edit"),a.props.form.setFormStatus(n.formId,"edit"),a.props.resMetaAfterPkorgEdit(),a.props.form.setFormItemsDisabled(n.formId,{pk_org:!0}),a.props.form.setFormItemsDisabled(n.formId,{pk_banktype:!1}),a.props.form.setFormItemsDisabled(n.formId,{pk_currtype:!1}),a.props.form.setFormItemsDisabled(n.formId,{salaryperiod:!1}),a.props.form.setFormItemsDisabled(n.formId,{busnar:!1}),a.props.form.setFormItemsDisabled(n.formId,{nusage:!1}),a.props.form.setFormItemsDisabled(n.formId,{crdttyp:!1}),a.setState({vbillno:""});var r={display:a.props.MutiInit.getIntl("3610PAYR")&&a.props.MutiInit.getIntl("3610PAYR").get("3610PAYR-000010"),value:"-1"};a.props.form.setFormItemsValue(n.formId,{vbillno:null}),a.props.form.setFormItemsValue(n.formId,{pk_dfgz:null}),a.props.form.setFormItemsValue(n.formId,{vbillstatus:r}),a.props.form.setFormItemsValue(n.formId,{modifier:null}),a.props.form.setFormItemsValue(n.formId,{modifiedtime:null}),a.props.form.setFormItemsValue(n.formId,{submitdate:null}),a.props.form.setFormItemsValue(n.formId,{submiter:null}),a.props.form.setFormItemsValue(n.formId,{submittime:null}),a.props.form.setFormItemsValue(n.formId,{approvedate:null}),a.props.form.setFormItemsValue(n.formId,{approvenote:null}),a.props.form.setFormItemsValue(n.formId,{approver:null}),a.props.form.setFormItemsValue(n.formId,{approvetime:null}),a.props.form.setFormItemsValue(n.formId,{gensrc:null}),a.props.form.setFormItemsValue(n.formId,{ts:null}),a.props.form.setFormItemsValue(n.formId,{paypackageid:null}),a.props.form.setFormItemsValue(n.formId,{billpaystate:null}),a.props.form.setFormItemsValue(n.formId,{paymsg:null}),a.props.form.setFormItemsValue(n.formId,{paydate:null}),a.props.form.setFormItemsValue(n.formId,{factpaytotal:null}),a.props.form.setFormItemsValue(n.formId,{successnum:null}),a.props.form.setFormItemsValue(n.formId,{failednum:null}),a.props.form.setFormItemsValue(n.formId,{dbtacc:null}),a.props.form.setFormItemsValue(n.formId,{bbknbr:null}),a.props.form.setFormItemsValue(n.formId,{dealstate:null}),a.props.form.setFormItemsValue(n.formId,{gennewbillno:null}),a.props.cardTable.setColValue(n.tableId,"paystate",{value:null,display:null}),a.props.cardTable.setColValue(n.tableId,"errmsg",{value:null,display:null}),a.props.cardTable.setColValue(n.tableId,"pk_dfgz",{value:null,display:null}),a.props.cardTable.setColValue(n.tableId,"pk_dfgz_b",{value:null,display:null}),a.props.cardTable.setColValue(n.tableId,"childpackageid",{value:null,display:null}),a.props.cardTable.setColValue(n.tableId,"paypackageid",{value:null,display:null}),a.props.cardTable.setColValue(n.tableId,"headpackageid",{value:null,display:null}),a.props.cardTable.setColValue(n.tableId,"confirmflag",{value:null,display:null}),a.props.cardTable.setColValue(n.tableId,"confirminfo",{value:null,display:null}),a.props.cardTable.setColValue(n.tableId,"confirmuser",{value:null,display:null}),a.props.cardTable.setColValue(n.tableId,"confirmtime",{value:null,display:null}),a.props.cardTable.setColValue(n.tableId,"ts",{value:null,display:null}),a.props.cardTable.setColValue(n.tableId,"pk_org",{value:null,display:null}),a.props.cardTable.setColValue(n.tableId,"pk_group",{value:null,display:null})}"browse"===e?a.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!0,showBillCode:!0}):"edit"===e?a.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!1,showBillCode:!0}):"add"!==e&&"copy"!=e||a.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!1,showBillCode:!1})},a.delDfgz=function(){(0,s.ajax)({url:"/nccloud/obm/ebankdfgz/delete.do",data:{id:a.props.getUrlParam("id"),ts:a.props.form.getFormItemsValue(n.formId,"ts").value},success:function(e){if(e){(0,s.toast)({color:"success",content:a.props.MutiInit.getIntl("3610PAYR")&&a.props.MutiInit.getIntl("3610PAYR").get("3610PAYR-000036")});var t=a.props.getUrlParam("id"),o=f(t,n.dataSource);m("pk_dfgz",t,n.dataSource),a.props.setUrlParam({status:"browse",id:o||""}),a.setState({vbillno:null}),a.refreshCard(a.props.getUrlParam("id"))}}})},a.saveBillBeforeCheck=function(){if(a.props.cardTable.getNumberOfRows(n.tableId)<=0)return(0,s.toast)({color:"warning",content:a.props.MutiInit.getIntl("3610PAYR")&&a.props.MutiInit.getIntl("3610PAYR").get("3610PAYR-000011")}),!1;var e=a.props.form.isCheckNow(n.formId),t=a.props.cardTable.checkTableRequired(n.tableId);return e&&t},a.saveBill=function(){if("copy"==a.props.getUrlParam("status")&&(a.props.form.setFormItemsValue(n.formId,{pk_dfgz:null}),a.props.form.setFormItemsValue(n.formId,{ts:null})),a.saveBillBeforeCheck()){var e=a.props.createMasterChildData(n.pagecode,n.formId,n.tableId),t=a.props.form.getFormItemsValue(n.formId,"pk_dfgz"),o="/nccloud/obm/ebankdfgz/insert.do";"edit"==a.props.getUrlParam("status")&&(o="/nccloud/obm/ebankdfgz/update.do"),(0,s.ajax)({url:o,data:e,success:function(e){e.success&&e.data&&((0,s.toast)({color:"success",content:a.props.MutiInit.getIntl("3610PAYR")&&a.props.MutiInit.getIntl("3610PAYR").get("3610PAYR-000012")}),t&&t.value?b("pk_dfgz",e.data.head[n.formId].rows[0].values.pk_dfgz.value,e.data,n.formId,n.dataSource):g(e.data.head[n.formId].rows[0].values.pk_dfgz.value,e.data,n.formId,n.dataSource),a.props.pushTo("/card",{status:"browse",id:e.data.head[n.formId].rows[0].values.pk_dfgz.value,type:"link",appcode:n.appcode,pagecode:n.pagecode}),a.componentDidMount()),(0,s.toast)({content:a.props.MutiInit.getIntl("3610PAYR")&&a.props.MutiInit.getIntl("3610PAYR").get("3610PAYR-000012"),color:"success"})}})}},a.saveAddBill=function(){if("copy"==a.props.getUrlParam("status")&&(a.props.form.setFormItemsValue(n.formId,{pk_dfgz:null}),a.props.form.setFormItemsValue(n.formId,{ts:null})),a.props.form.isCheckNow(n.formId)){var e=a.props.createMasterChildData(n.pagecode,n.formId,n.tableId),t=a.props.form.getFormItemsValue(n.formId,"pk_dfgz"),o="/nccloud/obm/ebankdfgz/insert.do";"edit"==a.props.getUrlParam("status")&&(o="/nccloud/obm/ebankdfgz/update.do"),(0,s.ajax)({url:o,data:e,success:function(e){e.success&&e.data&&(t&&t.value?b("pk_dfgz",e.data.head[n.formId].rows[0].values.pk_dfgz.value,e.data,n.formId,n.dataSource):g(e.data.head[n.formId].rows[0].values.pk_dfgz.value,e.data,n.formId,n.dataSource),(0,s.toast)({color:"success",content:a.props.MutiInit.getIntl("3610PAYR")&&a.props.MutiInit.getIntl("3610PAYR").get("3610PAYR-000012")}),a.props.pushTo("/card",{status:"add",type:"link",appcode:n.appcode,pagecode:n.pagecode}),a.componentDidMount()),(0,s.toast)({content:a.props.MutiInit.getIntl("3610PAYR")&&a.props.MutiInit.getIntl("3610PAYR").get("3610PAYR-000012"),color:"success"})}})}},a.saveCommitBill=function(e,t){if("copy"==a.props.getUrlParam("status")&&(a.props.form.setFormItemsValue(n.formId,{pk_dfgz:null}),a.props.form.setFormItemsValue(n.formId,{ts:null})),a.props.form.isCheckNow(n.formId)){var o=a.props.createMasterChildData(n.pagecode,n.formId,n.tableId),r=a.props.form.getFormItemsValue(n.formId,"pk_dfgz"),l="/nccloud/obm/ebankdfgz/insert.do";"edit"==a.props.getUrlParam("status")&&(l="/nccloud/obm/ebankdfgz/update.do"),(0,s.ajax)({url:l,data:o,success:function(e){var t=null;if(e.success&&e.data){var o;t=e.data.head[n.formId].rows[0].values.pk_dfgz.value,o=e.data.head[n.formId].rows[0].values.ts.value,a.refreshCard(t),null!=t&&(0,s.ajax)({url:"/nccloud/obm/ebankdfgz/commit.do",data:{id:t,ts:o},success:function(e){var o=e.success;e.data;o&&(r&&r.value?b("pk_dfgz",t,e.data,n.formId,n.dataSource):g(t,e.data,n.formId,n.dataSource),a.refreshCard(t),(0,s.toast)({color:"success",content:a.props.MutiInit.getIntl("3610PAYR")&&a.props.MutiInit.getIntl("3610PAYR").get("3610PAYR-000013")})),(0,s.toast)({content:a.props.MutiInit.getIntl("3610PAYR")&&a.props.MutiInit.getIntl("3610PAYR").get("3610PAYR-000012"),color:"success"})}})}}})}},a.InputClick=function(){var e="{NC_HOME}/resources/ebank/NC_Dfgz_Templet.xls",t={value:e,display:e};a.props.form.setFormItemsValue(n.inputId,{templet:t});var o={value:"EXCEL",display:"EXCEL"};a.props.form.setFormItemsValue(n.inputId,{filetype:o}),a.setState({showmodal:!0})},a.InputCancelClick=function(){a.setState({showmodal:!1})},a.InputOkClick=function(){var e=a.props.form.getFormItemsValue(n.inputId,"path").value;if(e){var t={cardflag:"0",path:e};(0,s.ajax)({url:"/nccloud/obm/ebankdfgz/input.do",data:t,success:function(e){var t=e.success;e.data;if(t){if(e.data.head){a.props.form.setAllFormValue(u({},n.formId,e.data.head[n.formId]));var o=e.data.head[n.formId].rows[0].values.vbillno.value;a.setState({vbillno:o})}e.data.body&&a.props.cardTable.setTableData(n.tableId,e.data.body[n.tableId]),a.setState({showmodal:!1})}}})}else(0,s.toast)({color:"warning",content:a.props.MutiInit.getIntl("3610PAYR")&&a.props.MutiInit.getIntl("3610PAYR").get("3610PAYR-000014")})},a.DownloadFileClick=function(){(0,s.formDownload)({params:{data:"xls"},url:"/nccloud/obm/ebankdfgz/filedownload.do",enctype:1})},a.dealWithData=function(e,t){var o,r;o=a.props.form.getFormItemsValue(n.formId,"pk_dfgz").value,r=a.props.form.getFormItemsValue(n.formId,"ts").value,null!=o&&(0,s.ajax)({url:"/nccloud/obm/ebankdfgz/"+e+".do",data:{id:o,ts:r},success:function(e){e.success,e.data;e.success&&(e.data&&e.data.errorMsg?(0,s.toast)({color:"warning",content:e.data.errorMsg}):((0,s.toast)({color:"success",content:a.props.MutiInit.getIntl("3610PAYR")&&a.props.MutiInit.getIntl("3610PAYR").get("3610PAYR-000015")}),a.refreshCard(o)))}})},a.refreshCard=function(e){a.props.pushTo("/card",{status:"browse",id:e,type:"link",appcode:n.appcode,pagecode:n.pagecode}),a.componentDidMount()},a.printData=function(){var e=a.props.form.getFormItemsValue(n.formId,"pk_dfgz").value,t=[];t.push(e),(0,s.print)("pdf","/nccloud/obm/ebankdfgz/print.do",{nodekey:"NCCLOUD",oids:t},!1)},a.ouputData=function(){var e=a.props.form.getFormItemsValue(n.formId,"pk_dfgz").value,t=[];t.push(e),(0,s.output)({url:"/nccloud/obm/ebankdfgz/print.do",data:{oids:t,outputType:"output"}})},a.getButtonNames=function(e){},a.getTableHead=function(e,t){a.props.button.createButtonApp;return l.default.createElement("div",{className:"shoulder-definition-area"},l.default.createElement("div",{className:"definition-icons"},a.props.cardTable.createBrowseIcons(t,{iconArr:["close","open","max"],maxDestAreaId:"finance-fts-commissionpayment-card"}),a.props.button.createButtonApp({area:"card_body",buttonLimit:3,onButtonClick:i.buttonClick.bind(a),popContainer:document.querySelector(".header-button-area")})))},a.onHideUploader=function(){a.setState({showUploader:!1})},a.ApproveInfo=function(e){var t=e;a.setState({billid:t,billtype:"36C9"},(function(){a.setState({showAppr:!0})}))},a.closeApprove=function(){a.setState({showAppr:!1})},a.link2ListPage=function(){a.props.pushTo("/list",{status:"browse"})},a.state={vbillno:"",showNCbackBtn:!0,data:[],showmodal:!1,currdigist:0,billId:"",billno:"",showUploader:!1,target:null,billid:"",billtype:"",showAppr:!1,digistnum:"8"},a.upload_change=a.upload_change.bind(a),a.importProps={name:"file",action:"/nccloud/obm/ebankdfgz/upload.do",data:{},multiple:!1,headers:{authorization:"authorization-text"},onChange:a.upload_change},i.initTemplate.call(a,e),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"upload_change",value:function(e){if("uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status)if(e.file.response&&e.file.response.success){var t=e.file.response.data;if(t){var a={value:t,display:t};this.props.form.setFormItemsValue(n.inputId,{path:a})}}else(0,s.toast)({content:e.file.response.error.message,color:"warning"});else"error"===e.file.status&&e.fileList.splice(0,e.fileList.length)}},{key:"componentWillMount",value:function(){var e=this;window.onbeforeunload=function(){if("browse"!=e.props.getUrlParam("status"))return e.props.MutiInit.getIntl("3610PAYR")&&e.props.MutiInit.getIntl("3610PAYR").get("3610PAYR-000009")}}},{key:"componentDidMount",value:function(){var e=this.props.getUrlParam("status"),t=this.props.getUrlParam("id");"add"==e&&this.toggleShow(),"edit"==e&&this.getdata(),"copy"==e&&this.getdata(),"browse"==e&&(t?this.getdata():(this.props.form.EmptyAllFormValue(n.formId),this.props.cardTable.setTableData(n.tableId,{rows:[]}),this.props.pushTo("/card",{id:"",status:"browse"}),this.setState({showNCbackBtn:!1}),this.props.button.setButtonVisible(n.browseButtons,!1),this.props.button.setButtonVisible(["addLine","delLine","copyLine"],!1),this.props.cardPagination.setCardPaginationVisible("cardPaginationBtn",!1)))}},{key:"render",value:function(){var e=this,t=this.props,a=t.cardTable,o=t.form,r=t.button,s=t.modal,d=t.ncmodal,u=t.cardPagination,f=this.props.button.getButtons(),m=(this.props.MutiInit.getIntl("2052"),o.createForm),b=a.createCardTable,g=(this.props.button.createButtonApp,r.getButtons,u.createCardPagination),w=s.createModal,P=(d.createModal,this.state),A=P.showUploader,B=(P.target,P.billno),C=P.billId,R=(P.showNCbackBtn,this.props.BillHeadInfo.createBillHeadInfo);this.props.getUrlParam("status");return l.default.createElement("div",{className:"nc-bill-card"},l.default.createElement("div",{className:"nc-bill-top-area"},l.default.createElement(c,null,l.default.createElement("div",{className:"nc-bill-header-area"},l.default.createElement("div",{className:"header-title-search-area"},R({title:this.props.MutiInit.getIntl("3610PAYR")&&this.props.MutiInit.getIntl("3610PAYR").get("3610PAYR-000016"),billCode:this.state.bill_code,backBtnClick:function(){e.link2ListPage()}})),l.default.createElement("div",{className:"header-button-area"},this.props.button.createButtonApp({area:"card_head",onButtonClick:i.buttonClick.bind(this),popContainer:document.querySelector(".header-button-area")})),l.default.createElement("div",{className:"header-cardPagination-area",style:{float:"right"}},g({handlePageInfoChange:i.pageInfoClick.bind(this)})))),l.default.createElement(p,{name:"forminfo"},l.default.createElement("div",{className:"nc-bill-form-area"},m(n.formId,{onAfterEvent:i.afterEvent.bind(this)})))),l.default.createElement("div",{className:"nc-bill-bottom-area"},l.default.createElement(p,{name:"businfo"},l.default.createElement("div",{className:"nc-bill-table-area"},b(n.tableId,{tableHead:this.getTableHead.bind(this,f,n.tableId),modelSave:this.saveBill,onAfterEvent:i.afterEvent.bind(this),adaptionHeight:!0,showCheck:!0,showIndex:!0})))),w("delete",{title:this.props.MutiInit.getIntl("3610PAYR")&&this.props.MutiInit.getIntl("3610PAYR").get("3610PAYR-000018"),content:this.props.MutiInit.getIntl("3610PAYR")&&this.props.MutiInit.getIntl("3610PAYR").get("3610PAYR-000019"),beSureBtnClick:this.delDfgz.bind(this),size:"sm",className:"junior"}),l.default.createElement(I,{show:this.state.showmodal,onHide:this.InputCancelClick.bind(this),style:{width:"520"},className:"senior"},l.default.createElement(I.Header,{closeButton:!0},l.default.createElement(I.Title,null,this.props.MutiInit.getIntl("3610PAYR")&&this.props.MutiInit.getIntl("3610PAYR").get("3610PAYR-000020"))),l.default.createElement(I.Body,null,l.default.createElement("div",null,m(n.inputId,{onAfterEvent:i.afterEvent.bind(this)}))),l.default.createElement(I.Footer,null,l.default.createElement(h,{style:{float:"right"},onClick:this.InputCancelClick.bind(this)},this.props.MutiInit.getIntl("3610PAYR")&&this.props.MutiInit.getIntl("3610PAYR").get("3610PAYR-000004")),"      ",l.default.createElement(h,{style:{float:"right"},className:"button-primary",onClick:this.InputOkClick.bind(this)},this.props.MutiInit.getIntl("3610PAYR")&&this.props.MutiInit.getIntl("3610PAYR").get("3610PAYR-000021")),"  ",l.default.createElement(h,{style:{float:"right"},onClick:this.DownloadFileClick.bind(this)},this.props.MutiInit.getIntl("3610PAYR")&&this.props.MutiInit.getIntl("3610PAYR").get("3610PAYR-000022")),l.default.createElement(v,this.importProps,l.default.createElement(h,null,this.props.MutiInit.getIntl("3610PAYR")&&this.props.MutiInit.getIntl("3610PAYR").get("3610PAYR-000023"))))),l.default.createElement("div",{className:"nc-faith-demo-div2"},"                    ",A&&l.default.createElement(y,{billId:C,billNo:B,onHide:this.onHideUploader}),"                "),l.default.createElement("div",null,l.default.createElement(k,{billtype:this.state.billtype,billid:this.state.billid,show:this.state.showAppr,close:this.closeApprove})))}}]),t}(r.Component);w=(0,s.createPage)({mutiLangCode:n.appcode})(w),t.default=w},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pageInfoClick=t.initTemplate=t.afterEvent=t.buttonClick=void 0;var o=n(a(24)),r=n(a(25)),l=n(a(27)),s=n(a(28));function n(e){return e&&e.__esModule?e:{default:e}}t.buttonClick=o.default,t.afterEvent=l.default,t.initTemplate=r.default,t.pageInfoClick=s.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=this.props.createMasterChildData(r.pagecode,r.formId,r.tableId),n={};n[r.tableId]="cardTable";switch(t){case"add":e.pushTo("/card",{status:"add",id:e.getUrlParam("id"),type:"link",appcode:r.appcode,pagecode:r.pagecode}),this.toggleShow();break;case"save":this.props.validateToSave(a,this.saveBill,n,"card");break;case"saveAdd":this.props.validateToSave(a,this.saveAddBill,n,"card");break;case"saveCommit":this.props.validateToSave(a,this.saveCommitBill,n,"card");break;case"edit":e.pushTo("/card",{status:"edit",id:e.getUrlParam("id"),type:"link",appcode:r.appcode,pagecode:r.pagecode}),this.toggleShow();break;case"copy":e.pushTo("/card",{status:"copy",id:e.getUrlParam("id"),copyFlag:!0,type:"link",appcode:r.appcode,pagecode:r.pagecode}),this.toggleShow();break;case"delete":(0,o.promptBox)({title:this.props.MutiInit.getIntl("3610PAYR")&&this.props.MutiInit.getIntl("3610PAYR").get("3610PAYR-000018"),color:"warning",content:this.props.MutiInit.getIntl("3610PAYR")&&this.props.MutiInit.getIntl("3610PAYR").get("3610PAYR-000019"),beSureBtnClick:this.delDfgz.bind(this,e)});break;case"refresh":e.pushTo("/card",{status:"browse",id:e.form.getFormItemsValue(r.formId,"pk_dfgz").value}),this.getdata();break;case"commit":this.dealWithData(t,e.MutiInit.getIntl("3610PAYR")&&e.MutiInit.getIntl("3610PAYR").get("3610PAYR-000000"));break;case"unCommit":this.dealWithData(t,e.MutiInit.getIntl("3610PAYR")&&e.MutiInit.getIntl("3610PAYR").get("3610PAYR-000001"));break;case"back":e.pushTo("/list",{pagecode:r.pagecode});break;case"filemanage":var i=this.props.form.getFormItemsValue(r.formId,"pk_dfgz"),d=this.props.form.getFormItemsValue(r.formId,"vbillno");this.setState({billId:i&&i.value,billno:d&&d.value,showUploader:!this.state.showUploader});break;case"download":this.dealWithData(t,e.MutiInit.getIntl("3610PAYR")&&e.MutiInit.getIntl("3610PAYR").get("3610PAYR-000002"));break;case"confirm":!function(e){var t=e.form.getFormItemsValue(r.formId,"pk_dfgz").value,a=e.form.getFormItemsValue(r.formId,"pk_group").value,o=e.form.getFormItemsValue(r.formId,"pk_org").value,l=e.form.getFormItemsValue(r.formId,"vbillno").value,s=e.form.getFormItemsValue(r.formId,"yurref").value;e.openTo("/obm/ebankconfirmpay/confirmpay/main/index.html#/card",{status:"add",pk:"",pk_org:o,pk_group:a,srcsystem:"OBM",srcbillcode:l,srcbilltype:"36C9",srcnodecode:"3610PAYR",srcpkid:t,yurref:s,type:"link",appcode:"36100CONFM",pagecode:"36100CONFM_C01"})}(e);break;case"import":this.InputClick();break;case"gennew":this.dealWithData(t,e.MutiInit.getIntl("3610PAYR")&&e.MutiInit.getIntl("3610PAYR").get("3610PAYR-000003"));break;case"link":var u=e.form.getFormItemsValue(r.formId,"pk_dfgz").value;this.ApproveInfo(u);break;case"approveinfo":u=e.form.getFormItemsValue(r.formId,"pk_dfgz").value,this.ApproveInfo(u);break;case"qlpaybill":!function(e){var t=e.form.getFormItemsValue(r.formId,"vbillstatus").value,a=e.form.getFormItemsValue(r.formId,"srcpaypkid").value,l=e.form.getFormItemsValue(r.formId,"srcpayfuncode").value,n=e.form.getFormItemsValue(r.formId,"yurref").value;if(1!=t)return void(0,o.toast)({color:"warning",content:e.MutiInit.getIntl("3610PAYR")&&e.MutiInit.getIntl("3610PAYR").get("3610PAYR-000041")});null!=l&&"36071505"!==l||(l="36070PBR");if(null==a){var i={yurref:n};(0,o.ajax)({url:"/nccloud/obm/ebankdfgz/qlpaybill.do",data:i,async:!0,success:function(t){a=t.data,s(e,l,a)}})}else s(e,l,a)}(e);break;case"print":this.printData();break;case"output":(0,o.output)({url:"/nccloud/obm/ebankdfgz/print.do",data:{appcode:r.appcode,nodekey:"NCCLOUD",oids:[e.form.getFormItemsValue(r.formId,"pk_dfgz").value],outputType:"output"}});break;case"cancel":(0,o.promptBox)({color:"warning",title:e.MutiInit.getIntl("3610PAYR")&&e.MutiInit.getIntl("3610PAYR").get("3610PAYR-000004"),content:e.MutiInit.getIntl("3610PAYR")&&e.MutiInit.getIntl("3610PAYR").get("3610PAYR-000005"),beSureBtnClick:l.bind(this,e)});break;case"addLine":e.cardTable.addRow(r.tableId);break;case"insLine":var p=e.cardTable.getCheckedRows(r.tableId),c=[];if(p&&p.length>0){var f=!0,m=!1,b=void 0;try{for(var g,I=p[Symbol.iterator]();!(f=(g=I.next()).done);f=!0){var h=g.value;c.push(h.index)}}catch(e){m=!0,b=e}finally{try{!f&&I.return&&I.return()}finally{if(m)throw b}}}if(0==c.length)return void(0,o.toast)({color:"warning",content:e.MutiInit.getIntl("3610PAYR")&&e.MutiInit.getIntl("3610PAYR").get("3610PAYR-000006")});e.cardTable.addRow(r.tableId,c);break;case"delLine":var v=e.cardTable.getCheckedRows(r.tableId),y=[];if(v&&v.length>0){var k=!0,w=!1,P=void 0;try{for(var A,B=v[Symbol.iterator]();!(k=(A=B.next()).done);k=!0){var C=A.value;y.push(C.index)}}catch(e){w=!0,P=e}finally{try{!k&&B.return&&B.return()}finally{if(w)throw P}}}if(0==y.length)return void(0,o.toast)({color:"warning",content:e.MutiInit.getIntl("3610PAYR")&&e.MutiInit.getIntl("3610PAYR").get("3610PAYR-000006")});e.cardTable.delRowsByIndex(r.tableId,y);break;case"copyLine":var R=e.cardTable.getCheckedRows(r.tableId);if(null==R||0==R.length)return(0,o.toast)({color:"warning",content:e.MutiInit.getIntl("3610PAYR")&&e.MutiInit.getIntl("3610PAYR").get("3610PAYR-000007")}),!1;var V=e.cardTable.getNumberOfRows(r.tableId,!1),M=[],Y=JSON.parse(JSON.stringify(R)),_=!0,T=!1,F=void 0;try{for(var z,S=Y[Symbol.iterator]();!(_=(z=S.next()).done);_=!0){var D=z.value;D.data.selected=!1,D.data.values.pk_dfgz_b={value:null,display:null},M.push(D.data)}}catch(e){T=!0,F=e}finally{try{!_&&S.return&&S.return()}finally{if(T)throw F}}e.cardTable.insertRowsAfterIndex(r.tableId,M,V)}};var o=a(0),r=a(2),l=function(e){var t=e.form.getFormItemsValue(r.formId,"pk_dfgz").value,a=e.getUrlParam("id");t?(e.pushTo("/card",{status:"browse",id:t}),this.setState({showNCbackBtn:!0}),this.getdata()):a?(e.pushTo("/card",{status:"browse",id:a}),this.setState({showNCbackBtn:!0}),this.getdata()):(e.form.EmptyAllFormValue(r.formId),e.cardTable.resetTableData(r.tableId),e.pushTo("/card",{status:"browse",id:""}),this.setState({showNCbackBtn:!0}),this.toggleShow())};function s(e,t,a){"36070PBR"===t&&e.openTo("/cmp/billmanagement/paybill/linkcard/index.html",{src:"dfgz",status:"browse",id:a,type:"link",appcode:"36070PBR",pagecode:"36070PBR_C02"})}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=this;e.createUIDom({pagecode:l.pagecode,appcode:l.appcode},(function(a){if(a){var o=e.getUrlParam("status");if(a.template){var r=a.template;r=function(e,t,a){var o=t.getUrlParam("status");a[l.formId].status=o;var r=t.MutiInit.getIntl("3610PAYR");a[l.formId].items.map((function(e){if("pk_org"==e.attrcode&&(e.queryCondition=function(){return{funcode:l.appcode,TreeRefActionExt:"nccloud.web.tmpub.filter.FinanceOrgPermissionFilter"}}),"crdttyp"==e.attrcode){var t=[];t[0]={display:r&&r.get("3610PAYR-000042"),value:"1"},t[1]={display:r&&r.get("3610PAYR-000043"),value:"4"},t[2]={display:r&&r.get("3610PAYR-000044"),value:"5"},t[3]={display:r&&r.get("3610PAYR-000045"),value:"6"},e.options=t}}));var s={attrcode:"opr",label:t.MutiInit.getIntl("3610PAYR")&&t.MutiInit.getIntl("3610PAYR").get("3610PAYR-000008"),fixed:"right",itemtype:"customer",visible:!0,width:"200px",render:function(a,o,r){var l="browse"===t.getUrlParam("status")?["openedit"]:["editmoreBtn","copybody","insertline","deleteline"];return t.button.createOprationButton(l,{area:"card_body_inner",buttonLimit:3,onButtonClick:function(t,l){return n.default.call(e,t,l,a,o,r)}})}};return a[l.tableId].items.push(s),a}(t,e,r),e.meta.setMeta(r),"add"===o&&(e.initMetaByPkorg(),e.button.setButtonDisabled(["addLine","delLine","copyLine"],!0))}if(a.button){var s=a.button;e.button.setButtons(s)}}}))};var o,r=a(0),l=a(2),s=a(26),n=(o=s)&&o.__esModule?o:{default:o};r.base.NCPopconfirm},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,r,l){switch(console.log(t),t){case"openedit":e.cardTable.toggleRowView(o.tableId,r);break;case"editmoreBtn":e.cardTable.openModel(o.tableId,"edit",r,l);break;case"copybody":var s=e.cardTable.getRowsByIndexs(o.tableId,l),n=e.cardTable.getNumberOfRows(o.tableId,!1),i=JSON.parse(JSON.stringify(s))[0];i.values.pk_dfgz_b={value:null,display:null},e.cardTable.insertRowsAfterIndex(o.tableId,i,n);break;case"insertline":e.cardTable.addRow(o.tableId,l);break;case"deleteline":e.cardTable.delRowsByIndex(o.tableId,l)}};a(0);var o=a(2)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,s,n,i,d,u,p){var c=this;if(console.log(e,t,a,s,n,i,d,u),"pk_org"===a){var f=e.createHeadAfterEventData(r.pagecode,r.formId,r.tableId,t,a,s),m=f.newvalue.value,b=f.oldvalue.value;f.oldvalue.display;m&&(m!=b?(0,o.ajax)({url:"/nccloud/obm/ebankdfgz/orgchange.do",data:f,success:function(t){if(t.success){if(t.data){if(t.data.head&&e.form.setAllFormValue(l({},r.formId,t.data.head[r.formId])),e.resMetaAfterPkorgEdit(),e.cardTable.setTableData(r.tableId,{rows:[]}),t.data.userjson){var a=t.data.userjson;c.setState({digistnum:a})}p||c.props.cardTable.addRow(r.tableId)}else e.form.setAllFormValue(l({},r.formId,{rows:[]})),e.cardTable.setTableData(r.tableId,{rows:[]});e.button.setButtonDisabled(["addLine","delLine","copyLine"],!1)}}}):e.button.setButtonDisabled(["addLine","delLine","copyLine"],!0))}if("pk_currtype"==a){var g=e.createHeadAfterEventData(r.pagecode,r.formId,r.tableId,t,a,s),I=g.newvalue.value;g.oldvalue.value,g.oldvalue.display;null!=I&&(0,o.ajax)({url:"/nccloud/obm/ebankdfgz/orgchange.do",data:g,success:function(t){if(t.success)if(t.data){if(t.data.head&&e.form.setAllFormValue(l({},r.formId,t.data.head[r.formId])),t.data.body&&e.cardTable.setTableData(r.tableId,t.data.body[r.tableId]),t.data.userjson){var a=t.data.userjson;c.setState({digistnum:a})}}else e.form.setAllFormValue(l({},r.formId,{rows:[]})),e.cardTable.setTableData(r.tableId,{rows:[]})}})}if("amount"===a&&s){var h=e.createBodyAfterEventData(r.pagecode,r.formId,t,t,a,n,i);if(h){var v=h.changedrows[0].newvalue&&h.changedrows[0].newvalue.value,y=h.changedrows[0].oldvalue&&h.changedrows[0].oldvalue.value;v!=y&&(0,o.ajax)({url:"/nccloud/obm/ebankdfgz/dfgzbodyafterevent.do",data:h,success:function(e){e.success&&e.data&&(e.data.head&&c.props.form.setAllFormValue(l({},r.formId,e.data.head[r.formId])),e.data.body&&c.props.cardTable.updateDataByRowId(r.tableId,e.data.body[r.tableId]))}})}}};var o=a(0),r=a(2);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=this,s=o.cardCache.getCacheById;o.cardCache.updateCache;if(e.setUrlParam(t),t){var n=s(t,r.dataSource);if(n)this.props.form.setAllFormValue(l({},r.formId,n.head[r.formId])),this.props.cardTable.setTableData(r.tableId,n.body[r.tableId]),this.setState({vbillno:n.head[r.formId].rows[0].values.vbillno.value}),this.toggleShow();else{var i={pk:t,pageCode:r.pagecode};(0,o.ajax)({url:"/nccloud/obm/ebankdfgz/querycard.do",data:i,success:function(e){if(e.data){if(e.data.head){a.props.form.setAllFormValue(l({},r.formId,e.data.head[r.formId]));var t=e.data.head[r.formId].rows[0].values.vbillno.value;a.setState({vbillno:t})}e.data.body&&a.props.cardTable.setTableData(r.tableId,e.data.body[r.tableId]),a.toggleShow()}else a.props.form.EmptyAllFormValue(r.formId),a.props.cardTable.setTableData(r.tableId,{rows:[]}),a.toggleShow()}})}}};var o=a(0),r=a(2);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}}])}));
//# sourceMappingURL=index.b40b1511.js.map