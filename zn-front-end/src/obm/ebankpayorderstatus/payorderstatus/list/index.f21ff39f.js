/*! @ncctag {"provider":"test","date":"2020-5-11 21:44:01"} */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("nc-lightapp-front"),require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["nc-lightapp-front","react","react-dom"],e):"object"==typeof exports?exports["obm/ebankpayorderstatus/payorderstatus/list/index"]=e(require("nc-lightapp-front"),require("react"),require("react-dom")):t["obm/ebankpayorderstatus/payorderstatus/list/index"]=e(t["nc-lightapp-front"],t.React,t.ReactDOM)}(window,(function(t,e,a){return function(t){var e={};function a(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,a),n.l=!0,n.exports}return a.m=t,a.c=e,a.d=function(t,e,o){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(o,n,function(e){return t[e]}.bind(null,n));return o},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="../../../../",a(a.s=149)}({1:function(e,a){e.exports=t},135:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,a,n,r){switch(e){case"DownStatusAction":var c=[n.pk_ebankpaystatus_h.value];(0,o.ajax)({url:"/nccloud/obm/ebankpayorderstatus/ebankpayorderstatusdownload.do",data:{pks:c},success:function(t){t.data&&t.data.msg&&(0,o.toast)({content:t.data.msg,color:"success"})}});break;case"SyncStatusAction":c=[n.pk_ebankpaystatus_h.value],(0,o.ajax)({url:"/nccloud/obm/ebankpayorderstatus/ebankpayorderstatussynchrostatus.do",data:{pks:c},success:function(t){t.data&&t.data.msg&&(0,o.toast)({content:t.data.msg,color:"success"})}})}};var o=a(1)},149:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var a=0;a<e.length;a++){var o=e[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,a,o){return a&&t(e.prototype,a),o&&t(e,o),e}}(),n=a(5),r=i(n),c=(i(a(6)),a(1)),s=a(150),u=a(2);function i(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return a.toggleShow=function(){a.props.button.setDisabled({DownStatusAction:!0,ConfirmStatusAction:!0,SyncStatusAction:!0,Print:!0,output:!0,Refresh:!1})},a.props=t,a.state={data:{}},a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),o(e,[{key:"componentDidMount",value:function(){this.toggleShow()}},{key:"render",value:function(){this.props.modal.createModal,this.props.button.getButtons();var t=this.props,e=t.table,a=(t.button,t.search),o=e.createSimpleTable,n=a.NCCreateSearch;this.props.button.createButtonApp;return r.default.createElement("div",{className:"nc-bill-list"},r.default.createElement("div",{className:"nc-bill-header-area"},r.default.createElement("div",{className:"header-title-search-area"},(0,c.createPageIcon)(),r.default.createElement("h2",{className:"title-search-detail"},this.props.MutiInit.getIntl("36101011")&&this.props.MutiInit.getIntl("36101011").get("36101011-000001"))),r.default.createElement("div",{className:"header-button-area"},this.props.button.createButtonApp({area:"list_head",buttonLimit:4,onButtonClick:s.buttonClick.bind(this),popContainer:document.querySelector(".header-button-area")}))),r.default.createElement("div",{className:"nc-bill-search-area"},n(u.searchId,{showAdvBtn:!0,clickSearchBtn:s.searchBtnClick.bind(this),defaultConditionsNum:10})),r.default.createElement("div",{className:"nc-bill-table-area",style:{borderRadius:"3px 3px 0 0",overflow:"hidden"}},o(u.tableId,{handlePageInfoChange:s.pageInfoClick,adaptionHeight:!0,showCheck:!0,showIndex:!0,onSelected:s.setButtonUsability.bind(this,this.props),onSelectedAll:s.setButtonUsability.bind(this,this.props),onRowDoubleClick:s.doubleClick.bind(this)})))}}]),e}(n.Component);l=(0,c.createPage)({mutiLangCode:"36101011",initTemplate:s.initTemplate})(l),e.default=l},150:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setButtonUsability=e.tableButtonClick=e.pageInfoClick=e.doubleClick=e.searchBtnClick=e.tableModelConfirm=e.afterEvent=e.initTemplate=e.buttonClick=void 0;var o=p(a(151)),n=p(a(152)),r=p(a(153)),c=p(a(154)),s=p(a(4)),u=p(a(135)),i=p(a(155)),l=p(a(156)),d=p(a(157));function p(t){return t&&t.__esModule?t:{default:t}}e.buttonClick=o.default,e.initTemplate=n.default,e.afterEvent=r.default,e.tableModelConfirm=c.default,e.searchBtnClick=s.default,e.doubleClick=i.default,e.pageInfoClick=l.default,e.tableButtonClick=u.default,e.setButtonUsability=d.default},151:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){switch(console.log(e),e){case"Refresh":s(t);break;case"DownStatusAction":var a=t.table.getCheckedRows(c.tableId);if(0==a.length)return void(0,n.toast)({color:"warning",content:t.MutiInit.getIntl("36101011")&&t.MutiInit.getIntl("36101011").get("36101011-000003")});var o=[];a.forEach((function(t){o.push(t.data.values.pk_ebankpaystatus_h.value)})),(0,n.ajax)({url:"/nccloud/obm/ebankpayorderstatus/ebankpayorderstatusdownload.do",data:{pks:o},success:function(t){t.data&&t.data.msg&&(0,n.toast)({content:t.data.msg,color:"success"})}});break;case"SyncStatusAction":if(0==(a=t.table.getCheckedRows(c.tableId)).length)return void(0,n.toast)({color:"warning",content:t.MutiInit.getIntl("36101011")&&t.MutiInit.getIntl("36101011").get("36101011-000003")});o=[],a.forEach((function(t){o.push(t.data.values.pk_ebankpaystatus_h.value)})),(0,n.ajax)({url:"/nccloud/obm/ebankpayorderstatus/ebankpayorderstatussynchrostatus.do",data:{pks:o},success:function(t){t.data&&t.data.msg&&(0,n.toast)({color:"success",content:t.data.msg})}});break;case"output":if(0==(a=t.table.getCheckedRows(c.tableId)).length)return void(0,n.toast)({color:"warning",content:t.MutiInit.getIntl("36101011")&&t.MutiInit.getIntl("36101011").get("36101011-000003")});o=[],a.forEach((function(t){o.push(t.data.values.pk_ebankpaystatus_h.value)})),(0,n.output)({url:"/nccloud/obm/ebankpayorderstatus/print.do",data:{oids:o,outputType:"output"}});break;case"Print":if(0==(a=t.table.getCheckedRows(c.tableId)).length)return void(0,n.toast)({color:"warning",content:t.MutiInit.getIntl("36101011")&&t.MutiInit.getIntl("36101011").get("36101011-000003")});o=[],a.forEach((function(t){o.push(t.data.values.pk_ebankpaystatus_h.value)})),(0,n.print)("pdf","/nccloud/obm/ebankpayorderstatus/print.do",{nodekey:"NCCLOUD",oids:o},!1);break;case"Preview":a(t)}};var o,n=a(1),r=a(4),c=((o=r)&&o.__esModule,a(2));var s=function(t){var e=t.table.getTablePageInfo(c.tableId),a=(t.meta.getMeta(),n.cacheTools.get(c.searchparam));if(console.log(a),a){n.cacheTools.set(c.searchback,"1"),t.search.setSearchValue(c.searchId,a);var o=t.search.getAllSearchData(c.searchId),r=t.search.getQueryInfo(c.searchId,!1).oid,s={conditions:o.conditions||o,pageInfo:e,pagecode:c.pagecode,queryAreaCode:c.searchId,oid:r,queryType:"simple"};console.log(s),(0,n.ajax)({url:"/nccloud/obm/ebankpayorderstatus/query.do",data:s,success:function(e){var a=e.success,o=e.data;a&&(o&&o[c.tableId]?(t.table.setAllTableData(c.tableId,e.data[c.tableId]),(0,n.toast)({color:"success",content:t.MutiInit.getIntl("36101011")&&t.MutiInit.getIntl("36101011").get("36101011-000009")})):(t.table.setAllTableData(c.tableId,{rows:[]}),(0,n.toast)({color:"warning",content:t.MutiInit.getIntl("36101011")&&t.MutiInit.getIntl("36101011").get("36101011-000004")})))},error:function(t){console.log(t.message)}})}}},152:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){t.createUIDom({pagecode:c.pagecode,appcode:c.appcode},(function(e){if(e){if(e.template){var a=e.template;a=function(t,e){var a=this;return e[c.tableId].pagination=!0,e[c.searchId].items=e[c.searchId].items.map((function(t,e){return t.col="2",t})),e[c.searchId].items.find((function(t){return"pk_org"===t.attrcode})).isMultiSelectedEnabled=!0,e[c.searchId].items.map((function(t){"pk_org"==t.attrcode&&(t.queryCondition=function(){return{funcode:c.funcode,TreeRefActionExt:"nccloud.web.tmpub.filter.FinanceOrgPermissionFilter"}})})),e[c.tableId].items=e[c.tableId].items.map((function(e,a){return"srcbillno"==e.attrcode&&(e.render=function(e,a,o){React.createElement("div",null,a.srcbillno.value);return React.createElement("a",{style:{textDecoration:"",cursor:"pointer"},onClick:function(){t.pushTo("/card",{status:"browse",pagecode:c.pagecode_card,appcode:c.appcode,id:a.pk_ebankpaystatus_h.value})}},a&&a.srcbillno&&a.srcbillno.value)}),e})),e[c.tableId].items.push({attrcode:"opr",label:t.MutiInit.getIntl("36101011")&&t.MutiInit.getIntl("36101011").get("36101011-000002"),width:200,className:"table-opr",itemtype:"customer",fixed:"right",visible:!0,render:function(e,o,n){return t.button.createOprationButton(["SyncStatusAction","DownStatusAction"],{area:"list_inner",buttonLimit:3,onButtonClick:function(t,c){r.default.call(a,t,c,e,o,n)}})}}),e}(t,a),t.meta.setMeta(a,(function(){var e=o.cacheTools.get(c.searchparam);console.log(e),e&&(o.cacheTools.set(c.searchback,"1"),t.search.setSearchValue(c.searchId,e),(0,n.default)(t,e))}))}if(e.button){var s=e.button;t.button.setButtons(s)}}}))};var o=a(1),n=s(a(4)),r=s(a(135)),c=a(2);function s(t){return t&&t.__esModule?t:{default:t}}o.base.NCPopconfirm,o.base.NCIcon,o.base.NCTooltip},153:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,a,o,n,r,c){}},154:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,a){};a(1)},155:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,a){var r=this.props.search.getAllSearchData(n.searchId);o.cacheTools.set(n.searchparam,r),this.props.pushTo("/card",{status:"browse",pagecode:n.pagecode_card,appcode:n.appcode,id:t.pk_ebankpaystatus_h.value})};var o=a(1),n=a(2)},156:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,a){var r={allpks:a,pageid:n.pagecode};(0,o.ajax)({url:"/nccloud/obm/ebankpayorderstatus/querypage.do",data:r,success:function(e){var a=e.success,o=e.data;a&&(o?t.table.setAllTableData(n.tableId,o[n.tableId]):t.table.setAllTableData(n.tableId,{rows:[]}))}})};var o=a(1),n=a(2)},157:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.table.getCheckedRows(o.tableId);e&&0!=e.length?t.button.setDisabled({DownStatusAction:!1,SyncStatusAction:!1,Print:!1,output:!1,Refresh:!1}):t.button.setDisabled({DownStatusAction:!0,SyncStatusAction:!0,Print:!0,output:!0,Refresh:!1})};var o=a(2)},2:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.tableId="table_payorderstatus_L01",e.searchId="search_payorderstatus_L01",e.searchparam="36101011_L01_search",e.searchback="36101011_C01_back",e.searchoid="1001Z61000000001M98Z",e.funcode="36101011",e.pagecode="36101011_L01",e.appcode="36101011",e.appid="1001Z61000000001M989",e.pagecode_card="36101011_C01",e.dataSource="tm.obm.ebankpayorderstatus.payorderstatus"},4:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var a=o.cacheTools.get(n.searchback);console.log(e),o.cacheTools.set(n.searchback,"0"),o.cacheTools.set(n.searchparam,e);var r=t.table.getTablePageInfo(n.tableId),c=(t.meta.getMeta(),t.search.getQueryInfo(n.searchId,!1).oid),s={conditions:e.conditions||e,pageInfo:r,pagecode:n.pagecode,queryAreaCode:n.searchId,oid:c,queryType:"simple"};console.log(s),(0,o.ajax)({url:"/nccloud/obm/ebankpayorderstatus/query.do",data:s,success:function(e){var r=e.success,c=e.data;if(r)if(t.button.setDisabled({DownStatusAction:!0,SyncStatusAction:!0,Print:!0,output:!0,Refresh:!1}),c&&c[n.tableId]){if(t.table.setAllTableData(n.tableId,e.data[n.tableId]),!a||"0"===a){var s=t.MutiInit.getIntl("36101011")&&t.MutiInit.getIntl("36101011").get("36101011-000005"),u=t.MutiInit.getIntl("36101011")&&t.MutiInit.getIntl("36101011").get("36101011-000006"),i=e.data[n.tableId].allpks.length;(0,o.toast)({content:s+i+u,color:"success"})}}else t.table.setAllTableData(n.tableId,{rows:[]}),a&&"0"!==a||(0,o.toast)({content:t.MutiInit.getIntl("36101011")&&t.MutiInit.getIntl("36101011").get("36101011-000004"),color:"warning"})},error:function(t){console.log(t.message)}})};var o=a(1),n=a(2)},5:function(t,a){t.exports=e},6:function(t,e){t.exports=a}})}));
//# sourceMappingURL=index.f21ff39f.js.map