/*qez+91vLaUxbYd0O4ym9GtyKacIIH0CrRMVEVf6ugGwChhFXe3Czas3bBmBoGYGp*/
/*! @ncctag {"date":"2020-4-17 10:18:24"} */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nc-lightapp-front"),require("react"),require("react-dom"),require("axios")):"function"==typeof define&&define.amd?define(["nc-lightapp-front","react","react-dom","axios"],t):"object"==typeof exports?exports["fbm/fbm/acceptAppr/card/index"]=t(require("nc-lightapp-front"),require("react"),require("react-dom"),require("axios")):e["fbm/fbm/acceptAppr/card/index"]=t(e["nc-lightapp-front"],e.React,e.ReactDOM,e.axios)}(window,(function(e,t,a,r){return function(e){var t={};function a(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(r,o,function(t){return e[t]}.bind(null,o));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="../../../../",a(a.s=715)}({1:function(t,a){t.exports=e},10:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.go2CardCheck=t.tbbWarnDialog=t.showTBBMsg=t.getTBBMsg=t.saveCommit=t.frozenBtnCtrl=t.showErrBtn=t.createCardWebSocket=t.createListWebSocket=t.setRate2NewRow=t.getCacheRateValue=t.bodyRateEditOnAfterEdit=t.addDefReferFilter=t.elecSignCardPrint=t.elecSignListPrint=t.createSimpleBillData=t.buildLightBodyAfterEditData=t.loadMultiLang=t.getMultiLangRes=t.appendMultiLangRes=t.saveMultiLangRes=t.getPropCache=t.setPropCache=t.showPagination=t.setDefOrg2AdvanceSrchArea=t.setDefOrg2ListSrchArea=t.setDefOrg2Form=t.hasDefaultOrg=t.isLinkScene=void 0;var r=a(1),o=a(9);function n(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,a){return function r(o,n){try{var i=t[o](n),l=i.value}catch(e){return void a(e)}if(!i.done)return Promise.resolve(l).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(l)}("next")}))}}var i,l,s=t.isLinkScene=function(e){var t=e.getUrlParam(o.URL_PARAM.SCENE);return!(!!!e.getUrlParam(o.URL_PARAM.TBB_LINK)&&t!=o.SCENE.LINK&&t!=o.SCENE.FIP)},c=t.hasDefaultOrg=function(e){return e&&e.context&&e.context&&e.context.pk_org},u=function(e,t,a){if(!(e&&e.search&&t&&a))return!1;try{var r=e.search.getSearchValByField(t,a);return!(!r||!r.value||!r.value.firstvalue&&!r.value.secondvalue)}catch(e){return!0}},d=(t.setDefOrg2Form=function(e,t,a){if(e&&t&&c(a)){var r=a.context,o=r.pk_org,n=r.org_Name,i=r.pk_org_v,l=r.org_v_Name;e.form.setFormItemsValue(t,{pk_org:{value:o,display:n},pk_org_v:{value:i,display:l}})}},t.setDefOrg2ListSrchArea=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pk_org";if(e&&e.search&&t&&c(a)&&!s(e)&&!u(e,t,r)){var o=a.context,n=o.pk_org,i=o.org_Name,l={display:i,value:n};e.search.setSearchValByField(t,r,l)}},t.setDefOrg2AdvanceSrchArea=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pk_org";if(e&&e.search&&t&&c(a)&&a.template&&!s(e)){var o=a.template,n=a.context,i=n.pk_org,l=n.org_Name;o[t].items.map((function(e){e.attrcode==r&&(e.initialvalue={display:l,value:i})}))}},t.showPagination=function(e,t,a){e&&t&&a&&!a.template&&(a.template[t].pagination=!s(e))},function(e){return e+"_extObj"}),p=(t.setPropCache=function(e,t,a,r){if(e&&t&&a){var o=d(t),n=e.ViewModel.getData(o);n||(n={}),n[a]=r,e.ViewModel.setData(o,n)}},t.getPropCache=function(e,t,a){if(!e||!t||!a)return null;var r=d(t),o=e.ViewModel.getData(r);return o&&o.hasOwnProperty(a)?o[a]:null},t.saveMultiLangRes=function(e,t){if(e&&t){e.ViewModel.setData("multiLang",t)}}),f=(t.appendMultiLangRes=function(e,t){if(e&&t){var a=f(e);a?Object.assign(a,t):p(e,t)}},t.getMultiLangRes=function(e){if(e){return e.ViewModel.getData("multiLang")}}),C=t.loadMultiLang=function(e,t){var a=f(e);return a&&a[t]||""},m=function(e,t){var a={},r=e.form.getAllFormValue(t);return r.areacode=t,a[t]=r,a},h=function(e,t){var a={rows:e.cardTable.getChangedRows(t),areaType:"table",areacode:t},r={};return r[t]=a,r},_=function(e,t,a,r,o,n,i,l){var s={head:m(e,a),pageid:t};return l?s.body=h(e,r):s.bodys=h(e,r),{areacode:r,attrcode:o,card:s,changedrows:n,index:i}},R=(t.buildLightBodyAfterEditData=function(e,t,a,r,o,n,i){var l=arguments.length>7&&void 0!==arguments[7]&&arguments[7];try{if(!(e&&t&&a&&r&&o&&n))throw new Error("参数缺失！");var s=_(e,t,a,r,o,n,i,l),c=s.card,u=c.body,d=c.bodys;if(l&&1==u[r].rows.length||!l&&1==d[r].rows.length)return s;var p=[],f=n[0].rowid;if(!(u=l?u[r]:d[r]))throw new Error("未获取到指定的表体["+r+"]!");var C=u,m=C.rows,h=!0,R=!1,g=void 0;try{for(var v,A=m[Symbol.iterator]();!(h=(v=A.next()).done);h=!0){var D=v.value,b=D.rowid;if(b&&b==f){p.push(D);break}}}catch(e){R=!0,g=e}finally{try{!h&&A.return&&A.return()}finally{if(R)throw g}}if(0==p.length)throw new Error("未找到修改的行!");return u.rows=p,s}catch(e){throw e}},function(e){if(!e||0==e.length)return null;var t=!0,a=!1,r=void 0;try{for(var o,n=e[Symbol.iterator]();!(t=(o=n.next()).done);t=!0){var i=o.value;if(i&&i.values&&0!=Object.keys(i.values).length){var l=i.values,s=Object.keys(l),c=!0,u=!1,d=void 0;try{for(var p,f=s[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var C=p.value,m=l[C];m&&0!=Object.keys(m).length&&m.value||delete l[C]}}catch(e){u=!0,d=e}finally{try{!c&&f.return&&f.return()}finally{if(u)throw d}}}}}catch(e){a=!0,r=e}finally{try{!t&&n.return&&n.return()}finally{if(a)throw r}}}),g=function(e,t,a,r,o){var n=e.createMasterChildDataSimple(t,a,r),i=n.head,l=n.body;return o&&(R(i[a].rows),R(l[r].rows)),n},v=function(e,t,a,r,o){var n=e.createExtCardDataSimple(t,a,r),i=n.head,l=n.bodys;if(o){R(i[a].rows);var s=!0,c=!1,u=void 0;try{for(var d,p=r[Symbol.iterator]();!(s=(d=p.next()).done);s=!0){var f=d.value;R(l[f].rows)}}catch(e){c=!0,u=e}finally{try{!s&&p.return&&p.return()}finally{if(c)throw u}}}return n},A=t.createSimpleBillData=function(e,t,a,r){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!(e&&t&&a&&r))return null;var n=!!Array.isArray(r)&&r.length>1,i=Array.isArray(r)?r:[r];return n?v(e,t,a,i,o):g(e,t,a,i[0],o)},D=(t.elecSignListPrint=function(e,t){var a=t.url,o=t.offical,n=void 0!==o&&o,i=t.appCode,l=t.nodeKey,s=t.tableCode,c=t.field_id,u=t.field_billno,d=void 0===u?"vbillno":u,p=t.getOrgFunc,f=t.validateFunc;if(!(a&&i&&s&&c&&d))throw new Error("参数缺失！");var m=e.table.getCheckedRows(s);if(null!=m&&0!=m.length){var h=[],_=[],R=!0,g=!1,v=void 0;try{for(var A,D=m[Symbol.iterator]();!(R=(A=D.next()).done);R=!0){var E=A.value,y=E&&E.data&&E.data.values&&E.data.values[c]&&E.data.values[c].value;if(y){var I=E&&E.data&&E.data.values&&E.data.values[d]&&E.data.values[d].value,M=E&&E.data&&E.data.values&&E.data.values.pk_org&&E.data.values.pk_org.value,k=E.index;p&&"function"==typeof p&&(M=p(E));var F=!0;if(f&&"function"==typeof f){var T=f(E);T&&(_.push(O(e,T,I,k)),F=!1)}F&&h.push({id:y,vbillno:I,pk_org:M,index:k})}}}catch(e){g=!0,v=e}finally{try{!R&&D.return&&D.return()}finally{if(g)throw v}}b(e,{url:a,offical:n,appCode:i,nodeKey:l,detail:h,errMessArr:_})}else(0,r.toast)({color:"warning",content:C(e,"3601-000010")})},t.elecSignCardPrint=function(e,t){var a=t.url,r=t.offical,o=void 0!==r&&r,n=t.appCode,i=t.nodeKey,l=t.headCode,s=t.field_id,c=t.field_billno,u=void 0===c?"vbillno":c,d=t.getOrgFunc,p=t.validateFunc;if(!(a&&n&&l&&s&&u))throw new Error("参数缺失！");var f=e.form.getFormItemsValue(l,s).value,C=e.form.getFormItemsValue(l,u).value,m=e.form.getFormItemsValue(l,"pk_org").value;d&&"function"==typeof d&&(m=d());var h=[],_=!0;if(p&&"function"==typeof p){var R=p();R&&(h.push(O(e,R,C,0)),_=!1)}b(e,{url:a,offical:o,appCode:n,nodeKey:i,detail:_?[{id:f,vbillno:C,pk_org:m}]:null,errMessArr:h})},function(e,t){t&&0!=t.length&&(1==t.length?(0,r.toast)({duration:"infinity",color:"danger",content:t[0],hasCloseBtn:!0}):(0,r.toast)({duration:"infinity",color:"danger",TextArr:[C(e,"3601-000000"),C(e,"3601-000001"),C(e,"3601-000021")],groupOperation:!0,groupOperationMsg:t}))}),b=function(e,t){var a=t.url,n=t.offical,i=t.appCode,l=t.nodeKey,s=t.detail,c=t.errMessArr,u=void 0===c?[]:c;if(!(u&&u.length>0)||s&&0!=s.length){var d={offical:n,detail:s};(0,r.ajax)({url:o.COMMON_URL.ELECSIGNPRINTCHECK,data:d,success:function(t){var o=t.data,s=o.passPKs,c=o.passInfos,d=o.unPassInfos;if(u.length>0||d&&d.length>0){var p=!0,f=!1,C=void 0;try{for(var m,h=d[Symbol.iterator]();!(p=(m=h.next()).done);p=!0){var _=m.value,R=_.vbillno,g=_.mess,v=_.index,A=O(e,g,R,v);u.push(A)}}catch(e){f=!0,C=e}finally{try{!p&&h.return&&h.return()}finally{if(f)throw C}}D(e,u)}if(s&&s.length>0&&c&&c.length>0){var b={offical:n,detail:c};(0,r.print)("pdf",a,{nodekey:l,appcode:i,oids:s,userjson:JSON.stringify(b)})}}})}else D(e,u)},O=function(e,t,a,r){return C(e,"3601-000008")+a+C(e,"3601-000009")+t||""},E=(t.addDefReferFilter=function(e,t){var a=t.headCode,r=t.areaCode,o=t.meta,n=t.orgField,i=t.getOrgFunc;if(r&&o&&(a||n||i)){var l=Array.isArray(r)?r:[r],s=!0,c=!1,u=void 0;try{for(var d,p=l[Symbol.iterator]();!(s=(d=p.next()).done);s=!0){o[d.value].items.map((function(t){(t.attrcode.startsWith("vdef")||t.attrcode.startsWith("vuserdef"))&&(t.queryCondition=function(){return{pk_org:i&&"function"==typeof i?i():(e.form.getFormItemsValue(a,n)||{}).value}})}))}}catch(e){c=!0,u=e}finally{try{!s&&p.return&&p.return()}finally{if(c)throw u}}}},t.bodyRateEditOnAfterEdit=function(e){var t=e.props,a=e.bodyCodes,n=e.rateInfo,i=e.datasource,l=e.olcRates,s=e.glcRates,c=e.gllcRates;if(t&&n&&i&&a){!function(e){var t=e.rateInfo,a=e.datasource;if(t&&a){r.cardCache.setDefData(o.cache.rateinfo,a,t);r.cardCache.getDefData(o.cache.rateinfo,a)}}({rateInfo:n,datasource:i}),Array.isArray(a)||(a=[a]);var u=n.olcRateEditable,d=n.glcRateEditable,p=n.gllcRateEditable,f=!0,C=!1,m=void 0;try{for(var h,_=a[Symbol.iterator]();!(f=(h=_.next()).done);f=!0){var R=h.value;l&&(Array.isArray(l)||(l=[l]),t.cardTable.setColEditableByKey(R,l,!u)),s&&(Array.isArray(s)||(s=[s]),t.cardTable.setColEditableByKey(R,s,!d)),c&&(Array.isArray(c)||(c=[c]),t.cardTable.setColEditableByKey(R,c,!p))}}catch(e){C=!0,m=e}finally{try{!f&&_.return&&_.return()}finally{if(C)throw m}}}},t.getCacheRateValue=function(e){var t=e.datasource;if(t){var a=r.cardCache.getDefData(o.cache.rateinfo,t);return a?{olcRate:a.olcRate,glcRate:a.glcRate,gllcRate:a.gllcRate}:null}}),y=(t.setRate2NewRow=function(e){var t=e.olcRates,a=e.glcRates,r=e.gllcRates,o=e.datasource,n=e.row;if(o){var i=E({datasource:o});if(i){var l=i.olcRate,s=i.glcRate,c=i.gllcRate;if(t){Array.isArray(t)||(t=[t]);var u=!0,d=!1,p=void 0;try{for(var f,C=t[Symbol.iterator]();!(u=(f=C.next()).done);u=!0){n[f.value]={value:l}}}catch(e){d=!0,p=e}finally{try{!u&&C.return&&C.return()}finally{if(d)throw p}}}if(a){Array.isArray(a)||(a=[a]);var m=!0,h=!1,_=void 0;try{for(var R,g=a[Symbol.iterator]();!(m=(R=g.next()).done);m=!0){n[R.value]={value:s}}}catch(e){h=!0,_=e}finally{try{!m&&g.return&&g.return()}finally{if(h)throw _}}}if(r){Array.isArray(r)||(r=[r]);var v=!0,A=!1,D=void 0;try{for(var b,O=r[Symbol.iterator]();!(v=(b=O.next()).done);v=!0){n[b.value]={value:c}}}catch(e){A=!0,D=e}finally{try{!v&&O.return&&O.return()}finally{if(A)throw D}}}}}},t.createListWebSocket=function(e,t){var a=t.tableAreaCode,r=t.tablePkName,o=t.billtype,n=t.dataSource,i=t.serverLocation;if(e&&a&&r&&o){var l=e.socket,s={tableAreaCode:a,billpkname:r,billtype:o,dataSource:n};return i&&(s.serverLocation=i),React.createElement("div",null,l.connectMesg(s))}},t.createCardWebSocket=function(e,t){var a=t.headBtnAreaCode,r=t.formAreaCode,o=t.billpkname,n=t.billtype,i=t.dataSource,l=t.serverLocation;if(e&&a&&r&&o&&n){var s=e.socket,c={headBtnAreaCode:a,formAreaCode:r,billtype:n,billpkname:o,dataSource:i};return l&&(c.serverLocation=l),React.createElement("div",null,s.connectMesg(c))}},t.showErrBtn=function(e,t){var a=t.headBtnCode,r=t.headAreaCode,n=t.fieldPK;t.datasource;if(e&&a&&r){var i=e.getUrlParam(o.URL_PARAM.STATE),l="0";try{l=e.form.getFormItemsValue(r,o.sagaField.status).value}catch(e){l="0"}var s="1"===l&&"browse"==i;e.button.toggleErrorStatus(a,{isError:s}),s&&y(e,{headAreaCode:r,fieldPK:n})}},function(e,t){var a=t.headAreaCode,r=t.fieldPK;if(a&&r){var n=e.getUrlParam("status"),i=e.form.getFormItemsValue(a,o.sagaField.gtxid),l=e.form.getFormItemsValue(a,r);"browse"==n&&i&&i.value&&l&&l.value&&e.socket.showToast({gtxid:i.value,billpk:l.value})}}),I=(t.frozenBtnCtrl=function(e,t){var a=t.btnCodes;if(e&&a){var r=Array.isArray(a)?a:[a];if("browse"==e.getUrlParam(o.URL_PARAM.STATE)){var n="1";try{n=e.form.getFormItemsValue(headAreaCode,o.sagaField.frozen).value}catch(e){n="1"}e.button.setButtonDisabled(r,"1"==n)}}},function(e,t){var a=t.pageCode,r=t.headCode,o=t.bodyCodeArr,n=t.saveFunc,i={},l={};if(0==o.length)i={pageid:a,model:{areacode:r,rows:e.form.getAllFormValue(r).rows,areaType:"form"}},l[r]="form";else{i=o.length>1?e.createExtCardData(a,r,o):e.createMasterChildData(a,r,o[0]);var s=!0,c=!1,u=void 0;try{for(var d,p=o[Symbol.iterator]();!(s=(d=p.next()).done);s=!0){l[d.value]="cardTable"}}catch(e){c=!0,u=e}finally{try{!s&&p.return&&p.return()}finally{if(c)throw u}}}e.validateToSave(i,n,l,"")}),M=(i=n(regeneratorRuntime.mark((function e(t,a){var r,o=a.pageCode,n=a.headCode,i=a.bodyCodeArr,l=a.saveValidate,s=a.processSaveData;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.form.isCheckNow(n)){e.next=2;break}return e.abrupt("return",null);case 2:if(!(i&&i.length>0)||t.cardTable.checkTableRequired()){e.next=4;break}return e.abrupt("return",null);case 4:if(!l||"function"!=typeof l){e.next=7;break}if(l()){e.next=7;break}return e.abrupt("return",null);case 7:if(r=A(t,o,n,i),!s||"function"!=typeof s){e.next=12;break}return e.next=11,s(r);case 11:r=e.sent;case 12:return e.abrupt("return",{data:JSON.stringify(r),pageCode:o});case 13:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)}),k=(t.saveCommit=(l=n(regeneratorRuntime.mark((function e(t,a){var o,n,i=a.pageCode,l=a.headCode,s=a.bodyCode,c=a.url,u=a.assign,d=a.showAssignFunc,p=a.updateViewFunc,f=a.saveValidate,C=a.processSaveData,m=a.extParam;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i&&l&&c&&d&&p){e.next=2;break}return e.abrupt("return");case 2:return m||(m={}),o=(a=s)?Array.isArray(a)?a:[a]:[],e.next=6,M(t,{pageCode:i,headCode:l,bodyCodeArr:o,saveValidate:f,processSaveData:C});case 6:if(n=e.sent){e.next=9;break}return e.abrupt("return");case 9:u&&(m.content=JSON.stringify(u)),n.extParam=m,I(t,{pageCode:i,headCode:l,bodyCodeArr:o,saveFunc:function(){(0,r.ajax)({url:c,data:n,success:function(e){var t=e.data.workflow;t&&"approveflow"==t||"workflow"==t?d(e):p(e)}})}});case 12:case"end":return e.stop()}var a}),e,this)}))),function(e,t){return l.apply(this,arguments)}),t.getTBBMsg=function(e){var t=e.row,a=e.msgfield;a||(a="ntbinfo");var r=(t&&t.values&&t.values[a]||{}).value;return r&&(t.values[a]={value:null,display:null}),r});t.showTBBMsg=function(e){var t=e.head,a=e.headCode,o=e.msgfield;if(!(t&&a&&t[a]&&t[a].rows&&0!=t[a].rows.length))return!1;var n=!1,i=t[a].rows[0],l=k({row:i,msgfield:o});return l&&((0,r.toast)({color:"warning",content:l}),n=!0),n},t.tbbWarnDialog=function(e,t){var a=t.ntbinfos,o=t.onConfirm;if(a&&0!=a.length){var n=[],i=a.length>1,l=1,s=i?[C(e,"3601-000019")+"["+a.length+"]"+C(e,"3601-000020")]:[],c=!0,u=!1,d=void 0;try{for(var p,f=a[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var m=p.value;if(null!=m){var h=m.pk,_=m.msg,R=m.vbillno;if(h&&R){n.push(h);var g="";i&&(g=l+". "+C(e,"3601-000018")+"["+R+"] "),s.push(React.createElement("li",null,g+_)),l++}}}}catch(e){u=!0,d=e}finally{try{!c&&f.return&&f.return()}finally{if(u)throw d}}0!=s.length&&(0,r.promptBox)({color:"warning",title:C(e,"3601-000017"),content:React.createElement("ul",null,s),beSureBtnClick:function(){o(n)}})}},t.go2CardCheck=function(e){var t=e.props,a=e.url,o=e.pk,n=e.ts,i=e.fieldPK,l=e.actionCode,s=e.permissionCode,c=e.checkSaga,u=void 0===c||c,d=e.checkTS,p=void 0===d||d,f=e.go2CardFunc;f&&"function"==typeof f&&(t&&a&&o&&n&&i||f(),(0,r.ajax)({url:a,data:{pk:o,ts:n,actionCode:l,permissionCode:s,fieldPK:i,checkSaga:u,checkTS:p},success:function(e){f()}}))}},139:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{template:{gridrelation:{restmoney:{destBrowseAreaCode:null,destEditAreaCode:null,srcAreaCode:"restmoney",tabRelation:["restmoney"]}},restmoney:{clazz:"nc.vo.cmp.settlement.LinkAccountBalanceVO",code:"restmoney",items:[{itemtype:"input",visible:!0,label:this.state.json["360701OB-000041"],attrcode:"accountcode",maxlength:"20",metapath:"accountcode"},{itemtype:"input",visible:!0,label:this.state.json["360701OB-000042"],attrcode:"accountname",maxlength:"20",metapath:"accountname"},{itemtype:"input",visible:!0,label:this.state.json["360701OB-000058"],attrcode:"currencyname",maxlength:"20",metapath:"currencyname"},{itemtype:"input",visible:!0,label:this.state.json["360701OB-000043"],attrcode:"accounttype",disabled:!0,metapath:"accounttype"},{itemtype:"input",visible:!1,label:this.state.json["360701OB-000057"],code:"capitaltype",attrcode:"capitaltype",disabled:!0,metapath:"capitaltype"},{itemtype:"number",scale:"8",visible:!0,label:this.state.json["360701OB-000044"],attrcode:"currentbalance",maxlength:"28",metapath:"currentbalance"},{itemtype:"number",scale:"8",visible:!0,label:this.state.json["360701OB-000045"],attrcode:"surplusbalance",maxlength:"28",metapath:"surplusbalance"}],moduletype:"table",name:this.state.json["360701OB-000046"],pagination:!1,vometa:""},code:"restmoney",moduletype:"table",name:this.state.json["360701OB-000046"]},code:"360701OB_P01",formrelation:null,name:this.state.json["360701OB-000046"],metapath:"cmp_initdate",clazz:"nc.vo.cmp.settlement.LinkAccountBalanceVO",pagetype:"Nochild"}}},142:function(e,t){e.exports=r},143:function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var a=t.protocol+"//"+t.host,r=a+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var o,n=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(n)?e:(o=0===n.indexOf("//")?n:0===n.indexOf("/")?a+n:r+n.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")}))}},153:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=a(2),n=s(o),i=(s(a(6)),a(1)),l=(s(a(142)),a(155));function s(e){return e&&e.__esModule?e:{default:e}}var c=i.base.NCModal,u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.getLangCode=function(e){var t=a.props.MutiInit.getIntl(a.moduleId);return t&&t.get(a.moduleId+"-"+e)},a.initMultiLang=function(){var e=a.moduleId;(0,i.getMultiLang)({moduleId:e,currentLocale:a.state.currentLocale,domainName:"cmp",callback:a.setMultiLang})},a.setMultiLang=function(e){a.setState({json:e},(function(){l.initTemplate.call(a,a.props)}))},a.getData=function(e){var t={pubsearch:e,pagecode:"360701OB_P01",queryAreaCode:"",oid:"",queryType:"simple"};(0,i.ajax)({url:"/nccloud/cmp/bankaccountbook/initrestmoneypub.do",data:t,success:function(e){var t=e.success,r=e.data;if(t&&null!=r&&r){var o={},n=[];if(r.message)return(0,i.toast)({color:"warning",content:r.message}),void a.props.table.setAllTableData(a.tableId,{rows:[]});var l=r.scale;l||(l="3");var s=r.vos,c={},u={},d=s.accountCode,p=s.accountName,f=s.accountType,C=s.capitalType,m=s.currencyName,h=s.currentBalance,_=s.surplusBalance;u.accountcode={value:d,display:d},u.accountname={value:p,display:p},u.accounttype={value:f,display:f},u.capitaltype={value:C,display:C},u.currencyname={value:m,display:m},u.currentbalance={value:h,display:h,scale:l},u.surplusbalance={value:_,display:_,scale:l},c.values=u,c.status="0",c.rowid=null,n.push(c),o.rows=n,o.areacode=a.tableId,a.props.table.setAllTableData(a.tableId,o)}else a.props.table.setAllTableData(a.tableId,{rows:[]})}})},a.close=function(){a.setState({showOriginalData:[]},(function(){a.props.onCloseClick()}))},a.moduleId="360701OB",a.tableId="restmoney",a.state={currentLocale:"zh-CN",showOriginalData:[],json:{}},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentWillMount",value:function(){this.initMultiLang()}},{key:"componentDidMount",value:function(){var e=this;this.props.table.setAllTableData(this.tableId,{rows:[]}),this.setState({showOriginalData:this.props.showOriginalData},(function(){e.initData()}))}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(e.showmodal&&e.showmodal!==this.props.showmodal){this.props.table.setAllTableData(this.tableId,{rows:[]}),this.setState({showOriginalData:e.showOriginalData},(function(){t.initData()}))}}},{key:"initData",value:function(){var e=this.state.showOriginalData;if(Array.isArray(e)){if(!e||0==e.length)return;for(var t=0;t<e.length;t++){var a=e[t];a.pk_account||a.pk_cashaccount||e.splice(t,1)}if(0==e.length)return;this.getData(e)}else{var r=[];if(!e.pk_account&&!e.pk_cashaccount)return;r.push(e),this.getData(r)}}},{key:"render",value:function(){var e=this.props,t=e.table,a=e.button,r=(e.search,e.modal,t.createSimpleTable);a.createButton;return n.default.createElement("div",null,n.default.createElement(c,{fieldid:"accbalance",show:this.props.showmodal,style:{width:"1100px"},size:"lg",onHide:this.close},n.default.createElement(c.Header,{closeButton:"true"},n.default.createElement(c.Title,null,this.state.json["360701OB-000056"])),n.default.createElement(c.Body,{size:"sm",className:"body-resize-icon"},n.default.createElement("div",null,r(this.tableId,{height:"158px",showIndex:!0,cancelCustomRightMenu:!0})))))}}]),t}(o.Component);t.default=(0,i.createPage)({})(u)},154:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InnerAccoutDialog=void 0;var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=a(2),n=s(o),i=(s(a(6)),a(1));a(158);var l=s(a(160));function s(e){return e&&e.__esModule?e:{default:e}}var c=i.base.NCModal,u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.tableCode="inneraccbalance",a.init(e),a.state={json:{}},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentWillReceiveProps",value:function(e){this.init(e),this.queryAccBalance(this.props.accpk)}},{key:"componentWillMount",value:function(){var e=this;(0,i.getMultiLang)({moduleId:"3601Inner",domainName:"tmpub",callback:function(t,a,r){a&&e.setState({json:t},(function(){e.initTemplate()}))}})}},{key:"render",value:function(){var e=this.props.table.createSimpleTable;return n.default.createElement(c,{fieldid:"inneraccbalance",className:"InnerAccoutModal_class",show:this.show,onHide:this.close,style:{width:"700px"}},n.default.createElement(c.Header,{closeButton:!0},n.default.createElement(c.Title,null,this.state.json["3601Inner-000005"])),n.default.createElement(c.Body,{className:"body-resize-icon"},e&&n.default.createElement("div",null,e(this.tableCode,{height:"158px",showIndex:!0,cancelCustomRightMenu:!0}))))}},{key:"componentDidMount",value:function(){this.queryAccBalance()}},{key:"init",value:function(e){this.pk_accid=e.accpk,this.show=e.showModal,this.close=e.closeModal}},{key:"queryAccBalance",value:function(){var e=this;(0,i.ajax)({url:"/nccloud/tmpub/pub/inneraccbalance.do",async:!0,data:{accid:this.pk_accid},success:function(t){var a=t.data,r={areacode:e.tableCode,rows:[{status:0,rowid:null,values:{name:{display:a.accName,value:a.accName,scale:-1},bookbalance:{display:null,value:a.bookBalance,scale:3},realbalance:{display:null,value:a.realBalance,scale:3},realbalancewithoutover:{display:null,value:a.realBalanceNoOverFraft,scale:3}}}]};e.props.table.setAllTableData(e.tableCode,r)},error:function(t){e.props.table.setAllTableData(e.tableCode,{rows:[]})}})}},{key:"initTemplate",value:function(){var e=l.default.call(this);if(e.template){var t=e.template;t=this.modifierMeta.call(this,t),this.props.meta.setMeta(t)}}},{key:"modifierMeta",value:function(e){return e}}]),t}(o.Component);t.InnerAccoutDialog=(0,i.createPage)({})(u)},155:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.restmoney=t.initTemplate=void 0;var r=n(a(156)),o=n(a(139));function n(e){return e&&e.__esModule?e:{default:e}}t.initTemplate=r.default,t.restmoney=o.default},156:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=n.default.call(this);if(t.template){var a=t.template;a=function(e,t){return t.restmoney.items=t.restmoney.items.map((function(e,t){return e.width=150,e})),t.restmoney.showcheck=!0,t.restmoney.pagination=!1,t}(0,a),e.meta.setMeta(a)}};a(1);var r,o=a(139),n=(r=o)&&r.__esModule?r:{default:r}},158:function(e,t,a){var r=a(159);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};a(8)(r,o);r.locals&&(e.exports=r.locals)},159:function(e,t,a){(e.exports=a(7)(!1)).push([e.i,".InnerAccoutModal_class .u-modal-content {\n  max-height: 300px !important;\n}\n",""])},160:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{template:{gridrelation:{inneraccbalance:{destBrowseAreaCode:null,destEditAreaCode:null,srcAreaCode:"inneraccbalance",tabRelation:["inneraccbalance"]}},inneraccbalance:{clazz:null,code:"inneraccbalance",items:[{itemtype:"input",visible:!0,label:this.state.json["3601Inner-000000"],attrcode:"name",maxlength:"20",metapath:null},{itemtype:"input",visible:!0,label:this.state.json["3601Inner-000001"],attrcode:"bookbalance",maxlength:"20",metapath:null},{itemtype:"input",visible:!0,label:this.state.json["3601Inner-000002"],attrcode:"realbalance",maxlength:"20",metapath:null},{itemtype:"input",visible:!0,label:this.state.json["3601Inner-000003"],attrcode:"realbalancewithoutover",maxlength:"20",metapath:null}],moduletype:"table",name:this.state.json["3601Inner-000005"],pagination:!1,vometa:""},code:"inneraccbalancedialog",moduletype:"table",name:this.state.json["3601Inner-000005"]},code:"inneraccbalancedialog",formrelation:null,name:this.state.json["3601Inner-000005"],metapath:null,clazz:null,pagetype:"Nochild"}}},2:function(e,a){e.exports=t},202:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.MODULE_NAME="fbm",t.MODULE_CODE="3618",t.APP_CODE="36180BPA",t.BILL_TYPE="36HD";var r=t.BASE_URL="/nccloud/fbm/accept/";t.DATASOURCE="fbm.fbm.accept.dataSource",t.FULL_AGGCLASSNAME="nc.vo.fbm.accept.AggAcceptVO",t.URL_LIST={SAVE:r+"acceptSave.do",DELETE:r+"acceptDelete.do",QUERY:r+"acceptQuery.do",COPY:r+"acceptCopy.do",AFTEREVENT:r+"acceptAfterEvent.do",CARD_QUERY:r+"acceptCardQuery.do",COMMIT:r+"acceptCommit.do",UNCOMMIT:r+"acceptUnCommit.do",VOUCHER:r+"acceptVoucher.do",CANCELVOUCHER:r+"acceptCancelVoucher.do",PAGE_QUERY:r+"acceptPageQuery.do",PRINTOUTPUT:r+"printOutPut.do",LINKNTB:"/nccloud/fbm/pub/fbmntblinkplan.do",LQPAYACC:r+"LQPayAcc.do",LinkVoucher:r+"linkVoucher.do"},t.LIST_PAGE_CODE="36180BPA_L01",t.LIST_TABLE_CODE="36180BPA_L01_table",t.LIST_SEARCH_CODE="36180BPA_L01_search",t.CARD_PAGE_CODE="36180BPA_C01",t.CARD_FORM_CODE="36180BPA_C01_form",t.CARD_FORM_CODE2="36180BPA_C01_form2",t.CARD_FORM_CODE3="36180BPA_C01_form3",t.CARD_FORM_CODE4="36180BPA_C01_form4",t.CARD_FORM_CODE5="36180BPA_C01_form5",t.CARD_FORM_CODE6="36180BPA_C01_form6",t.CARD_FORM_CODE8="36180BPA_C01_form8",t.LIST_AREA="list_head",t.LIST_BTN={ADD:"Add",COPY:"Copy",DELETE:"Delete",COMMIT:"Commit",UNCOMMIT:"UnCommit",IMPORT:"Import",EXPORT:"ExportExcelTemplate",LQUERYPJBOOK:"LQueryPJBook",LQUERYVOUCHER:"LQueryVoucher",LQUERYPLAN:"LQueryPlan",LQUERYPAYACC:"LQueryPayAcc",LQUERYSIGN:"LQuerySign",LQUERYAPPROVEINFO:"LQueryApproveInfo",LQUERYINBALAACC:"LQueryInBalaAcc",LQUERYINSECURITYACC:"LQueryInSecurityAcc",VOUCHER:"Voucher",CANCELVOUCHER:"CancelVoucher",PRINT:"Print",OUTPUT:"OutPut",FILEDOCUMENT:"FileDocument",REFRESH:"Refresh"},t.LIST_INNERAREA="list_inner",t.LIST_INNERBTN={INNEREDIT:"InnerEdit",INNERCOMMIT:"InnerCommit",INNERUNCOMMIT:"InnerUnCommit",INNERDELETE:"InnerDelete",INNERVOUCHER:"InnerVoucher",INNERCANCELVOUCHER:"InnerCancelVoucher"},t.CARD_AREA="card_head",t.CARD_BTN={SAVE:"Save",SAVEADD:"SaveAdd",SAVECOMMIT:"SaveCommit",CANCEL:"Cancel",ADD:"Add",EDIT:"Edit",DELETE:"Delete",COPY:"Copy",COMMIT:"Commit",UNCOMMIT:"UnCommit",VOUCHER:"Voucher",CANCELVOUCHER:"CancelVoucher",PRINT:"Print",OUTPUT:"OutPut",LQUERYPJBOOK:"LQueryPJBook",LQUERYVOUCHER:"LQueryVoucher",LQUERYPLAN:"LQueryPlan",LQUERYPAYACC:"LQueryPayAcc",LQUERYSIGN:"LQuerySign",LQUERYAPPROVEINFO:"LQueryApproveInfo",LQUERYINBALAACC:"LQueryInBalaAcc",LQUERYINSECURITYACC:"LQueryInSecurityAcc",FILEDOCUMENT:"FileDocument",REFRESH:"Refresh"}},210:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.linkVoucherApp=t.linkApp=void 0;var r=a(1),o=(a(215),a(9)),n=a(10),i=(t.linkApp=function(e,t,a){(0,r.ajax)({url:"/nccloud/tmpub/pub/qrylinkinfo.do",data:{billTypeOrTransType:t},success:function(t){var r=t.data;if(r){r.url;var n=r.appCode,i=r.linkPageCode;a&&0!=Object.keys(a).length||(a={}),a.scene||(a.scene=o.SCENE.LINK),a.status||(a.status="browse"),a.appcode=n,a.pagecode=i,e.openTo(null,a)}}})},"_LinkVouchar2019");t.linkVoucherApp=function(e,t,a,o,l,s,c){var u={pk_group:a,pk_org:o,relationID:t,pk_billtype:l};c&&c.freedef4&&(u={pk_group:a,pk_org:o,relationID:t,pk_billtype:l,freedef4:c.freedef4}),(0,r.ajax)({url:"/nccloud/tmpub/pub/qrylinkvoucherinfo.do",data:u,success:function(t){var a=t.success,o=t.data;if(a&&o&&o.src&&i==o.src&&o.pklist&&0!=o.pklist.length){var l=o.src,c=o.url,u=o.pklist,d=o.appcode,p=o.pagecode,f=o.srcAppCode,C=o.cachekey;o.des?1==u.length?e.openTo(c,{status:"browse",appcode:d,pagecode:p,id:u[0],n:(0,n.loadMultiLang)(e,"3601-000004"),pagekey:"link",backflag:"noback"}):(r.cacheTools.set(C,u),e.openTo(t.data.url,{status:"browse",appcode:d,pagecode:p,n:(0,n.loadMultiLang)(e,"3601-000004"),scene:d+l})):(r.cacheTools.set(f+l,u),e.openTo(t.data.url,{status:"browse",appcode:d,pagecode:p,scene:f+l}))}else(0,r.toast)({color:"warning",content:(0,n.loadMultiLang)(e,"3601-000002")+s+(0,n.loadMultiLang)(e,"3601-000003")})}})}},215:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.MODULE_H_FTS="FTS",t.MODULE_L_FTS="fts",t.VoucherDataConst={pagecode:"10170410_1017041001",appcode:"10170410",linkIdentification:"36300TP_LinkVouchar"}},6:function(e,t){e.exports=a},7:function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=function(e,t){var a=e[1]||"",r=e[3];if(!r)return a;if(t&&"function"==typeof btoa){var o=(i=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),n=r.sources.map((function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"}));return[a].concat(n).concat([o]).join("\n")}var i;return[a].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+a+"}":a})).join("")},t.i=function(e,a){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var n=this[o][0];"number"==typeof n&&(r[n]=!0)}for(o=0;o<e.length;o++){var i=e[o];"number"==typeof i[0]&&r[i[0]]||(a&&!i[2]?i[2]=a:a&&(i[2]="("+i[2]+") and ("+a+")"),t.push(i))}},t}},714:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.afterEvent=t.pageInfoClick=t.buttonClick=t.buttonVisiable=t.initTemplate=void 0;var r=a(717),o=a(718),n=a(719),i=a(720),l=a(721);t.initTemplate=r.initTemplate,t.buttonVisiable=o.buttonVisiable,t.buttonClick=n.buttonClick,t.pageInfoClick=i.pageInfoClick,t.afterEvent=l.afterEvent},715:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=a(1),n=a(2),i=d(n),l=d(a(153)),s=a(154),c=a(202),u=a(714);function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a(722);o.high.ExcelImport;var f=o.high.NCUploader,C=o.high.ApproveDetail,m=o.high.ApprovalTrans,h=o.high.PrintOutput,_=o.high.Inspection,R=o.cardCache.updateCache,g=o.base.NCAffix,v=o.base.NCDiv,A=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.backList=function(){"linksce"==a.props.getUrlParam("scene")||"fip"==a.props.getUrlParam("scene")?a.props.pushTo("/list",{pagecode:"",scene:"linksce"}):a.props.pushTo("/list",{pagecode:""})},a.toggleShow=function(){var e=a.props.getUrlParam("status");"browse"===e?(a.props.form.setFormStatus(c.CARD_FORM_CODE,e),a.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!1,showBillCode:!0,billCode:a.titleno})):"edit"===e?(a.props.form.setFormStatus(c.CARD_FORM_CODE,"edit"),a.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!1,showBillCode:!0,billCode:a.titleno})):"add"!==e&&"copy"!==e||(a.props.form.setFormStatus(c.CARD_FORM_CODE,"add"),a.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!1,showBillCode:!1})),"add"!==e&&"edit"!==e&&"copy"!==e||a.props.resMetaAfterPkorgEdit();var t=a.props.form.getFormItemsValue(c.CARD_FORM_CODE,"isagent")&&a.props.form.getFormItemsValue(c.CARD_FORM_CODE,"isagent").value;u.afterEvent.call(a,a.props,c.CARD_FORM_CODE,"isagent",t,null,null,null,null,!0),u.buttonVisiable.call(a,a.props)},a.refresh=function(){var e=a.props.getUrlParam("id"),t=a.props.getUrlParam("status"),r="";if(e){var o={pk:e};if("add"==t)return a.props.form.EmptyAllFormValue(c.CARD_FORM_CODE),a.titleno="",void a.toggleShow();r="copy"==t?c.URL_LIST.COPY:c.URL_LIST.CARD_QUERY,D.call(a,o,r,(function(e){if(e.data){this.props.form.setAllFormValue(p({},c.CARD_FORM_CODE,e.data.card.head[c.CARD_FORM_CODE])),this.titleno=e.data.card.head[c.CARD_FORM_CODE].rows[0].values.vbillno.value,"copy"!=t&&"edit"!=t||(this.props.form.setFormItemsDisabled(c.CARD_FORM_CODE,{pk_org:!0}),this.props.form.setFormItemsDisabled(c.CARD_FORM_CODE,{vbillno:!0})),this.toggleShow();var a=this.props.form.getFormItemsValue(this.formId,"saga_status")&&this.props.form.getFormItemsValue(this.formId,"saga_status").value;"browse"===this.props.getUrlParam("status")&&"1"===a?this.props.button.toggleErrorStatus("card_head",{isError:!0}):this.props.button.toggleErrorStatus("card_head",{isError:!1});var r=this.props.form.getFormItemsValue(this.formId,"saga_gtxid")&&this.props.form.getFormItemsValue(this.formId,"saga_gtxid").value;r&&a&&this.props.socket.showToast({gtxid:r,billpk:this.props.form.getFormItemsValue(this.formId,this.primaryId)&&this.props.form.getFormItemsValue(this.formId,this.primaryId).value})}}))}else{a.props.form.EmptyAllFormValue(c.CARD_FORM_CODE),a.setState({isBlank:!0}),a.titleno="",a.toggleShow();var n=a.props.form.getFormItemsValue(a.formId,"saga_status")&&a.props.form.getFormItemsValue(a.formId,"saga_status").value;"browse"===a.props.getUrlParam("status")&&"1"===n?a.props.button.toggleErrorStatus("card_head",{isError:!0}):a.props.button.toggleErrorStatus("card_head",{isError:!1});var i=a.props.form.getFormItemsValue(a.formId,"saga_gtxid")&&a.props.form.getFormItemsValue(a.formId,"saga_gtxid").value;i&&n&&a.props.socket.showToast({gtxid:i,billpk:a.props.form.getFormItemsValue(a.formId,a.primaryId)&&a.props.form.getFormItemsValue(a.formId,a.primaryId).value})}},a.onHideUploader=function(){a.setState({showUploader:!1})},a.closeApprove=function(){a.setState({approveshow:!1})},a.getAssginUsedr=function(e){var t=a.props.MutiInit.getIntl("36180BPA"),r=a.props.form.getFormItemsValue(c.CARD_FORM_CODE,"pk_accept"),n=a.props.form.getFormItemsValue(c.CARD_FORM_CODE,"ts"),i={pageid:c.CARD_PAGE_CODE,pks:[r&&r.value],tss:[n&&n.value],isCardOpt:!0,userObj:e};D.call(a,i,c.URL_LIST.COMMIT,(function(a){a.data&&a.data.errMsg?(0,o.toast)({color:"error",content:a.data.errMsg}):!a.data.workflow||"approveflow"!=a.data.workflow&&"workflow"!=a.data.workflow||e?(this.setState({compositedata:a.data,compositedisplay:!1}),a.data.card.head&&(this.props.form.setAllFormValue(p({},c.CARD_FORM_CODE,a.data.card.head[c.CARD_FORM_CODE])),R("pk_accept",r&&r.value,a.data.card,c.CARD_FORM_CODE,c.DATASOURCE),(0,o.toast)({color:"success",content:t&&t.get("36180BPA-000009")}))):this.setState({compositedata:a.data,compositedisplay:!0}),this.componentDidMount()}))},a.compositeTurnOff=function(e){a.setState({compositedata:null,compositedisplay:!1})},a.pageId=c.CARD_PAGE_CODE,a.formId=c.CARD_FORM_CODE,a.appcode=a.props.getUrlParam("c")||a.props.getSearchParam("c"),a.primaryId="pk_accept",a.API_URL={commit:c.CARD_BTN.COMMIT,uncommit:c.CARD_BTN.UNCOMMIT,makeVoucher:c.CARD_BTN.VOUCHER,cancelVoucher:c.CARD_BTN.CANCELVOUCHER},a.titleno="",a.state={showUploader:!1,billId:"",billno:"",target:null,isBlank:!1,approveshow:!1,billtype:"",assignShow:!1,assignData:null,compositedata:null,compositedisplay:null,printOutputInfo:{},showNtbDetail:!1,ntbdata:{},showOriginal:!1,showOriginalData:[],showInnerAcc:!1,showInnerAccData:null},u.initTemplate.call(a,a.props),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentDidMount",value:function(){this.refresh()}},{key:"render",value:function(){var e=this,t=this.props,a=t.form,r=t.cardPagination,o=t.socket,n=this.props.BillHeadInfo.createBillHeadInfo,d=a.createForm,p=r.createCardPagination,R=this.state,A=R.billno,D=R.showUploader,b=R.target,O=(R.assignShow,R.assignData,R.billId),E=R.approveshow,y=R.billtype,I=R.printOutputInfo,M=R.showNtbDetail,k=this.props.MutiInit.getIntl("36180BPA");return i.default.createElement("div",{className:"nc-bill-card"},o.connectMesg({headBtnAreaCode:"card_head",formAreaCode:c.CARD_FORM_CODE,billtype:c.BILL_TYPE,billpkname:this.primaryId}),i.default.createElement(g,null,i.default.createElement(v,{areaCode:v.config.HEADER,className:"nc-bill-header-area"},i.default.createElement("div",{className:"header-title-search-area"},n({title:k&&k.get("36180BPA-000014"),backBtnClick:function(){e.backList()}})),i.default.createElement("div",{className:"header-button-area"},this.props.button.createErrorFlag({headBtnAreaCode:"card_head"}),this.props.button.createButtonApp({area:"card_head",buttonLimit:7,onButtonClick:u.buttonClick.bind(this),popContainer:document.querySelector(".header-button-area")})),i.default.createElement("div",{className:"header-cardPagination-area",style:{float:"right"}},p({handlePageInfoChange:u.pageInfoClick.bind(this),dataSource:c.DATASOURCE})))),i.default.createElement("div",{className:"nc-bill-top-area remove-block"},i.default.createElement("div",{className:"nc-bill-form-area"},d(c.CARD_FORM_CODE,{expandArr:[c.CARD_FORM_CODE2,c.CARD_FORM_CODE3,c.CARD_FORM_CODE4,c.CARD_FORM_CODE5],onAfterEvent:u.afterEvent.bind(this)}))),D&&i.default.createElement(f,{billId:O,target:b,placement:"bottom",billNo:A,onHide:this.onHideUploader}),i.default.createElement(C,{show:E,close:this.closeApprove,billtype:y,billid:O}),this.state.compositedisplay&&i.default.createElement(m,{title:k&&k.get("36180BPA-000015"),data:this.state.compositedata,display:this.state.compositedisplay,getResult:this.getAssginUsedr,cancel:this.compositeTurnOff}),i.default.createElement(h,{ref:"printOutput",url:c.URL_LIST.PRINTOUTPUT,data:I}),M&&i.default.createElement(_,{show:this.state.showNtbDetail,sourceData:this.state.ntbdata,cancel:function(){e.setState({showNtbDetail:!1})},affirm:function(){e.setState({showNtbDetail:!1})}}),i.default.createElement(l.default,{showmodal:this.state.showOriginal,showOriginalData:this.state.showOriginalData,onSureClick:function(t){e.setState({showOriginal:!1})},onCloseClick:function(){e.setState({showOriginal:!1})}}),i.default.createElement(s.InnerAccoutDialog,{showModal:this.state.showInnerAcc,accpk:this.state.showInnerAccData,closeModal:function(){e.setState({showInnerAcc:!1})}}))}}]),t}(n.Component);function D(e,t,a){(0,o.ajax)({url:t,data:e,success:a.bind(this)})}A=(0,o.createPage)({billinfo:{billtype:"card",pagecode:c.CARD_PAGE_CODE,headcode:c.CARD_FORM_CODE},mutiLangCode:c.APP_CODE,orderOfHotKey:[c.CARD_FORM_CODE]})(A),t.default=A},717:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initTemplate=function(e,t){var a=this;e.createUIDom({pagecode:o.CARD_PAGE_CODE,appcode:this.appcode},(function(t){if(t){var r=e.getUrlParam("status");if(t.template){var i=t.template;if(i=function(e,t,a){return a[o.CARD_FORM_CODE].items.map((function(e){"pk_org"==e.attrcode&&(e.queryCondition=function(){return{funcode:t.appcode,TreeRefActionExt:"nccloud.web.tmpub.filter.FinanceOrgPermissionFilter"}}),"pk_register"==e.attrcode&&(e.queryCondition=function(){var e=t.form.getFormItemsValue(o.CARD_FORM_CODE,"pk_org"),a=t.form.getFormItemsValue(o.CARD_FORM_CODE,"pk_register"),r=t.form.getFormItemsValue(o.CARD_FORM_CODE,"initflag"),n=t.form.getFormItemsValue(o.CARD_FORM_CODE,"isagent");return{pk_register:a&&a.value,pk_org:e&&e.value,initflag:r&&r.value,isagent:n&&n.value,GridRefActionExt:"nccloud.web.fbm.fbm.accept.filter.AcceptPkRegisterFilter4NCC"}}),"holderacc"==e.attrcode&&(e.queryCondition=function(){var e=t.form.getFormItemsValue(o.CARD_FORM_CODE,"holdunit"),a=t.form.getFormItemsValue(o.CARD_FORM_CODE,"pk_register"),r=t.form.getFormItemsValue(o.CARD_FORM_CODE,"pk_holderbank"),n=t.form.getFormItemsValue(o.CARD_FORM_CODE,"holderacc"),i=t.form.getFormItemsValue(o.CARD_FORM_CODE,"pk_curr");return{pk_cust:e&&e.value,pk_register:a&&a.value,pk_holderbank:r&&r.value,holderacc:n&&n.value,pk_curr:i&&i.value,GridRefActionExt:"nccloud.web.fbm.fbm.accept.filter.AcceptHolderAccFilter4NCC,nccloud.web.fbm.fbm.accept.filter.SecurityAccFilter4NCC"}})})),a[o.CARD_FORM_CODE3].items.map((function(e){"backsecaccount"==e.attrcode&&(e.queryCondition=function(){var e=t.form.getFormItemsValue(o.CARD_FORM_CODE,"pk_curr");return{pk_curr:e&&e.value,GridRefActionExt:"nccloud.web.fbm.fbm.accept.filter.BackSecAccFilter4NCC,nccloud.web.fbm.fbm.accept.filter.SecurityAccFilter4NCC"}})})),a}(0,e,i),e.meta.setMeta(i),"browse"===r)i[o.CARD_FORM_CODE].items.forEach((function(e){return"pk_org"===e.attrcode?(e.visible=!0,void(e.disabled=!1)):"pk_org_v"===e.attrcode?(e.visible=!1,void(e.disabled=!1)):void 0}));else i[o.CARD_FORM_CODE].items.forEach((function(e){return"pk_org"===e.attrcode?(e.visible=!0,void(e.disabled=!1)):"pk_org_v"===e.attrcode?(e.visible=!1,void(e.disabled=!1)):void 0}));if("add"===r)e.initMetaByPkorg(),i[o.CARD_FORM_CODE].items.forEach((function(e){"pk_org"!==e.attrcode||(e.disabled=!1)}));else if("copy"===r){i[o.CARD_FORM_CODE].items.forEach((function(e){"pk_org"!==e.attrcode||(e.disabled=!0)}))}}if(t.button){var l=t.button;e.button.setButtons(l),n.buttonVisiable.call(a,e)}if(t.context){var s=t.context;if(a.setState({curr_pk_org:s.pk_org,curr_orgname:s.org_Name,curr_pk_org_v:s.pk_org_v,curr_orgname_v:s.org_v_Name}),"add"===r&&(a.props.form.setFormItemsValue(o.CARD_FORM_CODE,{pk_org:{value:s.pk_org,display:s.org_Name},pk_org_v:{value:a.state.curr_pk_org_v,display:a.state.curr_orgname_v}}),s.pk_org)){var c={value:s.pk_org,display:s.org_Name};n.afterEvent.call(a,a.props,o.CARD_FORM_CODE,"pk_org",c,null,null,null,null,!0)}var u=a.props.form.getFormItemsValue(o.CARD_FORM_CODE,"isagent")&&a.props.form.getFormItemsValue(o.CARD_FORM_CODE,"isagent").value;n.afterEvent.call(a,a.props,o.CARD_FORM_CODE,"isagent",u,null,null,null,null,!0)}}}))};a(10);var r=a(1),o=a(202),n=a(714);r.cardCache.setDefData},718:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buttonVisiable=function(e){var t=[];for(var a in r.CARD_BTN)t.push(r.CARD_BTN[a]);e.button.setButtonVisible(t,!1);var u=e.getUrlParam("status"),d="browse"!==u,p=e.form.getFormItemsValue(r.CARD_FORM_CODE,"vbillstatus")&&e.form.getFormItemsValue(r.CARD_FORM_CODE,"vbillstatus").value,f=e.form.getFormItemsValue(r.CARD_FORM_CODE,"voucher")&&e.form.getFormItemsValue(r.CARD_FORM_CODE,"voucher").value,C=this.state.isBlank,m=e.form.getFormItemsValue(r.CARD_FORM_CODE,"pk_inbalaacc"),h=e.form.getFormItemsValue(r.CARD_FORM_CODE,"pk_insecurityacc");e.cardPagination.setCardPaginationVisible("cardPaginationBtn",!d),"add"==u?e.button.setButtonVisible(o,!0):"browse"==u?(C?e.button.setButtonVisible(n,!0):"-1"==p?e.button.setButtonVisible(i,!0):"2"==p||"3"==p?e.button.setButtonVisible(l,!0):"1"==p?f?e.button.setButtonVisible(c,!0):e.button.setButtonVisible(s,!0):f&&e.button.setButtonVisible(c,!0),m&&m.value&&e.button.setButtonVisible(r.CARD_BTN.LQUERYINBALAACC,!0),h&&h.value&&e.button.setButtonVisible(r.CARD_BTN.LQUERYINSECURITYACC,!0)):("edit"==u||"copy"==u)&&e.button.setButtonVisible(o,!0)};var r=a(202);var o=[r.CARD_BTN.SAVE,r.CARD_BTN.SAVEADD,r.CARD_BTN.SAVECOMMIT,r.CARD_BTN.CANCEL],n=[r.CARD_BTN.ADD],i=[r.CARD_BTN.ADD,r.CARD_BTN.EDIT,r.CARD_BTN.DELETE,r.CARD_BTN.COPY,r.CARD_BTN.COMMIT,r.CARD_BTN.LQUERYPJBOOK,r.CARD_BTN.LQUERYPLAN,r.CARD_BTN.LQUERYPAYACC,r.CARD_BTN.LQUERYSIGN,r.CARD_BTN.FILEDOCUMENT,r.CARD_BTN.PRINT,r.CARD_BTN.OUTPUT,r.CARD_BTN.REFRESH],l=[r.CARD_BTN.ADD,r.CARD_BTN.COPY,r.CARD_BTN.UNCOMMIT,r.CARD_BTN.LQUERYPJBOOK,r.CARD_BTN.LQUERYPLAN,r.CARD_BTN.LQUERYPAYACC,r.CARD_BTN.LQUERYSIGN,r.CARD_BTN.LQUERYAPPROVEINFO,r.CARD_BTN.FILEDOCUMENT,r.CARD_BTN.PRINT,r.CARD_BTN.OUTPUT,r.CARD_BTN.REFRESH],s=[r.CARD_BTN.ADD,r.CARD_BTN.COPY,r.CARD_BTN.UNCOMMIT,r.CARD_BTN.VOUCHER,r.CARD_BTN.LQUERYPJBOOK,r.CARD_BTN.LQUERYPLAN,r.CARD_BTN.LQUERYPAYACC,r.CARD_BTN.LQUERYSIGN,r.CARD_BTN.LQUERYAPPROVEINFO,r.CARD_BTN.FILEDOCUMENT,r.CARD_BTN.PRINT,r.CARD_BTN.OUTPUT,r.CARD_BTN.REFRESH],c=[r.CARD_BTN.ADD,r.CARD_BTN.COPY,r.CARD_BTN.CANCELVOUCHER,r.CARD_BTN.LQUERYPJBOOK,r.CARD_BTN.LQUERYVOUCHER,r.CARD_BTN.LQUERYPLAN,r.CARD_BTN.LQUERYPAYACC,r.CARD_BTN.LQUERYSIGN,r.CARD_BTN.FILEDOCUMENT,r.CARD_BTN.PRINT,r.CARD_BTN.OUTPUT,r.CARD_BTN.REFRESH]},719:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,n=(r=regeneratorRuntime.mark((function e(t,a,r,o){var n,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:D.call(this,t)&&(n=(0,l.createSimpleBillData)(t,u.CARD_PAGE_CODE,u.CARD_FORM_CODE,[],!1),s=this.props.form.getFormItemsValue(u.CARD_FORM_CODE,"pk_accept"),c=function(e){if(e.data.card.head){this.props.form.setAllFormValue(d({},u.CARD_FORM_CODE,e.data.card.head[u.CARD_FORM_CODE]));var n=e.data.card.head[u.CARD_FORM_CODE].rows[0].values.pk_accept,l=e.data.card.head[u.CARD_FORM_CODE].rows[0].values.vbillno;if(this.setState({billno:l&&l.value,isBlank:!1}),this.props.setUrlParam({status:"browse",id:n&&n.value}),s&&s.value?C("pk_accept",e.data.card.head[u.CARD_FORM_CODE].rows[0].values.pk_accept.value,e.data.card,u.CARD_FORM_CODE,u.DATASOURCE,e.data.card.head[u.CARD_FORM_CODE].rows[0].values):m(e.data.card.head[u.CARD_FORM_CODE].rows[0].values.pk_accept.value,e.data.card,u.CARD_FORM_CODE,u.DATASOURCE,e.data.card.head[u.CARD_FORM_CODE].rows[0].values),r)return void h.call(this,t);if(o)return void b.call(this,t);this.toggleShow(),a&&(0,i.toast)({color:"success",content:this.props.MutiInit.getIntl("36180BPA")&&this.props.MutiInit.getIntl("36180BPA").get("36180BPA-000006")})}},V.call(this,n,u.URL_LIST.SAVE,c));case 2:case"end":return e.stop()}}),e,this)})),o=function(){var e=r.apply(this,arguments);return new Promise((function(t,a){return function r(o,n){try{var i=e[o](n),l=i.value}catch(e){return void a(e)}if(!i.done)return Promise.resolve(l).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(l)}("next")}))},function(e,t,a,r){return o.apply(this,arguments)});t.buttonClick=function(e,t){var a=this.props.MutiInit.getIntl("36180BPA");switch(t){case u.CARD_BTN.ADD:h.call(this,e);break;case u.CARD_BTN.CANCEL:(0,i.promptBox)({title:a&&a.get("36180BPA-000002"),color:"warning",content:a&&a.get("36180BPA-000003"),beSureBtnClick:_.bind(this,e)});break;case u.CARD_BTN.SAVE:if(e.form.isCheckNow([u.CARD_FORM_CODE,u.CARD_FORM_CODE2,u.CARD_FORM_CODE3,u.CARD_FORM_CODE4,u.CARD_FORM_CODE5,s.CARD_FORM_CODE6],"warning")){var r=e.form.getAllFormValue(u.CARD_FORM_CODE),o={pageid:u.CARD_PAGE_CODE,model:{areacode:u.CARD_FORM_CODE,rows:r.rows,areaType:"form"}};e.validateToSave(o,n.bind(this,e,!0,null,null),"","")}break;case u.CARD_BTN.SAVEADD:R.call(this,e);break;case u.CARD_BTN.EDIT:g.call(this,e);break;case u.CARD_BTN.DELETE:(0,i.promptBox)({title:a&&a.get("36180BPA-000004"),color:"warning",content:a&&a.get("36180BPA-000005"),beSureBtnClick:v.bind(this,e)});break;case u.CARD_BTN.COPY:A.call(this,e);break;case u.CARD_BTN.REFRESH:O.call(this,e,!0);break;case u.CARD_BTN.COMMIT:b.call(this,e);break;case u.CARD_BTN.UNCOMMIT:E.call(this,e);break;case u.CARD_BTN.VOUCHER:y.call(this,e);break;case u.CARD_BTN.CANCELVOUCHER:I.call(this,e);break;case u.CARD_BTN.FILEDOCUMENT:M.call(this,e);break;case u.CARD_BTN.LQUERYVOUCHER:F.call(this,e);break;case u.CARD_BTN.LQUERYAPPROVEINFO:k.call(this,e);break;case u.CARD_BTN.LQUERYPJBOOK:N.call(this,e);break;case u.CARD_BTN.LQUERYPLAN:L.call(this,e);break;case u.CARD_BTN.LQUERYPAYACC:T.call(this,e);break;case u.CARD_BTN.LQUERYSIGN:B.call(this,e);break;case u.CARD_BTN.LQUERYINBALAACC:P.call(this,e);break;case u.CARD_BTN.LQUERYINSECURITYACC:w.call(this,e);break;case u.CARD_BTN.PRINT:U.call(this,e);break;case u.CARD_BTN.OUTPUT:S.call(this,e)}};var i=a(1),l=a(10),s=a(202),c=a(210),u=a(202);function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var p=i.cardCache.getNextId,f=(i.cardCache.getCurrentLastId,i.cardCache.deleteCacheById),C=(i.cardCache.getCacheById,i.cardCache.updateCache),m=i.cardCache.addCache;function h(e){var t=e.form.getFormItemsValue(u.CARD_FORM_CODE,"pk_accept")&&e.form.getFormItemsValue(u.CARD_FORM_CODE,"pk_accept").value;t||(t=""),e.pushTo("/card",{status:"add",id:t,pagecode:u.CARD_PAGE_CODE}),this.componentDidMount(),this.props.initMetaByPkorg(),this.props.form.setFormItemsDisabled(u.CARD_FORM_CODE,{pk_org:!1})}function _(e){var t=e.getUrlParam("status"),a=e.getUrlParam("id");"edit"===t?(this.props.pushTo("/card",{status:"browse",id:a,pagecode:u.CARD_PAGE_CODE}),this.componentDidMount()):"add"===t?(e.pushTo("/card",{id:a,status:"browse",pagecode:u.CARD_PAGE_CODE}),this.componentDidMount()):"copy"===t?(this.props.pushTo("/card",{id:a,status:"browse",pagecode:u.CARD_PAGE_CODE}),this.componentDidMount()):"browse"===t&&(this.props.pushTo("/card",{status:"browse",id:a,pagecode:u.CARD_PAGE_CODE}),this.componentDidMount())}function R(e){n.call(this,e,!1,!0,!1)}function g(e){e.pushTo("/card",{status:"edit",id:e.getUrlParam("id"),pagecode:u.CARD_PAGE_CODE}),this.componentDidMount()}function v(e){var t={pks:[e.getUrlParam("id")]};V.call(this,t,u.URL_LIST.DELETE,(function(e){(0,i.toast)({color:"success",content:this.props.MutiInit.getIntl("36180BPA")&&this.props.MutiInit.getIntl("36180BPA").get("36180BPA-000007")});var t=this.props.getUrlParam("id"),a=p(t,u.DATASOURCE);f("pk_accept",t,u.DATASOURCE),this.props.setUrlParam({status:"browse",id:a||""}),this.componentDidMount()}))}function A(e){var t=e.getUrlParam("id");if(t){var a={pk:t};V.call(this,a,u.URL_LIST.COPY,(function(e){e.data&&(this.props.form.setAllFormValue(d({},u.CARD_FORM_CODE,e.data.card.head[u.CARD_FORM_CODE])),this.titleno=e.data.card.head[u.CARD_FORM_CODE].rows[0].values.vbillno.value,this.props.form.setFormItemsDisabled(u.CARD_FORM_CODE,{pk_org:!0}),this.props.form.setFormItemsDisabled(u.CARD_FORM_CODE,{vbillno:!0}),this.props.setUrlParam({status:"copy"}),this.toggleShow())}))}else(0,i.toast)({color:"error",content:this.props.MutiInit.getIntl("36180BPA")&&this.props.MutiInit.getIntl("36180BPA").get("36180BPA-000008")})}function D(e){return e.form.isCheckNow([u.CARD_FORM_CODE,u.CARD_FORM_CODE,u.CARD_FORM_CODE2,u.CARD_FORM_CODE3,u.CARD_FORM_CODE4],"warning")}function b(e){var t=e.form.getFormItemsValue(u.CARD_FORM_CODE,"pk_accept"),a=e.form.getFormItemsValue(u.CARD_FORM_CODE,"ts"),r={pageid:u.CARD_PAGE_CODE,pks:[t&&t.value],tss:[a&&a.value],isCardOpt:!0};V.call(this,r,u.URL_LIST.COMMIT,(function(e){e.data&&e.data.errMsg?(0,i.toast)({color:"error",content:e.data.errMsg}):!e.data.workflow||"approveflow"!=e.data.workflow&&"workflow"!=e.data.workflow?(this.setState({compositedata:e.data,compositedisplay:!1}),e.data.card.head&&(this.props.form.setAllFormValue(d({},u.CARD_FORM_CODE,e.data.card.head[u.CARD_FORM_CODE])),C("pk_accept",t&&t.value,e.data.card,u.CARD_FORM_CODE,u.DATASOURCE),(0,i.toast)({color:"success",content:this.props.MutiInit.getIntl("36180BPA")&&this.props.MutiInit.getIntl("36180BPA").get("36180BPA-000009")}))):this.setState({compositedata:e.data,compositedisplay:!0}),O.call(this,this.props,!1)}))}function O(e,t){var a=e.getUrlParam("id");if(!a)return this.props.form.EmptyAllFormValue(u.CARD_FORM_CODE),this.setState({isBlank:!0}),void this.toggleShow();var r={pk:a};V.call(this,r,u.URL_LIST.CARD_QUERY,(function(e){e.data&&(this.props.form.setAllFormValue(d({},u.CARD_FORM_CODE,e.data.card.head[u.CARD_FORM_CODE])),this.titleno=e.data.card.head[u.CARD_FORM_CODE].rows[0].values.vbillno.value,this.toggleShow(),t&&(0,i.toast)({color:"success",content:this.props.MutiInit.getIntl("36180BPA")&&this.props.MutiInit.getIntl("36180BPA").get("36180BPA-000010")}))}))}function E(e){var t=e.form.getFormItemsValue(u.CARD_FORM_CODE,"pk_accept"),a=e.form.getFormItemsValue(u.CARD_FORM_CODE,"ts"),r={pageid:u.CARD_PAGE_CODE,pks:[t&&t.value],tss:[a&&a.value],isCardOpt:!0};V.call(this,r,u.URL_LIST.UNCOMMIT,(function(e){e.data&&e.data.errMsg?(0,i.toast)({color:"error",content:e.data.errMsg}):e.data.card.head&&(this.props.form.setAllFormValue(d({},u.CARD_FORM_CODE,e.data.card.head[u.CARD_FORM_CODE])),C("pk_accept",t&&t.value,e.data.card,u.CARD_FORM_CODE,u.DATASOURCE),(0,i.toast)({color:"success",content:this.props.MutiInit.getIntl("36180BPA")&&this.props.MutiInit.getIntl("36180BPA").get("36180BPA-000011")})),O.call(this,this.props,!1)}))}function y(e){var t=this,a=e.form.getFormItemsValue(u.CARD_FORM_CODE,"pk_accept"),r={pk:a&&a.value,pageid:u.CARD_PAGE_CODE,isCardOpt:!0};V.call(this,r,u.URL_LIST.VOUCHER,(function(e){e.data&&(e.data.errMsg?(0,i.toast)({color:"error",content:e.data.errMsg}):e.data.card.head&&(t.props.form.setAllFormValue(d({},u.CARD_FORM_CODE,e.data.card.head[u.CARD_FORM_CODE])),C("pk_accept",a&&a.value,e.data.card,u.CARD_FORM_CODE,u.DATASOURCE),(0,i.toast)({color:"success",content:this.props.MutiInit.getIntl("36180BPA")&&this.props.MutiInit.getIntl("36180BPA").get("36180BPA-000012")}))),O.call(this,this.props,!1)}))}function I(e){var t=this,a=e.form.getFormItemsValue(u.CARD_FORM_CODE,"pk_accept"),r={pk:a&&a.value,pageid:u.CARD_PAGE_CODE,isCardOpt:!0};V.call(this,r,u.URL_LIST.CANCELVOUCHER,(function(e){e.data&&(e.data.errMsg?(0,i.toast)({color:"error",content:e.data.errMsg}):e.data.card.head&&(t.props.form.setAllFormValue(d({},u.CARD_FORM_CODE,e.data.card.head[u.CARD_FORM_CODE])),C("pk_accept",a&&a.value,e.data.card,u.CARD_FORM_CODE,u.DATASOURCE),(0,i.toast)({color:"success",content:this.props.MutiInit.getIntl("36180BPA")&&this.props.MutiInit.getIntl("36180BPA").get("36180BPA-000013")}))),O.call(this,this.props,!1)}))}function M(e){var t=e.form.getFormItemsValue(u.CARD_FORM_CODE,"vbillno").value,a=e.form.getFormItemsValue(u.CARD_FORM_CODE,"pk_accept").value;this.setState({showUploader:!this.state.showUploader,target:null,billId:a,billno:t})}function k(e){var t=e.form.getFormItemsValue(u.CARD_FORM_CODE,"pk_accept"),a=e.form.getFormItemsValue(u.CARD_FORM_CODE,"pk_billtypecode");this.setState({approveshow:!0,billId:t&&t.value,billtype:a&&a.value})}function F(e){var t=e.form.getFormItemsValue(u.CARD_FORM_CODE,"pk_accept"),a=e.form.getFormItemsValue(u.CARD_FORM_CODE,"pk_group"),r=e.form.getFormItemsValue(u.CARD_FORM_CODE,"pk_org"),o=e.form.getFormItemsValue(u.CARD_FORM_CODE,"pk_billtypecode");t=t&&t.value;var n=[{pk_group:a=a&&a.value,pk_org:r=r&&r.value,relationID:t,pk_billtype:o=o&&o.value}];V.call(this,n,u.URL_LIST.LinkVoucher,(function(t){if(t.success){var a=t.data.src;if("_LinkVouchar2019"!=a)return void(0,i.toast)({color:"warning",content:this.props.MutiInit.getIntl("36180BPA")&&this.props.MutiInit.getIntl("36180BPA").get("36180BPA-000032")});if(t.data.des&&t.data.pklist){if(1==t.data.pklist.length)return void this.props.openTo(t.data.url,{status:"browse",appcode:t.data.appcode,pagecode:t.data.pagecode,id:t.data.pklist[0],n:this.props.MutiInit.getIntl("36180BPA")&&this.props.MutiInit.getIntl("36180BPA").get("36180BPA-000031"),backflag:"noback"});cacheTools.set(t.data.cachekey,t.data.pklist);var r=this.props.getSearchParam("c")||e.getUrlParam("c");return void this.props.openTo(t.data.url,{status:"browse",appcode:t.data.appcode,pagecode:t.data.pagecode,n:this.props.MutiInit.getIntl("36180BPA")&&this.props.MutiInit.getIntl("36180BPA").get("36180BPA-000031"),scene:r+a})}}}))}function T(e){var t=[],a=e.form.getFormItemsValue(u.CARD_FORM_CODE,"pk_org"),r=e.form.getFormItemsValue(u.CARD_FORM_CODE,"pk_register"),o={pk_register:r&&r.value};V.call(this,o,u.URL_LIST.LQPAYACC,(function(e){var r=e.data.pk_payacc;if(r){var o={pk_org:a&&a.value,pk_account:r};t.push(o),this.setState({showOriginalData:t,showOriginal:!0})}}))}function P(e){var t=e.form.getFormItemsValue(u.CARD_FORM_CODE,"pk_inbalaacc");t&&t.value&&this.setState({showInnerAccData:t&&t.value,showInnerAcc:!0})}function w(){var e=props.form.getFormItemsValue(u.CARD_FORM_CODE,"pk_insecurityacc");e&&e.value&&this.setState({showInnerAccData:e&&e.value,showInnerAcc:!0})}function B(e){var t=e.form.getFormItemsValue(u.CARD_FORM_CODE,"pk_register"),a={status:"browse",id:t&&t.value};(0,c.linkApp)(e,"36H2",a)}function N(e){var t=e.form.getFormItemsValue(u.CARD_FORM_CODE,"pk_register").value;this.props.openTo("/fbm/fbm/counterbook/main/index.html#/card",{appcode:"36181BL",pagecode:"36181BL_C01",status:"browse",scene:"linksce",id:t})}function L(e){var t={pk:e.form.getFormItemsValue(u.CARD_FORM_CODE,"pk_accept").value,className:u.FULL_AGGCLASSNAME,modulecode:"3618"};V.call(this,t,u.URL_LIST.LINKNTB,(function(e){var t=e.data;t.hint?(0,i.toast)({color:"warning",content:e.data.hint}):this.setState({showNtbDetail:!0,ntbdata:t})}))}function U(e){var t=[e.getUrlParam("id")],a=e.getSearchParam("c")||e.getUrlParam("c");(0,i.print)("pdf",u.URL_LIST.PRINTOUTPUT,{appcode:a,nodekey:"36180BPNCC",oids:t})}function S(e){var t=this,a=[e.getUrlParam("id")],r=e.getSearchParam("c")||e.getUrlParam("c");this.setState({printOutputInfo:{funcode:r,nodekey:"36180BPNCC",oids:a,outputType:"output"}},(function(){t.refs.printOutput.open()}))}function V(e,t,a){(0,i.ajax)({url:t,data:e,success:a.bind(this)})}},720:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pageInfoClick=function(e,t){if(!t)return;var a=o.cardCache.getCacheById(t,r.DATASOURCE);if(e.setUrlParam({status:"browse",id:t}),a){e.form.setAllFormValue(n({},r.CARD_FORM_CODE,a.head[r.CARD_FORM_CODE]));var l=a.head[r.CARD_FORM_CODE].rows[0].values.vbillno.value;this.titleno=l,this.toggleShow()}else{var s={pk:t};i.call(this,s,r.URL_LIST.CARD_QUERY,(function(e){e.data.card?(this.props.form.setAllFormValue(n({},r.CARD_FORM_CODE,e.data.card.head[r.CARD_FORM_CODE])),o.cardCache.updateCache("pk_accept",t,e.data.card,r.CARD_FORM_CODE,r.DATASOURCE),this.titleno=e.data.card.head[r.CARD_FORM_CODE].rows[0].values.vbillno.value,this.props.setUrlParam({id:t}),this.toggleShow()):this.props.form.setAllFormValue(n({},r.CARD_FORM_CODE,{rows:[]}))}))}};var r=a(202),o=a(1);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t,a){(0,o.ajax)({url:t,data:e,success:a.bind(this)})}},721:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.afterEvent=i;var r=a(1),o=a(202);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t,a,r,n,i,s,d,p){console.log(a);var f=e.createHeadAfterEventData(o.CARD_PAGE_CODE,t,[],t,a,r);switch(a){case"pk_org":l.call(this,e,f,p);break;case"pk_register":case"holdunit":case"holderacc":case"pk_holderbank":case"backsecmoney":case"secaccpayamount":case"money":u.call(this,f);break;case"isagent":c.call(this,p)}}function l(e,t,a){var o=t.newvalue.value,n=t.oldvalue.value;a?s.call(this,t):o!=n&&o!=n&&(n?(0,r.promptBox)({color:"warning",title:this.props.MutiInit.getIntl("36180BPA")&&this.props.MutiInit.getIntl("36180BPA").get("36180BPA-000000"),content:this.props.MutiInit.getIntl("36180BPA")&&this.props.MutiInit.getIntl("36180BPA").get("36180BPA-000001"),beSureBtnClick:s.bind(this,t)}):s.call(this,t))}function s(e){var t=e.newvalue.value;if(null==t||"undefined"==t)return this.props.form.EmptyAllFormValue(o.CARD_FORM_CODE),void this.props.initMetaByPkorg();d.call(this,e,o.URL_LIST.AFTEREVENT,(function(e){this.props.resMetaAfterPkorgEdit(),this.props.form.setFormItemsDisabled(o.CARD_FORM_CODE,{pk_org:!1}),e.data.card.head&&this.props.form.setAllFormValue(n({},o.CARD_FORM_CODE,e.data.card.head[o.CARD_FORM_CODE]))}))}function c(e){var t=this.props.form,a=this.props.getUrlParam("status"),r="add"===a||"edit"===a||"copy"===a,n=t.getFormItemsValue(o.CARD_FORM_CODE,"isagent");n&&n.value?(t.openArea(o.CARD_FORM_CODE8),r&&(t.setFormItemsRequired(o.CARD_FORM_CODE,{inneractualpmtmnt:!0}),t.setFormItemsDisabled(o.CARD_FORM_CODE,{pk_inbalaacc:!1,inneractualpmtmnt:!1,pk_outreckonacc:!1,pk_outfundorg:!1}))):(t.closeArea(o.CARD_FORM_CODE8),r&&(t.setFormItemsRequired(o.CARD_FORM_CODE,{inneractualpmtmnt:!1}),t.setFormItemsDisabled(o.CARD_FORM_CODE,{pk_inbalaacc:!0,inneractualpmtmnt:!0,pk_outreckonacc:!0,pk_outfundorg:!0}))),e||(t.setFormItemsValue(o.CARD_FORM_CODE,{pk_register:null}),t.getFormItemsValue,i.call(this,this.props,o.CARD_FORM_CODE,"pk_register",t.getFormItemsValue(o.CARD_FORM_CODE,"pk_register"),null,null,null,null,!1))}function u(e){d.call(this,e,o.URL_LIST.AFTEREVENT,(function(e){p.call(this,this,e.data.editableMap),e.data.card.head&&this.props.form.setAllFormValue(n({},o.CARD_FORM_CODE,e.data.card.head[o.CARD_FORM_CODE]))}))}function d(e,t,a){(0,r.ajax)({url:t,data:e,success:a.bind(this)})}function p(e,t){if(t){var a={};for(var r in t)a[r]=t[r];e.props.form.setFormItemsDisabled(o.CARD_FORM_CODE,a)}}},722:function(e,t,a){var r=a(723);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};a(8)(r,o);r.locals&&(e.exports=r.locals)},723:function(e,t,a){(e.exports=a(7)(!1)).push([e.i,".nc-bill-card .remove-block::after {\n  display: none;\n}\n",""])},8:function(e,t,a){var r,o,n={},i=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=r.apply(this,arguments)),o}),l=function(e){var t={};return function(a){return void 0===t[a]&&(t[a]=e.call(this,a)),t[a]}}((function(e){return document.querySelector(e)})),s=null,c=0,u=[],d=a(143);function p(e,t){for(var a=0;a<e.length;a++){var r=e[a],o=n[r.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](r.parts[i]);for(;i<r.parts.length;i++)o.parts.push(R(r.parts[i],t))}else{var l=[];for(i=0;i<r.parts.length;i++)l.push(R(r.parts[i],t));n[r.id]={id:r.id,refs:1,parts:l}}}}function f(e,t){for(var a=[],r={},o=0;o<e.length;o++){var n=e[o],i=t.base?n[0]+t.base:n[0],l={css:n[1],media:n[2],sourceMap:n[3]};r[i]?r[i].parts.push(l):a.push(r[i]={id:i,parts:[l]})}return a}function C(e,t){var a=l(e.insertInto);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=u[u.length-1];if("top"===e.insertAt)r?r.nextSibling?a.insertBefore(t,r.nextSibling):a.appendChild(t):a.insertBefore(t,a.firstChild),u.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");a.appendChild(t)}}function m(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=u.indexOf(e);t>=0&&u.splice(t,1)}function h(e){var t=document.createElement("style");return e.attrs.type="text/css",_(t,e.attrs),C(e,t),t}function _(e,t){Object.keys(t).forEach((function(a){e.setAttribute(a,t[a])}))}function R(e,t){var a,r,o,n;if(t.transform&&e.css){if(!(n=t.transform(e.css)))return function(){};e.css=n}if(t.singleton){var i=c++;a=s||(s=h(t)),r=A.bind(null,a,i,!1),o=A.bind(null,a,i,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(a=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",_(t,e.attrs),C(e,t),t}(t),r=b.bind(null,a,t),o=function(){m(a),a.href&&URL.revokeObjectURL(a.href)}):(a=h(t),r=D.bind(null,a),o=function(){m(a)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=i()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var a=f(e,t);return p(a,t),function(e){for(var r=[],o=0;o<a.length;o++){var i=a[o];(l=n[i.id]).refs--,r.push(l)}e&&p(f(e,t),t);for(o=0;o<r.length;o++){var l;if(0===(l=r[o]).refs){for(var s=0;s<l.parts.length;s++)l.parts[s]();delete n[l.id]}}}};var g,v=(g=[],function(e,t){return g[e]=t,g.filter(Boolean).join("\n")});function A(e,t,a,r){var o=a?"":r.css;if(e.styleSheet)e.styleSheet.cssText=v(t,o);else{var n=document.createTextNode(o),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(n,i[t]):e.appendChild(n)}}function D(e,t){var a=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}function b(e,t,a){var r=a.css,o=a.sourceMap,n=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||n)&&(r=d(r)),o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var i=new Blob([r],{type:"text/css"}),l=e.href;e.href=URL.createObjectURL(i),l&&URL.revokeObjectURL(l)}},9:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.URL_PARAM={ID:"id",STATE:"status",SCENE:"scene",TBB_LINK:"pk_ntbparadimvo",LINK_ID:"linkId",PK_SRC:"pk_src"},t.sagaField={frozen:"saga_frozen",gtxid:"saga_gtxid",btxid:"saga_btxid",status:"saga_status"},t.sagaFrozenEnum={frozen:1,unfrozen:0},t.sagaStateEnum={success:0,fail:1},t.SCENE={DEFAULT:"defaultsce",APPROVE:"approvesce",LINK:"linksce",FIP:"fip",OTHER:"othersce"},t.LINKTYPE={NORMAL:"NORMAL",BILL_REVIEW:"BILL_REVIEW"},t.LINK_PARAM={ARAP:{FLAG:"flag",FLAG_VALUE:"ftsLinkArap"}},t.MODULE_INFO={TMPUB:"tmpub",TMPUB_NUM:"3601"},t.COMMON_URL={ELECSIGNPRINTCHECK:"/nccloud/tmpub/pub/elecsignprintcheck.do"},t.cache={rateinfo:"rateinfo",iserrtoast:"iserrtoast"},t.SPLIT_TBBCTRLTYPE="_ctrltype_",t.tbbwarntype={flexibility:"0",inflexibility:"1",warning:"2"}}})}));
//# sourceMappingURL=index.5666e5c5.js.map
/*qez+91vLaUxbYd0O4ym9GtyKacIIH0CrRMVEVf6ugGwChhFXe3Czas3bBmBoGYGp*/