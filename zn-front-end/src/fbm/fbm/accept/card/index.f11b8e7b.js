/*nLUs9w1bSgs4PRDgiPcM4N6jIcV2wybUTGQej3OKi2U3RGS2fPH/6CRxPJY+N3fN*/
/*! @ncctag {"date":"2020-4-17 12:37:53"} */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nc-lightapp-front"),require("react"),require("react-dom"),require("axios")):"function"==typeof define&&define.amd?define(["nc-lightapp-front","react","react-dom","axios"],t):"object"==typeof exports?exports["fbm/fbm/accept/card/index"]=t(require("nc-lightapp-front"),require("react"),require("react-dom"),require("axios")):e["fbm/fbm/accept/card/index"]=t(e["nc-lightapp-front"],e.React,e.ReactDOM,e.axios)}(window,(function(e,t,a,r){return function(e){var t={};function a(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(r,o,function(t){return e[t]}.bind(null,o));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="../../../../",a(a.s=358)}({1:function(t,a){t.exports=e},10:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.go2CardCheck=t.tbbWarnDialog=t.showTBBMsg=t.getTBBMsg=t.saveCommit=t.frozenBtnCtrl=t.showErrBtn=t.createCardWebSocket=t.createListWebSocket=t.setRate2NewRow=t.getCacheRateValue=t.bodyRateEditOnAfterEdit=t.addDefReferFilter=t.elecSignCardPrint=t.elecSignListPrint=t.createSimpleBillData=t.buildLightBodyAfterEditData=t.loadMultiLang=t.getMultiLangRes=t.appendMultiLangRes=t.saveMultiLangRes=t.getPropCache=t.setPropCache=t.showPagination=t.setDefOrg2AdvanceSrchArea=t.setDefOrg2ListSrchArea=t.setDefOrg2Form=t.hasDefaultOrg=t.isLinkScene=void 0;var r=a(1),o=a(9);function n(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,a){return function r(o,n){try{var i=t[o](n),s=i.value}catch(e){return void a(e)}if(!i.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(s)}("next")}))}}var i,s,l=t.isLinkScene=function(e){var t=e.getUrlParam(o.URL_PARAM.SCENE);return!(!!!e.getUrlParam(o.URL_PARAM.TBB_LINK)&&t!=o.SCENE.LINK&&t!=o.SCENE.FIP)},c=t.hasDefaultOrg=function(e){return e&&e.context&&e.context&&e.context.pk_org},u=function(e,t,a){if(!(e&&e.search&&t&&a))return!1;try{var r=e.search.getSearchValByField(t,a);return!(!r||!r.value||!r.value.firstvalue&&!r.value.secondvalue)}catch(e){return!0}},p=(t.setDefOrg2Form=function(e,t,a){if(e&&t&&c(a)){var r=a.context,o=r.pk_org,n=r.org_Name,i=r.pk_org_v,s=r.org_v_Name;e.form.setFormItemsValue(t,{pk_org:{value:o,display:n},pk_org_v:{value:i,display:s}})}},t.setDefOrg2ListSrchArea=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pk_org";if(e&&e.search&&t&&c(a)&&!l(e)&&!u(e,t,r)){var o=a.context,n=o.pk_org,i=o.org_Name,s={display:i,value:n};e.search.setSearchValByField(t,r,s)}},t.setDefOrg2AdvanceSrchArea=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pk_org";if(e&&e.search&&t&&c(a)&&a.template&&!l(e)){var o=a.template,n=a.context,i=n.pk_org,s=n.org_Name;o[t].items.map((function(e){e.attrcode==r&&(e.initialvalue={display:s,value:i})}))}},t.showPagination=function(e,t,a){e&&t&&a&&!a.template&&(a.template[t].pagination=!l(e))},function(e){return e+"_extObj"}),d=(t.setPropCache=function(e,t,a,r){if(e&&t&&a){var o=p(t),n=e.ViewModel.getData(o);n||(n={}),n[a]=r,e.ViewModel.setData(o,n)}},t.getPropCache=function(e,t,a){if(!e||!t||!a)return null;var r=p(t),o=e.ViewModel.getData(r);return o&&o.hasOwnProperty(a)?o[a]:null},t.saveMultiLangRes=function(e,t){if(e&&t){e.ViewModel.setData("multiLang",t)}}),f=(t.appendMultiLangRes=function(e,t){if(e&&t){var a=f(e);a?Object.assign(a,t):d(e,t)}},t.getMultiLangRes=function(e){if(e){return e.ViewModel.getData("multiLang")}}),m=t.loadMultiLang=function(e,t){var a=f(e);return a&&a[t]||""},C=function(e,t){var a={},r=e.form.getAllFormValue(t);return r.areacode=t,a[t]=r,a},_=function(e,t){var a={rows:e.cardTable.getChangedRows(t),areaType:"table",areacode:t},r={};return r[t]=a,r},h=function(e,t,a,r,o,n,i,s){var l={head:C(e,a),pageid:t};return s?l.body=_(e,r):l.bodys=_(e,r),{areacode:r,attrcode:o,card:l,changedrows:n,index:i}},g=(t.buildLightBodyAfterEditData=function(e,t,a,r,o,n,i){var s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];try{if(!(e&&t&&a&&r&&o&&n))throw new Error("参数缺失！");var l=h(e,t,a,r,o,n,i,s),c=l.card,u=c.body,p=c.bodys;if(s&&1==u[r].rows.length||!s&&1==p[r].rows.length)return l;var d=[],f=n[0].rowid;if(!(u=s?u[r]:p[r]))throw new Error("未获取到指定的表体["+r+"]!");var m=u,C=m.rows,_=!0,g=!1,b=void 0;try{for(var R,v=C[Symbol.iterator]();!(_=(R=v.next()).done);_=!0){var A=R.value,D=A.rowid;if(D&&D==f){d.push(A);break}}}catch(e){g=!0,b=e}finally{try{!_&&v.return&&v.return()}finally{if(g)throw b}}if(0==d.length)throw new Error("未找到修改的行!");return u.rows=d,l}catch(e){throw e}},function(e){if(!e||0==e.length)return null;var t=!0,a=!1,r=void 0;try{for(var o,n=e[Symbol.iterator]();!(t=(o=n.next()).done);t=!0){var i=o.value;if(i&&i.values&&0!=Object.keys(i.values).length){var s=i.values,l=Object.keys(s),c=!0,u=!1,p=void 0;try{for(var d,f=l[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var m=d.value,C=s[m];C&&0!=Object.keys(C).length&&C.value||delete s[m]}}catch(e){u=!0,p=e}finally{try{!c&&f.return&&f.return()}finally{if(u)throw p}}}}}catch(e){a=!0,r=e}finally{try{!t&&n.return&&n.return()}finally{if(a)throw r}}}),b=function(e,t,a,r,o){var n=e.createMasterChildDataSimple(t,a,r),i=n.head,s=n.body;return o&&(g(i[a].rows),g(s[r].rows)),n},R=function(e,t,a,r,o){var n=e.createExtCardDataSimple(t,a,r),i=n.head,s=n.bodys;if(o){g(i[a].rows);var l=!0,c=!1,u=void 0;try{for(var p,d=r[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var f=p.value;g(s[f].rows)}}catch(e){c=!0,u=e}finally{try{!l&&d.return&&d.return()}finally{if(c)throw u}}}return n},v=t.createSimpleBillData=function(e,t,a,r){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!(e&&t&&a&&r))return null;var n=!!Array.isArray(r)&&r.length>1,i=Array.isArray(r)?r:[r];return n?R(e,t,a,i,o):b(e,t,a,i[0],o)},A=(t.elecSignListPrint=function(e,t){var a=t.url,o=t.offical,n=void 0!==o&&o,i=t.appCode,s=t.nodeKey,l=t.tableCode,c=t.field_id,u=t.field_billno,p=void 0===u?"vbillno":u,d=t.getOrgFunc,f=t.validateFunc;if(!(a&&i&&l&&c&&p))throw new Error("参数缺失！");var C=e.table.getCheckedRows(l);if(null!=C&&0!=C.length){var _=[],h=[],g=!0,b=!1,R=void 0;try{for(var v,A=C[Symbol.iterator]();!(g=(v=A.next()).done);g=!0){var E=v.value,I=E&&E.data&&E.data.values&&E.data.values[c]&&E.data.values[c].value;if(I){var y=E&&E.data&&E.data.values&&E.data.values[p]&&E.data.values[p].value,k=E&&E.data&&E.data.values&&E.data.values.pk_org&&E.data.values.pk_org.value,M=E.index;d&&"function"==typeof d&&(k=d(E));var T=!0;if(f&&"function"==typeof f){var P=f(E);P&&(h.push(O(e,P,y,M)),T=!1)}T&&_.push({id:I,vbillno:y,pk_org:k,index:M})}}}catch(e){b=!0,R=e}finally{try{!g&&A.return&&A.return()}finally{if(b)throw R}}D(e,{url:a,offical:n,appCode:i,nodeKey:s,detail:_,errMessArr:h})}else(0,r.toast)({color:"warning",content:m(e,"3601-000010")})},t.elecSignCardPrint=function(e,t){var a=t.url,r=t.offical,o=void 0!==r&&r,n=t.appCode,i=t.nodeKey,s=t.headCode,l=t.field_id,c=t.field_billno,u=void 0===c?"vbillno":c,p=t.getOrgFunc,d=t.validateFunc;if(!(a&&n&&s&&l&&u))throw new Error("参数缺失！");var f=e.form.getFormItemsValue(s,l).value,m=e.form.getFormItemsValue(s,u).value,C=e.form.getFormItemsValue(s,"pk_org").value;p&&"function"==typeof p&&(C=p());var _=[],h=!0;if(d&&"function"==typeof d){var g=d();g&&(_.push(O(e,g,m,0)),h=!1)}D(e,{url:a,offical:o,appCode:n,nodeKey:i,detail:h?[{id:f,vbillno:m,pk_org:C}]:null,errMessArr:_})},function(e,t){t&&0!=t.length&&(1==t.length?(0,r.toast)({duration:"infinity",color:"danger",content:t[0],hasCloseBtn:!0}):(0,r.toast)({duration:"infinity",color:"danger",TextArr:[m(e,"3601-000000"),m(e,"3601-000001"),m(e,"3601-000021")],groupOperation:!0,groupOperationMsg:t}))}),D=function(e,t){var a=t.url,n=t.offical,i=t.appCode,s=t.nodeKey,l=t.detail,c=t.errMessArr,u=void 0===c?[]:c;if(!(u&&u.length>0)||l&&0!=l.length){var p={offical:n,detail:l};(0,r.ajax)({url:o.COMMON_URL.ELECSIGNPRINTCHECK,data:p,success:function(t){var o=t.data,l=o.passPKs,c=o.passInfos,p=o.unPassInfos;if(u.length>0||p&&p.length>0){var d=!0,f=!1,m=void 0;try{for(var C,_=p[Symbol.iterator]();!(d=(C=_.next()).done);d=!0){var h=C.value,g=h.vbillno,b=h.mess,R=h.index,v=O(e,b,g,R);u.push(v)}}catch(e){f=!0,m=e}finally{try{!d&&_.return&&_.return()}finally{if(f)throw m}}A(e,u)}if(l&&l.length>0&&c&&c.length>0){var D={offical:n,detail:c};(0,r.print)("pdf",a,{nodekey:s,appcode:i,oids:l,userjson:JSON.stringify(D)})}}})}else A(e,u)},O=function(e,t,a,r){return m(e,"3601-000008")+a+m(e,"3601-000009")+t||""},E=(t.addDefReferFilter=function(e,t){var a=t.headCode,r=t.areaCode,o=t.meta,n=t.orgField,i=t.getOrgFunc;if(r&&o&&(a||n||i)){var s=Array.isArray(r)?r:[r],l=!0,c=!1,u=void 0;try{for(var p,d=s[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){o[p.value].items.map((function(t){(t.attrcode.startsWith("vdef")||t.attrcode.startsWith("vuserdef"))&&(t.queryCondition=function(){return{pk_org:i&&"function"==typeof i?i():(e.form.getFormItemsValue(a,n)||{}).value}})}))}}catch(e){c=!0,u=e}finally{try{!l&&d.return&&d.return()}finally{if(c)throw u}}}},t.bodyRateEditOnAfterEdit=function(e){var t=e.props,a=e.bodyCodes,n=e.rateInfo,i=e.datasource,s=e.olcRates,l=e.glcRates,c=e.gllcRates;if(t&&n&&i&&a){!function(e){var t=e.rateInfo,a=e.datasource;if(t&&a){r.cardCache.setDefData(o.cache.rateinfo,a,t);r.cardCache.getDefData(o.cache.rateinfo,a)}}({rateInfo:n,datasource:i}),Array.isArray(a)||(a=[a]);var u=n.olcRateEditable,p=n.glcRateEditable,d=n.gllcRateEditable,f=!0,m=!1,C=void 0;try{for(var _,h=a[Symbol.iterator]();!(f=(_=h.next()).done);f=!0){var g=_.value;s&&(Array.isArray(s)||(s=[s]),t.cardTable.setColEditableByKey(g,s,!u)),l&&(Array.isArray(l)||(l=[l]),t.cardTable.setColEditableByKey(g,l,!p)),c&&(Array.isArray(c)||(c=[c]),t.cardTable.setColEditableByKey(g,c,!d))}}catch(e){m=!0,C=e}finally{try{!f&&h.return&&h.return()}finally{if(m)throw C}}}},t.getCacheRateValue=function(e){var t=e.datasource;if(t){var a=r.cardCache.getDefData(o.cache.rateinfo,t);return a?{olcRate:a.olcRate,glcRate:a.glcRate,gllcRate:a.gllcRate}:null}}),I=(t.setRate2NewRow=function(e){var t=e.olcRates,a=e.glcRates,r=e.gllcRates,o=e.datasource,n=e.row;if(o){var i=E({datasource:o});if(i){var s=i.olcRate,l=i.glcRate,c=i.gllcRate;if(t){Array.isArray(t)||(t=[t]);var u=!0,p=!1,d=void 0;try{for(var f,m=t[Symbol.iterator]();!(u=(f=m.next()).done);u=!0){n[f.value]={value:s}}}catch(e){p=!0,d=e}finally{try{!u&&m.return&&m.return()}finally{if(p)throw d}}}if(a){Array.isArray(a)||(a=[a]);var C=!0,_=!1,h=void 0;try{for(var g,b=a[Symbol.iterator]();!(C=(g=b.next()).done);C=!0){n[g.value]={value:l}}}catch(e){_=!0,h=e}finally{try{!C&&b.return&&b.return()}finally{if(_)throw h}}}if(r){Array.isArray(r)||(r=[r]);var R=!0,v=!1,A=void 0;try{for(var D,O=r[Symbol.iterator]();!(R=(D=O.next()).done);R=!0){n[D.value]={value:c}}}catch(e){v=!0,A=e}finally{try{!R&&O.return&&O.return()}finally{if(v)throw A}}}}}},t.createListWebSocket=function(e,t){var a=t.tableAreaCode,r=t.tablePkName,o=t.billtype,n=t.dataSource,i=t.serverLocation;if(e&&a&&r&&o){var s=e.socket,l={tableAreaCode:a,billpkname:r,billtype:o,dataSource:n};return i&&(l.serverLocation=i),React.createElement("div",null,s.connectMesg(l))}},t.createCardWebSocket=function(e,t){var a=t.headBtnAreaCode,r=t.formAreaCode,o=t.billpkname,n=t.billtype,i=t.dataSource,s=t.serverLocation;if(e&&a&&r&&o&&n){var l=e.socket,c={headBtnAreaCode:a,formAreaCode:r,billtype:n,billpkname:o,dataSource:i};return s&&(c.serverLocation=s),React.createElement("div",null,l.connectMesg(c))}},t.showErrBtn=function(e,t){var a=t.headBtnCode,r=t.headAreaCode,n=t.fieldPK;t.datasource;if(e&&a&&r){var i=e.getUrlParam(o.URL_PARAM.STATE),s="0";try{s=e.form.getFormItemsValue(r,o.sagaField.status).value}catch(e){s="0"}var l="1"===s&&"browse"==i;e.button.toggleErrorStatus(a,{isError:l}),l&&I(e,{headAreaCode:r,fieldPK:n})}},function(e,t){var a=t.headAreaCode,r=t.fieldPK;if(a&&r){var n=e.getUrlParam("status"),i=e.form.getFormItemsValue(a,o.sagaField.gtxid),s=e.form.getFormItemsValue(a,r);"browse"==n&&i&&i.value&&s&&s.value&&e.socket.showToast({gtxid:i.value,billpk:s.value})}}),y=(t.frozenBtnCtrl=function(e,t){var a=t.btnCodes;if(e&&a){var r=Array.isArray(a)?a:[a];if("browse"==e.getUrlParam(o.URL_PARAM.STATE)){var n="1";try{n=e.form.getFormItemsValue(headAreaCode,o.sagaField.frozen).value}catch(e){n="1"}e.button.setButtonDisabled(r,"1"==n)}}},function(e,t){var a=t.pageCode,r=t.headCode,o=t.bodyCodeArr,n=t.saveFunc,i={},s={};if(0==o.length)i={pageid:a,model:{areacode:r,rows:e.form.getAllFormValue(r).rows,areaType:"form"}},s[r]="form";else{i=o.length>1?e.createExtCardData(a,r,o):e.createMasterChildData(a,r,o[0]);var l=!0,c=!1,u=void 0;try{for(var p,d=o[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){s[p.value]="cardTable"}}catch(e){c=!0,u=e}finally{try{!l&&d.return&&d.return()}finally{if(c)throw u}}}e.validateToSave(i,n,s,"")}),k=(i=n(regeneratorRuntime.mark((function e(t,a){var r,o=a.pageCode,n=a.headCode,i=a.bodyCodeArr,s=a.saveValidate,l=a.processSaveData;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.form.isCheckNow(n)){e.next=2;break}return e.abrupt("return",null);case 2:if(!(i&&i.length>0)||t.cardTable.checkTableRequired()){e.next=4;break}return e.abrupt("return",null);case 4:if(!s||"function"!=typeof s){e.next=7;break}if(s()){e.next=7;break}return e.abrupt("return",null);case 7:if(r=v(t,o,n,i),!l||"function"!=typeof l){e.next=12;break}return e.next=11,l(r);case 11:r=e.sent;case 12:return e.abrupt("return",{data:JSON.stringify(r),pageCode:o});case 13:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)}),M=(t.saveCommit=(s=n(regeneratorRuntime.mark((function e(t,a){var o,n,i=a.pageCode,s=a.headCode,l=a.bodyCode,c=a.url,u=a.assign,p=a.showAssignFunc,d=a.updateViewFunc,f=a.saveValidate,m=a.processSaveData,C=a.extParam;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i&&s&&c&&p&&d){e.next=2;break}return e.abrupt("return");case 2:return C||(C={}),o=(a=l)?Array.isArray(a)?a:[a]:[],e.next=6,k(t,{pageCode:i,headCode:s,bodyCodeArr:o,saveValidate:f,processSaveData:m});case 6:if(n=e.sent){e.next=9;break}return e.abrupt("return");case 9:u&&(C.content=JSON.stringify(u)),n.extParam=C,y(t,{pageCode:i,headCode:s,bodyCodeArr:o,saveFunc:function(){(0,r.ajax)({url:c,data:n,success:function(e){var t=e.data.workflow;t&&"approveflow"==t||"workflow"==t?p(e):d(e)}})}});case 12:case"end":return e.stop()}var a}),e,this)}))),function(e,t){return s.apply(this,arguments)}),t.getTBBMsg=function(e){var t=e.row,a=e.msgfield;a||(a="ntbinfo");var r=(t&&t.values&&t.values[a]||{}).value;return r&&(t.values[a]={value:null,display:null}),r});t.showTBBMsg=function(e){var t=e.head,a=e.headCode,o=e.msgfield;if(!(t&&a&&t[a]&&t[a].rows&&0!=t[a].rows.length))return!1;var n=!1,i=t[a].rows[0],s=M({row:i,msgfield:o});return s&&((0,r.toast)({color:"warning",content:s}),n=!0),n},t.tbbWarnDialog=function(e,t){var a=t.ntbinfos,o=t.onConfirm;if(a&&0!=a.length){var n=[],i=a.length>1,s=1,l=i?[m(e,"3601-000019")+"["+a.length+"]"+m(e,"3601-000020")]:[],c=!0,u=!1,p=void 0;try{for(var d,f=a[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var C=d.value;if(null!=C){var _=C.pk,h=C.msg,g=C.vbillno;if(_&&g){n.push(_);var b="";i&&(b=s+". "+m(e,"3601-000018")+"["+g+"] "),l.push(React.createElement("li",null,b+h)),s++}}}}catch(e){u=!0,p=e}finally{try{!c&&f.return&&f.return()}finally{if(u)throw p}}0!=l.length&&(0,r.promptBox)({color:"warning",title:m(e,"3601-000017"),content:React.createElement("ul",null,l),beSureBtnClick:function(){o(n)}})}},t.go2CardCheck=function(e){var t=e.props,a=e.url,o=e.pk,n=e.ts,i=e.fieldPK,s=e.actionCode,l=e.permissionCode,c=e.checkSaga,u=void 0===c||c,p=e.checkTS,d=void 0===p||p,f=e.go2CardFunc;f&&"function"==typeof f&&(t&&a&&o&&n&&i||f(),(0,r.ajax)({url:a,data:{pk:o,ts:n,actionCode:s,permissionCode:l,fieldPK:i,checkSaga:u,checkTS:d},success:function(e){f()}}))}},139:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{template:{gridrelation:{restmoney:{destBrowseAreaCode:null,destEditAreaCode:null,srcAreaCode:"restmoney",tabRelation:["restmoney"]}},restmoney:{clazz:"nc.vo.cmp.settlement.LinkAccountBalanceVO",code:"restmoney",items:[{itemtype:"input",visible:!0,label:this.state.json["360701OB-000041"],attrcode:"accountcode",maxlength:"20",metapath:"accountcode"},{itemtype:"input",visible:!0,label:this.state.json["360701OB-000042"],attrcode:"accountname",maxlength:"20",metapath:"accountname"},{itemtype:"input",visible:!0,label:this.state.json["360701OB-000058"],attrcode:"currencyname",maxlength:"20",metapath:"currencyname"},{itemtype:"input",visible:!0,label:this.state.json["360701OB-000043"],attrcode:"accounttype",disabled:!0,metapath:"accounttype"},{itemtype:"input",visible:!1,label:this.state.json["360701OB-000057"],code:"capitaltype",attrcode:"capitaltype",disabled:!0,metapath:"capitaltype"},{itemtype:"number",scale:"8",visible:!0,label:this.state.json["360701OB-000044"],attrcode:"currentbalance",maxlength:"28",metapath:"currentbalance"},{itemtype:"number",scale:"8",visible:!0,label:this.state.json["360701OB-000045"],attrcode:"surplusbalance",maxlength:"28",metapath:"surplusbalance"}],moduletype:"table",name:this.state.json["360701OB-000046"],pagination:!1,vometa:""},code:"restmoney",moduletype:"table",name:this.state.json["360701OB-000046"]},code:"360701OB_P01",formrelation:null,name:this.state.json["360701OB-000046"],metapath:"cmp_initdate",clazz:"nc.vo.cmp.settlement.LinkAccountBalanceVO",pagetype:"Nochild"}}},140:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.orgVersionView=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"pk_org",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pk_org_v";if(e&&t){var o=e.getUrlParam("status"),n="browse"==o,i={};i[a]=!n,i[r]=n,e.form.setFormItemsVisible(t,i)}},t.orgVersionViewNew=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"pk_org",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pk_org_v";if(e&&t){var o=e.getUrlParam("status"),n="browse"==o,i={};i[a]=!n,i[r]=n,e.form.setItemsVisible(t,i)}}},142:function(e,t){e.exports=r},143:function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var a=t.protocol+"//"+t.host,r=a+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var o,n=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(n)?e:(o=0===n.indexOf("//")?n:0===n.indexOf("/")?a+n:r+n.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")}))}},145:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.VoucherDataConst={pagecode:"10170410_1017041001",appcode:"10170410"},t.bondApplyConst={url:"/bond/bond/apply/main/index.html#/card",appcode:"36650BA",pagecodeList:"36650BA_LIST",pagecodeCard:"36650BAL_CARD"},t.bondContractConst={url:"/bond/bond/contract/main/index.html#/card",appcode:"36650BC",pagecodeList:"36650BC_LIST",pagecodeCard:"36650BC_CARD"},t.bondRegisterConst={url:"/bond/bond/register/main/index.html#/card",appcode:"36650BIS",pagecodeList:"36650BIS_LIST",pagecodeCard:"36650BIS_CARD"},t.settledateConst={url:"/tmpub/pub/settledate/main/index.html#/card",appcode:"36010ISDC",pagecodeList:"36010ISDC_LIST_01",pagecodeCard:"36010ISDC_CARD_01"},t.linkInterestConst={0:{url:"/tmpub/pub/interestrate_org/main/index.html#/card",appcode:"36010IRCO",pagecode:"36010IRCO_card"},1:{url:"/tmpub/pub/interestrate_group/main/index.html#/card",appcode:"36010IRCG",pagecode:"36010IRCG_card"},2:{url:"/tmpub/pub/interestrate_global/main/index.html#/card",appcode:"36010IRC",pagecode:"36010IRC_card"}},t.interestListConst={urlList:"/bond/bond/interestlist/main/index.html#/list",urlCard:"/bond/bond/interestlist/main/index.html#/card",appcode:"36650BCIB",pagecodeList:"36650BCIB_LIST",pagecodeCard:"36650BCIB_CARD"},t.upquotaConst={urlList:"/fbm/pfbm/upquota/main/index.html#/list",urlCard:"/fbm/pfbm/upquota/main/index.html#/card",appcode:"36185530",pagecodeList:"36185530_LIST",pagecodeCard:"36185530_CARD"},t.unitquotaConst={urlList:"/fbm/pfbm/quotasummary/main/index.html#/list",appcode:"36185540",pagecodeList:"36185540_LIST"},t.quotaapplyConst={urlCard:"/fbm/pfbm/quotaapply/main/index.html#/list",appcode:"36180QA",pagecodeCard:"36180QAL_List"},t.buyerdiscount={urlList:"/fbm/fbm/buyerdiscount/main/index.html#/list",urlCard:"/fbm/fbm/buyerdiscount/main/index.html#/card",appcode:"36180PDT",pagecodeList:"36180PDT_LIST",pagecodeCard:"36180PDT_CARD"}},153:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=a(2),n=l(o),i=(l(a(6)),a(1)),s=(l(a(142)),a(155));function l(e){return e&&e.__esModule?e:{default:e}}var c=i.base.NCModal,u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.getLangCode=function(e){var t=a.props.MutiInit.getIntl(a.moduleId);return t&&t.get(a.moduleId+"-"+e)},a.initMultiLang=function(){var e=a.moduleId;(0,i.getMultiLang)({moduleId:e,currentLocale:a.state.currentLocale,domainName:"cmp",callback:a.setMultiLang})},a.setMultiLang=function(e){a.setState({json:e},(function(){s.initTemplate.call(a,a.props)}))},a.getData=function(e){var t={pubsearch:e,pagecode:"360701OB_P01",queryAreaCode:"",oid:"",queryType:"simple"};(0,i.ajax)({url:"/nccloud/cmp/bankaccountbook/initrestmoneypub.do",data:t,success:function(e){var t=e.success,r=e.data;if(t&&null!=r&&r){var o={},n=[];if(r.message)return(0,i.toast)({color:"warning",content:r.message}),void a.props.table.setAllTableData(a.tableId,{rows:[]});var s=r.scale;s||(s="3");var l=r.vos,c={},u={},p=l.accountCode,d=l.accountName,f=l.accountType,m=l.capitalType,C=l.currencyName,_=l.currentBalance,h=l.surplusBalance;u.accountcode={value:p,display:p},u.accountname={value:d,display:d},u.accounttype={value:f,display:f},u.capitaltype={value:m,display:m},u.currencyname={value:C,display:C},u.currentbalance={value:_,display:_,scale:s},u.surplusbalance={value:h,display:h,scale:s},c.values=u,c.status="0",c.rowid=null,n.push(c),o.rows=n,o.areacode=a.tableId,a.props.table.setAllTableData(a.tableId,o)}else a.props.table.setAllTableData(a.tableId,{rows:[]})}})},a.close=function(){a.setState({showOriginalData:[]},(function(){a.props.onCloseClick()}))},a.moduleId="360701OB",a.tableId="restmoney",a.state={currentLocale:"zh-CN",showOriginalData:[],json:{}},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentWillMount",value:function(){this.initMultiLang()}},{key:"componentDidMount",value:function(){var e=this;this.props.table.setAllTableData(this.tableId,{rows:[]}),this.setState({showOriginalData:this.props.showOriginalData},(function(){e.initData()}))}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(e.showmodal&&e.showmodal!==this.props.showmodal){this.props.table.setAllTableData(this.tableId,{rows:[]}),this.setState({showOriginalData:e.showOriginalData},(function(){t.initData()}))}}},{key:"initData",value:function(){var e=this.state.showOriginalData;if(Array.isArray(e)){if(!e||0==e.length)return;for(var t=0;t<e.length;t++){var a=e[t];a.pk_account||a.pk_cashaccount||e.splice(t,1)}if(0==e.length)return;this.getData(e)}else{var r=[];if(!e.pk_account&&!e.pk_cashaccount)return;r.push(e),this.getData(r)}}},{key:"render",value:function(){var e=this.props,t=e.table,a=e.button,r=(e.search,e.modal,t.createSimpleTable);a.createButton;return n.default.createElement("div",null,n.default.createElement(c,{fieldid:"accbalance",show:this.props.showmodal,style:{width:"1100px"},size:"lg",onHide:this.close},n.default.createElement(c.Header,{closeButton:"true"},n.default.createElement(c.Title,null,this.state.json["360701OB-000056"])),n.default.createElement(c.Body,{size:"sm",className:"body-resize-icon"},n.default.createElement("div",null,r(this.tableId,{height:"158px",showIndex:!0,cancelCustomRightMenu:!0})))))}}]),t}(o.Component);t.default=(0,i.createPage)({})(u)},154:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InnerAccoutDialog=void 0;var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=a(2),n=l(o),i=(l(a(6)),a(1));a(158);var s=l(a(160));function l(e){return e&&e.__esModule?e:{default:e}}var c=i.base.NCModal,u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.tableCode="inneraccbalance",a.init(e),a.state={json:{}},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentWillReceiveProps",value:function(e){this.init(e),this.queryAccBalance(this.props.accpk)}},{key:"componentWillMount",value:function(){var e=this;(0,i.getMultiLang)({moduleId:"3601Inner",domainName:"tmpub",callback:function(t,a,r){a&&e.setState({json:t},(function(){e.initTemplate()}))}})}},{key:"render",value:function(){var e=this.props.table.createSimpleTable;return n.default.createElement(c,{fieldid:"inneraccbalance",className:"InnerAccoutModal_class",show:this.show,onHide:this.close,style:{width:"700px"}},n.default.createElement(c.Header,{closeButton:!0},n.default.createElement(c.Title,null,this.state.json["3601Inner-000005"])),n.default.createElement(c.Body,{className:"body-resize-icon"},e&&n.default.createElement("div",null,e(this.tableCode,{height:"158px",showIndex:!0,cancelCustomRightMenu:!0}))))}},{key:"componentDidMount",value:function(){this.queryAccBalance()}},{key:"init",value:function(e){this.pk_accid=e.accpk,this.show=e.showModal,this.close=e.closeModal}},{key:"queryAccBalance",value:function(){var e=this;(0,i.ajax)({url:"/nccloud/tmpub/pub/inneraccbalance.do",async:!0,data:{accid:this.pk_accid},success:function(t){var a=t.data,r={areacode:e.tableCode,rows:[{status:0,rowid:null,values:{name:{display:a.accName,value:a.accName,scale:-1},bookbalance:{display:null,value:a.bookBalance,scale:3},realbalance:{display:null,value:a.realBalance,scale:3},realbalancewithoutover:{display:null,value:a.realBalanceNoOverFraft,scale:3}}}]};e.props.table.setAllTableData(e.tableCode,r)},error:function(t){e.props.table.setAllTableData(e.tableCode,{rows:[]})}})}},{key:"initTemplate",value:function(){var e=s.default.call(this);if(e.template){var t=e.template;t=this.modifierMeta.call(this,t),this.props.meta.setMeta(t)}}},{key:"modifierMeta",value:function(e){return e}}]),t}(o.Component);t.InnerAccoutDialog=(0,i.createPage)({})(u)},155:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.restmoney=t.initTemplate=void 0;var r=n(a(156)),o=n(a(139));function n(e){return e&&e.__esModule?e:{default:e}}t.initTemplate=r.default,t.restmoney=o.default},156:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=n.default.call(this);if(t.template){var a=t.template;a=function(e,t){return t.restmoney.items=t.restmoney.items.map((function(e,t){return e.width=150,e})),t.restmoney.showcheck=!0,t.restmoney.pagination=!1,t}(0,a),e.meta.setMeta(a)}};a(1);var r,o=a(139),n=(r=o)&&r.__esModule?r:{default:r}},158:function(e,t,a){var r=a(159);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};a(8)(r,o);r.locals&&(e.exports=r.locals)},159:function(e,t,a){(e.exports=a(7)(!1)).push([e.i,".InnerAccoutModal_class .u-modal-content {\n  max-height: 300px !important;\n}\n",""])},160:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{template:{gridrelation:{inneraccbalance:{destBrowseAreaCode:null,destEditAreaCode:null,srcAreaCode:"inneraccbalance",tabRelation:["inneraccbalance"]}},inneraccbalance:{clazz:null,code:"inneraccbalance",items:[{itemtype:"input",visible:!0,label:this.state.json["3601Inner-000000"],attrcode:"name",maxlength:"20",metapath:null},{itemtype:"input",visible:!0,label:this.state.json["3601Inner-000001"],attrcode:"bookbalance",maxlength:"20",metapath:null},{itemtype:"input",visible:!0,label:this.state.json["3601Inner-000002"],attrcode:"realbalance",maxlength:"20",metapath:null},{itemtype:"input",visible:!0,label:this.state.json["3601Inner-000003"],attrcode:"realbalancewithoutover",maxlength:"20",metapath:null}],moduletype:"table",name:this.state.json["3601Inner-000005"],pagination:!1,vometa:""},code:"inneraccbalancedialog",moduletype:"table",name:this.state.json["3601Inner-000005"]},code:"inneraccbalancedialog",formrelation:null,name:this.state.json["3601Inner-000005"],metapath:null,clazz:null,pagetype:"Nochild"}}},182:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.MODULE_NAME="fbm",t.MODULE_CODE="3618",t.APP_CODE="36180BP",t.BILL_TYPE="36HD";var r=t.BASE_URL="/nccloud/fbm/accept/";t.DATASOURCE="fbm.fbm.accept.dataSource",t.FULL_AGGCLASSNAME="nc.vo.fbm.accept.AggAcceptVO",t.URL_LIST={SAVE:r+"acceptSave.do",DELETE:r+"acceptDelete.do",QUERY:r+"acceptQuery.do",COPY:r+"acceptCopy.do",AFTEREVENT:r+"acceptAfterEvent.do",CARD_QUERY:r+"acceptCardQuery.do",COMMIT:r+"acceptCommit.do",UNCOMMIT:r+"acceptUnCommit.do",VOUCHER:r+"acceptVoucher.do",VOUCHERLINK:r+"voucherLinkAccept.do",CANCELVOUCHER:r+"acceptCancelVoucher.do",PAGE_QUERY:r+"acceptPageQuery.do",PRINTOUTPUT:r+"printOutPut.do",LINKNTB:"/nccloud/fbm/pub/fbmntblinkplan.do",NTBLINKBILL:r+"ntblinkaccept.do",LQPAYACC:r+"LQPayAcc.do",LinkVoucher:r+"linkVoucher.do"},t.LIST_PAGE_CODE="36180BP_L01",t.LIST_TABLE_CODE="36180BP_L01_table",t.LIST_SEARCH_CODE="36180BP_L01_search",t.CARD_PAGE_CODE="36180BP_C01",t.CARD_FORM_CODE="36180BP_C01_form",t.CARD_FORM_CODE2="36180BP_C01_form2",t.CARD_FORM_CODE3="36180BP_C01_form3",t.CARD_FORM_CODE4="36180BP_C01_form4",t.CARD_FORM_CODE5="36180BP_C01_form5",t.CARD_FORM_CODE6="36180BP_C01_form6",t.CARD_FORM_CODE8="36180BP_C01_form8",t.CARD_LINK_PAGE="36180BP_C02",t.LIST_LINK_PAGE="36180BP_L02",t.LIST_AREA="list_head",t.LIST_BTN={ADD:"Add",COPY:"Copy",DELETE:"Delete",COMMIT:"Commit",UNCOMMIT:"UnCommit",IMPORT:"Import",EXPORT:"ExportExcelTemplate",LQUERYPJBOOK:"LQueryPJBook",LQUERYVOUCHER:"LQueryVoucher",LQUERYPLAN:"LQueryPlan",LQUERYPAYACC:"LQueryPayAcc",LQUERYSIGN:"LQuerySign",LQUERYAPPROVEINFO:"LQueryApproveInfo",LQUERYINBALAACC:"LQueryInBalaAcc",LQUERYINSECURITYACC:"LQueryInSecurityAcc",VOUCHER:"Voucher",CANCELVOUCHER:"CancelVoucher",PRINT:"Print",OUTPUT:"OutPut",FILEDOCUMENT:"FileDocument",REFRESH:"Refresh"},t.LIST_INNERAREA="list_inner",t.LIST_INNERBTN={INNEREDIT:"InnerEdit",INNERCOMMIT:"InnerCommit",INNERUNCOMMIT:"InnerUnCommit",INNERDELETE:"InnerDelete",INNERVOUCHER:"InnerVoucher",INNERCANCELVOUCHER:"InnerCancelVoucher"},t.CARD_AREA="card_head",t.CARD_BTN={SAVE:"Save",SAVEADD:"SaveAdd",SAVECOMMIT:"SaveCommit",CANCEL:"Cancel",ADD:"Add",EDIT:"Edit",DELETE:"Delete",COPY:"Copy",COMMIT:"Commit",UNCOMMIT:"UnCommit",VOUCHER:"Voucher",CANCELVOUCHER:"CancelVoucher",PRINT:"Print",OUTPUT:"OutPut",LQUERYPJBOOK:"LQueryPJBook",LQUERYVOUCHER:"LQueryVoucher",LQUERYPLAN:"LQueryPlan",LQUERYPAYACC:"LQueryPayAcc",LQUERYSIGN:"LQuerySign",LQUERYAPPROVEINFO:"LQueryApproveInfo",LQUERYINBALAACC:"LQueryInBalaAcc",LQUERYINSECURITYACC:"LQueryInSecurityAcc",FILEDOCUMENT:"FileDocument",REFRESH:"Refresh"}},2:function(e,a){e.exports=t},202:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.MODULE_NAME="fbm",t.MODULE_CODE="3618",t.APP_CODE="36180BPA",t.BILL_TYPE="36HD";var r=t.BASE_URL="/nccloud/fbm/accept/";t.DATASOURCE="fbm.fbm.accept.dataSource",t.FULL_AGGCLASSNAME="nc.vo.fbm.accept.AggAcceptVO",t.URL_LIST={SAVE:r+"acceptSave.do",DELETE:r+"acceptDelete.do",QUERY:r+"acceptQuery.do",COPY:r+"acceptCopy.do",AFTEREVENT:r+"acceptAfterEvent.do",CARD_QUERY:r+"acceptCardQuery.do",COMMIT:r+"acceptCommit.do",UNCOMMIT:r+"acceptUnCommit.do",VOUCHER:r+"acceptVoucher.do",CANCELVOUCHER:r+"acceptCancelVoucher.do",PAGE_QUERY:r+"acceptPageQuery.do",PRINTOUTPUT:r+"printOutPut.do",LINKNTB:"/nccloud/fbm/pub/fbmntblinkplan.do",LQPAYACC:r+"LQPayAcc.do",LinkVoucher:r+"linkVoucher.do"},t.LIST_PAGE_CODE="36180BPA_L01",t.LIST_TABLE_CODE="36180BPA_L01_table",t.LIST_SEARCH_CODE="36180BPA_L01_search",t.CARD_PAGE_CODE="36180BPA_C01",t.CARD_FORM_CODE="36180BPA_C01_form",t.CARD_FORM_CODE2="36180BPA_C01_form2",t.CARD_FORM_CODE3="36180BPA_C01_form3",t.CARD_FORM_CODE4="36180BPA_C01_form4",t.CARD_FORM_CODE5="36180BPA_C01_form5",t.CARD_FORM_CODE6="36180BPA_C01_form6",t.CARD_FORM_CODE8="36180BPA_C01_form8",t.LIST_AREA="list_head",t.LIST_BTN={ADD:"Add",COPY:"Copy",DELETE:"Delete",COMMIT:"Commit",UNCOMMIT:"UnCommit",IMPORT:"Import",EXPORT:"ExportExcelTemplate",LQUERYPJBOOK:"LQueryPJBook",LQUERYVOUCHER:"LQueryVoucher",LQUERYPLAN:"LQueryPlan",LQUERYPAYACC:"LQueryPayAcc",LQUERYSIGN:"LQuerySign",LQUERYAPPROVEINFO:"LQueryApproveInfo",LQUERYINBALAACC:"LQueryInBalaAcc",LQUERYINSECURITYACC:"LQueryInSecurityAcc",VOUCHER:"Voucher",CANCELVOUCHER:"CancelVoucher",PRINT:"Print",OUTPUT:"OutPut",FILEDOCUMENT:"FileDocument",REFRESH:"Refresh"},t.LIST_INNERAREA="list_inner",t.LIST_INNERBTN={INNEREDIT:"InnerEdit",INNERCOMMIT:"InnerCommit",INNERUNCOMMIT:"InnerUnCommit",INNERDELETE:"InnerDelete",INNERVOUCHER:"InnerVoucher",INNERCANCELVOUCHER:"InnerCancelVoucher"},t.CARD_AREA="card_head",t.CARD_BTN={SAVE:"Save",SAVEADD:"SaveAdd",SAVECOMMIT:"SaveCommit",CANCEL:"Cancel",ADD:"Add",EDIT:"Edit",DELETE:"Delete",COPY:"Copy",COMMIT:"Commit",UNCOMMIT:"UnCommit",VOUCHER:"Voucher",CANCELVOUCHER:"CancelVoucher",PRINT:"Print",OUTPUT:"OutPut",LQUERYPJBOOK:"LQueryPJBook",LQUERYVOUCHER:"LQueryVoucher",LQUERYPLAN:"LQueryPlan",LQUERYPAYACC:"LQueryPayAcc",LQUERYSIGN:"LQuerySign",LQUERYAPPROVEINFO:"LQueryApproveInfo",LQUERYINBALAACC:"LQueryInBalaAcc",LQUERYINSECURITYACC:"LQueryInSecurityAcc",FILEDOCUMENT:"FileDocument",REFRESH:"Refresh"}},210:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.linkVoucherApp=t.linkApp=void 0;var r=a(1),o=(a(215),a(9)),n=a(10),i=(t.linkApp=function(e,t,a){(0,r.ajax)({url:"/nccloud/tmpub/pub/qrylinkinfo.do",data:{billTypeOrTransType:t},success:function(t){var r=t.data;if(r){r.url;var n=r.appCode,i=r.linkPageCode;a&&0!=Object.keys(a).length||(a={}),a.scene||(a.scene=o.SCENE.LINK),a.status||(a.status="browse"),a.appcode=n,a.pagecode=i,e.openTo(null,a)}}})},"_LinkVouchar2019");t.linkVoucherApp=function(e,t,a,o,s,l,c){var u={pk_group:a,pk_org:o,relationID:t,pk_billtype:s};c&&c.freedef4&&(u={pk_group:a,pk_org:o,relationID:t,pk_billtype:s,freedef4:c.freedef4}),(0,r.ajax)({url:"/nccloud/tmpub/pub/qrylinkvoucherinfo.do",data:u,success:function(t){var a=t.success,o=t.data;if(a&&o&&o.src&&i==o.src&&o.pklist&&0!=o.pklist.length){var s=o.src,c=o.url,u=o.pklist,p=o.appcode,d=o.pagecode,f=o.srcAppCode,m=o.cachekey;o.des?1==u.length?e.openTo(c,{status:"browse",appcode:p,pagecode:d,id:u[0],n:(0,n.loadMultiLang)(e,"3601-000004"),pagekey:"link",backflag:"noback"}):(r.cacheTools.set(m,u),e.openTo(t.data.url,{status:"browse",appcode:p,pagecode:d,n:(0,n.loadMultiLang)(e,"3601-000004"),scene:p+s})):(r.cacheTools.set(f+s,u),e.openTo(t.data.url,{status:"browse",appcode:p,pagecode:d,scene:f+s}))}else(0,r.toast)({color:"warning",content:(0,n.loadMultiLang)(e,"3601-000002")+l+(0,n.loadMultiLang)(e,"3601-000003")})}})}},215:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.MODULE_H_FTS="FTS",t.MODULE_L_FTS="fts",t.VoucherDataConst={pagecode:"10170410_1017041001",appcode:"10170410",linkIdentification:"36300TP_LinkVouchar"}},266:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.afterEvent=t.pageInfoClick=t.buttonClick=t.buttonVisiable=t.initTemplate=void 0;var r=a(359),o=a(360),n=a(361),i=a(362),s=a(363);t.initTemplate=r.initTemplate,t.buttonVisiable=o.buttonVisiable,t.buttonClick=n.buttonClick,t.pageInfoClick=i.pageInfoClick,t.afterEvent=s.afterEvent},358:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=a(1),n=a(2),i=d(n),s=d(a(153)),l=a(154),c=a(140),u=a(182),p=a(266);function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a(364);o.high.ExcelImport;var m=o.high.NCUploader,C=o.high.ApproveDetail,_=o.high.ApprovalTrans,h=o.high.PrintOutput,g=o.high.Inspection,b=o.cardCache.updateCache,R=(o.base.NCScrollElement,o.base.NCAffix),v=o.base.NCDiv,A=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.backList=function(){"linksce"==a.props.getUrlParam("scene")||"fip"==a.props.getUrlParam("scene")?a.props.pushTo("/list",{pagecode:"",scene:"linksce"}):a.props.pushTo("/list",{pagecode:""})},a.toggleShow=function(){var e=a.props.getUrlParam("status"),t=a.props.form,r=a.props.form.getFormItemsValue(a.formId,"saga_status")&&a.props.form.getFormItemsValue(a.formId,"saga_status").value;"browse"===a.props.getUrlParam("status")&&"1"===r?a.props.button.toggleErrorStatus(u.CARD_AREA,{isError:!0}):a.props.button.toggleErrorStatus(u.CARD_AREA,{isError:!1});var o=a.props.form.getFormItemsValue(a.formId,"saga_gtxid")&&a.props.form.getFormItemsValue(a.formId,"saga_gtxid").value;if(o&&r&&a.props.socket.showToast({gtxid:o,billpk:a.props.form.getFormItemsValue(a.formId,a.primaryId)&&a.props.form.getFormItemsValue(a.formId,a.primaryId).value}),"browse"===e?(t.setItemsVisible(u.CARD_FORM_CODE,{pk_org:!1}),t.setItemsVisible(u.CARD_FORM_CODE,{pk_org_v:!0}),t.setFormStatus(u.CARD_FORM_CODE,e),a.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!0,showBillCode:!0,billCode:a.titleno})):"edit"===e?(t.setFormStatus(u.CARD_FORM_CODE,"edit"),a.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!1,showBillCode:!0,billCode:a.titleno})):"add"!==e&&"copy"!==e||(t.setFormStatus(u.CARD_FORM_CODE,"add"),a.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!1,showBillCode:!1})),"add"===e||"edit"===e||"copy"===e){a.props.resMetaAfterPkorgEdit();var n=a.props.form.getFormItemsValue(u.CARD_FORM_CODE,"pk_register");n&&n.value&&p.afterEvent.call(a,a.props,u.CARD_FORM_CODE,"pk_register",n,null,null,null,null,!0)}(0,c.orgVersionView)(a.props,u.CARD_FORM_CODE);var i=a.props.form.getFormItemsValue(u.CARD_FORM_CODE,"isagent")&&a.props.form.getFormItemsValue(u.CARD_FORM_CODE,"isagent").value;p.afterEvent.call(a,a.props,u.CARD_FORM_CODE,"isagent",i,null,null,null,null,!0),p.buttonVisiable.call(a,a.props)},a.refresh=function(){var e=a.props.getUrlParam("id"),t=a.props.getUrlParam("status"),r="";if(!e)return a.props.form.EmptyAllFormValue(u.CARD_FORM_CODE),a.setState({isBlank:!0}),a.titleno="",void a.toggleShow();var o={pk:e};if("add"==t)return a.props.form.EmptyAllFormValue(u.CARD_FORM_CODE),a.titleno="",void a.toggleShow();r="copy"==t?u.URL_LIST.COPY:u.URL_LIST.CARD_QUERY,D.call(a,o,r,(function(e){if(e.data){this.props.form.setAllFormValue(f({},u.CARD_FORM_CODE,e.data.card.head[u.CARD_FORM_CODE])),this.titleno=e.data.card.head[u.CARD_FORM_CODE].rows[0].values.vbillno.value,"copy"!=t&&"edit"!=t||(this.props.form.setFormItemsDisabled(u.CARD_FORM_CODE,{pk_org:!0}),this.props.form.setFormItemsDisabled(u.CARD_FORM_CODE,{vbillno:!0})),this.toggleShow();var a=this.props.form.getFormItemsValue(this.formId,"saga_status")&&this.props.form.getFormItemsValue(this.formId,"saga_status").value;"browse"===this.props.getUrlParam("status")&&"1"===a?this.props.button.toggleErrorStatus(u.CARD_AREA,{isError:!0}):this.props.button.toggleErrorStatus(u.CARD_AREA,{isError:!1});var r=this.props.form.getFormItemsValue(this.formId,"saga_gtxid")&&this.props.form.getFormItemsValue(this.formId,"saga_gtxid").value;r&&a&&this.props.socket.showToast({gtxid:r,billpk:this.props.form.getFormItemsValue(this.formId,this.primaryId)&&this.props.form.getFormItemsValue(this.formId,this.primaryId).value})}}))},a.onHideUploader=function(){a.setState({showUploader:!1})},a.closeApprove=function(){a.setState({approveshow:!1})},a.getAssginUsedr=function(e){var t=a.props.form.getFormItemsValue(u.CARD_FORM_CODE,"pk_accept"),r=a.props.form.getFormItemsValue(u.CARD_FORM_CODE,"ts"),n={pageid:u.CARD_PAGE_CODE,pks:[t&&t.value],tss:[r&&r.value],isCardOpt:!0,userObj:e};D.call(a,n,u.URL_LIST.COMMIT,(function(a){a.data&&a.data.errMsg?(0,o.toast)({color:"error",content:a.data.errMsg}):!a.data.workflow||"approveflow"!=a.data.workflow&&"workflow"!=a.data.workflow||e?(this.setState({compositedata:a.data,compositedisplay:!1}),a.data.card.head&&(this.props.form.setAllFormValue(f({},u.CARD_FORM_CODE,a.data.card.head[u.CARD_FORM_CODE])),b("pk_accept",t&&t.value,a.data.card,u.CARD_FORM_CODE,u.DATASOURCE),(0,o.toast)({color:"success",content:this.props.MutiInit.getIntl("36180BP")&&this.props.MutiInit.getIntl("36180BP").get("36180BP-000009")}))):this.setState({compositedata:a.data,compositedisplay:!0}),this.componentDidMount()}))},a.compositeTurnOff=function(e){a.setState({compositedata:null,compositedisplay:!1})},a.pageId=u.CARD_PAGE_CODE,a.formId=u.CARD_FORM_CODE,a.appcode=a.props.getUrlParam("c")||a.props.getSearchParam("c"),a.primaryId="pk_accept",a.API_URL={commit:u.CARD_BTN.COMMIT,uncommit:u.CARD_BTN.UNCOMMIT,makeVoucher:u.CARD_BTN.VOUCHER,cancelVoucher:u.CARD_BTN.CANCELVOUCHER},a.initTemplate=p.initTemplate.bind(a,e),a.titleno="",a.state={showUploader:!1,billId:"",billno:"",target:null,isBlank:!1,approveshow:!1,billtype:"",assignShow:!1,assignData:null,compositedata:null,compositedisplay:null,printOutputInfo:{},showNtbDetail:!1,ntbdata:{},showOriginal:!1,showOriginalData:[],showInnerAcc:!1,showInnerAccData:null},p.initTemplate.call(a,a.props),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentDidMount",value:function(){this.refresh()}},{key:"componentWillMount",value:function(){var e=this;window.onbeforeunload=function(){if(!["browse"].includes(e.props.getUrlParam("status")))return e.props.MutiInit.getIntl("36180BP")&&e.props.MutiInit.getIntl("36180BP").get("36180BP-000033")}}},{key:"render",value:function(){var e=this,t=this.props,a=t.form,r=t.cardPagination,o=t.socket,n=this.props.BillHeadInfo.createBillHeadInfo,c=a.createForm,d=r.createCardPagination,f=this.state,b=f.billno,A=f.showUploader,D=f.target,O=(f.assignShow,f.assignData,f.billId),E=f.approveshow,I=f.billtype,y=f.printOutputInfo,k=f.showNtbDetail,M=f.showInnerAcc;f.showOriginal;return i.default.createElement("div",{className:"nc-bill-card"},o.connectMesg({headBtnAreaCode:u.CARD_AREA,formAreaCode:u.CARD_FORM_CODE,billtype:u.BILL_TYPE,billpkname:this.primaryId,dataSource:u.DATASOURCE}),i.default.createElement(R,null,i.default.createElement(v,{areaCode:v.config.HEADER,className:"nc-bill-header-area"},i.default.createElement("div",{className:"header-title-search-area"},n({title:this.props.MutiInit.getIntl("36180BP")&&this.props.MutiInit.getIntl("36180BP").get("36180BP-000014"),backBtnClick:function(){e.backList()}})),i.default.createElement("div",{className:"header-button-area"},this.props.button.createErrorFlag({headBtnAreaCode:u.CARD_AREA}),this.props.button.createButtonApp({area:"card_head",buttonLimit:7,onButtonClick:p.buttonClick.bind(this),popContainer:document.querySelector(".header-button-area")})),i.default.createElement("div",{className:"header-cardPagination-area",style:{float:"right"}},d({handlePageInfoChange:p.pageInfoClick.bind(this),dataSource:u.DATASOURCE})))),i.default.createElement("div",{className:"nc-bill-top-area remove-block"},i.default.createElement("div",{className:"nc-bill-form-area"},c(u.CARD_FORM_CODE,{onAfterEvent:p.afterEvent.bind(this)}))),A&&i.default.createElement(m,{billId:O,target:D,placement:"bottom",billNo:b,onHide:this.onHideUploader}),i.default.createElement("div",null,i.default.createElement(C,{show:E,close:this.closeApprove,billtype:I,billid:O})),i.default.createElement("div",null,this.state.compositedisplay?i.default.createElement(_,{title:this.props.MutiInit.getIntl("36180BP")&&this.props.MutiInit.getIntl("36180BP").get("36180BP-000015"),data:this.state.compositedata,display:this.state.compositedisplay,getResult:this.getAssginUsedr,cancel:this.compositeTurnOff}):""),i.default.createElement(h,{ref:"printOutput",url:u.URL_LIST.PRINTOUTPUT,data:y}),k&&i.default.createElement(g,{show:this.state.showNtbDetail,sourceData:this.state.ntbdata,cancel:function(){e.setState({showNtbDetail:!1})},affirm:function(){e.setState({showNtbDetail:!1})}}),i.default.createElement(s.default,{showmodal:this.state.showOriginal,showOriginalData:this.state.showOriginalData,onSureClick:function(t){e.setState({showOriginal:!1})},onCloseClick:function(){e.setState({showOriginal:!1})}}),M&&i.default.createElement(l.InnerAccoutDialog,{showModal:this.state.showInnerAcc,accpk:this.state.showInnerAccData,closeModal:function(){e.setState({showInnerAcc:!1})}}))}}]),t}(n.Component);function D(e,t,a){(0,o.ajax)({url:t,data:e,success:a.bind(this)})}A=(0,o.createPage)({billinfo:{billtype:"card",pagecode:u.CARD_PAGE_CODE,headcode:u.CARD_FORM_CODE},mutiLangCode:u.APP_CODE,orderOfHotKey:[u.CARD_FORM_CODE]})(A),t.default=A},359:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initTemplate=function(e,t){var a=this;e.createUIDom({pagecode:o.CARD_PAGE_CODE,appcode:this.appcode},(function(t){if(t){var r=e.getUrlParam("status");if((0,i.orgVersionView)(e,o.CARD_FORM_CODE),t.template){var s=t.template;s=function(e,t,a){return a[o.CARD_FORM_CODE].items.map((function(a){"pk_org"==a.attrcode&&(a.queryCondition=function(){return{funcode:e.appcode,TreeRefActionExt:"nccloud.web.tmpub.filter.FinanceOrgPermissionFilter"}}),a.attrcode.indexOf("def")>-1&&(a.queryCondition=function(e){return{pk_org:t.form.getFormItemsValue(o.CARD_FORM_CODE,"pk_org").value,pk_group:t.form.getFormItemsValue(o.CARD_FORM_CODE,"pk_group").value}}),"pk_register"==a.attrcode&&(a.queryCondition=function(){var e=t.form.getFormItemsValue(o.CARD_FORM_CODE,"pk_org"),a=t.form.getFormItemsValue(o.CARD_FORM_CODE,"initflag"),r=t.form.getFormItemsValue(o.CARD_FORM_CODE,"isagent"),n=t.form.getFormItemsValue(o.CARD_FORM_CODE,"pk_accept");return{pk_org:e&&e.value,initflag:a&&a.value,isagent:r&&r.value,pk_accept:n&&n.value,GridRefActionExt:"nccloud.web.fbm.fbm.accept.filter.AcceptPkRegisterFilter4NCC"}}),"holdunit"==a.attrcode&&(a.queryCondition=function(){var e=t.form.getFormItemsValue(o.CARD_FORM_CODE,"pk_org"),a=t.form.getFormItemsValue(o.CARD_FORM_CODE,"pk_group");return{pk_org:e&&e.value,pk_group:a&&a.value}}),"acceptplanitem"==a.attrcode&&(a.queryCondition=function(){var e=t.form.getFormItemsValue(o.CARD_FORM_CODE,"pk_org");return{pk_org:e&&e.value}}),"holderacc"==a.attrcode&&(a.fieldDisplayed="refcode",a.showHistory=!0,a.queryCondition=function(){var e=t.form.getFormItemsValue(o.CARD_FORM_CODE,"holdunit"),a=t.form.getFormItemsValue(o.CARD_FORM_CODE,"pk_register"),r=t.form.getFormItemsValue(o.CARD_FORM_CODE,"pk_holderbank"),n=t.form.getFormItemsValue(o.CARD_FORM_CODE,"holderacc"),i=t.form.getFormItemsValue(o.CARD_FORM_CODE,"pk_curr");return{pk_cust:e&&e.value,pk_register:a&&a.value,pk_holderbank:r&&r.value,holderacc:n&&n.value,pk_curr:i&&i.value,GridRefActionExt:"nccloud.web.fbm.fbm.accept.filter.AcceptHolderAccFilter4NCC"}})})),a[o.CARD_FORM_CODE3].items.map((function(e){"backsecaccount"==e.attrcode&&(e.showHistory=!0,e.queryCondition=function(){var e=t.form.getFormItemsValue(o.CARD_FORM_CODE,"pk_curr"),a=t.form.getFormItemsValue(o.CARD_FORM_CODE,"pk_org");return{pk_org:a&&a.value,pk_curr:e&&e.value,GridRefActionExt:"nccloud.web.fbm.fbm.accept.filter.BackSecAccFilter4NCC"}})})),a[o.CARD_FORM_CODE8].items.map((function(e){"pk_inbalaacc"==e.attrcode&&(e.queryCondition=function(){var e=t.form.getFormItemsValue(o.CARD_FORM_CODE,"pk_curr"),a=t.form.getFormItemsValue(o.CARD_FORM_CODE,"pk_usebillorg"),r=t.form.getFormItemsValue(o.CARD_FORM_CODE,"pk_payfundorg");return{pk_curr:e&&e.value,pk_usebillorg:a&&a.value,pk_payfundorg:r&&r.value,GridRefActionExt:"nccloud.web.fbm.fbm.accept.filter.AcceptInBalaAccFilter4NCC"}}),"pk_outreckonacc"==e.attrcode&&(e.queryCondition=function(){var e=t.form.getFormItemsValue(o.CARD_FORM_CODE,"pk_org"),a=t.form.getFormItemsValue(o.CARD_FORM_CODE,"pk_outfundorg"),r=t.form.getFormItemsValue(o.CARD_FORM_CODE,"pk_curr");return{pk_org:e&&e.value,pk_outfundorg:a&&a.value,pk_currtype:r&&r.value,GridRefActionExt:"nccloud.web.fbm.fbm.accept.filter.AcceptInnerReckonAccFilter4NCC"}}),"pk_outfundorg"==e.attrcode&&(e.queryCondition=function(){var e=t.form.getFormItemsValue(o.CARD_FORM_CODE,"pk_org"),a=t.form.getFormItemsValue(o.CARD_FORM_CODE,"pk_group");return{pk_org:e&&e.value,pk_group:a&&a.value,TreeRefActionExt:"nccloud.web.fbm.fbm.accept.filter.AcceptPayFundOrgFilter4NCC"}})})),a}(a,e,s),e.meta.setMeta(s)}if(t.button){var l=t.button;e.button.setButtons(l),n.buttonVisiable.call(a,e)}if(e.form.closeArea("36180BP_C01_form6"),t.context){var c=a.props.form,u=t.context;if(a.setState({curr_pk_org:u.pk_org,curr_orgname:u.org_Name,curr_pk_org_v:u.pk_org_v,curr_orgname_v:u.org_v_Name}),"add"===r&&(e.initMetaByPkorg(),c.setFormItemsValue(o.CARD_FORM_CODE,{pk_org:{value:u.pk_org,display:u.org_Name},pk_org_v:{value:a.state.curr_pk_org_v,display:a.state.curr_orgname_v}}),u.pk_org)){var p={value:u.pk_org,display:u.org_Name};n.afterEvent.call(a,a.props,o.CARD_FORM_CODE,"pk_org",p,null,null,null,null,!0),a.props.resMetaAfterPkorgEdit(),c.setFormItemsDisabled(o.CARD_FORM_CODE,{pk_org:!1})}var d=c.getFormItemsValue(o.CARD_FORM_CODE,"isagent")&&c.getFormItemsValue(o.CARD_FORM_CODE,"isagent").value;n.afterEvent.call(a,a.props,o.CARD_FORM_CODE,"isagent",d,null,null,null,null,!0)}}}))};a(10);var r=a(1),o=a(182),n=a(266),i=a(140);r.cardCache.setDefData},360:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buttonVisiable=function(e){var t=[];for(var a in r.CARD_BTN)t.push(r.CARD_BTN[a]);e.button.setButtonVisible(t,!1);var u=e.getUrlParam("status"),p="browse"!==u,d=e.form.getFormItemsValue(r.CARD_FORM_CODE,"vbillstatus")&&e.form.getFormItemsValue(r.CARD_FORM_CODE,"vbillstatus").value,f=e.form.getFormItemsValue(r.CARD_FORM_CODE,"voucher")&&e.form.getFormItemsValue(r.CARD_FORM_CODE,"voucher").value,m=this.state.isBlank,C=e.form.getFormItemsValue(r.CARD_FORM_CODE,"initflag")&&e.form.getFormItemsValue(r.CARD_FORM_CODE,"initflag").value,_=e.form.getFormItemsValue(r.CARD_FORM_CODE,"pk_inbalaacc"),h=e.form.getFormItemsValue(r.CARD_FORM_CODE,"pk_insecurityacc");e.cardPagination.setCardPaginationVisible("cardPaginationBtn",!p),"add"==u?e.button.setButtonVisible(o,!0):"browse"==u?(m?(e.button.setButtonVisible(n,!0),e.button.setMainButton("Add",!0)):"-1"==d?e.button.setButtonVisible(i,!0):"2"==d||"3"==d?e.button.setButtonVisible(s,!0):"1"==d?f?e.button.setButtonVisible(c,!0):(e.button.setButtonVisible(l,!0),1==C&&e.button.setButtonVisible([r.CARD_BTN.VOUCHER],!1)):f&&e.button.setButtonVisible(c,!0),_&&_.value&&e.button.setButtonVisible(r.CARD_BTN.LQUERYINBALAACC,!0),h&&h.value&&e.button.setButtonVisible(r.CARD_BTN.LQUERYINSECURITYACC,!0)):"edit"==u||"copy"==u?e.button.setButtonVisible(o,!0):(e.button.setButtonVisible(["Add"],!0),e.button.setMainButton("Add",!0))};var r=a(182);var o=[r.CARD_BTN.SAVE,r.CARD_BTN.SAVEADD,r.CARD_BTN.SAVECOMMIT,r.CARD_BTN.CANCEL],n=[r.CARD_BTN.ADD],i=[r.CARD_BTN.ADD,r.CARD_BTN.EDIT,r.CARD_BTN.DELETE,r.CARD_BTN.COPY,r.CARD_BTN.COMMIT,r.CARD_BTN.LQUERYPJBOOK,r.CARD_BTN.LQUERYPLAN,r.CARD_BTN.LQUERYPAYACC,r.CARD_BTN.LQUERYSIGN,r.CARD_BTN.FILEDOCUMENT,r.CARD_BTN.PRINT,r.CARD_BTN.OUTPUT,r.CARD_BTN.REFRESH],s=[r.CARD_BTN.ADD,r.CARD_BTN.COPY,r.CARD_BTN.UNCOMMIT,r.CARD_BTN.LQUERYPJBOOK,r.CARD_BTN.LQUERYPLAN,r.CARD_BTN.LQUERYPAYACC,r.CARD_BTN.LQUERYSIGN,r.CARD_BTN.LQUERYAPPROVEINFO,r.CARD_BTN.FILEDOCUMENT,r.CARD_BTN.PRINT,r.CARD_BTN.OUTPUT,r.CARD_BTN.REFRESH],l=[r.CARD_BTN.ADD,r.CARD_BTN.COPY,r.CARD_BTN.UNCOMMIT,r.CARD_BTN.VOUCHER,r.CARD_BTN.LQUERYPJBOOK,r.CARD_BTN.LQUERYPLAN,r.CARD_BTN.LQUERYPAYACC,r.CARD_BTN.LQUERYSIGN,r.CARD_BTN.LQUERYAPPROVEINFO,r.CARD_BTN.FILEDOCUMENT,r.CARD_BTN.PRINT,r.CARD_BTN.OUTPUT,r.CARD_BTN.REFRESH],c=[r.CARD_BTN.ADD,r.CARD_BTN.COPY,r.CARD_BTN.CANCELVOUCHER,r.CARD_BTN.LQUERYPJBOOK,r.CARD_BTN.LQUERYVOUCHER,r.CARD_BTN.LQUERYPLAN,r.CARD_BTN.LQUERYPAYACC,r.CARD_BTN.LQUERYSIGN,r.CARD_BTN.LQUERYAPPROVEINFO,r.CARD_BTN.FILEDOCUMENT,r.CARD_BTN.PRINT,r.CARD_BTN.OUTPUT,r.CARD_BTN.REFRESH]},361:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,n=(r=regeneratorRuntime.mark((function e(t,a,r,o){var n,l,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,s.createSimpleBillData)(t,p.CARD_PAGE_CODE,p.CARD_FORM_CODE,[],!1),l=this.props.form.getFormItemsValue(p.CARD_FORM_CODE,"pk_accept"),c=function(e){if(e.data.card.head){this.props.form.setAllFormValue(d({},p.CARD_FORM_CODE,e.data.card.head[p.CARD_FORM_CODE]));var n=e.data.card.head[p.CARD_FORM_CODE].rows[0].values.pk_accept,s=e.data.card.head[p.CARD_FORM_CODE].rows[0].values.vbillno;if(this.setState({billno:s&&s.value,isBlank:!1}),this.props.setUrlParam({status:"browse",id:n&&n.value}),l&&l.value?C("pk_accept",e.data.card.head[p.CARD_FORM_CODE].rows[0].values.pk_accept.value,e.data.card,p.CARD_FORM_CODE,p.DATASOURCE,e.data.card.head[p.CARD_FORM_CODE].rows[0].values):_(e.data.card.head[p.CARD_FORM_CODE].rows[0].values.pk_accept.value,e.data.card,p.CARD_FORM_CODE,p.DATASOURCE,e.data.card.head[p.CARD_FORM_CODE].rows[0].values),r)return void h.call(this,t);if(o)return void D.call(this,t);this.toggleShow(),a&&(0,i.toast)({color:"success",content:this.props.MutiInit.getIntl("36180BP")&&this.props.MutiInit.getIntl("36180BP").get("36180BP-000006")})}},V.call(this,n,p.URL_LIST.SAVE,c);case 4:case"end":return e.stop()}}),e,this)})),o=function(){var e=r.apply(this,arguments);return new Promise((function(t,a){return function r(o,n){try{var i=e[o](n),s=i.value}catch(e){return void a(e)}if(!i.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(s)}("next")}))},function(e,t,a,r){return o.apply(this,arguments)});t.buttonClick=function(e,t){switch(t){case p.CARD_BTN.ADD:h.call(this,e);break;case p.CARD_BTN.CANCEL:(0,i.promptBox)({title:this.props.MutiInit.getIntl("36180BP")&&this.props.MutiInit.getIntl("36180BP").get("36180BP-000002"),color:"warning",content:this.props.MutiInit.getIntl("36180BP")&&this.props.MutiInit.getIntl("36180BP").get("36180BP-000003"),beSureBtnClick:g.bind(this,e)});break;case p.CARD_BTN.SAVE:A.call(this,e,!0);break;case p.CARD_BTN.SAVEADD:A.call(this,e,!1,!0,!1);break;case p.CARD_BTN.SAVECOMMIT:A.call(this,e,!1,!1,!0);break;case p.CARD_BTN.EDIT:b.call(this,e);break;case p.CARD_BTN.DELETE:(0,i.promptBox)({title:this.props.MutiInit.getIntl("36180BP")&&this.props.MutiInit.getIntl("36180BP").get("36180BP-000004"),color:"warning",content:this.props.MutiInit.getIntl("36180BP")&&this.props.MutiInit.getIntl("36180BP").get("36180BP-000005"),beSureBtnClick:R.bind(this,e)});break;case p.CARD_BTN.COPY:v.call(this,e);break;case p.CARD_BTN.REFRESH:O.call(this,e,!0);break;case p.CARD_BTN.COMMIT:D.call(this,e);break;case p.CARD_BTN.UNCOMMIT:E.call(this,e);break;case p.CARD_BTN.VOUCHER:I.call(this,e);break;case p.CARD_BTN.CANCELVOUCHER:y.call(this,e);break;case p.CARD_BTN.FILEDOCUMENT:k.call(this,e);break;case p.CARD_BTN.LQUERYVOUCHER:T.call(this,e);break;case p.CARD_BTN.LQUERYAPPROVEINFO:M.call(this,e);break;case p.CARD_BTN.LQUERYPJBOOK:w.call(this,e);break;case p.CARD_BTN.LQUERYPLAN:N.call(this,e);break;case p.CARD_BTN.LQUERYPAYACC:P.call(this,e);break;case p.CARD_BTN.LQUERYSIGN:B.call(this,e);break;case p.CARD_BTN.LQUERYINBALAACC:L.call(this,e);break;case p.CARD_BTN.LQUERYINSECURITYACC:F.call(this,e);break;case p.CARD_BTN.PRINT:U.call(this,e);break;case p.CARD_BTN.OUTPUT:S.call(this,e)}};var i=a(1),s=a(10),l=a(5),c=a(202),u=a(210),p=a(182);function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var f=i.cardCache.getNextId,m=(i.cardCache.getCurrentLastId,i.cardCache.deleteCacheById),C=(i.cardCache.getCacheById,i.cardCache.updateCache),_=i.cardCache.addCache;function h(e){this.props.button.toggleErrorStatus(p.CARD_AREA,{isError:!1});var t=e.form.getFormItemsValue(p.CARD_FORM_CODE,"pk_accept")&&e.form.getFormItemsValue(p.CARD_FORM_CODE,"pk_accept").value;t||(t=""),this.props.setUrlParam({status:"add",id:t}),this.props.form.setFormStatus(p.CARD_FORM_CODE,"add"),this.componentDidMount(),this.props.form.EmptyAllFormValue(p.CARD_FORM_CODE),this.initTemplate.call(this,e),this.props.form.setFormStatus(p.CARD_FORM_CODE,"add")}function g(e){var t=e.getUrlParam("status"),a=e.getUrlParam("id");"edit"===t?(this.props.pushTo("/card",{status:"browse",id:a,pagecode:p.CARD_PAGE_CODE}),this.componentDidMount()):"add"===t?(e.pushTo("/card",{id:a,status:"browse",pagecode:p.CARD_PAGE_CODE}),this.componentDidMount()):"copy"===t?(this.props.pushTo("/card",{id:a,status:"browse",pagecode:p.CARD_PAGE_CODE}),this.componentDidMount()):"browse"===t&&(this.props.pushTo("/card",{status:"browse",id:a,pagecode:p.CARD_PAGE_CODE}),this.componentDidMount())}function b(e){var t=this,a={pk:this.props.form.getFormItemsValue(this.formId,this.primaryId)&&this.props.form.getFormItemsValue(this.formId,this.primaryId).value,fieldPK:this.primaryId,tableName:"fbm_accept"};l.apiSaga.call(this,{data:a,success:function(a){e.pushTo("/card",{status:"edit",id:e.getUrlParam("id"),pagecode:p.CARD_PAGE_CODE}),t.props.form.getFormItemsValue(t.formId,"saga_frozen")&&t.props.form.setFormItemsValue(t.formId,{saga_frozen:{value:"0"}}),t.props.form.getFormItemsValue(t.formId,"saga_status")&&t.props.form.setFormItemsValue(t.formId,{saga_status:{value:"0"}}),t.componentDidMount()}})}function R(e){var t={pks:[e.getUrlParam("id")]};V.call(this,t,p.URL_LIST.DELETE,(function(e){(0,i.toast)({color:"success",content:this.props.MutiInit.getIntl("36180BP")&&this.props.MutiInit.getIntl("36180BP").get("36180BP-000007")});var t=this.props.getUrlParam("id"),a=f(t,p.DATASOURCE);m("pk_accept",t,p.DATASOURCE),this.props.setUrlParam({status:"browse",id:a||""}),this.componentDidMount()}))}function v(e){this.props.button.toggleErrorStatus(p.CARD_AREA,{isError:!1});var t=e.getUrlParam("id");if(t){var a={pk:t};V.call(this,a,p.URL_LIST.COPY,(function(e){e.data&&(this.props.form.setAllFormValue(d({},p.CARD_FORM_CODE,e.data.card.head[p.CARD_FORM_CODE])),this.titleno=e.data.card.head[p.CARD_FORM_CODE].rows[0].values.vbillno.value,this.props.form.setFormItemsDisabled(p.CARD_FORM_CODE,{pk_org:!0}),this.props.form.setFormItemsDisabled(p.CARD_FORM_CODE,{vbillno:!0}),this.props.setUrlParam({status:"copy"}),this.toggleShow())}))}else(0,i.toast)({color:"error",content:this.props.MutiInit.getIntl("36180BP")&&this.props.MutiInit.getIntl("36180BP").get("36180BP-000008")})}function A(e,t,a,r){if(e.form.isCheckNow([p.CARD_FORM_CODE,p.CARD_FORM_CODE2,p.CARD_FORM_CODE3,p.CARD_FORM_CODE4,p.CARD_FORM_CODE5,c.CARD_FORM_CODE6],"warning")){var o=e.form.getAllFormValue(p.CARD_FORM_CODE),i={pageid:p.CARD_PAGE_CODE,model:{areacode:p.CARD_FORM_CODE,rows:o.rows,areaType:"form"}};e.validateToSave(i,n.bind(this,e,t,a,r),"","form")}}function D(e){var t=e.form.getFormItemsValue(p.CARD_FORM_CODE,"pk_accept"),a=e.form.getFormItemsValue(p.CARD_FORM_CODE,"ts"),r={pageid:p.CARD_PAGE_CODE,pks:[t&&t.value],tss:[a&&a.value],isCardOpt:!0};V.call(this,r,p.URL_LIST.COMMIT,(function(e){e.data&&e.data.errMsg?(0,i.toast)({color:"error",content:e.data.errMsg}):!e.data.workflow||"approveflow"!=e.data.workflow&&"workflow"!=e.data.workflow?(this.setState({compositedata:e.data,compositedisplay:!1}),e.data.card.head&&(this.props.form.setAllFormValue(d({},p.CARD_FORM_CODE,e.data.card.head[p.CARD_FORM_CODE])),C("pk_accept",t&&t.value,e.data.card,p.CARD_FORM_CODE,p.DATASOURCE),(0,i.toast)({color:"success",content:this.props.MutiInit.getIntl("36180BP")&&this.props.MutiInit.getIntl("36180BP").get("36180BP-000009")}))):this.setState({compositedata:e.data,compositedisplay:!0}),O.call(this,this.props,!1)}))}function O(e,t){var a=e.getUrlParam("id");if(!a)return this.props.form.EmptyAllFormValue(p.CARD_FORM_CODE),this.setState({isBlank:!0}),void this.toggleShow();var r={pk:a};V.call(this,r,p.URL_LIST.CARD_QUERY,(function(e){e.data&&(this.props.form.setAllFormValue(d({},p.CARD_FORM_CODE,e.data.card.head[p.CARD_FORM_CODE])),this.titleno=e.data.card.head[p.CARD_FORM_CODE].rows[0].values.vbillno.value,this.toggleShow(),t&&(0,i.toast)({color:"success",content:this.props.MutiInit.getIntl("36180BP")&&this.props.MutiInit.getIntl("36180BP").get("36180BP-000010")}))}))}function E(e){var t=e.form.getFormItemsValue(p.CARD_FORM_CODE,"pk_accept"),a=e.form.getFormItemsValue(p.CARD_FORM_CODE,"ts"),r={pageid:p.CARD_PAGE_CODE,pks:[t&&t.value],tss:[a&&a.value],isCardOpt:!0};V.call(this,r,p.URL_LIST.UNCOMMIT,(function(e){e.data&&e.data.errMsg?(0,i.toast)({color:"error",content:e.data.errMsg}):e.data.card.head&&(this.props.form.setAllFormValue(d({},p.CARD_FORM_CODE,e.data.card.head[p.CARD_FORM_CODE])),C("pk_accept",t&&t.value,e.data.card,p.CARD_FORM_CODE,p.DATASOURCE),(0,i.toast)({color:"success",content:this.props.MutiInit.getIntl("36180BP")&&this.props.MutiInit.getIntl("36180BP").get("36180BP-000011")})),O.call(this,this.props,!1)}))}function I(e){var t=this,a=e.form.getFormItemsValue(p.CARD_FORM_CODE,"pk_accept"),r={pk:a&&a.value,pageid:p.CARD_PAGE_CODE,isCardOpt:!0};V.call(this,r,p.URL_LIST.VOUCHER,(function(e){e.data&&(e.data.errMsg?(0,i.toast)({color:"error",content:e.data.errMsg}):e.data.card.head&&(t.props.form.setAllFormValue(d({},p.CARD_FORM_CODE,e.data.card.head[p.CARD_FORM_CODE])),C("pk_accept",a&&a.value,e.data.card,p.CARD_FORM_CODE,p.DATASOURCE),(0,i.toast)({color:"success",content:this.props.MutiInit.getIntl("36180BP")&&this.props.MutiInit.getIntl("36180BP").get("36180BP-000012")}))),O.call(this,this.props,!1)}))}function y(e){var t=this,a=e.form.getFormItemsValue(p.CARD_FORM_CODE,"pk_accept"),r={pk:a&&a.value,pageid:p.CARD_PAGE_CODE,isCardOpt:!0};V.call(this,r,p.URL_LIST.CANCELVOUCHER,(function(e){e.data&&(e.data.errMsg?(0,i.toast)({color:"error",content:e.data.errMsg}):e.data.card.head&&(t.props.form.setAllFormValue(d({},p.CARD_FORM_CODE,e.data.card.head[p.CARD_FORM_CODE])),C("pk_accept",a&&a.value,e.data.card,p.CARD_FORM_CODE,p.DATASOURCE),(0,i.toast)({color:"success",content:this.props.MutiInit.getIntl("36180BP")&&this.props.MutiInit.getIntl("36180BP").get("36180BP-000013")}))),O.call(this,this.props,!1)}))}function k(e){var t=e.form.getFormItemsValue(p.CARD_FORM_CODE,"vbillno").value,a=e.form.getFormItemsValue(p.CARD_FORM_CODE,"pk_accept").value;this.setState({showUploader:!this.state.showUploader,target:null,billId:a,billno:t})}function M(e){var t=e.form.getFormItemsValue(p.CARD_FORM_CODE,"pk_accept"),a=e.form.getFormItemsValue(p.CARD_FORM_CODE,"pk_billtypecode");this.setState({approveshow:!0,billId:t&&t.value,billtype:a&&a.value})}function T(e){var t=e.form.getFormItemsValue(p.CARD_FORM_CODE,"pk_accept"),a=e.form.getFormItemsValue(p.CARD_FORM_CODE,"pk_group"),r=e.form.getFormItemsValue(p.CARD_FORM_CODE,"pk_org"),o=e.form.getFormItemsValue(p.CARD_FORM_CODE,"pk_billtypecode");t=t&&t.value;var n=[{pk_group:a=a&&a.value,pk_org:r=r&&r.value,relationID:t,pk_billtype:o=o&&o.value}];V.call(this,n,p.URL_LIST.LinkVoucher,(function(t){if(t.success){var a=t.data.src;if("_LinkVouchar2019"!=a)return void(0,i.toast)({color:"warning",content:this.props.MutiInit.getIntl("36180BP")&&this.props.MutiInit.getIntl("36180BP").get("36180BP-000051")});if(t.data.des&&t.data.pklist){if(1==t.data.pklist.length)return void this.props.openTo(t.data.url,{status:"browse",appcode:t.data.appcode,pagecode:t.data.pagecode,id:t.data.pklist[0],n:this.props.MutiInit.getIntl("36180BP")&&this.props.MutiInit.getIntl("36180BP").get("36180BP-000050"),backflag:"noback"});cacheTools.set(t.data.cachekey,t.data.pklist);var r=this.props.getSearchParam("c")||e.getUrlParam("c");return void this.props.openTo(t.data.url,{status:"browse",appcode:t.data.appcode,pagecode:t.data.pagecode,n:this.props.MutiInit.getIntl("36180BP")&&this.props.MutiInit.getIntl("36180BP").get("36180BP-000050"),scene:r+a})}}}))}function P(e){var t=[],a=e.form.getFormItemsValue(p.CARD_FORM_CODE,"pk_org"),r=e.form.getFormItemsValue(p.CARD_FORM_CODE,"pk_register"),o={pk_register:r&&r.value};V.call(this,o,p.URL_LIST.LQPAYACC,(function(e){var r=e.data.pk_payacc;if(r){var o={pk_org:a&&a.value,pk_account:r};t.push(o),this.setState({showOriginalData:t,showOriginal:!0})}}))}function L(e){var t=e.form.getFormItemsValue(p.CARD_FORM_CODE,"pk_inbalaacc");t&&t.value&&this.setState({showInnerAccData:t&&t.value,showInnerAcc:!0})}function F(e){var t=e.form.getFormItemsValue(p.CARD_FORM_CODE,"pk_insecurityacc");t&&t.value&&this.setState({showInnerAccData:t&&t.value,showInnerAcc:!0})}function B(e){var t=e.form.getFormItemsValue(p.CARD_FORM_CODE,"pk_register"),a={status:"browse",id:t&&t.value};(0,u.linkApp)(e,"36H2",a)}function w(e){var t=e.form.getFormItemsValue(p.CARD_FORM_CODE,"pk_register").value;this.props.openTo("/fbm/fbm/counterbook/main/index.html#/card",{billtype:"36HM",appcode:"36181BL",pagecode:"36181BL_C01",status:"browse",scene:"linksce",sence:"4",id:t})}function N(e){var t={pk:e.form.getFormItemsValue(p.CARD_FORM_CODE,"pk_accept").value,className:p.FULL_AGGCLASSNAME,modulecode:"3618"};V.call(this,t,p.URL_LIST.LINKNTB,(function(e){var t=e.data;t.hint?(0,i.toast)({color:"warning",content:e.data.hint}):this.setState({showNtbDetail:!0,ntbdata:t})}))}function U(e){var t=[e.getUrlParam("id")],a=e.getSearchParam("c")||e.getUrlParam("c");(0,i.print)("pdf",p.URL_LIST.PRINTOUTPUT,{appcode:a,nodekey:"36180BPNCC",oids:t})}function S(e){var t=this,a=[e.getUrlParam("id")],r=e.getSearchParam("c")||e.getUrlParam("c");this.setState({printOutputInfo:{funcode:r,nodekey:"36180BPNCC",oids:a,outputType:"output"}},(function(){t.refs.printOutput.open()}))}function V(e,t,a){(0,i.ajax)({url:t,data:e,success:a.bind(this)})}},362:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pageInfoClick=function(e,t){if(!t)return;var a=o.cardCache.getCacheById(t,r.DATASOURCE);if(e.setUrlParam({status:"browse",id:t}),a){e.form.setAllFormValue(n({},r.CARD_FORM_CODE,a.head[r.CARD_FORM_CODE]));var s=a.head[r.CARD_FORM_CODE].rows[0].values.vbillno.value;this.titleno=s,this.toggleShow()}else{var l={pk:t};i.call(this,l,r.URL_LIST.CARD_QUERY,(function(e){e.data.card?(this.props.form.setAllFormValue(n({},r.CARD_FORM_CODE,e.data.card.head[r.CARD_FORM_CODE])),o.cardCache.updateCache("pk_accept",t,e.data.card,r.CARD_FORM_CODE,r.DATASOURCE),this.titleno=e.data.card.head[r.CARD_FORM_CODE].rows[0].values.vbillno.value,this.props.setUrlParam({id:t}),this.toggleShow()):this.props.form.setAllFormValue(n({},r.CARD_FORM_CODE,{rows:[]}))}))}};var r=a(182),o=a(1);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t,a){(0,o.ajax)({url:t,data:e,success:a.bind(this)})}},363:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.afterEvent=i;var r=a(1),o=a(182);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t,a,r,n,i,l,d,f){console.log(a);var m=e.createHeadAfterEventData(o.CARD_PAGE_CODE,t,[],t,a,r);switch(a){case"pk_org":s.call(this,e,m,f),u.call(this);break;case"pk_register":c.call(this,e,m,f);break;case"holdunit":case"holderacc":case"pk_holderbank":case"backsecmoney":case"secaccpayamount":case"money":case"dacceptdate":case"olcrate":case"glcrate":case"gllcrate":p.call(this,m);break;case"isagent":u.call(this,f)}}function s(e,t,a){var n=this,i=this.props.MutiInit.getIntl("36180BP"),s=t.newvalue.value,c=t.oldvalue.value,u=t.oldvalue.display;t.oldvalue;a?l.call(this,t):s!=c&&s!=c&&(c?(0,r.promptBox)({color:"warning",title:i&&i.get("36180BP-000000"),content:i&&i.get("36180BP-000001"),beSureBtnClick:function(){l.call(n,t)},cancelBtnClick:function(){n.props.form.setFormItemsValue(o.CARD_FORM_CODE,{pk_org:{display:u,value:c}})}}):l.call(this,t))}function l(e){var t=e.newvalue.value;if(null==t||"undefined"==t)return this.props.form.EmptyAllFormValue(o.CARD_FORM_CODE),void this.props.initMetaByPkorg();d.call(this,e,o.URL_LIST.AFTEREVENT,(function(e){this.props.resMetaAfterPkorgEdit(),this.props.form.setFormItemsDisabled(o.CARD_FORM_CODE,{pk_org:!1}),e.data.card.head&&this.props.form.setAllFormValue(n({},o.CARD_FORM_CODE,e.data.card.head[o.CARD_FORM_CODE]))}))}function c(e,t,a){d.call(this,t,o.URL_LIST.AFTEREVENT,(function(e){f.call(this,e.data),e.data.card.head&&!a&&this.props.form.setAllFormValue(n({},o.CARD_FORM_CODE,e.data.card.head[o.CARD_FORM_CODE])),e.data.errMsg&&(0,r.toast)({color:"danger",content:e.data.errMsg})}))}function u(e){var t=this.props.form,a=this.props.getUrlParam("status"),r="add"===a||"edit"===a||"copy"===a,n=t.getFormItemsValue(o.CARD_FORM_CODE,"isagent");n&&n.value?(t.openArea(o.CARD_FORM_CODE8),r&&(t.setFormItemsRequired(o.CARD_FORM_CODE,{inneractualpmtmnt:!0}),t.setFormItemsDisabled(o.CARD_FORM_CODE,{pk_inbalaacc:!1,inneractualpmtmnt:!1,pk_outreckonacc:!1,pk_outfundorg:!1}))):(t.closeArea(o.CARD_FORM_CODE8),r&&(t.setFormItemsRequired(o.CARD_FORM_CODE,{inneractualpmtmnt:!1}),t.setFormItemsDisabled(o.CARD_FORM_CODE,{pk_inbalaacc:!0,inneractualpmtmnt:!0,pk_outreckonacc:!0,pk_outfundorg:!0}))),e||(t.setFormItemsValue(o.CARD_FORM_CODE,{pk_register:null}),t.getFormItemsValue,i.call(this,this.props,o.CARD_FORM_CODE,"pk_register",t.getFormItemsValue(o.CARD_FORM_CODE,"pk_register"),null,null,null,null,!1))}function p(e){d.call(this,e,o.URL_LIST.AFTEREVENT,(function(e){f.call(this,e.data),e.data.card.head&&this.props.form.setAllFormValue(n({},o.CARD_FORM_CODE,e.data.card.head[o.CARD_FORM_CODE])),e.data.errMsg&&(0,r.toast)({color:"danger",content:e.data.errMsg})}))}function d(e,t,a){(0,r.ajax)({async:!1,url:t,data:e,success:a.bind(this)})}function f(e){var t=e.itemInfo.EditableMap,a=e.itemInfo.RequiredMap,r=e.focusKey;if(t){var n={};for(var i in t)n[i]=t[i];this.props.form.setFormItemsDisabled(o.CARD_FORM_CODE,n)}if(a){var s={};for(var i in a)s[i]=a[i];this.props.form.setFormItemsRequired(o.CARD_FORM_CODE,s)}r&&this.props.form.setFormItemFocus(o.CARD_FORM_CODE,r)}},364:function(e,t,a){var r=a(365);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};a(8)(r,o);r.locals&&(e.exports=r.locals)},365:function(e,t,a){(e.exports=a(7)(!1)).push([e.i,".nc-bill-card .remove-block::after {\n  display: none;\n}\n",""])},5:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.linkAppFromTmpub=t.OPR_NAME=t.MODULE_ID=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};t.api=s,t.apiSaga=function(e){var t=e.data,a=e.success;e.error;(0,o.ajax)({url:"/nccloud/tmpub/pub/sagacheck.do",data:t,success:function(e){a&&a(e)}})},t.request=function(e){var t=e.url,a=e.data;return new Promise((function(e,r){(0,o.ajax)({url:t,data:a,success:function(t){e(t)},error:function(e){(0,o.toast)({color:"danger",content:e.message}),r(e)}})}))},t.printFnList=function(e){(0,o.print)("pdf",this.API_URL.print,{appcode:this.appcode,nodekey:this.nodekeyList,oids:e})},t.printFn=function(e){(0,o.print)("pdf",this.API_URL.print,{appcode:this.appcode,nodekey:this.nodekey,oids:e})},t.output=function(e){var t=this;this.setState({outputData:{nodekey:this.nodekey,oids:e,outputType:"output"}},(function(){t.refs.printOutput.open()}))},t.fileMgr=function(e,t){this.setState({showUploader:!this.state.showUploader,billInfo:{billId:e,billNo:t}})},t.approveDetail=l,t.linkApp=c,t.linkApproveDetail=function(e){l.call(this,e)},t.linkVoucher=function(e){var t=this;(0,o.ajax)({url:this.API_URL.linkVoucher,data:e,success:function(e){if(e.success){var a=e.data.src;if("_LinkVouchar2019"!=a)return void(0,o.toast)({color:"warning",content:t.state.json["fbmpublic-000050"]});if(e.data.des&&e.data.pklist)return 1==e.data.pklist.length?void t.props.openTo(e.data.url,{status:"browse",appcode:e.data.appcode,pagecode:e.data.pagecode,id:e.data.pklist[0],pagekey:"link",n:t.state.json["fbmpublic-000049"],backflag:"noback"}):(o.cacheTools.set(e.data.cachekey,e.data.pklist),void t.props.openTo(e.data.url,{status:"browse",appcode:e.data.appcode,pagecode:e.data.pagecode,n:t.state.json["fbmpublic-000049"],scene:t.appcode+a}))}}})},t.voucherLinkBill=function(){var e,t=this;(e=o.cacheTools.get("checkedData"))&&e.length>0&&(0,o.ajax)({url:this.API_URL.voucherlink,data:{operatingLogVO:e,pageCode:this.pageId},success:function(e){var a=e.success,r=e.data;if(a)if(r){var o=r[t.tableId].rows;if(1==o.length){var n=o[0];t.props.pushTo("/card",{status:"browse",id:n.values[t.primaryId]&&n.values[t.primaryId].value,scene:"linksce",pagecode:t.cardPageCode})}else t.props.table.setAllTableData(t.tableId,r[t.tableId])}else t.props.table.setAllTableData(t.tableId,{rows:[]})}})},t.linkNtb=function(e){var t=this;if(!this.fullAggClassName)return void(0,o.toast)({color:"warning",content:this.state.json["fbmpublic-000014"]+this.fullAggClassName});var a=this.API_URL.linkNtb?this.API_URL.linkNtb:"/nccloud/fbm/pub/fbmntblinkplan.do";(0,o.ajax)({url:a,data:{pk:e,className:this.fullAggClassName,modulecode:this.modulecode},success:function(e){var a=e.data;a.hint?(0,o.toast)({color:"warning",content:e.data.hint}):t.setState({showNtbDetail:!0,ntbdata:a})}})},t.linkCredit=function(e){this.setState({showCCCBalance:e,showCCC:!0})},t.linkInnerAccount=function(e){this.setState({showInneraccpk:e,showInnerAccount:!0})},t.linkBankBalance=function(e){this.setState({showOriginalData:e,showOriginalBalance:!0})},t.linkQuotaApply=function(e){var t=n.quotaapplyConst,a=t.urlCard,r=t.appcode,o=t.pagecodeCard;c(this.props,{url:a,appcode:r,pagecode:o,id:e,billtype:"36HQ"})},t.linkUnitQuota=function(e){var t=n.unitquotaConst,a=t.urlList,r=t.appcode,o=t.pagecodeList;c(this.props,{url:a,appcode:r,pagecode:o,id:e,srcPage:this.pageId,billtype:"36US"})},t.linkReceAndPaybill=function(e,t,a,r){var n=this;(0,o.ajax)({url:this.API_URL.linkReceAndPaybill,data:{pk:e,extParam:{vbillno:t,pk_register:a,pk_group:r}},success:function(e){var t=e.data;if(t){var a=t.pk_outerbill_h,r=t.billtype,o={status:"browse",id:a};u(n.props,r,o)}}})},t.linkBuyerDiscount=function(e){var t=n.buyerdiscount,a=(t.urlList,t.urlCard),r=t.appcode,o=(t.pagecodeList,t.pagecodeCard);c(this.props,{url:a,appcode:r,pagecode:o,id:e,billtype:"36HV"})},t.linkUpquota=function(e){var t=n.upquotaConst,a=t.urlList,r=(t.urlCard,t.appcode),o=t.pagecodeList;t.pagecodeCard;c(this.props,{url:a,appcode:r,pagecode:o,id:e,billtype:"36HS"})},t.linkInterestList=function(e){var t=this,a=n.interestListConst,r=a.urlList,i=a.urlCard,s=a.appcode,l=a.pagecodeList,u=a.pagecodeCard;"36650BCIA"===this.appcode?(0,o.ajax)({url:"/nccloud/bond/interestadjust/queryinterestlistpk.do",data:{pk:e},success:function(e){var a=e.data;a?c(t.props,{url:i,appcode:s,pagecode:u,id:a,billtype:""}):(0,o.toast)({color:"warning",content:t.state.json["fbmpublic-000051"]})}}):(0,o.ajax)({url:"/nccloud/bond/calcintst/interestlistlink.do",data:{pks:[e]},success:function(a){var o=a.data,n=l,p=r,d=o.table&&o.table.rows;1==d.length&&(p=i,n=u,e=d[0].values.pk_bondinterestslist&&d[0].values.pk_bondinterestslist.value),c(t.props,{url:p,appcode:s,pagecode:n,id:e,billtype:""})}})},t.linkLinkSDBook=function(e){this.props.openTo("/fbm/fbm/counterbook/main/index.html#/card",{billtype:"36HM",appcode:"36181BL",pagecode:"36181BL_C01",status:"browse",scene:"linksce",sence:"4",id:e})},t.SDBookLinkBill=function(e){var t=this;if(e){var a=e.split(","),r={pageCode:this.pageId,pks:a,extParam:{srcPage:this.props.getUrlParam("srcPage")}},n=this.API_URL.linkSence?this.API_URL.linkSence:this.API_URL.queryListPks;(0,o.ajax)({url:n,data:r,success:function(e){var a=e.data;if(a){var r=a.grid,o=(a.head,r&&r[t.tableId].rows);if(o.length>1||t.linkAtList)t.props.table.setAllTableData(t.tableId,a.grid[t.tableId]),t.setState({activeTab:t.props.listTabs});else if(1==o.length){var n=r[t.tableId].rows[0].values[t.primaryId].value;t.props.pushTo("/card",{status:"browse",id:n,scene:"linksce",showBackBtn:!1,pagecode:t.cardPageCode})}}}})}},t.doCommission=function(e){var t=this,a=this,r={pks:[e.form.getFormItemsValue(this.formId,"pk_quotaapply").value],pagecode:this.pageId,isCardOpt:!0};(0,o.ajax)({url:this.API_URL.commission,data:r,success:function(e){var r=e.data;r.errMsg?(0,o.toast)({color:"error",content:r.errMsg}):r.billCard.head&&t.props.form.setAllFormValue(i({},a.formId,e.data.billCard.head[a.formId])),t.buttonVisible(t.props)}})},t.doUnCommission=function(e){var t=this,a=this,r={pks:[e.form.getFormItemsValue(this.formId,"pk_quotaapply").value],pagecode:this.pageId,isCardOpt:!0};(0,o.ajax)({url:this.API_URL.uncommission,data:r,success:function(e){var r=e.data;r.errMsg?(0,o.toast)({color:"error",content:r.errMsg}):r.billCard.head&&t.props.form.setAllFormValue(i({},a.formId,e.data.billCard.head[a.formId])),t.buttonVisible(t.props)}})},t.clsRowno=function(e){var t=this.props.cardTable.getAllRows(e),a=void 0;a=t[0].values.banklineno&&t[0].values.banklineno.value?parseInt(t[0].values.banklineno.value):parseInt(0);t&&(t.forEach((function(e){e.values.banklineno&&e.values.banklineno.value&&a<parseInt(e.values.banklineno.value)&&(a=parseInt(e.values.banklineno.value))})),t.forEach((function(e){e.values.banklineno&&e.values.banklineno.value||(a=parseInt(a)+parseInt(10),e.values.banklineno.value=String(a))})))},t.signLink=function(e){this.props.openTo("/fbm/fbm/sign/main/index.html#/card",{billtype:"36H2",pagecode:"36180BS_CARD",appcode:"36180BS",status:"add",id:e})},t.signApplyLink=function(e){this.props.openTo("/fbm/cfbm/signapply/main/index.html#/card",{billtype:"36NA",pagecode:"36370IFBA_CARD",appcode:"36370IFBA",status:"browse",scene:"linksce",id:e})},t.SignBillLink=function(e){var t=this;s.call(this,{name:"querysignpk",data:{pks:[e]},success:function(e){var a=e.data;a?t.props.openTo("/fbm/fbm/sign/main/index.html#/card",{billtype:"36H2",pagecode:"36180BS_CARD",appcode:"36180BS",status:"browse",scene:"linksce",id:a}):(0,o.toast)({color:"warning",content:t.state.json["fbmpublic-000093"]})}})},t.acceptLink=function(e){this.props.openTo("/fbm/fbm/accept/main/index.html#/cardlinkq",{billtype:"36HD",pagecode:"36180BP_C02",appcode:"36180BP",status:"browse",scene:"linksce",id:e})},t.buyerDiscountLink=function(e){this.props.openTo("/fbm/fbm/buyerdiscount/main/index.html#/card",{billtype:"36HV",pagecode:"36180PDT_CARD",appcode:"36180PDT",status:"browse",scene:"linksce",id:e})},t.registerLink=function(e){this.props.openTo("/fbm/fbm/sign/main/index.html#/card",{billtype:"36H2",pagecode:"36180BS_CARD",appcode:"36180BS",status:"browse",scene:"linksce",id:e})},t.discountTransact=function(e,t){var a=this;(0,o.ajax)({url:this.API_URL.discounttransact,data:{pk:e},success:function(r){if(r.data){var o=void 0,n=void 0,i=void 0,s=void 0;t&&("36H6"==t.value?(o="/fbm/fbm/discount/main/index.html#/card",n="36H7",i="36180DT",s="36180DT_C01"):"36HL"==t.value&&(o="/fbm/pfbm/discountin/main/index.html#/card",n="36HJ",i="36200DT",s="36200DT_C01"),a.props.openTo(o,{billtype:n,pagecode:s,status:"add",appcode:i,id:e}))}}})};var o=a(1),n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(145));function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.MODULE_ID="",t.OPR_NAME={commit:"fbmpublic-000027",uncommit:"fbmpublic-000028",delete:"fbmpublic-000000",terminate:"fbmpublic-000002",unterminate:"fbmpublic-000029",save:"fbmpublic-000030",saveCommit:"fbmpublic-000031",change:"fbmpublic-000032",deleteVersion:"fbmpublic-000033",makeVoucher:"fbmpublic-000034",cancelVoucher:"fbmpublic-000035",interest:"fbmpublic-000036",uninterest:"fbmpublic-000037",disable:"fbmpublic-000038",cancelDisable:"fbmpublic-000039",sendCommand:"fbmpublic-000040",counterCommand:"fbmpublic-000041",return:"fbmpublic-000042",handle:"fbmpublic-000043",upquota:"fbmpublic-000044",downquota:"fbmpublic-000045",withdrawInstruction:"fbmpublic-000018",cancelImpawnBack:"fbmpublic-000046",withdrawImpawn:"fbmpublic-000047",confirmreceipt:"fbmpublic-000011",unconfirmreceipt:"fbmpublic-000048",commission:"fbmpublic-000079",uncommission:"fbmpublic-000080",destroy:"fbmpublic-000077",transform:"fbmpublic-000083",cancelTransform:"fbmpublic-000084",accept:"fbmpublic-000086",unaccept:"fbmpublic-000087",impawnBackSign:"fbmpublic-000088",tally:"fbmpublic-000089",cancelTally:"fbmpublic-000090"};function s(e){var t=e.name,a=e.data,r=e.success;e.error;(0,o.ajax)({url:this.API_URL[t],data:a,success:function(e){r&&r(e)}})}function l(e){this.setState({showApproveDetail:!0,billInfo:{billId:e}})}function c(e,t){var a=t.url,o=t.status,n=void 0===o?"browse":o,i=t.appcode,s=t.pagecode,l=t.scene,c=void 0===l?"linksce":l,u=t.id,p=function(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}(t,["url","status","appcode","pagecode","scene","id"]);e.openTo(a,r({status:n,appcode:i,pagecode:s,scene:c,id:u,sence:"4"},p))}var u=t.linkAppFromTmpub=function(e,t,a){(0,o.ajax)({url:"/nccloud/tmpub/pub/qrylinkinfo.do",data:{billTypeOrTransType:t},success:function(t){var r=t.data;if(r){r.url;var o=r.appCode,n=r.linkPageCode;a&&0!=Object.keys(a).length||(a={}),a.scene||(a.scene="linksce"),a.status||(a.status="browse"),a.appcode=o,a.pagecode=n,e.openTo(null,a)}}})}},6:function(e,t){e.exports=a},7:function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=function(e,t){var a=e[1]||"",r=e[3];if(!r)return a;if(t&&"function"==typeof btoa){var o=(i=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),n=r.sources.map((function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"}));return[a].concat(n).concat([o]).join("\n")}var i;return[a].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+a+"}":a})).join("")},t.i=function(e,a){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var n=this[o][0];"number"==typeof n&&(r[n]=!0)}for(o=0;o<e.length;o++){var i=e[o];"number"==typeof i[0]&&r[i[0]]||(a&&!i[2]?i[2]=a:a&&(i[2]="("+i[2]+") and ("+a+")"),t.push(i))}},t}},8:function(e,t,a){var r,o,n={},i=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=r.apply(this,arguments)),o}),s=function(e){var t={};return function(a){return void 0===t[a]&&(t[a]=e.call(this,a)),t[a]}}((function(e){return document.querySelector(e)})),l=null,c=0,u=[],p=a(143);function d(e,t){for(var a=0;a<e.length;a++){var r=e[a],o=n[r.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](r.parts[i]);for(;i<r.parts.length;i++)o.parts.push(g(r.parts[i],t))}else{var s=[];for(i=0;i<r.parts.length;i++)s.push(g(r.parts[i],t));n[r.id]={id:r.id,refs:1,parts:s}}}}function f(e,t){for(var a=[],r={},o=0;o<e.length;o++){var n=e[o],i=t.base?n[0]+t.base:n[0],s={css:n[1],media:n[2],sourceMap:n[3]};r[i]?r[i].parts.push(s):a.push(r[i]={id:i,parts:[s]})}return a}function m(e,t){var a=s(e.insertInto);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=u[u.length-1];if("top"===e.insertAt)r?r.nextSibling?a.insertBefore(t,r.nextSibling):a.appendChild(t):a.insertBefore(t,a.firstChild),u.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");a.appendChild(t)}}function C(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=u.indexOf(e);t>=0&&u.splice(t,1)}function _(e){var t=document.createElement("style");return e.attrs.type="text/css",h(t,e.attrs),m(e,t),t}function h(e,t){Object.keys(t).forEach((function(a){e.setAttribute(a,t[a])}))}function g(e,t){var a,r,o,n;if(t.transform&&e.css){if(!(n=t.transform(e.css)))return function(){};e.css=n}if(t.singleton){var i=c++;a=l||(l=_(t)),r=v.bind(null,a,i,!1),o=v.bind(null,a,i,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(a=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",h(t,e.attrs),m(e,t),t}(t),r=D.bind(null,a,t),o=function(){C(a),a.href&&URL.revokeObjectURL(a.href)}):(a=_(t),r=A.bind(null,a),o=function(){C(a)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=i()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var a=f(e,t);return d(a,t),function(e){for(var r=[],o=0;o<a.length;o++){var i=a[o];(s=n[i.id]).refs--,r.push(s)}e&&d(f(e,t),t);for(o=0;o<r.length;o++){var s;if(0===(s=r[o]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete n[s.id]}}}};var b,R=(b=[],function(e,t){return b[e]=t,b.filter(Boolean).join("\n")});function v(e,t,a,r){var o=a?"":r.css;if(e.styleSheet)e.styleSheet.cssText=R(t,o);else{var n=document.createTextNode(o),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(n,i[t]):e.appendChild(n)}}function A(e,t){var a=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}function D(e,t,a){var r=a.css,o=a.sourceMap,n=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||n)&&(r=p(r)),o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var i=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(i),s&&URL.revokeObjectURL(s)}},9:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.URL_PARAM={ID:"id",STATE:"status",SCENE:"scene",TBB_LINK:"pk_ntbparadimvo",LINK_ID:"linkId",PK_SRC:"pk_src"},t.sagaField={frozen:"saga_frozen",gtxid:"saga_gtxid",btxid:"saga_btxid",status:"saga_status"},t.sagaFrozenEnum={frozen:1,unfrozen:0},t.sagaStateEnum={success:0,fail:1},t.SCENE={DEFAULT:"defaultsce",APPROVE:"approvesce",LINK:"linksce",FIP:"fip",OTHER:"othersce"},t.LINKTYPE={NORMAL:"NORMAL",BILL_REVIEW:"BILL_REVIEW"},t.LINK_PARAM={ARAP:{FLAG:"flag",FLAG_VALUE:"ftsLinkArap"}},t.MODULE_INFO={TMPUB:"tmpub",TMPUB_NUM:"3601"},t.COMMON_URL={ELECSIGNPRINTCHECK:"/nccloud/tmpub/pub/elecsignprintcheck.do"},t.cache={rateinfo:"rateinfo",iserrtoast:"iserrtoast"},t.SPLIT_TBBCTRLTYPE="_ctrltype_",t.tbbwarntype={flexibility:"0",inflexibility:"1",warning:"2"}}})}));
//# sourceMappingURL=index.f11b8e7b.js.map
/*nLUs9w1bSgs4PRDgiPcM4N6jIcV2wybUTGQej3OKi2U3RGS2fPH/6CRxPJY+N3fN*/