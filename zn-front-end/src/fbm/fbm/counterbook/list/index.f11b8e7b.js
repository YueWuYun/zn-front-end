/*nLUs9w1bSgs4PRDgiPcM4N6jIcV2wybUTGQej3OKi2U3RGS2fPH/6CRxPJY+N3fN*/
/*! @ncctag {"date":"2020-4-17 12:37:53"} */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nc-lightapp-front"),require("react")):"function"==typeof define&&define.amd?define(["nc-lightapp-front","react"],t):"object"==typeof exports?exports["fbm/fbm/counterbook/list/index"]=t(require("nc-lightapp-front"),require("react")):e["fbm/fbm/counterbook/list/index"]=t(e["nc-lightapp-front"],e.React)}(window,(function(e,t){return function(e){var t={};function r(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="../../../../",r(r.s=461)}({1:function(t,r){t.exports=e},10:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.go2CardCheck=t.tbbWarnDialog=t.showTBBMsg=t.getTBBMsg=t.saveCommit=t.frozenBtnCtrl=t.showErrBtn=t.createCardWebSocket=t.createListWebSocket=t.setRate2NewRow=t.getCacheRateValue=t.bodyRateEditOnAfterEdit=t.addDefReferFilter=t.elecSignCardPrint=t.elecSignListPrint=t.createSimpleBillData=t.buildLightBodyAfterEditData=t.loadMultiLang=t.getMultiLangRes=t.appendMultiLangRes=t.saveMultiLangRes=t.getPropCache=t.setPropCache=t.showPagination=t.setDefOrg2AdvanceSrchArea=t.setDefOrg2ListSrchArea=t.setDefOrg2Form=t.hasDefaultOrg=t.isLinkScene=void 0;var a=r(1),n=r(9);function o(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function a(n,o){try{var i=t[n](o),l=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(l).then((function(e){a("next",e)}),(function(e){a("throw",e)}));e(l)}("next")}))}}var i,l,c=t.isLinkScene=function(e){var t=e.getUrlParam(n.URL_PARAM.SCENE);return!(!!!e.getUrlParam(n.URL_PARAM.TBB_LINK)&&t!=n.SCENE.LINK&&t!=n.SCENE.FIP)},u=t.hasDefaultOrg=function(e){return e&&e.context&&e.context&&e.context.pk_org},s=function(e,t,r){if(!(e&&e.search&&t&&r))return!1;try{var a=e.search.getSearchValByField(t,r);return!(!a||!a.value||!a.value.firstvalue&&!a.value.secondvalue)}catch(e){return!0}},d=(t.setDefOrg2Form=function(e,t,r){if(e&&t&&u(r)){var a=r.context,n=a.pk_org,o=a.org_Name,i=a.pk_org_v,l=a.org_v_Name;e.form.setFormItemsValue(t,{pk_org:{value:n,display:o},pk_org_v:{value:i,display:l}})}},t.setDefOrg2ListSrchArea=function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pk_org";if(e&&e.search&&t&&u(r)&&!c(e)&&!s(e,t,a)){var n=r.context,o=n.pk_org,i=n.org_Name,l={display:i,value:o};e.search.setSearchValByField(t,a,l)}},t.setDefOrg2AdvanceSrchArea=function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pk_org";if(e&&e.search&&t&&u(r)&&r.template&&!c(e)){var n=r.template,o=r.context,i=o.pk_org,l=o.org_Name;n[t].items.map((function(e){e.attrcode==a&&(e.initialvalue={display:l,value:i})}))}},t.showPagination=function(e,t,r){e&&t&&r&&!r.template&&(r.template[t].pagination=!c(e))},function(e){return e+"_extObj"}),f=(t.setPropCache=function(e,t,r,a){if(e&&t&&r){var n=d(t),o=e.ViewModel.getData(n);o||(o={}),o[r]=a,e.ViewModel.setData(n,o)}},t.getPropCache=function(e,t,r){if(!e||!t||!r)return null;var a=d(t),n=e.ViewModel.getData(a);return n&&n.hasOwnProperty(r)?n[r]:null},t.saveMultiLangRes=function(e,t){if(e&&t){e.ViewModel.setData("multiLang",t)}}),p=(t.appendMultiLangRes=function(e,t){if(e&&t){var r=p(e);r?Object.assign(r,t):f(e,t)}},t.getMultiLangRes=function(e){if(e){return e.ViewModel.getData("multiLang")}}),v=t.loadMultiLang=function(e,t){var r=p(e);return r&&r[t]||""},g=function(e,t){var r={},a=e.form.getAllFormValue(t);return a.areacode=t,r[t]=a,r},b=function(e,t){var r={rows:e.cardTable.getChangedRows(t),areaType:"table",areacode:t},a={};return a[t]=r,a},h=function(e,t,r,a,n,o,i,l){var c={head:g(e,r),pageid:t};return l?c.body=b(e,a):c.bodys=b(e,a),{areacode:a,attrcode:n,card:c,changedrows:o,index:i}},_=(t.buildLightBodyAfterEditData=function(e,t,r,a,n,o,i){var l=arguments.length>7&&void 0!==arguments[7]&&arguments[7];try{if(!(e&&t&&r&&a&&n&&o))throw new Error("参数缺失！");var c=h(e,t,r,a,n,o,i,l),u=c.card,s=u.body,d=u.bodys;if(l&&1==s[a].rows.length||!l&&1==d[a].rows.length)return c;var f=[],p=o[0].rowid;if(!(s=l?s[a]:d[a]))throw new Error("未获取到指定的表体["+a+"]!");var v=s,g=v.rows,b=!0,_=!1,y=void 0;try{for(var C,m=g[Symbol.iterator]();!(b=(C=m.next()).done);b=!0){var E=C.value,L=E.rowid;if(L&&L==p){f.push(E);break}}}catch(e){_=!0,y=e}finally{try{!b&&m.return&&m.return()}finally{if(_)throw y}}if(0==f.length)throw new Error("未找到修改的行!");return s.rows=f,c}catch(e){throw e}},function(e){if(!e||0==e.length)return null;var t=!0,r=!1,a=void 0;try{for(var n,o=e[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var i=n.value;if(i&&i.values&&0!=Object.keys(i.values).length){var l=i.values,c=Object.keys(l),u=!0,s=!1,d=void 0;try{for(var f,p=c[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var v=f.value,g=l[v];g&&0!=Object.keys(g).length&&g.value||delete l[v]}}catch(e){s=!0,d=e}finally{try{!u&&p.return&&p.return()}finally{if(s)throw d}}}}}catch(e){r=!0,a=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw a}}}),y=function(e,t,r,a,n){var o=e.createMasterChildDataSimple(t,r,a),i=o.head,l=o.body;return n&&(_(i[r].rows),_(l[a].rows)),o},C=function(e,t,r,a,n){var o=e.createExtCardDataSimple(t,r,a),i=o.head,l=o.bodys;if(n){_(i[r].rows);var c=!0,u=!1,s=void 0;try{for(var d,f=a[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var p=d.value;_(l[p].rows)}}catch(e){u=!0,s=e}finally{try{!c&&f.return&&f.return()}finally{if(u)throw s}}}return o},m=t.createSimpleBillData=function(e,t,r,a){var n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!(e&&t&&r&&a))return null;var o=!!Array.isArray(a)&&a.length>1,i=Array.isArray(a)?a:[a];return o?C(e,t,r,i,n):y(e,t,r,i[0],n)},E=(t.elecSignListPrint=function(e,t){var r=t.url,n=t.offical,o=void 0!==n&&n,i=t.appCode,l=t.nodeKey,c=t.tableCode,u=t.field_id,s=t.field_billno,d=void 0===s?"vbillno":s,f=t.getOrgFunc,p=t.validateFunc;if(!(r&&i&&c&&u&&d))throw new Error("参数缺失！");var g=e.table.getCheckedRows(c);if(null!=g&&0!=g.length){var b=[],h=[],_=!0,y=!1,C=void 0;try{for(var m,E=g[Symbol.iterator]();!(_=(m=E.next()).done);_=!0){var A=m.value,R=A&&A.data&&A.data.values&&A.data.values[u]&&A.data.values[u].value;if(R){var I=A&&A.data&&A.data.values&&A.data.values[d]&&A.data.values[d].value,S=A&&A.data&&A.data.values&&A.data.values.pk_org&&A.data.values.pk_org.value,O=A.index;f&&"function"==typeof f&&(S=f(A));var P=!0;if(p&&"function"==typeof p){var B=p(A);B&&(h.push(T(e,B,I,O)),P=!1)}P&&b.push({id:R,vbillno:I,pk_org:S,index:O})}}}catch(e){y=!0,C=e}finally{try{!_&&E.return&&E.return()}finally{if(y)throw C}}L(e,{url:r,offical:o,appCode:i,nodeKey:l,detail:b,errMessArr:h})}else(0,a.toast)({color:"warning",content:v(e,"3601-000010")})},t.elecSignCardPrint=function(e,t){var r=t.url,a=t.offical,n=void 0!==a&&a,o=t.appCode,i=t.nodeKey,l=t.headCode,c=t.field_id,u=t.field_billno,s=void 0===u?"vbillno":u,d=t.getOrgFunc,f=t.validateFunc;if(!(r&&o&&l&&c&&s))throw new Error("参数缺失！");var p=e.form.getFormItemsValue(l,c).value,v=e.form.getFormItemsValue(l,s).value,g=e.form.getFormItemsValue(l,"pk_org").value;d&&"function"==typeof d&&(g=d());var b=[],h=!0;if(f&&"function"==typeof f){var _=f();_&&(b.push(T(e,_,v,0)),h=!1)}L(e,{url:r,offical:n,appCode:o,nodeKey:i,detail:h?[{id:p,vbillno:v,pk_org:g}]:null,errMessArr:b})},function(e,t){t&&0!=t.length&&(1==t.length?(0,a.toast)({duration:"infinity",color:"danger",content:t[0],hasCloseBtn:!0}):(0,a.toast)({duration:"infinity",color:"danger",TextArr:[v(e,"3601-000000"),v(e,"3601-000001"),v(e,"3601-000021")],groupOperation:!0,groupOperationMsg:t}))}),L=function(e,t){var r=t.url,o=t.offical,i=t.appCode,l=t.nodeKey,c=t.detail,u=t.errMessArr,s=void 0===u?[]:u;if(!(s&&s.length>0)||c&&0!=c.length){var d={offical:o,detail:c};(0,a.ajax)({url:n.COMMON_URL.ELECSIGNPRINTCHECK,data:d,success:function(t){var n=t.data,c=n.passPKs,u=n.passInfos,d=n.unPassInfos;if(s.length>0||d&&d.length>0){var f=!0,p=!1,v=void 0;try{for(var g,b=d[Symbol.iterator]();!(f=(g=b.next()).done);f=!0){var h=g.value,_=h.vbillno,y=h.mess,C=h.index,m=T(e,y,_,C);s.push(m)}}catch(e){p=!0,v=e}finally{try{!f&&b.return&&b.return()}finally{if(p)throw v}}E(e,s)}if(c&&c.length>0&&u&&u.length>0){var L={offical:o,detail:u};(0,a.print)("pdf",r,{nodekey:l,appcode:i,oids:c,userjson:JSON.stringify(L)})}}})}else E(e,s)},T=function(e,t,r,a){return v(e,"3601-000008")+r+v(e,"3601-000009")+t||""},A=(t.addDefReferFilter=function(e,t){var r=t.headCode,a=t.areaCode,n=t.meta,o=t.orgField,i=t.getOrgFunc;if(a&&n&&(r||o||i)){var l=Array.isArray(a)?a:[a],c=!0,u=!1,s=void 0;try{for(var d,f=l[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){n[d.value].items.map((function(t){(t.attrcode.startsWith("vdef")||t.attrcode.startsWith("vuserdef"))&&(t.queryCondition=function(){return{pk_org:i&&"function"==typeof i?i():(e.form.getFormItemsValue(r,o)||{}).value}})}))}}catch(e){u=!0,s=e}finally{try{!c&&f.return&&f.return()}finally{if(u)throw s}}}},t.bodyRateEditOnAfterEdit=function(e){var t=e.props,r=e.bodyCodes,o=e.rateInfo,i=e.datasource,l=e.olcRates,c=e.glcRates,u=e.gllcRates;if(t&&o&&i&&r){!function(e){var t=e.rateInfo,r=e.datasource;if(t&&r){a.cardCache.setDefData(n.cache.rateinfo,r,t);a.cardCache.getDefData(n.cache.rateinfo,r)}}({rateInfo:o,datasource:i}),Array.isArray(r)||(r=[r]);var s=o.olcRateEditable,d=o.glcRateEditable,f=o.gllcRateEditable,p=!0,v=!1,g=void 0;try{for(var b,h=r[Symbol.iterator]();!(p=(b=h.next()).done);p=!0){var _=b.value;l&&(Array.isArray(l)||(l=[l]),t.cardTable.setColEditableByKey(_,l,!s)),c&&(Array.isArray(c)||(c=[c]),t.cardTable.setColEditableByKey(_,c,!d)),u&&(Array.isArray(u)||(u=[u]),t.cardTable.setColEditableByKey(_,u,!f))}}catch(e){v=!0,g=e}finally{try{!p&&h.return&&h.return()}finally{if(v)throw g}}}},t.getCacheRateValue=function(e){var t=e.datasource;if(t){var r=a.cardCache.getDefData(n.cache.rateinfo,t);return r?{olcRate:r.olcRate,glcRate:r.glcRate,gllcRate:r.gllcRate}:null}}),R=(t.setRate2NewRow=function(e){var t=e.olcRates,r=e.glcRates,a=e.gllcRates,n=e.datasource,o=e.row;if(n){var i=A({datasource:n});if(i){var l=i.olcRate,c=i.glcRate,u=i.gllcRate;if(t){Array.isArray(t)||(t=[t]);var s=!0,d=!1,f=void 0;try{for(var p,v=t[Symbol.iterator]();!(s=(p=v.next()).done);s=!0){o[p.value]={value:l}}}catch(e){d=!0,f=e}finally{try{!s&&v.return&&v.return()}finally{if(d)throw f}}}if(r){Array.isArray(r)||(r=[r]);var g=!0,b=!1,h=void 0;try{for(var _,y=r[Symbol.iterator]();!(g=(_=y.next()).done);g=!0){o[_.value]={value:c}}}catch(e){b=!0,h=e}finally{try{!g&&y.return&&y.return()}finally{if(b)throw h}}}if(a){Array.isArray(a)||(a=[a]);var C=!0,m=!1,E=void 0;try{for(var L,T=a[Symbol.iterator]();!(C=(L=T.next()).done);C=!0){o[L.value]={value:u}}}catch(e){m=!0,E=e}finally{try{!C&&T.return&&T.return()}finally{if(m)throw E}}}}}},t.createListWebSocket=function(e,t){var r=t.tableAreaCode,a=t.tablePkName,n=t.billtype,o=t.dataSource,i=t.serverLocation;if(e&&r&&a&&n){var l=e.socket,c={tableAreaCode:r,billpkname:a,billtype:n,dataSource:o};return i&&(c.serverLocation=i),React.createElement("div",null,l.connectMesg(c))}},t.createCardWebSocket=function(e,t){var r=t.headBtnAreaCode,a=t.formAreaCode,n=t.billpkname,o=t.billtype,i=t.dataSource,l=t.serverLocation;if(e&&r&&a&&n&&o){var c=e.socket,u={headBtnAreaCode:r,formAreaCode:a,billtype:o,billpkname:n,dataSource:i};return l&&(u.serverLocation=l),React.createElement("div",null,c.connectMesg(u))}},t.showErrBtn=function(e,t){var r=t.headBtnCode,a=t.headAreaCode,o=t.fieldPK;t.datasource;if(e&&r&&a){var i=e.getUrlParam(n.URL_PARAM.STATE),l="0";try{l=e.form.getFormItemsValue(a,n.sagaField.status).value}catch(e){l="0"}var c="1"===l&&"browse"==i;e.button.toggleErrorStatus(r,{isError:c}),c&&R(e,{headAreaCode:a,fieldPK:o})}},function(e,t){var r=t.headAreaCode,a=t.fieldPK;if(r&&a){var o=e.getUrlParam("status"),i=e.form.getFormItemsValue(r,n.sagaField.gtxid),l=e.form.getFormItemsValue(r,a);"browse"==o&&i&&i.value&&l&&l.value&&e.socket.showToast({gtxid:i.value,billpk:l.value})}}),I=(t.frozenBtnCtrl=function(e,t){var r=t.btnCodes;if(e&&r){var a=Array.isArray(r)?r:[r];if("browse"==e.getUrlParam(n.URL_PARAM.STATE)){var o="1";try{o=e.form.getFormItemsValue(headAreaCode,n.sagaField.frozen).value}catch(e){o="1"}e.button.setButtonDisabled(a,"1"==o)}}},function(e,t){var r=t.pageCode,a=t.headCode,n=t.bodyCodeArr,o=t.saveFunc,i={},l={};if(0==n.length)i={pageid:r,model:{areacode:a,rows:e.form.getAllFormValue(a).rows,areaType:"form"}},l[a]="form";else{i=n.length>1?e.createExtCardData(r,a,n):e.createMasterChildData(r,a,n[0]);var c=!0,u=!1,s=void 0;try{for(var d,f=n[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){l[d.value]="cardTable"}}catch(e){u=!0,s=e}finally{try{!c&&f.return&&f.return()}finally{if(u)throw s}}}e.validateToSave(i,o,l,"")}),S=(i=o(regeneratorRuntime.mark((function e(t,r){var a,n=r.pageCode,o=r.headCode,i=r.bodyCodeArr,l=r.saveValidate,c=r.processSaveData;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.form.isCheckNow(o)){e.next=2;break}return e.abrupt("return",null);case 2:if(!(i&&i.length>0)||t.cardTable.checkTableRequired()){e.next=4;break}return e.abrupt("return",null);case 4:if(!l||"function"!=typeof l){e.next=7;break}if(l()){e.next=7;break}return e.abrupt("return",null);case 7:if(a=m(t,n,o,i),!c||"function"!=typeof c){e.next=12;break}return e.next=11,c(a);case 11:a=e.sent;case 12:return e.abrupt("return",{data:JSON.stringify(a),pageCode:n});case 13:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)}),O=(t.saveCommit=(l=o(regeneratorRuntime.mark((function e(t,r){var n,o,i=r.pageCode,l=r.headCode,c=r.bodyCode,u=r.url,s=r.assign,d=r.showAssignFunc,f=r.updateViewFunc,p=r.saveValidate,v=r.processSaveData,g=r.extParam;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i&&l&&u&&d&&f){e.next=2;break}return e.abrupt("return");case 2:return g||(g={}),n=(r=c)?Array.isArray(r)?r:[r]:[],e.next=6,S(t,{pageCode:i,headCode:l,bodyCodeArr:n,saveValidate:p,processSaveData:v});case 6:if(o=e.sent){e.next=9;break}return e.abrupt("return");case 9:s&&(g.content=JSON.stringify(s)),o.extParam=g,I(t,{pageCode:i,headCode:l,bodyCodeArr:n,saveFunc:function(){(0,a.ajax)({url:u,data:o,success:function(e){var t=e.data.workflow;t&&"approveflow"==t||"workflow"==t?d(e):f(e)}})}});case 12:case"end":return e.stop()}var r}),e,this)}))),function(e,t){return l.apply(this,arguments)}),t.getTBBMsg=function(e){var t=e.row,r=e.msgfield;r||(r="ntbinfo");var a=(t&&t.values&&t.values[r]||{}).value;return a&&(t.values[r]={value:null,display:null}),a});t.showTBBMsg=function(e){var t=e.head,r=e.headCode,n=e.msgfield;if(!(t&&r&&t[r]&&t[r].rows&&0!=t[r].rows.length))return!1;var o=!1,i=t[r].rows[0],l=O({row:i,msgfield:n});return l&&((0,a.toast)({color:"warning",content:l}),o=!0),o},t.tbbWarnDialog=function(e,t){var r=t.ntbinfos,n=t.onConfirm;if(r&&0!=r.length){var o=[],i=r.length>1,l=1,c=i?[v(e,"3601-000019")+"["+r.length+"]"+v(e,"3601-000020")]:[],u=!0,s=!1,d=void 0;try{for(var f,p=r[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var g=f.value;if(null!=g){var b=g.pk,h=g.msg,_=g.vbillno;if(b&&_){o.push(b);var y="";i&&(y=l+". "+v(e,"3601-000018")+"["+_+"] "),c.push(React.createElement("li",null,y+h)),l++}}}}catch(e){s=!0,d=e}finally{try{!u&&p.return&&p.return()}finally{if(s)throw d}}0!=c.length&&(0,a.promptBox)({color:"warning",title:v(e,"3601-000017"),content:React.createElement("ul",null,c),beSureBtnClick:function(){n(o)}})}},t.go2CardCheck=function(e){var t=e.props,r=e.url,n=e.pk,o=e.ts,i=e.fieldPK,l=e.actionCode,c=e.permissionCode,u=e.checkSaga,s=void 0===u||u,d=e.checkTS,f=void 0===d||d,p=e.go2CardFunc;p&&"function"==typeof p&&(t&&r&&n&&o&&i||p(),(0,a.ajax)({url:r,data:{pk:n,ts:o,actionCode:l,permissionCode:c,fieldPK:i,checkSaga:s,checkTS:f},success:function(e){p()}}))}},2:function(e,r){e.exports=t},203:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.APP_CODE="36181BL",t.MODULE_NAME="fbm",t.MODULE_CODE="3618",t.BILL_TYPE="36HM";var a=t.BASE_URL="/nccloud/fbm/counterbook/";t.URL_LIST={QUERY:a+"counterbookquerylist.do",PAGE_QUERY:a+"counterbookquerypage.do",PRINT:a+"counterbookprint.do",CARD_QUERY:a+"counterbookquerycard.do"},t.LIST_PAGE_CODE="36181BL_L01",t.LIST_SEARCH_CODE="36181BL_L01_search",t.LIST_TABLE_CODE="36181BL_L01_table",t.CARD_PAGE_CODE="36181BL_C01",t.CARD_FORM_CODE="36181BL_C01_h",t.CARD_TABLE_CODE="36181BL_C01_b",t.CARD_TABLE_CODE_browse="36181BL_C01_b_browse",t.LINK_CARD_PAGE_CODE="36181BL_LC01",t.PIRNTNODEKEY="36181BL",t.DATASOURCE="fbm.fbm.counterbook.dataSource",t.BTN_GROUP={PRINT:"Print",PRINTGROUP:"PrintGroup",OUTPUT:"OutPut",REFRESHE:"Refresh"},t.BTN_CARD={LINK_BILL:"LinkBill",PRINT:"Print",PRINTGROUP:"PrintGroup",OUTPUT:"OutPut",REFRESH:"Refresh",OPEN_INNER:"open_inner",UNOPEN_INNER:"unopen_inner"}},292:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bobyButtonClick=function(e,t,r,a,n,o){r};r(1)},293:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.searchButtonClick=function(e,t,r){var l=this,c=this.props.search.getQueryInfo(n.LIST_SEARCH_CODE),u=(this.state.activeKey,this.props.table.getTablePageInfo(n.LIST_TABLE_CODE));if(t&&t.conditions&&0!=t.conditions.length)o("searchVal",n.DATASOURCE,t);else if(!(t=i("searchVal",n.DATASOURCE)))return;var s={querycondition:t,pageInfo:u,pagecode:n.LIST_PAGE_CODE,queryAreaCode:n.LIST_SEARCH_CODE,oid:c.oid,querytype:"tree"};(0,a.ajax)({url:n.URL_LIST.QUERY,data:s,success:function(e){var t=e.success,i=e.data;if(t)if(i&&i.grid)if(l.props.table.setAllTableData(n.LIST_TABLE_CODE,i.grid[n.LIST_TABLE_CODE]),o(n.LIST_TABLE_CODE,n.DATASOURCE,i.grid),n.BTN_GROUP.REFRESHE==r)(0,a.toast)({color:"success",content:l.props.MutiInit.getIntl("36181BL")&&l.props.MutiInit.getIntl("36181BL").get("36181BL-000001")});else{var c=l.props.MutiInit.getIntl("36181BL")&&l.props.MutiInit.getIntl("36181BL").get("36181BL-000007"),u=l.props.MutiInit.getIntl("36181BL")&&l.props.MutiInit.getIntl("36181BL").get("36181BL-000008"),s=l.props.MutiInit.getIntl("36181BL")&&l.props.MutiInit.getIntl("36181BL").get("36181BL-000009"),d=c+u+i.grid[n.LIST_TABLE_CODE].pageInfo.total+s;(0,a.toast)({color:"success",content:d})}else l.props.table.setAllTableData(n.LIST_TABLE_CODE,{rows:[]}),(0,a.toast)({color:"warning",content:l.props.MutiInit.getIntl("36181BL")&&l.props.MutiInit.getIntl("36181BL").get("36181BL-000005")})}})};var a=r(1),n=r(203),o=a.cardCache.setDefData,i=a.cardCache.getDefData},461:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,n,o,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),l=r(1),c=r(2),u=(o=c)&&o.__esModule?o:{default:o},s=r(203),d=r(462);l.base.NCTabsControl,l.base.NCFormControl;var f=l.base.NCTabs,p=(l.base.NCAffix,l.base.NCDiv),v=(l.high.ExcelImport,l.high.NCUploader),g=(f.NCTabPane,l.cardCache.setDefData,l.cardCache.getDefData),b=(a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.call(r),r.primaryId="pk_register",r.tableId=s.LIST_TABLE_CODE,r.pageId=s.LIST_PAGE_CODE,r.API_URL={commit:s.URL_LIST.COMMIT,uncommit:s.URL_LIST.UN_COMMIT},r.state={activeKey:-1,numvalues:{}},d.initTemplate.call(r,e),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){var e=g("numvalues",s.DATASOURCE),t=g("activeKey",s.DATASOURCE);e&&t&&this.setState({numvalues:e,activeKey:t}),d.buttonVisiable.call(this,this.props)}},{key:"render",value:function(){var e=this,t=this.props,r=(t.form,t.button,t.table),a=(t.insertTable,t.search),n=t.modal,o=t.BillHeadInfo,i=r.createSimpleTable,l=a.NCCreateSearch,c=(n.createModal,this.state),f=c.showUploader,g=c.target,b=(c.numvalues,c.showSearchCom,c.showTableCom,c.selectedPKS,c.billId),h=c.billno,_=o.createBillHeadInfo;return u.default.createElement("div",{className:"nc-bill-list"},u.default.createElement(p,{areaCode:p.config.HEADER,className:"nc-bill-header-area"},u.default.createElement("div",{className:"header-title-search-area"},_({title:this.props.MutiInit.getIntl("36181BL")&&this.props.MutiInit.getIntl("36181BL").get("36181BL-000003"),initShowBackBtn:!1})),u.default.createElement("div",{className:"header-button-area"},this.props.button.createButtonApp({area:"list_head",buttonLimit:7,onButtonClick:d.buttonClick.bind(this),popContainer:document.querySelector(".header-button-area")}))),u.default.createElement("div",{className:"nc-bill-search-area"},l(s.LIST_SEARCH_CODE,{clickSearchBtn:d.searchButtonClick.bind(this),showAdvBtn:!0,defaultConditionsNum:5,addAdvTabs:this.addAdvTabs})),u.default.createElement("div",{className:"nc-bill-table-area"},i(s.LIST_TABLE_CODE,{dataSource:s.DATASOURCE,pkname:"pk_register",handlePageInfoChange:d.pageInfoClick.bind(this),showCheck:!0,showIndex:!0,onRowDoubleClick:this.doubleClick.bind(this),onSelected:d.buttonVisiable.bind(this),onSelectedAll:d.buttonVisiable.bind(this),componentInitFinished:function(){d.buttonVisiable.call(e,e.props)}})),u.default.createElement("div",{className:"nc-faith-demo-div2"},f&&u.default.createElement(v,{billId:b,target:g,placement:"bottom",billNo:h,onHide:this.onHideUploader})))}}]),t}(c.Component),n=function(){var e=this;this.onHideUploader=function(){e.setState({showUploader:!1})},this.navChangeFun=function(t,r,a){return e.state.activeKey!=t?void e.setState({activeKey:t},(function(){d.searchButtonClick.call(e)})):void e.setState({activeKey:t})},this.doubleClick=function(e,t,r,a){r.pushTo("/card",{status:"browse",id:e.pk_register&&e.pk_register.value,pagecode:s.CARD_PAGE_CODE})}},a);b=(0,l.createPage)({billinfo:{billtype:"grid",pagecode:s.LIST_PAGE_CODE},mutiLangCode:s.APP_CODE})(b),t.default=b},462:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.searchButtonClick=t.initTemplate=t.pageInfoClick=t.buttonVisiable=t.buttonClick=t.bobyButtonClick=void 0;var a=r(292),n=r(463),o=r(464),i=r(465),l=r(293),c=r(466);t.bobyButtonClick=a.bobyButtonClick,t.buttonClick=n.buttonClick,t.buttonVisiable=o.buttonVisiable,t.pageInfoClick=i.pageInfoClick,t.initTemplate=c.initTemplate,t.searchButtonClick=l.searchButtonClick},463:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buttonClick=function(e,t){switch(t){case n.BTN_GROUP.LINK_BILL:doLinkBill.call(this,e);break;case n.BTN_GROUP.PRINT:c.call(this,e);break;case n.BTN_GROUP.OUTPUT:l.call(this,e);break;case n.BTN_GROUP.REFRESHE:i.call(this,n.BTN_GROUP.REFRESHE)}};var a=r(1),n=r(203),o=r(293);function i(e){o.searchButtonClick.call(this,"","",e)}function l(e){var t=e.table.getCheckedRows(n.LIST_TABLE_CODE);if(t&&0!=t.length){var r=[];t.forEach((function(e){r.push(e.data.values.pk_register.value)})),(0,a.output)({url:n.URL_LIST.PRINT,data:{nodekey:n.PIRNTNODEKEY,oids:r,outputType:"output"}})}else(0,a.toast)({color:"warning",content:this.props.MutiInit.getIntl("36181BL")&&this.props.MutiInit.getIntl("36181BL").get("36181BL-000004")})}function c(e){var t=e.table.getCheckedRows(n.LIST_TABLE_CODE);if(t&&0!=t.length){var r=[];t.forEach((function(e){r.push(e.data.values.pk_register.value)})),(0,a.print)("pdf",n.URL_LIST.PRINT,{nodekey:n.PIRNTNODEKEY,oids:r})}else(0,a.toast)({color:"warning",content:this.props.MutiInit.getIntl("36181BL")&&this.props.MutiInit.getIntl("36181BL").get("36181BL-000004")})}},464:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buttonVisiable=function(e){var t=e.table.getCheckedRows(a.LIST_TABLE_CODE);t&&0!=t.length?e.button.setButtonDisabled([a.BTN_GROUP.PRINT,a.BTN_GROUP.PRINTGROUP,a.BTN_GROUP.OUTPUT],!1):e.button.setButtonDisabled([a.BTN_GROUP.PRINT,a.BTN_GROUP.PRINTGROUP,a.BTN_GROUP.OUTPUT],!0)};var a=r(203)},465:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pageInfoClick=function(e,t,r){if(!r||0==r.length)return;var o={pks:r};(0,a.ajax)({url:n.URL_LIST.PAGE_QUERY,data:o,success:function(t){var r=t.success,a=t.data;r&&(a.grid?e.table.setAllTableData(n.LIST_TABLE_CODE,a.grid[n.LIST_TABLE_CODE]):e.table.setAllTableData(n.LIST_TABLE_CODE,{rows:[]}))}})};var a=r(1),n=r(203)},466:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initTemplate=function(e){var t=this,r=(0,o.excelImportconfig)(e,"fbm",a.BILL_TYPE,!0,"",{appcode:a.APP_CODE,pagecode:a.LIST_PAGE_CODE}),l=e.getSearchParam("c")||e.getUrlParam("c");e.createUIDom({pagecode:a.LIST_PAGE_CODE,appcode:l},(function(o){if(o){if(!o.template[a.LIST_TABLE_CODE])return;if(o.button&&(e.button.setButtons(o.button),e.button.setUploadConfig("Import",r)),o.template){var l=o.template;(0,n.setDefOrg2AdvanceSrchArea)(e,a.LIST_SEARCH_CODE,o),l=i.call(t,e,l,[]),e.meta.setMeta(l),(0,n.setDefOrg2ListSrchArea)(e,a.LIST_SEARCH_CODE,o)}o.context}}))};var a=r(203),n=r(10),o=(r(292),r(1));o.cardCache.setDefData;function i(e,t,r){var n=e.getUrlParam("c")||this.props.getSearchParam("c");return t[a.LIST_SEARCH_CODE].items.map((function(e){"pk_org"===e.attrcode&&(e.isMultiSelectedEnabled=!0,e.queryCondition=function(){return{funcode:n,TreeRefActionExt:"nccloud.web.tmpub.filter.FinanceOrgPermissionFilter"}})})),t[a.LIST_TABLE_CODE].items=t[a.LIST_TABLE_CODE].items.map((function(t,r){return"fbmbillno"==t.attrcode&&(t.render=function(t,r,n){return React.createElement("a",{style:{cursor:"pointer"},onClick:function(){e.pushTo("/card",{status:"browse",id:r.pk_register&&r.pk_register.value,pagecode:a.CARD_PAGE_CODE})}},r.fbmbillno&&r.fbmbillno.value)}),t})),t}},9:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.URL_PARAM={ID:"id",STATE:"status",SCENE:"scene",TBB_LINK:"pk_ntbparadimvo",LINK_ID:"linkId",PK_SRC:"pk_src"},t.sagaField={frozen:"saga_frozen",gtxid:"saga_gtxid",btxid:"saga_btxid",status:"saga_status"},t.sagaFrozenEnum={frozen:1,unfrozen:0},t.sagaStateEnum={success:0,fail:1},t.SCENE={DEFAULT:"defaultsce",APPROVE:"approvesce",LINK:"linksce",FIP:"fip",OTHER:"othersce"},t.LINKTYPE={NORMAL:"NORMAL",BILL_REVIEW:"BILL_REVIEW"},t.LINK_PARAM={ARAP:{FLAG:"flag",FLAG_VALUE:"ftsLinkArap"}},t.MODULE_INFO={TMPUB:"tmpub",TMPUB_NUM:"3601"},t.COMMON_URL={ELECSIGNPRINTCHECK:"/nccloud/tmpub/pub/elecsignprintcheck.do"},t.cache={rateinfo:"rateinfo",iserrtoast:"iserrtoast"},t.SPLIT_TBBCTRLTYPE="_ctrltype_",t.tbbwarntype={flexibility:"0",inflexibility:"1",warning:"2"}}})}));
//# sourceMappingURL=index.f11b8e7b.js.map
/*nLUs9w1bSgs4PRDgiPcM4N6jIcV2wybUTGQej3OKi2U3RGS2fPH/6CRxPJY+N3fN*/