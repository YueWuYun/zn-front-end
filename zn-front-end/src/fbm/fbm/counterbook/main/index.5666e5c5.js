/*qez+91vLaUxbYd0O4ym9GtyKacIIH0CrRMVEVf6ugGwChhFXe3Czas3bBmBoGYGp*/
/*! @ncctag {"date":"2020-4-17 10:18:24"} */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nc-lightapp-front"),require("react")):"function"==typeof define&&define.amd?define(["nc-lightapp-front","react"],t):"object"==typeof exports?exports["fbm/fbm/counterbook/main/index"]=t(require("nc-lightapp-front"),require("react")):e["fbm/fbm/counterbook/main/index"]=t(e["nc-lightapp-front"],e.React)}(window,(function(e,t){return function(e){var t={};function a(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(r,o,function(t){return e[t]}.bind(null,o));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="../../../../",a(a.s=738)}({1:function(t,a){t.exports=e},10:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.go2CardCheck=t.tbbWarnDialog=t.showTBBMsg=t.getTBBMsg=t.saveCommit=t.frozenBtnCtrl=t.showErrBtn=t.createCardWebSocket=t.createListWebSocket=t.setRate2NewRow=t.getCacheRateValue=t.bodyRateEditOnAfterEdit=t.addDefReferFilter=t.elecSignCardPrint=t.elecSignListPrint=t.createSimpleBillData=t.buildLightBodyAfterEditData=t.loadMultiLang=t.getMultiLangRes=t.appendMultiLangRes=t.saveMultiLangRes=t.getPropCache=t.setPropCache=t.showPagination=t.setDefOrg2AdvanceSrchArea=t.setDefOrg2ListSrchArea=t.setDefOrg2Form=t.hasDefaultOrg=t.isLinkScene=void 0;var r=a(1),o=a(9);function n(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,a){return function r(o,n){try{var i=t[o](n),l=i.value}catch(e){return void a(e)}if(!i.done)return Promise.resolve(l).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(l)}("next")}))}}var i,l,c=t.isLinkScene=function(e){var t=e.getUrlParam(o.URL_PARAM.SCENE);return!(!!!e.getUrlParam(o.URL_PARAM.TBB_LINK)&&t!=o.SCENE.LINK&&t!=o.SCENE.FIP)},s=t.hasDefaultOrg=function(e){return e&&e.context&&e.context&&e.context.pk_org},u=function(e,t,a){if(!(e&&e.search&&t&&a))return!1;try{var r=e.search.getSearchValByField(t,a);return!(!r||!r.value||!r.value.firstvalue&&!r.value.secondvalue)}catch(e){return!0}},d=(t.setDefOrg2Form=function(e,t,a){if(e&&t&&s(a)){var r=a.context,o=r.pk_org,n=r.org_Name,i=r.pk_org_v,l=r.org_v_Name;e.form.setFormItemsValue(t,{pk_org:{value:o,display:n},pk_org_v:{value:i,display:l}})}},t.setDefOrg2ListSrchArea=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pk_org";if(e&&e.search&&t&&s(a)&&!c(e)&&!u(e,t,r)){var o=a.context,n=o.pk_org,i=o.org_Name,l={display:i,value:n};e.search.setSearchValByField(t,r,l)}},t.setDefOrg2AdvanceSrchArea=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pk_org";if(e&&e.search&&t&&s(a)&&a.template&&!c(e)){var o=a.template,n=a.context,i=n.pk_org,l=n.org_Name;o[t].items.map((function(e){e.attrcode==r&&(e.initialvalue={display:l,value:i})}))}},t.showPagination=function(e,t,a){e&&t&&a&&!a.template&&(a.template[t].pagination=!c(e))},function(e){return e+"_extObj"}),f=(t.setPropCache=function(e,t,a,r){if(e&&t&&a){var o=d(t),n=e.ViewModel.getData(o);n||(n={}),n[a]=r,e.ViewModel.setData(o,n)}},t.getPropCache=function(e,t,a){if(!e||!t||!a)return null;var r=d(t),o=e.ViewModel.getData(r);return o&&o.hasOwnProperty(a)?o[a]:null},t.saveMultiLangRes=function(e,t){if(e&&t){e.ViewModel.setData("multiLang",t)}}),p=(t.appendMultiLangRes=function(e,t){if(e&&t){var a=p(e);a?Object.assign(a,t):f(e,t)}},t.getMultiLangRes=function(e){if(e){return e.ViewModel.getData("multiLang")}}),b=t.loadMultiLang=function(e,t){var a=p(e);return a&&a[t]||""},v=function(e,t){var a={},r=e.form.getAllFormValue(t);return r.areacode=t,a[t]=r,a},h=function(e,t){var a={rows:e.cardTable.getChangedRows(t),areaType:"table",areacode:t},r={};return r[t]=a,r},_=function(e,t,a,r,o,n,i,l){var c={head:v(e,a),pageid:t};return l?c.body=h(e,r):c.bodys=h(e,r),{areacode:r,attrcode:o,card:c,changedrows:n,index:i}},g=(t.buildLightBodyAfterEditData=function(e,t,a,r,o,n,i){var l=arguments.length>7&&void 0!==arguments[7]&&arguments[7];try{if(!(e&&t&&a&&r&&o&&n))throw new Error("参数缺失！");var c=_(e,t,a,r,o,n,i,l),s=c.card,u=s.body,d=s.bodys;if(l&&1==u[r].rows.length||!l&&1==d[r].rows.length)return c;var f=[],p=n[0].rowid;if(!(u=l?u[r]:d[r]))throw new Error("未获取到指定的表体["+r+"]!");var b=u,v=b.rows,h=!0,g=!1,C=void 0;try{for(var E,m=v[Symbol.iterator]();!(h=(E=m.next()).done);h=!0){var y=E.value,R=y.rowid;if(R&&R==p){f.push(y);break}}}catch(e){g=!0,C=e}finally{try{!h&&m.return&&m.return()}finally{if(g)throw C}}if(0==f.length)throw new Error("未找到修改的行!");return u.rows=f,c}catch(e){throw e}},function(e){if(!e||0==e.length)return null;var t=!0,a=!1,r=void 0;try{for(var o,n=e[Symbol.iterator]();!(t=(o=n.next()).done);t=!0){var i=o.value;if(i&&i.values&&0!=Object.keys(i.values).length){var l=i.values,c=Object.keys(l),s=!0,u=!1,d=void 0;try{for(var f,p=c[Symbol.iterator]();!(s=(f=p.next()).done);s=!0){var b=f.value,v=l[b];v&&0!=Object.keys(v).length&&v.value||delete l[b]}}catch(e){u=!0,d=e}finally{try{!s&&p.return&&p.return()}finally{if(u)throw d}}}}}catch(e){a=!0,r=e}finally{try{!t&&n.return&&n.return()}finally{if(a)throw r}}}),C=function(e,t,a,r,o){var n=e.createMasterChildDataSimple(t,a,r),i=n.head,l=n.body;return o&&(g(i[a].rows),g(l[r].rows)),n},E=function(e,t,a,r,o){var n=e.createExtCardDataSimple(t,a,r),i=n.head,l=n.bodys;if(o){g(i[a].rows);var c=!0,s=!1,u=void 0;try{for(var d,f=r[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var p=d.value;g(l[p].rows)}}catch(e){s=!0,u=e}finally{try{!c&&f.return&&f.return()}finally{if(s)throw u}}}return n},m=t.createSimpleBillData=function(e,t,a,r){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!(e&&t&&a&&r))return null;var n=!!Array.isArray(r)&&r.length>1,i=Array.isArray(r)?r:[r];return n?E(e,t,a,i,o):C(e,t,a,i[0],o)},y=(t.elecSignListPrint=function(e,t){var a=t.url,o=t.offical,n=void 0!==o&&o,i=t.appCode,l=t.nodeKey,c=t.tableCode,s=t.field_id,u=t.field_billno,d=void 0===u?"vbillno":u,f=t.getOrgFunc,p=t.validateFunc;if(!(a&&i&&c&&s&&d))throw new Error("参数缺失！");var v=e.table.getCheckedRows(c);if(null!=v&&0!=v.length){var h=[],_=[],g=!0,C=!1,E=void 0;try{for(var m,y=v[Symbol.iterator]();!(g=(m=y.next()).done);g=!0){var T=m.value,O=T&&T.data&&T.data.values&&T.data.values[s]&&T.data.values[s].value;if(O){var D=T&&T.data&&T.data.values&&T.data.values[d]&&T.data.values[d].value,L=T&&T.data&&T.data.values&&T.data.values.pk_org&&T.data.values.pk_org.value,I=T.index;f&&"function"==typeof f&&(L=f(T));var P=!0;if(p&&"function"==typeof p){var B=p(T);B&&(_.push(A(e,B,D,I)),P=!1)}P&&h.push({id:O,vbillno:D,pk_org:L,index:I})}}}catch(e){C=!0,E=e}finally{try{!g&&y.return&&y.return()}finally{if(C)throw E}}R(e,{url:a,offical:n,appCode:i,nodeKey:l,detail:h,errMessArr:_})}else(0,r.toast)({color:"warning",content:b(e,"3601-000010")})},t.elecSignCardPrint=function(e,t){var a=t.url,r=t.offical,o=void 0!==r&&r,n=t.appCode,i=t.nodeKey,l=t.headCode,c=t.field_id,s=t.field_billno,u=void 0===s?"vbillno":s,d=t.getOrgFunc,f=t.validateFunc;if(!(a&&n&&l&&c&&u))throw new Error("参数缺失！");var p=e.form.getFormItemsValue(l,c).value,b=e.form.getFormItemsValue(l,u).value,v=e.form.getFormItemsValue(l,"pk_org").value;d&&"function"==typeof d&&(v=d());var h=[],_=!0;if(f&&"function"==typeof f){var g=f();g&&(h.push(A(e,g,b,0)),_=!1)}R(e,{url:a,offical:o,appCode:n,nodeKey:i,detail:_?[{id:p,vbillno:b,pk_org:v}]:null,errMessArr:h})},function(e,t){t&&0!=t.length&&(1==t.length?(0,r.toast)({duration:"infinity",color:"danger",content:t[0],hasCloseBtn:!0}):(0,r.toast)({duration:"infinity",color:"danger",TextArr:[b(e,"3601-000000"),b(e,"3601-000001"),b(e,"3601-000021")],groupOperation:!0,groupOperationMsg:t}))}),R=function(e,t){var a=t.url,n=t.offical,i=t.appCode,l=t.nodeKey,c=t.detail,s=t.errMessArr,u=void 0===s?[]:s;if(!(u&&u.length>0)||c&&0!=c.length){var d={offical:n,detail:c};(0,r.ajax)({url:o.COMMON_URL.ELECSIGNPRINTCHECK,data:d,success:function(t){var o=t.data,c=o.passPKs,s=o.passInfos,d=o.unPassInfos;if(u.length>0||d&&d.length>0){var f=!0,p=!1,b=void 0;try{for(var v,h=d[Symbol.iterator]();!(f=(v=h.next()).done);f=!0){var _=v.value,g=_.vbillno,C=_.mess,E=_.index,m=A(e,C,g,E);u.push(m)}}catch(e){p=!0,b=e}finally{try{!f&&h.return&&h.return()}finally{if(p)throw b}}y(e,u)}if(c&&c.length>0&&s&&s.length>0){var R={offical:n,detail:s};(0,r.print)("pdf",a,{nodekey:l,appcode:i,oids:c,userjson:JSON.stringify(R)})}}})}else y(e,u)},A=function(e,t,a,r){return b(e,"3601-000008")+a+b(e,"3601-000009")+t||""},T=(t.addDefReferFilter=function(e,t){var a=t.headCode,r=t.areaCode,o=t.meta,n=t.orgField,i=t.getOrgFunc;if(r&&o&&(a||n||i)){var l=Array.isArray(r)?r:[r],c=!0,s=!1,u=void 0;try{for(var d,f=l[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){o[d.value].items.map((function(t){(t.attrcode.startsWith("vdef")||t.attrcode.startsWith("vuserdef"))&&(t.queryCondition=function(){return{pk_org:i&&"function"==typeof i?i():(e.form.getFormItemsValue(a,n)||{}).value}})}))}}catch(e){s=!0,u=e}finally{try{!c&&f.return&&f.return()}finally{if(s)throw u}}}},t.bodyRateEditOnAfterEdit=function(e){var t=e.props,a=e.bodyCodes,n=e.rateInfo,i=e.datasource,l=e.olcRates,c=e.glcRates,s=e.gllcRates;if(t&&n&&i&&a){!function(e){var t=e.rateInfo,a=e.datasource;if(t&&a){r.cardCache.setDefData(o.cache.rateinfo,a,t);r.cardCache.getDefData(o.cache.rateinfo,a)}}({rateInfo:n,datasource:i}),Array.isArray(a)||(a=[a]);var u=n.olcRateEditable,d=n.glcRateEditable,f=n.gllcRateEditable,p=!0,b=!1,v=void 0;try{for(var h,_=a[Symbol.iterator]();!(p=(h=_.next()).done);p=!0){var g=h.value;l&&(Array.isArray(l)||(l=[l]),t.cardTable.setColEditableByKey(g,l,!u)),c&&(Array.isArray(c)||(c=[c]),t.cardTable.setColEditableByKey(g,c,!d)),s&&(Array.isArray(s)||(s=[s]),t.cardTable.setColEditableByKey(g,s,!f))}}catch(e){b=!0,v=e}finally{try{!p&&_.return&&_.return()}finally{if(b)throw v}}}},t.getCacheRateValue=function(e){var t=e.datasource;if(t){var a=r.cardCache.getDefData(o.cache.rateinfo,t);return a?{olcRate:a.olcRate,glcRate:a.glcRate,gllcRate:a.gllcRate}:null}}),O=(t.setRate2NewRow=function(e){var t=e.olcRates,a=e.glcRates,r=e.gllcRates,o=e.datasource,n=e.row;if(o){var i=T({datasource:o});if(i){var l=i.olcRate,c=i.glcRate,s=i.gllcRate;if(t){Array.isArray(t)||(t=[t]);var u=!0,d=!1,f=void 0;try{for(var p,b=t[Symbol.iterator]();!(u=(p=b.next()).done);u=!0){n[p.value]={value:l}}}catch(e){d=!0,f=e}finally{try{!u&&b.return&&b.return()}finally{if(d)throw f}}}if(a){Array.isArray(a)||(a=[a]);var v=!0,h=!1,_=void 0;try{for(var g,C=a[Symbol.iterator]();!(v=(g=C.next()).done);v=!0){n[g.value]={value:c}}}catch(e){h=!0,_=e}finally{try{!v&&C.return&&C.return()}finally{if(h)throw _}}}if(r){Array.isArray(r)||(r=[r]);var E=!0,m=!1,y=void 0;try{for(var R,A=r[Symbol.iterator]();!(E=(R=A.next()).done);E=!0){n[R.value]={value:s}}}catch(e){m=!0,y=e}finally{try{!E&&A.return&&A.return()}finally{if(m)throw y}}}}}},t.createListWebSocket=function(e,t){var a=t.tableAreaCode,r=t.tablePkName,o=t.billtype,n=t.dataSource,i=t.serverLocation;if(e&&a&&r&&o){var l=e.socket,c={tableAreaCode:a,billpkname:r,billtype:o,dataSource:n};return i&&(c.serverLocation=i),React.createElement("div",null,l.connectMesg(c))}},t.createCardWebSocket=function(e,t){var a=t.headBtnAreaCode,r=t.formAreaCode,o=t.billpkname,n=t.billtype,i=t.dataSource,l=t.serverLocation;if(e&&a&&r&&o&&n){var c=e.socket,s={headBtnAreaCode:a,formAreaCode:r,billtype:n,billpkname:o,dataSource:i};return l&&(s.serverLocation=l),React.createElement("div",null,c.connectMesg(s))}},t.showErrBtn=function(e,t){var a=t.headBtnCode,r=t.headAreaCode,n=t.fieldPK;t.datasource;if(e&&a&&r){var i=e.getUrlParam(o.URL_PARAM.STATE),l="0";try{l=e.form.getFormItemsValue(r,o.sagaField.status).value}catch(e){l="0"}var c="1"===l&&"browse"==i;e.button.toggleErrorStatus(a,{isError:c}),c&&O(e,{headAreaCode:r,fieldPK:n})}},function(e,t){var a=t.headAreaCode,r=t.fieldPK;if(a&&r){var n=e.getUrlParam("status"),i=e.form.getFormItemsValue(a,o.sagaField.gtxid),l=e.form.getFormItemsValue(a,r);"browse"==n&&i&&i.value&&l&&l.value&&e.socket.showToast({gtxid:i.value,billpk:l.value})}}),D=(t.frozenBtnCtrl=function(e,t){var a=t.btnCodes;if(e&&a){var r=Array.isArray(a)?a:[a];if("browse"==e.getUrlParam(o.URL_PARAM.STATE)){var n="1";try{n=e.form.getFormItemsValue(headAreaCode,o.sagaField.frozen).value}catch(e){n="1"}e.button.setButtonDisabled(r,"1"==n)}}},function(e,t){var a=t.pageCode,r=t.headCode,o=t.bodyCodeArr,n=t.saveFunc,i={},l={};if(0==o.length)i={pageid:a,model:{areacode:r,rows:e.form.getAllFormValue(r).rows,areaType:"form"}},l[r]="form";else{i=o.length>1?e.createExtCardData(a,r,o):e.createMasterChildData(a,r,o[0]);var c=!0,s=!1,u=void 0;try{for(var d,f=o[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){l[d.value]="cardTable"}}catch(e){s=!0,u=e}finally{try{!c&&f.return&&f.return()}finally{if(s)throw u}}}e.validateToSave(i,n,l,"")}),L=(i=n(regeneratorRuntime.mark((function e(t,a){var r,o=a.pageCode,n=a.headCode,i=a.bodyCodeArr,l=a.saveValidate,c=a.processSaveData;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.form.isCheckNow(n)){e.next=2;break}return e.abrupt("return",null);case 2:if(!(i&&i.length>0)||t.cardTable.checkTableRequired()){e.next=4;break}return e.abrupt("return",null);case 4:if(!l||"function"!=typeof l){e.next=7;break}if(l()){e.next=7;break}return e.abrupt("return",null);case 7:if(r=m(t,o,n,i),!c||"function"!=typeof c){e.next=12;break}return e.next=11,c(r);case 11:r=e.sent;case 12:return e.abrupt("return",{data:JSON.stringify(r),pageCode:o});case 13:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)}),I=(t.saveCommit=(l=n(regeneratorRuntime.mark((function e(t,a){var o,n,i=a.pageCode,l=a.headCode,c=a.bodyCode,s=a.url,u=a.assign,d=a.showAssignFunc,f=a.updateViewFunc,p=a.saveValidate,b=a.processSaveData,v=a.extParam;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i&&l&&s&&d&&f){e.next=2;break}return e.abrupt("return");case 2:return v||(v={}),o=(a=c)?Array.isArray(a)?a:[a]:[],e.next=6,L(t,{pageCode:i,headCode:l,bodyCodeArr:o,saveValidate:p,processSaveData:b});case 6:if(n=e.sent){e.next=9;break}return e.abrupt("return");case 9:u&&(v.content=JSON.stringify(u)),n.extParam=v,D(t,{pageCode:i,headCode:l,bodyCodeArr:o,saveFunc:function(){(0,r.ajax)({url:s,data:n,success:function(e){var t=e.data.workflow;t&&"approveflow"==t||"workflow"==t?d(e):f(e)}})}});case 12:case"end":return e.stop()}var a}),e,this)}))),function(e,t){return l.apply(this,arguments)}),t.getTBBMsg=function(e){var t=e.row,a=e.msgfield;a||(a="ntbinfo");var r=(t&&t.values&&t.values[a]||{}).value;return r&&(t.values[a]={value:null,display:null}),r});t.showTBBMsg=function(e){var t=e.head,a=e.headCode,o=e.msgfield;if(!(t&&a&&t[a]&&t[a].rows&&0!=t[a].rows.length))return!1;var n=!1,i=t[a].rows[0],l=I({row:i,msgfield:o});return l&&((0,r.toast)({color:"warning",content:l}),n=!0),n},t.tbbWarnDialog=function(e,t){var a=t.ntbinfos,o=t.onConfirm;if(a&&0!=a.length){var n=[],i=a.length>1,l=1,c=i?[b(e,"3601-000019")+"["+a.length+"]"+b(e,"3601-000020")]:[],s=!0,u=!1,d=void 0;try{for(var f,p=a[Symbol.iterator]();!(s=(f=p.next()).done);s=!0){var v=f.value;if(null!=v){var h=v.pk,_=v.msg,g=v.vbillno;if(h&&g){n.push(h);var C="";i&&(C=l+". "+b(e,"3601-000018")+"["+g+"] "),c.push(React.createElement("li",null,C+_)),l++}}}}catch(e){u=!0,d=e}finally{try{!s&&p.return&&p.return()}finally{if(u)throw d}}0!=c.length&&(0,r.promptBox)({color:"warning",title:b(e,"3601-000017"),content:React.createElement("ul",null,c),beSureBtnClick:function(){o(n)}})}},t.go2CardCheck=function(e){var t=e.props,a=e.url,o=e.pk,n=e.ts,i=e.fieldPK,l=e.actionCode,c=e.permissionCode,s=e.checkSaga,u=void 0===s||s,d=e.checkTS,f=void 0===d||d,p=e.go2CardFunc;p&&"function"==typeof p&&(t&&a&&o&&n&&i||p(),(0,r.ajax)({url:a,data:{pk:o,ts:n,actionCode:l,permissionCode:c,fieldPK:i,checkSaga:u,checkTS:f},success:function(e){p()}}))}},2:function(e,a){e.exports=t},203:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.APP_CODE="36181BL",t.MODULE_NAME="fbm",t.MODULE_CODE="3618",t.BILL_TYPE="36HM";var r=t.BASE_URL="/nccloud/fbm/counterbook/";t.URL_LIST={QUERY:r+"counterbookquerylist.do",PAGE_QUERY:r+"counterbookquerypage.do",PRINT:r+"counterbookprint.do",CARD_QUERY:r+"counterbookquerycard.do"},t.LIST_PAGE_CODE="36181BL_L01",t.LIST_SEARCH_CODE="36181BL_L01_search",t.LIST_TABLE_CODE="36181BL_L01_table",t.CARD_PAGE_CODE="36181BL_C01",t.CARD_FORM_CODE="36181BL_C01_h",t.CARD_TABLE_CODE="36181BL_C01_b",t.CARD_TABLE_CODE_browse="36181BL_C01_b_browse",t.LINK_CARD_PAGE_CODE="36181BL_LC01",t.PIRNTNODEKEY="36181BL",t.DATASOURCE="fbm.fbm.counterbook.dataSource",t.BTN_GROUP={PRINT:"Print",PRINTGROUP:"PrintGroup",OUTPUT:"OutPut",REFRESHE:"Refresh"},t.BTN_CARD={LINK_BILL:"LinkBill",PRINT:"Print",PRINTGROUP:"PrintGroup",OUTPUT:"OutPut",REFRESH:"Refresh",OPEN_INNER:"open_inner",UNOPEN_INNER:"unopen_inner"}},210:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.linkVoucherApp=t.linkApp=void 0;var r=a(1),o=(a(215),a(9)),n=a(10),i=(t.linkApp=function(e,t,a){(0,r.ajax)({url:"/nccloud/tmpub/pub/qrylinkinfo.do",data:{billTypeOrTransType:t},success:function(t){var r=t.data;if(r){r.url;var n=r.appCode,i=r.linkPageCode;a&&0!=Object.keys(a).length||(a={}),a.scene||(a.scene=o.SCENE.LINK),a.status||(a.status="browse"),a.appcode=n,a.pagecode=i,e.openTo(null,a)}}})},"_LinkVouchar2019");t.linkVoucherApp=function(e,t,a,o,l,c,s){var u={pk_group:a,pk_org:o,relationID:t,pk_billtype:l};s&&s.freedef4&&(u={pk_group:a,pk_org:o,relationID:t,pk_billtype:l,freedef4:s.freedef4}),(0,r.ajax)({url:"/nccloud/tmpub/pub/qrylinkvoucherinfo.do",data:u,success:function(t){var a=t.success,o=t.data;if(a&&o&&o.src&&i==o.src&&o.pklist&&0!=o.pklist.length){var l=o.src,s=o.url,u=o.pklist,d=o.appcode,f=o.pagecode,p=o.srcAppCode,b=o.cachekey;o.des?1==u.length?e.openTo(s,{status:"browse",appcode:d,pagecode:f,id:u[0],n:(0,n.loadMultiLang)(e,"3601-000004"),pagekey:"link",backflag:"noback"}):(r.cacheTools.set(b,u),e.openTo(t.data.url,{status:"browse",appcode:d,pagecode:f,n:(0,n.loadMultiLang)(e,"3601-000004"),scene:d+l})):(r.cacheTools.set(p+l,u),e.openTo(t.data.url,{status:"browse",appcode:d,pagecode:f,scene:p+l}))}else(0,r.toast)({color:"warning",content:(0,n.loadMultiLang)(e,"3601-000002")+c+(0,n.loadMultiLang)(e,"3601-000003")})}})}},215:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.MODULE_H_FTS="FTS",t.MODULE_L_FTS="fts",t.VoucherDataConst={pagecode:"10170410_1017041001",appcode:"10170410",linkIdentification:"36300TP_LinkVouchar"}},231:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.doAjax=function(e,t,a){(0,r.ajax)({url:t,data:e,success:a.bind(this)})};var r=a(1)},289:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pageInfoClick=t.initTemplate=t.buttonVisiable=t.buttonClick=t.bobyButtonClick=t.beforeEvent=t.afterEvent=void 0;var r,o=a(456),n=a(457),i=a(290),l=(r=i)&&r.__esModule?r:{default:r},c=a(458),s=a(291),u=a(459),d=a(460);t.afterEvent=o.afterEvent,t.beforeEvent=n.beforeEvent,t.bobyButtonClick=l.default,t.buttonClick=c.buttonClick,t.buttonVisiable=s.buttonVisiable,t.initTemplate=d.initTemplate,t.pageInfoClick=u.pageInfoClick},290:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,o,n){switch(t){case r.BTN_CARD.OPEN_INNER:case r.BTN_CARD.UNOPEN_INNER:this.props.cardTable.toggleRowView(r.CARD_TABLE_CODE,o)}};a(1);var r=a(203)},291:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buttonVisiable=function(e){var t=[];for(var a in r.BTN_CARD)t.push(r.BTN_CARD[a]);e.button.setButtonVisible(t,!1);var o=e.getUrlParam("status"),n="browse"!==o;e.cardPagination.setCardPaginationVisible("cardPaginationBtn",!n),"browse"==o&&e.button.setButtonVisible(t,!0)};var r=a(203);r.BTN_CARD.LINK_BILL,r.BTN_CARD.PRINT,r.BTN_CARD.PRINTGROUP,r.BTN_CARD.OUTPUT,r.BTN_CARD.REFRESH},292:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bobyButtonClick=function(e,t,a,r,o,n){a};a(1)},293:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.searchButtonClick=function(e,t,a){var l=this,c=this.props.search.getQueryInfo(o.LIST_SEARCH_CODE),s=(this.state.activeKey,this.props.table.getTablePageInfo(o.LIST_TABLE_CODE));if(t&&t.conditions&&0!=t.conditions.length)n("searchVal",o.DATASOURCE,t);else if(!(t=i("searchVal",o.DATASOURCE)))return;var u={querycondition:t,pageInfo:s,pagecode:o.LIST_PAGE_CODE,queryAreaCode:o.LIST_SEARCH_CODE,oid:c.oid,querytype:"tree"};(0,r.ajax)({url:o.URL_LIST.QUERY,data:u,success:function(e){var t=e.success,i=e.data;if(t)if(i&&i.grid)if(l.props.table.setAllTableData(o.LIST_TABLE_CODE,i.grid[o.LIST_TABLE_CODE]),n(o.LIST_TABLE_CODE,o.DATASOURCE,i.grid),o.BTN_GROUP.REFRESHE==a)(0,r.toast)({color:"success",content:l.props.MutiInit.getIntl("36181BL")&&l.props.MutiInit.getIntl("36181BL").get("36181BL-000001")});else{var c=l.props.MutiInit.getIntl("36181BL")&&l.props.MutiInit.getIntl("36181BL").get("36181BL-000007"),s=l.props.MutiInit.getIntl("36181BL")&&l.props.MutiInit.getIntl("36181BL").get("36181BL-000008"),u=l.props.MutiInit.getIntl("36181BL")&&l.props.MutiInit.getIntl("36181BL").get("36181BL-000009"),d=c+s+i.grid[o.LIST_TABLE_CODE].pageInfo.total+u;(0,r.toast)({color:"success",content:d})}else l.props.table.setAllTableData(o.LIST_TABLE_CODE,{rows:[]}),(0,r.toast)({color:"warning",content:l.props.MutiInit.getIntl("36181BL")&&l.props.MutiInit.getIntl("36181BL").get("36181BL-000005")})}})};var r=a(1),o=a(203),n=r.cardCache.setDefData,i=r.cardCache.getDefData},455:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),n=a(1),i=a(2),l=(r=i)&&r.__esModule?r:{default:r},c=a(203),s=a(231),u=a(289);var d=n.base.NCDiv,f=n.base.NCAffix,p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onHideUploader=function(){a.setState({showUploader:!1})},a.closeApprove=function(){a.setState({approveshow:!1})},a.refresh=function(){var e,t=a.props.getUrlParam("id"),r=a.props.getUrlParam("status");if(!t)return a.props.form.EmptyAllFormValue(c.CARD_FORM_CODE),a.setState({isBlank:!0}),a.fbmbillno="",void a.toggleShow();var o={pk:t,pagecode:c.CARD_PAGE_CODE};if("add"==r)return a.props.form.EmptyAllFormValue(c.CARD_FORM_CODE),a.fbmbillno="",void a.toggleShow();e=c.URL_LIST.CARD_QUERY,s.doAjax.call(a,o,e,(function(e){if(e.data){if(e.data.card.head){this.props.form.setAllFormValue(function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}({},c.CARD_FORM_CODE,e.data.card.head[c.CARD_FORM_CODE]));var t=e.data.card.head[c.CARD_FORM_CODE].rows[0].values.fbmbillno;this.fbmbillno=t&&t.value}e.data.card.body&&this.props.cardTable.setTableData(c.CARD_TABLE_CODE,e.data.card.body[c.CARD_TABLE_CODE]),this.toggleShow()}}))},a.toggleShow=function(){var e=a.props.getUrlParam("status");if("browse"===e){a.props.form.setFormStatus(c.CARD_FORM_CODE,e);var t="linksce"==a.props.getUrlParam("scene");a.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!t,showBillCode:!0,billCode:a.fbmbillno})}u.buttonVisiable.call(a,a.props)},a.backList=function(){"linksce"==a.props.getUrlParam("scene")||"fip"==a.props.getUrlParam("scene")?a.props.pushTo("/list",{pagecode:c.LIST_PAGE_CODE,scene:"linksce"}):a.props.pushTo("/list",{pagecode:c.LIST_PAGE_CODE})},a.getTableHead=function(e,t){a.props.button.createButton;return l.default.createElement("div",{className:"shoulder-definition-area"},l.default.createElement("div",{className:"definition-icons"},a.props.cardTable.createBrowseIcons(t,{iconArr:["close","open","max"],maxDestAreaId:"finance-fts-commissionpayment-card"}),a.props.button.createButtonApp({area:"card_body",buttonLimit:7,onButtonClick:u.buttonClick.bind(a),popContainer:document.querySelector(".header-button-area")})))},a.pageId=c.CARD_PAGE_CODE,a.formId=c.CARD_FORM_CODE,a.primaryId="pk_register",a.API_URL={commit:c.URL_LIST.COMMIT,uncommit:c.URL_LIST.UN_COMMIT,makeVoucher:c.URL_LIST.VOUCHER,cancelVoucher:c.URL_LIST.VOUCHER_CANCEL},a.fbmbillno="",a.state={showUploader:!1,billId:"",billno:"",target:null,isBlank:!1,approveshow:!1,billtype:"",assignShow:!1,assignData:null},u.initTemplate.call(a,a.props),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){this.refresh()}},{key:"render",value:function(){var e=this,t=this.props,a=t.form,r=t.cardPagination,o=t.cardTable,n=this.props.BillHeadInfo.createBillHeadInfo,i=a.createForm,s=o.createCardTable,p=r.createCardPagination,b=this.props.button.getButtons();return l.default.createElement("div",{className:"nc-bill-card"},l.default.createElement(f,null,l.default.createElement(d,{areaCode:d.config.HEADER,className:"nc-bill-header-area"},l.default.createElement("div",{className:"header-title-search-area"},n({title:this.props.MutiInit.getIntl("36181BL")&&this.props.MutiInit.getIntl("36181BL").get("36181BL-000003"),backBtnClick:function(){e.backList()}})),l.default.createElement("div",{className:"header-button-area"},this.props.button.createButtonApp({area:"card_head",buttonLimit:7,onButtonClick:u.buttonClick.bind(this),popContainer:document.querySelector(".header-button-area")})),l.default.createElement("div",{className:"header-cardPagination-area",style:{float:"right"}},p({handlePageInfoChange:u.pageInfoClick.bind(this),dataSource:c.DATASOURCE})))),l.default.createElement("div",{className:"nc-bill-top-area"},l.default.createElement("div",{className:"nc-bill-form-area"},i(c.CARD_FORM_CODE,{expandArr:[c.CARD_TABLE_CODE,c.CARD_TABLE_CODE_browse],onAfterEvent:u.afterEvent.bind(this)}))),l.default.createElement("div",{className:"nc-bill-bottom-area"},l.default.createElement("div",{className:"nc-bill-table-area"},s(c.CARD_TABLE_CODE,{tableHead:this.getTableHead.bind(this,b,c.CARD_TABLE_CODE),onBeforeEvent:u.beforeEvent.bind(this),onAfterEvent:u.afterEvent.bind(this),showCheck:!0,showIndex:!0}))))}}]),t}(i.Component);p=(0,n.createPage)({billinfo:{billtype:"card",pagecode:c.CARD_PAGE_CODE,headcode:c.CARD_FORM_CODE},mutiLangCode:c.APP_CODE,orderOfHotKey:[c.CARD_FORM_CODE]})(p),t.default=p},456:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.afterEvent=function(e,t,a,o,n,i,l,c){console.log(a);e.createHeadAfterEventData(r.CARD_PAGE_CODE,t,[],t,a,o);a};var r=a(203);a(231),a(1)},457:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.beforeEvent=function(e,t,a,r,o,n,i,l){if(o instanceof Array&&o[0].newvalue.value==o[0].oldvalue.value)return;if(t==this.formId){a}this.tableId};a(203)},458:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buttonClick=function(e,t){switch(t){case o.BTN_CARD.LINK_BILL:l.call(this,e);break;case o.BTN_CARD.PRINT:c.call(this,e);break;case o.BTN_CARD.OUTPUT:s.call(this,e);break;case o.BTN_CARD.REFRESH:u.call(this,e,!0)}};var r=a(1),o=a(203),n=a(231),i=a(210);r.cardCache.getNextId,r.cardCache.getCurrentLastId,r.cardCache.deleteCacheById,r.cardCache.getCacheById,r.cardCache.updateCache,r.cardCache.addCache;function l(e){var t=e.cardTable.getCheckedRows(o.CARD_TABLE_CODE);if(1==t.length){var a=void 0,n=void 0;t.forEach((function(e){a=e.data.values.billtype,n=e.data.values.pk_bill}));var l={status:"browse",id:n&&n.value};(0,i.linkApp)(e,a&&a.value,l)}else(0,r.toast)({color:"warning",content:this.props.MutiInit.getIntl("36181BL")&&this.props.MutiInit.getIntl("36181BL").get("36181BL-000000")})}function c(e){var t=[e.getUrlParam("id")];(0,r.print)("pdf",o.URL_LIST.PRINT,{nodekey:o.PIRNTNODEKEY,oids:t})}function s(e){var t=[e.getUrlParam("id")];(0,r.output)({url:o.URL_LIST.PRINT,data:{nodekey:o.PIRNTNODEKEY,oids:t,outputType:"output"}})}function u(e,t){var a=e.getUrlParam("id");if(!a)return this.props.form.EmptyAllFormValue(o.CARD_FORM_CODE),this.setState({isBlank:!0}),void this.toggleShow();var i={pk:a};n.doAjax.call(this,i,o.URL_LIST.CARD_QUERY,(function(e){var a,n,i;e.data&&e.data.card&&(e.data.card.head&&(this.props.form.setAllFormValue((a={},n=o.CARD_FORM_CODE,i=e.data.card.head[o.CARD_FORM_CODE],n in a?Object.defineProperty(a,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[n]=i,a)),this.fbmbillno=e.data.card.head[o.CARD_FORM_CODE].rows[0].values.fbmbillno.value),e.data.card.body&&this.props.cardTable.setTableData(o.CARD_TABLE_CODE,e.data.card.body[o.CARD_TABLE_CODE]),this.toggleShow(),t&&(0,r.toast)({color:"success",content:this.props.MutiInit.getIntl("36181BL")&&this.props.MutiInit.getIntl("36181BL").get("36181BL-000001")}))}))}},459:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pageInfoClick=function(e,t){if(!t)return;var a=r.cardCache.getCacheById(t,o.DATASOURCE);if(e.setUrlParam({status:"browse",id:t}),a)a.head&&(this.props.form.setAllFormValue(i({},o.CARD_FORM_CODE,a.head[o.CARD_FORM_CODE])),this.fbmbillno=a.head[o.CARD_FORM_CODE].rows[0].values.fbmbillno.value),a.body&&this.props.cardTable.setTableData(o.CARD_TABLE_CODE,a.body[o.CARD_TABLE_CODE]),this.toggleShow();else{var l={pk:t};n.doAjax.call(this,l,o.URL_LIST.CARD_QUERY,(function(e){e.data.card?(e.data.card.head&&(this.props.form.setAllFormValue(i({},o.CARD_FORM_CODE,e.data.card.head[o.CARD_FORM_CODE])),this.fbmbillno=e.data.card.head[o.CARD_FORM_CODE].rows[0].values.fbmbillno.value),e.data.card.body&&this.props.cardTable.setTableData(o.CARD_TABLE_CODE,e.data.card.body[o.CARD_TABLE_CODE]),r.cardCache.updateCache("pk_register",t,e.data.card,o.CARD_FORM_CODE,o.DATASOURCE),this.props.setUrlParam({id:t}),this.toggleShow()):this.props.form.setAllFormValue(i({},o.CARD_FORM_CODE,{rows:[]}))}))}};var r=a(1),o=a(203),n=(a(291),a(231));function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},460:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initTemplate=function(e,t){var a=this,r=e.getSearchParam("c")||e.getUrlParam("c");e.createUIDom({pagecode:o.CARD_PAGE_CODE,appcode:r},(function(t){if(t){var r=e.getUrlParam("status");if(t.template){var n=t.template;if(n=c.call(a,e,n),e.meta.setMeta(n),"browse"===r)n[o.CARD_FORM_CODE].items.forEach((function(e){return"pk_org"===e.attrcode?(e.visible=!1,void(e.disabled=!1)):"pk_org_v"===e.attrcode?(e.visible=!0,void(e.disabled=!1)):void 0}))}if(t.button){var i=t.button;e.button.setButtons(i),l.buttonVisiable.call(a,e)}}}))};a(1);var r,o=a(203),n=a(290),i=(r=n)&&r.__esModule?r:{default:r},l=a(289);function c(e,t){var a=this;t[o.CARD_FORM_CODE].items.map((function(e){e.attrcode}));var r={attrcode:"opr",label:this.props.MutiInit.getIntl("36181BL")&&this.props.MutiInit.getIntl("36181BL").get("36181BL-000002"),fixed:"right",itemtype:"customer",visible:!0,width:"200px",render:function(t,r,n){var l=r.expandRowStatus?[o.BTN_CARD.UNOPEN_INNER]:[o.BTN_CARD.OPEN_INNER];return e.button.createOprationButton(l,{area:"card_body_inner",buttonLimit:3,onButtonClick:function(e,o){return i.default.call(a,e,o,t,r,n)}})}};return t[o.CARD_TABLE_CODE].items.push(r),t}},461:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,n,i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(1),c=a(2),s=(n=c)&&n.__esModule?n:{default:n},u=a(203),d=a(462);l.base.NCTabsControl,l.base.NCFormControl;var f=l.base.NCTabs,p=(l.base.NCAffix,l.base.NCDiv),b=(l.high.ExcelImport,l.high.NCUploader),v=(f.NCTabPane,l.cardCache.setDefData,l.cardCache.getDefData),h=(r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.call(a),a.primaryId="pk_register",a.tableId=u.LIST_TABLE_CODE,a.pageId=u.LIST_PAGE_CODE,a.API_URL={commit:u.URL_LIST.COMMIT,uncommit:u.URL_LIST.UN_COMMIT},a.state={activeKey:-1,numvalues:{}},d.initTemplate.call(a,e),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){var e=v("numvalues",u.DATASOURCE),t=v("activeKey",u.DATASOURCE);e&&t&&this.setState({numvalues:e,activeKey:t}),d.buttonVisiable.call(this,this.props)}},{key:"render",value:function(){var e=this,t=this.props,a=(t.form,t.button,t.table),r=(t.insertTable,t.search),o=t.modal,n=t.BillHeadInfo,i=a.createSimpleTable,l=r.NCCreateSearch,c=(o.createModal,this.state),f=c.showUploader,v=c.target,h=(c.numvalues,c.showSearchCom,c.showTableCom,c.selectedPKS,c.billId),_=c.billno,g=n.createBillHeadInfo;return s.default.createElement("div",{className:"nc-bill-list"},s.default.createElement(p,{areaCode:p.config.HEADER,className:"nc-bill-header-area"},s.default.createElement("div",{className:"header-title-search-area"},g({title:this.props.MutiInit.getIntl("36181BL")&&this.props.MutiInit.getIntl("36181BL").get("36181BL-000003"),initShowBackBtn:!1})),s.default.createElement("div",{className:"header-button-area"},this.props.button.createButtonApp({area:"list_head",buttonLimit:7,onButtonClick:d.buttonClick.bind(this),popContainer:document.querySelector(".header-button-area")}))),s.default.createElement("div",{className:"nc-bill-search-area"},l(u.LIST_SEARCH_CODE,{clickSearchBtn:d.searchButtonClick.bind(this),showAdvBtn:!0,defaultConditionsNum:5,addAdvTabs:this.addAdvTabs})),s.default.createElement("div",{className:"nc-bill-table-area"},i(u.LIST_TABLE_CODE,{dataSource:u.DATASOURCE,pkname:"pk_register",handlePageInfoChange:d.pageInfoClick.bind(this),showCheck:!0,showIndex:!0,onRowDoubleClick:this.doubleClick.bind(this),onSelected:d.buttonVisiable.bind(this),onSelectedAll:d.buttonVisiable.bind(this),componentInitFinished:function(){d.buttonVisiable.call(e,e.props)}})),s.default.createElement("div",{className:"nc-faith-demo-div2"},f&&s.default.createElement(b,{billId:h,target:v,placement:"bottom",billNo:_,onHide:this.onHideUploader})))}}]),t}(c.Component),o=function(){var e=this;this.onHideUploader=function(){e.setState({showUploader:!1})},this.navChangeFun=function(t,a,r){return e.state.activeKey!=t?void e.setState({activeKey:t},(function(){d.searchButtonClick.call(e)})):void e.setState({activeKey:t})},this.doubleClick=function(e,t,a,r){a.pushTo("/card",{status:"browse",id:e.pk_register&&e.pk_register.value,pagecode:u.CARD_PAGE_CODE})}},r);h=(0,l.createPage)({billinfo:{billtype:"grid",pagecode:u.LIST_PAGE_CODE},mutiLangCode:u.APP_CODE})(h),t.default=h},462:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.searchButtonClick=t.initTemplate=t.pageInfoClick=t.buttonVisiable=t.buttonClick=t.bobyButtonClick=void 0;var r=a(292),o=a(463),n=a(464),i=a(465),l=a(293),c=a(466);t.bobyButtonClick=r.bobyButtonClick,t.buttonClick=o.buttonClick,t.buttonVisiable=n.buttonVisiable,t.pageInfoClick=i.pageInfoClick,t.initTemplate=c.initTemplate,t.searchButtonClick=l.searchButtonClick},463:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buttonClick=function(e,t){switch(t){case o.BTN_GROUP.LINK_BILL:doLinkBill.call(this,e);break;case o.BTN_GROUP.PRINT:c.call(this,e);break;case o.BTN_GROUP.OUTPUT:l.call(this,e);break;case o.BTN_GROUP.REFRESHE:i.call(this,o.BTN_GROUP.REFRESHE)}};var r=a(1),o=a(203),n=a(293);function i(e){n.searchButtonClick.call(this,"","",e)}function l(e){var t=e.table.getCheckedRows(o.LIST_TABLE_CODE);if(t&&0!=t.length){var a=[];t.forEach((function(e){a.push(e.data.values.pk_register.value)})),(0,r.output)({url:o.URL_LIST.PRINT,data:{nodekey:o.PIRNTNODEKEY,oids:a,outputType:"output"}})}else(0,r.toast)({color:"warning",content:this.props.MutiInit.getIntl("36181BL")&&this.props.MutiInit.getIntl("36181BL").get("36181BL-000004")})}function c(e){var t=e.table.getCheckedRows(o.LIST_TABLE_CODE);if(t&&0!=t.length){var a=[];t.forEach((function(e){a.push(e.data.values.pk_register.value)})),(0,r.print)("pdf",o.URL_LIST.PRINT,{nodekey:o.PIRNTNODEKEY,oids:a})}else(0,r.toast)({color:"warning",content:this.props.MutiInit.getIntl("36181BL")&&this.props.MutiInit.getIntl("36181BL").get("36181BL-000004")})}},464:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buttonVisiable=function(e){var t=e.table.getCheckedRows(r.LIST_TABLE_CODE);t&&0!=t.length?e.button.setButtonDisabled([r.BTN_GROUP.PRINT,r.BTN_GROUP.PRINTGROUP,r.BTN_GROUP.OUTPUT],!1):e.button.setButtonDisabled([r.BTN_GROUP.PRINT,r.BTN_GROUP.PRINTGROUP,r.BTN_GROUP.OUTPUT],!0)};var r=a(203)},465:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pageInfoClick=function(e,t,a){if(!a||0==a.length)return;var n={pks:a};(0,r.ajax)({url:o.URL_LIST.PAGE_QUERY,data:n,success:function(t){var a=t.success,r=t.data;a&&(r.grid?e.table.setAllTableData(o.LIST_TABLE_CODE,r.grid[o.LIST_TABLE_CODE]):e.table.setAllTableData(o.LIST_TABLE_CODE,{rows:[]}))}})};var r=a(1),o=a(203)},466:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initTemplate=function(e){var t=this,a=(0,n.excelImportconfig)(e,"fbm",r.BILL_TYPE,!0,"",{appcode:r.APP_CODE,pagecode:r.LIST_PAGE_CODE}),l=e.getSearchParam("c")||e.getUrlParam("c");e.createUIDom({pagecode:r.LIST_PAGE_CODE,appcode:l},(function(n){if(n){if(!n.template[r.LIST_TABLE_CODE])return;if(n.button&&(e.button.setButtons(n.button),e.button.setUploadConfig("Import",a)),n.template){var l=n.template;(0,o.setDefOrg2AdvanceSrchArea)(e,r.LIST_SEARCH_CODE,n),l=i.call(t,e,l,[]),e.meta.setMeta(l),(0,o.setDefOrg2ListSrchArea)(e,r.LIST_SEARCH_CODE,n)}n.context}}))};var r=a(203),o=a(10),n=(a(292),a(1));n.cardCache.setDefData;function i(e,t,a){var o=e.getUrlParam("c")||this.props.getSearchParam("c");return t[r.LIST_SEARCH_CODE].items.map((function(e){"pk_org"===e.attrcode&&(e.isMultiSelectedEnabled=!0,e.queryCondition=function(){return{funcode:o,TreeRefActionExt:"nccloud.web.tmpub.filter.FinanceOrgPermissionFilter"}})})),t[r.LIST_TABLE_CODE].items=t[r.LIST_TABLE_CODE].items.map((function(t,a){return"fbmbillno"==t.attrcode&&(t.render=function(t,a,o){return React.createElement("a",{style:{cursor:"pointer"},onClick:function(){e.pushTo("/card",{status:"browse",id:a.pk_register&&a.pk_register.value,pagecode:r.CARD_PAGE_CODE})}},a.fbmbillno&&a.fbmbillno.value)}),t})),t}},738:function(e,t,a){"use strict";var r,o,n,i=a(1),l=a(739),c=(r=l)&&r.__esModule?r:{default:r};o=c.default,n="app",(0,i.RenderRouter)(o,n)},739:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=a(1),n=a(461),i=(r=n)&&r.__esModule?r:{default:r};var l=(0,o.asyncComponent)((function(){return Promise.resolve().then(a.t.bind(null,455,7))})),c=[{path:"/",component:i.default,exact:!0},{path:"/list",component:i.default},{path:"/card",component:l}];t.default=c},9:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.URL_PARAM={ID:"id",STATE:"status",SCENE:"scene",TBB_LINK:"pk_ntbparadimvo",LINK_ID:"linkId",PK_SRC:"pk_src"},t.sagaField={frozen:"saga_frozen",gtxid:"saga_gtxid",btxid:"saga_btxid",status:"saga_status"},t.sagaFrozenEnum={frozen:1,unfrozen:0},t.sagaStateEnum={success:0,fail:1},t.SCENE={DEFAULT:"defaultsce",APPROVE:"approvesce",LINK:"linksce",FIP:"fip",OTHER:"othersce"},t.LINKTYPE={NORMAL:"NORMAL",BILL_REVIEW:"BILL_REVIEW"},t.LINK_PARAM={ARAP:{FLAG:"flag",FLAG_VALUE:"ftsLinkArap"}},t.MODULE_INFO={TMPUB:"tmpub",TMPUB_NUM:"3601"},t.COMMON_URL={ELECSIGNPRINTCHECK:"/nccloud/tmpub/pub/elecsignprintcheck.do"},t.cache={rateinfo:"rateinfo",iserrtoast:"iserrtoast"},t.SPLIT_TBBCTRLTYPE="_ctrltype_",t.tbbwarntype={flexibility:"0",inflexibility:"1",warning:"2"}}})}));
//# sourceMappingURL=index.5666e5c5.js.map
/*qez+91vLaUxbYd0O4ym9GtyKacIIH0CrRMVEVf6ugGwChhFXe3Czas3bBmBoGYGp*/