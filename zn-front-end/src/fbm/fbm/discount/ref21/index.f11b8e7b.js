/*nLUs9w1bSgs4PRDgiPcM4N6jIcV2wybUTGQej3OKi2U3RGS2fPH/6CRxPJY+N3fN*/
/*! @ncctag {"date":"2020-4-17 12:37:53"} */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nc-lightapp-front"),require("react")):"function"==typeof define&&define.amd?define(["nc-lightapp-front","react"],t):"object"==typeof exports?exports["fbm/fbm/discount/ref21/index"]=t(require("nc-lightapp-front"),require("react")):e["fbm/fbm/discount/ref21/index"]=t(e["nc-lightapp-front"],e.React)}(window,(function(e,t){return function(e){var t={};function r(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="../../../../",r(r.s=477)}({1:function(t,r){t.exports=e},197:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.modelname="fbm",t.link_app_code="36180DTL",t.approve_app_code="36180DTA";var a=t.base_path="/nccloud/fbm/discount";t.button_limit=3,t.nodekey="36180DTP_02",t.module_id="36180DT",t.billtype="36H7",t.fullAggClassName="nc.vo.fbm.discount.AggDiscountVO",t.disableReason="failreason",t.tableName="fbm_discount",t.LIST={disabled_btn:["Delete","Copy","Commit","Uncommit","Attachment","Print","Output","SendInstruction","CancelInstruction","Disabled","CancelDisabled","ApproveDetail","Voucher","LinkBudgetPlan","LinkSDBook"],page_id:"36180DT_L01",page_id_link:"36180DTLINK_L01",search_id:"search_discount_01",table_id:"table_discount_01",head_btn_code:"list_head",primary_id:"pk_discount",billno:"vbillno",billstatus:"vbillstatus",tabStatus:{10:"paymentstatus,disableflag"},paymentstatus:"2,3",disableflag:"N"},t.CARD={primary_id:"pk_discount",billno:"vbillno",page_id:"36180DT_C01",page_id_link:"36180DTLINK_C01",page_id_approve:"36180DTA_C01",form_id:"form_browser",form_ticket:"form_ticket",reckoninfo:"reckoninfo",form_billinfo:"form_billinfo",form_clearinfo:"form_clearinfo",head_btn_code:"card_head",shoulder_btn_code:"card_body_head",body_btn_code:"card_body_inner",pknotetype_bank:"FBMTZ6E0000000000001",pknotetype_busi:"FBMTZ6E0000000000002",pknotetype_ebank:"FBMTZ6E0000000000003",pknotetype_ebusi:"FBMTZ6E0000000000004"},t.btns={allSaveGroup:["saveGroup"],addBtn:"Add",editBtn:"Edit",deleteBtn:"Delete",copyBtn:"Copy",cancelBtn:"Cancel",commitBtn:"Commit",uncommitBtn:"Uncommit",sendCommandBtn:"SendInstruction",takeCommandBtn:"CancelInstruction",disabledBtn:"Disabled",unDisabledBtn:"CancelDisabled",voucherBtn:"MakeVoucher",cancelVoucherBtn:"CancelVoucher",LinkGroup:"LinkGroup",LinkSDBookBtn:"LinkSDBook",linkApproveBtn:"ApproveDetail",linkBudgetPlanBtn:"LinkBudgetPlan",linkVoucherBtn:"Voucher",AttachmentBtn:"Attachment",PrintBtn:"Print",OutBtn:"Output",refreshBtn:"Refresh",CancelTransfer:"CancelTransfer"},t.DATA_SOURCE="tm.fbm.discount.datasource",t.searchCache={key:"fbm.fbm.discount.searchCache",dataSource:"fbm.fbm.discount.searchSpace"},t.API_URL={save:a+"/save.do",delete:a+"/delete.do",copy:a+"/copy.do",copyCard:a+"/copy.do",queryCard:a+"/querycard.do",queryList:a+"/querylist.do",queryListPks:a+"/querypage.do",commit:a+"/commit.do",saveCommit:a+"/savecommit.do",uncommit:a+"/uncommit.do",print:a+"/print.do",afterEvent:a+"/headafter.do",beforeEvent:a+"/headbefore.do",sendCommand:a+"/command.do",counterCommand:a+"/counterCommand.do",makeVoucher:a+"/voucher.do",cancelVoucher:a+"/cancelVoucher.do",disable:a+"/disable.do",cancelDisable:a+"/cancelDisable.do",headAfter:a+"/headafter.do",bodyAfter:a+"/bodyafter.do",ntbLink:a+"/ntbLink.do",linkVoucher:a+"/linkVoucher.do",voucherlink:a+"/voucherLink.do",transtocard:a+"/transtocard.do"},t.TRAN_CARD_PAGE_INFO={PAGE_CODE:"36180DT_TC01",HEAD_CODE:"form_browser",LEFT_CODE:"leftarea"},t.TRAN_LIST_PAGE_INFO={PAGE_CODE:"36180DT_LC01",SEARCH_CODE:"search_discount_01",HEAD_CODE:"table_discount_01",TABLE_CODE:"bodys",PK_BILL_B:"pk_srcbillrowid"},t.DISABLE_BTN_PARAM=[{key:"creditagreementid",btnName:"CreditAmount"}]},2:function(e,r){e.exports=t},205:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REF21_CONST=void 0;var a=r(232);t.REF21_CONST=a.REF21_CONST},209:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearTransferCache=t.rewriteTransferSrcBids=t.getDefData=t.setDefData=void 0;var a=r(1);t.setDefData=function(e,t,r){(0,a.cardCache.setDefData)(t,e,r)},t.getDefData=function(e,t){return(0,a.cardCache.getDefData)(t,e)},t.rewriteTransferSrcBids=function(e,t,r){if(r){var a=[];r.forEach((function(e){a.push(e.values[t].value)})),e.transferTable.setSavedTransferTableDataPk(a)}},t.clearTransferCache=function(e,t){e.transferTable.deleteCache(t)}},232:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.REF21_CONST={Ref21DataSource:"tm.fbm.fbm.discount.transfer",formId:"table_discount_01",tableId:"",transPageId:"36180DT_TL01",transCardId:"36180DT_TC01",searchId:"search_discount_01",destPageUrl:"/ref22",serachUrl:"/nccloud/fbm/discount/transquery.do",pk_head:"pk_register",pk_body:""}},250:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.btn_Controller=t.buttonClick=t.search_btnClick=void 0;var a=i(r(478)),n=i(r(479)),o=i(r(481));function i(e){return e&&e.__esModule?e:{default:e}}t.search_btnClick=o.default,t.buttonClick=n.default,t.btn_Controller=a.default},294:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=this;(0,a.ajax)({url:o.REF21_CONST.serachUrl,data:t,success:function(t){var a=t.success,i=t.data;a&&(i&&i.grid?r.props.transferTable.setTransferTableValue(o.REF21_CONST.formId,o.REF21_CONST.tableId,i.grid[o.REF21_CONST.formId],o.REF21_CONST.pk_head,o.REF21_CONST.pk_body):r.props.transferTable.setTransferTableValue(o.REF21_CONST.formId,o.REF21_CONST.tableId,[],o.REF21_CONST.pk_head,o.REF21_CONST.pk_body),n.btn_Controller.call(r,e))}})};var a=r(1),n=r(250),o=r(205)},295:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.search_afterEvent=t.referEvent=void 0;var a=o(r(482)),n=o(r(483));function o(e){return e&&e.__esModule?e:{default:e}}t.referEvent=a.default,t.search_afterEvent=n.default},477:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,n=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),o=r(1),i=r(2),c=(a=i)&&a.__esModule?a:{default:a},l=r(197),u=r(250),d=r(205),s=r(295),f=r(484);var _=o.base.NCAffix,p=o.base.NCDiv,b=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.clickReturn=function(){r.props.pushTo("/list",{})},r.handleClick=function(){},r.changeViewType=function(){r.props.meta.getMeta()[d.REF21_CONST.singleTableId]||f.initSingleTemplate.call(r,r.props),r.props.transferTable.changeViewType()},r.state={ntotalnum:0,ntotalmny:0,queryInfo:null},f.initTemplate.call(r,e),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"componentDidMount",value:function(){(0,this.props.transferTable.hasCache)(d.REF21_CONST.Ref21DataSource)||this.props.transferTable.setTransferTableValue(d.REF21_CONST.formId,d.REF21_CONST.tableId,[],d.REF21_CONST.pk_head,d.REF21_CONST.pk_body)}},{key:"render",value:function(){var e=this,t=this.props,r=t.transferTable,a=t.button,n=t.search,o=t.BillHeadInfo,i=n.NCCreateSearch,f=a.createButtonApp,b=r.createTransferTable,h=this.props.MutiInit.getIntl(l.module_id),m=o.createBillHeadInfo;return c.default.createElement("div",{id:"transferList",className:"nc-bill-list"},c.default.createElement(_,null,c.default.createElement(p,{areaCode:p.config.HEADER,className:"nc-bill-header-area"},c.default.createElement("div",{className:"header-title-search-area"},m({title:h&&h.get("36180DT-000013"),backBtnClick:this.clickReturn.bind(this)})),c.default.createElement("div",{className:"header-button-area"},f({area:"list_head",buttonLimit:8,onButtonClick:u.buttonClick.bind(this),popContainer:document.querySelector(".header-button-area")})))),c.default.createElement("div",{className:"nc-bill-search-area"},i(d.REF21_CONST.searchId,{clickSearchBtn:u.search_btnClick.bind(this),onAfterEvent:s.search_afterEvent.bind(this)})),c.default.createElement("div",{className:"nc-bill-transferTable-area"},b({tableType:"simple",headTableId:d.REF21_CONST.formId,transferBtnText:this.props.MutiInit.getIntl("36180DT")&&this.props.MutiInit.getIntl("36180DT").get("36180DT-000014"),containerSelector:"#transferList",onTransferBtnClick:function(t){e.props.pushTo(d.REF21_CONST.destPageUrl,{status:"add",srcbilltype:"ref22",pagecode:d.REF21_CONST.transCardId})},dataSource:d.REF21_CONST.Ref21DataSource})))}}]),t}(i.Component);b=(0,o.createPage)({mutiLangCode:l.module_id})(b),t.default=b},478:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){null==(0,a.getDefData)(n.REF21_CONST.Ref21DataSource,n.REF21_CONST.searchId)?this.props.button.setButtonDisabled(["Refresh"],!0):this.props.button.setButtonDisabled(["Refresh"],!1)};var a=r(209),n=r(205)},479:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){switch(t){case"Refresh":return o.default.call(this,e)}};var a,n=r(480),o=(a=n)&&a.__esModule?a:{default:a}},480:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,n.getDefData)(o.REF21_CONST.Ref21DataSource,o.REF21_CONST.searchId);c.default.call(this,e,t)};var a,n=r(209),o=r(205),i=r(294),c=(a=i)&&a.__esModule?a:{default:a}},481:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if(!1===this.props.search.getAllSearchData(o.REF21_CONST.searchId))return;var e=this.props.search.getQueryInfo(o.REF21_CONST.searchId);e.pageInfo=null,(0,n.setDefData)(o.REF21_CONST.Ref21DataSource,o.REF21_CONST.searchId,e),c.default.call(this,this.props,e)};var a,n=r(209),o=r(205),i=r(294),c=(a=i)&&a.__esModule?a:{default:a}},482:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=this;t[a.REF21_CONST.searchId].items.find((function(e){return"pk_org"===e.attrcode})).isMultiSelectedEnabled=!0,t[a.REF21_CONST.searchId].items.map((function(e){"pk_org"===e.attrcode&&(e.queryCondition=function(){return{funcode:r.props.getSearchParam("c"),TreeRefActionExt:"nccloud.web.tmpub.filter.FinanceOrgPermissionFilter"}}),"fbmbilltype"===e.attrcode&&(e.queryCondition=function(){return{GridRefActionExt:"nccloud.web.fbm.fbm.sign.filter.GatherFbmbilltypeRefModelFilter"}}),"hidepayunit"==e.attrcode&&(e.checkStrictly=!1,e.showHistory=!0,e.queryCondition=function(){return{pk_org:r.props.search.getSearchValByField(a.REF21_CONST.searchId,"pk_org").value.firstvalue,pk_group:r.props.search.getSearchValByField(a.REF21_CONST.searchId,"pk_group").value.firstvalue}})}))};var a=r(205)},483:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){};r(1),r(205)},484:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initSingleTemplate=t.initTemplate=void 0;var a=o(r(485)),n=o(r(486));function o(e){return e&&e.__esModule?e:{default:e}}t.initTemplate=n.default,t.initSingleTemplate=a.default},485:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.createUIDom({pagecode:a.REF21_CONST.singleTableId,appcode:a.REF21_CONST.appcode},(function(t){if(t&&t.template){var r=t.template;e.meta.addMeta(r)}}))};var a=r(205)},486:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setDefOrg2ListSrchArea=t.loadSearchCache=void 0,t.default=function(e){var t=this;e.createUIDom({pagecode:o.REF21_CONST.transPageId,appcode:e.getSearchParam("c")||e.getUrlParam("c")},(function(r){if(r){if(r.template){var a=r.template;i.referEvent.call(t,e,a),e.meta.setMeta(a,n.btn_Controller.bind(t,e)),c(e),l(e,o.REF21_CONST.searchId,r)}if(r.button){var u=r.button;e.button.setButtons(u)}}}))};var a=r(1),n=r(250),o=r(205),i=r(295),c=t.loadSearchCache=function(e){var t=a.cardCache.getDefData(o.REF21_CONST.searchId,o.REF21_CONST.Ref21DataSource);t&&e.search.setSearchValue(o.REF21_CONST.searchId,t.querycondition)},l=t.setDefOrg2ListSrchArea=function(e,t,r){var a=r.context,n=a.pk_org,o={display:a.org_Name,value:n};e.search.setSearchValByField(t,"pk_org",o)}}})}));
//# sourceMappingURL=index.f11b8e7b.js.map
/*nLUs9w1bSgs4PRDgiPcM4N6jIcV2wybUTGQej3OKi2U3RGS2fPH/6CRxPJY+N3fN*/