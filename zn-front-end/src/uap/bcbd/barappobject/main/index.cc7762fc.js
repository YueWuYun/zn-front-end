/*! @ncctag {"date":"2020-5-11 23:33:34"} */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nc-lightapp-front"),require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["nc-lightapp-front","react","react-dom"],t):"object"==typeof exports?exports["uap/bcbd/barappobject/main/index"]=t(require("nc-lightapp-front"),require("react"),require("react-dom")):e["uap/bcbd/barappobject/main/index"]=t(e["nc-lightapp-front"],e.React,e.ReactDOM)}(window,(function(e,t,a){return function(e){var t={};function a(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(r,o,function(t){return e[t]}.bind(null,o));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="../../../../",a(a.s=231)}({1:function(t,a){t.exports=e},137:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=a(2),n=l(o),s=(l(a(3)),a(1)),c=a(138);function l(e){return e&&e.__esModule?e:{default:e}}var i=s.base.NCDiv,u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={json:{}},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentWillMount",value:function(){var e=this;this.props.MultiInit.getMultiLang({moduleId:"1057-1057baor",domainName:"uap",callback:function(t,a,r){a?e.setState({json:t,inlt:r}):console.log("未加载到多语资源")}})}},{key:"componentDidMount",value:function(){this.initPageStatus("browse"),this.getdata()}},{key:"initPageStatus",value:function(e){switch(this.pagestatus=e,e){case"browse":this.props.button.setButtonVisible(["save","cancel"],!1),this.props.button.setButtonVisible(["add","edit","del"],!0);break;case"add":case"edit":this.props.button.setButtonVisible(["add","del","save","cancel"],!0),this.props.button.setButtonVisible(["edit"],!1)}}},{key:"getdata",value:function(){var e=this;(0,s.ajax)({url:"/nccloud/bcbd/barappregister/queryattrclass.do",success:function(t){t&&t.success&&t.data?e.props.editTable.setTableData("attrclass",t.data.attrclass):e.props.editTable.setTableData("attrclass",{rows:[]})}})}},{key:"render",value:function(){var e=this.props,t=e.button,a=e.ncmodal,r=e.editTable,o=(t.createButtonApp,a.createModal),s=r.createEditTable;return n.default.createElement("div",{className:"nc-single-table"},n.default.createElement(i,{areaCode:i.config.HEADER},n.default.createElement("div",{className:"nc-singleTable-header-area"},n.default.createElement("div",{className:"header-button-area"},this.props.button.createButtonApp({area:"page_header",buttonLimit:7,onButtonClick:c.buttonClick.bind(this),popContainer:document.querySelector(".header-button-area")})))),n.default.createElement("div",{className:"nc-singleTable-table-area"},s("attrclass",{showIndex:!0,showCheck:!0})),o("modal",{}))}}]),t}(o.Component);u=(0,s.createPage)({initTemplate:c.initTemplate})(u),t.default=u},138:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buttonClick=t.initTemplate=void 0;var r=n(a(139)),o=n(a(140));function n(e){return e&&e.__esModule?e:{default:e}}t.initTemplate=r.default,t.buttonClick=o.default},139:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.createUIDom({pagecode:"10570103",appcode:"1057BAOR"},(function(t){if(t){if(t.button){var a=t.button;e.button.setButtons(a)}if(t.template){var r=t.template;e.meta.setMeta(r)}}}))}},140:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=this;switch(t){case"add":"browse"==a.pagestatus&&a.initPageStatus("add"),e.editTable.addRow("attrclass");break;case"edit":a.initPageStatus("edit"),e.editTable.setStatus("attrclass","edit");break;case"del":var o=a.props.editTable.getCheckedRows("attrclass");if(!o||o.length<=0)return void(0,r.toast)({color:"danger",content:a.state.json["barappobject-000000"]});for(var n=[],s=[],c=0;c<o.length;c++)n.push(o[c].data),s.push(o[c].index);if("browse"==a.pagestatus)a.props.ncmodal.show("modal",{title:React.createElement("span",{className:"nc-theme-common-font-c"},a.state.json["barappobject-000001"]),beSureBtnClick:function(){(0,r.ajax)({url:"/nccloud/bcbd/attrclass/delete.do",data:{attrclass:{rows:n}},success:function(e){e&&e.success&&(e.data&&e.data.status?(a.props.editTable.deleteTableRowsByIndex("attrclass",s,!0),(0,r.toast)({color:"success"})):(0,r.toast)({color:"danger",content:e.data.errmsg}))}})}});else{var l=[];o.map((function(e){return l.push(e.index),l})),a.props.editTable.deleteTableRowsByIndex("attrclass",l)}break;case"save":if(!a.props.editTable.checkRequired("attrclass",a.props.editTable.getAllRows("attrclass")))return;a.props.editTable.filterEmptyRows("attrclass");var i=a.props.editTable.getChangedRows("attrclass");if(!i||i.length<=0)return a.initPageStatus("browse"),a.getdata(),a.props.editTable.setStatus("attrclass","browse"),void(0,r.toast)({color:"success"});for(var u=[],d=[],p=[],b=0;b<i.length;b++){var f=i[b];"2"==f.status&&u.push({values:f.values}),"3"==f.status&&p.push({values:f.values}),"1"==f.status&&d.push({values:f.values})}(0,r.ajax)({url:"/nccloud/bcbd/attrclass/save.do",data:{addrows:u&&u.length>0?{attrclass:{rows:u}}:"",editrows:d&&d.length>0?{attrclass:{rows:d}}:"",deleterows:p&&p.length>0?{attrclass:{rows:p}}:""},success:function(e){e&&e.success&&(e.data&&e.data.status?(a.initPageStatus("browse"),a.getdata(),a.props.editTable.setStatus("attrclass","browse"),(0,r.toast)({color:"success"})):(0,r.toast)({color:"danger",content:e.data.errmsg}))}});break;case"cancel":e.ncmodal.show("modal",{title:React.createElement("span",{className:"nc-theme-common-font-c"},a.state.json["barappobject-000002"]),beSureBtnClick:function(){a.initPageStatus("browse"),a.getdata(),a.props.editTable.setStatus("attrclass","browse")}})}};var r=a(1)},155:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=a(2),n=l(o),s=(l(a(3)),a(1)),c=a(156);function l(e){return e&&e.__esModule?e:{default:e}}a(162);var i=s.base.NCForm,u=(s.base.NCFormControl,s.base.NCMessage,s.base.NCCheckbox,s.base.NCTabs),d=(s.base.NCButton,s.base.NCBackBtn,u.NCTabPane,i.NCFormItem,s.cardCache.getCacheById,s.cardCache.updateCache),p=(s.cardCache.setDefData,s.cardCache.getDefData,s.cardCache.addCache),b=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a,r,o,n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.status=e.getUrlParam("status"),n.state=(o={},(r="json")in(a={json:{},backbtnstatus:"",loginfo:{}})?Object.defineProperty(a,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):a[r]=o,a),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentWillMount",value:function(){var e=this;this.props.MultiInit.getMultiLang({moduleId:"1057-1057baor",domainName:"uap",callback:function(t,a,r){a?e.setState({json:t,inlt:r}):console.log("未加载到多语资源")}})}},{key:"componentDidMount",value:function(){this.getData(),this.getLoginfo(),this.setpagestatus(this.props.getUrlParam("status"))}},{key:"getLoginfo",value:function(){var e=this;(0,s.ajax)({url:"/nccloud/bcbd/login/loginfo.do",loading:!1,success:function(t){e.setState({loginfo:t.data})}})}},{key:"setpagestatus",value:function(e){switch(this.pagestatus=e,this.setState({backbtnstatus:"browse"==e?"":"none"}),e){case"browse":this.props.button.setButtonVisible(["save","cancel"],!1),this.props.button.setButtonVisible(["add","edit","delete","attrcalssify"],!0),this.props.button.setButtonDisabled(["addline","delline"],!0),this.props.form.setFormStatus("head","browse"),this.props.cardTable.setStatus("body","browse");break;case"add":this.props.form.EmptyAllFormValue("head"),this.props.cardTable.setTableData("body",{rows:[]});case"edit":this.props.form.setFormStatus("head","edit"),this.props.cardTable.setStatus("body","edit"),this.props.button.setButtonVisible(["save","cancel"],!0),this.props.button.setButtonVisible(["add","edit","delete","attrcalssify"],!1),this.props.button.setButtonDisabled(["addline","delline"],!1)}}},{key:"getData",value:function(e,t){var a=this.props.getUrlParam("pk_barappobject");e&&(a=e);var r=this;if(r.pk_barappobject=a,!a)return r.props.form.EmptyAllFormValue("head"),void r.props.cardTable.setTableData("body",{rows:[]});(0,s.ajax)({url:"/nccloud/bcbd/barappregister/querydetail.do",data:a,success:function(e){if(e&&e.data){if(e.data.errmsg)return void(0,s.toast)({color:"danger",content:e.data.errmsg});e.data.headForm?(r.props.setUrlParam({pk_barappobject:e.data.headForm.head.rows[0].values.pk_barappobject.value}),r.props.form.setAllFormValue({head:e.data.headForm.head}),"add"==t?p(a,e.data.headForm.head,"head",e.data.headForm.head.rows[0].values):"edit"==t&&d("pk_barappobject",a,e.data.headForm.head,"head","uap.bcbd.barappobject.barappobjectcache",e.data.headForm.head.rows[0].values)):r.props.form.setAllFormValue({head:{}}),e.data.bodyMapGrid?r.props.cardTable.setTableData("body",e.data.bodyMapGrid.body):r.props.cardTable.setTableData("body",{rows:[]})}}})}},{key:"render",value:function(){var e=this,t=this.props,a=t.button,r=t.form,o=t.modal,l=(t.ncmodal,t.cardTable.createCardTable),i=a.createButtonApp,u=r.createForm,d=o.createModal,p=this.props.BillHeadInfo.createBillHeadInfo,b=this,f=s.base.NCDiv;return n.default.createElement("div",{className:"nc-bill-card"},n.default.createElement(f,{areaCode:f.config.HEADER},n.default.createElement("div",{className:"nc-bill-header-area"},n.default.createElement("div",{className:"header-title-search-area"},n.default.createElement("span",null,p({title:""+this.state.json["barappobject-000008"],initShowBackBtn:"none"!=this.state.backbtnstatus,backBtnClick:function(){b.props.pushTo("/list",{pk_barappobject:b.pk_barappobject,pagecode:"1057BAOR_list"})}}))),n.default.createElement("div",{className:"header-button-area"},this.props.button.createButtonApp({area:"head",buttonLimit:10,onButtonClick:c.buttonClick.bind(this),popContainer:document.querySelector(".header-button-area")})))),n.default.createElement("div",{className:"nc-bill-form-area"},u("head",{onBeforeEvent:c.beformheadEvent.bind(this)}),l("body",{showIndex:!0,showCheck:!0,hideSwitch:function(){return!1},onAfterEvent:c.afterEvent.bind(this),onBeforeEvent:c.beforeEvent.bind(this),tableHead:function(){return i({area:"body",onButtonClick:c.buttonClick.bind(e),popContainer:document.querySelector(".light-tabs")})}})),d("attrclass",{}),this.props.ncmodal.createModal("ncmodal",{}))}}]),t}(o.Component);b=(0,s.createPage)({initTemplate:c.initTemplate})(b),t.default=b},156:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.beformheadEvent=t.beforeEvent=t.buttonClick=t.afterEvent=t.initTemplate=void 0;var r=l(a(157)),o=l(a(158)),n=l(a(159)),s=l(a(160)),c=l(a(161));function l(e){return e&&e.__esModule?e:{default:e}}t.initTemplate=r.default,t.afterEvent=o.default,t.buttonClick=n.default,t.beforeEvent=s.default,t.beformheadEvent=c.default},157:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.createUIDom({pagecode:"1057BAOR_card",appcode:"1057BAOR"},(function(t){if(t){if(t.button){var a=t.button;e.button.setButtons(a)}if(t.template){var r=t.template;!function(e,t){t.head.items.map((function(e,a){t.head.items.find((function(e){return"mdclassid"==e.attrcode})).queryCondition=function(){return{needwherePart:"true",hasChild:"false"}}})),e.meta.setMeta(t)}(e,r),e.meta.setMeta(r)}}}))};a(1)},158:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,o,n,s,c){var l=this,i=e.form.getFormItemsValue("head","mdclassid").value;if("recordattr"==a){var u=null;o&&o.values&&o.values.fullpath&&(u=o.values.fullpath),(0,r.ajax)({url:"/nccloud/bcbd/barappobject/bodyafter.do",data:{fullpath:u,mdclassid:i},async:!1,success:function(e){e&&e.success&&e.data?(l.props.cardTable.setValByKeyAndIndex(t,s,"mdattrid",{value:e.data.code}),l.props.cardTable.setValByKeyAndIndex(t,s,"mdfullname",{value:e.data.mdattrid}),e.data.datatype?l.props.cardTable.setValByKeyAndIndex(t,s,"datatype",{value:o.values.typeId,display:o.values.typeName}):l.props.cardTable.setValByKeyAndIndex(t,s,"datatype",{value:null,display:null}),l.props.cardTable.setEditableByIndex(t,s,"datatype",!1),e.data.refrecordtype?l.props.cardTable.setValByKeyAndIndex(t,s,"refrecordtype",{value:e.data.refrecordtype,display:o.refname}):l.props.cardTable.setValByKeyAndIndex(t,s,"refrecordtype",{value:null})):(l.props.cardTable.setValByKeyAndIndex(t,s,"mdattrid",{value:null}),l.props.cardTable.setValByKeyAndIndex(t,s,"mdfullname",{value:null}),l.props.cardTable.setValByKeyAndIndex(t,s,"datatype",{value:null,display:null}),l.props.cardTable.setValByKeyAndIndex(t,s,"refrecordtype",{value:null,display:null}),l.props.cardTable.setEditableByIndex(t,s,"datatype",!0))}}),o&&o.values?l.props.cardTable.setValByKeyAndIndex(t,s,"recordattr",{value:o.values.fulldisplayname,display:o.values.fulldisplayname}):l.props.cardTable.setValByKeyAndIndex(t,s,"recordattr",{value:null,display:null})}};var r=a(1)},159:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=this;switch(t){case"add":a.setpagestatus("add");break;case"edit":a.setpagestatus("edit");break;case"delete":var r=a.props.form.getAllFormValue("head");if(!r)return;e.ncmodal.show("ncmodal",{title:React.createElement("span",{className:"nc-theme-common-font-c"},a.state.json["barappobject-000003"]),beSureBtnClick:function(){(0,o.ajax)({url:"/nccloud/bcbd/barappobject/delete.do",data:{head:r},success:function(e){if(e.data&&e.data.status){a.props.form.EmptyAllFormValue("head"),a.props.cardTable.setTableData("body",{rows:[]});var t=a.pk_barappobject;if((0,o.toast)({color:"success"}),!t)return;var r=i(t,c);l("pk_barappobject",t,c),a.getData(r)}else e.data&&e.data.errmsg&&(0,o.toast)({color:"danger",content:e.data.errmsg})}})}});break;case"cancel":e.ncmodal.show("ncmodal",{title:React.createElement("span",{className:"nc-theme-common-font-c"},a.state.json["barappobject-000004"]),beSureBtnClick:function(){a.getData(),a.setpagestatus("browse")}});break;case"attrcalssify":e.modal.show("attrclass",{title:a.state.json["barappobject-000005"],size:"xlg",noFooter:!0,content:React.createElement(s.default,null)});break;case"save":if(!e.form.isCheckNow("head"))return;if(!e.cardTable.checkTableRequired("body"))return;var n=a.props.form.getAllFormValue("head"),u=void 0;if(u="edit"==a.pagestatus?a.props.cardTable.getChangedRows("body"):a.props.cardTable.getAllRows("body"),a.props.cardTable.getNumberOfRows("body")<=0)return void(0,o.toast)({color:"warning",content:a.state.json["barappobject-000006"]});for(var d=[],p=0;p<u.length;p++)d.push(u[p]);(0,o.ajax)({url:"/nccloud/bcbd/barappobject/save.do",data:{head:{head:n},body:d&&d.length>0?{body:{rows:d}}:"",opt:a.pagestatus},success:function(e){e&&e.success&&(e.data&&e.data.status?(a.getData(e.data.pk_barappobject,a.pagestatus),a.setpagestatus("browse"),(0,o.toast)({color:"success"})):e.data.errmsg&&(0,o.toast)({color:"danger",content:e.data.errmsg}))}});break;case"addline":a.props.cardTable.addRow("body",a.props.cardTable.getNumberOfRows("body"),null,!1);break;case"delline":var b=a.props.cardTable.getCheckedRows("body");if(!b||b.length<=0)return void(0,o.toast)({color:"warning",content:a.state.json["barappobject-000007"]});for(var f=[],h=0;h<b.length;h++){if(b[h].data.values.isdefault.value)return void(0,o.toast)({color:"warning",content:a.state.json["barappobject-000013"]});f.push(b[h].index)}a.props.cardTable.delRowsByIndex("body",f)}};var r,o=a(1),n=a(137),s=(r=n)&&r.__esModule?r:{default:r};var c="uap.bcbd.barappobject.barappobjectcache",l=o.cardCache.deleteCacheById,i=o.cardCache.getNextId},160:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,o,n,s){var c=this;if("memo"==a||"bruleused"==a)return!0;if(s.values.isdefault.value)return!1;if("refrecordtype"==a)return!1;if("recordattr"==a||"datatype"==a){var l=!1,i=e.form.getFormItemsValue("head","mdclassid").value;return(0,r.ajax)({url:"/nccloud/bcbd/barappobject/bodybefore.do",data:{mdclassid:i,key:a},async:!1,success:function(e){if(e&&e.success){l=e.data.isedit;var t=c.props.meta.getMeta();"recordattr"==a&&(c.props.renderItem("table","body","recordattr",null),t.body.items.find((function(e){return"recordattr"==e.attrcode})).itemtype=e.data.type,t.body.items.find((function(e){return"recordattr"==e.attrcode})).refcode=e.data.refpath,t.body.items.find((function(e){return"recordattr"==e.attrcode})).queryCondition=function(){return{beanId:i}},c.props.meta.setMeta(t))}}}),l}return!0};var r=a(1)},161:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,r,o){if("memo"==a)return!0;return!e.form.getFormItemsValue("head","isdefault").value}},162:function(e,t,a){var r=a(163);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};a(5)(r,o);r.locals&&(e.exports=r.locals)},163:function(e,t,a){(e.exports=a(4)(!1)).push([e.i,".upload-modal {\n  display: none !important;\n}\n.header-button-area {\n  position: relative;\n}\n.sign-up-btn {\n  position: absolute;\n  right: 160px;\n  top: 4px;\n  z-index: 10;\n}\n.light-tabs-header .tabs-config {\n  line-height: 2.7 !important;\n}\n",""])},164:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=a(2),n=l(o),s=(l(a(3)),a(1)),c=a(165);function l(e){return e&&e.__esModule?e:{default:e}}s.cardCache.setDefData,s.cardCache.getDefData,s.cacheTools.get;var i=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={json:{},inlt:null,bodyMap:{}},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentWillMount",value:function(){var e=this;this.props.MultiInit.getMultiLang({moduleId:"1057-1057baor",domainName:"uap",callback:function(t,a,r){a?e.setState({json:t,inlt:r}):console.log("未加载到多语资源")}})}},{key:"componentDidMount",value:function(){var e=this.props.getUrlParam("pk_barappobject");e?this.findChildbypk(e):this.getData()}},{key:"findChildbypk",value:function(e){if(e){var t=this;(0,s.ajax)({url:"/nccloud/bcbd/barappregister/querydetail.do",data:e,success:function(a){a&&a.success&&a.data&&a.data.bodyMapGrid?(t.state.bodyMap[e]=a.data.bodyMapGrid,t.props.cardTable.setTableData("body",a.data.bodyMapGrid.body)):t.props.cardTable.setTableData("body",{rows:[]})}})}}},{key:"getData",value:function(){var e=this;(0,s.ajax)({url:"/nccloud/bcbd/barappregister/queryAll.do",success:function(t){t.success&&e.setPageData(e,t)}})}},{key:"setPageData",value:function(e,t){var a=t.data;if(a)if(a.errmsg)(0,s.toast)({color:"danger",content:t.data.errmsg});else if(a&&null!=a.headListGrid){var r=a.headListGrid.head,o=a.bodyMapGrid,n=o[a.headListGrid.head.rows[0].values.pk_barappobject.value].body;e.setState({bodyMap:o}),e.props.table.setAllTableData("head",r),e.props.cardTable.setTableData("body",n),(0,s.toast)({content:e.state.inlt&&e.state.inlt.get("barappobject-000014",{total:r.rows.length}),color:"success"})}else e.props.table.setAllTableData("head",{rows:[]}),e.props.cardTable.setTableData("body",{rows:[]}),(0,s.toast)({content:e.state.json["barappobject-000011"],color:"warning"});else(0,s.toast)({color:"danger"})}},{key:"render",value:function(){var e=this.props,t=e.button,a=e.search,r=e.modal,o=(e.ncmodal,e.table),l=e.cardTable,i=a.NCCreateSearch,u=(t.createButton,t.createButtonApp,r.createModal),d=o.createSimpleTable,p=l.createCardTable,b=this.props.BillHeadInfo.createBillHeadInfo,f=s.base.NCDiv;return n.default.createElement("div",{className:"nc-single-table"},n.default.createElement(f,{areaCode:f.config.HEADER},n.default.createElement("div",{className:"nc-singleTable-header-area"},n.default.createElement("div",{className:"header-title-search-area"},n.default.createElement("span",null,b({title:""+this.state.json["barappobject-000008"],initShowBackBtn:!1}))),n.default.createElement("div",{className:"header-button-area"},this.props.button.createButtonApp({area:"head",buttonLimit:7,onButtonClick:c.buttonClick.bind(this),popContainer:document.querySelector(".header-button-area")})))),n.default.createElement("div",{className:"nc-singleTable-search-area"},i("query",{clickSearchBtn:c.searchBtnClick.bind(this),showAdvBtn:!0})),n.default.createElement("div",{className:"nc-singleTable-table-area"},d("head",{showIndex:!0,showCheck:!0,hideSwitch:!1,adaptionHeight:!1,dataSource:"uap.bcbd.barappobject.barappobjectcache",pkname:"pk_barappobject",onRowClick:c.onRowClick.bind(this)}),p("body",{showIndex:!0,hideSwitch:function(){return!1}})),u("attrclass",{}),this.props.ncmodal.createModal("ncmodal",{}))}}]),t}(o.Component);i=(0,s.createPage)({initTemplate:c.initTemplate})(i),t.default=i},165:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onRowClick=t.searchBtnClick=t.initTemplate=t.buttonClick=void 0;var r=c(a(166)),o=c(a(167)),n=c(a(169)),s=c(a(170));function c(e){return e&&e.__esModule?e:{default:e}}t.buttonClick=r.default,t.initTemplate=o.default,t.searchBtnClick=n.default,t.onRowClick=s.default},166:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=this;switch(t){case"add":e.pushTo("/card",{status:"add",pk_barappobject:""});break;case"attrcalssify":e.modal.show("attrclass",{title:a.state.json["barappobject-000005"],size:"xlg",noFooter:!0,content:React.createElement(s.default,null)});break;case"del":var r=e.table.getCheckedRows("head");if(!r||r.length<=0)return void(0,o.toast)({color:"warning",content:a.state.json["barappobject-000007"]});for(var n=[],c=[],l=0;l<r.length;l++)n.push(r[l].data),c.push(r[l].index);a.props.ncmodal.show("ncmodal",{title:React.createElement("span",{className:"nc-theme-common-font-c"},a.state.json["barappobject-000003"]),beSureBtnClick:function(){(0,o.ajax)({url:"/nccloud/bcbd/barappobject/delete.do",data:{head:{rows:n}},success:function(e){e&&e.success&&(e.data&&e.data.status?(a.props.table.deleteTableRowsByIndex("head",c),(0,o.toast)({color:"success"})):e.data&&e.data.errmsg&&(0,o.toast)({color:"danger",content:e.data.errmsg}))}})}})}};var r,o=a(1),n=a(137),s=(r=n)&&r.__esModule?r:{default:r}},167:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.MultiInit.getMultiLang({moduleId:"1057-1057baor",domainName:"uap",callback:function(t,a,r){a?e.createUIDom({pagecode:"1057BAOR_list",appcode:"1057BAOR"},(function(a){if(a){if(a.button){var r=a.button;e.button.setPopContent("delete",t["barappobject-000009"]),e.button.setButtons(r)}if(a.template){var o=a.template;!function(e,t){t.head.items.map((function(a,r){t.head.items.find((function(e){return"code"==e.attrcode})).render=function(t,a,r){return React.createElement("a",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){e.pushTo("/card",{status:"browse",pk_barappobject:a.pk_barappobject.value,pagecode:"1057BAOR_card"})}},a.code.value)}})),t.query.items.map((function(e,a){t.query.items.find((function(e){return"mdclassid"==e.attrcode})).queryCondition=function(){return{needwherePart:"true",hasChild:"false"}}})),e.meta.setMeta(t)}(e,o),(0,n.default)(e,o,t),e.meta.setMeta(o)}}})):console.log("未加载到多语资源")}})};a(1);var r,o=a(168),n=(r=o)&&r.__esModule?r:{default:r}},168:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){var o={label:a["barappobject-000010"],attrcode:"opr",itemtype:"customer",visible:!0,fixed:"right",render:function(t,a,o){return e.button.createOprationButton(["edit","delete"],{area:"row",buttonLimit:2,onButtonClick:function(e,t){return function(e,t,a,o,n){switch(t){case"edit":e.pushTo("/card",{status:"edit",pk_barappobject:o.pk_barappobject.value});break;case"delete":o.key={value:o.key};var s={rows:[{values:o}]};(0,r.ajax)({url:"/nccloud/bcbd/barappobject/delete.do",data:{dictcode:s},success:function(t){t&&t.success&&t.data.status?(e.table.deleteTableRowsByIndex("head",n),e.table.deleteCacheId("head",o.pk_barappobject.value),(0,r.toast)({color:"success"})):t.data.errmsg&&(0,r.toast)({color:"danger",content:t.data.errmsg})}})}}(e,t,0,a,o)}})}};t.head.items.push(o),e.meta.setMeta(t)};var r=a(1)},169:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){if(t){var n=this,s=e.search.getQueryInfo("query");s.pageInfo=e.table.getTablePageInfo("head"),0!=a?s.pageInfo.pageIndex=0:s.pageInfo.pagepks=t,o("queryInfo","uap.bcbd.barappobject.barappobjectcache",s),(0,r.ajax)({url:"/nccloud/bcbd/barappregister/conditionquery.do",data:s,success:function(e){var t=e.success;e.data;t&&n.setPageData(n,e)}})}};var r=a(1),o=r.cardCache.setDefData;r.cardCache.getDefData},170:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,r,o){this.state.bodyMap&&a.pk_barappobject&&a.pk_barappobject.value&&(this.state.bodyMap[a.pk_barappobject.value]?e.cardTable.setTableData("body",this.state.bodyMap[a.pk_barappobject.value].body):this.findChildbypk(a.pk_barappobject.value))};a(1)},2:function(e,a){e.exports=t},231:function(e,t,a){"use strict";var r,o,n,s=a(1),c=a(232),l=(r=c)&&r.__esModule?r:{default:r};o=l.default,n="app",(0,s.RenderRouter)(o,n)},232:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=a(1),n=a(164),s=(r=n)&&r.__esModule?r:{default:r};var c=(0,o.asyncComponent)((function(){return Promise.resolve().then(a.t.bind(null,155,7))})),l=[{path:"/",component:s.default,exact:!0},{path:"/list",component:s.default},{path:"/card",component:c}];t.default=l},3:function(e,t){e.exports=a},4:function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=function(e,t){var a=e[1]||"",r=e[3];if(!r)return a;if(t&&"function"==typeof btoa){var o=(s=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),n=r.sources.map((function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"}));return[a].concat(n).concat([o]).join("\n")}var s;return[a].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+a+"}":a})).join("")},t.i=function(e,a){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var n=this[o][0];"number"==typeof n&&(r[n]=!0)}for(o=0;o<e.length;o++){var s=e[o];"number"==typeof s[0]&&r[s[0]]||(a&&!s[2]?s[2]=a:a&&(s[2]="("+s[2]+") and ("+a+")"),t.push(s))}},t}},5:function(e,t,a){var r,o,n={},s=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=r.apply(this,arguments)),o}),c=function(e){var t={};return function(a){return void 0===t[a]&&(t[a]=e.call(this,a)),t[a]}}((function(e){return document.querySelector(e)})),l=null,i=0,u=[],d=a(6);function p(e,t){for(var a=0;a<e.length;a++){var r=e[a],o=n[r.id];if(o){o.refs++;for(var s=0;s<o.parts.length;s++)o.parts[s](r.parts[s]);for(;s<r.parts.length;s++)o.parts.push(y(r.parts[s],t))}else{var c=[];for(s=0;s<r.parts.length;s++)c.push(y(r.parts[s],t));n[r.id]={id:r.id,refs:1,parts:c}}}}function b(e,t){for(var a=[],r={},o=0;o<e.length;o++){var n=e[o],s=t.base?n[0]+t.base:n[0],c={css:n[1],media:n[2],sourceMap:n[3]};r[s]?r[s].parts.push(c):a.push(r[s]={id:s,parts:[c]})}return a}function f(e,t){var a=c(e.insertInto);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=u[u.length-1];if("top"===e.insertAt)r?r.nextSibling?a.insertBefore(t,r.nextSibling):a.appendChild(t):a.insertBefore(t,a.firstChild),u.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");a.appendChild(t)}}function h(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=u.indexOf(e);t>=0&&u.splice(t,1)}function m(e){var t=document.createElement("style");return e.attrs.type="text/css",v(t,e.attrs),f(e,t),t}function v(e,t){Object.keys(t).forEach((function(a){e.setAttribute(a,t[a])}))}function y(e,t){var a,r,o,n;if(t.transform&&e.css){if(!(n=t.transform(e.css)))return function(){};e.css=n}if(t.singleton){var s=i++;a=l||(l=m(t)),r=w.bind(null,a,s,!1),o=w.bind(null,a,s,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(a=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",v(t,e.attrs),f(e,t),t}(t),r=_.bind(null,a,t),o=function(){h(a),a.href&&URL.revokeObjectURL(a.href)}):(a=m(t),r=k.bind(null,a),o=function(){h(a)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=s()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var a=b(e,t);return p(a,t),function(e){for(var r=[],o=0;o<a.length;o++){var s=a[o];(c=n[s.id]).refs--,r.push(c)}e&&p(b(e,t),t);for(o=0;o<r.length;o++){var c;if(0===(c=r[o]).refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete n[c.id]}}}};var g,j=(g=[],function(e,t){return g[e]=t,g.filter(Boolean).join("\n")});function w(e,t,a,r){var o=a?"":r.css;if(e.styleSheet)e.styleSheet.cssText=j(t,o);else{var n=document.createTextNode(o),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(n,s[t]):e.appendChild(n)}}function k(e,t){var a=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}function _(e,t,a){var r=a.css,o=a.sourceMap,n=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||n)&&(r=d(r)),o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var s=new Blob([r],{type:"text/css"}),c=e.href;e.href=URL.createObjectURL(s),c&&URL.revokeObjectURL(c)}},6:function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var a=t.protocol+"//"+t.host,r=a+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var o,n=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(n)?e:(o=0===n.indexOf("//")?n:0===n.indexOf("/")?a+n:r+n.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")}))}}})}));
//# sourceMappingURL=index.cc7762fc.js.map