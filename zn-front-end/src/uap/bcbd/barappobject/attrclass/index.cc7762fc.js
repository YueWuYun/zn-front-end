/*! @ncctag {"date":"2020-5-11 23:33:34"} */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("nc-lightapp-front"),require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["nc-lightapp-front","react","react-dom"],e):"object"==typeof exports?exports["uap/bcbd/barappobject/attrclass/index"]=e(require("nc-lightapp-front"),require("react"),require("react-dom")):t["uap/bcbd/barappobject/attrclass/index"]=e(t["nc-lightapp-front"],t.React,t.ReactDOM)}(window,(function(t,e,a){return function(t){var e={};function a(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=t,a.c=e,a.d=function(t,e,r){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(r,o,function(e){return t[e]}.bind(null,o));return r},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="../../../../",a(a.s=137)}({1:function(e,a){e.exports=t},137:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),o=a(2),s=u(o),n=(u(a(3)),a(1)),c=a(138);function u(t){return t&&t.__esModule?t:{default:t}}var i=n.base.NCDiv,l=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return a.state={json:{}},a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"componentWillMount",value:function(){var t=this;this.props.MultiInit.getMultiLang({moduleId:"1057-1057baor",domainName:"uap",callback:function(e,a,r){a?t.setState({json:e,inlt:r}):console.log("未加载到多语资源")}})}},{key:"componentDidMount",value:function(){this.initPageStatus("browse"),this.getdata()}},{key:"initPageStatus",value:function(t){switch(this.pagestatus=t,t){case"browse":this.props.button.setButtonVisible(["save","cancel"],!1),this.props.button.setButtonVisible(["add","edit","del"],!0);break;case"add":case"edit":this.props.button.setButtonVisible(["add","del","save","cancel"],!0),this.props.button.setButtonVisible(["edit"],!1)}}},{key:"getdata",value:function(){var t=this;(0,n.ajax)({url:"/nccloud/bcbd/barappregister/queryattrclass.do",success:function(e){e&&e.success&&e.data?t.props.editTable.setTableData("attrclass",e.data.attrclass):t.props.editTable.setTableData("attrclass",{rows:[]})}})}},{key:"render",value:function(){var t=this.props,e=t.button,a=t.ncmodal,r=t.editTable,o=(e.createButtonApp,a.createModal),n=r.createEditTable;return s.default.createElement("div",{className:"nc-single-table"},s.default.createElement(i,{areaCode:i.config.HEADER},s.default.createElement("div",{className:"nc-singleTable-header-area"},s.default.createElement("div",{className:"header-button-area"},this.props.button.createButtonApp({area:"page_header",buttonLimit:7,onButtonClick:c.buttonClick.bind(this),popContainer:document.querySelector(".header-button-area")})))),s.default.createElement("div",{className:"nc-singleTable-table-area"},n("attrclass",{showIndex:!0,showCheck:!0})),o("modal",{}))}}]),e}(o.Component);l=(0,n.createPage)({initTemplate:c.initTemplate})(l),e.default=l},138:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.buttonClick=e.initTemplate=void 0;var r=s(a(139)),o=s(a(140));function s(t){return t&&t.__esModule?t:{default:t}}e.initTemplate=r.default,e.buttonClick=o.default},139:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){t.createUIDom({pagecode:"10570103",appcode:"1057BAOR"},(function(e){if(e){if(e.button){var a=e.button;t.button.setButtons(a)}if(e.template){var r=e.template;t.meta.setMeta(r)}}}))}},140:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var a=this;switch(e){case"add":"browse"==a.pagestatus&&a.initPageStatus("add"),t.editTable.addRow("attrclass");break;case"edit":a.initPageStatus("edit"),t.editTable.setStatus("attrclass","edit");break;case"del":var o=a.props.editTable.getCheckedRows("attrclass");if(!o||o.length<=0)return void(0,r.toast)({color:"danger",content:a.state.json["barappobject-000000"]});for(var s=[],n=[],c=0;c<o.length;c++)s.push(o[c].data),n.push(o[c].index);if("browse"==a.pagestatus)a.props.ncmodal.show("modal",{title:React.createElement("span",{className:"nc-theme-common-font-c"},a.state.json["barappobject-000001"]),beSureBtnClick:function(){(0,r.ajax)({url:"/nccloud/bcbd/attrclass/delete.do",data:{attrclass:{rows:s}},success:function(t){t&&t.success&&(t.data&&t.data.status?(a.props.editTable.deleteTableRowsByIndex("attrclass",n,!0),(0,r.toast)({color:"success"})):(0,r.toast)({color:"danger",content:t.data.errmsg}))}})}});else{var u=[];o.map((function(t){return u.push(t.index),u})),a.props.editTable.deleteTableRowsByIndex("attrclass",u)}break;case"save":if(!a.props.editTable.checkRequired("attrclass",a.props.editTable.getAllRows("attrclass")))return;a.props.editTable.filterEmptyRows("attrclass");var i=a.props.editTable.getChangedRows("attrclass");if(!i||i.length<=0)return a.initPageStatus("browse"),a.getdata(),a.props.editTable.setStatus("attrclass","browse"),void(0,r.toast)({color:"success"});for(var l=[],d=[],p=[],b=0;b<i.length;b++){var f=i[b];"2"==f.status&&l.push({values:f.values}),"3"==f.status&&p.push({values:f.values}),"1"==f.status&&d.push({values:f.values})}(0,r.ajax)({url:"/nccloud/bcbd/attrclass/save.do",data:{addrows:l&&l.length>0?{attrclass:{rows:l}}:"",editrows:d&&d.length>0?{attrclass:{rows:d}}:"",deleterows:p&&p.length>0?{attrclass:{rows:p}}:""},success:function(t){t&&t.success&&(t.data&&t.data.status?(a.initPageStatus("browse"),a.getdata(),a.props.editTable.setStatus("attrclass","browse"),(0,r.toast)({color:"success"})):(0,r.toast)({color:"danger",content:t.data.errmsg}))}});break;case"cancel":t.ncmodal.show("modal",{title:React.createElement("span",{className:"nc-theme-common-font-c"},a.state.json["barappobject-000002"]),beSureBtnClick:function(){a.initPageStatus("browse"),a.getdata(),a.props.editTable.setStatus("attrclass","browse")}})}};var r=a(1)},2:function(t,a){t.exports=e},3:function(t,e){t.exports=a}})}));
//# sourceMappingURL=index.cc7762fc.js.map