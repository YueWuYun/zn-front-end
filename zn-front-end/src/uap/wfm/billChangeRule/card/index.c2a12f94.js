/*! @ncctag {"date":"2020-5-11 23:44:44"} */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nc-lightapp-front"),require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["nc-lightapp-front","react","react-dom"],t):"object"==typeof exports?exports["uap/wfm/billChangeRule/card/index"]=t(require("nc-lightapp-front"),require("react"),require("react-dom")):e["uap/wfm/billChangeRule/card/index"]=t(e["nc-lightapp-front"],e.React,e.ReactDOM)}(window,(function(e,t,a){return function(e){var t={};function a(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,a),n.l=!0,n.exports}return a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="../../../../",a(a.s=346)}({1:function(t,a){t.exports=e},2:function(e,a){e.exports=t},346:function(e,t,a){"use strict";var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),n=a(2),l=c(n),o=c(a(8)),s=a(1),i=a(347);function c(e){return e&&e.__esModule?e:{default:e}}var u=s.base.NCDiv,d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.getData=function(e,t){var r=a;(0,s.ajax)({url:"/nccloud/riart/billexchange/billExchangeRuleInfoQuery.do",data:e,success:function(e){var a=e.success,n=e.data;a&&"success"==n.result&&(r.props.form.setAllFormValue({billChangeRuleForm:n.value.billChangeRuleForm}),r.props.form.setFormStatus("billChangeRuleForm",t),"edit"===t&&r.props.form.setFormItemsDisabled("billChangeRuleForm",{src_billtype:!0,src_transtype:!0,dest_billtype:!0,dest_transtype:!0})),a&&"success"!=n.result&&(n.exception?(0,s.promptBox)({color:"danger",content:n.exception,noFooter:!1,noCancelBtn:!1,beSureBtnName:r.state.json["13050213-000010"],cancelBtnName:r.state.json["13050213-000011"]}):(0,s.toast)({content:n.message,color:n.result}))},error:function(e){(0,s.toast)({content:e.message,color:"danger"})}})},a.onCloseModelFn=function(e){},a.props=e,a.formId="billChangeRuleForm",a.status,a.state={isShow:!0,appcode:"",json:{},inlt:null,showStat:"edit"},a.state.appcode=e.getSearchParam("c"),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentWillMount",value:function(){var e=this;this.props.MultiInit.getMultiLang({moduleId:"1022-13050213",domainName:"uap",callback:function(t,a,r){a&&e.setState({json:t,inlt:r})}})}},{key:"componentDidMount",value:function(){var e=this.props.getUrlParam("status");if(this.setState({showStat:e}),"edit"===e){this.status=e;var t=this.props.getUrlParam("pk_vochange");this.getData(t,this.status),this.setButtonStatus(e)}else if("browse"===e){this.status=e;var a=this.props.getUrlParam("pk_vochange");this.getData(a,this.status),this.setButtonStatus(e)}else this.status="edit",this.setButtonStatus("edit"),this.props.form.setFormStatus("billChangeRuleForm","edit")}},{key:"getSearchParam",value:function(e){if(e){var t="",a=window.parent.location.hash||window.parent.location.search,r="";if(r=a.includes("?")?a.split("?")[1]:a.substring(1)){var n=r.split("&");n&&n instanceof Array&&n.forEach((function(a){-1!=a.indexOf("=")&&a.split("=")&&a.split("=")instanceof Array&&a.split("=")[0]===e&&a.split("=")[1]&&(t=decodeURIComponent(decodeURIComponent(a.split("=")[1])))}))}return t}}},{key:"setButtonStatus",value:function(e){this.props.button.setDisabled({save:!1,card_cancel:!1,back:!1,edit:!1}),"edit"===e?this.props.button.setButtonVisible({save:!0,card_cancel:!0,back:!0,edit:!1}):"browse"===e?this.props.button.setButtonVisible({save:!1,card_cancel:!1,back:!0,edit:!0}):"add"===e?this.props.button.setButtonVisible({save:!0,card_cancel:!0,back:!0,edit:!1}):"save"===e?this.props.button.setButtonVisible({save:!1,card_cancel:!1,back:!0,edit:!0}):"cancel"===e&&this.props.button.setButtonVisible({save:!1,card_cancel:!1,back:!0,edit:!0})}},{key:"onAfterEvent",value:function(){}},{key:"beforeEvent",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,a=t.table,r=t.button,n=(t.modal,t.search),o=t.editTable,s=t.BillHeadInfo,c=(o.createEditTable,a.createSimpleTable,n.NCCreateSearch,r.createButton,this.props.simpleSearch.createSimpleSearch,this.props.form.createForm),d=s.createBillHeadInfo,p=this.state.json["13050213-000012"]+"-"+this.state.json["13050213-000013"],f=this.state.json["13050213-000012"]+"-"+this.state.json["13050213-000014"];return l.default.createElement("div",{className:"nc-bill-card"},l.default.createElement(u,{areaCode:u.config.HEADER},l.default.createElement("div",{className:"nc-bill-header-area"},l.default.createElement("div",{className:"header-title-search-area"},"13050213"===this.state.appcode?d({title:p,initShowBackBtn:!0,backBtnClick:function(){e.props.linkTo("/uap/wfm/billChangeRule/list/index.html",{pagecode:"1305021301"})}}):d({title:f,initShowBackBtn:!0,backBtnClick:function(){e.props.linkTo("/uap/wfm/billChangeRule/list/index.html",{pagecode:"1305021301"})}})),l.default.createElement("div",{className:"header-button-area"},this.props.button.createButtonApp({area:"area_card",buttonLimit:4,onButtonClick:i.buttonClick.bind(this),popContainer:document.querySelector(".header-button-area")})))),l.default.createElement("div",{className:"nc-bill-form-area"},c("billChangeRuleForm",{onAfterEvent:i.afterEvent.bind(this)})))}}]),t}(n.Component);d=(0,s.createPage)({initTemplate:i.initTemplate})(d),o.default.render(l.default.createElement(d,null),document.querySelector("#app"))},347:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tableModelConfirm=t.searchBtnClick=t.beforeEvent=t.afterEvent=t.initTemplate=t.buttonClick=void 0;var r=c(a(348)),n=c(a(349)),l=c(a(350)),o=c(a(351)),s=c(a(352)),i=c(a(353));function c(e){return e&&e.__esModule?e:{default:e}}t.buttonClick=r.default,t.initTemplate=n.default,t.afterEvent=l.default,t.beforeEvent=o.default,t.searchBtnClick=s.default,t.tableModelConfirm=i.default},348:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=this;function n(t){e.button.setDisabled({save:!1,card_cancel:!1,back:!1,edit:!1}),"edit"===t?e.button.setButtonVisible({save:!0,card_cancel:!0,back:!0,edit:!1}):"browse"===t?e.button.setButtonVisible({save:!1,card_cancel:!1,back:!0,edit:!0}):"add"===t?e.button.setButtonVisible({save:!0,card_cancel:!0,back:!0,edit:!1}):"save"===t?e.button.setButtonVisible({save:!1,card_cancel:!1,back:!0,edit:!0}):"cancel"===t&&e.button.setButtonVisible({save:!1,card_cancel:!1,back:!0,edit:!0})}this.props.MultiInit.getMultiLang({moduleId:"1022-13050213",domainName:"uap",callback:function(l,o,s){if(o)switch(t){case"save":if(!e.form.isCheckNow("billChangeRuleForm"))return;var i=e.form.getAllFormValue("billChangeRuleForm");i.areaType="form";var c={data:i};(0,r.ajax)({url:"/nccloud/riart/billexchange/billExchangeRuleSave.do",type:"post",data:c,success:function(t){var o=t.success,s=t.data;if(o&&"success"==s.result&&"none"!=s.value&&(n("save"),e.form.setAllFormValue({billChangeRuleForm:s.value.billChangeRuleForm}),e.form.setFormStatus("billChangeRuleForm","browse"),a.setState({showStat:"browse"}),(0,r.toast)({content:l["13050213-000000"],color:"success"})),o&&"success"==s.result&&"none"==s.value&&(0,r.toast)({content:l["13050213-000001"],color:"warning"}),o&&"success"!=s.result){var i="";s.message&&(i+=s.message),s.exception&&(i+=s.exception),(0,r.toast)({content:i,color:"danger"})}},error:function(e){(0,r.toast)({content:e.message,color:"danger"})}});break;case"card_cancel":(0,r.promptBox)({color:"warning",title:l["13050213-000053"],content:l["13050213-000054"],noFooter:!1,noCancelBtn:!1,hasCloseBtn:!1,beSureBtnClick:function(){n("cancel"),a.setState({showStat:"browse"}),e.form.cancel("billChangeRuleForm")},closeByClickBackDrop:!1});break;case"back":e.linkTo("/uap/wfm/billChangeRule/list/index.html",{pagecode:"1305021301"});break;case"edit":n("edit"),a.setState({showStat:"edit"}),e.form.setFormStatus("billChangeRuleForm","edit"),e.form.setFormItemsDisabled("billChangeRuleForm",{src_billtype:!0,src_transtype:!0,dest_billtype:!0,dest_transtype:!0})}}})};var r=a(1);r.base.Message},349:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.MultiInit.getMultiLang({moduleId:"1022-13050213",domainName:"uap",callback:function(t,a,r){if(a){var l=e.getUrlParam("status");n=e.getSearchParam("c"),e.createUIDom({pagecode:"1305021301",appcode:n},(function(a){if(a){if(a.template){var r=a.template;"add"===l?(e.form.EmptyAllFormValue("billChangeRuleForm"),e.form.setFormStatus("billChangeRuleForm","edit"),r.billChangeRuleForm.items.map((function(e){"dest_billtype"==e.attrcode&&(e.refName=t["13050213-000018"],e.queryCondition={billtypecode:"",GridRefActionExt:"nccloud.web.riart.billtype.ref.action.BillChangeDestBillTypeConditionRef"}),"dest_transtype"==e.attrcode&&(e.queryCondition={parentbilltype:""}),"src_transtype"==e.attrcode&&(e.queryCondition={parentbilltype:""}),"src_billtype"==e.attrcode&&(e.refName=t["13050213-000018"],e.queryCondition={GridRefActionExt:"nccloud.web.riart.billtype.ref.action.BillChangeBillTypeConditionRef"})}))):"edit"===l&&(r.billChangeRuleForm.items.map((function(e){"src_billtype"==e.attrcode&&(e.refName=t["13050213-000018"]),"dest_billtype"==e.attrcode&&(e.refName=t["13050213-000018"])})),e.form.setFormStatus("billChangeRuleForm","edit"),e.form.setFormItemsDisabled("billChangeRuleForm",{src_billtype:!0,src_transtype:!0,dest_billtype:!0,dest_transtype:!0})),e.meta.setMeta(r)}if(a.button){var n=a.button;e.button.setButtons(n)}}}))}}})};var r=a(1),n=(r.base.NCPopconfirm,r.base.NCIcon,r.base.NCMessage,"13050213")},350:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,n,l,o,s){var i=e.meta.getMeta();if("src_billtype"==a&&i[t].items.map((function(e){"dest_billtype"===e.attrcode&&(e.queryCondition={billtypecode:o.refcode,GridRefActionExt:"nccloud.web.riart.billtype.ref.action.BillChangeDestBillTypeConditionRef"}),"src_transtype"===e.attrcode&&(e.queryCondition={parentbilltype:o.refcode})})),"dest_billtype"===a){i[t].items.map((function(e){"dest_transtype"===e.attrcode&&(e.queryCondition={parentbilltype:o.refcode})}));var c=e.form.getAllFormValue(t);o.areaType="table";var u={dataForm:c},d=e;(0,r.ajax)({url:"/nccloud/riart/billexchange/billExchangeRuleCopyAction.do",type:"post",data:u,async:!1,success:function(e){var t=e.success,a=e.data;t&&"success"===a.result&&d.form.setFormItemsValue("billChangeRuleForm",{frontClass:{value:a.value.frontClass,display:a.value.frontClass},backClass:{display:a.value.backClass,value:a.value.backClass},src_billui:{display:a.value.src_billui,value:a.value.src_billui},src_qrytemplate:{display:a.value.src_qrytemplate,value:a.value.src_qrytemplate},src_nodekey:{display:a.value.src_nodekey,value:a.value.src_nodekey},reserveFrontClass:{display:a.value.reserveFrontClass,value:a.value.reserveFrontClass},reserveBackClass:{display:a.value.reserveBackClass,value:a.value.reserveBackClass},src_appcode:{display:a.value.src_appcode,value:a.value.src_appcode},src_pagecode:{display:a.value.src_pagecode,value:a.value.src_pagecode},src_nccqueryclass:{display:a.value.src_nccqueryclass,value:a.value.src_nccqueryclass},upgradeexclass:{display:a.value.upgradeexclass,value:a.value.upgradeexclass}})},error:function(e){alert(e.message)}})}e.meta.setMeta(i)};var r=a(1)},351:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,r,n){}},352:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){null==t?(0,r.ajax)({url:"/nccloud/riart/billtype/billChangeRule.do",success:function(t){var a=t.success,r=t.data;if(a)if(r&&r[n]){for(var l=0;l<t.data[n].rows.length;l++)t.data[n].rows[l].values.m_status={value:"browse",dispaly:"browse"};e.editTable.setTableData(n,t.data[n])}else e.editTable.setTableData(n,{rows:[]})}}):(t.oid="1004Z010000000004ZT7",(0,r.ajax)({url:"/nccloud/riart/billtype/billChangeRuleCondition.do",data:t,success:function(t){var a=t.success,r=t.data;if(a)if(r&&r[n]){for(var l=0;l<t.data[n].rows.length;l++)t.data[n].rows[l].values.m_status={value:"browse",dispaly:"browse"};e.editTable.setTableData(n,t.data[n])}else e.editTable.setTableData(n,{rows:[]})}}))};var r=a(1),n="billChangeRule"},353:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){};a(1)},8:function(e,t){e.exports=a}})}));
//# sourceMappingURL=index.c2a12f94.js.map