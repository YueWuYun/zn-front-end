/*! @ncctag {"date":"2020-5-11 23:44:44"} */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nc-lightapp-front"),require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["nc-lightapp-front","react","react-dom"],t):"object"==typeof exports?exports["uap/wfm/billChangeRule/setrule/index"]=t(require("nc-lightapp-front"),require("react"),require("react-dom")):e["uap/wfm/billChangeRule/setrule/index"]=t(e["nc-lightapp-front"],e.React,e.ReactDOM)}(window,(function(e,t,a){return function(e){var t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="../../../../",a(a.s=361)}({1:function(t,a){t.exports=e},100:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(2),l=o(r),i=(o(a(8)),a(1));function o(e){return e&&e.__esModule?e:{default:e}}i.base.NCInput,i.high.Refer;var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onSelectEve=function(e,t,a){},a.state={treeData:[]},a.formId="mapping",a.preprops=e.preprops,a.preindex=e.preindex,a.src_billtype=e.src_billtype,a.state={json:{},inlt:null},a.getTreeData(),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"afterEvent",value:function(e,t,a,n,r){}},{key:"componentDidMount",value:function(){this.props.getValueOK(this.props.asyncTree,this.preprops,this.preindex,"mapping")}},{key:"queryCondition",value:function(){}},{key:"publishOK",value:function(){return obj}},{key:"getAllData",value:function(){return this.props.form.getAllFormValue(this.formId)}},{key:"getTreeData",value:function(){var e=this,t={pid:"root",queryCondition:{src_billtype:this.src_billtype,existNodeMetaid:"Y"}};(0,i.ajax)({method:"post",data:t,url:"/nccloud/riart/ref/mdtreeRefByBilltype.do",success:function(t){e.props.asyncTree.setTreeData("mapping",t.data.rows),e.setState({treeData:t.data.rows})}})}},{key:"loadTreeData",value:function(e,t,a){var n=this,r=n.props.asyncTree.getAsyncTreeValue("mapping",e),l={pid:e,queryCondition:{src_billtype:this.src_billtype,metaid:r.def1,existNodeMetaid:"Y"}};(0,i.ajax)({method:"post",data:l,url:"/nccloud/riart/ref/mdtreeRefByBilltype.do",success:function(e){var t=e.success,a=e.data;t&&(n.props.asyncTree.addTreeData("mapping",a.rows),n.setState({treeData:a.rows}))}})}},{key:"render",value:function(){var e=this.props,t=(e.table,e.button,e.search,e.form),a=(e.editTable,e.asyncTree),n=(e.modal,t.createForm,a.createAsyncTree);return l.default.createElement("div",{style:{height:"330px"}},l.default.createElement("div",{className:"tree1"},n({treeId:"mapping",editType:!1,onSelectEve:this.onSelectEve.bind(this),selectedForInit:this.onSelectEve.bind(this),loadTreeData:this.loadTreeData.bind(this)})))}}]),t}(r.Component);s=(0,i.createPage)({})(s),t.default=s},17:function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var a=t.protocol+"//"+t.host,n=a+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var r,l=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(l)?e:(r=0===l.indexOf("//")?l:0===l.indexOf("/")?a+l:n+l.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")}))}},2:function(e,a){e.exports=t},3:function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=function(e,t){var a=e[1]||"",n=e[3];if(!n)return a;if(t&&"function"==typeof btoa){var r=(i=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),l=n.sources.map((function(e){return"/*# sourceURL="+n.sourceRoot+e+" */"}));return[a].concat(l).concat([r]).join("\n")}var i;return[a].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+a+"}":a})).join("")},t.i=function(e,a){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},r=0;r<this.length;r++){var l=this[r][0];"number"==typeof l&&(n[l]=!0)}for(r=0;r<e.length;r++){var i=e[r];"number"==typeof i[0]&&n[i[0]]||(a&&!i[2]?i[2]=a:a&&(i[2]="("+i[2]+") and ("+a+")"),t.push(i))}},t}},361:function(e,t,a){"use strict";var n,r,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=a(2),o=f(i),s=f(a(8)),u=a(1),c=(f(a(98)),f(a(99))),d=f(a(100));a(362);var p=a(364);function f(e){return e&&e.__esModule?e:{default:e}}u.base.NCBreadcrumb.NCBreadcrumbItem;var b=u.base.NCDiv,h=void 0,v=void 0,y=void 0,m=void 0,g=(n=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.call(a),a.props=e,a.state={isShow:!1,src_billtype:"",dest_billtype:"",pk_vochange:"",title:"",metaclassid:"",formulavalue:"",appcode:"",name:"aaa",json:{},inlt:null},a.state.appcode=e.getSearchParam("c"),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),l(t,[{key:"componentWillMount",value:function(){var e=this;this.props.MultiInit.getMultiLang({moduleId:"1022-13050213",domainName:"uap",callback:function(t,a,n){a&&e.setState({json:t,inlt:n})}})}},{key:"componentDidMount",value:function(){var e=this.props.getUrlParam("pk_vochange");this.getData(e),this.getBtn()}},{key:"getSearchParam",value:function(e){if(e){var t="",a=window.parent.location.hash||window.parent.location.search,n="";if(n=a.includes("?")?a.split("?")[1]:a.substring(1)){var r=n.split("&");r&&r instanceof Array&&r.forEach((function(a){-1!=a.indexOf("=")&&a.split("=")&&a.split("=")instanceof Array&&a.split("=")[0]===e&&a.split("=")[1]&&(t=decodeURIComponent(decodeURIComponent(a.split("=")[1])))}))}return t}}},{key:"onAfterEvent",value:function(){}},{key:"onButtonClick",value:function(e,t){var a=e.editTable.getCheckedRows("changerule");switch(t){case"save_rule":var n=e.getUrlParam("pk_vochange"),r={changerule:{changerule:e.editTable.getAllData("changerule")},splitrule:{splitrule:e.editTable.getAllData("splitrule")},pk_vochange:n};(0,u.ajax)({url:"/nccloud/riart/billexchange/billMappingSave.do",method:"POST",data:r,success:function(t){var a=t.success,n=t.data;a&&"success"==n.result&&((0,u.toast)({color:t.data.result}),e.linkTo("/uap/wfm/billChangeRule/list/index.html",{pagecode:"1305021301"})),a&&"success"!=n.result&&(0,u.toast)({content:t.data.message,color:t.data.result})},error:function(e){(0,u.toast)({content:e.message,color:"danger"})}});break;case"cancel_rule":e.linkTo("/uap/wfm/billChangeRule/list/index.html",{pagecode:"1305021301"});break;case"setvalue":if(1!=a.length)return void(0,u.toast)({content:this.state.json["13050213-000050"],color:"warning"});e.modal.show("modal",{title:this.state.json["13050213-000023"],size:"lg",content:o.default.createElement(c.default,{getValueOK:this.getValueOK.bind(this),preprops:e,preindex:a[0].index,initvalue:a[0].data.values.ruleData.value}),beSureBtnClick:this.getValueOK.bind(this)});break;case"setmapping":if(1!=a.length)return void(0,u.toast)({content:this.state.json["13050213-000050"],color:"warning"});e.modal.show("modal",{title:this.state.json["13050213-000024"],size:"lg",content:o.default.createElement(d.default,{getValueOK:this.getValueOK.bind(this),preprops:e,preindex:a[0].index,src_billtype:this.state.src_billtype}),beSureBtnClick:this.getValueOK.bind(this)});break;case"setformula":if(1!=a.length)return void(0,u.toast)({content:this.state.json["13050213-000050"],color:"warning"});this.setState({formulavalue:a[0].data.values.ruleData.value,isShow:!0});break;case"setnull":if(1!=a.length)return void(0,u.toast)({content:this.state.json["13050213-000050"],color:"warning"});e.editTable.setValByKeyAndIndex("changerule",a[0].index,"ruleType",{value:"",display:""}),e.editTable.setValByKeyAndIndex("changerule",a[0].index,"ruleData",{value:"",display:""}),e.editTable.setValByKeyAndIndex("changerule",a[0].index,"ruledata_name",{value:"",display:""})}}},{key:"getValueOK",value:function(e,t,a,n){if(e)h=e,v=t,y=a,m=n;else{if("setvalue"===m){var r=h.getAllFormValue(m);v.editTable.setValByKeyAndIndex("changerule",y,"ruleData",{value:r.rows[0].values.setvalue.value,display:r.rows[0].values.setvalue.value}),v.editTable.setValByKeyAndIndex("changerule",y,"ruledata_name",{value:""}),v.editTable.setValByKeyAndIndex("changerule",y,"ruleType",{value:1,display:this.state.json["13050213-000023"]})}if("mapping"===m){var l=h.getSelectNodeAsync(m);v.editTable.setValByKeyAndIndex("changerule",y,"ruleData",{value:l.refpk,display:l.refpk}),v.editTable.setValByKeyAndIndex("changerule",y,"ruledata_name",{value:l.refname,display:l.refname}),v.editTable.setValByKeyAndIndex("changerule",y,"ruleType",{value:2,display:this.state.json["13050213-000024"]})}}}},{key:"onOK",value:function(e){var t=this.props.editTable.getCheckedRows("changerule");this.setState({isShow:!1}),""===e?(this.props.editTable.setValByKeyAndIndex("changerule",t[0].index,"ruleType",{value:"",display:""}),this.props.editTable.setValByKeyAndIndex("changerule",t[0].index,"ruleData",{value:"",display:""}),this.props.editTable.setValByKeyAndIndex("changerule",t[0].index,"ruledata_name",{value:"",display:""})):(this.props.editTable.setValByKeyAndIndex("changerule",t[0].index,"ruleType",{value:3,display:this.state.json["13050213-000025"]}),this.props.editTable.setValByKeyAndIndex("changerule",t[0].index,"ruleData",{value:e}),this.props.editTable.setValByKeyAndIndex("changerule",t[0].index,"ruledata_name",{value:""}))}},{key:"onCancel",value:function(e){this.setState({isShow:!1})}},{key:"onHide",value:function(){this.setState({isShow:!1})}},{key:"onTabChange",value:function(e){"2"==e&&this.props.button.setButtonsVisible("setconfig",!1),"1"==e&&this.props.button.setButtonsVisible("setconfig",!0)}},{key:"splitAfterEvent",value:function(e,t,a,n,r,l,i){"selected"===a&&(i.values.selected.value?this.props.editTable.setEditableRowKeyByRowId("splitrule",i.rowid,"timespace",!0):this.props.editTable.setEditableRowKeyByRowId("splitrule",i.rowid,"timespace",!1))}},{key:"render",value:function(){var e=this.props,t=e.table,a=e.button,n=e.modal,r=e.search,l=e.editTable,i=e.BillHeadInfo,s=l.createEditTable,c=(t.createSimpleTable,r.NCCreateSearch,a.createButton,this.props.simpleSearch.createSimpleSearch,n.createModal),d=u.base.NCTabs,f=d.NCTabPane,h=u.high.FormulaEditor,v=i.createBillHeadInfo,y=this.state.json["13050213-000012"]+"-"+this.state.json["13050213-000013"],m=this.state.json["13050213-000012"]+"-"+this.state.json["13050213-000014"];return o.default.createElement("div",{className:"nc-single-table"},c("modal"),o.default.createElement(b,{areaCode:b.config.HEADER},o.default.createElement("div",{className:"nc-bill-header-area"},o.default.createElement("div",{className:"header-title-search-area"},"13050213"===this.state.appcode?v({title:y,initShowBackBtn:!1}):v({title:m,initShowBackBtn:!1})),o.default.createElement("div",{className:"header-button-area"},this.props.button.createButtonApp({area:"area_rule",buttonLimit:4,onButtonClick:this.onButtonClick.bind(this),popContainer:document.querySelector(".header-button-area")})))),o.default.createElement("div",{className:"nc-theme-sp-common-font-c"},o.default.createElement("div",{className:"nc-singleTable-search-area"},this.state.title)),o.default.createElement(h,{ref:"formulaEditor",value:this.state.formulavalue,show:this.state.isShow,onOk:this.onOK.bind(this),onCancel:this.onCancel.bind(this),onHide:this.onHide.bind(this),metaParam:{pk_billtype:this.state.src_billtype,classid:this.state.metaclassid}}),o.default.createElement("div",{className:"nc-singleTable-table-area"},o.default.createElement(d,{navtype:"turn",contenttype:"moveleft",defaultActiveKey:"1",onChange:this.onTabChange.bind(this)},o.default.createElement(f,{tab:this.state.json["13050213-000051"],key:"1"},s("changerule",{onAfterEvent:p.afterEvent.bind(this),showIndex:!0,showCheck:!0,onSelected:this.onSelectedFn.bind(this),adaptionHeight:!0,cancelCustomRightMenu:!0})),o.default.createElement(f,{tab:this.state.json["13050213-000052"],key:"2"},s("splitrule",{onAfterEvent:this.splitAfterEvent.bind(this),showIndex:!0,adaptionHeight:!0,cancelCustomRightMenu:!0})))))}}]),t}(i.Component),r=function(){var e=this;this.getBtn=function(){!function(e){var t=decodeURIComponent(window.location.href).split("?");if(t&&t[1]){var a=t[1].split("&");if(a&&a instanceof Array){var n={};a.forEach((function(e){var t=e.split("=")[0],a=e.split("=")[1];n[t]=a})),n[e]}}}("ar");var t=e;(0,u.ajax)({url:"/nccloud/platform/appregister/queryallbtns.do",data:{appcode:"13050213",pagecode:"1305021301"},success:function(e){t.props.button.setButtons(e.data),t.props.button.setDisabled({add:!1})}})},this.getData=function(t){var a=e;(0,u.ajax)({url:"/nccloud/riart/billexchange/billMapping.do",data:t,success:function(t){var n=t.success,r=t.data;if(n)if(n&&"success"==r.result){"none"===r.metaclassid?a.setState({title:r.title,metaclassid:""}):a.setState({title:r.title,metaclassid:r.metaclassid}),a.props.editTable.setTableData("changerule",r.changerule.changerule);a.props.editTable.getAllData("changerule");if(a.props.editTable.setStatus("changerule","browse"),e.state.src_billtype=r.src_billtypecode,"none"===r.splitrule)a.props.editTable.setTableData("splitrule",{rows:[]});else{a.props.editTable.setTableData("splitrule",r.splitrule.splitrule);var l=a.props.editTable.getAllData("splitrule");a.props.editTable.setStatus("splitrule","edit"),setTimeout((function(){if(l.rows.length>0)for(var e=0;e<l.rows.length;e++)l.rows[e].values.ismust.value||l.rows[e].values.selected.value?a.props.editTable.setEditableRowKeyByRowId("splitrule",l.rows[e].rowid,"timespace",!0):a.props.editTable.setEditableRowKeyByRowId("splitrule",l.rows[e].rowid,"timespace",!1)}),1)}}else a.props.editTable.setTableData("changerule",{rows:[]}),a.props.editTable.setTableData("splitrule",{rows:[]})}})},this.onCloseModelFn=function(e){},this.onSelectedFn=function(e,t,a,n){var r=e.editTable.getCheckedRows("changerule");if(r.length>1)for(var l=0;l<r.length;l++)r[l].index!=n&&e.editTable.selectTableRows("changerule",r[l].index,!1)}},n);g=(0,u.createPage)({initTemplate:p.initTemplate})(g),s.default.render(o.default.createElement(g,null),document.querySelector("#app"))},362:function(e,t,a){var n=a(363);"string"==typeof n&&(n=[[e.i,n,""]]);var r={transform:void 0};a(4)(n,r);n.locals&&(e.exports=n.locals)},363:function(e,t,a){(e.exports=a(3)(!1)).push([e.i,".nc-singleTable-search-area {\n  font-weight: bold;\n  border-radius: 0;\n  border-bottom: 1px solid #d0d0d0;\n  margin-bottom: 0;\n  font-size: 14px;\n}\n.nc-single-table .nc-singleTable-search-area {\n  border-radius: 0;\n  margin-bottom: 0;\n}\n",""])},364:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tableModelConfirm=t.searchBtnClick=t.afterEvent=t.initTemplate=t.buttonClick=void 0;var n=s(a(365)),r=s(a(366)),l=s(a(367)),i=s(a(368)),o=s(a(369));function s(e){return e&&e.__esModule?e:{default:e}}t.buttonClick=n.default,t.initTemplate=r.default,t.afterEvent=l.default,t.searchBtnClick=i.default,t.tableModelConfirm=o.default},365:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){switch(t){case"add":e.editTable.addRow(r,0),e.editTable.setValByKeyAndIndex(r,0,"m_status",{value:"add",dispaly:"add"}),e.button.setDisabled({add:!0});var a=e.editTable.getNumberOfRows(r);a>1&&setTimeout((function(){for(var t=1;t<a;t++)e.editTable.setEditableRowByIndex(r,t,!1)}),0);break;case"save_rule":var l=e.getUrlParam("pk_vochange"),i=e.editTable.getAllData("changerule"),o=e.editTable.getAllData("splitrule"),s={changerule:{changerule:i},splitrule:{splitrule:o},pk_vochange:l};(0,n.ajax)({url:"/nccloud/riart/billexchange/billMappingSave.do",method:"POST",data:s,success:function(e){var t=e.success,a=e.data;t&&"success"==a.result&&(0,n.toast)({content:this.state.json["13050213-000000"],color:e.data.result}),t&&"success"!=a.result&&(0,n.toast)({content:e.data.message,color:e.data.result})},error:function(e){alert(e.message)}});break;case"cancel_rule":e.linkTo("/uap/wfm/billChangeRule/list",{pagecode:"1305021301"})}};var n=a(1),r=(n.base.Message,"billChangeRule")},366:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.MultiInit.getMultiLang({moduleId:"1022-13050213",domainName:"uap",callback:function(t,a,n){if(a){var r={code:"13050213",pageid:"1305021301",changerule:{items:[{itemtype:"input",visible:!0,width:"220px",label:t["13050213-000019"],disabled:!0,required:!0,attrcode:"dest_attr"},{itemtype:"input",visible:!1,label:t["13050213-000020"],disabled:!0,required:!1,attrcode:"src_billtype"},{itemtype:"input",visible:!0,width:"220px",label:t["13050213-000021"],disabled:!0,attrcode:"dest_attrname"},{itemtype:"select",visible:!0,label:t["13050213-000022"],required:!0,attrcode:"ruleType",options:[{display:"",value:100},{display:t["13050213-000023"],value:1},{display:t["13050213-000024"],value:2},{display:t["13050213-000025"],value:3}]},{itemtype:"input",visible:!0,width:"240px",label:t["13050213-000026"],disabled:!0,attrcode:"ruleData"},{itemtype:"input",visible:!0,width:"220px",label:t["13050213-000027"],disabled:!0,attrcode:"ruledata_name"}],moduletype:"table",pagination:!0,code:"changerule",status:"browse",name:t["13050213-000028"]},splitrule:{items:[{itemtype:"label",visible:!0,label:t["13050213-000029"],disabled:!0,required:!0,attrcode:"itemtype"},{itemtype:"input",visible:!1,label:t["13050213-000030"],attrcode:"item"},{itemtype:"label",visible:!0,disabled:!0,width:"280px",label:t["13050213-000030"],attrcode:"itemname"},,{itemtype:"checkbox_switch",visible:!0,width:"80px",label:t["13050213-000031"],disabled:!0,attrcode:"ismust"},{itemtype:"number",visible:!0,width:"80px",label:t["13050213-000032"],required:!1,attrcode:"timespace"},{itemtype:"checkbox_switch",visible:!0,width:"80px",label:t["13050213-000033"],attrcode:"selected"},{itemtype:"label",visible:!1,label:"pk_vochange_s",attrcode:"pk_vochange_s"},{itemtype:"label",visible:!1,label:"pk_vochange",attrcode:"pk_vochange"},{itemtype:"label",visible:!1,label:"pk_vosplititem",attrcode:"pk_vosplititem"}],moduletype:"table",pagination:!0,code:"splitrule",status:"browse",name:t["13050213-000028"]},relation:{}};e.meta.setMeta(r)}}})};var n=a(1);r(a(99)),r(a(100)),r(a(98));function r(e){return e&&e.__esModule?e:{default:e}}n.base.NCPopconfirm,n.base.NCIcon,n.base.NCMessage,n.high.Refer,n.high.FormulaEditor},367:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,n,r,l,i){("selected"==a&&n&&e.editTable.setEditableRowKeyByRowId(t,r[0].rowid,"timespace",!0),"selected"!=a||n||e.editTable.setEditableRowKeyByRowId(t,r[0].rowid,"timespace",!1),"ruleType"===a&&"3"===n&&this.setState({isShow:!0}),"src_billtype"==a)&&e.meta.getMeta().billChangeRule.items.map((function(e){"dest_billtype"==e.attrcode&&(e.queryCondition={billtypecode:n.refcode,ExtRefSqlBuilder:"nccloud.web.riart.billtype.ref.action.BillChangeDestBillTypeConditionRef"}),"src_transtype"==e.attrcode&&(e.queryCondition={parentbilltype:n.refcode})}));if("dest_billtype"==a){e.meta.getMeta().billChangeRule.items.map((function(e){"dest_transtype"==e.attrcode&&(e.queryCondition={parentbilltype:n.refcode})}));var o=e.editTable.getAllRows(t,!1);if(null!=o&&o.length>1)for(var s=1;s<o.length;s++)if(""!==o[s].values.src_transtype.value&&""!=o[s].values.dest_transtype.value&&o[s].values.src_billtype.display===o[0].values.src_billtype.display&&o[s].values.dest_billtype.value===n.refcode){e.editTable.setValByKeyAndIndex(t,0,"frontClass",o[s].values.frontClass),e.editTable.setValByKeyAndIndex(t,0,"backClass",o[s].values.backClass),e.editTable.setValByKeyAndIndex(t,0,"src_billui",o[s].values.src_billui),e.editTable.setValByKeyAndIndex(t,0,"src_qrytemplate",o[s].values.src_qrytemplate),e.editTable.setValByKeyAndIndex(t,0,"src_nodekey",o[s].values.src_nodekey),e.editTable.setValByKeyAndIndex(t,0,"reserveFrontClass",o[s].values.reserveFrontClass),e.editTable.setValByKeyAndIndex(t,0,"reserveBackClass",o[s].values.reserveBackClass);break}}};var n=a(1);r(a(98)),r(a(99)),r(a(100));function r(e){return e&&e.__esModule?e:{default:e}}n.high.FormulaEditor},368:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(null==t)(0,n.ajax)({url:"/nccloud/riart/billtype/billChangeRule.do",success:function(t){var a=t.success,n=t.data;a&&(n&&n[r]?e.editTable.setTableData(r,t.data[r]):e.editTable.setTableData(r,{rows:[]}))}});else{(0,n.ajax)({url:"/nccloud/riart/billtype/billChangeRuleCondition.do",data:t,success:function(t){var a=t.success,n=t.data;a&&(n&&n[r]?e.editTable.setTableData(r,t.data[r]):e.editTable.setTableData(r,{rows:[]}))}})}};var n=a(1),r="billChangeRule"},369:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){};a(1)},4:function(e,t,a){var n,r,l={},i=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=n.apply(this,arguments)),r}),o=function(e){var t={};return function(a){return void 0===t[a]&&(t[a]=e.call(this,a)),t[a]}}((function(e){return document.querySelector(e)})),s=null,u=0,c=[],d=a(17);function p(e,t){for(var a=0;a<e.length;a++){var n=e[a],r=l[n.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](n.parts[i]);for(;i<n.parts.length;i++)r.parts.push(m(n.parts[i],t))}else{var o=[];for(i=0;i<n.parts.length;i++)o.push(m(n.parts[i],t));l[n.id]={id:n.id,refs:1,parts:o}}}}function f(e,t){for(var a=[],n={},r=0;r<e.length;r++){var l=e[r],i=t.base?l[0]+t.base:l[0],o={css:l[1],media:l[2],sourceMap:l[3]};n[i]?n[i].parts.push(o):a.push(n[i]={id:i,parts:[o]})}return a}function b(e,t){var a=o(e.insertInto);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=c[c.length-1];if("top"===e.insertAt)n?n.nextSibling?a.insertBefore(t,n.nextSibling):a.appendChild(t):a.insertBefore(t,a.firstChild),c.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");a.appendChild(t)}}function h(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=c.indexOf(e);t>=0&&c.splice(t,1)}function v(e){var t=document.createElement("style");return e.attrs.type="text/css",y(t,e.attrs),b(e,t),t}function y(e,t){Object.keys(t).forEach((function(a){e.setAttribute(a,t[a])}))}function m(e,t){var a,n,r,l;if(t.transform&&e.css){if(!(l=t.transform(e.css)))return function(){};e.css=l}if(t.singleton){var i=u++;a=s||(s=v(t)),n=T.bind(null,a,i,!1),r=T.bind(null,a,i,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(a=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",y(t,e.attrs),b(e,t),t}(t),n=x.bind(null,a,t),r=function(){h(a),a.href&&URL.revokeObjectURL(a.href)}):(a=v(t),n=_.bind(null,a),r=function(){h(a)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else r()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=i()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var a=f(e,t);return p(a,t),function(e){for(var n=[],r=0;r<a.length;r++){var i=a[r];(o=l[i.id]).refs--,n.push(o)}e&&p(f(e,t),t);for(r=0;r<n.length;r++){var o;if(0===(o=n[r]).refs){for(var s=0;s<o.parts.length;s++)o.parts[s]();delete l[o.id]}}}};var g,w=(g=[],function(e,t){return g[e]=t,g.filter(Boolean).join("\n")});function T(e,t,a,n){var r=a?"":n.css;if(e.styleSheet)e.styleSheet.cssText=w(t,r);else{var l=document.createTextNode(r),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(l,i[t]):e.appendChild(l)}}function _(e,t){var a=t.css,n=t.media;if(n&&e.setAttribute("media",n),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}function x(e,t,a){var n=a.css,r=a.sourceMap,l=void 0===t.convertToAbsoluteUrls&&r;(t.convertToAbsoluteUrls||l)&&(n=d(n)),r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var i=new Blob([n],{type:"text/css"}),o=e.href;e.href=URL.createObjectURL(i),o&&URL.revokeObjectURL(o)}},8:function(e,t){e.exports=a},98:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(2),l=o(r),i=(o(a(8)),a(1));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}i.base.NCButton,i.base.NCFromControl;var c=i.high.FormulaEditor;function d(e){var t=e.setName,a=e.setExplain,n=e.name;return l.default.createElement("ul",null,l.default.createElement("li",null,n),l.default.createElement("li",{onClick:function(){a(json["13050213-000034"])},onDoubleClick:function(){t("lllllll")}},"1111111"),l.default.createElement("li",{onClick:function(){a(json["13050213-000035"])},onDoubleClick:function(){t("kkkkk")}},"2222222"),l.default.createElement("li",{onClick:function(){a(json["13050213-000036"])},onDoubleClick:function(){t(json["13050213-000037"])}},"3333333"))}var p=function(e){function t(){var e,a,n;s(this,t);for(var r=arguments.length,l=Array(r),i=0;i<r;i++)l[i]=arguments[i];return a=n=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),n.state={show:!1,name:"ahah"},u(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"onOK",value:function(){}},{key:"onCancel",value:function(){}},{key:"render",value:function(){var e=this;return l.default.createElement("div",null,l.default.createElement(c,{ref:"formulaEditor",value:"111111",show:!1,attrConfig:[{tab:"111",TabPaneContent:d,params:{name:this.state.name}}],formulaConfig:[{tab:"222",TabPaneContent:d,params:{}}],onOk:function(e){},onCancel:function(t){e.setState({show:!1})},metaParam:{pk_billtype:"CM02",bizmodelStyle:"fip",classid:""}}))}}]),t}(r.Component);p=(0,i.createPage)({})(p),t.default=p},99:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(2),l=o(r),i=(o(a(8)),a(1));function o(e){return e&&e.__esModule?e:{default:e}}i.base.NCInput,i.high.Refer;var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.formId="setvalue",a.preprops=e.preprops,a.preindex=e.preindex,a.state={json:{},inlt:null},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"componentWillMount",value:function(){var e=this;this.props.MultiInit.getMultiLang({moduleId:"1022-13050213",domainName:"uap",callback:function(t,a,n){a&&(e.setState({json:t,inlt:n}),e.setMetaData(t,e.props.initvalue))}})}},{key:"setMetaData",value:function(e,t){var a={setvalue:{items:[{itemtype:"input",maxlength:"40",visible:!1,label:"tt",disabled:!1,attrcode:"tt"},{itemtype:"textarea",maxlength:"200",visible:!0,label:e["13050213-000039"],rows:"6",initialvalue:{value:t||"",display:t||""},attrcode:"setvalue"},{itemtype:"select",visible:!0,label:e["13050213-000040"],attrcode:"selectvalue",options:[{display:e["13050213-000041"],value:"SYSDATE"},{display:e["13050213-000042"],value:"SYSOPERATOR"},{display:e["13050213-000043"],value:"SYSGROUP"},{display:e["13050213-000044"],value:"SYSTIME"},{display:e["13050213-000045"],value:"DESTBILLTYPE"},{display:e["13050213-000046"],value:"DESTTRANSTYPE"},{display:e["13050213-000047"],value:"NCSYSUSER"},{display:e["13050213-000048"],value:"BUZIDATE"},{display:e["13050213-000049"],value:"BUZITIME"}]}],moduletype:"form",pagination:!0,status:"edit",code:"setvalue",name:e["13050213-000023"]}};this.props.meta.setMeta(a)}},{key:"afterEvent",value:function(e,t,a,n,r){"selectvalue"===a&&e.form.setFormItemsValue(t,{setvalue:{display:n.value,value:n.value}})}},{key:"componentDidMount",value:function(){this.props.getValueOK(this.props.form,this.preprops,this.preindex,"setvalue")}},{key:"queryCondition",value:function(){}},{key:"publishOK",value:function(){return obj}},{key:"getAllData",value:function(){return this.props.form.getAllFormValue(this.formId)}},{key:"render",value:function(){var e=this.props,t=e.table,a=e.button,n=(e.search,e.form),r=e.editTable,i=e.syncTree,o=(e.modal,i.createSyncTree,t.createSimpleTable,a.createButton,r.createEditTable,n.createForm);return l.default.createElement("div",null,o(this.formId,{onAfterEvent:this.afterEvent.bind(this)}))}}]),t}(r.Component);s=(0,i.createPage)({})(s),t.default=s}})}));
//# sourceMappingURL=index.c2a12f94.js.map