/*! @ncctag {"date":"2020-5-11 23:44:44"} */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nc-lightapp-front"),require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["nc-lightapp-front","react","react-dom"],t):"object"==typeof exports?exports["uap/wfm/businessFlowDesign/list/index"]=t(require("nc-lightapp-front"),require("react"),require("react-dom")):e["uap/wfm/businessFlowDesign/list/index"]=t(e["nc-lightapp-front"],e.React,e.ReactDOM)}(window,(function(e,t,n){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="../../../../",n(n.s=370)}({0:function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var i,a,s,u,l={},c={},f={},p={},d=function(){var e={};return{get:function(t){return t in e?e[t]:null},add:function(t){Object.assign(e,t)},delete:function(t){for(var n=0;n<t.length;n++){var r=t[n];delete e[r]}},data:function(){return e},updateByItemId:function(t,n,r){var o=e[t][n];Object.assign(o,r)},bppUpdateById:function(t,n){var r=e[t];Object.assign(r,n)}}}(),h=(i={entity:{},link:{}},{setEnt:function(e){return Object.assign(i.entity,o({},e,!0))},setLink:function(e,t){return Object.assign(i.link,o({},e,t||!0))},delEnt:function(e){return delete i.entity[e]},delLink:function(e){return delete i.link[e]},entIncludes:function(e){return i.entity[e]},linkIncludes:function(e){return i.link[e]},clearAllSelected:function(){i.entity={},i.link={}},data:function(){return i}}),y=function(){var e=[],t=function(e){return Object.prototype.toString.call(e)};return{getByFlowId:function(t){return e.find((function(e){return!!e[t]}))},getByEntityId:function(n){return e.find((function(e){var r=t(e.entityId);return"[object String]"==r?e.entityId==n:"[object Array]"==r?e.entityId.some((function(e){return e==n})):void 0}))},push:function(t){e.push(t)},delete:function(t){e=e.filter((function(e){return!t.some((function(t){return t==e.flowId}))}))},delEntityFromFlow:function(e,n){var r=this.getByFlowId(e);if("[object Array]"==t(r.entityId)){var o=r.entityId.indexOf(n);r.entityId.splice(o,1)}else r.entityId=""},addEntityToFlow:function(e,n){var r=this.getByFlowId(e);"[object Array]"==t(r.entityId)?r.entityId.push(n):""==r.entityId?r.entityId=n:r.entityId=[r.entityId,n]},data:function(){return e}}}(),b=(a={},{setArr:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];arguments.length>2&&void 0!==arguments[2]&&arguments[2],a[e]||(a[e]={prevArr:t}),a[e].prevArr=Array.from(new Set([].concat(r(a[e].prevArr),r(t))))},getArr:function(e){return a[e]},deleteFromUpperAndPrev:function(e,t){if(a[e]){var n=a[e].prevArr;t.forEach((function(e){var t=n.indexOf(e);t>-1&&n.splice(t,1)}))}},includesInPrevArr:function(e,t){return a[e].prevArr.includes(t)},includesInUpperArr:function(e,t){return a[e].upperArr.includes(t)},data:function(){return a},delBill:function(e){return delete a[e]}}),v=(s={flowType:"",shouldUnload:!1},{get:function(e){return s[e]},set:function(e){return Object.assign(s,e)}}),m=function(){var e=void 0;return{set:function(t){e=t},get:function(){return e}}}(),g=function(){var e={billType:"",billPK:"",flowPackageId:"",isLightApp:"",metaclassid:"",pk_org:"",originFlowData:{}};return{set:function(t){return Object.assign(e,t)},get:function(){return e}}}(),w=(u=[],{set:function(e){return u.push.apply(u,e)},get:function(){return u}});t.setMultiLang=function(e){t.multiLang=l=e,console.log("test-multiLang",l),t.panelItemMap=c={start:l["utils-000000"],finish:l["utils-000001"],check:l["utils-000002"],manual:l["utils-000002"],auto:l["utils-000003"],subflow:l["utils-000004"],dummy:l["utils-000005"],lister:l["utils-000006"],vo:l["utils-000007"],router:l["utils-000008"],bill:l["utils-000009"],drive:l["utils-000010"]},t.activityNameMap=f={start:l["utils-000012"],finish:l["utils-000013"],check:l["utils-000002"],manual:l["utils-000002"],auto:l["utils-000003"],lister:l["utils-000006"],subflow:l["utils-000011"],dummy:l["utils-000005"]},t.activityTypeMap=p={start:l["utils-000000"],finish:l["utils-000001"],check:l["utils-000014"],manual:l["utils-000015"],auto:l["utils-000003"],lister:l["utils-000016"],subflow:l["utils-000004"],dummy:l["utils-000005"],vo:l["utils-000007"],router:l["utils-000008"],bill:l["utils-000018"],drive:l["utils-000017"]}},t.multiLang=l,t.panelItemMap=c,t.activityNameMap=f,t.activityTypeMap=p,t.attributesList=d,t.subflowsList=y,t.flowContext=g,t.usableSubflowList=w,t.urlConst=v,t.WorkflowGadgetlist=m,t.upBill=b,t.multiSelectList=h},1:function(t,n){t.exports=e},10:function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var i,a,s,u,l=function(){var e={};return{get:function(t){return t in e?e[t]:null},add:function(t){Object.assign(e,t)},delete:function(t){for(var n=0;n<t.length;n++){var r=t[n];delete e[r]}},data:function(){return e},updateByItemId:function(t,n,r){var o=e[t][n];Object.assign(o,r)},bppUpdateById:function(t,n){var r=e[t];Object.assign(r,n)}}}(),c=(i={entity:{},link:{}},{setEnt:function(e){return Object.assign(i.entity,o({},e,!0))},setLink:function(e,t){return Object.assign(i.link,o({},e,t||!0))},delEnt:function(e){return delete i.entity[e]},delLink:function(e){return delete i.link[e]},entIncludes:function(e){return i.entity[e]},linkIncludes:function(e){return i.link[e]},clearAllSelected:function(){i.entity={},i.link={}},data:function(){return i}}),f=function(){var e=[],t=function(e){return Object.prototype.toString.call(e)};return{getByFlowId:function(t){return e.find((function(e){return!!e[t]}))},getByEntityId:function(n){return e.find((function(e){var r=t(e.entityId);return"[object String]"==r?e.entityId==n:"[object Array]"==r?e.entityId.some((function(e){return e==n})):void 0}))},push:function(t){e.push(t)},delete:function(t){e=e.filter((function(e){return!t.some((function(t){return t==e.flowId}))}))},delEntityFromFlow:function(e,n){var r=this.getByFlowId(e);if("[object Array]"==t(r.entityId)){var o=r.entityId.indexOf(n);r.entityId.splice(o,1)}else r.entityId=""},addEntityToFlow:function(e,n){var r=this.getByFlowId(e);"[object Array]"==t(r.entityId)?r.entityId.push(n):""==r.entityId?r.entityId=n:r.entityId=[r.entityId,n]},data:function(){return e}}}(),p=(a={},{setArr:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];arguments.length>2&&void 0!==arguments[2]&&arguments[2],a[e]||(a[e]={prevArr:t}),a[e].prevArr=Array.from(new Set([].concat(r(a[e].prevArr),r(t))))},getArr:function(e){return a[e]},deleteFromUpperAndPrev:function(e,t){if(a[e]){var n=a[e].prevArr;t.forEach((function(e){var t=n.indexOf(e);t>-1&&n.splice(t,1)}))}},includesInPrevArr:function(e,t){return a[e].prevArr.includes(t)},includesInUpperArr:function(e,t){return a[e].upperArr.includes(t)},data:function(){return a},delBill:function(e){return delete a[e]}}),d=(s={flowType:"",shouldUnload:!1},{get:function(e){return s[e]},set:function(e){return Object.assign(s,e)}}),h=function(){var e=void 0;return{set:function(t){e=t},get:function(){return e}}}(),y=function(){var e={billType:"",billPK:"",flowPackageId:"",isLightApp:"",metaclassid:"",pk_org:""};return{set:function(t){return Object.assign(e,t)},get:function(){return e}}}(),b=(u=[],{set:function(e){return u.push.apply(u,e)},get:function(){return u}});t.attributesList=l,t.subflowsList=f,t.flowContext=y,t.usableSubflowList=b,t.urlConst=d,t.WorkflowGadgetlist=h,t.upBill=p,t.multiSelectList=c},101:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){u=this;e.MultiInit.getMultiLang({moduleId:"1022-13050213",domainName:"uap",callback:function(t,n,f){n?e.createUIDom({pagecode:"101654list",appcode:"101654"},(function(t){if(t){if(t.template){var n=t.template;n["101654designlist"].pagination=!0,n=function(e,t,n){n[a].items.map((function(e){"busiprop"==e.attrcode?(e.isMultiSelectedEnabled=!0,e.itemtype="select",e.options=[{value:"0",display:u.state.json.purchase},{value:"1",display:u.state.json.sale},{value:"2",display:u.state.json["purch-sale"]},{value:"3",display:u.state.json["receiv-pay"]},{value:"4",display:u.state.json["proj-cost"]},{value:"9",display:u.state.json.assets},{value:"6",display:u.state.json.hr},{value:"7",display:u.state.json.allocation},{value:"8",display:u.state.json.capital},{value:"5",display:u.state.json.other}]):"validity"==e.attrcode?(e.isMultiSelectedEnabled=!0,e.itemtype="select",e.options=[{value:0,display:u.state.json.disable},{value:1,display:u.state.json.enable},{value:2,display:u.state.json.initialize}]):"primarybilltype"==e.attrcode&&(e.itemtype="refer",e.refcode="uap/refer/riart/billTransTypeTreeRef/index",e.isMultiSelectedEnabled=!0)}));for(var l={label:u.state.json.operate,attrcode:"opr",itemtype:"customer",width:"220px",visible:!0,fixed:"right",render:function(e,n,l){var f=[];return f="1"==n.validity.value?["edit","delete","disUse","preview"]:["edit","delete","onUse","preview"],t.button.createOprationButton(f,{area:"bt_line",buttonLimit:4,onButtonClick:function(e,t){return function(e,t,n,l,f,p){t.modal;var d=[u.state.json.attention04,u.state.json.attention05];switch(n){case"edit":if(!(0,i.isChrome)(d))return;var h=t.search.getAllSearchData(a);h.pageInfo=t.table.getTablePageInfo(s),(0,o.setCookie)("busitypeQueryInfo",encodeURIComponent(JSON.stringify(h)));var y="/uap/wfm/flowEditor/flowMaker/index.html#/ifr?flowType=bpp&state=edit&pk_wf_def="+f.pk_busitype.value;t.linkTo(y);break;case"preview":if(!(0,i.isChrome)(d))return;u.displayPreview(f.pk_busitype.value);break;case"delete":if(t.editTable.cancelEdit(s),t.button.setDisabled({add:!1}),1==f.validity.value)return(0,r.toast)({content:u.state.json.disableFirst,color:"warning"}),null;t.modal.show("modal",{title:u.state.json.attention,content:u.state.json.inquiry01,beSureBtnClick:function(){var e={pk_wf_def:f.pk_busitype.value,actionType:"delete",areaType:"bt_line"};(0,r.ajax)({url:"/nccloud/riart/busiflow/busiflowButtonAction.do",data:e,success:function(e){"success"==e.data.success?(c(t),(0,r.toast)({content:u.state.json.delSuccess,color:"success"})):(0,r.toast)({content:e.data.errMsg,color:"warning"})}})}});break;case"disUse":var b={pk_wf_def:f.pk_busitype.value,actionType:"disUse",areaType:"bt_line"};(0,r.ajax)({url:"/nccloud/riart/busiflow/busiflowButtonAction.do",data:b,success:function(e){"success"==e.data.success?(c(t),(0,r.toast)({content:u.state.json.stopSuccess,color:"success"})):(0,r.toast)({content:e.data.errMsg,color:"warning"})}});break;case"onUse":b={pk_wf_def:f.pk_busitype.value,actionType:"onUse",areaType:"bt_line"};(0,r.ajax)({url:"/nccloud/riart/busiflow/busiflowButtonAction.do",data:b,success:function(e){"success"==e.data.success?(c(t),(0,r.toast)({content:u.state.json.starSuccess,color:"success"})):(0,r.toast)({content:e.data.errMsg,color:"warning"})}})}}(0,e,t,0,n)}})}},f=0;f<n[s].items.length;f++)"validity"==n[s].items[f].attrcode&&(n[s].items[f].render=function(e,t,n){return"0"==t.validity.value?React.createElement("span",null,React.createElement("i",{className:"icon iconfont icon-tingyong",style:{color:"rgba(255,95,87,1)"}})," "+t.validity.display):"1"==t.validity.value?React.createElement("span",null,React.createElement("i",{className:"icon iconfont icon-qiyong",style:{color:"rgba(40,202,67,1)"}})," "+t.validity.display):React.createElement("span",null,React.createElement("i",{className:"icon iconfont icon-zanting1",style:{color:"rgba(206,205,205,1)"}})," "+t.validity.display)});return n[s].items.push(l),n}(0,e,n),e.meta.setMeta(n),l(e)}if(t.button){var f=t.button;e.button.setButtons(f)}}})):console.log("Multilingual resources not loaded successfully!")}})},t.getAllData=l,t.refreshFun=c;var r=n(1),o=n(95),i=n(6),a="101654search",s="101654designlist",u=void 0;function l(e){var t=decodeURIComponent((0,o.getCookie)("busitypeQueryInfo")),n=e.table.getTablePageInfo(s);if(t){var i=JSON.parse(t);e.search.setSearchValue(a,i),i.pageInfo&&(n=i.pageInfo)}var u=e.search.getQueryInfo(a);u.pageInfo=n,n||u.pageInfo.pageIndex||(u.pageInfo={pageIndex:0,pageSize:"10"}),u.hideDisUse=(0,o.getCookie)("hideDisUse"),null==u.hideDisUse&&(u.hideDisUse="Y",(0,o.setCookie)("hideDisUse","Y")),(0,r.ajax)({url:"/nccloud/riart/busiflow/busiflowQuery.do",data:u,success:function(t){var n=t.success,o=t.data;n&&"success"===o.result&&(o&&null==o.value?e.table.setAllTableData(s,{rows:[]}):o&&o.value.businessFlowDesign?e.table.setAllTableData(s,o.value.businessFlowDesign):e.table.setAllTableData(s,{rows:[]})),o&&"danger"==o.result&&(0,r.toast)({content:o.exception,color:"danger"})},error:function(e){alert(e.message)}})}function c(e){var t=e.search.getQueryInfo(a);t.pageInfo=e.table.getTablePageInfo(s),t.hideDisUse=(0,o.getCookie)("hideDisUse"),null==t.hideDisUse&&(t.hideDisUse="Y",(0,o.setCookie)("hideDisUse","Y")),(0,r.ajax)({url:"/nccloud/riart/busiflow/busiflowQuery.do",data:t,success:function(t){var n=t.success,o=t.data;n&&"success"===o.result&&(o&&null==o.value?e.table.setAllTableData(s,{rows:[]}):o&&o.value.businessFlowDesign?e.table.setAllTableData(s,o.value.businessFlowDesign):e.table.setAllTableData(s,{rows:[]})),o&&"danger"==o.result&&(0,r.toast)({content:o.exception,color:"danger"})},error:function(e){alert(e.message)}})}},11:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setSubflowId=t.selectLink=t.unselectAll=t.selectEntity=t.move=t.setCustom=t.setEntities=t.metaEntityReducer=void 0;var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(22),a=(r=i)&&r.__esModule?r:{default:r},s=n(10),u=n(23);var l=function(e){return o({},e,{isSelected:!1})};t.metaEntityReducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],n=arguments[2],r=arguments[3];switch(t.type){case"editor/entity/SET":return t.payload.map((function(e){return{id:e.id,isAnchored:!1,isSelected:!1,anchor:{x:e.width/2,y:e.height/2}}}));case"editor/metaentity/SELECT":var i=t.payload,a=i.id,s=i.isSelected;return e.map((function(e){return e.id==a?o({},e,{isSelected:s}):o({},e,{isSelected:!1})}));case"editor/canvas/ANCHOR_ENTITY":var u=t.payload.id;return e.map((function(e){return e.id==u?o({},e,{isAnchored:!0,anchor:{x:r.cursor.x-(n.find((function(e){return e.id==u}))||{x:0}).x,y:r.cursor.y-(n.find((function(e){return e.id==u}))||{y:0}).y}}):o({},e,{isAnchored:!1})}));case"editor/canvas/ANCHOR_CANVAS":return e.map(l);case"editor/entity/CONNECT":case"editor/metaentity/UNSELECTALL":return e.map(l);default:return e}},t.setEntities=function(e){return{type:"editor/entity/SET",payload:e}},t.setCustom=function(e){return{type:"editor/entity/SET_CUSTOM",payload:e}},t.move=function(e){return{type:"editor/entity/MOVE",payload:e}},t.selectEntity=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{type:"editor/metaentity/SELECT",payload:{id:e,isSelected:t}}},t.unselectAll=function(){return{type:"editor/metaentity/UNSELECTALL",payload:null}},t.selectLink=function(e,t){return{type:"editor/link/SELECT_LINK",payload:{fromId:e,linkId:t}}},t.setSubflowId=function(e,t){return{type:"editor/entity/SET_SUBFLOWID",payload:{entityId:e,subflowId:t}}};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],n=arguments[2],r=arguments[3];switch(t.type){case"editor/entity/SET":return t.payload;case"editor/config/SET":var i=t.payload;return e.map((function(e){var t=i.entityTypes[e.type];return t?o({},e,{width:t.width,height:t.height}):e}));case"editor/canvas/TRACK":if(r.anchoredEntity.isAnchored){var l=r.anchoredEntity.id,c=n.find((function(e){return e.id===l}))||{anchor:{x:0,y:0}},f=r.cursor.x-c.anchor.x,p=r.cursor.y-c.anchor.y,d=f,h=p;s.urlConst.get("flowType");return e.map((function(t){return t.linksTo&&t.id===l?o({},t,{x:d,y:h,linksTo:t.linksTo.map((function(n){return o({},n,{points:(0,a.default)(t,(0,u.getEntity)(e,n.target),n.points.lineType,null,n.points.curviness,!0)})}))}):t.id===l?o({},t,{x:d,y:h}):t.linksTo&&t.linksTo.some((function(e){return e.target===l}))?o({},t,{linksTo:t.linksTo.map((function(n){return n.target===l?o({},n,{points:(0,a.default)(t,(0,u.getEntity)(e,n.target),n.points.lineType,null,n.points.curviness,!0)}):n}))}):t}))}return e;case"editor/entity/SET_SUBFLOWID":var y=t.payload,b=y.entityId,v=y.subflowId;return e.map((function(e){return e.id==b?o({},e,{subflowId:v}):e}));case"editor/entity/SET_CUSTOM":var m=t.payload,g=m.id,w=m.custom;return e.map((function(e){return e.id==g?o({},e,{custom:w}):e}));case"editor/link/SELECT_LINK":var k=t.payload,x=k.fromId,E=k.linkId;return e.map((function(e){return e.id==x?o({},e,{linksTo:e.linksTo.map((function(e){return e.linkId==E?o({},e,{selected:!0}):o({},e,{selected:!1})}))}):e}));case"editor/metaentity/SELECT":case"editor/canvas/ANCHOR_CANVAS":return e.map((function(e){return o({},e,{linksTo:e.linksTo?e.linksTo.map((function(e){return o({},e,{selected:!1})})):[]})}));default:return e}}},12:function(e,t,n){"use strict";n.r(t),n.d(t,"__DO_NOT_USE__ActionTypes",(function(){return i})),n.d(t,"applyMiddleware",(function(){return b})),n.d(t,"bindActionCreators",(function(){return f})),n.d(t,"combineReducers",(function(){return l})),n.d(t,"compose",(function(){return y})),n.d(t,"createStore",(function(){return s}));var r=n(14),o=function(){return Math.random().toString(36).substring(7).split("").join(".")},i={INIT:"@@redux/INIT"+o(),REPLACE:"@@redux/REPLACE"+o(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+o()}};function a(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function s(e,t,n){var o;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(s)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var u=e,l=t,c=[],f=c,p=!1;function d(){f===c&&(f=c.slice())}function h(){if(p)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return l}function y(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(p)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var t=!0;return d(),f.push(e),function(){if(t){if(p)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");t=!1,d();var n=f.indexOf(e);f.splice(n,1)}}}function b(e){if(!a(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(p)throw new Error("Reducers may not dispatch actions.");try{p=!0,l=u(l,e)}finally{p=!1}for(var t=c=f,n=0;n<t.length;n++){(0,t[n])()}return e}function v(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");u=e,b({type:i.REPLACE})}function m(){var e,t=y;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(h())}return n(),{unsubscribe:t(n)}}})[r.a]=function(){return this},e}return b({type:i.INIT}),(o={dispatch:b,subscribe:y,getState:h,replaceReducer:v})[r.a]=m,o}function u(e,t){var n=t&&t.type;return"Given "+(n&&'action "'+String(n)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function l(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var o=t[r];0,"function"==typeof e[o]&&(n[o]=e[o])}var a,s=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:i.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:i.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+i.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(n)}catch(e){a=e}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,o={},i=0;i<s.length;i++){var l=s[i],c=n[l],f=e[l],p=c(f,t);if(void 0===p){var d=u(l,t);throw new Error(d)}o[l]=p,r=r||p!==f}return r?o:e}}function c(e,t){return function(){return t(e.apply(this,arguments))}}function f(e,t){if("function"==typeof e)return c(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var n={};for(var r in e){var o=e[r];"function"==typeof o&&(n[r]=c(o,t))}return n}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(n,!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function b(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},o={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},i=t.map((function(e){return e(o)}));return h({},n,{dispatch:r=y.apply(void 0,i)(n.dispatch)})}}}},13:function(e,t,n){"use strict";e.exports=n(34)},14:function(e,t,n){"use strict";(function(e,r){var o,i=n(19);o="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:r;var a=Object(i.a)(o);t.a=a}).call(this,n(29),n(30)(e))},15:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetViewport=t.anchorEntity=t.connecting=t.anchorCanvas=t.zoom=t.trackMovement=t.configViewport=t.initialColors=void 0;var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(35),a=(r=i)&&r.__esModule?r:{default:r};n(10);var s=function(e,t,n){return{width:(e.width-t.x)/n,height:(e.height-t.y)/n}},u=function(e){var t=a.default.get();return o({},e,{canvasViewport:t,canvasArtboard:o({},e.canvasArtboard,s(t,e.canvasArtboard,e.zoom))})};t.initialColors=function(e){return{type:"editor/link/INITIAL_COLORS",payload:e}},t.configViewport=function(e){return{type:"editor/canvas/CONFIG_VIEWPORT",payload:e}},t.trackMovement=function(e){return{type:"editor/canvas/TRACK",payload:e}},t.zoom=function(e,t,n,r){return{type:"editor/canvas/ZOOM",payload:{zoom:e,offsetX:t,offsetY:n,reset:r}}},t.anchorCanvas=function(e){return{type:"editor/canvas/ANCHOR_CANVAS",payload:e}},t.connecting=function(e){return{type:"editor/canvas/CONNECT",payload:e}},t.anchorEntity=function(e){var t=e.isAnchored,n=void 0===t||t,r=e.id;return{type:"editor/canvas/ANCHOR_ENTITY",payload:{isAnchored:n,id:void 0===r?"":r,clientX:e.clientX,clientY:e.clientY}}},t.resetViewport=function(){return{type:"editor/canvas/RESET_VIEWPORT"}};t.default=function(e,t){switch(t.type){case"editor/canvas/CONFIG_VIEWPORT":return u(e);case"editor/config/SET":return o({},e,{gridSize:t.payload.gridSize});case"editor/canvas/ANCHOR_CANVAS":return o({},e,{selectedEntity:{id:"",linkId:""},canvasAnchor:{isMoving:t.payload,coords:e.cursor}});case"editor/canvas/TRACK":var n=e.zoom,r=t.payload,i=r.x,a=r.y,l=e.canvasViewport,c=l.x,f=l.y,p=e.canvasAnchor.coords,d=p.x,h=p.y,y=e.canvasArtboard,b=y.x,v=y.y;return e.canvasAnchor.isMoving?o({},e,{canvasArtboard:function(){var t=i-c-d*n,r=a-f-h*n,u={x:t>0?0:t,y:r>0?0:r};return o({},s(e.canvasViewport,u,n),u)}()}):o({},e,{cursor:{x:1/n*(i-c-b),y:1/n*(a-f-v)}});case"editor/canvas/ZOOM":var m=t.payload,g=m.zoom,w=m.offsetX,k=m.offsetY,x=m.reset,E=s(e.canvasViewport,x?e.canvasArtboard:{x:0,y:0},g),_=e.canvasArtboard.x-w,O=e.canvasArtboard.y-k;return o({},e,{zoom:g,canvasArtboard:o({},e.canvasArtboard,{x:_,y:O,width:E.width+Math.abs(_)/g,height:E.height+Math.abs(O)/g})});case"editor/canvas/CONNECT":return o({},e,{connecting:t.payload});case"editor/canvas/ANCHOR_ENTITY":return o({},e,{anchoredEntity:t.payload});case"editor/canvas/RESET_VIEWPORT":return o({},u(e));case"editor/metaentity/SELECT":var S=t.payload.id;return o({},e,{selectedEntity:{id:S,linkId:""}});case"editor/link/SELECT_LINK":var T=t.payload,P=(T.fromId,T.linkId);return o({},e,{selectedEntity:o({},e.selectedEntity,{linkId:P})});case"editor/link/INITIAL_COLORS":return o({},e,{lineColors:t.payload});default:return e}}},17:function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var o,i=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(i)?e:(o=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")}))}},19:function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",(function(){return r}))},2:function(e,n){e.exports=t},20:function(e,t,n){"use strict";var r=n(13),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?a:s[e.$$typeof]||o}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0};var l=Object.defineProperty,c=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,h=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(h){var o=d(n);o&&o!==h&&e(t,o,r)}var a=c(n);f&&(a=a.concat(f(n)));for(var s=u(t),y=u(n),b=0;b<a.length;++b){var v=a[b];if(!(i[v]||r&&r[v]||y&&y[v]||s&&s[v])){var m=p(n,v);try{l(t,v,m)}catch(e){}}}return t}return t}},21:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.store=void 0;var r=c(n(2)),o=n(12),i=c(n(31)),a=n(7),s=n(42),u=c(s),l=c(n(44));function c(e){return e&&e.__esModule?e:{default:e}}n(57);var f=t.store=(0,o.createStore)(u.default,s.initialState,(0,o.applyMiddleware)(i.default));t.default=function(e){return r.default.createElement(a.Provider,{store:f},r.default.createElement("div",{className:"editorWrapper"},r.default.createElement(l.default,{customEntities:e.customEntities})))}},22:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(10);var r=function(e,t,n){return{x:(t.x-e.x)*n+e.x,y:(t.y-e.y)*n+e.y}},o=function(e,t){var n=Math.abs(t.x-e.x),r=Math.abs(t.y-e.y);return Math.sqrt(n*n+r*r)},i=function(e,t,n,i,a,s,u,l){if(u=u||0,l){var c=(d=i,{x:((p=n).x+d.x)/2,y:(p.y+d.y)/2}),f=function(e,t){var n=t.x-e.x,r=t.y-e.y,o=void 0;return 0==n?r>0?90:r<0?270:0:0==r?n>0?0:180:isNaN(n)||isNaN(r)?0:(o=180*Math.atan(Math.abs(r/n))/Math.PI,n<0?o=r<0?180+o:180-o:r<0&&(o=360-o),o)}(n,i);s={x:c.x+u*Math.sin(f/180*Math.PI),y:c.y-u*Math.cos(f/180*Math.PI)}}for(var p,d,h=s||{x:(n.x+i.x)/2,y:(n.y+i.y)/2},y=o(n,i),b=o(i,h),v=(y-25*((n.x-i.x)*(h.x-i.x)+(n.y-i.y)*(h.y-i.y))/(y*b))/y,m=[n,{x:n.x+2*(h.x-n.x)/3,y:n.y+2*(h.y-n.y)/3},{x:i.x+2*(h.x-i.x)/3,y:i.y+2*(h.y-i.y)/3},i],g=[],w=1;w<4;w++)g.push(r(m[w-1],m[w],v));return g.push(r(g[0],g[1],v)),g.push(r(g[1],g[2],v)),g.push(r(g[3],g[4],v)),{lineType:a,pointsArr:[m[0],g[0],g[3],g[5]],QPointsArr:[n,h,i],cPoint:h,curviness:u}};t.default=function(e,t,n,r,o,a){if(null==e||null==t)return[{x:0,y:0},{x:100,y:100}];var s={x:e.x+e.width/2,y:e.y+e.height/2},u={x:t.x+t.width/2,y:t.y+t.height/2};return i(0,0,s,u,n,r,o,a)}},23:function(e,t,n){"use strict";function r(){for(var e=navigator.userAgent.split(" "),t="",n=0;n<e.length;n++)/chrome/i.test(e[n])&&(t=e[n]);return t?Number(t.split("/")[1].split(".")[0]):(alert("为了获得更好的用户体验请使用谷歌浏览器打开!"),!1)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t){return e.find((function(e){return e.id==t}))};t.isChrome=function(){return!!r()&&(!(r()<52)||(alert("您使用的谷歌浏览器版本过低，为了更好地体验请将浏览器升级到最新版本!"),!1))},t.uuid=function(){for(var e=[],t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")},t.getEntity=o,t.getEntityByType=function(e,t){return e.find((function(e){return e.type==t}))},t.getLink=function(e,t,n){var r=void 0;if(n)r=e.find((function(e){return e.id==n})).linksTo.find((function(e){return e.linkId==t}));else for(var o=0;o<e.length;o++){if(r=e[o].linksTo.find((function(e){return e.linkId==t})))break}return r},t.panelItemMap={start:"开始",finish:"结束",check:"人工活动",manual:"人工活动",auto:"自动活动",subflow:"子流程",dummy:"虚活动",lister:"制单人",vo:"VO交换",router:"路由器",bill:"单据",drive:"动作驱动"},t.activityTypeMap={start:"开始活动",finish:"结束活动",check:"审核",manual:"手工活动",auto:"自动活动",lister:"制单",subflow:"子流程",dummy:"虚活动",vo:"VO交换",router:"路由器",bill:"单据",drive:"驱动"},t.activityNameMap={start:"开始",finish:"结束",check:"人工活动",manual:"人工活动",auto:"自动活动",lister:"制单人",subflow:"新建子流程",dummy:"虚活动"},t.formatTime=function(e){var t=new Date,n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var r in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?n[r]:("00"+n[r]).substr((""+n[r]).length)));return e},t.getLinksByTarget=function(e,t){for(var n=[],r=0;r<e.length;r++){var o=e[r].linksTo;if(o&&o.length>0)for(var i=0;i<o.length;i++){var a=o[i];a.target==t&&n.push(a)}}return n},t.setTransform=function(e,t){e.transform=t,e.webkitTransform=t,e.mozTransform=t},t.isTransformSupported=function(e){return"transform"in e||"webkitTransform"in e||"MozTransform"in e},t.getQueryString=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.hash.substr(6).match(t);return null!=n?unescape(n[2]):null},t.parseUrl=function(){var e=window.location.hash.substr(2),t={};return e.replace(/(\w+)=([a-zA-Z0-9_-]+)/gi,(function(e,n,r){t[n]=unescape(r)})),t},t.getUpperBill=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments[4],a=t.id;function s(e,t,n,r){for(var u=t.linksFrom,l=0;l<u.length;l++){var c=u[l];if("bill"==c.type&&"bpp_link_wb"!=c.lineType){if(n.push(c.entityId),a==t.id&&r.push(c.entityId),i&&r.length>0)return;s(e,o(e,c.entityId),n,r)}else if("drive"==c.type){var f=o(e,c.entityId);if(!f||f.ctm_class)continue;var p=f.linksFrom[0]&&f.linksFrom[0].entityId;if(p==t.id)continue;if(p){if(n.push(p),f.linksTo.some((function(e){return e.target==a}))&&r.push(p),i&&r.length>0)return;s(e,o(e,p),n,r)}}}}s(e,t,r,n);var u=new Set(r);r.length=0,r.push.apply(r,Array.from(u))},t.getLowerBill=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=t.id;function a(e,t,r){for(var s=t.linksTo,u=0;u<s.length;u++){var l=s[u];if("bpp_link_ps"==l.type){r.push(l.target),i==l.from&&n.push(l.target);var c=o(e,l.target);a(e,c,r)}else if("bpp_link"==l.type){var f=o(e,l.target);if("drive"==f.type)if("continue"===function(){if(f.ctm_class)return"continue";var t=f.id;f.linksFrom.length>0&&f.linksFrom[0].entityId==i&&!f.ctm_class&&f.linksTo.forEach((function(e){n.push(e.target)})),e.filter((function(e){return e.linksFrom.some((function(e){return e.entityId==t}))})).forEach((function(t){r.push(t.id),a(e,t,r)}))}())continue}}}a(e,t,r);var s=new Set(r);r.length=0,r.push.apply(r,Array.from(s))},t.isEmptyObject=function(e){for(var t in e)return!1;return!0}},26:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.customEntities=t.config=void 0;var r=s(n(68)),o=s(n(71)),i=s(n(74)),a=s(n(77));function s(e){return e&&e.__esModule?e:{default:e}}var u={approve:{entityTypes:{start:{width:40,height:40},finish:{width:40,height:40},check:{width:40,height:40},dummy:{width:40,height:40},subflow:{width:40,height:40}},gridSize:20},workflow:{entityTypes:{start:{width:40,height:40},finish:{width:40,height:40},manual:{width:40,height:40},auto:{width:40,height:40},dummy:{width:40,height:40},subflow:{width:40,height:40}},gridSize:20},bpp:{entityTypes:{start:{width:40,height:40},finish:{width:40,height:40},bill:{width:40,height:40},drive:{width:30,height:30},vo:{width:40,height:40},router:{width:40,height:40}},gridSize:20}},l={start:{component:r.default,icon:(0,a.default)("flow-start.png"),bg:"flow-start.png"},finish:{component:r.default,icon:(0,a.default)("flow-finish.png"),bg:"flow-finish.png"},lister:{component:r.default,icon:(0,a.default)("flow-lister.png"),bg:"flow-lister.png"},check:{component:r.default,icon:(0,a.default)("flow-check.png"),bg:"flow-check.png"},dummy:{component:r.default,icon:(0,a.default)("flow-dummy.png"),bg:"flow-dummy.png"},subflow:{component:i.default,icon:(0,a.default)("flow-subflow.png"),bg:"flow-subflow.png"},auto:{component:r.default,icon:(0,a.default)("flow-auto.png"),bg:"flow-auto.png"},manual:{component:r.default,icon:(0,a.default)("flow-check.png"),bg:"flow-check.png"},bill:{component:r.default,icon:(0,a.default)("bpp_bill.png"),bg:"bpp_bill.png"},drive:{component:o.default,icon:(0,a.default)("bpp_drive.png"),bg:"bpp_drive.png"},vo:{component:r.default,icon:(0,a.default)("bpp_vo.png"),bg:"bpp_vo.png"},router:{component:r.default,icon:(0,a.default)("bpp_router.png"),bg:"bpp_router.png"}};t.config=u,t.customEntities=l},29:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},3:function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var o=(a=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),i=r.sources.map((function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"}));return[n].concat(i).concat([o]).join("\n")}var a;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<e.length;o++){var a=e[o];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},30:function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},31:function(e,t,n){"use strict";function r(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(o){return"function"==typeof o?o(n,r,e):t(o)}}}}n.r(t);var o=r();o.withExtraArgument=r,t.default=o},32:function(e,t,n){"use strict";var r=n(33);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,i,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},33:function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},34:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&Symbol.for,o=r?Symbol.for("react.element"):60103,i=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,u=r?Symbol.for("react.profiler"):60114,l=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,f=r?Symbol.for("react.async_mode"):60111,p=r?Symbol.for("react.concurrent_mode"):60111,d=r?Symbol.for("react.forward_ref"):60112,h=r?Symbol.for("react.suspense"):60113,y=r?Symbol.for("react.suspense_list"):60120,b=r?Symbol.for("react.memo"):60115,v=r?Symbol.for("react.lazy"):60116,m=r?Symbol.for("react.fundamental"):60117,g=r?Symbol.for("react.responder"):60118;function w(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case o:switch(e=e.type){case f:case p:case a:case u:case s:case h:return e;default:switch(e=e&&e.$$typeof){case c:case d:case l:return e;default:return t}}case v:case b:case i:return t}}}function k(e){return w(e)===p}t.typeOf=w,t.AsyncMode=f,t.ConcurrentMode=p,t.ContextConsumer=c,t.ContextProvider=l,t.Element=o,t.ForwardRef=d,t.Fragment=a,t.Lazy=v,t.Memo=b,t.Portal=i,t.Profiler=u,t.StrictMode=s,t.Suspense=h,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===p||e===u||e===s||e===h||e===y||"object"==typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===b||e.$$typeof===l||e.$$typeof===c||e.$$typeof===d||e.$$typeof===m||e.$$typeof===g)},t.isAsyncMode=function(e){return k(e)||w(e)===f},t.isConcurrentMode=k,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===o},t.isForwardRef=function(e){return w(e)===d},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===v},t.isMemo=function(e){return w(e)===b},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===u},t.isStrictMode=function(e){return w(e)===s},t.isSuspense=function(e){return w(e)===h}},35:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,i=(r=null,o={},{set:function(e){r=e},gc:function(){r=void 0},get:function(){if(r){var e=r.getBoundingClientRect(),t=e.top,n=e.left,o=e.width,i=e.height;return{width:parseInt(o,10),height:parseInt(i,10),y:parseInt(t,10),x:parseInt(n,10)}}return{width:100,height:100,x:0,y:0}},getRef:function(e){return o[e]},saveRef:function(e){return function(t){o[e]=t}}});t.default=i},36:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.setConfig=function(e){return{type:"editor/config/SET",payload:e}};t.default=function(e,t){switch(t.type){case"editor/config/SET":return t.payload;default:return e}}},370:function(e,t,n){"use strict";var r,o,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2),s=h(a),u=h(n(8)),l=n(1),c=h(n(67)),f=n(371),p=n(101),d=n(95);function h(e){return e&&e.__esModule?e:{default:e}}n(376);var y=l.base.NCDiv,b=(l.base.NCPopconfirm,"101654designlist"),v=(r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.call(n),n.props=e,n.props.hideDisUse="Y",n.state={showPreview:!1,pk_wf_def:"",isShow:!0,appcode:"",json:{},inlt:null},n.state.appcode=n.getSearchParam("c"),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){}},{key:"getData",value:function(e){}},{key:"componentWillMount",value:function(){var e=this,t={name:"file",showUploadList:!1,multiple:!1,data:{actionType:"import"},action:"/nccloud/riart/busiflow/busiflowImportAndExport.do",supportServerRender:!1,accept:"*.ufbf",beforeUpload:function(e){var t=e.name,n=t.lastIndexOf(".");return"ufbf"===t.substr(n+1)||((0,l.toast)({content:_this.state.json.attention01,color:"warning"}),!1)},onChange:function(e){var t=e.file.status;if("uploading"!==t&&console.log(e.file,e.fileList),"done"===t){var n=e.file.response.data;if(n.value&&"success"===n.result&&"none"!=n.value){var r=n.value[b];this.props.table.setAllTableData(b,r),n.focus_index&&this.props.table.focusRowByIndex(b,parseInt(n.focus_index))}if("success"===n.result&&!n.isbatch)return(0,l.toast)({content:_this.state.json.attention02,color:"success"}),void(0,p.refreshFun)(this.props);"danger"===n.result&&(0,l.toast)({content:n.error,color:"danger"}),"warning"===n.result&&(0,l.toast)({content:n.error,color:"danger"})}else"error"===t&&(0,l.toast)({content:_this.state.json.attention03,color:"danger"})},headers:{authorization:"authorization-text"}};this.props.button.setUploadConfig("import",t),f.initTemplate.call(this,this.props);this.props.MultiInit.getMultiLang({moduleId:"uap-wfm-busiflowDesign",domainName:"uap",callback:function(t,n,r){n?e.setState({json:t,inlt:r}):((0,l.toast)({content:"Multilingual resources not loaded successfully!",color:"danger"}),console.log("Multilingual resources not loaded successfully!"))}});var n=(0,d.getCookie)("hideDisUse");n||((0,d.setCookie)("hideDisUse","Y"),n="Y"),"Y"==n?(this.props.button.setButtonVisible(["hideDisUse"],!1),this.props.button.setButtonVisible(["showDisUse"],!0)):(this.props.button.setButtonVisible(["hideDisUse"],!0),this.props.button.setButtonVisible(["showDisUse"],!1))}},{key:"getSearchParam",value:function(e){if(e){var t="",n=window.parent.location.hash||window.parent.location.search,r="";if(r=n.includes("?")?n.split("?")[1]:n.substring(1)){var o=r.split("&");o&&o instanceof Array&&o.forEach((function(n){-1!=n.indexOf("=")&&n.split("=")&&n.split("=")instanceof Array&&n.split("=")[0]===e&&n.split("=")[1]&&(t=decodeURIComponent(decodeURIComponent(n.split("=")[1])))}))}return t}}},{key:"onSearchAfterEvent",value:function(e,t){var n={},r="",o="";if("primarybilltype"==e){if(t&&t.length>0)for(var i in t){o=o+","+t[i].refcode,r=r+","+t[i].refname}o=o.substr(1),r=r.substr(1),n.value=o,n.display=r,this.props.search.setSearchValByField("101654search","primarybilltype",n)}}},{key:"doubClinck",value:function(e,t,n,r){var o=e.pk_busitype.value,i=n.search.getAllSearchData("101654search");i.pageInfo=n.table.getTablePageInfo(b),(0,d.setCookie)("busitypeQueryInfo",encodeURIComponent(JSON.stringify(i)));var a="/uap/wfm/flowEditor/flowMaker/index.html#/ifr?flowType=bpp&state=edit&pk_wf_def="+o;n.linkTo(a)}},{key:"render",value:function(){var e=this.props,t=e.table,n=e.modal,r=e.search,o=t.createSimpleTable,i=r.NCCreateSearch,a=n.createModal,u=this.props.BillHeadInfo.createBillHeadInfo;return s.default.createElement("div",{className:"nc-bill-list"},a("modal"),s.default.createElement(y,{areaCode:y.config.HEADER},s.default.createElement("div",{className:"nc-bill-header-area"},s.default.createElement("span",null,u({title:""+this.state.json.busiflowDesign,initShowBackBtn:!1})),s.default.createElement("div",{className:"header-button-area"},this.props.button.createButtonApp({area:"bt_head",buttonLimit:6,onButtonClick:f.buttonClick.bind(this),popContainer:document.querySelector(".header-button-area")})))),s.default.createElement("div",{className:"nc-bill-search-area"},i("101654search",{clickSearchBtn:f.searchBtnClick.bind(this),onAfterEvent:this.onSearchAfterEvent.bind(this),showAdvBtn:!0})),s.default.createElement("div",{className:"nc-bill-table-area"},o(b,{onAfterEvent:f.afterEvent.bind(this),handlePageInfoChange:this.pageInfoClick.bind(this),onRowDoubleClick:this.doubClinck.bind(this),showIndex:!0,showCheck:!0})),this.state.showPreview&&s.default.createElement(c.default,{pk_wf_def:this.state.pk_wf_def,flowType:"bpp",hide:this.hidePreview}))}}]),t}(a.Component),o=function(){var e=this;this.onCloseModelFn=function(e){},this.displayPreview=function(t){e.setState({showPreview:!0,pk_wf_def:t})},this.hidePreview=function(){e.setState({showPreview:!1})},this.pageInfoClick=function(t,n,r,o){(0,f.searchBtnClick)(t,r,!1,e.state.json)}},r);v=(0,l.createPage)({initTemplate:f.initTemplate})(v),u.default.render(s.default.createElement(v,null),document.querySelector("#app"))},371:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tableModelConfirm=t.searchBtnClick=t.afterEvent=t.initTemplate=t.buttonClick=void 0;var r=u(n(372)),o=u(n(101)),i=u(n(373)),a=u(n(374)),s=u(n(375));function u(e){return e&&e.__esModule?e:{default:e}}t.buttonClick=r.default,t.initTemplate=o.default,t.afterEvent=i.default,t.searchBtnClick=a.default,t.tableModelConfirm=s.default},372:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){switch(s=this,t){case"add":var n=[s.state.json.attention04,s.state.json.attention05];if(!(0,a.isChrome)(n))return;e.linkTo("/uap/wfm/flowEditor/flowMaker/index.html#/ifr?flowType=bpp&state=add");break;case"refresh":(0,o.refreshFun)(e);break;case"showDisUse":"N"==(0,i.getCookie)("hideDisUse")||((0,i.setCookie)("hideDisUse","N"),(0,o.getAllData)(e)),this.props.button.setButtonVisible(["showDisUse"],!1),this.props.button.setButtonVisible(["hideDisUse"],!0);break;case"hideDisUse":"Y"==(0,i.getCookie)("hideDisUse")||((0,i.setCookie)("hideDisUse","Y"),(0,o.getAllData)(e)),this.props.button.setButtonVisible(["showDisUse"],!0),this.props.button.setButtonVisible(["hideDisUse"],!1);break;case"import":var l={name:"file",showUploadList:!1,multiple:!1,data:{actionType:"import"},action:"/nccloud/riart/busiflow/busiflowImportAndExport.do",supportServerRender:!1,accept:"*.ufbf",beforeUpload:function(e){var t=e.name,n=t.lastIndexOf(".");return"ufbf"===t.substr(n+1)||((0,r.toast)({content:s.state.json.attention01,color:"warning"}),!1)},onChange:function(t){var n=t.file.status;if("uploading"!==n&&console.log(t.file,t.fileList),"done"===n){var i=t.file.response.data;if(i.value&&"success"===i.result&&"none"!=i.value){var a=i.value[u];e.table.setAllTableData(u,a),i.focus_index&&e.table.focusRowByIndex(u,parseInt(i.focus_index))}if("success"===i.result&&!i.isbatch)return(0,r.toast)({content:s.state.json.attention02,color:"success"}),void(0,o.refreshFun)(e);"danger"===i.result&&(0,r.toast)({content:i.error,color:"danger"}),"warning"===i.result&&(0,r.toast)({content:i.error,color:"danger"})}else"error"===n&&(0,r.toast)({content:s.state.json.attention03,color:"danger"})},headers:{authorization:"authorization-text"}};e.button.setUploadConfig("import",l);break;case"export":var c=e.table.getCheckedRows(u),f=[];if(!c)break;if(c.length<1)break;for(var p in c)f.push(c[p].data.values.pk_busitype.value);var d={pk_busitypes:f,actionType:"export"};(0,r.formDownload)({params:d,data:{},url:"/nccloud/riart/busiflow/busiflowImportAndExport.do",enctype:2})}};var r=n(1),o=n(101),i=n(95),a=n(6),s=void 0,u=(r.base.Message,"101654designlist")},373:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,o,i,a){"src_billtype"==n&&e.meta.getMeta()["101654designlist"].items.map((function(e){"dest_billtype"==e.attrcode&&(e.queryCondition={billtypecode:r.refcode,ExtRefSqlBuilder:"nccloud.web.riart.billtype.ref.action.BillChangeDestBillTypeConditionRef"}),"src_transtype"==e.attrcode&&(e.queryCondition={parentbilltype:r.refcode})}));if("dest_billtype"==n){e.meta.getMeta()["101654designlist"].items.map((function(e){"dest_transtype"==e.attrcode&&(e.queryCondition={parentbilltype:r.refcode})}));var s=e.editTable.getAllRows(t,!1);if(null!=s&&s.length>1)for(var u=1;u<s.length;u++)if(""!==s[u].values.src_transtype.value&&""!=s[u].values.dest_transtype.value&&s[u].values.src_billtype.display===s[0].values.src_billtype.display&&s[u].values.dest_billtype.value===r.refcode){e.editTable.setValByKeyAndIndex(t,0,"frontClass",s[u].values.frontClass),e.editTable.setValByKeyAndIndex(t,0,"backClass",s[u].values.backClass),e.editTable.setValByKeyAndIndex(t,0,"src_billui",s[u].values.src_billui),e.editTable.setValByKeyAndIndex(t,0,"src_qrytemplate",s[u].values.src_qrytemplate),e.editTable.setValByKeyAndIndex(t,0,"src_nodekey",s[u].values.src_nodekey),e.editTable.setValByKeyAndIndex(t,0,"reserveFrontClass",s[u].values.reserveFrontClass),e.editTable.setValByKeyAndIndex(t,0,"reserveBackClass",s[u].values.reserveBackClass);break}}}},374:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,a){var s=e.search.getQueryInfo("101654search");s.pageInfo=e.table.getTablePageInfo(i),0!=n?(s.hideDisUse="N",(0,o.setCookie)("hideDisUse","N"),this.props.button.setButtonVisible(["showDisUse"],!1),this.props.button.setButtonVisible(["hideDisUse"],!0),s.pageInfo.pageIndex=0):s.pageInfo.pagepks=t;if(sessionStorage.setItem("businessFlowList",JSON.stringify(t)),null==t)null!=t.conditions&&t.conditions.length>0&&(0,r.ajax)({url:"/nccloud/riart/busiflow/busiflowQuery.do",data:s,success:function(t){var n=t.success,o=t.data;n&&"success"===o.result&&(o&&o.value?e.table.setAllTableData(i,o.value.businessFlowDesign):e.table.setAllTableData(i,{rows:[]})),o&&"danger"==o.result&&(0,r.toast)({content:o.exception,color:"danger"})},error:function(e){alert(e.message)}});else{t.oid="1004Z010000000004ZT7",t.queryType="simple";var u=this;(0,r.ajax)({url:"/nccloud/riart/busiflow/busiflowQuery.do",data:s,success:function(t){var n=t.success,o=t.data;n&&"success"===o.result&&(o&&null==o.value?(e.table.setAllTableData(i,{rows:[]}),u&&(0,r.toast)({content:u.state.json.inquiry02,color:"warning"})):o&&o.value?(e.table.setAllTableData(i,o.value.businessFlowDesign),u&&(0,r.toast)({content:u.state.json.inquiry03+o.value.businessFlowDesign.pageInfo.total+u.state.json.inquiry04,color:"success"})):(e.table.setAllTableData(i,{rows:[]}),u&&(0,r.toast)({content:u.state.json.inquiry02,color:"warning"}))),o&&"danger"==o.result&&(0,r.toast)({content:o.exception,color:"danger"})},error:function(e){alert(e.message)}})}};var r=n(1),o=n(95),i="101654designlist"},375:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){console.log("AAAA")};n(1)},376:function(e,t,n){var r=n(377);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};n(4)(r,o);r.locals&&(e.exports=r.locals)},377:function(e,t,n){(e.exports=n(3)(!1)).push([e.i,'.fl {\n  float: left;\n}\n.fr {\n  float: right;\n}\n.cf {\n  *zoom: 1;\n}\n.cf:before,\n.cf:after {\n  display: table;\n  content: " ";\n}\n.cf:after {\n  clear: both;\n}\n#finance-reva-pobdoc-list {\n  min-width: 1440px;\n  padding: 20px;\n}\n#finance-reva-pobdoc-list .search-area {\n  padding: 20px;\n}\n#finance-reva-pobdoc-list .title-button-area {\n  height: 50px;\n  padding: 20px 0px 20px 20px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n}\n#finance-reva-pobdoc-list .title-button-area .title-area {\n  width: 30%;\n  height: 22px;\n  font-size: 16px;\n  font-family: PingFangHK-Medium;\n  color: #474d54;\n  line-height: 22px;\n}\n#finance-reva-pobdoc-list .title-button-area .button-area {\n  width: 70%;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: reverse;\n      -ms-flex-direction: row-reverse;\n          flex-direction: row-reverse;\n  padding-right: 20px;\n}\n#finance-reva-pobdoc-list .currency-opr-col {\n  width: 60px;\n}\n#finance-reva-pobdoc-list .currency-opr-col .currency-opr-del {\n  cursor: pointer;\n}\n#finance-reva-pobdoc-list .hide {\n  display: none;\n}\n.refer-container .refer-cascading-list {\n  z-index: 2333333;\n}\n.BillHeadInfoWrap .page-title-Icon {\n  margin: 4px 8px 0 0 !important;\n}\n',""])},4:function(e,t,n){var r,o,i={},a=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=r.apply(this,arguments)),o}),s=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e.call(this,n)),t[n]}}((function(e){return document.querySelector(e)})),u=null,l=0,c=[],f=n(17);function p(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=i[r.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](r.parts[a]);for(;a<r.parts.length;a++)o.parts.push(m(r.parts[a],t))}else{var s=[];for(a=0;a<r.parts.length;a++)s.push(m(r.parts[a],t));i[r.id]={id:r.id,refs:1,parts:s}}}}function d(e,t){for(var n=[],r={},o=0;o<e.length;o++){var i=e[o],a=t.base?i[0]+t.base:i[0],s={css:i[1],media:i[2],sourceMap:i[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function h(e,t){var n=s(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=c[c.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),c.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function y(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=c.indexOf(e);t>=0&&c.splice(t,1)}function b(e){var t=document.createElement("style");return e.attrs.type="text/css",v(t,e.attrs),h(e,t),t}function v(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function m(e,t){var n,r,o,i;if(t.transform&&e.css){if(!(i=t.transform(e.css)))return function(){};e.css=i}if(t.singleton){var a=l++;n=u||(u=b(t)),r=k.bind(null,n,a,!1),o=k.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",v(t,e.attrs),h(e,t),t}(t),r=E.bind(null,n,t),o=function(){y(n),n.href&&URL.revokeObjectURL(n.href)}):(n=b(t),r=x.bind(null,n),o=function(){y(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=d(e,t);return p(n,t),function(e){for(var r=[],o=0;o<n.length;o++){var a=n[o];(s=i[a.id]).refs--,r.push(s)}e&&p(d(e,t),t);for(o=0;o<r.length;o++){var s;if(0===(s=r[o]).refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete i[s.id]}}}};var g,w=(g=[],function(e,t){return g[e]=t,g.filter(Boolean).join("\n")});function k(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=w(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function x(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function E(e,t,n){var r=n.css,o=n.sourceMap,i=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||i)&&(r=f(r)),o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var a=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}},41:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initialColors=t.getEntity=t.parseUrl=t.urlConst=t.attributesList=t.uuid=t.isChrome=t.formatTime=t.calcLinkPoints=t.setEntities=t.setConfig=t.store=t.Graph=void 0;var r=n(21),o=f(r),i=n(11),a=n(36),s=n(15),u=f(n(22)),l=n(10),c=n(23);function f(e){return e&&e.__esModule?e:{default:e}}t.Graph=o.default,t.store=r.store,t.setConfig=a.setConfig,t.setEntities=i.setEntities,t.calcLinkPoints=u.default,t.formatTime=c.formatTime,t.isChrome=c.isChrome,t.uuid=c.uuid,t.attributesList=l.attributesList,t.urlConst=l.urlConst,t.parseUrl=c.parseUrl,t.getEntity=c.getEntity,t.initialColors=s.initialColors},42:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var r=u(n(15)),o=u(n(36)),i=u(n(43)),a=n(11),s=u(a);function u(e){return e&&e.__esModule?e:{default:e}}var l={x:0,y:0},c=t.initialState={mainFlowId:"",entity:[],metaEntity:[],canvas:{cursor:l,canvasViewport:{x:0,y:0,width:100,height:100},canvasArtboard:{x:0,y:0,width:100,height:100},connecting:{currently:!1,from:"",lineStyle:""},anchoredEntity:{isAnchored:!1,id:""},selectedEntity:{id:"",linkId:""},canvasAnchor:{isMoving:!1,coords:l},lineColors:[],zoom:.875},config:{entityTypes:{}}};t.default=(0,i.default)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments[1];return{canvas:(0,r.default)(e.canvas,t),entity:(0,s.default)(e.entity,t,e.metaEntity,e.canvas),metaEntity:(0,a.metaEntityReducer)(e.metaEntity,t,e.entity,e.canvas),config:(0,o.default)(e.config,t)}}))},43:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};n(10);t.default=function(e){return function(t,n){var o=e(t,n);switch(n.type){case"editor/canvas/TRACK":return o;default:return r({},o)}}}},44:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=b(n(2)),a=n(7),s=b(n(35)),u=b(n(45)),l=n(48),c=b(l),f=b(n(49)),p=n(11),d=n(15),h=b(n(52)),y=b(n(22));function b(e){return e&&e.__esModule?e:{default:e}}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n(55);var k=function(e){function t(e){m(this,t);var n=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setDivRef=function(t){e.innerRef(t)},n}return w(t,e),o(t,[{key:"render",value:function(){return i.default.createElement("div",{onMouseMove:this.props.onMouseMove,ref:this.setDivRef,className:"canvasViewport"},this.props.children)}}]),t}(i.default.PureComponent),x=function(e){var t=100-100/e.gridSize,n=e.gridSize,o=e.zoomLevel,i=e.canvasAnchor,a=e.artboard,s={transform:"translate("+a.x+"px, "+a.y+"px) scale("+o+")",width:a.width,height:a.height,cursor:i.isMoving?"grabbing":""};return n?r({},s,{backgroundImage:"linear-gradient(0deg, transparent 0%, transparent "+t+"%, rgba(190, 190, 190, 0.9) 100%), linear-gradient(90deg, transparent 0%, transparent "+t+"%, rgba(190, 190, 190, 0.9) 100%)",backgroundSize:n+"px "+n+"px"}):s},E=function(e){return i.default.createElement("div",{className:"canvasArtboard",style:x(e),onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onWheel:e.onWheel},e.children)},_=function(e){return i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:e.width,height:e.height,className:"svgLand"},e.children)},O=function(e){function t(){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return w(t,e),o(t,[{key:"render",value:function(){var e=this.props,t=e.entities,n=e.wrappedCustomEntities;return i.default.createElement(i.default.Fragment,null,t.map((function(e){var t={entity:e,CustomEntity:n[e.type]};return i.default.createElement(t.CustomEntity,{key:t.entity.id,icon:c.default,model:t.entity})})))}}]),t}(i.default.PureComponent),S=function(e){return i.default.createElement(k,{onMouseMove:e.onMouseMove,innerRef:function(t){return e.handleRef(t)}},i.default.createElement(E,{onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onWheel:e.onWheel,gridSize:e.gridSize,artboard:e.artboard,zoomLevel:e.zoomLevel,canvasAnchor:e.canvasAnchor},i.default.createElement("div",{className:"relative-surface"},i.default.createElement(_,{width:e.artboard.width+"px",height:e.artboard.height+"px"},e.entities.map((function(e){return e.linksTo.length>0&&i.default.createElement(h.default,{key:e.id,links:e.linksTo})}))),i.default.createElement(O,{entities:e.entities,wrappedCustomEntities:e.wrappedCustomEntities})),i.default.createElement(u.default,null)))},T=function(e){function t(e){m(this,t);var n=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.zoomSteps=[.625,.6875,.75,.8125,.875,.9375,1,1.0625,1.125,1.1875],n.wrappedCustomEntities=Object.assign.apply(Object,[{}].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(Object.keys(n.props.customEntities).map((function(e){return v({},e,(0,f.default)((0,a.connect)(null,{calcLinkPoints:y.default})(n.props.customEntities[e].component)))}))))),n.zoomIn=function(){n.traversZoomLevels(1)},n.zoomOut=function(){n.traversZoomLevels(-1)},n.handleRef=function(e){void 0===n.canvasDom&&(n.canvasDom=e,n.setOffset())},n.state={zoomStep:6},n.onMouseDown=n.onMouseDown.bind(n),n.onMouseUp=n.onMouseUp.bind(n),n.onMouseMove=n.onMouseMove.bind(n),n.onWheel=n.onWheel.bind(n),n.reset=n.reset.bind(n),n}return w(t,e),o(t,[{key:"componentDidMount",value:function(){var e=this;"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual"),window.document.addEventListener("mouseup",this.clearSelection),Object.keys(this.props.customEntities).forEach((function(t){l.icons.addIcon(v({},t,e.props.customEntities[t].icon))}))}},{key:"componentWillUnmount",value:function(){window.document.removeEventListener("mouseup",this.clearSelection),this.canvasDom=void 0,s.default.gc()}},{key:"setOffset",value:function(){if(this.canvasDom){var e=this.canvasDom;s.default.set(e),s.default.saveRef("canvasViewport")(e),0!==window.scrollY&&window.scrollTo(0,0),this.props.configViewport()}}},{key:"traversZoomLevels",value:function(e,t,n){var r=this,o=this.zoomSteps.length-1,i=this.state.zoomStep+e;this.setState((function(t){return{zoomStep:(n=t.zoomStep,i>o?o:i<0?0:n+e)};var n}),(function(){return r.props.zoom(r.zoomSteps[r.state.zoomStep],t,n)}))}},{key:"reset",value:function(){var e=this.props,t=e.entities,n=e.viewport,r=e.artboard,o=e.zoom,i=e.zoomLevel;if(0!=t.length){var a=t.sort((function(e,t){return e.x-t.x})),s=a[a.length-1],u=s.x+2*s.width,l=t.sort((function(e,t){return e.y-t.y})),c=l[l.length-1],f=c.y+3*c.height,p=n.width/u,d=n.height/f,h=p<d?p:d;h>this.zoomSteps[this.zoomSteps.length-1]&&(h=this.zoomSteps[this.zoomSteps.length-1]),h<this.zoomSteps[0]&&(h=this.zoomSteps[0]),o(h,r.x,r.y)}else o(i,r.x,r.y)}},{key:"onMouseDown",value:function(e){this.props.unselectAll(),this.props.anchorCanvas(!0)}},{key:"onMouseUp",value:function(){this.props.anchorCanvas(!1)}},{key:"onWheel",value:function(e){var t=this.props.zoomLevel,n=void 0,r=void 0,o=void 0,i=void 0,a=this.props.cursor.x,s=this.props.cursor.y;if(!this.zoomSteps.includes(t)){var u=Math.abs(this.zoomSteps[0]-t),l=0,c=!1;this.zoomSteps.forEach((function(e,n){var r=e-t,o=Math.abs(r);o<u&&(u=o,l=n,c=!(r>0))})),r=e.deltaY<0?c?this.zoomSteps[l+1]:this.zoomSteps[l]:c?this.zoomSteps[l]:this.zoomSteps[l-1]}if(e.deltaY<0){if(this.state.zoomStep+1>=this.zoomSteps.length)return;if(o=a*(n=r||this.zoomSteps[this.state.zoomStep+1])-a*t,i=s*n-s*t,r)return this.setState({zoomStep:this.zoomSteps.indexOf(n)}),void this.props.zoom(n,o,i);this.traversZoomLevels(1,o,i)}else{if(this.state.zoomStep-1<0)return;if(o=a*(n=r||this.zoomSteps[this.state.zoomStep-1])-a*t,i=s*n-s*t,r)return this.setState({zoomStep:this.zoomSteps.indexOf(n)}),void this.props.zoom(n,o,i);this.traversZoomLevels(-1,o,i)}}},{key:"onMouseMove",value:function(e){this.props.trackMovement({x:e.pageX,y:e.pageY})}},{key:"render",value:function(){return i.default.createElement(S,{entities:this.props.entities,wrappedCustomEntities:this.wrappedCustomEntities,handleRef:this.handleRef,onMouseDown:this.onMouseDown,onMouseMove:this.onMouseMove,onMouseUp:this.onMouseUp,onWheel:this.onWheel,reset:this.reset,zoomLevel:this.props.zoomLevel,canvasAnchor:this.props.canvasAnchor,artboard:this.props.artboard,gridSize:this.props.gridSize,anchorEntity:this.props.anchorEntity})}}]),t}(i.default.PureComponent);t.default=(0,a.connect)((function(e){return{entities:e.entity,gridSize:e.canvas.gridSize,viewport:e.canvas.canvasViewport,artboard:e.canvas.canvasArtboard,zoomLevel:e.canvas.zoom,anchor:e.canvas.anchoredEntity,cursor:e.canvas.cursor,canvasAnchor:e.canvas.canvasAnchor}}),{resetViewport:d.resetViewport,configViewport:d.configViewport,trackMovement:d.trackMovement,anchorCanvas:d.anchorCanvas,zoom:d.zoom,connecting:d.connecting,anchorEntity:d.anchorEntity,selectEntity:p.selectEntity,unselectAll:p.unselectAll})(T)},45:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),a=(r=i)&&r.__esModule?r:{default:r},s=n(7);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(46);var c=function(e){var t=e.d,n=e.color;return a.default.createElement("path",{d:t,className:"arrowMarker",style:{fill:n}})},f=function(e){var t=e.color;return a.default.createElement("circle",{cx:"30",cy:"30",r:"15",style:{fill:t}})},p=function(e){function t(){return u(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.lineColors.length!=this.props.lineColors.length}},{key:"render",value:function(){console.log("render_ArrowMarker");var e=this.props;return a.default.createElement("svg",null,a.default.createElement("defs",null,a.default.createElement("marker",{id:"arrow-end",viewBox:"0 0 20 20",markerWidth:"10",markerHeight:"8",refX:"14",refY:"10",orient:"auto"},a.default.createElement(c,{d:"M 1 5 L 17 10 L 1 15 Z",color:""})),a.default.createElement("marker",{id:"arrow-end-connecting",viewBox:"0 0 20 20",markerWidth:"10",markerHeight:"8",refX:"12",refY:"10",orient:"auto"},a.default.createElement(c,{d:"M 1 5 L 17 10 L 1 15 Z",color:""})),a.default.createElement("marker",{id:"disc",viewBox:"0 0 60 50",markerWidth:"12",markerHeight:"30",refX:"40",refY:"30",orient:"auto"},a.default.createElement("circle",{cx:"30",cy:"30",r:"15",fill:"#3c3c3c"})),a.default.createElement("marker",{id:"disc-connecting",viewBox:"0 0 60 50",markerWidth:"12",markerHeight:"30",refX:"40",refY:"30",orient:"auto"},a.default.createElement("circle",{cx:"30",cy:"30",r:"15",fill:"#3c3c3c"})),e.lineColors.length&&e.lineColors.map((function(e){return a.default.createElement(a.default.Fragment,null,a.default.createElement("marker",{id:"arrow-end"+e,viewBox:"0 0 20 20",markerWidth:"10",markerHeight:"8",refX:"14",refY:"10",orient:"auto"},a.default.createElement(c,{d:"M 1 5 L 17 10 L 1 15 Z",color:e})),a.default.createElement("marker",{id:"disc"+e,viewBox:"0 0 60 50",markerWidth:"12",markerHeight:"30",refX:"40",refY:"30",orient:"auto"},a.default.createElement(f,{color:e})))}))))}}]),t}(a.default.PureComponent);t.default=(0,s.connect)((function(e){return{lineColors:e.canvas.lineColors}}),{})(p)},46:function(e,t,n){var r=n(47);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};n(4)(r,o);r.locals&&(e.exports=r.locals)},47:function(e,t,n){(e.exports=n(3)(!1)).push([e.i,"/*\n * @Author: yanxbm \n * @Date: 2018-12-06 19:07:38 \n * @Last Modified by: yanxbm\n * @Last Modified time: 2019-03-22 13:52:04\n */\n.arrowMarker {\n  fill: rgba(0, 0, 0, 0.65);\n  stroke-width: 0px;\n  stroke-dasharray: 10000, 1;\n  stroke-linecap: round;\n}\n.arrowMarker.blue {\n  fill: #00c0ff;\n  stroke: #00c0ff;\n}\n.arrowMarker.red {\n  fill: rgba(255, 0, 0, 0.7);\n  stroke: rgba(255, 0, 0, 0.7);\n}\n",""])},48:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(e){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",className:"svgIcon",width:e.svgSize||"1.0em",height:e.svgSize||"1.0em",viewBox:"0 0 16 16"},e.children)},a=(r={delete:{path:React.createElement("image",{xlinkHref:"../../../public/img/editor-delete.svg",width:"100%",height:"100%"}),size:16},edit:{path:React.createElement("image",{xlinkHref:"../../../public/img/editor-edit.svg",width:"100%",height:"100%"}),size:16},arrow:{path:React.createElement("image",{xlinkHref:"../../../public/img/editor-arrow.svg",width:"100%",height:"100%"}),size:16},bpp_arrow:{path:React.createElement("image",{xlinkHref:"../../../public/img/bpp_arrow.svg",width:"100%",height:"100%"}),size:16},bpp_wb_arrow:{path:React.createElement("image",{xlinkHref:"../../../public/img/wb_arrow.svg",width:"100%",height:"100%"}),size:16},bpp_ps_arrow:{path:React.createElement("image",{xlinkHref:"../../../public/img/ps_arrow.svg",width:"100%",height:"100%"}),size:16},zoomIn:{path:React.createElement("path",{fill:"#4691f6",d:"M15.5 13.6l-3.8-3.2c-.4-.4-.8-.5-1-.5.8-1.2 1.3-2.5 1.3-4 0-3.3-2.7-6-6-6S0 2.7 0 6s2.7 6 6 6c1.5 0 2.8-.5 4-1.4 0 .3 0 .7.4 1l3.2 4c.6.5 1.5.6 2 0s.5-1.4 0-2zM6 10c-2.2 0-4-1.8-4-4s1.8-4 4-4 4 1.8 4 4-1.8 4-4 4zm1-7H5v2H3v2h2v2h2V7h2V5H7z"}),size:16},zoomOut:{path:React.createElement("path",{fill:"#4691f6",d:"M15.5 13.6l-3.8-3.2c-.4-.4-.8-.5-1-.5.8-1.2 1.3-2.5 1.3-4 0-3.3-2.7-6-6-6S0 2.7 0 6s2.7 6 6 6c1.5 0 2.8-.5 4-1.4 0 .3 0 .7.4 1l3.2 4c.6.5 1.5.6 2 0s.5-1.4 0-2zM6 10c-2.2 0-4-1.8-4-4s1.8-4 4-4 4 1.8 4 4-1.8 4-4 4zM3 5h6v2H3z"}),size:16}},{get:function(e){return e in r?r[e]:r.arrow},addIcon:function(e){r=o({},r,e)}});t.default=function(e){var t=e.name,n=e.label,r=e.svgSize;return React.createElement(i,{viewBox:"0 0 "+a.get(t).size.toString()+" "+a.get(t).size.toString(),svgSize:r},n&&React.createElement("title",null,n),a.get(t).path)},t.icons=a},49:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),a=(r=i)&&r.__esModule?r:{default:r},s=n(7),u=n(21),l=n(11),c=n(15);n(23);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n(50);var h=function(e){function t(e){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return d(t,e),o(t,[{key:"componentWillReceiveProps",value:function(e){}},{key:"render",value:function(){var e=this.props,t=e.model,n=u.store.getState().canvas,r=n.connecting.currently;n.zoom;return a.default.createElement("div",{className:"entity "+(e.isSelected?"selected":""),style:{left:t.x,top:t.y,cursor:r?"pointer":"move",borderRadius:"drive"==t.type?"2.5em":""},onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onMouseOver:e.onMouseOver},a.default.createElement(a.default.Fragment,null,e.children))}}]),t}(a.default.PureComponent),y=function(e,t){return{meta:e.metaEntity.find((function(e){return e.id==t.model.id}))||[],zoom:e.canvas.zoom,canvas:e.canvas}};t.default=function(e){return(0,s.connect)(y,{selectEntity:l.selectEntity,anchorEntity:c.anchorEntity,unselectAll:l.unselectAll})(function(e){return function(t){function n(e){f(this,n);var t=p(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.onMouseOver=function(e){e.stopPropagation(),t.props.selectEntity(t.props.model.id)},t.state={onMouseUpWouldBeClick:!0},t.onMouseDown=t.onMouseDown.bind(t),t.onMouseUp=t.onMouseUp.bind(t),t}return d(n,t),o(n,[{key:"componentDidMount",value:function(){var e=this,t=function(){return e.setState({onMouseUpWouldBeClick:!1})};this.props.meta.isAnchored?setTimeout(t,192):t()}},{key:"onMouseDown",value:function(e){e.stopPropagation(),console.log("按下entity",this.props.model),this.props.anchorEntity({id:this.props.model.id,type:this.props.model.type,isAnchored:!0,clientX:e.clientX,clientY:e.clientY})}},{key:"onMouseUp",value:function(e){e.stopPropagation(),this.state.onMouseUpWouldBeClick||(this.props.anchorEntity({id:"",isAnchored:!1}),this.props.selectEntity(this.props.model.id))}},{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.model,r=t.meta.isSelected,o=e.model,i=e.meta.isSelected;return n.x!=o.x||n.y!=o.y||e.zoom!=t.zoom||o.name!=n.name||r!=i||e.canvas!=t.canvas}},{key:"render",value:function(){var t=this.props,n=t.meta,r=n.isAnchored,o=n.isSelected,i=t.model;t.defaultEntity;return a.default.createElement(h,{model:i,isAnchored:r,isSelected:o,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp},a.default.createElement(e,{model:i}))}}]),n}(a.default.PureComponent)}(e))}},5:function(e,t,n){e.exports=n(32)()},50:function(e,t,n){var r=n(51);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};n(4)(r,o);r.locals&&(e.exports=r.locals)},51:function(e,t,n){(e.exports=n(3)(!1)).push([e.i,"/*\n * @Author: yanxbm \n * @Date: 2018-11-22 14:02:10 \n * @Last Modified by: yanxbm\n * @Last Modified time: 2019-04-17 15:08:49\n */\n@-webkit-keyframes glow {\n  0% {\n    border-color: #0beeee;\n    -webkit-box-shadow: 0 0 5px rgba(0, 255, 0, 0.2), inset 0 0 5px rgba(0, 255, 0, 0.1), 0 0 0 #0beeee;\n            box-shadow: 0 0 5px rgba(0, 255, 0, 0.2), inset 0 0 5px rgba(0, 255, 0, 0.1), 0 0 0 #0beeee;\n  }\n  100% {\n    border-color: #6f6;\n    -webkit-box-shadow: 0 0 20px rgba(0, 255, 0, 0.6), inset 0 0 10px rgba(0, 255, 0, 0.4), 0 0 0 #6f6;\n            box-shadow: 0 0 20px rgba(0, 255, 0, 0.6), inset 0 0 10px rgba(0, 255, 0, 0.4), 0 0 0 #6f6;\n  }\n}\n@keyframes glow {\n  0% {\n    border-color: #0beeee;\n    -webkit-box-shadow: 0 0 5px rgba(0, 255, 0, 0.2), inset 0 0 5px rgba(0, 255, 0, 0.1), 0 0 0 #0beeee;\n            box-shadow: 0 0 5px rgba(0, 255, 0, 0.2), inset 0 0 5px rgba(0, 255, 0, 0.1), 0 0 0 #0beeee;\n  }\n  100% {\n    border-color: #6f6;\n    -webkit-box-shadow: 0 0 20px rgba(0, 255, 0, 0.6), inset 0 0 10px rgba(0, 255, 0, 0.4), 0 0 0 #6f6;\n            box-shadow: 0 0 20px rgba(0, 255, 0, 0.6), inset 0 0 10px rgba(0, 255, 0, 0.4), 0 0 0 #6f6;\n  }\n}\n.entity {\n  position: absolute;\n  text-align: center;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-flow: row nowrap;\n          flex-flow: row nowrap;\n  -webkit-box-shadow: 4px 8px 12px 0px rgba(0, 52, 107, 0.2);\n          box-shadow: 4px 8px 12px 0px rgba(0, 52, 107, 0.2);\n  background-color: transparent;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  border-radius: 10px;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n.entity.upperBill .task {\n  -webkit-animation: glow 900ms ease-out infinite alternate;\n          animation: glow 900ms ease-out infinite alternate;\n}\n.entity.selected .task,\n.entity.selected .event,\n.entity.selected .flow {\n  background-color: #82d5ff;\n}\n",""])},52:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),a=(r=i)&&r.__esModule?r:{default:r},s=n(7),u=n(21),l=n(11);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n(53);var d=function(e){function t(e){c(this,t);var n=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.findPathAndRelativePositionToRenderLabel=function(){var e=2*n.path.getTotalLength()/5;return{path:n.path,position:e}},n.calculateLabelPosition=function(){if(n.props.label){var e=n.findPathAndRelativePositionToRenderLabel(),t=e.path,r=e.position,o=n.label.offsetWidth,i=n.label.offsetHeight,a=t.getPointAtLength(r),s=Math.round(a.x-o/2)+10,u=Math.round(a.y-i/2)+10;n.label.setAttribute("style","left: "+s+"px; top: "+u+"px")}},n.state={decoration:""},n.setPathRef=function(e){n.path=e},n.label=null,n.decorationLine=n.decorationLine.bind(n),n.unDecorationLine=n.unDecorationLine.bind(n),n.selectLink=n.selectLink.bind(n),n}return p(t,e),o(t,[{key:"selectLink",value:function(e,t,n){e.stopPropagation(),console.log("click-link",t,n),this.props.selectLink(t,n)}},{key:"decorationLine",value:function(e){e.stopPropagation(),this.setState({decoration:"decorationBlue"})}},{key:"unDecorationLine",value:function(e){e.stopPropagation(),this.setState({decoration:""})}},{key:"componentDidUpdate",value:function(e){this.props.label&&window.requestAnimationFrame(this.calculateLabelPosition.bind(this))}},{key:"componentDidMount",value:function(){this.props.label&&window.requestAnimationFrame(this.calculateLabelPosition.bind(this))}},{key:"generateLabel",value:function(e){var t=this;if(e){var n=this.props.distance;return n*=u.store.getState().canvas.zoom,a.default.createElement("foreignObject",{className:"link-label",width:"100%",height:"100%"},a.default.createElement("div",{ref:function(e){return t.label=e},className:"labelDiv "+(n<80?"hide-label":"show-label")},a.default.createElement("span",{className:"default-label"},e)))}}},{key:"render",value:function(){var e=this.props,t=e.label,n=e.key,r=(e.selected,e.linkId),o=(e.fromId,e.targetId,e.connecting,e.lineType),i=e.color,s=void 0,u=function(e){var t=e.pointsArr;e.QPointsArr;return{pointsPath:"M "+t[0].x+","+t[0].y+t.slice(1).reduce((function(e,t){return e+" "+t.x+","+t.y}),"C")}}(this.props.points).pointsPath;return"bpp_link_ps"!=o?(s=i?"url('#arrow-end"+i+"')":"url('#arrow-end')",!r&&(s="url('#arrow-end-connecting')")):(s=i?"url('#disc"+i+"')":"url('#disc')",!r&&(s="url('#disc-connecting')")),a.default.createElement("g",{key:n},a.default.createElement("path",{d:u,className:"line-path",style:{stroke:i},id:"line"+r,strokeLinejoin:"round",markerEnd:s}),this.generateLabel(t))}}]),t}(a.default.PureComponent),h=function(e){function t(e){return c(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return p(t,e),o(t,[{key:"render",value:function(){var e=this.props,t=e.links,n=e.connecting,r=e.selectLink,o=e.canvas;return a.default.createElement("g",null,t.map((function(e){return e.points&&a.default.createElement(d,{key:e.target,connecting:n,selectLink:r,fromId:e.from,targetId:e.target,id:e.target,linkId:e.linkId,selected:e.selected,arrowInvert:e.points.arrowInvert,label:e.linkName,distance:e.points.distance,points:e.points,lineType:e.points.lineType,color:e.color,canvas:o})})))}}]),t}(a.default.PureComponent);t.default=(0,s.connect)((function(e){return{connecting:e.canvas.connecting.currently,canvas:{}}}),{selectLink:l.selectLink})(h)},53:function(e,t,n){var r=n(54);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};n(4)(r,o);r.locals&&(e.exports=r.locals)},54:function(e,t,n){(e.exports=n(3)(!1)).push([e.i,"/*\n * @Author: yanxbm \n * @Date: 2018-12-21 13:50:56 \n * @Last Modified by: yanxbm\n * @Last Modified time: 2019-03-28 17:08:12\n */\n@-webkit-keyframes dash {\n  from {\n    stroke-dashoffset: 24;\n  }\n  to {\n    stroke-dashoffset: 0;\n  }\n}\n@keyframes dash {\n  from {\n    stroke-dashoffset: 24;\n  }\n  to {\n    stroke-dashoffset: 0;\n  }\n}\n@-webkit-keyframes dashInvert {\n  from {\n    stroke-dashoffset: 0;\n  }\n  to {\n    stroke-dashoffset: 24;\n  }\n}\n@keyframes dashInvert {\n  from {\n    stroke-dashoffset: 0;\n  }\n  to {\n    stroke-dashoffset: 24;\n  }\n}\n.line-path {\n  fill: none;\n  stroke-width: 0.13em;\n  stroke: rgba(0, 0, 0, 0.33);\n  cursor: pointer;\n}\n.line-path.red_wb {\n  stroke: rgba(255, 0, 0, 0.5);\n  pointer-events: all;\n  stroke-dasharray: 6,4;\n}\n.decorationBlue {\n  stroke-opacity: 0.7;\n  stroke-width: 4px;\n}\n.link-label {\n  pointer-events: none;\n}\n.link-label .labelDiv {\n  position: absolute;\n  display: inline-block;\n  -webkit-transition: left 20ms linear, top 20ms linear;\n  transition: left 20ms linear, top 20ms linear;\n}\n.link-label .labelDiv.hide-label {\n  opacity: 0;\n}\n.link-label .labelDiv.show-label {\n  opacity: 1;\n}\n.link-label .labelDiv .default-label {\n  background: rgba(70, 70, 70, 0.6);\n  color: #fff;\n  display: inline-block;\n  padding: 3px 2px;\n  font-size: smaller;\n  border-radius: 2px;\n  text-align: left;\n}\n.line-selected {\n  pointer-events: all;\n  stroke-dasharray: 6,4;\n  stroke: #00c0ff;\n  -webkit-animation: dash 1s linear infinite;\n          animation: dash 1s linear infinite;\n}\n.line-invert-selected {\n  pointer-events: all;\n  stroke-dasharray: 6,4;\n  stroke: #00c0ff;\n  -webkit-animation: dashInvert 1s linear infinite;\n          animation: dashInvert 1s linear infinite;\n}\n.deleteIcon {\n  font-size: 15px;\n  fill: #ff3b00d4;\n  cursor: pointer;\n  font-style: italic;\n  font-weight: 600;\n  -moz-user-select: none;\n   -ms-user-select: none;\n       user-select: none;\n  -webkit-user-select: none;\n}\n",""])},55:function(e,t,n){var r=n(56);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};n(4)(r,o);r.locals&&(e.exports=r.locals)},56:function(e,t,n){(e.exports=n(3)(!1)).push([e.i,"/*\n * @Author: yanxbm \n * @Date: 2018-11-19 19:23:24 \n * @Last Modified by: yanxbm\n * @Last Modified time: 2019-05-07 20:31:14\n */\n.editorWrapper {\n  height: 100%;\n  overflow: hidden;\n  position: relative;\n}\n.canvasViewport {\n  height: 600px;\n  width: calc(100% - 10px);\n  -webkit-box-flex: 1;\n      -ms-flex: 1 0 auto;\n          flex: 1 0 auto;\n  position: relative;\n  background-color: #fff;\n  overflow: hidden;\n}\n.canvasViewport * {\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.canvasViewport ul,\n.canvasViewport ol {\n  list-style-type: none;\n  margin: 0;\n  padding: 0;\n}\n.canvasViewport .canvas_selector {\n  background-color: rgba(0, 192, 255, 0.2);\n  border: solid 2px #00c0ff;\n  position: absolute;\n  z-index: 999;\n}\n.canvasArtboard {\n  position: relative;\n  -webkit-transform-origin: 0 0;\n          transform-origin: 0 0;\n  overflow: hidden;\n  -webkit-transition: -webkit-transform 200ms linear;\n  transition: -webkit-transform 200ms linear;\n  transition: transform 200ms linear;\n  transition: transform 200ms linear, -webkit-transform 200ms linear;\n}\n.canvasArtboard .relative-surface {\n  position: relative;\n}\n.svgLand {\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n",""])},57:function(e,t,n){var r=n(58);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};n(4)(r,o);r.locals&&(e.exports=r.locals)},58:function(e,t,n){(e.exports=n(3)(!1)).push([e.i,"/*\n * @Author: yanxbm \n * @Date: 2018-12-10 10:13:03 \n * @Last Modified by: yanxbm\n * @Last Modified time: 2019-04-16 20:21:33\n */\n.editorWrapper {\n  height: 100%;\n}\n",""])},6:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.maxZero=t.minZero=t.deepCompare=t.getUpperConfigManualAction=t.isEmptyObject=t.getLowerBill=t.getUpperBill=t.parseUrl=t.getQueryString=t.isTransformSupported=t.setTransform=t.getLinksByTarget=t.formatTime=t.getLink=t.getEntityByType=t.getEntity=t.uuid=t.isChrome=t.IEVersion=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(0);function i(){var e=navigator.userAgent,t=e.indexOf("compatible")>-1&&e.indexOf("MSIE")>-1,n=e.indexOf("Edge")>-1&&!t,r=e.indexOf("Trident")>-1&&e.indexOf("rv:11.0")>-1;if(t){new RegExp("MSIE (\\d+\\.\\d+);").test(e);var o=parseFloat(RegExp.$1);return 7===o?7:8===o?8:9===o?9:10===o?10:6}return n?"edge":!!r&&11}var a=function(e,t){return e.find((function(e){return e.id==t}))};t.IEVersion=i,t.isChrome=function(e){var t=navigator.userAgent,n=t.indexOf("Firefox")>-1,r=t.indexOf("Safari")>-1,o=t.indexOf("Chrome")>-1,a=i();return!!(n||o||r)||(a?(alert(e[0]),!1):void 0)},t.uuid=function(){for(var e=[],t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")},t.getEntity=a,t.getEntityByType=function(e,t){return e.find((function(e){return e.type==t}))},t.getLink=function(e,t,n){var r=void 0;if(n)r=e.find((function(e){return e.id==n})).linksTo.find((function(e){return e.linkId==t}));else for(var o=0;o<e.length;o++){if(r=e[o].linksTo.find((function(e){return e.linkId==t})))break}return r},t.formatTime=function(e){var t=new Date,n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var r in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?n[r]:("00"+n[r]).substr((""+n[r]).length)));return e},t.getLinksByTarget=function(e,t){for(var n=[],r=0;r<e.length;r++){var o=e[r].linksTo;if(o&&o.length>0)for(var i=0;i<o.length;i++){var a=o[i];a.target==t&&n.push(a)}}return n},t.setTransform=function(e,t){e.transform=t,e.webkitTransform=t,e.mozTransform=t},t.isTransformSupported=function(e){return"transform"in e||"webkitTransform"in e||"MozTransform"in e},t.getQueryString=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.hash.substr(6).match(t);return null!=n?unescape(n[2]):null},t.parseUrl=function(){var e=window.location.hash.substr(2),t={};return e.replace(/(\w+)=([a-zA-Z0-9_-]+)/gi,(function(e,n,r){t[n]=unescape(r)})),t},t.getUpperBill=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments[4],i=t.id;function s(e,t,n,r){for(var u=t.linksFrom,l=0;l<u.length;l++){var c=u[l];if("bill"==c.type&&"bpp_link_wb"!=c.lineType){if(n.push(c.entityId),i==t.id&&r.push(c.entityId),o&&r.length>0)return;s(e,a(e,c.entityId),n,r)}else if("drive"==c.type){var f=a(e,c.entityId);if(!f||f.ctm_class)continue;var p=f.linksFrom[0]&&f.linksFrom[0].entityId;if(p==t.id)continue;if(p){if(n.push(p),f.linksTo.some((function(e){return e.target==i}))&&r.push(p),o&&r.length>0)return;s(e,a(e,p),n,r)}}}}s(e,t,r,n);var u=new Set(r);r.length=0,r.push.apply(r,Array.from(u))},t.getLowerBill=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=t.id;function i(e,t,r){for(var s=t.linksTo,u=0;u<s.length;u++){var l=s[u];if("bpp_link_ps"==l.type){r.push(l.target),o==l.from&&n.push(l.target);var c=a(e,l.target);i(e,c,r)}else if("bpp_link"==l.type){var f=a(e,l.target);if("drive"==f.type)if("continue"===function(){if(f.ctm_class)return"continue";var t=f.id;f.linksFrom.length>0&&f.linksFrom[0].entityId==o&&!f.ctm_class&&f.linksTo.forEach((function(e){n.push(e.target)})),e.filter((function(e){return e.linksFrom.some((function(e){return e.entityId==t}))})).forEach((function(t){r.push(t.id),i(e,t,r)}))}())continue}}}i(e,t,r);var s=new Set(r);r.length=0,r.push.apply(r,Array.from(s))},t.isEmptyObject=function(e){for(var t in e)return!1;return!0},t.getUpperConfigManualAction=function(e,t,n){!function e(t,n,r){for(var i=n.linksFrom,s=0;s<i.length;s++){var u=i[s].entityId,l=a(t,u),c=o.attributesList.get(u);c.participants&&c.participants.organizeUnitPK&&r.push(l.name),l.linksFrom.length>0&&e(t,l,r)}}(e,t,n);var r=new Set(n);n.length=0,n.push.apply(n,Array.from(r))},t.deepCompare=function(e,t){var n,o;function i(e,t){var n;for(n in t){if(t.hasOwnProperty(n)!==e.hasOwnProperty(n))return console.log("end",n),!1;if(r(t[n])!==r(e[n]))return console.log("end",n),!1}for(n in e){if(e.hasOwnProperty(n)!==t.hasOwnProperty(n))return console.log("end",n),!1;if(r(e[n])!==r(t[n]))return console.log("end",n),!1;switch(r(e[n])){case"object":if("points"==n)continue;if(!i(e[n],t[n]))return console.log("end",n),!1;break;default:if("x"==n||"y"==n||"width"==n||"height"==n)continue;if(e[n]!==t[n])return console.log("end",n),!1}}return!0}if(arguments.length<1)return!0;for(n=1,o=arguments.length;n<o;n++)if(!i(arguments[0],arguments[n]))return!1;return!0},t.minZero=function(e){return e<0?0:e},t.maxZero=function(e){return e>0?0:e}},67:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Demo=void 0;var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(2),s=(r=a)&&r.__esModule?r:{default:r},u=n(1),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(41)),c=n(26);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=u.base.NCModal;function y(e,t,n){var r=[];"bpp"!=n?e.entity.forEach((function(e){e.x*=.8,e.y*=.6,e.width=40,e.height=40,e.linksTo.length>0&&e.linksTo.forEach((function(e){var t=e.color;t&&!r.includes(t)&&r.push(t)}))})):e.entity.forEach((function(e){e.x*=1.5,e.y*=1.5,"drive"==e.type?(e.width=30,e.height=30):(e.width=40,e.height=40),e.linksTo.length>0&&e.linksTo.forEach((function(e){var t=e.color;t&&!r.includes(t)&&r.push(t)}))}));var o="bpp"==n?e.entity.map((function(t){return i({},t,{linksTo:t.linksTo?t.linksTo.map((function(n){return i({},n,{points:l.calcLinkPoints(t,l.getEntity(e.entity,n.target),n.type,n.points.cPoint,n.points.curviness,!0)})})):[]})})):e.entity.map((function(t){return i({},t,{linksTo:t.linksTo?t.linksTo.map((function(n){return i({},n,{points:l.calcLinkPoints(t,l.getEntity(e.entity,n.target),e.attributes[n.linkId].apparent.lineType,n.points.cPoint,n.points.curviness,!0)})})):[]})}));console.log("initModel",o),l.store.dispatch(l.setEntities(o)),l.store.dispatch(l.initialColors(r)),l.store.dispatch(l.setConfig(t))}var b=t.Demo=function(e){function t(e){f(this,t);var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return l.urlConst.set({flowType:e.flowType}),"workflow"==e.flowType?n.configEntity=c.config.workflow:"approve"==e.flowType?n.configEntity=c.config.approve:"bpp"==e.flowType&&(n.configEntity=c.config.bpp),n.state={flowData:n.props.flowData},n}return d(t,e),o(t,[{key:"componentWillReceiveProps",value:function(e){this.getPreviewData(e.pk_wf_def,e.flowType,e.flowsource,e.billType)}},{key:"componentWillMount",value:function(){this.getPreviewData(this.props.pk_wf_def,this.props.flowType,this.props.flowsource,this.props.billType)}},{key:"getPreviewData",value:function(e,t,n,r){var o=this;"bpp"!=t?(0,u.ajax)({url:"/nccloud/riawf/pf/approveFlowMngForPreviewAction.do",type:"post",data:{pk_wf_def:e,flowsource:n,billType:r},async:!0,success:function(e){console.log("previewData",e.data.flow),y(e.data.flow,o.configEntity,t)},error:function(e){console.log("审批工作流预览请求错误")}}):(0,u.ajax)({url:"/nccloud/riart/busiflow/busiflowButtonAction.do",type:"post",data:{pk_wf_def:e,actionType:"preview"},async:!0,success:function(e){console.log("previewData",e.data.busiflow),y(e.data.busiflow,o.configEntity,t)},error:function(e){console.log("业务流预览请求错误")}})}},{key:"render",value:function(){return s.default.createElement("div",null,s.default.createElement(l.Graph,{customEntities:c.customEntities}))}}]),t}(s.default.PureComponent),v=function(e){function t(e){f(this,t);var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={showPreview:!0,preview:null},n}return d(t,e),o(t,[{key:"getPreview",value:function(){this.setState({preview:s.default.createElement(b,{flowType:this.props.flowType,pk_wf_def:this.props.pk_wf_def,flowsource:this.props.flowsource,billType:this.props.billType})})}},{key:"render",value:function(){return s.default.createElement(h,{show:this.state.showPreview,onHide:this.props.hide,onEntered:this.getPreview.bind(this),size:"xxlg"},s.default.createElement(h.Header,{closeButton:!0},this.props.previewTitle?this.props.previewTitle:"预览"),s.default.createElement(h.Body,null,this.state.preview))}}]),t}(s.default.PureComponent);t.default=v},68:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),a=(r=i)&&r.__esModule?r:{default:r};n(69);var s=n(26);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=function(e){function t(e){u(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setTextareaRef=function(t){e.handleRef(t)},n}return c(t,e),o(t,[{key:"shouldComponentUpdate",value:function(e){if(e.modelName!=this.props.modelName)return!0}},{key:"render",value:function(){console.log("task");var e=this.props,t=e.type,n=e.width,r=e.height,o=e.modelName,i={width:n+"px",height:r+"px",backgroundImage:"url('../../../public/img/"+s.customEntities[t].bg+"')"};return a.default.createElement("div",{className:"task",style:i},a.default.createElement("span",null,o))}}]),t}(a.default.PureComponent),p=function(e){function t(){var e,n,r;u(this,t);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={isEditing:!1,name:r.props.model.name},r.handleRef=function(e){r.textarea||(r.textarea=e)},r.handleKeyPress=function(e){switch(e.key){case"Enter":r.toggleEdit(!1),r.props.setName({id:r.props.model.id,name:r.state.name});break;case"Escape":r.toggleEdit(!1),r.setState({name:r.props.model.name})}},r.refreshName=function(e){r.setState({name:e.currentTarget.value})},r.toggleEdit=function(e){var t=r.textarea;e&&t&&setTimeout((function(){return t.focus()}),100),r.setState({isEditing:e})},l(r,n)}return c(t,e),o(t,[{key:"componentWillUnmount",value:function(){this.textarea=null}},{key:"render",value:function(){var e=this.props.model,t=e.width,n=e.height,r=e.type,o=e.name;return a.default.createElement(f,{width:t,height:n,type:r,name:this.state.name,modelName:o})}}]),t}(a.default.PureComponent);t.default=p},69:function(e,t,n){var r=n(70);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};n(4)(r,o);r.locals&&(e.exports=r.locals)},7:function(e,t,n){"use strict";function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}n.r(t);var o=n(2),i=n(5),a=n.n(i),s=a.a.shape({trySubscribe:a.a.func.isRequired,tryUnsubscribe:a.a.func.isRequired,notifyNestedSubs:a.a.func.isRequired,isSubscribed:a.a.func.isRequired}),u=a.a.shape({subscribe:a.a.func.isRequired,dispatch:a.a.func.isRequired,getState:a.a.func.isRequired});function l(e){var t;void 0===e&&(e="store");var n=e+"Subscription",i=function(t){r(a,t);var i=a.prototype;function a(n,r){var o;return(o=t.call(this,n,r)||this)[e]=n.store,o}return i.getChildContext=function(){var t;return(t={})[e]=this[e],t[n]=null,t},i.render=function(){return o.Children.only(this.props.children)},a}(o.Component);return i.propTypes={store:u.isRequired,children:a.a.element.isRequired},i.childContextTypes=((t={})[e]=u.isRequired,t[n]=s,t),i}var c=l();function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function d(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}var h=n(20),y=n.n(h),b=n(9),v=n.n(b),m=n(13),g={notify:function(){}};var w=function(){function e(e,t,n){this.store=e,this.parentSub=t,this.onStateChange=n,this.unsubscribe=null,this.listeners=g}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){var e,t;this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=(e=[],t=[],{clear:function(){t=null,e=null},notify:function(){for(var n=e=t,r=0;r<n.length;r++)n[r]()},get:function(){return t},subscribe:function(n){var r=!0;return t===e&&(t=e.slice()),t.push(n),function(){r&&null!==e&&(r=!1,t===e&&(t=e.slice()),t.splice(t.indexOf(n),1))}}}))},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=g)},e}(),k=0,x={};function E(){}function _(e,t){var n,i;void 0===t&&(t={});var a=t,l=a.getDisplayName,c=void 0===l?function(e){return"ConnectAdvanced("+e+")"}:l,h=a.methodName,b=void 0===h?"connectAdvanced":h,g=a.renderCountProp,_=void 0===g?void 0:g,O=a.shouldHandleStateChanges,S=void 0===O||O,T=a.storeKey,P=void 0===T?"store":T,C=a.withRef,M=void 0!==C&&C,j=d(a,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),I=P+"Subscription",A=k++,R=((n={})[P]=u,n[I]=s,n),D=((i={})[I]=s,i);return function(t){v()(Object(m.isValidElementType)(t),"You must pass a component to the function returned by "+b+". Instead received "+JSON.stringify(t));var n=t.displayName||t.name||"Component",i=c(n),a=p({},j,{getDisplayName:c,methodName:b,renderCountProp:_,shouldHandleStateChanges:S,storeKey:P,withRef:M,displayName:i,wrappedComponentName:n,WrappedComponent:t}),s=function(n){function s(e,t){var r;return(r=n.call(this,e,t)||this).version=A,r.state={},r.renderCount=0,r.store=e[P]||t[P],r.propsMode=Boolean(e[P]),r.setWrappedInstance=r.setWrappedInstance.bind(f(f(r))),v()(r.store,'Could not find "'+P+'" in either the context or props of "'+i+'". Either wrap the root component in a <Provider>, or explicitly pass "'+P+'" as a prop to "'+i+'".'),r.initSelector(),r.initSubscription(),r}r(s,n);var u=s.prototype;return u.getChildContext=function(){var e,t=this.propsMode?null:this.subscription;return(e={})[I]=t||this.context[I],e},u.componentDidMount=function(){S&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate&&this.forceUpdate())},u.componentWillReceiveProps=function(e){this.selector.run(e)},u.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},u.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=E,this.store=null,this.selector.run=E,this.selector.shouldComponentUpdate=!1},u.getWrappedInstance=function(){return v()(M,"To access the wrapped instance, you need to specify { withRef: true } in the options argument of the "+b+"() call."),this.wrappedInstance},u.setWrappedInstance=function(e){this.wrappedInstance=e},u.initSelector=function(){var t=e(this.store.dispatch,a);this.selector=function(e,t){var n={run:function(r){try{var o=e(t.getState(),r);(o!==n.props||n.error)&&(n.shouldComponentUpdate=!0,n.props=o,n.error=null)}catch(e){n.shouldComponentUpdate=!0,n.error=e}}};return n}(t,this.store),this.selector.run(this.props)},u.initSubscription=function(){if(S){var e=(this.propsMode?this.props:this.context)[I];this.subscription=new w(this.store,e,this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription)}},u.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(x)):this.notifyNestedSubs()},u.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},u.isSubscribed=function(){return Boolean(this.subscription)&&this.subscription.isSubscribed()},u.addExtraProps=function(e){if(!(M||_||this.propsMode&&this.subscription))return e;var t=p({},e);return M&&(t.ref=this.setWrappedInstance),_&&(t[_]=this.renderCount++),this.propsMode&&this.subscription&&(t[I]=this.subscription),t},u.render=function(){var e=this.selector;if(e.shouldComponentUpdate=!1,e.error)throw e.error;return Object(o.createElement)(t,this.addExtraProps(e.props))},s}(o.Component);return s.WrappedComponent=t,s.displayName=i,s.childContextTypes=D,s.contextTypes=R,s.propTypes=R,y()(s,t)}}var O=Object.prototype.hasOwnProperty;function S(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function T(e,t){if(S(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o=0;o<n.length;o++)if(!O.call(t,n[o])||!S(e[n[o]],t[n[o]]))return!1;return!0}var P=n(12);function C(e){return function(t,n){var r=e(t,n);function o(){return r}return o.dependsOnOwnProps=!1,o}}function M(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function j(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=M(e);var o=r(t,n);return"function"==typeof o&&(r.mapToProps=o,r.dependsOnOwnProps=M(o),o=r(t,n)),o},r}}var I=[function(e){return"function"==typeof e?j(e):void 0},function(e){return e?void 0:C((function(e){return{dispatch:e}}))},function(e){return e&&"object"==typeof e?C((function(t){return Object(P.bindActionCreators)(e,t)})):void 0}];var A=[function(e){return"function"==typeof e?j(e):void 0},function(e){return e?void 0:C((function(){return{}}))}];function R(e,t,n){return p({},n,e,t)}var D=[function(e){return"function"==typeof e?function(e){return function(t,n){n.displayName;var r,o=n.pure,i=n.areMergedPropsEqual,a=!1;return function(t,n,s){var u=e(t,n,s);return a?o&&i(u,r)||(r=u):(a=!0,r=u),r}}}(e):void 0},function(e){return e?void 0:function(){return R}}];function z(e,t,n,r){return function(o,i){return n(e(o,i),t(r,i),i)}}function L(e,t,n,r,o){var i,a,s,u,l,c=o.areStatesEqual,f=o.areOwnPropsEqual,p=o.areStatePropsEqual,d=!1;function h(o,d){var h,y,b=!f(d,a),v=!c(o,i);return i=o,a=d,b&&v?(s=e(i,a),t.dependsOnOwnProps&&(u=t(r,a)),l=n(s,u,a)):b?(e.dependsOnOwnProps&&(s=e(i,a)),t.dependsOnOwnProps&&(u=t(r,a)),l=n(s,u,a)):v?(h=e(i,a),y=!p(h,s),s=h,y&&(l=n(s,u,a)),l):l}return function(o,c){return d?h(o,c):(s=e(i=o,a=c),u=t(r,a),l=n(s,u,a),d=!0,l)}}function N(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,o=t.initMergeProps,i=d(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),a=n(e,i),s=r(e,i),u=o(e,i);return(i.pure?L:z)(a,s,u,e,i)}function U(e,t,n){for(var r=t.length-1;r>=0;r--){var o=t[r](e);if(o)return o}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function B(e,t){return e===t}var F,V,q,W,H,$,Y,K,Z,Q,X,G,J=(q=(V=void 0===F?{}:F).connectHOC,W=void 0===q?_:q,H=V.mapStateToPropsFactories,$=void 0===H?A:H,Y=V.mapDispatchToPropsFactories,K=void 0===Y?I:Y,Z=V.mergePropsFactories,Q=void 0===Z?D:Z,X=V.selectorFactory,G=void 0===X?N:X,function(e,t,n,r){void 0===r&&(r={});var o=r,i=o.pure,a=void 0===i||i,s=o.areStatesEqual,u=void 0===s?B:s,l=o.areOwnPropsEqual,c=void 0===l?T:l,f=o.areStatePropsEqual,h=void 0===f?T:f,y=o.areMergedPropsEqual,b=void 0===y?T:y,v=d(o,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),m=U(e,$,"mapStateToProps"),g=U(t,K,"mapDispatchToProps"),w=U(n,Q,"mergeProps");return W(G,p({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:m,initMapDispatchToProps:g,initMergeProps:w,pure:a,areStatesEqual:u,areOwnPropsEqual:c,areStatePropsEqual:h,areMergedPropsEqual:b},v))});n.d(t,"Provider",(function(){return c})),n.d(t,"createProvider",(function(){return l})),n.d(t,"connectAdvanced",(function(){return _})),n.d(t,"connect",(function(){return J}))},70:function(e,t,n){(e.exports=n(3)(!1)).push([e.i,"/*\n * @Author: yanxbm \n * @Date: 2018-11-29 14:16:02 \n * @Last Modified by: yanxbm\n * @Last Modified time: 2019-04-17 10:39:32\n */\n.task {\n  background-color: #e2f5ff;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-flow: row nowrap;\n          flex-flow: row nowrap;\n  border-radius: 10px;\n  border: 2px solid #cccccc;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  background-size: 107% 107%;\n  background-position: center center;\n  background-repeat: no-repeat;\n}\n.task span {\n  position: absolute;\n  top: 100%;\n  width: 160%;\n  left: -30%;\n  line-height: 14px;\n  padding-top: .8em;\n  font-size: 12px;\n  color: #555;\n}\n.task textarea {\n  position: absolute;\n  top: 100%;\n  width: 100%;\n  padding: .5em;\n  border: none;\n  font-size: 1.2rem;\n  text-align: center;\n  border-radius: .1rem;\n  resize: none;\n  z-index: 10;\n  background-color: rgba(255, 255, 255, 0.8);\n}\n.task .svgIcon {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 100%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  text-align: center;\n}\n",""])},71:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),a=(r=i)&&r.__esModule?r:{default:r},s=n(26);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n(72);var f=function(e){function t(e){u(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setTextareaRef=function(t){e.handleRef(t)},n}return c(t,e),o(t,[{key:"shouldComponentUpdate",value:function(e){if(e.modelName!=this.props.modelName)return!0}},{key:"render",value:function(){console.log("event");var e=this.props,t=e.type,n=e.width,r=e.height,o=e.modelName,i=e.ctmClass,u={width:n+"px",height:r+"px",backgroundImage:"url('../../../public/img/"+s.customEntities[t].bg+"')"};return a.default.createElement("div",{className:"event "+(i&&"ctm_class"),style:u},a.default.createElement("span",null," ",o," "))}}]),t}(a.default.PureComponent),p=function(e){function t(){var e,n,r;u(this,t);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={isEditing:!1,name:r.props.model.name},r.handleRef=function(e){r.textarea||(r.textarea=e)},r.toggleEdit=function(e){var t=r.textarea;e&&t&&setTimeout((function(){return t.focus()}),1e3),r.setState({isEditing:e})},r.handleKeyPress=function(e){switch(e.key){case"Enter":r.toggleEdit(!1),r.props.setName({id:r.props.model.id,name:r.state.name});break;case"Escape":r.toggleEdit(!1),r.setState({name:r.props.model.name})}},r.refreshName=function(e){r.setState({name:e.currentTarget.value})},l(r,n)}return c(t,e),o(t,[{key:"componentWillUnmount",value:function(){this.textarea=null}},{key:"render",value:function(){var e=this.props.model,t=e.width,n=e.height,r=e.type,o=e.name,i=e.ctm_class;return a.default.createElement(f,{width:t,height:n,type:r,modelName:o,ctmClass:i})}}]),t}(a.default.PureComponent);t.default=p},72:function(e,t,n){var r=n(73);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};n(4)(r,o);r.locals&&(e.exports=r.locals)},73:function(e,t,n){(e.exports=n(3)(!1)).push([e.i,"/*\n * @Author: yanxbm \n * @Date: 2018-11-29 14:46:04 \n * @Last Modified by: yanxbm\n * @Last Modified time: 2019-04-17 10:38:48\n */\n.event {\n  background-color: #e2f5ff;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-flow: row nowrap;\n          flex-flow: row nowrap;\n  border-radius: 15px;\n  border: 2px solid #cccccc;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  font-size: .5rem;\n  background-size: 107% 107%;\n  background-position: center center;\n  background-repeat: no-repeat;\n}\n.event span {\n  position: absolute;\n  top: 100%;\n  width: 160%;\n  left: -30%;\n  padding-top: .8em;\n  line-height: 14px;\n  font-size: 12px;\n  color: #555;\n}\n.event textarea {\n  position: absolute;\n  top: 100%;\n  width: 200%;\n  padding: .5em;\n  border: none;\n  font-size: 1.2rem;\n  text-align: center;\n  border-radius: .1rem;\n  resize: none;\n  z-index: 10;\n  background-color: rgba(255, 255, 255, 0.8);\n}\n.ctm_class span {\n  color: #00aeff;\n}\n",""])},74:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),a=(r=i)&&r.__esModule?r:{default:r},s=n(26);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n(75);var f=function(e){function t(e){u(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setTextareaRef=function(t){e.handleRef(t)},n}return c(t,e),o(t,[{key:"shouldComponentUpdate",value:function(e){if(e.modelName!=this.props.modelName)return!0}},{key:"render",value:function(){var e=this.props,t=e.width,n=e.height,r=e.type,o=e.modelName,i=e.isEditing,u={width:t+"px",height:n+"px",backgroundImage:"url('../../../public/img/"+s.customEntities[r].bg+"')"};return a.default.createElement("div",{className:"flow",style:u,alignItems:i?"stretch":"center"},a.default.createElement("span",null,o))}}]),t}(a.default.PureComponent),p=function(e){function t(){var e,n,r;u(this,t);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={isEditing:!1,name:r.props.model.name},r.handleRef=function(e){r.textarea||(r.textarea=e)},r.handleKeyPress=function(e){switch(e.key){case"Enter":r.toggleEdit(!1),r.props.setName({id:r.props.model.id,name:r.state.name});break;case"Escape":r.toggleEdit(!1),r.setState({name:r.props.model.name})}},r.refreshName=function(e){r.setState({name:e.currentTarget.value})},r.toggleEdit=function(e){var t=r.textarea;e&&t&&setTimeout((function(){return t.focus()}),100),r.setState({isEditing:e})},l(r,n)}return c(t,e),o(t,[{key:"componentWillUnmount",value:function(){this.textarea=null}},{key:"render",value:function(){var e=this.props.model,t=e.type,n=e.width,r=e.height,o=e.name;return a.default.createElement(f,{width:n,height:r,type:t,modelName:o,name:this.state.name})}}]),t}(a.default.PureComponent);t.default=p},75:function(e,t,n){var r=n(76);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};n(4)(r,o);r.locals&&(e.exports=r.locals)},76:function(e,t,n){(e.exports=n(3)(!1)).push([e.i,"/*\n * @Author: yanxbm \n * @Date: 2018-12-13 14:50:13 \n * @Last Modified by: yanxbm\n * @Last Modified time: 2019-04-17 10:39:16\n */\n.flow {\n  background-color: #e2f5ff;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-flow: row nowrap;\n          flex-flow: row nowrap;\n  border-radius: 10px;\n  border: 2px solid #cccccc;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  background-size: 107% 107%;\n  background-position: center center;\n  background-repeat: no-repeat;\n}\n.flow span {\n  position: absolute;\n  top: 100%;\n  width: 160%;\n  left: -30%;\n  line-height: 14px;\n  padding-top: .8em;\n  font-size: 12px;\n  color: #555;\n}\n.flow textarea {\n  position: absolute;\n  top: 100%;\n  width: 100%;\n  padding: .5em;\n  border: none;\n  font-size: 1.2rem;\n  text-align: center;\n  border-radius: .1rem;\n  resize: none;\n  z-index: 10;\n  background-color: rgba(255, 255, 255, 0.8);\n}\n.flow .svgIcon {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 100%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  text-align: center;\n}\n",""])},77:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){var n="../../../public/img/"+e;return{path:React.createElement("image",{xlinkHref:n,width:"100%",height:"100%"}),size:t||16}}},8:function(e,t){e.exports=n},9:function(e,t,n){"use strict";e.exports=function(e,t,n,r,o,i,a,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,o,i,a,s],c=0;(u=new Error(t.replace(/%s/g,(function(){return l[c++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}}},95:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getCookie=function(e){for(var t=document.cookie.replace(/\s/g,"").split(";"),n=0;n<t.length;n++){var r=t[n].split("=");if(r[0]==e)return decodeURIComponent(r[1])}return""};var r=t.setCookie=function(e,t,n){var r=new Date;r.setDate(r.getDate()+n),document.cookie=e+"="+t+";expires="+r};t.removeCookie=function(e){r(e,"1",-1)}}})}));
//# sourceMappingURL=index.c2a12f94.js.map