/*! @ncctag {"date":"2020-5-11 23:44:44"} */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nc-lightapp-front"),require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["nc-lightapp-front","react","react-dom"],t):"object"==typeof exports?exports["uap/wfm/flowEditor/flowMaker/index"]=t(require("nc-lightapp-front"),require("react"),require("react-dom")):e["uap/wfm/flowEditor/flowMaker/index"]=t(e["nc-lightapp-front"],e.React,e.ReactDOM)}(window,(function(e,t,n){return function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="../../../../",n(n.s=378)}([function(e,t,n){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var r,o,l,s,u={},c={},p={},d={},f=function(){var e={};return{get:function(t){return t in e?e[t]:null},add:function(t){Object.assign(e,t)},delete:function(t){for(var n=0;n<t.length;n++){var a=t[n];delete e[a]}},data:function(){return e},updateByItemId:function(t,n,a){var i=e[t][n];Object.assign(i,a)},bppUpdateById:function(t,n){var a=e[t];Object.assign(a,n)}}}(),m=(r={entity:{},link:{}},{setEnt:function(e){return Object.assign(r.entity,i({},e,!0))},setLink:function(e,t){return Object.assign(r.link,i({},e,t||!0))},delEnt:function(e){return delete r.entity[e]},delLink:function(e){return delete r.link[e]},entIncludes:function(e){return r.entity[e]},linkIncludes:function(e){return r.link[e]},clearAllSelected:function(){r.entity={},r.link={}},data:function(){return r}}),g=function(){var e=[],t=function(e){return Object.prototype.toString.call(e)};return{getByFlowId:function(t){return e.find((function(e){return!!e[t]}))},getByEntityId:function(n){return e.find((function(e){var a=t(e.entityId);return"[object String]"==a?e.entityId==n:"[object Array]"==a?e.entityId.some((function(e){return e==n})):void 0}))},push:function(t){e.push(t)},delete:function(t){e=e.filter((function(e){return!t.some((function(t){return t==e.flowId}))}))},delEntityFromFlow:function(e,n){var a=this.getByFlowId(e);if("[object Array]"==t(a.entityId)){var i=a.entityId.indexOf(n);a.entityId.splice(i,1)}else a.entityId=""},addEntityToFlow:function(e,n){var a=this.getByFlowId(e);"[object Array]"==t(a.entityId)?a.entityId.push(n):""==a.entityId?a.entityId=n:a.entityId=[a.entityId,n]},data:function(){return e}}}(),y=(o={},{setArr:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];arguments.length>2&&void 0!==arguments[2]&&arguments[2],o[e]||(o[e]={prevArr:t}),o[e].prevArr=Array.from(new Set([].concat(a(o[e].prevArr),a(t))))},getArr:function(e){return o[e]},deleteFromUpperAndPrev:function(e,t){if(o[e]){var n=o[e].prevArr;t.forEach((function(e){var t=n.indexOf(e);t>-1&&n.splice(t,1)}))}},includesInPrevArr:function(e,t){return o[e].prevArr.includes(t)},includesInUpperArr:function(e,t){return o[e].upperArr.includes(t)},data:function(){return o},delBill:function(e){return delete o[e]}}),b=(l={flowType:"",shouldUnload:!1},{get:function(e){return l[e]},set:function(e){return Object.assign(l,e)}}),v=function(){var e=void 0;return{set:function(t){e=t},get:function(){return e}}}(),h=function(){var e={billType:"",billPK:"",flowPackageId:"",isLightApp:"",metaclassid:"",pk_org:"",originFlowData:{}};return{set:function(t){return Object.assign(e,t)},get:function(){return e}}}(),w=(s=[],{set:function(e){return s.push.apply(s,e)},get:function(){return s}});t.setMultiLang=function(e){t.multiLang=u=e,console.log("test-multiLang",u),t.panelItemMap=c={start:u["utils-000000"],finish:u["utils-000001"],check:u["utils-000002"],manual:u["utils-000002"],auto:u["utils-000003"],subflow:u["utils-000004"],dummy:u["utils-000005"],lister:u["utils-000006"],vo:u["utils-000007"],router:u["utils-000008"],bill:u["utils-000009"],drive:u["utils-000010"]},t.activityNameMap=p={start:u["utils-000012"],finish:u["utils-000013"],check:u["utils-000002"],manual:u["utils-000002"],auto:u["utils-000003"],lister:u["utils-000006"],subflow:u["utils-000011"],dummy:u["utils-000005"]},t.activityTypeMap=d={start:u["utils-000000"],finish:u["utils-000001"],check:u["utils-000014"],manual:u["utils-000015"],auto:u["utils-000003"],lister:u["utils-000016"],subflow:u["utils-000004"],dummy:u["utils-000005"],vo:u["utils-000007"],router:u["utils-000008"],bill:u["utils-000018"],drive:u["utils-000017"]}},t.multiLang=u,t.panelItemMap=c,t.activityNameMap=p,t.activityTypeMap=d,t.attributesList=f,t.subflowsList=g,t.flowContext=h,t.usableSubflowList=w,t.urlConst=b,t.WorkflowGadgetlist=v,t.upBill=y,t.multiSelectList=m},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",a=e[3];if(!a)return n;if(t&&"function"==typeof btoa){var i=(o=a,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),r=a.sources.map((function(e){return"/*# sourceURL="+a.sourceRoot+e+" */"}));return[n].concat(r).concat([i]).join("\n")}var o;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var a={},i=0;i<this.length;i++){var r=this[i][0];"number"==typeof r&&(a[r]=!0)}for(i=0;i<e.length;i++){var o=e[i];"number"==typeof o[0]&&a[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),t.push(o))}},t}},function(e,t,n){var a,i,r={},o=(a=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=a.apply(this,arguments)),i}),l=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e.call(this,n)),t[n]}}((function(e){return document.querySelector(e)})),s=null,u=0,c=[],p=n(17);function d(e,t){for(var n=0;n<e.length;n++){var a=e[n],i=r[a.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](a.parts[o]);for(;o<a.parts.length;o++)i.parts.push(v(a.parts[o],t))}else{var l=[];for(o=0;o<a.parts.length;o++)l.push(v(a.parts[o],t));r[a.id]={id:a.id,refs:1,parts:l}}}}function f(e,t){for(var n=[],a={},i=0;i<e.length;i++){var r=e[i],o=t.base?r[0]+t.base:r[0],l={css:r[1],media:r[2],sourceMap:r[3]};a[o]?a[o].parts.push(l):n.push(a[o]={id:o,parts:[l]})}return n}function m(e,t){var n=l(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var a=c[c.length-1];if("top"===e.insertAt)a?a.nextSibling?n.insertBefore(t,a.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),c.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function g(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=c.indexOf(e);t>=0&&c.splice(t,1)}function y(e){var t=document.createElement("style");return e.attrs.type="text/css",b(t,e.attrs),m(e,t),t}function b(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function v(e,t){var n,a,i,r;if(t.transform&&e.css){if(!(r=t.transform(e.css)))return function(){};e.css=r}if(t.singleton){var o=u++;n=s||(s=y(t)),a=k.bind(null,n,o,!1),i=k.bind(null,n,o,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",b(t,e.attrs),m(e,t),t}(t),a=A.bind(null,n,t),i=function(){g(n),n.href&&URL.revokeObjectURL(n.href)}):(n=y(t),a=E.bind(null,n),i=function(){g(n)});return a(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;a(e=t)}else i()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=o()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=f(e,t);return d(n,t),function(e){for(var a=[],i=0;i<n.length;i++){var o=n[i];(l=r[o.id]).refs--,a.push(l)}e&&d(f(e,t),t);for(i=0;i<a.length;i++){var l;if(0===(l=a[i]).refs){for(var s=0;s<l.parts.length;s++)l.parts[s]();delete r[l.id]}}}};var h,w=(h=[],function(e,t){return h[e]=t,h.filter(Boolean).join("\n")});function k(e,t,n,a){var i=n?"":a.css;if(e.styleSheet)e.styleSheet.cssText=w(t,i);else{var r=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(r,o[t]):e.appendChild(r)}}function E(e,t){var n=t.css,a=t.media;if(a&&e.setAttribute("media",a),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function A(e,t,n){var a=n.css,i=n.sourceMap,r=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||r)&&(a=p(a)),i&&(a+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var o=new Blob([a],{type:"text/css"}),l=e.href;e.href=URL.createObjectURL(o),l&&URL.revokeObjectURL(l)}},function(e,t,n){e.exports=n(32)()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.maxZero=t.minZero=t.deepCompare=t.getUpperConfigManualAction=t.isEmptyObject=t.getLowerBill=t.getUpperBill=t.parseUrl=t.getQueryString=t.isTransformSupported=t.setTransform=t.getLinksByTarget=t.formatTime=t.getLink=t.getEntityByType=t.getEntity=t.uuid=t.isChrome=t.IEVersion=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(0);function r(){var e=navigator.userAgent,t=e.indexOf("compatible")>-1&&e.indexOf("MSIE")>-1,n=e.indexOf("Edge")>-1&&!t,a=e.indexOf("Trident")>-1&&e.indexOf("rv:11.0")>-1;if(t){new RegExp("MSIE (\\d+\\.\\d+);").test(e);var i=parseFloat(RegExp.$1);return 7===i?7:8===i?8:9===i?9:10===i?10:6}return n?"edge":!!a&&11}var o=function(e,t){return e.find((function(e){return e.id==t}))};t.IEVersion=r,t.isChrome=function(e){var t=navigator.userAgent,n=t.indexOf("Firefox")>-1,a=t.indexOf("Safari")>-1,i=t.indexOf("Chrome")>-1,o=r();return!!(n||i||a)||(o?(alert(e[0]),!1):void 0)},t.uuid=function(){for(var e=[],t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")},t.getEntity=o,t.getEntityByType=function(e,t){return e.find((function(e){return e.type==t}))},t.getLink=function(e,t,n){var a=void 0;if(n)a=e.find((function(e){return e.id==n})).linksTo.find((function(e){return e.linkId==t}));else for(var i=0;i<e.length;i++){if(a=e[i].linksTo.find((function(e){return e.linkId==t})))break}return a},t.formatTime=function(e){var t=new Date,n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var a in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?n[a]:("00"+n[a]).substr((""+n[a]).length)));return e},t.getLinksByTarget=function(e,t){for(var n=[],a=0;a<e.length;a++){var i=e[a].linksTo;if(i&&i.length>0)for(var r=0;r<i.length;r++){var o=i[r];o.target==t&&n.push(o)}}return n},t.setTransform=function(e,t){e.transform=t,e.webkitTransform=t,e.mozTransform=t},t.isTransformSupported=function(e){return"transform"in e||"webkitTransform"in e||"MozTransform"in e},t.getQueryString=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.hash.substr(6).match(t);return null!=n?unescape(n[2]):null},t.parseUrl=function(){var e=window.location.hash.substr(2),t={};return e.replace(/(\w+)=([a-zA-Z0-9_-]+)/gi,(function(e,n,a){t[n]=unescape(a)})),t},t.getUpperBill=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments[4],r=t.id;function l(e,t,n,a){for(var s=t.linksFrom,u=0;u<s.length;u++){var c=s[u];if("bill"==c.type&&"bpp_link_wb"!=c.lineType){if(n.push(c.entityId),r==t.id&&a.push(c.entityId),i&&a.length>0)return;l(e,o(e,c.entityId),n,a)}else if("drive"==c.type){var p=o(e,c.entityId);if(!p||p.ctm_class)continue;var d=p.linksFrom[0]&&p.linksFrom[0].entityId;if(d==t.id)continue;if(d){if(n.push(d),p.linksTo.some((function(e){return e.target==r}))&&a.push(d),i&&a.length>0)return;l(e,o(e,d),n,a)}}}}l(e,t,a,n);var s=new Set(a);a.length=0,a.push.apply(a,Array.from(s))},t.getLowerBill=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=t.id;function r(e,t,a){for(var l=t.linksTo,s=0;s<l.length;s++){var u=l[s];if("bpp_link_ps"==u.type){a.push(u.target),i==u.from&&n.push(u.target);var c=o(e,u.target);r(e,c,a)}else if("bpp_link"==u.type){var p=o(e,u.target);if("drive"==p.type)if("continue"===function(){if(p.ctm_class)return"continue";var t=p.id;p.linksFrom.length>0&&p.linksFrom[0].entityId==i&&!p.ctm_class&&p.linksTo.forEach((function(e){n.push(e.target)})),e.filter((function(e){return e.linksFrom.some((function(e){return e.entityId==t}))})).forEach((function(t){a.push(t.id),r(e,t,a)}))}())continue}}}r(e,t,a);var l=new Set(a);a.length=0,a.push.apply(a,Array.from(l))},t.isEmptyObject=function(e){for(var t in e)return!1;return!0},t.getUpperConfigManualAction=function(e,t,n){!function e(t,n,a){for(var r=n.linksFrom,l=0;l<r.length;l++){var s=r[l].entityId,u=o(t,s),c=i.attributesList.get(s);c.participants&&c.participants.organizeUnitPK&&a.push(u.name),u.linksFrom.length>0&&e(t,u,a)}}(e,t,n);var a=new Set(n);n.length=0,n.push.apply(n,Array.from(a))},t.deepCompare=function(e,t){var n,i;function r(e,t){var n;for(n in t){if(t.hasOwnProperty(n)!==e.hasOwnProperty(n))return console.log("end",n),!1;if(a(t[n])!==a(e[n]))return console.log("end",n),!1}for(n in e){if(e.hasOwnProperty(n)!==t.hasOwnProperty(n))return console.log("end",n),!1;if(a(e[n])!==a(t[n]))return console.log("end",n),!1;switch(a(e[n])){case"object":if("points"==n)continue;if(!r(e[n],t[n]))return console.log("end",n),!1;break;default:if("x"==n||"y"==n||"width"==n||"height"==n)continue;if(e[n]!==t[n])return console.log("end",n),!1}}return!0}if(arguments.length<1)return!0;for(n=1,i=arguments.length;n<i;n++)if(!r(arguments[0],arguments[n]))return!1;return!0},t.minZero=function(e){return e<0?0:e},t.maxZero=function(e){return e>0?0:e}},function(e,t,n){"use strict";function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}n.r(t);var i=n(2),r=n(5),o=n.n(r),l=o.a.shape({trySubscribe:o.a.func.isRequired,tryUnsubscribe:o.a.func.isRequired,notifyNestedSubs:o.a.func.isRequired,isSubscribed:o.a.func.isRequired}),s=o.a.shape({subscribe:o.a.func.isRequired,dispatch:o.a.func.isRequired,getState:o.a.func.isRequired});function u(e){var t;void 0===e&&(e="store");var n=e+"Subscription",r=function(t){a(o,t);var r=o.prototype;function o(n,a){var i;return(i=t.call(this,n,a)||this)[e]=n.store,i}return r.getChildContext=function(){var t;return(t={})[e]=this[e],t[n]=null,t},r.render=function(){return i.Children.only(this.props.children)},o}(i.Component);return r.propTypes={store:s.isRequired,children:o.a.element.isRequired},r.childContextTypes=((t={})[e]=s.isRequired,t[n]=l,t),r}var c=u();function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function f(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}var m=n(20),g=n.n(m),y=n(9),b=n.n(y),v=n(13),h={notify:function(){}};var w=function(){function e(e,t,n){this.store=e,this.parentSub=t,this.onStateChange=n,this.unsubscribe=null,this.listeners=h}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){var e,t;this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=(e=[],t=[],{clear:function(){t=null,e=null},notify:function(){for(var n=e=t,a=0;a<n.length;a++)n[a]()},get:function(){return t},subscribe:function(n){var a=!0;return t===e&&(t=e.slice()),t.push(n),function(){a&&null!==e&&(a=!1,t===e&&(t=e.slice()),t.splice(t.indexOf(n),1))}}}))},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=h)},e}(),k=0,E={};function A(){}function I(e,t){var n,r;void 0===t&&(t={});var o=t,u=o.getDisplayName,c=void 0===u?function(e){return"ConnectAdvanced("+e+")"}:u,m=o.methodName,y=void 0===m?"connectAdvanced":m,h=o.renderCountProp,I=void 0===h?void 0:h,C=o.shouldHandleStateChanges,T=void 0===C||C,x=o.storeKey,M=void 0===x?"store":x,L=o.withRef,S=void 0!==L&&L,B=f(o,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),_=M+"Subscription",N=k++,O=((n={})[M]=s,n[_]=l,n),j=((r={})[_]=l,r);return function(t){b()(Object(v.isValidElementType)(t),"You must pass a component to the function returned by "+y+". Instead received "+JSON.stringify(t));var n=t.displayName||t.name||"Component",r=c(n),o=d({},B,{getDisplayName:c,methodName:y,renderCountProp:I,shouldHandleStateChanges:T,storeKey:M,withRef:S,displayName:r,wrappedComponentName:n,WrappedComponent:t}),l=function(n){function l(e,t){var a;return(a=n.call(this,e,t)||this).version=N,a.state={},a.renderCount=0,a.store=e[M]||t[M],a.propsMode=Boolean(e[M]),a.setWrappedInstance=a.setWrappedInstance.bind(p(p(a))),b()(a.store,'Could not find "'+M+'" in either the context or props of "'+r+'". Either wrap the root component in a <Provider>, or explicitly pass "'+M+'" as a prop to "'+r+'".'),a.initSelector(),a.initSubscription(),a}a(l,n);var s=l.prototype;return s.getChildContext=function(){var e,t=this.propsMode?null:this.subscription;return(e={})[_]=t||this.context[_],e},s.componentDidMount=function(){T&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate&&this.forceUpdate())},s.componentWillReceiveProps=function(e){this.selector.run(e)},s.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},s.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=A,this.store=null,this.selector.run=A,this.selector.shouldComponentUpdate=!1},s.getWrappedInstance=function(){return b()(S,"To access the wrapped instance, you need to specify { withRef: true } in the options argument of the "+y+"() call."),this.wrappedInstance},s.setWrappedInstance=function(e){this.wrappedInstance=e},s.initSelector=function(){var t=e(this.store.dispatch,o);this.selector=function(e,t){var n={run:function(a){try{var i=e(t.getState(),a);(i!==n.props||n.error)&&(n.shouldComponentUpdate=!0,n.props=i,n.error=null)}catch(e){n.shouldComponentUpdate=!0,n.error=e}}};return n}(t,this.store),this.selector.run(this.props)},s.initSubscription=function(){if(T){var e=(this.propsMode?this.props:this.context)[_];this.subscription=new w(this.store,e,this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription)}},s.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(E)):this.notifyNestedSubs()},s.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},s.isSubscribed=function(){return Boolean(this.subscription)&&this.subscription.isSubscribed()},s.addExtraProps=function(e){if(!(S||I||this.propsMode&&this.subscription))return e;var t=d({},e);return S&&(t.ref=this.setWrappedInstance),I&&(t[I]=this.renderCount++),this.propsMode&&this.subscription&&(t[_]=this.subscription),t},s.render=function(){var e=this.selector;if(e.shouldComponentUpdate=!1,e.error)throw e.error;return Object(i.createElement)(t,this.addExtraProps(e.props))},l}(i.Component);return l.WrappedComponent=t,l.displayName=r,l.childContextTypes=j,l.contextTypes=O,l.propTypes=O,g()(l,t)}}var C=Object.prototype.hasOwnProperty;function T(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function x(e,t){if(T(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(var i=0;i<n.length;i++)if(!C.call(t,n[i])||!T(e[n[i]],t[n[i]]))return!1;return!0}var M=n(12);function L(e){return function(t,n){var a=e(t,n);function i(){return a}return i.dependsOnOwnProps=!1,i}}function S(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function B(e,t){return function(t,n){n.displayName;var a=function(e,t){return a.dependsOnOwnProps?a.mapToProps(e,t):a.mapToProps(e)};return a.dependsOnOwnProps=!0,a.mapToProps=function(t,n){a.mapToProps=e,a.dependsOnOwnProps=S(e);var i=a(t,n);return"function"==typeof i&&(a.mapToProps=i,a.dependsOnOwnProps=S(i),i=a(t,n)),i},a}}var _=[function(e){return"function"==typeof e?B(e):void 0},function(e){return e?void 0:L((function(e){return{dispatch:e}}))},function(e){return e&&"object"==typeof e?L((function(t){return Object(M.bindActionCreators)(e,t)})):void 0}];var N=[function(e){return"function"==typeof e?B(e):void 0},function(e){return e?void 0:L((function(){return{}}))}];function O(e,t,n){return d({},n,e,t)}var j=[function(e){return"function"==typeof e?function(e){return function(t,n){n.displayName;var a,i=n.pure,r=n.areMergedPropsEqual,o=!1;return function(t,n,l){var s=e(t,n,l);return o?i&&r(s,a)||(a=s):(o=!0,a=s),a}}}(e):void 0},function(e){return e?void 0:function(){return O}}];function D(e,t,n,a){return function(i,r){return n(e(i,r),t(a,r),r)}}function P(e,t,n,a,i){var r,o,l,s,u,c=i.areStatesEqual,p=i.areOwnPropsEqual,d=i.areStatePropsEqual,f=!1;function m(i,f){var m,g,y=!p(f,o),b=!c(i,r);return r=i,o=f,y&&b?(l=e(r,o),t.dependsOnOwnProps&&(s=t(a,o)),u=n(l,s,o)):y?(e.dependsOnOwnProps&&(l=e(r,o)),t.dependsOnOwnProps&&(s=t(a,o)),u=n(l,s,o)):b?(m=e(r,o),g=!d(m,l),l=m,g&&(u=n(l,s,o)),u):u}return function(i,c){return f?m(i,c):(l=e(r=i,o=c),s=t(a,o),u=n(l,s,o),f=!0,u)}}function R(e,t){var n=t.initMapStateToProps,a=t.initMapDispatchToProps,i=t.initMergeProps,r=f(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),o=n(e,r),l=a(e,r),s=i(e,r);return(r.pure?P:D)(o,l,s,e,r)}function Q(e,t,n){for(var a=t.length-1;a>=0;a--){var i=t[a](e);if(i)return i}return function(t,a){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+a.wrappedComponentName+".")}}function z(e,t){return e===t}var U,F,J,V,G,Y,W,K,q,Z,H,X,$=(J=(F=void 0===U?{}:U).connectHOC,V=void 0===J?I:J,G=F.mapStateToPropsFactories,Y=void 0===G?N:G,W=F.mapDispatchToPropsFactories,K=void 0===W?_:W,q=F.mergePropsFactories,Z=void 0===q?j:q,H=F.selectorFactory,X=void 0===H?R:H,function(e,t,n,a){void 0===a&&(a={});var i=a,r=i.pure,o=void 0===r||r,l=i.areStatesEqual,s=void 0===l?z:l,u=i.areOwnPropsEqual,c=void 0===u?x:u,p=i.areStatePropsEqual,m=void 0===p?x:p,g=i.areMergedPropsEqual,y=void 0===g?x:g,b=f(i,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),v=Q(e,Y,"mapStateToProps"),h=Q(t,K,"mapDispatchToProps"),w=Q(n,Z,"mergeProps");return V(X,d({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:v,initMapDispatchToProps:h,initMergeProps:w,pure:o,areStatesEqual:s,areOwnPropsEqual:c,areStatePropsEqual:m,areMergedPropsEqual:y},b))});n.d(t,"Provider",(function(){return c})),n.d(t,"createProvider",(function(){return u})),n.d(t,"connectAdvanced",(function(){return I})),n.d(t,"connect",(function(){return $}))},function(e,t){e.exports=n},function(e,t,n){"use strict";e.exports=function(e,t,n,a,i,r,o,l){if(!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,a,i,r,o,l],c=0;(s=new Error(t.replace(/%s/g,(function(){return u[c++]})))).name="Invariant Violation"}throw s.framesToPop=1,s}}},,,function(e,t,n){"use strict";n.r(t),n.d(t,"__DO_NOT_USE__ActionTypes",(function(){return r})),n.d(t,"applyMiddleware",(function(){return y})),n.d(t,"bindActionCreators",(function(){return p})),n.d(t,"combineReducers",(function(){return u})),n.d(t,"compose",(function(){return g})),n.d(t,"createStore",(function(){return l}));var a=n(14),i=function(){return Math.random().toString(36).substring(7).split("").join(".")},r={INIT:"@@redux/INIT"+i(),REPLACE:"@@redux/REPLACE"+i(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+i()}};function o(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function l(e,t,n){var i;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(l)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var s=e,u=t,c=[],p=c,d=!1;function f(){p===c&&(p=c.slice())}function m(){if(d)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return u}function g(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(d)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var t=!0;return f(),p.push(e),function(){if(t){if(d)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");t=!1,f();var n=p.indexOf(e);p.splice(n,1)}}}function y(e){if(!o(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(d)throw new Error("Reducers may not dispatch actions.");try{d=!0,u=s(u,e)}finally{d=!1}for(var t=c=p,n=0;n<t.length;n++){(0,t[n])()}return e}function b(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");s=e,y({type:r.REPLACE})}function v(){var e,t=g;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(m())}return n(),{unsubscribe:t(n)}}})[a.a]=function(){return this},e}return y({type:r.INIT}),(i={dispatch:y,subscribe:g,getState:m,replaceReducer:b})[a.a]=v,i}function s(e,t){var n=t&&t.type;return"Given "+(n&&'action "'+String(n)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function u(e){for(var t=Object.keys(e),n={},a=0;a<t.length;a++){var i=t[a];0,"function"==typeof e[i]&&(n[i]=e[i])}var o,l=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:r.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:r.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+r.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(n)}catch(e){o=e}return function(e,t){if(void 0===e&&(e={}),o)throw o;for(var a=!1,i={},r=0;r<l.length;r++){var u=l[r],c=n[u],p=e[u],d=c(p,t);if(void 0===d){var f=s(u,t);throw new Error(f)}i[u]=d,a=a||d!==p}return a?i:e}}function c(e,t){return function(){return t(e.apply(this,arguments))}}function p(e,t){if("function"==typeof e)return c(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var n={};for(var a in e){var i=e[a];"function"==typeof i&&(n[a]=c(i,t))}return n}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(n,!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function y(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),a=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},i={getState:n.getState,dispatch:function(){return a.apply(void 0,arguments)}},r=t.map((function(e){return e(i)}));return m({},n,{dispatch:a=g.apply(void 0,r)(n.dispatch)})}}}},function(e,t,n){"use strict";e.exports=n(34)},function(e,t,n){"use strict";(function(e,a){var i,r=n(19);i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:a;var o=Object(r.a)(i);t.a=o}).call(this,n(29),n(30)(e))},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.store=void 0;var a=f(n(2)),i=n(12),r=f(n(31)),o=n(7),l=n(78),s=f(l),u=f(n(103)),c=f(n(137)),p=f(n(142)),d=f(n(147));function f(e){return e&&e.__esModule?e:{default:e}}n(308);var m=t.store=(0,i.createStore)(s.default,l.initialState,(0,i.applyMiddleware)(r.default));t.default=function(e){return a.default.createElement(o.Provider,{store:m},a.default.createElement("div",{className:"editorWrapper"},a.default.createElement(p.default,null),a.default.createElement(d.default,null),a.default.createElement(c.default,null,a.default.createElement(u.default,{customEntities:e.customEntities}))))}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,a=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var i,r=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(r)?e:(i=0===r.indexOf("//")?r:0===r.indexOf("/")?n+r:a+r.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.midPoint=t.calcHorizonAng=t.getDistance=t.lerp=t.computeReshapePoints=void 0;var a=n(0);var i=function(e,t,n){return{x:(t.x-e.x)*n+e.x,y:(t.y-e.y)*n+e.y}},r=function(e,t){var n=t.x-e.x,a=t.y-e.y,i=void 0;return 0==n?a>0?90:a<0?270:0:0==a?n>0?0:180:isNaN(n)||isNaN(a)?0:(i=180*Math.atan(Math.abs(a/n))/Math.PI,n<0?i=a<0?180+i:180-i:a<0&&(i=360-i),i)},o=function(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}},l=function(e,t){var n=void 0;return 0==t?e:0==e.x&&0==e.y?e:(t>=360?t-=360:t<0&&(t+=360),90==t?n=1:180==t?(t=-1,n=0):270==t?(t=0,n=-1):(n=t*Math.PI/180,t=Math.cos(n),n=Math.sin(n)),{x:t*e.x-n*e.y,y:n*e.x+t*e.y})},s=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},u=function(e,t){var n=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);return Math.sqrt(n*n+a*a)};t.computeReshapePoints=function(e,t,n){var a={x:e.x,y:e.y},i=r(t,n),c=o(t,n),p=function(e,t,n,a,i){return 0==a||180==a?{x:i.x,y:e.y}:90==a||270==a?{x:e.x,y:i.y}:(e.x=((t.x-e.x)*(t.x-n.x)+(t.y-e.y)*(t.y-n.y))/((n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y)),{x:t.x+e.x*(n.x-t.x),y:t.y+e.x*(n.y-t.y)})}(a,s(l({x:999999,y:0},i+90),c),s(l({x:999999,y:0},i-90),c),i,c),d=u(p,c);return a.y>c.y?(d=-Math.abs(d),i>90&&i<270&&(d=Math.abs(d))):i>90&&i<270&&(d=-Math.abs(d)),{cp:p,curviness:d}},t.lerp=i,t.getDistance=u,t.calcHorizonAng=r,t.midPoint=o,t.default=function(e,t,n,l,s,c){return null==e||null==t?[{x:0,y:0},{x:100,y:100}]:function(e,t,n,l,s,c,p,d){p=p||0;a.urlConst.get("flowType");if(d){console.log("resetCpt");var f=o(n,l),m=r(n,l);c={x:f.x+p*Math.sin(m/180*Math.PI),y:f.y-p*Math.cos(m/180*Math.PI)}}for(var g=c||{x:(n.x+l.x)/2,y:(n.y+l.y)/2},y=u(n,l),b=u(l,g),v=(y-25*((n.x-l.x)*(g.x-l.x)+(n.y-l.y)*(g.y-l.y))/(y*b))/y,h=[n,{x:n.x+2*(g.x-n.x)/3,y:n.y+2*(g.y-n.y)/3},{x:l.x+2*(g.x-l.x)/3,y:l.y+2*(g.y-l.y)/3},l],w=[],k=1;k<4;k++)w.push(i(h[k-1],h[k],v));return w.push(i(w[0],w[1],v)),w.push(i(w[1],w[2],v)),w.push(i(w[3],w[4],v)),{lineType:s,pointsArr:[h[0],w[0],w[3],w[5]],QPointsArr:[n,g,l],cPoint:g,curviness:p}}(0,0,{x:e.x+e.width/2,y:e.y+e.height/2},{x:t.x+t.width/2,y:t.y+t.height/2},n,l,s,c)}},function(e,t,n){"use strict";function a(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",(function(){return a}))},function(e,t,n){"use strict";var a=n(13),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},l={};function s(e){return a.isMemo(e)?o:l[e.$$typeof]||i}l[a.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0};var u=Object.defineProperty,c=Object.getOwnPropertyNames,p=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,m=Object.prototype;e.exports=function e(t,n,a){if("string"!=typeof n){if(m){var i=f(n);i&&i!==m&&e(t,i,a)}var o=c(n);p&&(o=o.concat(p(n)));for(var l=s(t),g=s(n),y=0;y<o.length;++y){var b=o[y];if(!(r[b]||a&&a[b]||g&&g[b]||l&&l[b])){var v=d(n,b);try{u(t,b,v)}catch(e){}}}return t}return t}},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetViewport=t.setColorPicker=t.stopCopying=t.anchorEntity=t.connecting=t.anchorCanvas=t.zoom=t.trackMovement=t.configViewport=t.initialColors=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=function(e){return e&&e.__esModule?e:{default:e}}(n(59));function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var o=function(e,t){return{anchoredEntity:{isAnchored:!0,id:e,type:t}}},l=function(e,t,n){return{width:(e.width-t.x)/n,height:(e.height-t.y)/n}},s=function(e){var t=i.default.get();return a({},e,{canvasViewport:t,canvasArtboard:a({},e.canvasArtboard,l(t,e.canvasArtboard,e.zoom))})};t.initialColors=function(e){return{type:"editor/link/INITIAL_COLORS",payload:e}},t.configViewport=function(e){return{type:"editor/canvas/CONFIG_VIEWPORT",payload:e}},t.trackMovement=function(e){return{type:"editor/canvas/TRACK",payload:e}},t.zoom=function(e,t,n,a){return{type:"editor/canvas/ZOOM",payload:{zoom:e,offsetX:t,offsetY:n,reset:a}}},t.anchorCanvas=function(e){return{type:"editor/canvas/ANCHOR_CANVAS",payload:e}},t.connecting=function(e){return{type:"editor/canvas/CONNECT",payload:e}},t.anchorEntity=function(e){var t=e.isAnchored,n=void 0===t||t,a=e.id;return{type:"editor/canvas/ANCHOR_ENTITY",payload:{isAnchored:n,id:void 0===a?"":a,clientX:e.clientX,clientY:e.clientY}}},t.stopCopying=function(e){return{type:"editor/canvas/STOP_COPYING",payload:e}},t.setColorPicker=function(e){return{type:"editor/canvas/COLOR_PICKER",payload:e}},t.resetViewport=function(){return{type:"editor/canvas/RESET_VIEWPORT"}};t.default=function(e,t){switch(t.type){case"editor/canvas/CONFIG_VIEWPORT":return s(e);case"editor/config/SET":return a({},e,{gridSize:t.payload.gridSize});case"editor/link/DELETE_LINK":case"editor/tabs/EDIT_SUBFLOW":case"editor/tabs/CHANGE_TAB":case"editor/tabs/OPEN_EXISTED_SUBFLOW":case"editor/entity/REMOVE":case"editor/tabs/CLOSE":return t.payload.keepSelectedEntity?a({},e):a({},e,{selectedEntity:{id:"",linkId:""}});case"editor/canvas/ANCHOR_CANVAS":return a({},e,{selectedEntity:{id:"",linkId:""},canvasAnchor:{isMoving:t.payload,coords:e.cursor}});case"editor/canvas/TRACK":var n=e.zoom,i=t.payload,u=i.x,c=i.y,p=e.canvasViewport,d=p.x,f=p.y,m=e.canvasAnchor.coords,g=m.x,y=m.y,b=e.canvasArtboard,v=b.x,h=b.y;return e.canvasAnchor.isMoving?a({},e,{canvasArtboard:function(){var t=u-d-g*n,i=c-f-y*n,r={x:t>0?0:t,y:i>0?0:i};return a({},l(e.canvasViewport,r,n),r)}()}):a({},e,{cursor:{x:1/n*(u-d-v),y:1/n*(c-f-h)}});case"editor/canvas/ZOOM":var w=t.payload,k=w.zoom,E=w.offsetX,A=w.offsetY,I=w.reset,C=l(e.canvasViewport,I?e.canvasArtboard:{x:0,y:0},k),T=e.canvasArtboard.x-E,x=e.canvasArtboard.y-A;return a({},e,{zoom:k,canvasArtboard:a({},e.canvasArtboard,{x:T,y:x,width:C.width+Math.abs(T)/k,height:C.height+Math.abs(x)/k})});case"editor/canvas/CONNECT":return a({},e,{connecting:t.payload});case"editor/canvas/ANCHOR_ENTITY":return a({},e,{anchoredEntity:t.payload});case"editor/entity/ADD":return a({},s(e),o(t.payload.id,t.payload.type),{copyStatus:a({},e.copyStatus,{prevAddType:t.payload.type})});case"editor/canvas/RESET_VIEWPORT":return a({},s(e));case"editor/canvas/STOP_COPYING":return a({},e,{copyStatus:a({},e.copyStatus,t.payload)});case"editor/entity/ADD_LINKED":return a({},s(e),o(t.payload.entity.id));case"editor/entity/LINK_TO":return a({},e,{connecting:{currently:!1,from:""}});case"editor/metaentity/SELECT":var M=t.payload.id;return a({},e,{selectedEntity:{id:M,linkId:""}});case"editor/link/SELECT_LINK":var L=t.payload,S=(L.fromId,L.linkId);return a({},e,{selectedEntity:a({},e.selectedEntity,{linkId:S})});case"editor/canvas/COLOR_PICKER":return a({},e,{colorPicker:t.payload?a({},e.picker,t.payload):{linkId:"",fromId:"",pos:{left:0,top:0},display:!1,color:""}});case"editor/link/LINK_COLOR":var B=t.payload.color;return a({},e,{lineColors:e.lineColors.includes(B)?e.lineColors:[].concat(r(e.lineColors),[B])});case"editor/link/INITIAL_COLORS":return a({},e,{lineColors:t.payload});default:return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setLinkColor=t.align=t.setSubflowId=t.deleteLink=t.reshape=t.selectLink=t.unselectAll=t.selectEntity=t.setName=t.move=t.removeEntity=t.addLinkedEntity=t.linkTo=t.addEntity=t.setCustom=t.setEntities=t.metaEntityReducer=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=n(1),o=function(e){return e&&e.__esModule?e:{default:e}}(n(18)),l=n(0),s=n(6),u=n(81);function c(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=0,f=0,m=void 0,g=void 0,y=function(e){return i({},e,{isSelected:!1})};t.metaEntityReducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],n=arguments[2],a=arguments[3];switch(t.type){case"editor/entity/SET":return t.payload.map((function(e){return{id:e.id,isAnchored:!1,isSelected:!1,anchor:{x:e.width/2,y:e.height/2}}}));case"editor/entity/ADD":return[].concat(c(e),[{id:t.payload.id,isAnchored:t.payload.isAnchored,isSelected:t.payload.isAnchored,anchor:{x:t.payload.width/2,y:t.payload.height/2}}]);case"editor/metaentity/SELECT":var r=t.payload,o=r.id,s=r.isSelected;return e.map((function(e){return e.id==o?i({},e,{isSelected:s}):i({},e,{isSelected:!1})}));case"editor/canvas/ANCHOR_ENTITY":var u=t.payload.id;return e.map((function(e){return e.id==u?i({},e,{isAnchored:!0,anchor:{x:a.cursor.x-(n.find((function(e){return e.id==u}))||{x:0}).x,y:a.cursor.y-(n.find((function(e){return e.id==u}))||{y:0}).y}}):i({},e,{isAnchored:!1})}));case"editor/entity/REMOVE":return e.filter((function(e){return e.id!==t.payload.entityId}));case"editor/canvas/ANCHOR_CANVAS":return e.map(y);case"editor/entity/CONNECT":case"editor/metaentity/UNSELECTALL":return l.multiSelectList.clearAllSelected(),e.map(y);case"editor/tabs/CHANGE_TAB":case"editor/tabs/OPEN_EXISTED_SUBFLOW":var p=t.payload,d=(p.flowId,p.subflow),f=(p.flowName,d.metaEntity);return f.forEach((function(e){return e.isSelected=!1})),f;case"editor/tabs/EDIT_SUBFLOW":return[{id:m,isAnchored:!1,isSelected:!1,anchor:{x:20,y:20}},{id:g,isAnchored:!1,isSelected:!1,anchor:{x:20,y:20}}];case"editor/tabs/CLOSE":var b=t.payload,v=(b.closeFlowId,b.closeIndex),h=b.subflow;b.newActiveIndex;return 0!==v?h.metaEntity:e;default:return e}},t.setEntities=function(e){return{type:"editor/entity/SET",payload:e}},t.setCustom=function(e){return{type:"editor/entity/SET_CUSTOM",payload:e}},t.addEntity=function(e){return{type:"editor/entity/ADD",payload:e}},t.linkTo=function(e,t,n){return{type:"editor/entity/LINK_TO",payload:{entityId:e,linkId:t,type:n}}},t.addLinkedEntity=function(e){return{type:"editor/entity/ADD_LINKED",payload:e}},t.removeEntity=function(e,t){return{type:"editor/entity/REMOVE",payload:{entityId:e,typeName:t}}},t.move=function(e){return{type:"editor/entity/MOVE",payload:e}},t.setName=function(e){return{type:"editor/entity/SET_NAME",payload:e}},t.selectEntity=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{type:"editor/metaentity/SELECT",payload:{id:e,isSelected:t}}},t.unselectAll=function(){return{type:"editor/metaentity/UNSELECTALL",payload:null}},t.selectLink=function(e,t){return{type:"editor/link/SELECT_LINK",payload:{fromId:e,linkId:t}}},t.reshape=function(e){return{type:"editor/link/RESHAPE",payload:e}},t.deleteLink=function(e){return{type:"editor/link/DELETE_LINK",payload:e}},t.setSubflowId=function(e,t){return{type:"editor/entity/SET_SUBFLOWID",payload:{entityId:e,subflowId:t}}},t.align=function(e){return{type:"editor/entity/ALIGN",payload:e}},t.setLinkColor=function(e){return{type:"editor/link/LINK_COLOR",payload:e}};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],n=arguments[2],y=arguments[3],b=arguments[4],v=arguments[5];switch(t.type){case"editor/entity/SET":return t.payload;case"editor/config/SET":var h=t.payload;return e.map((function(e){var t=h.entityTypes[e.type];return t?i({},e,{width:t.width,height:t.height}):e}));case"editor/entity/ADD":var w=t.payload,k=w.id,E=w.type,A=w.name,I=w.width,C=w.height,T=w.x,x=w.y,M=void 0,L="sub"==l.urlConst.get("flowType").substr(-3);if(console.log("isSub",L),"start"==E){var S=(0,s.getEntityByType)(e,E);if(S)return(0,r.toast)({title:l.multiLang["entity-000014"],color:"warning"}),e}if(("check"==E||"manual"==E)&&!L&&b.id==v){var B=(0,s.getEntityByType)(e,"lister");B?(A=l.activityNameMap[E],M=l.multiLang["entity-000015"]):(E="lister",A=l.activityNameMap[E],M=l.multiLang["entity-000016"])}if("subflow"==E)return l.attributesList.add(p({},k,{general:{id:k,name:A,type:E,describe:M,subflowId:""},participants:{},advanced:{},apparent:{},branchMerge:{},application:{implementName:"SubFlow",id:E,type:"SYNCHR",name:l.multiLang["entity-000017"]},condition:{},flowAttr:{},messageReminding:{},priority:{}})),[].concat(c(e),[{id:k,type:E,name:A,width:I,height:C,x:T,y:x,subflowId:"",linksFrom:[],linksTo:[]}]);var _=E.split("-"),N={};return 2==_.length&&(E=_[0],N=l.WorkflowGadgetlist.get().find((function(e){return e.pk_workflowgadget==_[1]}))),l.attributesList.add(p({},k,{general:{id:k,name:A,type:E,describe:M},participants:{participantId:"lister"==E||"check"==E||"auto"==E||"manual"==E?(0,s.uuid)():"",organizeUnitType:"lister"==E||"check"==E||"manual"==E?"OPERATOR":""},advanced:{},apparent:{},branchMerge:{},application:i({},N,{implementName:"lister"==E||"check"==E||"manual"==E||"auto"==E?"Tool":"NO",workflowGadget:function(){if("auto"==E&&N)return N.pk_workflowgadget}(),workflowGadgetName:function(){if("auto"==E&&N)return N.gadget_name}(),id:E,name:"lister"==E?l.multiLang["entity-000018"]:"check"===E?l.multiLang["entity-000019"]:"manual"===E?l.multiLang["entity-000020"]:"auto"===E?l.multiLang["utils-000003"]:void 0,type:"lister"==E||"check"==E||"manual"==E?"APPLICATION":"auto"==E?"PROCEDURE":"NO"}),condition:{},flowAttr:{},messageReminding:{},priority:{}})),[].concat(c(e),[{id:k,type:E,name:A,width:I,height:C,x:T,y:x,linksFrom:[],linksTo:[]}]);case"editor/entity/LINK_TO":var O=t.payload,j=O.entityId,D=O.linkId,P=(O.type,O.lineType),R=void 0===P?"3":P,Q="",z=l.multiLang["entity-000010"];l.attributesList.add(p({},D,{general:{id:D,target:j,name:Q,type:"link",describe:z},condition:{},priority:{},apparent:{}}));var U=e.map((function(e){return e.id==j?i({},e,{linksFrom:[].concat(c(e.linksFrom?e.linksFrom:[]),[{linkId:D,entityId:y.connecting.from}])}):e}));return U.map((function(t){return t.id===y.connecting.from?i({},t,{linksTo:[].concat(c(t.linksTo?t.linksTo:[]),c(t.linksTo&&t.linksTo.some((function(e){return e.target===j}))?[]:[{target:j,from:t.id,edited:!1,selected:!1,linkId:D,linkName:Q,type:"link",describe:z,points:(0,o.default)(t,e.find((function(e){return e.id==j})),R)}]))}):t}));case"editor/entity/REMOVE":var F=function(){var n=t.payload,a=n.entityId,r=(n.typeName,void 0),o=!1;if("[object String]"==Object.prototype.toString.call(a))r=[a];else if(!a&&(r=Object.keys(l.multiSelectList.data().entity),console.log("entityIds",r),o=!0,0==r.length))return{v:e};for(var s=0;s<r.length;s++)if(a=r[s],!o)return{v:e.filter((function(e){return e.id!=a})).map((function(e){return e.linksTo?i({},e,{linksTo:e.linksTo.filter((function(e){return e.target!=a}))}):e})).map((function(e){return e.linksFrom?i({},e,{linksFrom:e.linksFrom.filter((function(e){return e.entityId!=a}))}):e}))};if(o)return{v:e.filter((function(e){return!l.multiSelectList.entIncludes(e.id)||(e.linksTo.forEach((function(e){l.multiSelectList.delLink(e.linkId)})),e.linksFrom.forEach((function(e){l.multiSelectList.delLink(e.linkId)})),!1)})).map((function(e){return e.linksTo?i({},e,{linksTo:e.linksTo.filter((function(e){return!l.multiSelectList.entIncludes(e.target)||(l.multiSelectList.delLink(e.linkId),!1)})),linksFrom:e.linksFrom.filter((function(e){return!l.multiSelectList.entIncludes(e.entityId)||(l.multiSelectList.delLink(e.linkId),!1)}))}):e}))}}();if("object"===(void 0===F?"undefined":a(F)))return F.v;case"editor/canvas/ANCHOR_ENTITY":var J=t.payload;return d=J.clientX,f=J.clientY,e;case"editor/canvas/TRACK":if(y.anchoredEntity.isAnchored){var V=Object.keys(l.multiSelectList.data().entity);if(V.length>0){console.log("block move");var G=(t.payload.x-d)/y.zoom,Y=(t.payload.y-f)/y.zoom;d=t.payload.x,f=t.payload.y;var W=e.map((function(t){if(l.multiSelectList.entIncludes(t.id)){var n=t.linksTo,a=[];return t.x+=G,t.y+=Y,n.length>0&&(a=n.map((function(n){return l.multiSelectList.entIncludes(n.target),i({},n,{points:(0,o.default)(t,(0,s.getEntity)(e,n.target),n.points.lineType,null,n.points.curviness,!0)})}))),i({},t,{linksTo:a})}var r;return r=t.linksTo.map((function(n){return l.multiSelectList.entIncludes(n.target)?i({},n,{points:(0,o.default)(t,(0,s.getEntity)(e,n.target),n.points.lineType,n.points.QPointsArr[1],n.points.curviness,!0)}):n})),i({},t,{linksTo:r})}));return W}var K=y.anchoredEntity.id,q=n.find((function(e){return e.id===K}))||{anchor:{x:0,y:0}},Z=y.cursor.x-q.anchor.x,H=y.cursor.y-q.anchor.y,X=(0,s.minZero)(Z),$=(0,s.minZero)(H);return e.map((function(t){return t.linksTo&&t.id===K?i({},t,{x:X,y:$,linksTo:t.linksTo.map((function(n){return i({},n,{points:(0,o.default)(t,e.find((function(e){return e.id===n.target})),n.points.lineType,n.points.QPointsArr[1],n.points.curviness,!0)})}))}):t.id===K?i({},t,{x:X,y:$}):t.linksTo&&t.linksTo.some((function(e){return e.target===K}))?i({},t,{linksTo:t.linksTo.map((function(n){return n.target===K?i({},n,{points:(0,o.default)(t,e.find((function(e){return e.id===K})),n.points.lineType,n.points.QPointsArr[1],n.points.curviness,!0)}):n}))}):t}))}return e;case"editor/entity/SET_NAME":var ee=t.payload,te=ee.id,ne=ee.name,ae=ee.type;if(ae&&"link"==ae){var ie=(0,s.getLink)(e,te),re=ie.from,oe=e.map((function(e){return e.id==re?i({},e,{linksTo:e.linksTo?e.linksTo.map((function(e){return e.linkId==ie.linkId?i({},e,{linkName:ne}):e})):[]}):e}));return oe}return l.attributesList.get(te).general.name=ne,e.map((function(e){return e.id==te?i({},e,{name:ne}):e}));case"editor/entity/SET_SUBFLOWID":var le=t.payload,se=le.entityId,ue=le.subflowId;return e.map((function(e){return e.id==se?i({},e,{subflowId:ue}):e}));case"editor/entity/SET_CUSTOM":var ce=t.payload,pe=ce.id,de=ce.custom;return e.map((function(e){return e.id==pe?i({},e,{custom:de}):e}));case"editor/link/RESHAPE":var fe=t.payload,me=fe.fromId,ge=fe.targetId,ye=fe.linkId,be=fe.cPoint,ve=fe.curviness;return e.map((function(t){return t.id==me?i({},t,{linksTo:t.linksTo.map((function(n){return n.linkId==ye?i({},n,{points:(0,o.default)(t,(0,s.getEntity)(e,ge),3,be,ve)}):n}))}):t}));case"editor/link/SELECT_LINK":var he=t.payload,we=he.fromId,ke=he.linkId;return e.map((function(e){return e.id==we?i({},e,{linksTo:e.linksTo.map((function(e){return e.linkId==ke?i({},e,{selected:!0}):i({},e,{selected:!1})}))}):e}));case"editor/link/LINK_COLOR":var Ee=t.payload,Ae=Ee.fromId,Ie=Ee.linkId,Ce=Ee.color;return e.map((function(e){return e.id==Ae?i({},e,{linksTo:e.linksTo.map((function(e){return e.linkId==Ie?i({},e,{color:Ce}):e}))}):e}));case"editor/link/DELETE_LINK":var Te=t.payload;return Te.forEach((function(t){var n=t.fromId,a=t.targetId,r=t.linkId;e=e.map((function(e){return e.id==n?i({},e,{linksTo:e.linksTo?e.linksTo.filter((function(e){return e.linkId!==r})):[].concat(c(e.linksTo))}):e})).map((function(e){return e.id==a?i({},e,{linksFrom:e.linksFrom?e.linksFrom.filter((function(e){return e.linkId!=r})):[].concat(c(e.linksFrom))}):e}))})),e;case"editor/metaentity/SELECT":case"editor/canvas/ANCHOR_CANVAS":return e.map((function(e){return i({},e,{linksTo:e.linksTo?e.linksTo.map((function(e){return i({},e,{selected:!1})})):[]})}));case"editor/tabs/CHANGE_TAB":case"editor/tabs/OPEN_EXISTED_SUBFLOW":var xe=t.payload,Me=(xe.flowId,xe.subflow),Le=(xe.flowName,Me.entity);return Le;case"editor/tabs/EDIT_SUBFLOW":return m=(0,s.uuid)(),g=(0,s.uuid)(),l.attributesList.add(p({},m,{general:{id:m,name:l.multiLang["utils-000000"],type:"start",describe:""}})),l.attributesList.add(p({},g,{general:{id:g,name:l.multiLang["utils-000001"],type:"finish",describe:""}})),[{id:m,type:"start",name:l.multiLang["index-000002"],width:40,height:40,x:60,y:60,linksFrom:[],linksTo:[]},{id:g,type:"finish",name:l.multiLang["index-000003"],width:40,height:40,x:600,y:500,linksFrom:[],linksTo:[]}];case"editor/tabs/CLOSE":var Se=t.payload,Be=(Se.closeFlowId,Se.newActiveFlowId,Se.closeIndex),_e=Se.subflow;Se.newActiveIndex;return 0!==Be?_e.entity:e;case"editor/entity/ALIGN":var Ne=(0,u.blockAlign)(e,t.payload);return Ne;default:return e}}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setFlows=t.openExistedSubflow=t.changeTab=t.editSubflow=t.closeTab=t.findFlowsByEntityIdsRecrusive=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=n(0),r=n(6);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var s=t.findFlowsByEntityIdsRecrusive=function e(t,n,a,i,r){for(var o=[],s=function(s){var u=t[s],c=n.filter((function(e){return e.entityId==u&&a.push(e.flowId),e.entityId==u}));o=[].concat(l(c));var p=[];o.forEach((function(e){e[e.flowId].entity.forEach((function(e){i.push(e.id),"subflow"==e.type&&p.push(e.id),e.linksTo&&e.linksTo.forEach((function(e){r.push(e.linkId)}))}))})),p.length>0&&e(p,n,a,i,r)},u=0;u<t.length;u++)s(u)};t.closeTab=function(e,t,n,a,r){return{type:"editor/tabs/CLOSE",payload:{closeFlowId:e,newActiveFlowId:t,closeIndex:n,subflow:i.subflowsList.getByFlowId([t])[t],newActiveIndex:a,keepSelectedEntity:r}}},t.editSubflow=function(e,t){return{type:"editor/tabs/EDIT_SUBFLOW",payload:{entityId:e,flowId:t}}},t.changeTab=function(e,t,n){return{type:"editor/tabs/CHANGE_TAB",payload:{flowId:e,flowName:t,newActiveIndex:n,subflow:i.subflowsList.getByFlowId([e])[e]}}},t.openExistedSubflow=function(e,t){return{type:"editor/tabs/OPEN_EXISTED_SUBFLOW",payload:{flowId:e,flowName:t,subflow:i.subflowsList.getByFlowId([e])[e]}}},t.setFlows=function(e){return{type:"editor/tabs/SET_FLOWS",payload:e}};t.default=function(e,t,n,u,c,p){var d=i.urlConst.get("flowType");switch(t.type){case"editor/tabs/EDIT_SUBFLOW":var f,m=t.payload.flowId,g=e.id,y=i.subflowsList.getByFlowId(g);y[g].entity=n,y[g].metaEntity=u,y[g].history=c,y[g].artboard={zoom:p.zoom,canvasArtboard:p.canvasArtboard};var b=[].concat(l(e.displayFlowIds),[m]),v=b.length-1,h=i.activityNameMap.subflow,w=i.multiLang["tab-000006"];return i.subflowsList.push((o(f={},m,{entity:[],metaEntity:[],history:{past:[],future:[],lastAction:"@@INIT"},artboard:{zoom:1,canvasArtboard:{x:0,y:0}}}),o(f,"flowName",h),o(f,"entityId",t.payload.entityId),o(f,"flowId",m),f)),i.attributesList.add(o({},m,{general:{id:m,name:h,describe:w,version:"0.0",createTime:(0,r.formatTime)("yyyy-MM-dd hh:mm:ss"),useOrg:"",type:"curflow"},advanced:"approve"==d||"approve_sub"==d?{workflowType:"3"}:"workflow"==d||"workflow_sub"==d?{workflowType:"5"}:{}})),i.attributesList.get(t.payload.entityId).general.subflowId=m,a({},e,{id:m,name:h,activeIndex:v,displayFlowIds:b,flowNames:a({},e.flowNames,o({},m,h))});case"editor/tabs/CHANGE_TAB":var k=e.id,E=i.subflowsList.getByFlowId(k);return E[k].entity=n,E[k].metaEntity=u,E[k].history=c,E[k].artboard={zoom:p.zoom,canvasArtboard:p.canvasArtboard},a({},e,{id:t.payload.flowId,name:t.payload.flowName,activeIndex:t.payload.newActiveIndex,displayFlowIds:[].concat(l(e.displayFlowIds))});case"editor/tabs/CLOSE":var A=e.id,I=i.subflowsList.getByFlowId(A);return I[A].entity=n,I[A].metaEntity=u,I[A].history=c,I[A].artboard={zoom:p.zoom,canvasArtboard:p.canvasArtboard},0!==t.payload.closeIndex?a({},e,{id:t.payload.newActiveFlowId,activeIndex:t.payload.newActiveIndex,displayFlowIds:[].concat(l(e.displayFlowIds.filter((function(e){return e!==t.payload.closeFlowId}))))}):e;case"editor/tabs/OPEN_EXISTED_SUBFLOW":var C=e.id,T=i.subflowsList.getByFlowId(C);return T[C].entity=n,T[C].metaEntity=u,T[C].history=c,T[C].artboard={zoom:p.zoom,canvasArtboard:p.canvasArtboard},a({},e,{id:t.payload.flowId,activeIndex:e.displayFlowIds.length,displayFlowIds:[].concat(l(e.displayFlowIds),[t.payload.flowId])});case"editor/entity/REMOVE":var x=t.payload,M=(x.typeName,x.entityId),L=e.displayFlowIds,S=e.flowNames,B=i.subflowsList.data(),_=[],N=void 0;if("[object String]"==Object.prototype.toString.call(M))N=[M];else if(!M&&(!0,0==(N=Object.keys(i.multiSelectList.data().entity)).length))return e;for(var O=0;O<N.length;O++)M=N[O],i.subflowsList.getByEntityId(M)&&(console.log("删除流程, entityId",M),_.push(M));if(0==_.length)return e;var j=function(e,t,n,a){var i=[],r=Array.isArray(a)?a:[a];s(r,e,i,[],[]);for(var o=0;o<i.length;o++){delete t[i[o]]}return{displayFlowIds:n=[].concat(l(n.filter((function(e){return!i.some((function(t){return t==e}))})))),flowNames:t,subFlows:e}}(B,S,L,_);return a({},e,{displayFlowIds:j.displayFlowIds,flowNames:a({},j.flowNames)});case"editor/entity/SET_NAME":var D=t.payload,P=D.id,R=D.name;return"curflow"==D.type?a({},e,{flowNames:a({},e.flowNames,o({},P,R))}):e;case"editor/tabs/SET_FLOWS":return a({},e,t.payload);default:return e}}},function(e,t,n){var a=n(198);"string"==typeof a&&(a=[[e.i,a,""]]);var i={transform:void 0};n(4)(a,i);a.locals&&(e.exports=a.locals)},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){"use strict";function a(e){return function(t){var n=t.dispatch,a=t.getState;return function(t){return function(i){return"function"==typeof i?i(n,a,e):t(i)}}}}n.r(t);var i=a();i.withExtraArgument=a,t.default=i},function(e,t,n){"use strict";var a=n(33);function i(){}function r(){}r.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,r,o){if(o!==a){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:r,resetWarningCache:i};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&Symbol.for,i=a?Symbol.for("react.element"):60103,r=a?Symbol.for("react.portal"):60106,o=a?Symbol.for("react.fragment"):60107,l=a?Symbol.for("react.strict_mode"):60108,s=a?Symbol.for("react.profiler"):60114,u=a?Symbol.for("react.provider"):60109,c=a?Symbol.for("react.context"):60110,p=a?Symbol.for("react.async_mode"):60111,d=a?Symbol.for("react.concurrent_mode"):60111,f=a?Symbol.for("react.forward_ref"):60112,m=a?Symbol.for("react.suspense"):60113,g=a?Symbol.for("react.suspense_list"):60120,y=a?Symbol.for("react.memo"):60115,b=a?Symbol.for("react.lazy"):60116,v=a?Symbol.for("react.fundamental"):60117,h=a?Symbol.for("react.responder"):60118;function w(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case p:case d:case o:case s:case l:case m:return e;default:switch(e=e&&e.$$typeof){case c:case f:case u:return e;default:return t}}case b:case y:case r:return t}}}function k(e){return w(e)===d}t.typeOf=w,t.AsyncMode=p,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=u,t.Element=i,t.ForwardRef=f,t.Fragment=o,t.Lazy=b,t.Memo=y,t.Portal=r,t.Profiler=s,t.StrictMode=l,t.Suspense=m,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===d||e===s||e===l||e===m||e===g||"object"==typeof e&&null!==e&&(e.$$typeof===b||e.$$typeof===y||e.$$typeof===u||e.$$typeof===c||e.$$typeof===f||e.$$typeof===v||e.$$typeof===h)},t.isAsyncMode=function(e){return k(e)||w(e)===p},t.isConcurrentMode=k,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===u},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return w(e)===f},t.isFragment=function(e){return w(e)===o},t.isLazy=function(e){return w(e)===b},t.isMemo=function(e){return w(e)===y},t.isPortal=function(e){return w(e)===r},t.isProfiler=function(e){return w(e)===s},t.isStrictMode=function(e){return w(e)===l},t.isSuspense=function(e){return w(e)===m}},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setLinkColor=t.align=t.signUpperBills=t.deleteLink=t.selectLink=t.unselectAll=t.selectEntity=t.setName=t.removeEntity=t.addLinkedEntity=t.linkTo=t.addEntity=t.reshape=t.setCustom=t.setEntities=t.bppMetaEntityReducer=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=n(1),o=function(e){return e&&e.__esModule?e:{default:e}}(n(18)),l=n(0),s=n(6),u=n(81);function c(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t,n,a){var i=[];return e.forEach((function(e){e.target==t&&i.push(e.type)})),i.includes(n)?[]:[a]}function f(e,t,n){var a=[],i=void 0,r=void 0,o=0,l=Math.abs(e.y-t.y),s=Math.abs(e.x-t.x);if(n.forEach((function(n){"drive"==n.type&&n.from==e.id&&n.to==t.id&&(a.push(n))})),a.length>0){var u=(e.x+t.x)/2,c=(e.y+t.y)/2;if(s>l){a.sort((function(e,t){return e.y-t.y}));for(var p=0;p<a.length-1;p++){var d=Math.abs(a[p].y-a[p+1].y),f=a[p].y+a[p+1].y;d>o&&(o=d,r=f/2)}if(o>120)return{x:u,y:r};console.log("driveArr",a);var m=void 0;if(1==a.length){var g=a[0].y-c;m=Math.abs(g)>120?c:g>0?a[0].y-83:a[0].y+83}else m=Math.abs(a[0].y-c)>Math.abs(a[a.length-1].y-c)||a[0].y-83<0?a[a.length-1].y+83:a[0].y-83;return{x:u,y:m}}a.sort((function(e,t){return e.x-t.x}));for(var y=0;y<a.length-1;y++){var b=Math.abs(a[y].x-a[y+1].x),v=a[y].x+a[y+1].x;b>o&&(o=b,i=v/2)}if(o>115)return{x:i,y:c};var h=void 0;if(1==a.length){var w=a[0].x-u;h=Math.abs(w)>115?u:w>0?a[0].x-73:a[0].x+73}else h=Math.abs(a[0].x-u)>Math.abs(a[a.length-1].x-u)||a[0].x-73<0?a[a.length-1].x+73:a[0].x-73;return{x:h,y:c}}return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}var m=0,g=0,y=void 0,b=function(e){return i({},e,{isSelected:!1})};t.bppMetaEntityReducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],n=arguments[2],a=arguments[3];switch(t.type){case"editor/entity/SET":return t.payload.map((function(e){return{id:e.id,isAnchored:!1,isSelected:!1,anchor:{x:e.width/2,y:e.height/2}}}));case"editor/entity/ADD":return[].concat(c(e),[{id:t.payload.id,isAnchored:t.payload.isAnchored,isSelected:t.payload.isAnchored,anchor:{x:t.payload.width/2,y:t.payload.height/2}}]);case"editor/metaentity/SELECT":var r=t.payload,o=r.id,s=r.isSelected;return e.map((function(e){return e.id==o?i({},e,{isSelected:s}):i({},e,{isSelected:!1})}));case"editor/canvas/ANCHOR_ENTITY":var u=t.payload.id;return e.map((function(e){return e.id==u?i({},e,{isAnchored:!0,anchor:{x:a.cursor.x-(n.find((function(e){return e.id==u}))||{x:0}).x,y:a.cursor.y-(n.find((function(e){return e.id==u}))||{y:0}).y}}):i({},e,{isAnchored:!1})}));case"editor/entity/LINK_TO":if(y){var p=[].concat(c(e),[y]);return y=null,p}return e;case"editor/entity/REMOVE":return e.filter((function(e){return e.id!==t.payload.entityId}));case"editor/canvas/ANCHOR_CANVAS":return e.map(b);case"editor/entity/CONNECT":case"editor/metaentity/UNSELECTALL":return l.multiSelectList.clearAllSelected(),e.map(b);default:return e}},t.setEntities=function(e){return{type:"editor/entity/SET",payload:e}},t.setCustom=function(e){return{type:"editor/entity/SET_CUSTOM",payload:e}},t.reshape=function(e){return{type:"editor/link/RESHAPE",payload:e}},t.addEntity=function(e){return{type:"editor/entity/ADD",payload:e}},t.linkTo=function(e,t,n,a){return{type:"editor/entity/LINK_TO",payload:{entityId:e,linkId:t,lineType:n,entityType:a}}},t.addLinkedEntity=function(e){return{type:"editor/entity/ADD_LINKED",payload:e}},t.removeEntity=function(e,t){return{type:"editor/entity/REMOVE",payload:{entityId:e,typeName:t}}},t.setName=function(e){return{type:"editor/entity/SET_NAME",payload:e}},t.selectEntity=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{type:"editor/metaentity/SELECT",payload:{id:e,isSelected:t}}},t.unselectAll=function(){return{type:"editor/metaentity/UNSELECTALL",payload:null}},t.selectLink=function(e,t){return{type:"editor/link/SELECT_LINK",payload:{fromId:e,linkId:t}}},t.deleteLink=function(e){return{type:"editor/link/DELETE_LINK",payload:e}},t.signUpperBills=function(e,t){return{type:"editor/entity/SIGN_UPPER_BILLS",payload:{fromId:e,rmSign:t}}},t.align=function(e){return{type:"editor/entity/ALIGN",payload:e}},t.setLinkColor=function(e){return{type:"editor/link/LINK_COLOR",payload:e}};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],n=arguments[2],b=arguments[3];arguments[4],arguments[5];switch(t.type){case"editor/entity/SET":return t.payload;case"editor/config/SET":var v=t.payload;return e.map((function(e){var t=v.entityTypes[e.type];return t?i({},e,{width:t.width,height:t.height}):e}));case"editor/entity/ADD":var h=t.payload,w=h.id,k=h.type,E=h.name,A=h.width,I=h.height,C=h.x,T=h.y;if("start"==k||"finish"==k){var x=(0,s.getEntityByType)(e,k);if(x)return(0,r.toast)({title:l.multiLang["entity-000006"],color:"warning"}),e}var M={router:l.multiLang["entity-000007"],start:l.multiLang["entity-000008"],finish:l.multiLang["entity-000009"]};"start"!=k&&"router"!=k&&"finish"!=k||(E=M[k],l.attributesList.add(p({},w,{name:E,type:k})));var L={id:w,type:k,name:E,width:A,height:I,x:C,y:T,linksFrom:[],linksTo:[]};return"drive"==k&&(L.from="",L.to="",l.attributesList.add(p({},w,{id:w,type:k,name:E,pk_sourcebilltype:"",fwdBilltype:"",constrictVOs:""}))),"vo"==k&&l.attributesList.add(p({},w,{exchangeVO:"",type:k})),"bill"==k&&(console.log("setArr",w),l.attributesList.add(p({},w,{type:k,billtypename:"",transtypename:"",referbillflag:"",makebillflag:"",forwardmsgflag:"",backmsgflag:"",partners:"",actionConstricts:"",actionConstrictsAfter:"",actionScripts:"",backMsgs:""}))),[].concat(c(e),[i({},L)]);case"editor/entity/LINK_TO":var S=t.payload,B=S.entityId,_=S.linkId,N=S.lineType,O=S.entityType,j="",D=l.multiLang["entity-000010"],P=(0,s.getEntity)(e,b.connecting.from),R=(0,s.getEntity)(e,B);if("bpp_link"==N&&"bill"==O&&"bill"==P.type){var Q=(0,s.uuid)(),z=(0,s.uuid)(),U=(0,s.uuid)();l.attributesList.add(p({},Q,{name:l.multiLang["entity-000011"],type:"drive",pk_sourcebilltype:"",fwdBilltype:"",constrictVOs:""})),l.attributesList.add(p({},z,{name:"",type:"bpp_link"})),l.attributesList.add(p({},U,{name:"",type:"bpp_link"}));var F=f(P,R,e),J=i({id:Q,type:"drive",name:l.multiLang["entity-000011"],width:30,height:30,from:P.id,to:B,linksFrom:[],linksTo:[]},F);J.linksTo=[{target:B,from:Q,selected:!1,linkId:z,linkName:"",type:"bpp_link",describe:D,points:(0,o.default)(J,R,"bpp_link")}],J.linksFrom=[{linkId:U,lineType:"bpp_link",entityId:P.id,type:"bill"}],y={id:Q,isAnchored:!1,isSelected:!1,anchor:{x:J.x,y:J.y}};var V=e.map((function(e){return e.id==B?i({},e,{linksFrom:[].concat(c(e.linksFrom),[{linkId:z,entityId:Q,type:"drive",lineType:"bpp_link"}])}):e.id==b.connecting.from?i({},e,{linksTo:[].concat(c(e.linksTo),c(d(P.linksTo,B,"bpp_link",{target:Q,from:P.id,edited:!1,selected:!1,linkId:U,linkName:j,type:"bpp_link",describe:D,points:(0,o.default)(P,J,"bpp_link")})))}):e}));return V.push(i({},J)),V}"bpp_link"==N&&l.attributesList.add(p({},_,{name:"",type:N})),"bpp_link_ps"==N&&l.attributesList.add(p({},_,{name:"",type:N,referbilltypename:"",pk_billtypename:""})),"bpp_link_wb"==N&&l.attributesList.add(p({},_,{type:N,sourcebilltypename:"",targetbilltypename:"",fields:"",control:""}));var G=e.map((function(t){return t.isUpperBill=0,t.id==B?R=i({},t,{linksFrom:[].concat(c(t.linksFrom?t.linksFrom:[]),[{linkId:_,entityId:b.connecting.from,type:(0,s.getEntity)(e,b.connecting.from).type,lineType:N}])}):t}));if("drive"==P.type&&P.linksFrom.length>0){var Y=P.linksFrom[0].entityId;Y==B&&Object.assign(P,{name:l.multiLang["entity-000012"],ctm_class:"drive_self"})}if("drive"==R.type&&R.linksTo.length>0){var W=P.id;R.linksTo.some((function(e){return e.target==W}))&&Object.assign(R,{name:l.multiLang["entity-000012"],ctm_class:"drive_self"})}var K=G.map((function(t){return t.id===b.connecting.from?i({},t,{linksTo:[].concat(c(t.linksTo?t.linksTo:[]),c(t.linksTo&&t.linksTo.some((function(e){return e.target===B}))?d(t.linksTo,B,N,{target:B,from:t.id,edited:!1,selected:!1,linkId:_,linkName:j,type:N||"bpp_link",describe:D,points:(0,o.default)(t,e.find((function(e){return e.id==B})),N)}):[{target:B,from:t.id,edited:!1,selected:!1,linkId:_,linkName:j,type:N||"bpp_link",describe:D,points:(0,o.default)(t,e.find((function(e){return e.id==B})),N)}]))}):t}));return K;case"editor/entity/REMOVE":var q=function(){var n=t.payload,a=n.entityId,r=(n.typeName,void 0),o=!1;if("[object String]"==Object.prototype.toString.call(a))r=[a];else if(!a&&(r=Object.keys(l.multiSelectList.data().entity),console.log("entityIds",r),o=!0,0==r.length))return{v:e};for(var u=0;u<r.length;u++){a=r[u];(0,s.getLinksByTarget)(e,a).map((function(e){return e.linkId}));if(!o)return{v:e.filter((function(e){return e.id!=a})).map((function(e){return e.linksTo?i({},e,{linksTo:e.linksTo.filter((function(e){return e.target!=a}))}):e})).map((function(e){return e.linksFrom?i({},e,{linksFrom:e.linksFrom.filter((function(e){return e.entityId!=a}))}):e}))}}if(o)return{v:e.filter((function(e){return!l.multiSelectList.entIncludes(e.id)||(e.linksTo.forEach((function(e){l.multiSelectList.delLink(e.linkId)})),e.linksFrom.forEach((function(e){l.multiSelectList.delLink(e.linkId)})),!1)})).map((function(e){return e.linksTo?i({},e,{linksTo:e.linksTo.filter((function(e){return!l.multiSelectList.entIncludes(e.target)||(l.multiSelectList.delLink(e.linkId),!1)})),linksFrom:e.linksFrom.filter((function(e){return!l.multiSelectList.entIncludes(e.entityId)||(l.multiSelectList.delLink(e.linkId),!1)}))}):e}))}}();if("object"===(void 0===q?"undefined":a(q)))return q.v;case"editor/canvas/ANCHOR_ENTITY":var Z=t.payload;return m=Z.clientX,g=Z.clientY,e;case"editor/canvas/TRACK":if(b.anchoredEntity.isAnchored){var H=Object.keys(l.multiSelectList.data().entity);if(H.length>0){var X=(t.payload.x-m)/b.zoom,$=(t.payload.y-g)/b.zoom;m=t.payload.x,g=t.payload.y;var ee=e.map((function(t){if(l.multiSelectList.entIncludes(t.id)){var n=t.linksTo,a=[];return t.x=t.x+X,t.y=t.y+$,n.length>0&&(a=n.map((function(n){return l.multiSelectList.entIncludes(n.target),i({},n,{points:(0,o.default)(t,(0,s.getEntity)(e,n.target),n.points.lineType,null,n.points.curviness,!0)})}))),i({},t,{linksTo:a})}var r;return r=t.linksTo.map((function(n){return l.multiSelectList.entIncludes(n.target)?i({},n,{points:(0,o.default)(t,(0,s.getEntity)(e,n.target),n.points.lineType,n.points.pointsArr[1],n.points.curviness,!0)}):n})),i({},t,{linksTo:r})}));return ee}var te=b.anchoredEntity.id,ne=n.find((function(e){return e.id===te}))||{anchor:{x:0,y:0}},ae=(0,s.minZero)(b.cursor.x-ne.anchor.x),ie=(0,s.minZero)(b.cursor.y-ne.anchor.y);return e.map((function(t){return t.linksTo&&t.id==te?i({},t,{x:ae,y:ie,linksTo:t.linksTo.map((function(n){return i({},n,{points:(0,o.default)(t,e.find((function(e){return e.id==n.target})),n.points.lineType,n.points.QPointsArr[1],n.points.curviness,!0)})}))}):t.id==te?i({},t,{x:ae,y:ie}):t.linksTo&&t.linksTo.some((function(e){return e.target==te}))?i({},t,{linksTo:t.linksTo.map((function(n){return n.target===te?i({},n,{points:(0,o.default)(t,e.find((function(e){return e.id==te})),n.points.lineType,n.points.QPointsArr[1],n.points.curviness,!0)}):n}))}):t}))}return e;case"editor/entity/SIGN_UPPER_BILLS":if(t.payload.rmSign)return e.map((function(e){return e.isUpperBill?i({},e,{isUpperBill:0}):e}));var re=(0,s.getEntity)(e,t.payload.fromId),oe=[];return(0,s.getUpperBill)(e,re,[],oe),console.log("sign_upper_bills",oe),e.map((function(e){return oe.includes(e.id)?i({},e,{isUpperBill:1}):e}));case"editor/entity/SET_NAME":var le=t.payload,se=le.id,ue=le.name,ce=le.type;if(ce&&("bpp_link"==ce||"bpp_link_ps"==ce)){var pe=(0,s.getLink)(e,se),de=pe.from,fe=e.map((function(e){return e.id==de?i({},e,{linksTo:e.linksTo?e.linksTo.map((function(e){return e.linkId==pe.linkId?i({},e,{linkName:ue}):e})):[]}):e}));return fe}return l.attributesList.get(se).name=ue,e.map((function(e){return e.id==se?i({},e,{name:ue}):e}));case"editor/entity/SET_CUSTOM":var me=t.payload,ge=me.id,ye=me.custom;return e.map((function(e){return e.id==ge?i({},e,{custom:ye}):e}));case"editor/link/RESHAPE":var be=t.payload,ve=be.fromId,he=be.targetId,we=be.linkId,ke=be.cPoint,Ee=be.curviness,Ae=be.lineType;return e.map((function(t){return t.id==ve?i({},t,{linksTo:t.linksTo.map((function(n){return n.linkId==we?i({},n,{points:(0,o.default)(t,(0,s.getEntity)(e,he),Ae,ke,Ee)}):n}))}):t}));case"editor/link/SELECT_LINK":var Ie=t.payload,Ce=Ie.fromId,Te=Ie.linkId;return e.map((function(e){return e.id==Ce?i({},e,{linksTo:e.linksTo.map((function(e){return e.linkId==Te?i({},e,{selected:!0}):i({},e,{selected:!1})}))}):e}));case"editor/link/LINK_COLOR":var xe=t.payload,Me=xe.fromId,Le=xe.linkId,Se=xe.color;return e.map((function(e){return e.id==Me?i({},e,{linksTo:e.linksTo.map((function(e){return e.linkId==Le?i({},e,{color:Se}):e}))}):e}));case"editor/link/DELETE_LINK":var Be=t.payload;return Be.forEach((function(t){var n=t.fromId,a=t.targetId,r=t.linkId,o=(0,s.getEntity)(e,n),u=(0,s.getEntity)(e,a);"drive"==o.type&&"drive_self"==o.ctm_class&&(e=e.map((function(e){return e.id==n?i({},e,{name:l.multiLang["entity-000013"],ctm_class:""}):e}))),"drive"==u.type&&"drive_self"==u.ctm_class&&(e=e.map((function(e){return e.id==a?i({},e,{name:l.multiLang["entity-000013"],ctm_class:""}):e}))),e=e.map((function(e){return e.id==n?i({},e,{linksTo:e.linksTo?e.linksTo.filter((function(e){return e.linkId!==r})):[].concat(c(e.linksTo))}):e})).map((function(e){return e.id==a?i({},e,{linksFrom:e.linksFrom?e.linksFrom.filter((function(e){return e.linkId!==r})):[].concat(c(e.linksFrom))}):e}))})),e;case"editor/metaentity/SELECT":case"editor/canvas/ANCHOR_CANVAS":return e.map((function(e){return i({},e,{linksTo:e.linksTo?e.linksTo.map((function(e){return i({},e,{selected:!1})})):[]})}));case"editor/entity/ALIGN":return(0,u.blockAlign)(e,t.payload);default:return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.constantOption=void 0;var a=n(0);t.constantOption=function(e){if(e)return{partType:[{display:a.multiLang["attr-participants-000004"],value:"CON_PARTICIPANT"},{display:a.multiLang["attr-participants-000011"],value:"CON_GENERAL"},{display:a.multiLang["attr-participants-000005"],value:"CON_CUSTOMERGENRRAL"}],actorType:[{display:a.multiLang["attr-attrmodel-000011"],value:"OPERATOR"},{display:a.multiLang["attr-attrmodel-000012"],value:"ROLE"},{display:a.multiLang["attr-attrmodel-000013"],value:"USERGROUP"},{display:a.multiLang["attr-attrmodel-000014"],value:"ROLEGROUP"},{display:a.multiLang["attr-attrmodel-000015"],value:"WFUSERGROUP"},{display:a.multiLang["attr-attrmodel-000016"],value:"POST"},{display:a.multiLang["attr-attrmodel-000017"],value:"BusiReport"},{display:a.multiLang["attr-attrmodel-000018"],value:"RESPONSIBILITY"}],makerActorType:[{display:a.multiLang["attr-attrmodel-000011"],value:"OPERATOR"},{display:a.multiLang["attr-attrmodel-000012"],value:"ROLE"},{display:a.multiLang["attr-attrmodel-000013"],value:"USERGROUP"},{display:a.multiLang["attr-attrmodel-000014"],value:"ROLEGROUP"},{display:a.multiLang["attr-attrmodel-000018"],value:"RESPONSIBILITY"},{display:a.multiLang["attr-attrmodel-000019"],value:"VIRTUAL_ROLE"}],limitMode:[{display:a.multiLang["attr-attrmodel-000020"],value:"[U]SameCorp"},{display:a.multiLang["attr-attrmodel-000021"],value:"[U]SameDept"},{display:a.multiLang["attr-attrmodel-000022"],value:"[U]Superior"},{display:a.multiLang["attr-attrmodel-000023"],value:"[U]SameOrg"},{display:a.multiLang["attr-attrmodel-000024"],value:"[U]SuperiorOrg"},{display:a.multiLang["attr-attrmodel-000025"],value:"[U]FreeOrg"},{display:a.multiLang["attr-attrmodel-000026"],value:"[U]SPECIFYOrg"},{display:a.multiLang["attr-attrmodel-000027"],value:"[U]BillOrg"},{display:a.multiLang["attr-attrmodel-000028"],value:"[U]SameCorpAndDept4Resp"}],generalLimitMode:[{display:"",value:"NULL"},{display:a.multiLang["attr-attrmodel-000020"],value:"[U]SameCorp"},{display:a.multiLang["attr-attrmodel-000021"],value:"[U]SameDept"},{display:a.multiLang["attr-attrmodel-000022"],value:"[U]Superior"}],respLimitMode:[{display:a.multiLang["attr-attrmodel-000023"],value:"[U]SameOrg"},{display:a.multiLang["attr-attrmodel-000024"],value:"[U]SuperiorOrg"},{display:a.multiLang["attr-attrmodel-000025"],value:"[U]FreeOrg"},{display:a.multiLang["attr-attrmodel-000026"],value:"[U]SPECIFYOrg"},{display:a.multiLang["attr-attrmodel-000027"],value:"[U]BillOrg"},{display:a.multiLang["attr-attrmodel-000028"],value:"[U]SameCorpAndDept4Resp"}],rejectType:[{display:a.multiLang["attr-attrmodel-000055"],value:0},{display:a.multiLang["attr-attrmodel-000056"],value:1},{display:a.multiLang["attr-attrmodel-000057"],value:2}],join:[{display:a.multiLang["attr-attrmodel-000058"],value:"XOR"},{display:a.multiLang["attr-attrmodel-000059"],value:"AND"}],split:[{display:a.multiLang["attr-attrmodel-000058"],value:"XOR"},{display:a.multiLang["attr-attrmodel-000059"],value:"AND"}]}[e]}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={multiLang:{domainName:"uap",currentLocale:"zh-CN",moduleId:"uapRefer"},refType:"tree",refName:"1880000025-000239",placeholder:"1880000025-000239",rootNode:{refname:"1880000025-000047",refpk:"root"},queryTreeUrl:"/nccloud/riart/ref/orgUnitPropertyTree.do",treeConfig:{name:["1880000025-000002","1880000025-000003"],code:["refcode","refname"]},isTreelazyLoad:!1,isMultiSelectedEnabled:!0,isShowTreeSearch:!0,showHistory:!1};return React.createElement(i,a({popWindowClassName:"md-tree-ref"},t,e))};var i=n(1).high.Refer},,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,i,r=(a=null,i={},{set:function(e){a=e},gc:function(){a=void 0},get:function(){if(a){var e=a.getBoundingClientRect(),t=e.width,n=e.height,i=e.top,r=e.left;return{width:parseInt(t,10),height:parseInt(n,10),y:parseInt(i,10),x:parseInt(r,10)}}return{width:100,height:100,x:0,y:0}},getRef:function(e){return i[e]},saveRef:function(e){return function(t){i[e]=t}}});t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(e){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",className:"svgIcon",width:e.svgSize||"1.1em",height:e.svgSize||"1.3em",viewBox:"0 0 16 16"},e.children)},o=(a={delete:{path:React.createElement("image",{xlinkHref:"../../../public/img/editor-delete.svg",width:"100%",height:"100%"}),size:16},edit:{path:React.createElement("image",{xlinkHref:"../../../public/img/editor-edit.svg",width:"100%",height:"100%"}),size:16},arrow:{path:React.createElement("image",{xlinkHref:"../../../public/img/editor-arrow.svg",width:"100%",height:"100%"}),size:16},bpp_arrow:{path:React.createElement("image",{xlinkHref:"../../../public/img/bpp_arrow.svg",width:"100%",height:"100%"}),size:16},bpp_wb_arrow:{path:React.createElement("image",{xlinkHref:"../../../public/img/wb_arrow.svg",width:"100%",height:"100%"}),size:16},bpp_ps_arrow:{path:React.createElement("image",{xlinkHref:"../../../public/img/ps_arrow.svg",width:"100%",height:"100%"}),size:16},zoomIn:{path:React.createElement("path",{fill:"#4691f6",d:"M15.5 13.6l-3.8-3.2c-.4-.4-.8-.5-1-.5.8-1.2 1.3-2.5 1.3-4 0-3.3-2.7-6-6-6S0 2.7 0 6s2.7 6 6 6c1.5 0 2.8-.5 4-1.4 0 .3 0 .7.4 1l3.2 4c.6.5 1.5.6 2 0s.5-1.4 0-2zM6 10c-2.2 0-4-1.8-4-4s1.8-4 4-4 4 1.8 4 4-1.8 4-4 4zm1-7H5v2H3v2h2v2h2V7h2V5H7z"}),size:16},zoomOut:{path:React.createElement("path",{fill:"#4691f6",d:"M15.5 13.6l-3.8-3.2c-.4-.4-.8-.5-1-.5.8-1.2 1.3-2.5 1.3-4 0-3.3-2.7-6-6-6S0 2.7 0 6s2.7 6 6 6c1.5 0 2.8-.5 4-1.4 0 .3 0 .7.4 1l3.2 4c.6.5 1.5.6 2 0s.5-1.4 0-2zM6 10c-2.2 0-4-1.8-4-4s1.8-4 4-4 4 1.8 4 4-1.8 4-4 4zM3 5h6v2H3z"}),size:16}},{get:function(e){return e in a?a[e]:a.arrow},addIcon:function(e){a=i({},a,e)}});t.default=function(e){var t=e.name,n=e.label,a=e.svgSize;return React.createElement(r,{viewBox:"0 0 "+o.get(t).size.toString()+" "+o.get(t).size.toString(),svgSize:a},n&&React.createElement("title",null,n),o.get(t).path)},t.icons=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),i=n(0);t.default=function(e){return function(t){var n=t.entityType,r=n.split("-"),o=void 0,l=void 0;return 2==r.length?(o=n,n=r[0],l=i.WorkflowGadgetlist.get().find((function(e){return e.pk_workflowgadget==r[1]})).gadget_name):n=r[0],{id:(0,a.uuid)(),type:o||n,x:(0,a.minZero)(e.canvas.cursor.x-e.config.entityTypes[n].width/2),y:(0,a.minZero)(e.canvas.cursor.y-e.config.entityTypes[n].height/2),width:e.config.entityTypes[n].width,height:e.config.entityTypes[n].height,name:l||i.activityTypeMap[n],isAnchored:!0,isSelected:!1,anchor:{x:e.config.entityTypes[n].width/2,y:e.config.entityTypes[n].height/2}}}}},function(e,t){e.exports=function(e){return"string"!=typeof e?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),/["'() \t\n]/.test(e)?'"'+e.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(2),r=u(i),o=n(1),l=u(n(153));u(n(82));n(154);var s=n(0);function u(e){return e&&e.__esModule?e:{default:e}}var c="constraintTable",p="billAction",d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.temp=null,n.state={constraint:{},previousAction:null,nowAction:null,nowRefPK:null,metaclassid:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"getActionType",value:function(){var e=this,t=(this.props.props.value.transtype,this.props.props.value.billtypecode),n={pk_billtype:t,actionType:"getActionCode",filterField:"constrictflag"};(0,o.ajax)({url:"/nccloud/riart/busiflow/busiflowButtonAction.do",data:n,success:function(t){var n=t.data;"success"==n.success?(e.temp=n.actionCode,e.initData()):(0,o.toast)({content:s.multiLang["bppattr-actionConst-sorry01"],color:"danger"})},error:function(e){alert(e.message)}})}},{key:"baseData",value:function(e,t,n){return{key:n,title:"leaf",refname:t,refpk:n,refcode:e,id:n,pid:"0001",innercode:n,children:[]}}},{key:"initData",value:function(){var e=[{key:"billActionRoot",title:s.multiLang["bppattr-backMsg-billAction"],refname:s.multiLang["bppattr-backMsg-billAction"],refpk:"0001",id:"0001",pid:null,innercode:"0001",children:[]}],t=this.props.syncTree,n=t.createTreeData(e);if(t.setSyncTreeData(p,n),t.setNodeDisable(p,!0,"0001"),this.temp){var a=this.temp,i=a.pk_billAction,r=a.code_billAction,o=a.name_billAction;if(i){for(var l in i)t.addNodeSuccess(p,this.baseData(r[l],o[l],i[l]));this.state.nowRefPK=i[0],this.state.nowAction=r[0],t.setNodeSelected(p,this.state.nowRefPK),this.treeSelectAction()}}}},{key:"initTableData",value:function(){var e=null,t={},n=0;(e="beforActionConst"==this.props.type?this.props.props.value.actionConstricts:"afterActionConst"==this.props.type?this.props.props.value.actionConstrictsAfter:this.props.constraint[this.props.index])&&(n=e.length),null==n&&(n=1);for(var a=0;a<n;a++){var i=null,r=(i=e[a]?e[a]:e).actiontype,o={conditionjson:i.conditionjson,operatorType:i.configflag,operatorName:i.personname,pk_operator:i.operator,message:i.errhintmsg};t[r]?t[r].push(o):(t[r]=[],t[r].push(o))}this.state.constraint=t}},{key:"componentDidMount",value:function(){this.getActionType(),this.initTableData(),this.getMetaClass()}},{key:"getMetaClass",value:function(){var e=this,t={actionType:"getMdClass",pk_billtype:this.props.props.value.billtypecode};(0,o.ajax)({url:"/nccloud/riart/busiflow/busiflowButtonAction.do",data:t,async:!0,success:function(t){var n=t.data;if("success"==n.success){var a=n.mdClass;e.setState({metaclassid:a})}else(0,o.toast)({content:s.multiLang["bppattr-actionConst-sorry02"],color:"danger"})},error:function(e){alert(e.message)}})}},{key:"whatis",value:function(e){switch(e){case"1":return s.multiLang["bppattr-actionConst-noOperator"];case"2":return s.multiLang["bppattr-actionConst-Operator"];case"3":return s.multiLang["bppattr-actionConst-role"]}}},{key:"setTableData",value:function(e){var t=this.state.constraint[e],n=[];if(t)for(var a in t){var i={values:{condition:{value:t[a].conditionjson,display:t[a].conditionjson?s.multiLang["bppattr-actionConst-setUp"]:s.multiLang["bppattr-actionConst-unSet"]},operatorType:{value:t[a].operatorType,display:this.whatis(t[a].operatorType)},operator:{value:t[a].pk_operator,display:t[a].operatorName},message:{value:t[a].message,display:t[a].message}}};n.push(i)}this.props.editTable.setTableData(c,{rows:n},!1,!1)}},{key:"updateConstraint",value:function(e){if(e){var t=this.props.editTable.getAllRows(c);if(t.length>0){var n=[],a=!1;for(var i in t)if(""!=t[i].values.condition.value&&null!=t[i].values.condition.value){var r={operatorType:t[i].values.operatorType.value,operatorName:t[i].values.operator.display,pk_operator:t[i].values.operator.value,message:t[i].values.message.value,conditionjson:t[i].values.condition.value};n.push(r)}else a=!0;0!=n.length&&(this.state.constraint[e]=n),a&&(0,o.toast)({content:s.multiLang["bppattr-backMsg-sorry06"],color:"success"})}}}},{key:"treeSelectAction",value:function(){var e=this.props.syncTree.getSelectNode(p);if(e){var t=e.refcode;this.state.previousAction=this.state.nowAction,this.state.nowAction=t,this.state.nowRefPK=e.refpk,this.updateConstraint(this.state.previousAction),this.setTableData(t)}}},{key:"buttonClick",value:function(e,t,n){switch(t){case"addRow":this.state.nowAction&&e.editTable.addRow(c);break;case"delRow":var a=e.editTable.getCheckedRows(c),i=[];if(a&&a.length>0){for(var r=0;r<a.length;r++)i.push(a[r].index),this.state.constraint[this.state.nowAction]&&(a[r].index<this.state.constraint[this.state.nowAction].length&&this.state.constraint[this.state.nowAction].splice([a[r].index],1),0==this.state.constraint[this.state.nowAction].length&&delete this.state.constraint[this.state.nowAction]);e.editTable.deleteTableRowsByIndex(c,i,!0)}else(0,o.toast)({content:s.multiLang["bppattr-actionConst-sorry03"],color:"warning"});break;case"ok":this.updateConstraint(this.state.nowAction);var l=this.props.type,u=[];for(var p in this.state.constraint)for(var d in this.state.constraint[p]){var f=this.state.constraint[p][d],m={actiontype:p,conditionXpression:f.conditionXpression,conditionjson:f.conditionjson,configflag:f.operatorType,personname:f.operatorName,operator:f.pk_operator,errhintmsg:f.message,pk_billtype:this.props.props.value.transtype?this.props.props.value.transtype:this.props.props.value.billtypecode,pk_businesstype:this.props.props.value.pk_businesstype};"beforActionConst"==l?m.isbefore="Y":"afterActionConst"==l&&(m.isbefore="N"),u.push(m)}"beforActionConst"==l?this.props.props.value.actionConstricts=u:"afterActionConst"==l?this.props.props.value.actionConstrictsAfter=u:(this.props.constraint[this.props.index]=u,this.props.refresh(this.props.iIndex)),this.Closemodal(this,l);break;case"cancel":this.Closemodal(this,this.props.type)}}},{key:"Closemodal",value:function(e,t){e.props.props.modal.close(t);var n=ReactDOM.findDOMNode(e);n&&ReactDOM.unmountComponentAtNode(n)}},{key:"afterEvent",value:function(){return!0}},{key:"beforeEvent",value:function(e,t,n,a,i,r){var o=this.state.constraint[this.state.nowAction],l=e.meta.getMeta();if("condition"==n.attrcode){var s={billtypecode:this.props.props.value.billtypecode,metaclassid:this.state.metaclassid,funcType:0};l[t].items.map((function(e){return l[t].items.find((function(e){return"condition"==e.attrcode})).refcode="/uap/refer/riart/transTypeManagerRefer/index",l[t].items.find((function(e){return"condition"==e.attrcode})).queryCondition=s,o&&o[a]&&("string"==typeof o[a].conditionjson?l[t].items.find((function(e){return"condition"==e.attrcode})).treeJson=JSON.parse(o[a].conditionjson):l[t].items.find((function(e){return"condition"==e.attrcode})).treeJson=o[a].conditionjson),l}))}if("operator"==n.attrcode){var u=r.values.operatorType.value,c="/uap/refer/riart/userRefer/index",p={isAuthFilter:!1,isSelfVisible:!0,isShowSysAdmin:!1,isShowGroupAdmin:!0};switch(u){case"1":return!1;case"2":c="/uap/refer/riart/userRefer/index",p={isAuthFilter:!1,isSelfVisible:!0,isShowSysAdmin:!1,isShowGroupAdmin:!0};break;case"3":c="/uap/refer/riart/roleRefer/index",p={isAuthFilter:!1}}l[t].items.map((function(e){return l[t].items.find((function(e){return"operator"==e.attrcode})).refcode=c,l[t].items.find((function(e){return"operator"==e.attrcode})).itemtype="refer",l[t].items.find((function(e){return"operator"==e.attrcode})).isMultiSelectedEnabled=!1,l[t].items.find((function(e){return"operator"==e.attrcode})).queryCondition=p,l}))}return!0}},{key:"rightArray",value:function(){var e=this.props,t=e.button,n=e.editTable,a=t.createButtonApp,i=n.createEditTable;return r.default.createElement("div",null,r.default.createElement("div",{class:"busiflow-button-top"},a({area:"page_header",buttonLimit:4,onButtonClick:this.buttonClick.bind(this),popContainer:document.querySelector(".footerBtn")})),r.default.createElement("div",null,i(c,{showIndex:!0,showCheck:!0,onAfterEvent:this.afterEvent.bind(this),onBeforeEvent:this.beforeEvent.bind(this)})))}},{key:"render",value:function(){var e=this.props,t=e.button,n=e.syncTree,a=e.DragWidthCom,i=t.createButtonApp,o=n.createSyncTree;return r.default.createElement("div",null,r.default.createElement(a,{leftDom:o({treeId:p,needSearch:!1,needEdit:!1,onSelectEve:this.treeSelectAction.bind(this),defaultExpandAll:!0}),rightDom:this.rightArray(),defLeftWid:"23%",lefMinWid:"100px"}),r.default.createElement("hr",{color:"d0d0d0"}),r.default.createElement("div",{style:{position:"relative",bottom:"6px"}},i({area:"page_footer",buttonLimit:4,onButtonClick:this.buttonClick.bind(this),popContainer:document.querySelector(".footerBtn")})))}}]),t}(i.Component);t.default=d=(0,o.createPage)({initTemplate:l.default})(d)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(2),r=l(i),o=(l(n(8)),n(1));function l(e){return e&&e.__esModule?e:{default:e}}o.base.NCInput,o.high.Refer;var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.formId="setvalue",n.preprops=e.preprops,n.preindex=e.preindex,n.state={json:{},inlt:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentWillMount",value:function(){var e=this;this.props.MultiInit.getMultiLang({moduleId:"1022-13050213",domainName:"uap",callback:function(t,n,a){n?(e.setState({json:t,inlt:a}),e.setMetaData(t,e.props.initvalue)):console.log("未加载到多语资源")}})}},{key:"setMetaData",value:function(e,t){var n={setvalue:{items:[{itemtype:"input",maxlength:"40",visible:!1,label:"tt",disabled:!1,attrcode:"tt"},{itemtype:"textarea",maxlength:"200",visible:!0,label:e["13050213-000039"],rows:"6",initialvalue:{value:t||"",display:t||""},attrcode:"setvalue"},{itemtype:"select",visible:!0,label:e["13050213-000040"],attrcode:"selectvalue",options:[{display:e["13050213-000041"],value:"SYSDATE"},{display:e["13050213-000042"],value:"SYSOPERATOR"},{display:e["13050213-000043"],value:"SYSGROUP"},{display:e["13050213-000044"],value:"SYSTIME"},{display:e["13050213-000045"],value:"DESTBILLTYPE"},{display:e["13050213-000046"],value:"DESTTRANSTYPE"},{display:e["13050213-000047"],value:"NCSYSUSER"},{display:e["13050213-000048"],value:"BUZIDATE"},{display:e["13050213-000049"],value:"BUZITIME"}]}],moduletype:"form",pagination:!0,status:"edit",code:"setvalue",name:e["13050213-000023"]}};this.props.meta.setMeta(n)}},{key:"afterEvent",value:function(e,t,n,a,i){"selectvalue"===n&&e.form.setFormItemsValue(t,{setvalue:{display:a.value,value:a.value}})}},{key:"componentDidMount",value:function(){this.props.getValueOK(this.props.form,this.preprops,this.preindex,"setvalue")}},{key:"queryCondition",value:function(){}},{key:"publishOK",value:function(){return obj}},{key:"getAllData",value:function(){return this.props.form.getAllFormValue(this.formId)}},{key:"render",value:function(){var e=this.props,t=e.table,n=e.button,a=(e.search,e.form),i=e.editTable,o=e.syncTree,l=(e.modal,o.createSyncTree,t.createSimpleTable,n.createButton,i.createEditTable,a.createForm);return r.default.createElement("div",null,l(this.formId,{onAfterEvent:this.afterEvent.bind(this)}))}}]),t}(i.Component);s=(0,o.createPage)({})(s),t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(2),r=l(i),o=(l(n(8)),n(1));function l(e){return e&&e.__esModule?e:{default:e}}o.base.NCInput,o.high.Refer;var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onSelectEve=function(e,t,n){t&&t.refpk&&-1!=t.refpk.indexOf("#")&&(t.refpk=t.refpk.substring(t.refpk.indexOf("#")+1)),console.log("onSelectEve")},n.state={treeData:[]},n.formId="mapping",n.preprops=e.preprops,n.preindex=e.preindex,n.src_billtype=e.src_billtype,n.state={json:{},inlt:null},n.getTreeData(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"afterEvent",value:function(e,t,n,a,i){}},{key:"componentDidMount",value:function(){this.props.getValueOK(this.props.asyncTree,this.preprops,this.preindex,"mapping")}},{key:"queryCondition",value:function(){}},{key:"publishOK",value:function(){return obj}},{key:"getAllData",value:function(){return this.props.form.getAllFormValue(this.formId)}},{key:"getTreeData",value:function(){var e=this,t={pid:"root",queryCondition:{src_billtype:this.src_billtype},existNodeMetaid:"Y"};(0,o.ajax)({method:"post",data:t,url:"/nccloud/riart/ref/mdtreeRefByBilltype.do",success:function(t){e.props.asyncTree.setTreeData("mapping",t.data.rows),e.setState({treeData:t.data.rows})}})}},{key:"loadTreeData",value:function(e,t,n){var a=this,i=a.props.asyncTree.getAsyncTreeValue("mapping",e),r={pid:e,queryCondition:{src_billtype:this.src_billtype},metaid:i.def1,existNodeMetaid:"Y"};(0,o.ajax)({method:"post",data:r,url:"/nccloud/riart/ref/mdtreeRefByBilltype.do",success:function(e){var t=e.success,n=e.data;t&&(a.props.asyncTree.addTreeData("mapping",n.rows),a.setState({treeData:n.rows}))}})}},{key:"render",value:function(){var e=this.props,t=(e.table,e.button,e.search,e.form),n=(e.editTable,e.asyncTree),a=(e.modal,t.createForm,n.createAsyncTree);return r.default.createElement("div",{style:{height:"330px"}},r.default.createElement("div",{className:"tree1"},a({treeId:"mapping",editType:!1,onSelectEve:this.onSelectEve.bind(this),loadTreeData:this.loadTreeData.bind(this)})))}}]),t}(i.Component);s=(0,o.createPage)({})(s),t.default=s},,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setMainFlowId=t.initialState=void 0;var a=d(n(24)),i=d(n(79)),r=d(n(80)),o=n(25),l=d(o),s=n(37),u=d(s),c=d(n(27)),p=n(6);function d(e){return e&&e.__esModule?e:{default:e}}var f={x:0,y:0},m=t.initialState={mainFlowId:"",entity:[],metaEntity:[],canvas:{cursor:f,canvasViewport:{x:0,y:0,width:100,height:100},canvasArtboard:{x:0,y:0,width:100,height:100},connecting:{currently:!1,from:"",lineStyle:""},anchoredEntity:{isAnchored:!1,id:"",type:""},selectedEntity:{id:"",linkId:""},canvasAnchor:{isMoving:!1,coords:f},copyStatus:{prevAddType:"",copying:!1,multiSelect:!1},colorPicker:{fromId:"",linkId:"",display:!1,pos:{left:0,top:0},color:""},lineColors:[],zoom:.875},config:{entityTypes:{}},history:{past:[],future:[],lastAction:"@@INIT"},flows:{},lastAction:"@@INIT"},g=function(e,t){switch(t.type){case"editor/SET_MAINFLOWID":return t.payload;default:return e}},y=(t.setMainFlowId=function(e){return{type:"editor/SET_MAINFLOWID",payload:e}},"bpp"==(0,p.parseUrl)().flowType?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments[1];return{canvas:(0,a.default)(e.canvas,t),entity:(0,u.default)(e.entity,t,e.metaEntity,e.canvas,e.flows,e.mainFlowId),metaEntity:(0,s.bppMetaEntityReducer)(e.metaEntity,t,e.entity,e.canvas),config:(0,i.default)(e.config,t),history:e.history,lastAction:t.type}}:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments[1];return{mainFlowId:g(e.mainFlowId,t),canvas:(0,a.default)(e.canvas,t),entity:(0,l.default)(e.entity,t,e.metaEntity,e.canvas,e.flows,e.mainFlowId,e.flowType),metaEntity:(0,o.metaEntityReducer)(e.metaEntity,t,e.entity,e.canvas),config:(0,i.default)(e.config,t),flows:(0,c.default)(e.flows,t,e.entity,e.metaEntity,e.history,e.canvas),history:e.history,lastAction:t.type}});t.default=(0,r.default)(y)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.setConfig=function(e){return{type:"editor/config/SET",payload:e}};t.default=function(e,t){switch(t.type){case"editor/config/SET":return t.payload;default:return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.redo=t.undo=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=n(0);function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}t.undo=function(){return{type:"editor/history/UNDO",payload:void 0}},t.redo=function(){return{type:"editor/history/REDO",payload:void 0}};t.default=function(e){return function(t,n){var o=e(t,n);switch(n.type){case"editor/canvas/TRACK":case"@@INIT":case"@@redux/INIT":return o;case"editor/history/UNDO":var l=o.history.past[o.history.past.length-1];return l?a({},o,{entity:l.entity.map((function(e){return a({},e,{linksTo:e.linksTo.map((function(e){return e.selected?a({},e,{selected:!1}):e}))})})),metaEntity:l.metaEntity.map((function(e){return e.isSelected?a({},e,{isSelected:!1}):e})),history:{past:o.history.past.slice(0,o.history.past.length-1),future:[{entity:o.entity,metaEntity:o.metaEntity}].concat(r(o.history.future)),lastAction:o.history.lastAction}}):o;case"editor/history/REDO":var s=o.history.future[0];return s?a({},o,{entity:s.entity.map((function(e){return a({},e,{linksTo:e.linksTo.map((function(e){return e.selected?a({},e,{selected:!1}):e}))})})),metaEntity:s.metaEntity.map((function(e){return e.isSelected?a({},e,{isSelected:!1}):e})),history:{past:[].concat(r(o.history.past),[{entity:t.entity,metaEntity:t.metaEntity}]),future:o.history.future.slice(1),lastAction:o.history.lastAction}}):o;case"editor/entity/ALIGN":case"editor/entity/LINK_TO":case"editor/entity/ADD":case"editor/link/DELETE_LINK":case"editor/link/ALIGN":case"editor/entity/REMOVE":var u=[].concat(r(o.history.past),[{entity:t.entity,metaEntity:t.metaEntity}]);return a({},o,{history:{past:u.length>10?u.slice(1):u,future:[],lastAction:n.type}});case"editor/tabs/EDIT_SUBFLOW":case"editor/tabs/CHANGE_TAB":case"editor/tabs/CLOSE":case"editor/tabs/OPEN_EXISTED_SUBFLOW":var c=n.payload.flowId||n.payload.newActiveFlowId,p=i.subflowsList.getByFlowId(c)[c],d=p.history,f=p.artboard,m=void 0,g=void 0,y=void 0;return y=a({},o.canvas),console.log("history",d,p),f&&(m=f.canvasArtboard.width||o.canvas.canvasViewport.width,g=f.canvasArtboard.height||o.canvas.canvasViewport.height,f.canvasArtboard=a({},f.canvasArtboard,{width:m,height:g}),y=a({},o.canvas,f)),a({},o,{canvas:y,history:d});default:return a({},o,{lastAction:n.type})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.blockAlign=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=n(0),r=n(6),o=function(e){return e&&e.__esModule?e:{default:e}}(n(18));t.blockAlign=function(e,t){var n=Object.keys(i.multiSelectList.data().entity);if(0==n.length)return e;var l=n.map((function(t){return(0,r.getEntity)(e,t)}));if("left"==t||"right"==t){var s=l.sort((function(e,t){return e.x-t.x}));if("left"==t){var u=s[0].x+s[0].width/2;return e.map((function(t){return i.multiSelectList.entIncludes(t.id)?(t=a({},t,{x:u-t.width/2}),a({},t,{linksTo:t.linksTo.map((function(n){var l=(0,r.getEntity)(e,n.target);return i.multiSelectList.entIncludes(n.target)&&(l=a({},l,{x:u-l.width/2})),a({},n,{points:(0,o.default)(t,l,"link"==n.type?n.points.lineType:n.type,n.points.QPointsArr[1],n.points.curviness,!0)})}))})):a({},t,{linksTo:t.linksTo.map((function(n){return i.multiSelectList.entIncludes(n.target)?(l=(0,r.getEntity)(e,n.target),l=a({},l,{x:u-l.width/2}),a({},n,{points:(0,o.default)(t,l,"link"==n.type?n.points.lineType:n.type,n.points.QPointsArr[1],n.points.curviness,!0)})):n;var l}))})}))}if("right"==t){var c=s[s.length-1].x+s[s.length-1].width/2;return e.map((function(t){return i.multiSelectList.entIncludes(t.id)?(t=a({},t,{x:c-t.width/2}),a({},t,{linksTo:t.linksTo.map((function(n){var l=(0,r.getEntity)(e,n.target);return i.multiSelectList.entIncludes(n.target)&&(l=a({},l,{x:c-l.width/2})),a({},n,{points:(0,o.default)(t,l,"link"==n.type?n.points.lineType:n.type,n.points.QPointsArr[1],n.points.curviness,!0)})}))})):a({},t,{linksTo:t.linksTo.map((function(n){return i.multiSelectList.entIncludes(n.target)?(l=(0,r.getEntity)(e,n.target),l=a({},l,{x:c-l.width/2}),a({},n,{points:(0,o.default)(t,l,"link"==n.type?n.points.lineType:n.type,n.points.QPointsArr[1],n.points.curviness,!0)})):n;var l}))})}))}}else if("top"==t||"bottom"==t){var p=l.sort((function(e,t){return e.y-t.y}));if("top"==t){var d=p[0].y+p[0].height/2;return e.map((function(t){return i.multiSelectList.entIncludes(t.id)?(t=a({},t,{y:d-t.height/2}),a({},t,{linksTo:t.linksTo.map((function(n){var l=(0,r.getEntity)(e,n.target);return i.multiSelectList.entIncludes(n.target)&&(l=a({},l,{y:d-l.height/2})),a({},n,{points:(0,o.default)(t,l,"link"==n.type?n.points.lineType:n.type,n.points.QPointsArr[1],n.points.curviness,!0)})}))})):a({},t,{linksTo:t.linksTo.map((function(n){return i.multiSelectList.entIncludes(n.target)?(l=(0,r.getEntity)(e,n.target),l=a({},l,{y:d-l.height/2}),a({},n,{points:(0,o.default)(t,l,"link"==n.type?n.points.lineType:n.type,n.points.QPointsArr[1],n.points.curviness,!0)})):n;var l}))})}))}if("bottom"==t){var f=p[p.length-1].y+p[p.length-1].height/2;return e.map((function(t){return i.multiSelectList.entIncludes(t.id)?(t=a({},t,{y:f-t.height/2}),a({},t,{linksTo:t.linksTo.map((function(n){var l=(0,r.getEntity)(e,n.target);return i.multiSelectList.entIncludes(n.target)&&(l=a({},l,{y:f-l.height/2})),a({},n,{points:(0,o.default)(t,l,"link"==n.type?n.points.lineType:n.type,n.points.QPointsArr[1],n.points.curviness,!0)})}))})):a({},t,{linksTo:t.linksTo.map((function(n){return i.multiSelectList.entIncludes(n.target)?(l=(0,r.getEntity)(e,n.target),l=a({},l,{y:f-l.height/2}),a({},n,{points:(0,o.default)(t,l,"link"==n.type?n.points.lineType:n.type,n.points.QPointsArr[1],n.points.curviness,!0)})):n;var l}))})}))}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={multiLang:{domainName:"uap",currentLocale:"zh-CN",moduleId:"uapRefer"},refType:"grid",refName:"1880000025-000042",placeholder:"1880000025-000042",refCode:"riart.refer.pub.allBillTypeGridRef",queryGridUrl:"/nccloud/riart/ref/allBillRef.do",isMultiSelectedEnabled:!1,isHasDisabledData:!1,columnConfig:[{name:["1880000025-000043","1880000025-000044"],code:["refcode","refname"]}]};return React.createElement(i,a({},t,e))};var i=n(1).high.Refer},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(2),l=m(o),s=m(n(8)),u=n(1),c=m(n(64)),p=m(n(65));n(165);var d=n(0),f=n(167);function m(e){return e&&e.__esModule?e:{default:e}}var g=u.base.NCBreadcrumb,y=null,b=void 0,v=void 0,h=void 0,w=void 0,k=(a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.call(n),n.props=e,console.log("props",e),n.state={isShow:!1,src_billtype:"",dest_billtype:"",pk_vochange:"",title:"",metaclassid:"",formulavalue:"",appcode:"",name:"aaa",json:{},inlt:null},n.state.appcode=n.getSearchParam("c"),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentWillMount",value:function(){var e=this;this.props.MultiInit.getMultiLang({moduleId:"1022-13050213",domainName:"uap",callback:function(t,n,a){n?e.setState({json:t,inlt:a}):console.log("未加载到多语资源")}})}},{key:"componentDidMount",value:function(){this.getData(),this.getBtn()}},{key:"getSearchParam",value:function(e){if(e){var t="",n=window.parent.location.hash||window.parent.location.search,a="";if(a=n.includes("?")?n.split("?")[1]:n.substring(1)){var i=a.split("&");i&&i instanceof Array&&i.forEach((function(n){-1!=n.indexOf("=")&&n.split("=")&&n.split("=")instanceof Array&&n.split("=")[0]===e&&n.split("=")[1]&&(t=decodeURIComponent(decodeURIComponent(n.split("=")[1])))}))}return t}}},{key:"getData",value:function(){var e=this,t=this,n=this.props.props.props,a=n.pk_billFrom,i=n.pk_transFrom,r=n.value.exchangevo,o=null,l=null,s=null;for(var c in r)if(null!=r[c]&&r[c].src_transtype==i&&r[c].src_billtype==a){o=r[c].alRuleVO,l=r[c].alSplitItemVO,s=r[c].alSplitVO,y=r[c].pk_vochange;break}var p=null;p=null!=o||null!=l||null!=s?{actionType:"getVOExchangeInfoWithoutDB",srcBillType:n.pk_billFrom,srcTransType:n.pk_transFrom,tarBillType:n.pk_billTarget,tarTransType:n.pk_transTarget,pk_wf_def:n.value.pk_busitype,alRuleVO:o,alSplitItemVO:l,alSplitVO:s,pk_vochange:y}:{actionType:"getVOExchangeInfo",srcBillType:n.pk_billFrom,srcTransType:n.pk_transFrom,tarBillType:n.pk_billTarget,tarTransType:n.pk_transTarget,pk_wf_def:n.value.pk_busitype,alRuleVO:o,alSplitItemVO:l,alSplitVO:s,pk_vochange:y},(0,u.ajax)({url:"/nccloud/riart/busiflow/busiflowButtonAction.do",data:p,success:function(n){var a=n.success,i=n.data;if(a)if(a&&"success"==i.success){(i=n.data.changerule)&&"none"!==i.metaclassid?t.setState({title:i.title,metaclassid:i.metaclassid}):t.setState({title:i.title,metaclassid:""}),t.props.editTable.setTableData("changerule",i.changerule.changerule);t.props.editTable.getAllData("changerule");if(t.props.editTable.setStatus("changerule","browse"),e.state.src_billtype=i.src_billtypecode,"none"===i.splitrule)t.props.editTable.setTableData("splitrule",{rows:[]});else{t.props.editTable.setTableData("splitrule",i.splitrule.splitrule);var r=t.props.editTable.getAllData("splitrule");t.props.editTable.setStatus("splitrule","edit"),setTimeout((function(){if(r.rows.length>0)for(var e=0;e<r.rows.length;e++)r.rows[e].values.ismust.value||r.rows[e].values.selected.value?t.props.editTable.setEditableRowKeyByRowId("splitrule",r.rows[e].rowid,"timespace",!0):t.props.editTable.setEditableRowKeyByRowId("splitrule",r.rows[e].rowid,"timespace",!1)}),1)}}else t.props.editTable.setTableData("changerule",{rows:[]}),t.props.editTable.setTableData("splitrule",{rows:[]})}})}},{key:"onAfterEvent",value:function(){}},{key:"onButtonClick",value:function(e,t){var n=e.editTable.getCheckedRows("changerule");switch(t){case"save_rule":var a=this.props.props.props,i=a.pk_billFrom,r=a.pk_transFrom,o=a.pk_billTarget,f=a.pk_transTarget,m=a.value.pk_busitype,g={changerule:{changerule:e.editTable.getAllData("changerule")},splitrule:{splitrule:e.editTable.getAllData("splitrule")},pk_vochange:y,srcBillType:i,srcTransType:r,tarBillType:o,tarTransType:f,actionType:"saveChangeRule",pk_wf_def:m};(0,u.ajax)({url:"/nccloud/riart/busiflow/busiflowButtonAction.do",method:"POST",data:g,success:function(t){var n=t.success,a=t.data;if(n&&"success"==a.success){var i=e.props.props.value.exchangevo,r=a.exchangeVO,o=!1;for(var l in i)if(i[l].src_transtype==r.src_transtype&&i[l].src_billtype==r.src_billtype&&i[l].dest_transtype==r.dest_transtype&&i[l].dest_billtype==r.dest_billtype){i[l]=r,o=!0;break}o||i.push(r);var c=e.props.props.checkedRows;e.props.editTable.setValByKeyAndIndex("voexchange",c,"customize",{value:!0,display:d.multiLang["bppattr-vo-yes"]}),e.props.modal.close("voexchangeTable");var p=s.default.findDOMNode(this);p&&s.default.unmountComponentAtNode(p)}n&&"success"!=a.success&&(0,u.toast)({content:t.data.message,color:t.data.result})},error:function(e){console.log(e),(0,u.toast)({content:e.message,color:"danger"})}});break;case"cancel_rule":this.Closemodal(this);break;case"setvalue":if(1!=n.length)return void(0,u.toast)({content:this.state.json["13050213-000050"],color:"warning"});e.modal.show("modal",{title:this.state.json["13050213-000023"],size:"lg",content:l.default.createElement(c.default,{getValueOK:this.getValueOK.bind(this),preprops:e,preindex:n[0].index,initvalue:n[0].data.values.ruleData.value}),beSureBtnClick:this.getValueOK.bind(this)});break;case"setmapping":if(1!=n.length)return void(0,u.toast)({content:this.state.json["13050213-000050"],color:"warning"});e.modal.show("modal",{title:this.state.json["13050213-000024"],size:"lg",content:l.default.createElement(p.default,{getValueOK:this.getValueOK.bind(this),preprops:e,preindex:n[0].index,src_billtype:this.state.src_billtype}),beSureBtnClick:this.getValueOK.bind(this)});break;case"setformula":if(1!=n.length)return void(0,u.toast)({content:this.state.json["13050213-000050"],color:"warning"});this.setState({formulavalue:n[0].data.values.ruleData.value,isShow:!0});break;case"setnull":if(1!=n.length)return void(0,u.toast)({content:this.state.json["13050213-000050"],color:"warning"});e.editTable.setValByKeyAndIndex("changerule",n[0].index,"ruleType",{value:"",display:""}),e.editTable.setValByKeyAndIndex("changerule",n[0].index,"ruleData",{value:"",display:""}),e.editTable.setValByKeyAndIndex("changerule",n[0].index,"ruledata_name",{value:"",display:""})}}},{key:"getValueOK",value:function(e,t,n,a){if(e)b=e,v=t,h=n,w=a;else{if("setvalue"===w){var i=b.getAllFormValue(w);v.editTable.setValByKeyAndIndex("changerule",h,"ruleData",{value:i.rows[0].values.setvalue.value,display:i.rows[0].values.setvalue.value}),v.editTable.setValByKeyAndIndex("changerule",h,"ruledata_name",{value:""}),v.editTable.setValByKeyAndIndex("changerule",h,"ruleType",{value:1,display:this.state.json["13050213-000023"]})}if("mapping"===w){var r=b.getSelectNodeAsync(w);v.editTable.setValByKeyAndIndex("changerule",h,"ruleData",{value:r.refpk,display:r.refpk}),v.editTable.setValByKeyAndIndex("changerule",h,"ruledata_name",{value:r.refname,display:r.refname}),v.editTable.setValByKeyAndIndex("changerule",h,"ruleType",{value:2,display:this.state.json["13050213-000024"]})}}}},{key:"onOK",value:function(e){var t=this.props.editTable.getCheckedRows("changerule");this.setState({isShow:!1}),""===e?(this.props.editTable.setValByKeyAndIndex("changerule",t[0].index,"ruleType",{value:"",display:""}),this.props.editTable.setValByKeyAndIndex("changerule",t[0].index,"ruleData",{value:"",display:""}),this.props.editTable.setValByKeyAndIndex("changerule",t[0].index,"ruledata_name",{value:"",display:""})):(this.props.editTable.setValByKeyAndIndex("changerule",t[0].index,"ruleType",{value:3,display:this.state.json["13050213-000025"]}),this.props.editTable.setValByKeyAndIndex("changerule",t[0].index,"ruleData",{value:e}),this.props.editTable.setValByKeyAndIndex("changerule",t[0].index,"ruledata_name",{value:""}))}},{key:"onCancel",value:function(e){this.setState({isShow:!1})}},{key:"onHide",value:function(){this.setState({isShow:!1})}},{key:"onTabChange",value:function(e){console.log(e),"2"==e&&this.props.button.setButtonsVisible("setconfig",!1),"1"==e&&this.props.button.setButtonsVisible("setconfig",!0)}},{key:"splitAfterEvent",value:function(e,t,n,a,i,r,o){"selected"===n&&(o.values.selected.value?this.props.editTable.setEditableRowKeyByRowId("splitrule",o.rowid,"timespace",!0):this.props.editTable.setEditableRowKeyByRowId("splitrule",o.rowid,"timespace",!1))}},{key:"Closemodal",value:function(e){e.props.props.modal.close("voexchangeTable");var t=s.default.findDOMNode(e);t&&s.default.unmountComponentAtNode(t)}},{key:"render",value:function(){var e=this.props,t=e.modal,n=e.editTable.createEditTable,a=t.createModal,i=u.base.NCTabs,r=i.NCTabPane,o=u.high.FormulaEditor;return l.default.createElement("div",null,a("modal"),l.default.createElement("div",{className:"nc-bill-header-area"},l.default.createElement("div",{className:"wfm-setrule-bill-contain"},l.default.createElement(g,null,this.state.title)),l.default.createElement("div",{className:"header-button-area"},this.props.button.createButtonApp({area:"area_rule",buttonLimit:4,onButtonClick:this.onButtonClick.bind(this),popContainer:document.querySelector(".header-button-area")}))),l.default.createElement("div",{className:"table-area"},l.default.createElement(i,{navtype:"turn",contenttype:"moveleft",defaultActiveKey:"1",onChange:this.onTabChange.bind(this)},l.default.createElement(r,{tab:this.state.json["13050213-000051"],key:"1"},n("changerule",{onAfterEvent:f.afterEvent.bind(this),showIndex:!0,showCheck:!0,onSelected:this.onSelectedFn.bind(this)})),l.default.createElement(r,{tab:this.state.json["13050213-000052"],key:"2"},n("splitrule",{onAfterEvent:this.splitAfterEvent.bind(this),showIndex:!0}))),l.default.createElement("div",null,l.default.createElement(o,{ref:"formulaEditor",value:this.state.formulavalue,show:this.state.isShow,onOk:this.onOK.bind(this),onCancel:this.onCancel.bind(this),onHide:this.onHide.bind(this),metaParam:{pk_billtype:this.state.src_billtype,classid:this.state.metaclassid}}))),l.default.createElement("div",null," "))}}]),t}(o.Component),i=function(){var e=this;this.getBtn=function(){!function(e){var t=decodeURIComponent(window.location.href).split("?");if(t&&t[1]){var n=t[1].split("&");if(n&&n instanceof Array){var a={};n.forEach((function(e){var t=e.split("=")[0],n=e.split("=")[1];a[t]=n})),a[e]}}}("ar");var t=e;(0,u.ajax)({url:"/nccloud/platform/appregister/queryallbtns.do",data:{appcode:"13050213",pagecode:"1305021301"},success:function(e){t.props.button.setButtons(e.data),t.props.button.setDisabled({add:!1})}})},this.onCloseModelFn=function(e){},this.onSelectedFn=function(e,t,n,a){var i=e.editTable.getCheckedRows("changerule");if(i.length>1)for(var r=0;r<i.length;r++)i[r].index!=a&&e.editTable.selectTableRows("changerule",i[r].index,!1)}},a);t.default=k=(0,u.createPage)({initTemplate:f.initTemplate})(k)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(2),r=l(i),o=(l(n(8)),n(1));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}o.base.NCButton,o.base.NCFromControl;var c=o.high.FormulaEditor;function p(e){var t=e.setName,n=e.setExplain,a=e.name;return r.default.createElement("ul",null,r.default.createElement("li",null,a),r.default.createElement("li",{onClick:function(){n(json["13050213-000034"])},onDoubleClick:function(){t("lllllll")}},"1111111"),r.default.createElement("li",{onClick:function(){n(json["13050213-000035"])},onDoubleClick:function(){t("kkkkk")}},"2222222"),r.default.createElement("li",{onClick:function(){n(json["13050213-000036"])},onDoubleClick:function(){t(json["13050213-000037"])}},"3333333"))}var d=function(e){function t(){var e,n,a;s(this,t);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];return n=a=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),a.state={show:!1,name:"ahah"},u(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"onOK",value:function(){}},{key:"onCancel",value:function(){}},{key:"render",value:function(){var e=this;return console.log("show",this.state.show),r.default.createElement("div",null,r.default.createElement(c,{ref:"formulaEditor",value:"111111",show:!1,attrConfig:[{tab:"111",TabPaneContent:p,params:{name:this.state.name}}],formulaConfig:[{tab:"222",TabPaneContent:p,params:{}}],onOk:function(e){console.log(e)},onCancel:function(t){e.setState({show:!1})},metaParam:{pk_billtype:"CM02",bizmodelStyle:"fip",classid:""}}))}}]),t}(i.Component);d=(0,o.createPage)({})(d),t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.newProps;e.queryParams,e.call;t.modal.show("relatedData",{title:i.multiLang["attr-attrmodel-000034"],size:"lg",noFooter:!0,content:React.createElement(a.default,{preprops:t})})};var a=function(e){return e&&e.__esModule?e:{default:e}}(n(192)),i=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(n(2)),r=n(1),o=n(0);n(213);r.base.NCFormControl;var l=r.base.NCRadio,s=r.base.NCInputNumber,u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.onChangePercentage=function(e){n.props.getPercentageValue(n.state.modeltype,e),console.log("per"),n.setState({value:e,percentageValue:e})},n.onChangeCount=function(e){n.props.getCountValue(n.state.modeltype,e),n.setState({countValue:e,value:e})};var a=e.ppValue,i="",r="",o=!0,l=!0,s="percentage";return a?(a.indexOf||(a+=""),a.includes("%")?(r=a.replace("%",""),l=!1):(i=a,o=!1),s=a.includes("%")?"percentage":"count"):(r="100",l=!1),n.state={selectedValue:s,countValue:i,percentageValue:r,percentageValueDisabled:l,countValueDisabled:o,modeltype:e.modeltype,value:""},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){console.log("props",this.props)}},{key:"handleChange",value:function(e){"percentage"===e?this.setState({selectedValue:e,countValue:"",percentageValueDisabled:!1,countValueDisabled:!0}):this.setState({selectedValue:e,percentageValue:"",percentageValueDisabled:!0,countValueDisabled:!1})}},{key:"render",value:function(){return i.default.createElement("div",{className:"modal-content yuzhi-modal"},i.default.createElement(l.NCRadioGroup,{name:"yuzhi",fieldid:"yuzhi",selectedValue:this.state.selectedValue,onChange:this.handleChange.bind(this)},i.default.createElement("div",{className:"threshold"},i.default.createElement(l,{value:"count"},o.multiLang["attr-attrmodel-000060"]),i.default.createElement(s,{iconStyle:"one",precision:0,step:1,max:100,min:0,disabled:this.state.countValueDisabled,value:this.state.countValue,onChange:this.onChangeCount,fieldid:"countValue",size:"sm"})),i.default.createElement("div",{className:"threshold"},i.default.createElement(l,{value:"percentage"},o.multiLang["attr-attrmodel-000061"]),i.default.createElement(s,{iconStyle:"one",precision:0,step:10,max:100,min:0,disabled:this.state.percentageValueDisabled,value:this.state.percentageValue,onChange:this.onChangePercentage,fieldid:"percentageValue",size:"sm"}))))}}]),t}(i.default.Component);u=(0,r.createPage)({})(u),t.default=u},function(e,t,n){var a=n(225);"string"==typeof a&&(a=[[e.i,a,""]]);var i={transform:void 0};n(4)(a,i);a.locals&&(e.exports=a.locals)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateLfListArr=t.nodeExistById=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=n(1);t.nodeExistById=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.length?(t.map((function(t){if(e.includes(t.refpk)){var n=e.indexOf(t.refpk);n>-1&&e.splice(n,1)}})),e):e},t.generateLfListArr=function(e,t){var n=[];return function t(i){i.map((function(i){e.includes(i.refpk)?n.push(a({},i,{children:null})):i.children&&t(i.children)}))}((0,i.deepClone)(t)),n}},function(e,t,n){var a=n(229);"string"==typeof a&&(a=[[e.i,a,""]]);var i={transform:void 0};n(4)(a,i);a.locals&&(e.exports=a.locals)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.newProps;e.queryParams,e.call;t.modal.show("msgNotice",{title:i.multiLang["attr-messagereminding-000000"],size:"lg",noFooter:!0,content:React.createElement(a.default,{preprops:t})})};var a=function(e){return e&&e.__esModule?e:{default:e}}(n(235)),i=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(2),r=function(e){return e&&e.__esModule?e:{default:e}}(i),o=n(1),l=n(246);n(28);var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={billtype:n.props.billtype},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"getmestempData",value:function(){var e=this.props.table.getClickRowIndex("notice");return e?{value:e.record.tempcode.value,display:e.record.tempname.value}:null}},{key:"componentWillMount",value:function(){this.initData()}},{key:"componentDidMount",value:function(){this.props.getmestempcode(this)}},{key:"rowDoubleClick",value:function(e,t,n,a){this.previewpage(e,"browse")}},{key:"previewpage",value:function(e,t){this.props.openTo("/uap/riart/msgTemp/main/index.html?global="+("Y"==e.isglobal.value?"1":"0")+"&openCode="+this.state.billtype+"&openTemplateId="+e.pk_templet.value,{appcode:"10180403",pagecode:"10180403PAGE",c:"10180403",p:"10180403PAGE",status:t})}},{key:"initData",value:function(){var e=this;(0,o.ajax)({url:"/nccloud/wfm/message/querytempbybilltype.do",data:e.state.billtype,async:!1,success:function(t){t.success&&null!=t&&(t&&t.data&&t.data.msgtemp?e.props.table.setAllTableData("notice",t.data.msgtemp):e.props.table.setAllTableData("notice",{rows:[]}))},error:function(){(0,o.toast)({color:"danger"})}})}},{key:"render",value:function(){var e=this.props,t=(e.table,e.button),n=(e.modal,this.props.table.createSimpleTable),a=t.createButtonApp;return r.default.createElement("div",null,r.default.createElement("div",{className:"topButton"},a({area:"page_footer",buttonLimit:6,onButtonClick:l.buttonClick.bind(this),popContainer:document.querySelector(".footerBtn")}),n("notice",{showIndex:!0,height:340,onRowDoubleClick:this.rowDoubleClick.bind(this)})))}}]),t}(i.Component);t.default=s=(0,o.createPage)({initTemplate:l.initTemplate})(s)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.newProps,n=e.position;e.queryParams,e.call;t.modal.show("taskNotice",{title:i.multiLang["attr-messagereminding-000001"],size:"lg",noFooter:!0,content:React.createElement(a.default,{preprops:t,position:n})})};var a=function(e){return e&&e.__esModule?e:{default:e}}(n(255)),i=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setPartipantName=t.transferBoolean=t.initStructure=void 0;var a=n(0),i=n(38);function r(e){return!!e&&(!0===e||!1!==e&&"true"===e)}t.initStructure=function(e,t){if(e&&e.organizeUnitType&&"{}"!=e){var n=t.meta.getMeta();console.log("meta--xuxwb",n),n.actor.items.map((function(n,o){switch(n.attrcode){case"actorType":if("none"!=t.customerParticipant&&t.customerParticipant){var l=[];l="lister"===t.type?(0,i.constantOption)("makerActorType"):(0,i.constantOption)("actorType");for(var s=0;s<t.customerParticipant.length;s++){var u=t.customerParticipant[s],c={value:u.participant_code,display:u.displayName};"lister"===t.type?r(u.participant.isDisplayWhenMakeBill)&&l.push(c):l.push(c)}n.options=l}else"lister"===t.type?n.options=(0,i.constantOption)("makerActorType"):n.options=(0,i.constantOption)("actorType");break;case"activityType":if("OPERATOR"===e.organizeUnitType)n.refcode="uap/refer/riart/userRefer/index",n.queryCondition={GridRefActionExt:"nccloud.web.riart.billtype.ref.action.ItfApproveCenterUserRef",isMutiGroup:!1,userRefClassType:"class_usergroup",isAuthFilter:!1,useDataPower:!1,isSelfVisible:!0,isNeedNCUser:!0,isShowSysAdmin:!1,isShowGroupAdmin:!1,showGroupAdmin:!1,ShowSysAdmin:!1},n.disabled=!1,n.isShowTableSearch=!0,n.isShowTreeSearch=!0;else if("ROLE"===e.organizeUnitType)n.refcode="uap/refer/riart/roleRefer/index",n.queryCondition={isAuthFilter:!1},n.disabled=!1;else if("USERGROUP"===e.organizeUnitType)n.refcode="uap/refer/riart/userGroupTreeRef/index",n.queryCondition={},n.disabled=!1;else if("ROLEGROUP"===e.organizeUnitType)n.refcode="uap/refer/riart/roleGroupRefer/index",n.queryCondition={},n.disabled=!1;else if("POST"===e.organizeUnitType)n.refcode="uapbd/refer/org/PostDefaultGridRef/index",n.queryCondition={},n.disabled=!1;else if("RESPONSIBILITY"===e.organizeUnitType)n.refcode="uap/refer/riart/responsibilityTabelRef/index",n.queryCondition={},n.disabled=!1;else if("VIRTUAL_ROLE"===e.organizeUnitType)n.refcode="uap/refer/riart/virtualRoleGridRef/index",n.queryCondition={},n.disabled=!1;else if("WFUSERGROUP"===e.organizeUnitType)n.refcode="uap/refer/riart/wfUserGroupTableRef/index",n.disabled=!1,n.queryCondition={billtype:a.flowContext.get().billType};else if("BusiReport"===e.organizeUnitType)n.refcode="uap/refer/riart/busiReportStruTableRef/index",n.queryCondition={},n.disabled=!1;else if("none"!=t.customerParticipant&&"COMMONRULE"!=e.organizeUnitType&&"CUSTOMRULE"!=e.organizeUnitType)for(var p=0;p<t.customerParticipant.length;p++)if(e.organizeUnitType===t.customerParticipant[p].ID){var d=t.customerParticipant[p];n.refcode=d.participant.getRefModel,n.queryCondition={},n.disabled=!1;break}t.form.setFormItemsDisabled("actor",{activityType:n.disabled});break;case"limitMode":var f=[];if("COMMONRULE"===e.organizeUnitType||"CUSTOMRULE"===e.organizeUnitType){n.visible=!1,n.options=f,n.disabled=!1,t.form.setItemsVisible("actor",{limitMode:n.visible});break}var m=!1;if(e.organizeUnitType.length>6&&"CUSTOM"===e.organizeUnitType.substring(0,6)&&(m=!0),"lister"===t.type)n.visible=!1;else if(n.visible=!0,m){if(t.customerParticipant&&"none"!=t.customerParticipant)for(var g=0;g<t.customerParticipant.length;g++)if(e.organizeUnitType===t.customerParticipant[g].ID){var y=t.customerParticipant[g];if(r(y.participant.isWithDefaultFilter)&&(f=(0,i.constantOption)("generalLimitMode")),!r(y.participant.isWithDefaultFilter)&&r(y.participant.isWithFilter4Responsibility)&&(f=(0,i.constantOption)("respLimitMode")),t.customerFilter&&"none"!=t.customerFilter)for(var b=0;b<t.customerFilter.length;b++){var v=t.customerFilter[b];c={value:v.value,display:v.name};f.push(c)}0;break}}else if("RESPONSIBILITY"===e.organizeUnitType)f=(0,i.constantOption)("respLimitMode");else if("OPERATOR"===e.organizeUnitType)n.visible=!1,f=[];else{if(f=(0,i.constantOption)("generalLimitMode"),t.customerFilter&&"none"!=t.customerFilter)for(var h=0;h<t.customerFilter.length;h++){var w=t.customerFilter[h];c={value:w.value,display:w.name};f.push(c)}0}n.options=f,t.form.setItemsVisible("actor",{limitMode:n.visible})}})),t.meta.setMeta(n)}},t.transferBoolean=r,t.setPartipantName=function(e,t){switch(e.type){case"lister":e.setName(t+a.multiLang["attr-participants-000000"]),e.updateGeneralAttr({multiLangName:{text:t+a.multiLang["attr-participants-000000"],text2:"",text3:"",text4:"",text5:"",text6:""}});break;case"check":e.setName(t+a.multiLang["attr-participants-000001"]),e.updateGeneralAttr({multiLangName:{text:t+a.multiLang["attr-participants-000001"],text2:"",text3:"",text4:"",text5:"",text6:""}});break;case"manual":e.setName(t+a.multiLang["attr-participants-000002"]),e.updateGeneralAttr({multiLangName:{text:t+a.multiLang["attr-participants-000002"],text2:"",text3:"",text4:"",text5:"",text6:""}})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(n(2)),r=n(1),o=n(281);n(28);var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={selectedValue:"percentage"},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"getDefaultData",value:function(e,t){var n={areaType:"form",rows:[{values:{start:{value:!1},recovery:{value:!1},hangUp:{value:!1},finish:{value:!1}}}]};if(t&&t.length>0)for(var a=0;a<t.length;a++)switch(parseInt(t[a])){case 0:n.rows[0].values.start.value=!0;break;case 10:n.rows[0].values.recovery.value=!0;break;case 2:n.rows[0].values.hangUp.value=!0;break;case 3:n.rows[0].values.finish.value=!0}return n}},{key:"componentDidMount",value:function(){this.initData()}},{key:"initData",value:function(){this.props.form.setAllFormValue({workflowStateChangeInfo:this.getDefaultData(this.props.preprops,this.props.preprops.value.workflowStateChangeInfo)})}},{key:"render",value:function(){var e=this.props,t=(e.modal,e.button),n=this.props.form.createForm,a=t.createButtonApp;return i.default.createElement("div",null,n("workflowStateChangeInfo",{onAfterEvent:o.afterEvent.bind(this),onBeforeEvent:o.beforeEvent.bind(this)}),i.default.createElement("div",{className:"bottomButton"},a({area:"page_footer",buttonLimit:6,onButtonClick:o.buttonClick.bind(this),popContainer:document.querySelector(".footerBtn")})))}}]),t}(i.default.Component);l=(0,r.createPage)({initTemplate:o.initTemplate})(l),t.default=l},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.customEntities=t.config=void 0;var a=l(n(379)),i=l(n(382)),r=l(n(385)),o=l(n(388));function l(e){return e&&e.__esModule?e:{default:e}}var s={approve:{entityTypes:{start:{width:40,height:40},finish:{width:40,height:40},check:{width:40,height:40},dummy:{width:40,height:40},subflow:{width:40,height:40}},gridSize:20},workflow:{entityTypes:{start:{width:40,height:40},finish:{width:40,height:40},manual:{width:40,height:40},auto:{width:40,height:40},dummy:{width:40,height:40},subflow:{width:40,height:40}},gridSize:20},bpp:{entityTypes:{start:{width:40,height:40},finish:{width:40,height:40},bill:{width:40,height:40},drive:{width:30,height:30},vo:{width:40,height:40},router:{width:40,height:40}},gridSize:20}},u={start:{component:a.default,icon:(0,o.default)("flow-start.png"),bg:"flow-start.png"},finish:{component:a.default,icon:(0,o.default)("flow-finish.png"),bg:"flow-finish.png"},lister:{component:a.default,icon:(0,o.default)("flow-lister.png"),bg:"flow-lister.png"},check:{component:a.default,icon:(0,o.default)("flow-check.png"),bg:"flow-check.png"},dummy:{component:a.default,icon:(0,o.default)("flow-dummy.png"),bg:"flow-dummy.png"},subflow:{component:r.default,icon:(0,o.default)("flow-subflow.png"),bg:"flow-subflow.png"},auto:{component:a.default,icon:(0,o.default)("flow-auto.png"),bg:"flow-auto.png"},manual:{component:a.default,icon:(0,o.default)("flow-check.png"),bg:"flow-check.png"},bill:{component:a.default,icon:(0,o.default)("bpp_bill.png"),bg:"bpp_bill.png"},drive:{component:i.default,icon:(0,o.default)("bpp_drive.png"),bg:"bpp_drive.png"},vo:{component:a.default,icon:(0,o.default)("bpp_vo.png"),bg:"bpp_vo.png"},router:{component:a.default,icon:(0,o.default)("bpp_router.png"),bg:"bpp_router.png"}};t.config=s,t.customEntities=u},,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initialColors=t.getEntity=t.parseUrl=t.urlConst=t.WorkflowGadgetlist=t.shouldUnload=t.flowContext=t.usableSubflowList=t.uuid=t.isChrome=t.formatTime=t.setMainFlowId=t.setFlows=t.subflowsList=t.attributesList=t.setMultiLang=t.calcLinkPoints=t.setEntities=t.setConfig=t.store=t.Graph=void 0;var a=n(16),i=f(a),r=n(25),o=n(24),l=n(79),s=f(n(18)),u=n(0),c=n(27),p=n(78),d=n(6);function f(e){return e&&e.__esModule?e:{default:e}}t.Graph=i.default,t.store=a.store,t.setConfig=l.setConfig,t.setEntities=r.setEntities,t.calcLinkPoints=s.default,t.setMultiLang=u.setMultiLang,t.attributesList=u.attributesList,t.subflowsList=u.subflowsList,t.setFlows=c.setFlows,t.setMainFlowId=p.setMainFlowId,t.formatTime=d.formatTime,t.isChrome=d.isChrome,t.uuid=d.uuid,t.usableSubflowList=u.usableSubflowList,t.flowContext=u.flowContext,t.shouldUnload=u.shouldUnload,t.WorkflowGadgetlist=u.WorkflowGadgetlist,t.urlConst=u.urlConst,t.parseUrl=d.parseUrl,t.getEntity=d.getEntity,t.initialColors=o.initialColors},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=x(n(2)),o=n(7),l=n(16),s=x(n(59)),u=x(n(104)),c=n(60),p=x(c),d=x(n(107)),f=x(n(110)),m=T(n(25)),g=T(n(37)),y=n(0),b=n(6),v=n(118),h=x(n(61)),w=n(27),k=n(24),E=n(80),A=x(n(120)),I=x(n(18)),C=n(123);function T(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function x(e){return e&&e.__esModule?e:{default:e}}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function B(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n(135);var _=(0,b.getQueryString)("flowType"),N=void 0,O=void 0,j=void 0,D=void 0,P=void 0,R=void 0,Q=void 0,z=void 0,U=void 0;"bpp"==_?(N=g.setName,O=g.removeEntity,j=g.selectEntity,D=g.addEntity,P=g.signUpperBills,R=g.unselectAll,Q=g.deleteLink,z=g.align,U=g.setLinkColor):(N=m.setName,O=m.removeEntity,j=m.selectEntity,D=m.addEntity,R=m.unselectAll,Q=m.deleteLink,z=m.align,U=m.setLinkColor,P=function(){});var F=function(e){function t(e){L(this,t);var n=S(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setDivRef=function(t){e.innerRef(t)},n}return B(t,e),i(t,[{key:"render",value:function(){return r.default.createElement("div",{onMouseMove:this.props.onMouseMove,ref:this.setDivRef,className:"canvasViewport"},this.props.children)}}]),t}(r.default.PureComponent),J=function(e){e.gridSize;var t=e.gridSize,n=e.zoomLevel,i=e.canvasAnchor,r=e.artboard,o={transform:"translate("+r.x+"px, "+r.y+"px) scale("+n+")",width:r.width,height:r.height,cursor:i.isMoving?"grabbing":""};return t?a({},o,{backgroundImage:"radial-gradient(circle at 1px 1px, #00000057 1px, transparent 0)",backgroundSize:t+"px "+t+"px"}):o},V=function(e){function t(e){L(this,t);var n=S(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.artboardRef=function(e){n.artboardDiv=e},n}return B(t,e),i(t,[{key:"componentDidMount",value:function(){var e=this;this.artboardDiv.addEventListener("mouseup",(function(){l.store.getState().canvas.anchoredEntity.isAnchored&&e.props.anchorEntity({id:"",isAnchored:!1})}))}},{key:"render",value:function(){var e=this.props;return r.default.createElement("div",{className:"canvasArtboard",ref:this.artboardRef,style:J(e),onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onWheel:e.onWheel},e.children)}}]),t}(r.default.PureComponent),G=function(e){return r.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:e.width,height:e.height,className:"svgLand"},e.children)},Y=function(e){function t(){return L(this,t),S(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return B(t,e),i(t,[{key:"render",value:function(){var e=this.props,t=e.entities,n=e.wrappedCustomEntities;return r.default.createElement(r.default.Fragment,null,t.map((function(e){var t={entity:e,CustomEntity:n[e.type]};return r.default.createElement(t.CustomEntity,{key:t.entity.id,icon:p.default,model:t.entity})})))}}]),t}(r.default.PureComponent),W=function(e){function t(e){return L(this,t),S(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return B(t,e),i(t,[{key:"render",value:function(){var e=this.props;return r.default.createElement(F,{onMouseMove:e.onMouseMove,innerRef:function(t){return e.handleRef(t)}},r.default.createElement(V,{onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onWheel:e.onWheel,gridSize:e.gridSize,artboard:e.artboard,zoomLevel:e.zoomLevel,anchorEntity:e.anchorEntity,canvasAnchor:e.canvasAnchor},r.default.createElement("div",{className:"relative-surface"},r.default.createElement(G,{width:e.artboard.width+"px",height:e.artboard.height+"px"},e.entities.map((function(e){return e.linksTo.length>0&&r.default.createElement(A.default,{key:e.id,links:e.linksTo})})),e.isConnecting&&r.default.createElement(A.default,{links:e.connectingLink})),r.default.createElement(Y,{entities:e.entities,wrappedCustomEntities:e.wrappedCustomEntities})),r.default.createElement(u.default,null),e.colorPicker.display&&r.default.createElement(d.default,{picker:e.colorPicker,setLinkColor:e.setLinkColor,setColorPicker:e.setColorPicker})),r.default.createElement(C.FloatPanel,{history:e.history,flowType:_,align:e.align,reset:e.reset,multiSelect:e.stopCopying,multiSelecting:e.multiSelecting,undo:e.undo,redo:e.redo}),e.drawSelectionBox)}}]),t}(r.default.PureComponent),K=function(e){function t(e){L(this,t);var n=S(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.zoomSteps=[.625,.6875,.75,.8125,.875,.9375,1,1.0625,1.125,1.1875],n.wrappedCustomEntities=Object.assign.apply(Object,[{}].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(Object.keys(n.props.customEntities).map((function(e){return M({},e,(0,f.default)((0,o.connect)(null,{setName:N,editSubflow:w.editSubflow,changeTab:w.changeTab,openExistedSubflow:w.openExistedSubflow,calcLinkPoints:I.default})(n.props.customEntities[e].component)))}))))),n.clearSelection=function(e){n.props.copyStatus.multiSelect&&"canvas_selector"==e.target.className&&n.props.stopCopying({multiSelect:!1}),n.selectAction&&(n.selectAction=null,n.forceUpdate())},n.zoomIn=function(){n.traversZoomLevels(1)},n.zoomOut=function(){n.traversZoomLevels(-1)},n.handleRef=function(e){void 0===n.canvasDom&&(n.canvasDom=e,n.setOffset())},n.handleKeyDown=function(e){var t=e.ctrlKey||e.metaKey,a=e.srcElement;if(27==e.keyCode)return n.props.stopCopying({copying:!1}),n.props.removeEntity(n.props.anchor.id,n.props.anchor.type),n.props.anchorEntity({id:"",isAnchored:!1}),e.preventDefault(),!1;if(67==e.keyCode&&"INPUT"!=a.nodeName&&"TEXTAREA"!=a.nodeName){if("bpp"==_)return;return n.props.stopCopying({addLinkRapidly:!0}),e.preventDefault(),!1}if(18==e.keyCode)return n.props.stopCopying({copying:!0}),e.preventDefault(),!1;if(46==e.keyCode){if(console.log("delete快捷键操作",y.multiSelectList.data()),0==Object.keys(y.multiSelectList.data().link).length&&0==Object.keys(y.multiSelectList.data().entity).length){var i=l.store.getState().canvas.selectedEntity;if(i.id&&n.props.removeEntity(i.id),i.linkId){var r=(0,b.getLink)(n.props.entities,i.linkId);n.props.deleteLink([{fromId:r.from,linkId:r.linkId,targetId:r.target}])}return}n.props.removeEntity();var o=Object.keys(y.multiSelectList.data().link),s=[];if(o.length>0){var u=y.multiSelectList.data().link;o.forEach((function(e){var t=u[e],n=t.fromId,a=t.targetId;s.push({fromId:n,linkId:e,targetId:a})})),n.props.deleteLink(s)}return y.multiSelectList.clearAllSelected(),console.log("multiSelectList--data",y.multiSelectList.data()),e.preventDefault(),!1}return 1==e.shiftKey?(n.props.stopCopying({multiSelect:!0}),!1):t&&90==e.keyCode?(n.props.undo(),e.preventDefault(),!1):t&&89==e.keyCode?(n.props.redo(),e.preventDefault(),!1):void 0},n.handleKeyUp=function(e){if(9==e.keyCode)return console.log("切换回来"),n.props.stopCopying({copying:!1}),"bpp"==_&&y.upBill.delBill(n.props.anchor.id),void n.props.anchorEntity({id:"",isAnchored:!1});if(67==e.keyCode){if(console.log("c 抬起"),"bpp"==_)return;return n.props.stopCopying({addLinkRapidly:!1}),n.props.connecting({currently:!1,from:"",lineType:""}),void e.preventDefault()}18==e.keyCode&&(n.props.stopCopying({copying:!1}),n.props.removeEntity(n.props.anchor.id,n.props.anchor.type),"bpp"==_&&y.upBill.delBill(n.props.anchor.id),n.props.anchorEntity({id:"",isAnchored:!1})),0==e.shiftKey&&n.props.stopCopying({multiSelect:!1})},n.state={zoomStep:6},n.onMouseDown=n.onMouseDown.bind(n),n.onMouseUp=n.onMouseUp.bind(n),n.onMouseMove=n.onMouseMove.bind(n),n.onWheel=n.onWheel.bind(n),n.reset=n.reset.bind(n),n}return B(t,e),i(t,[{key:"componentDidMount",value:function(){var e=this;"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual"),window.document.addEventListener("keydown",this.handleKeyDown),window.document.addEventListener("keyup",this.handleKeyUp),window.document.addEventListener("mouseup",this.clearSelection),window.document.addEventListener("resize",this.props.resetViewport),window.onblur=function(t){e.props.stopCopying({copying:!1}),e.props.anchorEntity({id:"",isAnchored:!1}),t.stopPropagation()},Object.keys(this.props.customEntities).forEach((function(t){c.icons.addIcon(M({},t,e.props.customEntities[t].icon))}))}},{key:"componentWillUnmount",value:function(){window.document.removeEventListener("keydown",this.handleKeyDown),window.document.removeEventListener("keyup",this.handleKeyUp),window.document.removeEventListener("mouseup",this.clearSelection),window.document.removeEventListener("resize",this.props.resetViewport),this.canvasDom=void 0,s.default.gc()}},{key:"setOffset",value:function(){if(this.canvasDom){var e=this.canvasDom;s.default.set(e),s.default.saveRef("canvasViewport")(e),0!==window.scrollY&&window.scrollTo(0,0),this.props.configViewport()}}},{key:"traversZoomLevels",value:function(e,t,n){var a=this,i=this.zoomSteps.length-1,r=this.state.zoomStep+e;this.setState((function(t){return{zoomStep:(n=t.zoomStep,r>i?i:r<0?0:n+e)};var n}),(function(){return a.props.zoom(a.zoomSteps[a.state.zoomStep],t,n)}))}},{key:"drawSelectionBox",value:function(){if(this.selectAction){var e=this.selectAction.getBoxDimensions();return r.default.createElement("div",{className:"canvas_selector",style:{top:e.top,left:e.left,width:e.width,height:e.height}})}return""}},{key:"reset",value:function(){var e=this.props,t=e.entities,n=e.viewport,a=e.artboard,i=e.zoom,r=e.zoomLevel;if(0!=t.length){var o=t.sort((function(e,t){return e.x-t.x})),l=o[o.length-1],s=l.x+2*l.width,u=t.sort((function(e,t){return e.y-t.y})),c=u[u.length-1],p=c.y+3*c.height,d=n.width/s,f=n.height/p,m=d<f?d:f;m>this.zoomSteps[this.zoomSteps.length-1]&&(m=this.zoomSteps[this.zoomSteps.length-1]),m<this.zoomSteps[0]&&(m=this.zoomSteps[0]),i(m,a.x,a.y)}else i(r,a.x,a.y)}},{key:"onMouseDown",value:function(e){if(this.props.isConnecting&&(this.props.connecting({currently:!1,from:""}),"bpp"==_&&this.props.signUpperBills("",!0)),this.props.unselectAll(),this.props.copyStatus.multiSelect){var t=s.default.get();this.selectAction=new v.SelectingAction(e.clientX-t.x,e.clientY-t.y)}else l.store.getState().metaEntity.every((function(e){return!e.isSelected&&!e.isAnchored}))&&this.props.anchorCanvas(!0)}},{key:"onMouseUp",value:function(){if(this.props.anchorCanvas(!1),this.props.copyStatus.copying){var e=this.props,t=e.copyStatus.prevAddType,n=e.addEntity,a=e.defaultEntity,i=e.selectEntity;if(!t||"start"==t)return;i(),n(a({entityType:t}))}}},{key:"onWheel",value:function(e){var t=this.props.zoomLevel,n=void 0,a=void 0,i=void 0,r=void 0,o=this.props.cursor.x,l=this.props.cursor.y;if(!this.zoomSteps.includes(t)){var s=Math.abs(this.zoomSteps[0]-t),u=0,c=!1;this.zoomSteps.forEach((function(e,n){var a=e-t,i=Math.abs(a);i<s&&(s=i,u=n,c=!(a>0))})),a=e.deltaY<0?c?this.zoomSteps[u+1]:this.zoomSteps[u]:c?this.zoomSteps[u]:this.zoomSteps[u-1]}if(e.deltaY<0){if(this.state.zoomStep+1>=this.zoomSteps.length)return;if(i=o*(n=a||this.zoomSteps[this.state.zoomStep+1])-o*t,r=l*n-l*t,a)return this.setState({zoomStep:this.zoomSteps.indexOf(n)}),void this.props.zoom(n,i,r);this.traversZoomLevels(1,i,r)}else{if(this.state.zoomStep-1<0)return;if(i=o*(n=a||this.zoomSteps[this.state.zoomStep-1])-o*t,r=l*n-l*t,a)return this.setState({zoomStep:this.zoomSteps.indexOf(n)}),void this.props.zoom(n,i,r);this.traversZoomLevels(-1,i,r)}}},{key:"onMouseMove",value:function(e){var t=this;if(this.props.trackMovement({x:e.pageX,y:e.pageY}),this.selectAction){var n=s.default.get(),a=this.props.artboard,i=this.props.zoomLevel;this.selectAction.mouseX2=e.clientX-n.x,this.selectAction.mouseY2=e.clientY-n.y,this.props.entities.forEach((function(e){t.selectAction.containsElement(e,a,i)&&(y.multiSelectList.setEnt(e.id),e.linksTo.forEach((function(n){var r=(0,b.getEntity)(t.props.entities,n.target);t.selectAction.containsLinks(e,r,a,i)&&y.multiSelectList.setLink(n.linkId)})))}))}}},{key:"render",value:function(){return r.default.createElement(W,{entities:this.props.entities,wrappedCustomEntities:this.wrappedCustomEntities,handleRef:this.handleRef,onMouseDown:this.onMouseDown,onMouseMove:this.onMouseMove,onMouseUp:this.onMouseUp,onWheel:this.onWheel,reset:this.reset,stopCopying:this.props.stopCopying,isConnecting:this.props.isConnecting,connectingLink:this.props.connectingLink,zoomLevel:this.props.zoomLevel,canvasAnchor:this.props.canvasAnchor,multiSelecting:this.props.copyStatus.multiSelect,colorPicker:this.props.colorPicker,setColorPicker:this.props.setColorPicker,setLinkColor:this.props.setLinkColor,artboard:this.props.artboard,gridSize:this.props.gridSize,anchorEntity:this.props.anchorEntity,drawSelectionBox:this.drawSelectionBox(),align:this.props.align,undo:this.props.undo,redo:this.props.redo,history:this.props.history})}}]),t}(r.default.PureComponent),q=function(e){var t=e.canvas.connecting,n=t.currently,a=t.lineType;if(n){var i=e.entity.find((function(t){return t.id===e.canvas.connecting.from}));return[{target:"will_connect",edited:!1,points:(0,I.default)(i,{x:e.canvas.cursor.x,y:e.canvas.cursor.y,width:0,height:0},a)}]}return[{target:"noop",edited:!1,arrowInvert:!1}]};t.default=(0,o.connect)((function(e){return{entities:e.entity,isConnecting:e.canvas.connecting.currently,connectingLink:q(e),gridSize:e.canvas.gridSize,viewport:e.canvas.canvasViewport,artboard:e.canvas.canvasArtboard,zoomLevel:e.canvas.zoom,anchor:e.canvas.anchoredEntity,cursor:e.canvas.cursor,canvasAnchor:e.canvas.canvasAnchor,copyStatus:e.canvas.copyStatus,colorPicker:e.canvas.colorPicker,history:e.history,defaultEntity:(0,h.default)(e)}}),{resetViewport:k.resetViewport,configViewport:k.configViewport,trackMovement:k.trackMovement,anchorCanvas:k.anchorCanvas,zoom:k.zoom,connecting:k.connecting,anchorEntity:k.anchorEntity,removeEntity:O,stopCopying:k.stopCopying,undo:E.undo,redo:E.redo,align:z,selectEntity:j,addEntity:D,signUpperBills:P,unselectAll:R,deleteLink:Q,setColorPicker:k.setColorPicker,setLinkColor:U})(K)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(n(2)),r=n(7);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(105);var s=function(e){var t=e.d,n=e.color;return i.default.createElement("path",{d:t,className:"arrowMarker",style:{fill:n}})},u=function(e){var t=e.color;return i.default.createElement("circle",{cx:"30",cy:"30",r:"15",style:{fill:t}})},c=function(e){function t(){return o(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.lineColors.length!=this.props.lineColors.length}},{key:"render",value:function(){console.log("render_ArrowMarker");var e=this.props;return i.default.createElement("svg",null,i.default.createElement("defs",null,i.default.createElement("marker",{id:"arrow-end",viewBox:"0 0 20 20",markerWidth:"10",markerHeight:"8",refX:"14",refY:"10",orient:"auto"},i.default.createElement(s,{d:"M 1 5 L 17 10 L 1 15 Z",color:""})),i.default.createElement("marker",{id:"arrow-end-connecting",viewBox:"0 0 20 20",markerWidth:"10",markerHeight:"8",refX:"12",refY:"10",orient:"auto"},i.default.createElement(s,{d:"M 1 5 L 17 10 L 1 15 Z",color:""})),i.default.createElement("marker",{id:"disc",viewBox:"0 0 60 50",markerWidth:"12",markerHeight:"30",refX:"40",refY:"30",orient:"auto"},i.default.createElement("circle",{cx:"30",cy:"30",r:"15",fill:"#3c3c3c"})),i.default.createElement("marker",{id:"disc-connecting",viewBox:"0 0 60 50",markerWidth:"12",markerHeight:"30",refX:"40",refY:"30",orient:"auto"},i.default.createElement("circle",{cx:"30",cy:"30",r:"15",fill:"#3c3c3c"})),e.lineColors.length&&e.lineColors.map((function(e){return i.default.createElement(i.default.Fragment,null,i.default.createElement("marker",{id:"arrow-end"+e,viewBox:"0 0 20 20",markerWidth:"10",markerHeight:"8",refX:"14",refY:"10",orient:"auto"},i.default.createElement(s,{d:"M 1 5 L 17 10 L 1 15 Z",color:e})),i.default.createElement("marker",{id:"disc"+e,viewBox:"0 0 60 50",markerWidth:"12",markerHeight:"30",refX:"40",refY:"30",orient:"auto"},i.default.createElement(u,{color:e})))}))))}}]),t}(i.default.PureComponent);t.default=(0,r.connect)((function(e){return{lineColors:e.canvas.lineColors}}),{})(c)},function(e,t,n){var a=n(106);"string"==typeof a&&(a=[[e.i,a,""]]);var i={transform:void 0};n(4)(a,i);a.locals&&(e.exports=a.locals)},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,"/*\n * @Author: yanxbm \n * @Date: 2018-12-06 19:07:38 \n * @Last Modified by: yanxbm\n * @Last Modified time: 2019-03-22 13:52:04\n */\n.arrowMarker {\n  stroke-width: 0px;\n  fill: #ababab;\n  stroke-dasharray: 10000, 1;\n  stroke-linecap: round;\n  -webkit-transition: fill 400ms linear;\n  transition: fill 400ms linear;\n}\n.arrowMarker.blue {\n  fill: #00c0ff;\n  stroke: #00c0ff;\n}\n.arrowMarker.red {\n  fill: rgba(255, 0, 0, 0.7);\n  stroke: rgba(255, 0, 0, 0.7);\n}\n",""])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(n(2));n(108);var r=["#ababab","#F47373","#697689","#37D67A","#2CCCE4","#555555","#DCE775","#FF8A65","#BA68C8"],o=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.clearCounter=function(){n.hideCounter&&clearTimeout(n.hideCounter)},n.hideBlock=function(){n.props.setColorPicker()},n.state={pos:e.picker.pos,colors:r,selectColor:e.picker.color||"#ccc"},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){var e=this;this.hideCounter=setTimeout((function(){e.props.setColorPicker()}),1500)}},{key:"componentWillUnmount",value:function(){this.clearCounter()}},{key:"colorLumpClass",value:function(e){return{background:"transparent",boxShadow:e==this.state.selectColor?e+" 0px 0px 0px 3px inset, "+e+" 0px 0px 5px":e+" 0px 0px 0px 14px inset"}}},{key:"changeColor",value:function(e){var t=this;this.setState({selectColor:e},(function(){t.props.setLinkColor({color:e,fromId:t.props.picker.fromId,linkId:t.props.picker.linkId})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.pos,a=t.colors,r=t.selectColor;return i.default.createElement("div",{className:"block-picker",style:{left:n.left-12,top:n.top+32}},i.default.createElement("div",{className:"trangle",style:{borderColor:"transparent transparent "+r+" transparent"}}),i.default.createElement("div",{className:"block-box",onMouseLeave:this.hideBlock,onMouseEnter:this.clearCounter},i.default.createElement("div",{className:"checkboard",style:{backgroundColor:r}}),i.default.createElement("div",{className:"lump-box"},a.map((function(t,n){return i.default.createElement("span",{key:n},i.default.createElement("div",{title:t,onClick:function(n){return e.changeColor(t)},style:e.colorLumpClass(t)}))})))))}}]),t}(i.default.PureComponent);t.default=o},function(e,t,n){var a=n(109);"string"==typeof a&&(a=[[e.i,a,""]]);var i={transform:void 0};n(4)(a,i);a.locals&&(e.exports=a.locals)},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,'@-webkit-keyframes fade-in {\n  0% {\n    opacity: 0;\n  }\n  /*初始状态 透明度为0*/\n  40% {\n    opacity: 0.5;\n  }\n  /*过渡状态 透明度为0*/\n  100% {\n    opacity: 1;\n  }\n  /*结束状态 透明度为1*/\n}\n@keyframes fade-in {\n  0% {\n    opacity: 0;\n  }\n  /*初始状态 透明度为0*/\n  40% {\n    opacity: 0.5;\n  }\n  /*过渡状态 透明度为0*/\n  100% {\n    opacity: 1;\n  }\n  /*结束状态 透明度为1*/\n}\n.block-picker {\n  width: 122px;\n  position: absolute;\n  border-radius: 6px;\n  -webkit-animation: fade-in 400ms linear;\n          animation: fade-in 400ms linear;\n  -webkit-box-shadow: rgba(0, 0, 0, 0.12) 0px 2px 10px, rgba(0, 0, 0, 0.16) 0px 2px 5px;\n          box-shadow: rgba(0, 0, 0, 0.12) 0px 2px 10px, rgba(0, 0, 0, 0.16) 0px 2px 5px;\n}\n.block-picker .trangle {\n  width: 0px;\n  height: 0px;\n  border-style: solid;\n  border-width: 3px 15px 22px 15px;\n  position: absolute;\n  top: -24px;\n  margin-left: 4px;\n  opacity: 1;\n}\n.block-picker .block-box {\n  background: #eee;\n}\n.block-picker .block-box .checkboard {\n  border-radius: 6px 6px 0 0;\n  height: 35px;\n}\n.block-picker .block-box .lump-box {\n  padding: 5px;\n}\n.block-picker .block-box .lump-box::after {\n  content: "";\n  display: block;\n  clear: both;\n}\n.block-picker .block-box .lump-box span div {\n  float: left;\n  height: 22px;\n  width: 22px;\n  cursor: pointer;\n  outline: none;\n  margin-left: 5px;\n  margin-bottom: 5px;\n  border-radius: 4px;\n  -webkit-transition: -webkit-box-shadow 200ms ease 0s;\n  transition: -webkit-box-shadow 200ms ease 0s;\n  transition: box-shadow 200ms ease 0s;\n  transition: box-shadow 200ms ease 0s, -webkit-box-shadow 200ms ease 0s;\n}\n',""])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=b(n(2)),r=n(7),o=n(16),l=y(n(25)),s=y(n(37)),u=n(24),c=n(6),p=n(111),d=n(112),f=b(n(61)),m=b(n(113)),g=n(0);function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function b(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n(116);var k=(0,c.getQueryString)("flowType");console.log("flowType---test",k);var E=void 0,A=void 0,I=void 0,C=void 0,T=void 0,x=void 0;"bpp"==k?(E=s.linkTo,s.addLinkedEntity,C=s.removeEntity,I=s.selectEntity,A=s.addEntity,T=s.signUpperBills,x=s.unselectAll):(E=l.linkTo,l.addLinkedEntity,C=l.removeEntity,I=l.selectEntity,A=l.addEntity,x=l.unselectAll,T=function(){});var M=function(e){var t=o.store.getState(),n=t.entity,a=t.flows,i=(t.config.entityTypes,{action:function(){return e.removeEntity(e.model.id,e.model.type)},iconVariety:"delete",label:g.multiLang["entity-000000"]});if("bpp"!=k){var r={action:function(){return e.connecting({currently:!0,from:e.model.id})},iconVariety:"arrow",label:g.multiLang["entity-000004"]},l={action:function(){return(0,d.doEditSubflow)(e.model.id,e.model,a)},iconVariety:"edit",label:g.multiLang["entity-000005"]};return"subflow"==e.model.type?[i,r,l]:"finish"==e.model.type?[i]:[i,r]}var s={action:function(){return e.connecting({currently:!0,from:e.model.id,lineType:"bpp_link"})},iconVariety:"bpp_arrow",label:g.multiLang["entity-000001"]},u=(g.multiLang["entity-000002"],{action:function(){return e.connecting({currently:!0,from:e.model.id,lineType:"bpp_link_ps",lineStyle:"pull"})},iconVariety:"bpp_ps_arrow",label:g.multiLang["entity-000003"]});switch(e.model.type){case"start":return[i,s];case"drive":return e.model.ctm_class?[i]:[i,s];case"router":return[i,s];case"vo":case"finish":return[i];case"bill":var p=[];return(0,c.getUpperBill)(n,e.model,p,[],1),[i,s,u];default:return[i,s]}},L=function(e){function t(e){v(this,t);var n=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.actions=M(n.props),n}return w(t,e),a(t,[{key:"componentWillReceiveProps",value:function(e){this.actions=M(e)}},{key:"render",value:function(){var e=this.props,t=e.model,n=o.store.getState().canvas,a=n.connecting.currently,r=n.zoom;return i.default.createElement("div",{className:"entity "+(t.isUpperBill?"upperBill":"")+" "+(e.isSelected||g.multiSelectList.entIncludes(t.id)?"selected":""),style:{left:t.x,top:t.y,cursor:a?"pointer":"move",borderRadius:"drive"==t.type?"2.5em":""},onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onMouseOver:e.onMouseOver},i.default.createElement(i.default.Fragment,null,e.children),i.default.createElement(m.default,{isSelected:e.isSelected,actions:this.actions,zoom:r}))}}]),t}(i.default.PureComponent),S=/^editor\/link\/DELETE_LINK|editor\/entity\/LINK_TO|editor\/entity\/ADD|editor\/entity\/REMOVE$/,B=function(e,t){return{meta:e.metaEntity.find((function(e){return e.id==t.model.id}))||[],defaultEntity:(0,f.default)(e),zoom:e.canvas.zoom,canvas:e.canvas.copyStatus.multiSelect?e.canvas:(0,c.isEmptyObject)(g.multiSelectList.data().entity)?null:e.canvas,lastAction:S.test(e.lastAction)?e.lastAction:""}};t.default=function(e){return(0,r.connect)(B,{linkTo:E,addEntity:A,stopCopying:u.stopCopying,removeEntity:C,selectEntity:I,anchorEntity:u.anchorEntity,connecting:u.connecting,signUpperBills:T,unselectAll:x})(function(e){return function(t){function n(e){v(this,n);var t=h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.onMouseOver=function(e){e.stopPropagation(),t.props.selectEntity(t.props.model.id)},t.state={onMouseUpWouldBeClick:!0},t.onMouseDown=t.onMouseDown.bind(t),t.onMouseUp=t.onMouseUp.bind(t),t}return w(n,t),a(n,[{key:"componentDidMount",value:function(){var e=this,t=function(){return e.setState({onMouseUpWouldBeClick:!1})};this.props.meta.isAnchored?setTimeout(t,192):t()}},{key:"onMouseDown",value:function(e){e.stopPropagation();var t=o.store.getState().canvas.copyStatus;if(t.multiSelect)return g.multiSelectList.setEnt(this.props.model.id),void this.props.anchorEntity({id:this.props.model.id,type:this.props.model.type,isAnchored:!0,clientX:e.clientX,clientY:e.clientY});var n=o.store.getState().canvas.connecting;if(n.currently)if(this.props.unselectAll(),n.from!==this.props.model.id){var a=(0,c.uuid)(),i=o.store.getState(),r=i.entity,l=i.flows,s=i.mainFlowId;if((0,p.couldLinkTo)(k,r,n.from,this.props.model.id,n.lineType,l,s)){var u=n.lineType;this.props.linkTo(this.props.model.id,a,u,this.props.model.type),"bpp"!=k&&t.addLinkRapidly&&this.props.connecting({currently:!0,from:this.props.model.id})}else this.props.connecting({currently:!1,from:"",lineType:""}),"bpp"==k&&this.props.signUpperBills("",!0)}else this.props.connecting({currently:!1,from:"",lineType:""}),"bpp"==k&&this.props.signUpperBills("",!0);else console.log("按下entity",this.props.model),this.props.anchorEntity({id:this.props.model.id,type:this.props.model.type,isAnchored:!0,clientX:e.clientX,clientY:e.clientY}),"bpp"!=k&&t.addLinkRapidly&&this.props.connecting({currently:!0,from:this.props.model.id}),g.multiSelectList.entIncludes(this.props.model.id)||this.props.unselectAll()}},{key:"onMouseUp",value:function(e){e.stopPropagation(),this.state.onMouseUpWouldBeClick||(this.props.anchorEntity({id:"",isAnchored:!1}),this.props.selectEntity(this.props.model.id));var t=o.store.getState().canvas.copyStatus;if(t.copying){var n=this.props,a=n.addEntity,i=n.defaultEntity,r=n.selectEntity,l=t.prevAddType;if(!l||"start"==l)return;r(),a(i({entityType:l}))}}},{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.model,a=t.meta.isSelected,i=e.model,r=e.meta.isSelected;return n.x!=i.x||n.y!=i.y||e.zoom!=t.zoom||i.name!=n.name||a!=r||e.lastAction!=t.lastAction||n.isUpperBill!=i.isUpperBill||e.canvas!=t.canvas}},{key:"render",value:function(){var t=this.props,n=t.meta,a=n.isAnchored,r=n.isSelected,o=t.model,l=t.removeEntity,s=t.signUpperBills,u=t.connecting,c=t.defaultEntity;return i.default.createElement(L,{model:o,isAnchored:a,isSelected:r,removeEntity:l,signUpperBills:s,connecting:u,defaultEntity:c,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp},i.default.createElement(e,{model:o}))}}]),n}(i.default.PureComponent)}(e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.couldLinkTo=void 0;var a=n(1),i=n(0),r=n(6);t.couldLinkTo=function(e,t,n,o,l,s,u){var c=(0,r.getEntity)(t,n),p=(0,r.getEntity)(t,o),d=c.type,f=p.type,m="sub"==e.substr(-3);if("bpp"==e){if("start"==d)return"bill"==f||((0,a.toast)({title:i.multiLang["entity-000021"],color:"warning"}),!1);if("start"==f)return(0,a.toast)({title:i.multiLang["entity-000022"],color:"warning"}),!1;if("bpp_link_wb"==l){var g=[];return(0,r.getUpperBill)(t,c,[],g),!!g.includes(o)||("bill"!=p.type?((0,a.toast)({title:i.multiLang["entity-000023"],color:"warning"}),!1):((0,a.toast)({title:i.multiLang["entity-000024"],color:"warning"}),!1))}if("bill"==f&&"bill"==d){var y=[];return(0,r.getUpperBill)(t,c,[],y),!(p.linksTo.some((function(e){return e.target==n&&"bpp_link_wb"!=e.type}))&&c.linksFrom.some((function(e){return e.entityId==o}))||y.includes(o))||((0,a.toast)({title:i.multiLang["entity-000025"],color:"warning"}),!1)}if("bpp_link_ps"==l)return"bill"==f||((0,a.toast)({title:i.multiLang["entity-000026"],color:"warning"}),!1);if("vo"==f){if("bill"==d)for(var b=c.linksTo,v=0;v<b.length;v++){var h=b[v];if("bpp_link"==h.type&&"vo"==(0,r.getEntity)(t,h.target).type)return(0,a.toast)({title:i.multiLang["entity-000027"],color:"warning"}),!1}return"bill"==d&&0==p.linksFrom.length||((0,a.toast)({title:i.multiLang["entity-000028"],color:"warning"}),!1)}if("router"==d&&"router"==f){var w=[];if(function e(t,n){return n.linksFrom.forEach((function(n){var a=(0,r.getEntity)(t,n.entityId);"router"==a.type&&(w.push(a.id),e(t,a))})),w}(t,c),w.includes(o))return(0,a.toast)({title:i.multiLang["entity-000029"],color:"warning"}),!1}if("router"==f)return"bill"==d||"router"==d||((0,a.toast)({title:i.multiLang["entity-000030"],color:"warning"}),!1);if("router"==d)return"router"==f||"finish"==f&&0==p.linksFrom.length||((0,a.toast)({title:i.multiLang["entity-000031"],color:"warning"}),!1);if("vo"==d)return(0,a.toast)({title:i.multiLang["entity-000032"],color:"warning"}),!1;if("drive"==d){if("bpp_link"!=l)return(0,a.toast)({title:i.multiLang["entity-000033"],color:"warning"}),!1;if("bill"!=f)return(0,a.toast)({title:i.multiLang["entity-000034"],color:"warning"}),!1;if("bill"==f){if(c.linksTo&&0!=c.linksTo.length&&p.linksTo.some((function(e){return e.target==n})))return(0,a.toast)({title:i.multiLang["entity-000035"],color:"warning"}),!1;if(0==c.linksFrom.length)return!0;var k=(0,r.getEntity)(t,c.linksFrom[0].entityId);if("bill"==k.type){var E=[];if((0,r.getUpperBill)(t,k,[],E),E.includes(o))return(0,a.toast)({title:i.multiLang["entity-000036"],color:"warning"}),!1}}return!0}return"drive"==f?"bpp_link"!=l?((0,a.toast)({title:i.multiLang["entity-000037"],color:"warning"}),!1):!p.linksFrom||1!=p.linksFrom.length||((0,a.toast)({title:i.multiLang["entity-000038"],color:"warning"}),!1):"finish"==d?((0,a.toast)({title:i.multiLang["entity-000039"],color:"warning"}),!1):"finish"!=f||(0==p.linksFrom.length||((0,a.toast)({title:i.multiLang["entity-000040"],color:"warning"}),!1))}return"start"==d?s.id==u&&c.linksTo.length>1?((0,a.toast)({title:i.multiLang["entity-000041"],color:"warning"}),!1):"lister"==f||(!!("finish"!==f&&s.id!==u||m)||((0,a.toast)({title:i.multiLang["entity-000042"],color:"warning"}),!1)):"start"==f?((0,a.toast)({title:i.multiLang["entity-000043"],color:"warning"}),!1):"lister"==f&&"start"!==d&&s.id==u||("finish"==f?0==(0,r.getLinksByTarget)(t,o).length||((0,a.toast)({title:i.multiLang["entity-000045"],color:"warning"}),!1):"finish"!=d)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.doEditSubflow=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=n(1),r=n(16),o=n(27),l=function(e){return e&&e.__esModule?e:{default:e}}(n(18)),s=n(6),u=n(0);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.doEditSubflow=function(e,t,n){console.log("doEditSubflow","entityId",e,"flows",n);var p=n.displayFlowIds,d=(0,s.uuid)(),f=t.subflowId,m=u.subflowsList.getByEntityId(e);if(console.log("displayFlowIds",p),m){var g=p.findIndex((function(e){return e==m.flowId}));p.includes(m.flowId)?(console.log("已打开"),r.store.dispatch((0,o.changeTab)(m.flowId,m.flowName,g))):(console.log("test-已关闭"),r.store.dispatch((0,o.openExistedSubflow)(m.flowId,m.flowName)))}else f&&!u.attributesList.get(f)?(console.log("请求子流程"),r.store.dispatch(function(e,t,n){return function(r){return(0,i.ajax)({url:"/nccloud/riawf/pf/querySubFlowContent.do",method:"POST",data:{flowId:e,billType:u.flowContext.get().billType,pk_org:u.flowContext.get().pk_org},success:function(e){if(e.data){var o,p=e.data.flow;if(console.log("get-subflow",p),!p)return void(0,i.toast)({title:u.multiLang["entity-000046"],color:"warning"});var d=[];p.entity.forEach((function(e){e.height=40,e.width=40,e.x=Number(e.x),e.y=Number(e.y);var t={id:e.id,isAnchored:!1,isSelected:!1,anchor:{x:e.x,y:e.y}};d.push(t)})),!u.attributesList.get(p.flowId)&&u.attributesList.add(p.attributes);var f=p.entity.map((function(e){return a({},e,{linksTo:e.linksTo?e.linksTo.map((function(t){return a({},t,{points:(0,l.default)(e,(0,s.getEntity)(p.entity,t.target),u.attributesList.get(t.linkId).apparent.lineType)})})):[]})}));u.subflowsList.push((c(o={},p.flowId,{entity:f,metaEntity:d,history:{past:[],future:[],lastAction:"@@INIT"},artboard:{zoom:1,canvasArtboard:{x:0,y:0}}}),c(o,"flowName",p.flowName),c(o,"flowId",p.flowId),c(o,"entityId",t.id),o)),"openExistedSubflow"==n.type?r(n.func(p.flowId,p.flowName)):"changeTab"==n.type&&r(n.func(p.flowId,p.flowName,n.params.newActiveIndex))}else console.error("subflow-data",e)}})}}(f,t,{func:o.openExistedSubflow,type:"openExistedSubflow",params:{flows:n}}))):f&&""!=f||(console.log("新建子流程",r.store),r.store.dispatch((0,o.editSubflow)(e,d)))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=l(n(2)),r=l(n(60)),o=n(16);function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(114);var c=function(e){function t(){var e,n,a;s(this,t);for(var i=arguments.length,r=Array(i),l=0;l<i;l++)r[l]=arguments[l];return n=a=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),a.stopActionPropagation=function(e,t){return function(n){n.stopPropagation(),o.store.getState().canvas.connecting.currently&&-1==t.indexOf("arrow")||e(n)}},u(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"shouldComponentUpdate",value:function(e){return e.zoom!=this.props.zoom||this.props.actions.length!=e.actions.length||e.isSelected!=this.props.isSelected}},{key:"render",value:function(){var e=this,t=this.props,n=t.zoom,a=n>=1?1:1/n;return i.default.createElement("ul",{className:"panelSmUl "+(t.isSelected?"panelSlideForward":""),style:{transform:"scale("+a+","+a+")"}},t.actions.map((function(t){return i.default.createElement("li",{key:t.label,onMouseDown:e.stopActionPropagation(t.action,t.iconVariety)},i.default.createElement(r.default,{name:t.iconVariety,label:t.label}))})))}}]),t}(i.default.PureComponent);t.default=c},function(e,t,n){var a=n(115);"string"==typeof a&&(a=[[e.i,a,""]]);var i={transform:void 0};n(4)(a,i);a.locals&&(e.exports=a.locals)},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,"/*\n * @Author: yanxbm \n * @Date: 2018-11-29 11:10:58 \n * @Last Modified by: yanxbm\n * @Last Modified time: 2019-04-09 10:20:56\n */\n@-webkit-keyframes panelSlide {\n  0% {\n    right: 0;\n  }\n  100% {\n    left: 100%;\n  }\n}\n@keyframes panelSlide {\n  0% {\n    right: 0;\n  }\n  100% {\n    left: 100%;\n  }\n}\n@-webkit-keyframes panelSlideInvert {\n  from {\n    right: -0.5em;\n    opacity: 1;\n  }\n  to {\n    right: 1.5em;\n    opacity: 0;\n  }\n}\n@keyframes panelSlideInvert {\n  from {\n    right: -0.5em;\n    opacity: 1;\n  }\n  to {\n    right: 1.5em;\n    opacity: 0;\n  }\n}\n.canvasViewport ul.panelSmUl {\n  position: absolute;\n  left: 100%;\n  -ms-flex-item-align: start;\n      align-self: flex-start;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  visibility: hidden;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  -ms-flex-pack: distribute;\n      justify-content: space-around;\n  height: 100%;\n  padding: 0px 5px 0px 4px;\n}\n.canvasViewport ul.panelSmUl li {\n  cursor: pointer;\n  margin-bottom: 4px;\n  width: 18px;\n  min-height: 18px;\n  border-radius: 50px;\n  background: #DEECFC;\n}\n.canvasViewport ul.panelSmUl li:hover {\n  background-color: #B2C4DA;\n}\n.canvasViewport ul.panelSmUl .svgIcon {\n  opacity: 0.6;\n}\n.canvasViewport ul.panelSmUl .svgIcon:hover {\n  opacity: 1;\n}\n.panelSlideForward {\n  visibility: visible;\n}\n.panelSlideInvert {\n  -webkit-animation: panelSlideInvert 80ms linear 1;\n          animation: panelSlideInvert 80ms linear 1;\n  -webkit-animation-fill-mode: forwards;\n          animation-fill-mode: forwards;\n}\n.entity:hover .panelSmUl,\n.panelSmUl:hover .panelSmUl {\n  visibility: visible;\n}\n",""])},function(e,t,n){var a=n(117);"string"==typeof a&&(a=[[e.i,a,""]]);var i={transform:void 0};n(4)(a,i);a.locals&&(e.exports=a.locals)},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,"/*\n * @Author: yanxbm \n * @Date: 2018-11-22 14:02:10 \n * @Last Modified by: yanxbm\n * @Last Modified time: 2019-05-21 09:41:52\n */\n@-webkit-keyframes glow {\n  0% {\n    border-color: #0beeee;\n    -webkit-box-shadow: 0 0 5px rgba(0, 255, 0, 0.2), inset 0 0 5px rgba(0, 255, 0, 0.1), 0 0 0 #0beeee;\n            box-shadow: 0 0 5px rgba(0, 255, 0, 0.2), inset 0 0 5px rgba(0, 255, 0, 0.1), 0 0 0 #0beeee;\n  }\n  100% {\n    border-color: #6f6;\n    -webkit-box-shadow: 0 0 20px rgba(0, 255, 0, 0.6), inset 0 0 10px rgba(0, 255, 0, 0.4), 0 0 0 #6f6;\n            box-shadow: 0 0 20px rgba(0, 255, 0, 0.6), inset 0 0 10px rgba(0, 255, 0, 0.4), 0 0 0 #6f6;\n  }\n}\n@keyframes glow {\n  0% {\n    border-color: #0beeee;\n    -webkit-box-shadow: 0 0 5px rgba(0, 255, 0, 0.2), inset 0 0 5px rgba(0, 255, 0, 0.1), 0 0 0 #0beeee;\n            box-shadow: 0 0 5px rgba(0, 255, 0, 0.2), inset 0 0 5px rgba(0, 255, 0, 0.1), 0 0 0 #0beeee;\n  }\n  100% {\n    border-color: #6f6;\n    -webkit-box-shadow: 0 0 20px rgba(0, 255, 0, 0.6), inset 0 0 10px rgba(0, 255, 0, 0.4), 0 0 0 #6f6;\n            box-shadow: 0 0 20px rgba(0, 255, 0, 0.6), inset 0 0 10px rgba(0, 255, 0, 0.4), 0 0 0 #6f6;\n  }\n}\n.entity {\n  position: absolute;\n  text-align: center;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-flow: row nowrap;\n          flex-flow: row nowrap;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  border-radius: 17px;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  border: 2px solid rgba(204, 204, 204, 0);\n  padding: 2px;\n}\n.entity.upperBill .task {\n  -webkit-animation: glow 900ms ease-out infinite alternate;\n          animation: glow 900ms ease-out infinite alternate;\n}\n.entity.selected {\n  background-color: rgba(0, 40, 143, 0.16);\n  border-color: #4693ff;\n}\n.entity.selected .task,\n.entity.selected .event,\n.entity.selected .flow {\n  background-color: #d0ecfc;\n}\n",""])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectingAction=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(119);t.SelectingAction=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a.mouseX2=e,a.mouseY2=n,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"getBoxDimensions",value:function(){return{left:this.mouseX2>this.mouseX?this.mouseX:this.mouseX2,top:this.mouseY2>this.mouseY?this.mouseY:this.mouseY2,width:Math.abs(this.mouseX2-this.mouseX),height:Math.abs(this.mouseY2-this.mouseY),right:this.mouseX2<this.mouseX?this.mouseX:this.mouseX2,bottom:this.mouseY2<this.mouseY?this.mouseY:this.mouseY2}}},{key:"containsElement",value:function(e,t,n){var a=this.getBoxDimensions(),i=(e.x+e.width)*n+t.x,r=(e.y+e.height)*n+t.y;return i>a.left&&i<a.right&&r>a.top&&r<a.bottom}},{key:"containsLinks",value:function(e,t,n,a){var i=this.getBoxDimensions(),r=(e.x+e.width/2)*a+n.x,o=(e.y+e.height/2)*a+n.y,l=t.x*a+n.x,s=t.y*a+n.y;return r>i.left&&r<i.right&&o>i.top&&o<i.bottom&&l>i.left&&l<i.right&&s>i.top&&s<i.bottom}}]),t}(i.BaseAction)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BaseAction=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mouseX=t,this.mouseY=n,this.ms=(new Date).getTime()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(n(2)),r=n(7),o=n(16),l=f(n(25)),s=f(n(37)),u=n(24),c=n(18),p=n(0),d=n(6);function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n(121);var b=void 0,v=void 0,h=void 0;"bpp"==(0,d.getQueryString)("flowType")?(b=s.selectLink,v=s.deleteLink,h=s.reshape):(b=l.selectLink,v=l.deleteLink,h=l.reshape);var w=function(e){function t(e){m(this,t);var n=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.reshape=function(){for(var e=n.state.points.QPointsArr,t=e[0],a=e[2],i=o.store.getState().canvas.cursor,r=(0,c.computeReshapePoints)(i,t,a),l=r.cp,s=r.curviness,u=(0,c.getDistance)(t,a),p=(0,c.getDistance)(a,l),d=(u-25*((t.x-a.x)*(l.x-a.x)+(t.y-a.y)*(l.y-a.y))/(u*p))/u,f=[t,{x:t.x+2*(l.x-t.x)/3,y:t.y+2*(l.y-t.y)/3},{x:a.x+2*(l.x-a.x)/3,y:a.y+2*(l.y-a.y)/3},a],m=[],g=1;g<4;g++){var y=(0,c.lerp)(f[g-1],f[g],d);m.push(y)}m.push((0,c.lerp)(m[0],m[1],d)),m.push((0,c.lerp)(m[1],m[2],d)),m.push((0,c.lerp)(m[3],m[4],d)),n.setState({points:{pointsArr:[t,m[0],m[3],m[5]],curviness:s,cPoint:l,QPointsArr:[t,l,a],lineType:n.state.points.lineType}})},n.findPathAndRelativePositionToRenderLabel=function(){var e=2*n.path.getTotalLength()/5;return{path:n.path,position:e}},n.calculateLabelPosition=function(){if(n.props.label){var e=n.findPathAndRelativePositionToRenderLabel(),t=e.path,a=e.position,i=n.label.offsetWidth,r=n.label.offsetHeight,o=t.getPointAtLength(a),l=Math.round(o.x-i/2)+10,s=Math.round(o.y-r/2)+10;n.label.setAttribute("style","left: "+l+"px; top: "+s+"px")}},n.state={decoration:"",cpMove:!1,points:n.props.points,cPoint:n.props.points.cPoint},n.setPathRef=function(e){n.path=e},n.label=null,n.decorationLine=n.decorationLine.bind(n),n.unDecorationLine=n.unDecorationLine.bind(n),n.multiSelectLink=n.multiSelectLink.bind(n),n.selectLink=n.selectLink.bind(n),n.deleteLink=n.deleteLink.bind(n),n.changeCPos=n.changeCPos.bind(n),n.fixCPos=n.fixCPos.bind(n),n}return y(t,e),a(t,[{key:"componentWillMount",value:function(){document.addEventListener("mouseup",this.fixCPos)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mouseup",this.fixCPos)}},{key:"selectLink",value:function(e,t,n){e.stopPropagation(),console.log("click-link",t,n),o.store.getState().canvas.copyStatus.multiSelect||(p.multiSelectList.clearAllSelected(),this.props.selectLink(t,n))}},{key:"multiSelectLink",value:function(e,t,n,a){e.stopPropagation(),o.store.getState().canvas.copyStatus.multiSelect&&p.multiSelectList.setLink(a,{fromId:t,targetId:n})}},{key:"decorationLine",value:function(e){e.stopPropagation(),this.setState({decoration:"decorationBlue"})}},{key:"showColorPicker",value:function(e){var t=this;e.stopPropagation();var n=.5*this.path.getTotalLength(),a=this.path.getPointAtLength(n);this.setState({decoration:"decorationBlue"}),this.delayShow=setTimeout((function(){t.props.setColorPicker({linkId:t.props.linkId,fromId:t.props.fromId,display:!0,color:t.props.color,pos:{left:a.x,top:a.y}})}),700)}},{key:"unDecorationLine",value:function(e){this.delayShow&&clearTimeout(this.delayShow),e.stopPropagation(),this.setState({decoration:""})}},{key:"deleteLink",value:function(e,t,n,a){e.stopPropagation(),console.log("delete",t,n,a),this.props.deleteLink([{fromId:t,linkId:n,targetId:a}]),p.multiSelectList.clearAllSelected()}},{key:"componentDidUpdate",value:function(e){this.props.label&&window.requestAnimationFrame(this.calculateLabelPosition.bind(this))}},{key:"componentDidMount",value:function(){this.props.label&&window.requestAnimationFrame(this.calculateLabelPosition.bind(this))}},{key:"changeCPos",value:function(e){e.stopPropagation(),this.setState({cpMove:!0,decoration:""}),o.store.getState().canvas.colorPicker.display&&this.props.setColorPicker({linkId:"",display:!1,pos:{left:0,top:0}})}},{key:"fixCPos",value:function(e){this.state.cpMove&&this.setState({cpMove:!1}),this.props.reshape({fromId:this.props.fromId,targetId:this.props.targetId,linkId:this.props.linkId,cPoint:this.state.points.cPoint,lineType:this.state.points.lineType,curviness:this.state.points.curviness})}},{key:"componentWillReceiveProps",value:function(e){this.setState({points:e.points}),this.state.cpMove&&this.reshape(e.points)}},{key:"generateLabel",value:function(e){var t=this;if(e){var n=this.props,a=n.distance,r=n.color;return a*=o.store.getState().canvas.zoom,i.default.createElement("foreignObject",{className:"link-label",width:"100%",height:"100%"},i.default.createElement("div",{ref:function(e){return t.label=e},className:"labelDiv "+(a<80?"hide-label":"show-label")},i.default.createElement("span",{className:"default-label",style:{backgroundColor:r}},e)))}}},{key:"render",value:function(){var e=this,t=this.props,n=t.label,a=t.key,r=t.selected,o=t.linkId,l=t.fromId,s=t.targetId,u=(t.connecting,t.lineType),c=t.color,d=this.state,f=d.decoration,m=d.points,g=d.cpMove;r=r||p.multiSelectList.linkIncludes(o);var y=void 0,b=function(e){var t=e.pointsArr;if(t)return{pointsPath:"M "+t[0].x+","+t[0].y+t.slice(1).reduce((function(e,t){return e+" "+t.x+","+t.y}),"C")}}(m),v=null;b&&(v=b.pointsPath,b.hotPointsPath);var h="line-path "+(f||"")+" "+(r?"line-selected":"");return"bpp_link_ps"!=u?(y=c?"url('#arrow-end"+c+"')":"url('#arrow-end')",!o&&(y="url('#arrow-end-connecting')")):(y=c?"url('#disc"+c+"')":"url('#disc')",!o&&(y="url('#disc-connecting')")),i.default.createElement("g",{key:a},i.default.createElement("path",{d:v,className:h,style:{stroke:c},id:"line"+o,strokeLinejoin:"round",markerEnd:y}),i.default.createElement("path",{d:v,ref:this.setPathRef,className:"hot-area line-path",id:"line"+o+"-hot-area",onMouseEnter:function(t){return e.decorationLine(t)},onMouseLeave:function(t){return e.unDecorationLine(t)},onMouseDown:function(t){return e.multiSelectLink(t,l,s,o)},onClick:function(t){return e.selectLink(t,l,o)},strokeLinejoin:"round"}),"decorationBlue"==this.state.decoration&&!g&&o&&!r&&i.default.createElement("text",null,i.default.createElement("textPath",{xlinkHref:"#line"+o+"-hot-area",startOffset:"50%"},i.default.createElement("tspan",{className:"dragPoint",fill:c||"#ababab",onMouseEnter:function(t){return e.showColorPicker(t)},onMouseDown:function(t){return e.changeCPos(t)},onMouseLeave:function(t){return e.unDecorationLine(t)}},"◆"))),r&&!p.multiSelectList.linkIncludes(o)&&i.default.createElement("text",{dy:"0.45em"},i.default.createElement("textPath",{onMouseDown:function(t){return e.deleteLink(t,l,o,s)},xlinkHref:"#line"+o,className:"deleteIcon",startOffset:"50%"},"✘")),this.generateLabel(n))}}]),t}(i.default.PureComponent),k=function(e){function t(e){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return y(t,e),a(t,[{key:"render",value:function(){var e=this.props,t=e.links,n=e.connecting,a=e.deleteLink,r=e.selectLink,o=e.reshape,l=e.canvas,s=e.setColorPicker;return i.default.createElement("g",null,t.map((function(e){return e.points&&i.default.createElement(w,{key:e.target,connecting:n,deleteLink:a,selectLink:r,reshape:o,fromId:e.from,targetId:e.target,id:e.target,linkId:e.linkId,selected:e.selected,arrowInvert:e.points.arrowInvert,label:e.linkName,distance:e.points.distance,points:e.points,lineType:e.points.lineType,canvas:l,setColorPicker:s,color:e.color})})))}}]),t}(i.default.PureComponent);t.default=(0,r.connect)((function(e){return{connecting:e.canvas.connecting.currently,canvas:e.canvas.copyStatus.multiSelect?e.canvas:{}}}),{selectLink:b,deleteLink:v,reshape:h,setColorPicker:u.setColorPicker})(k)},function(e,t,n){var a=n(122);"string"==typeof a&&(a=[[e.i,a,""]]);var i={transform:void 0};n(4)(a,i);a.locals&&(e.exports=a.locals)},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,"/*\n * @Author: yanxbm \n * @Date: 2018-12-21 13:50:56 \n * @Last Modified by: yanxbm\n * @Last Modified time: 2019-03-28 17:08:12\n */\n@-webkit-keyframes dash {\n  from {\n    stroke-dashoffset: 24;\n  }\n  to {\n    stroke-dashoffset: 0;\n  }\n}\n@keyframes dash {\n  from {\n    stroke-dashoffset: 24;\n  }\n  to {\n    stroke-dashoffset: 0;\n  }\n}\n@-webkit-keyframes dashInvert {\n  from {\n    stroke-dashoffset: 0;\n  }\n  to {\n    stroke-dashoffset: 24;\n  }\n}\n@keyframes dashInvert {\n  from {\n    stroke-dashoffset: 0;\n  }\n  to {\n    stroke-dashoffset: 24;\n  }\n}\n@-webkit-keyframes fade-in {\n  0% {\n    opacity: 0;\n  }\n  /*初始状态 透明度为0*/\n  40% {\n    opacity: 0.5;\n  }\n  /*过渡状态 透明度为0*/\n  100% {\n    opacity: 1;\n  }\n  /*结束状态 透明度为1*/\n}\n@keyframes fade-in {\n  0% {\n    opacity: 0;\n  }\n  /*初始状态 透明度为0*/\n  40% {\n    opacity: 0.5;\n  }\n  /*过渡状态 透明度为0*/\n  100% {\n    opacity: 1;\n  }\n  /*结束状态 透明度为1*/\n}\n.line-path {\n  fill: none;\n  stroke-width: 0.13em;\n  stroke: #ababab;\n  cursor: pointer;\n}\n.line-path.hot-area {\n  stroke-width: 1em;\n  stroke: transparent;\n  -webkit-transition: stroke 200ms linear;\n  transition: stroke 200ms linear;\n}\n.line-path.hot-area:hover {\n  stroke: rgba(0, 0, 0, 0.05);\n}\n.line-path.red_wb {\n  stroke: rgba(255, 0, 0, 0.5);\n  pointer-events: all;\n  stroke-dasharray: 6,4;\n}\n.decorationBlue {\n  stroke-opacity: 0.7;\n}\n.link-label {\n  pointer-events: none;\n}\n.link-label .labelDiv {\n  position: absolute;\n  display: inline-block;\n  -webkit-transition: left 20ms linear, top 20ms linear;\n  transition: left 20ms linear, top 20ms linear;\n}\n.link-label .labelDiv.hide-label {\n  opacity: 0;\n}\n.link-label .labelDiv.show-label {\n  opacity: 1;\n}\n.link-label .labelDiv .default-label {\n  background: #ababab;\n  -webkit-transition: background-color 400ms linear;\n  transition: background-color 400ms linear;\n  color: #fff;\n  display: inline-block;\n  padding: 3px 2px;\n  font-size: smaller;\n  border-radius: 2px;\n  text-align: left;\n}\n.line-selected {\n  pointer-events: all;\n  stroke-dasharray: 6,4;\n  -webkit-animation: dash 1s linear infinite;\n          animation: dash 1s linear infinite;\n}\n.line-invert-selected {\n  pointer-events: all;\n  stroke-dasharray: 6,4;\n  stroke: #00c0ff;\n  -webkit-animation: dashInvert 1s linear infinite;\n          animation: dashInvert 1s linear infinite;\n}\n.deleteIcon {\n  font-size: 15px;\n  fill: #ff3b00d4;\n  cursor: pointer;\n  font-style: italic;\n  font-weight: 600;\n  -moz-user-select: none;\n   -ms-user-select: none;\n       user-select: none;\n  -webkit-user-select: none;\n}\n.dragPoint {\n  dominant-baseline: central;\n  cursor: move;\n  -webkit-animation: fade-in 400ms linear;\n          animation: fade-in 400ms linear;\n}\n",""])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FloatPanel=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(1),r=n(0);n(124);var o=i.base.NCTooltip;t.FloatPanel=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React.PureComponent),a(t,[{key:"blockAlign",value:function(e){this.props.align(e)}},{key:"reset",value:function(e){e.stopPropagation(),this.props.reset()}},{key:"multiSelect",value:function(e){e.stopPropagation(),this.props.multiSelect({multiSelect:!0})}},{key:"undo",value:function(e){e.stopPropagation(),console.log("undo"),this.props.undo()}},{key:"redo",value:function(e){e.stopPropagation(),console.log("redo"),this.props.redo()}},{key:"render",value:function(){var e=this,t=React.createElement("div",null,React.createElement("span",null,r.multiLang["floatPanel-000008"]),React.createElement("p",null,r.multiLang["floatPanel-000009"]),React.createElement("p",null,r.multiLang["floatPanel-000010"]),React.createElement("p",null,r.multiLang["floatPanel-000011"]),React.createElement("p",null,r.multiLang["floatPanel-000012"]),React.createElement("p",null,r.multiLang["floatPanel-000013"]),React.createElement("p",null,r.multiLang["floatPanel-000014"]),"bpp"!=this.props.flowType&&React.createElement("p",null,r.multiLang["floatPanel-000015"])),n=this.props.history.past,a=this.props.history.future;return React.createElement("div",{className:"floatPanel"},React.createElement("div",null,React.createElement("span",{title:r.multiLang["floatPanel-000000"],className:"reset",onClick:function(t){return e.reset(t)}}),React.createElement("b",{className:"tool-gap"}),React.createElement("span",{title:r.multiLang["floatPanel-000001"],className:"multi-select "+(this.props.multiSelecting?"multi-selecting":""),onClick:function(t){return e.multiSelect(t)}}),React.createElement("b",{className:"tool-gap"}),React.createElement("span",{title:r.multiLang["floatPanel-000002"],className:"undo "+(n.length>0?"enable":""),onClick:function(t){return e.undo(t)}}),React.createElement("b",{className:"tool-gap"}),React.createElement("span",{title:r.multiLang["floatPanel-000003"],className:"redo "+(a.length>0?"enable":""),onClick:function(t){return e.redo(t)}}),React.createElement("b",{className:"tool-gap"}),React.createElement("span",{title:r.multiLang["floatPanel-000004"],className:"left-align",onClick:function(t){return e.blockAlign("left")}}),React.createElement("b",{className:"tool-gap"}),React.createElement("span",{title:r.multiLang["floatPanel-000005"],className:"right-align",onClick:function(t){return e.blockAlign("right")}}),React.createElement("b",{className:"tool-gap"}),React.createElement("span",{title:r.multiLang["floatPanel-000006"],className:"top-align",onClick:function(t){return e.blockAlign("top")}}),React.createElement("b",{className:"tool-gap"}),React.createElement("span",{title:r.multiLang["floatPanel-000007"],className:"btm-align",onClick:function(t){return e.blockAlign("bottom")}}),React.createElement("b",{className:"tool-gap"}),React.createElement(o,{overlay:t,inverse:!0,placement:"bottom"},React.createElement("span",{className:"info"}))))}}]),t}()},function(e,t,n){var a=n(125);"string"==typeof a&&(a=[[e.i,a,""]]);var i={transform:void 0};n(4)(a,i);a.locals&&(e.exports=a.locals)},function(e,t,n){var a=n(62);(e.exports=n(3)(!1)).push([e.i,"/*\n * @Author: yanxbm \n * @Date: 2019-03-08 15:18:25 \n * @Last Modified by: yanxbm\n * @Last Modified time: 2019-04-16 09:41:56\n */\n.floatPanel {\n  position: absolute;\n  right: 2%;\n  top: 1%;\n  padding: 4px 5px 4px 7px;\n  border-radius: 2px;\n  -webkit-box-shadow: 1px 2px 1px rgba(0, 0, 0, 0.15);\n          box-shadow: 1px 2px 1px rgba(0, 0, 0, 0.15);\n  border: 1px solid #ccc;\n  background: #F7F9FB;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n}\n.floatPanel div {\n  padding: 3px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n.floatPanel div span {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  position: relative;\n  width: 18px;\n  height: 18px;\n  background-size: 100%, 100%;\n  background-repeat: no-repeat;\n  cursor: pointer;\n  opacity: .4;\n}\n.floatPanel div span:last-child {\n  margin-right: 0;\n}\n.floatPanel .reset {\n  background-image: url("+a(n(126))+");\n}\n.floatPanel .reset:hover {\n  opacity: .8;\n}\n.floatPanel .multi-select {\n  background-image: url("+a(n(127))+");\n}\n.floatPanel .multi-select:hover {\n  opacity: .8;\n}\n.floatPanel .multi-select.multi-selecting {\n  opacity: .8;\n}\n.floatPanel .left-align {\n  background-image: url("+a(n(128))+");\n}\n.floatPanel .left-align:hover {\n  opacity: .8;\n}\n.floatPanel .right-align {\n  background-image: url("+a(n(129))+");\n}\n.floatPanel .right-align:hover {\n  opacity: .8;\n}\n.floatPanel .top-align {\n  background-image: url("+a(n(130))+");\n}\n.floatPanel .top-align:hover {\n  opacity: .8;\n}\n.floatPanel .btm-align {\n  background-image: url("+a(n(131))+");\n}\n.floatPanel .btm-align:hover {\n  opacity: .8;\n}\n.floatPanel .undo {\n  cursor: not-allowed;\n  background-image: url("+a(n(132))+");\n}\n.floatPanel .undo.enable {\n  cursor: pointer;\n  opacity: .6;\n}\n.floatPanel .undo.enable:hover {\n  opacity: .8;\n}\n.floatPanel .redo {\n  cursor: not-allowed;\n  background-image: url("+a(n(133))+");\n}\n.floatPanel .redo.enable {\n  cursor: pointer;\n  opacity: .6;\n}\n.floatPanel .redo.enable:hover {\n  opacity: .8;\n}\n.floatPanel .info {\n  background-image: url("+a(n(134))+");\n}\n.floatPanel .info:hover {\n  opacity: .8;\n}\n.floatPanel .tool-gap {\n  position: relative;\n  height: 18px;\n  top: 2px;\n  margin: 0 7px;\n  border-right: 1px solid #eee;\n  display: inline-block;\n}\n.floatPanel .isSelected {\n  opacity: .6;\n}\n",""])},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTUyNDc0MjQzMjkyIiBjbGFzcz0iaWNvbiIgc3R5bGU9IiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjE4NjUyIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgd2lkdGg9IjIwMCIgaGVpZ2h0PSIyMDAiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTIxMy4zMzMzMzMgNjQwdjE3MC42NjY2NjdoMTcwLjY2NjY2N3Y4NS4zMzMzMzNIMTcwLjY2NjY2N2E0Mi42NjY2NjcgNDIuNjY2NjY3IDAgMCAxLTQyLjY2NjY2Ny00Mi42NjY2Njd2LTIxMy4zMzMzMzNoODUuMzMzMzMzeiBtMC0yNTZIMTI4VjE3MC42NjY2NjdhNDIuNjY2NjY3IDQyLjY2NjY2NyAwIDAgMSA0Mi42NjY2NjctNDIuNjY2NjY3aDIxMy4zMzMzMzN2ODUuMzMzMzMzSDIxMy4zMzMzMzN2MTcwLjY2NjY2N3ogbTU5Ny4zMzMzMzQgMjU2aDg1LjMzMzMzM3YyMTMuMzMzMzMzYTQyLjY2NjY2NyA0Mi42NjY2NjcgMCAwIDEtNDIuNjY2NjY3IDQyLjY2NjY2N2gtMjEzLjMzMzMzM3YtODUuMzMzMzMzaDE3MC42NjY2Njd2LTE3MC42NjY2Njd6IG0wLTI1NlYyMTMuMzMzMzMzaC0xNzAuNjY2NjY3VjEyOGgyMTMuMzMzMzMzYTQyLjY2NjY2NyA0Mi42NjY2NjcgMCAwIDEgNDIuNjY2NjY3IDQyLjY2NjY2N3YyMTMuMzMzMzMzaC04NS4zMzMzMzN6IG0tMjk4LjY2NjY2NyAyNTZhMTI4IDEyOCAwIDEgMSAwLTI1NiAxMjggMTI4IDAgMCAxIDAgMjU2eiIgZmlsbD0iIzAwMDAwMCIgcC1pZD0iMTg2NTMiPjwvcGF0aD48L3N2Zz4="},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTUyMzcwMDMxMTQzIiBjbGFzcz0iaWNvbiIgc3R5bGU9IiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjI3MTgyIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgd2lkdGg9IjIwMCIgaGVpZ2h0PSIyMDAiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTg5OC43MSA5MS4xNDJIMTI1LjMxNWMtMTguNjM5IDAtMzMuNzUgMTUuMTExLTMzLjc1IDMzLjc1djc3My4zOTVjMCAxOC42MzkgMTUuMTExIDMzLjc1IDMzLjc1IDMzLjc1aDUwNy41NDNzMTUuMzI2LTAuNjQxIDI0LjgxOC0xMC4xMzNjMTEuMDc0LTExLjA3NCAxMC4zNTItMjQuMzc1IDEwLjM1Mi0yNC4zNzVzMC45NTctMTIuNzE0LTEwLjQ2OS0yNC4xNDFjLTEwLjcyMy0xMC43MjMtMjQuNzAxLTkuMjk4LTI0LjcwMS05LjI5OEgxNTkuODQ5VjE1OS41OTNoNzA0LjQ5NnY0NzIuODRzLTEuNTkgMTcuMjQyIDcuNzg1IDI2LjYxN2MxMi40MjIgMTIuNDIyIDI1Ljg5OCAxMS45NTMgMjUuODk4IDExLjk1M3MxMi43MTQgMC43NjEgMjUuMzEzLTExLjgzNmM4Ljk2NC04Ljk2NCA5LjEyLTI2LjczNSA5LjEyLTI2LjczNVYxMjQuODljMC0xOC42MzktMTUuMTExLTMzLjc1LTMzLjc1LTMzLjc1eiBtLTk2LjQ4OSA2NjQuMTczTDYxNy45MjkgNTcxLjAyMmMtMC40NC0wLjQ0LTAuODktMC44NjItMS4zNDctMS4yNzJsOTQuOTEzLTk0LjkxN2MxMi40NjctMTEuNzE5IDEyLjQ2Ny0yNi40NDkgMTIuNDY3LTI2LjQ0OSAwLTE4LjYzOS0xNS4xMTEtMzMuNzUtMzMuNzUtMzMuNzVoLTI0MS44NmMtMTguNjM5IDAtMzMuNzUgMTUuMTExLTMzLjc1IDMzLjc1djI0MS44NTljMCAxOC42MzkgMTUuMTExIDMzLjc1IDMzLjc1IDMzLjc1IDAgMCAxNi4wMDQtMC41MjggMjYuMzk0LTEyLjQwM2w5NC4xODMtOTQuMTg3YzAuNDEgMC40NTcgMC44MzIgMC45MDcgMS4yNzEgMS4zNDVsMTg0LjI5MyAxODQuMjk0YzEzLjE3OSAxMy4xNzkgMzQuNTQ4IDEzLjE3OSA0Ny43MjcgMHMxMy4xNzktMzQuNTQ4IDAtNDcuNzI3eiIgcC1pZD0iMjcxODMiPjwvcGF0aD48L3N2Zz4="},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTUyMjkyNjgzNDg2IiBjbGFzcz0iaWNvbiIgc3R5bGU9IiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjU5NjMiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNODMyIDY0MGwwIDE5MkwyNTYgODMybDAtMTkyTDgzMiA2NDBNODMyIDU3NiAyNTYgNTc2Yy0zNS4zOTIgMC02NCAyOC42MDgtNjQgNjRsMCAxOTJjMCAzNS4zOTIgMjguNjA4IDY0IDY0IDY0bDU3NiAwYzM1LjM5MiAwIDY0LTI4LjYwOCA2NC02NGwwLTE5MkM4OTYgNjA0LjYwOCA4NjcuMzkyIDU3NiA4MzIgNTc2TDgzMiA1NzZ6TTY0MCAxOTIgMjU2IDE5MkMyMjAuNjA4IDE5MiAxOTIgMjIwLjYwOCAxOTIgMjU2bDAgMTI4YzAgMzUuMzkyIDI4LjYwOCA2NCA2NCA2NGwzODQgMGMzNS4zOTIgMCA2NC0yOC42MDggNjQtNjRMNzA0IDI1NkM3MDQgMjIwLjYwOCA2NzUuMzkyIDE5MiA2NDAgMTkyTDY0MCAxOTJ6TTk2IDY0Qzc4LjMzNiA2NCA2NCA3OC4zMzYgNjQgOTZsMCA4OTZDNjQgMTAwOS42NjQgNzguMzM2IDEwMjQgOTYgMTAyNGwwIDBDMTEzLjY2NCAxMDI0IDEyOCAxMDA5LjY2NCAxMjggOTkybDAtODk2QzEyOCA3OC4zMzYgMTEzLjY2NCA2NCA5NiA2NEw5NiA2NHoiIHAtaWQ9IjU5NjQiPjwvcGF0aD48L3N2Zz4="},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTUyMjkyNjAzNDY5IiBjbGFzcz0iaWNvbiIgc3R5bGU9IiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjUxMzciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNMTkyIDY0MGwwIDE5MiA1NzYgMCAwLTE5MkwxOTIgNjQwTTE5MiA1NzZsNTc2IDBjMzUuMzkyIDAgNjQgMjguNjA4IDY0IDY0bDAgMTkyYzAgMzUuMzkyLTI4LjYwOCA2NC02NCA2NEwxOTIgODk2Yy0zNS4zOTIgMC02NC0yOC42MDgtNjQtNjRsMC0xOTJDMTI4IDYwNC42MDggMTU2LjYwOCA1NzYgMTkyIDU3NkwxOTIgNTc2ek0zODQgMTkybDM4NCAwYzM1LjM5MiAwIDY0IDI4LjYwOCA2NCA2NGwwIDEyOGMwIDM1LjM5Mi0yOC42MDggNjQtNjQgNjRMMzg0IDQ0OEMzNDguNjA4IDQ0OCAzMjAgNDE5LjM5MiAzMjAgMzg0TDMyMCAyNTZDMzIwIDIyMC42MDggMzQ4LjYwOCAxOTIgMzg0IDE5MkwzODQgMTkyek05MjggNjRDOTQ1LjY2NCA2NCA5NjAgNzguMzM2IDk2MCA5NmwwIDg5NmMwIDE3LjY2NC0xNC4zMzYgMzItMzIgMzJsMCAwYy0xNy42NjQgMC0zMi0xNC4zMzYtMzItMzJsMC04OTZDODk2IDc4LjMzNiA5MTAuMzM2IDY0IDkyOCA2NEw5MjggNjR6IiBwLWlkPSI1MTM4Ij48L3BhdGg+PC9zdmc+"},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTUyMjkyNjU2MTUxIiBjbGFzcz0iaWNvbiIgc3R5bGU9IiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjU4NDciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNNTc2IDg5NmwxOTIgMEw3NjggMzIwIDU3NiAzMjAgNTc2IDg5Nk01MTIgODk2IDUxMiAzMjBjMC0zNS4zOTIgMjguNjA4LTY0IDY0LTY0bDE5MiAwYzM1LjM5MiAwIDY0IDI4LjYwOCA2NCA2NGwwIDU3NmMwIDM1LjM5Mi0yOC42MDggNjQtNjQgNjRMNTc2IDk2MEM1NDAuNjA4IDk2MCA1MTIgOTMxLjM5MiA1MTIgODk2TDUxMiA4OTZ6TTE5MiA3MDQgMTkyIDMyMGMwLTM1LjM5MiAyOC42MDgtNjQgNjQtNjRsMTI4IDBjMzUuMzkyIDAgNjQgMjguNjA4IDY0IDY0bDAgMzg0YzAgMzUuMzkyLTI4LjYwOCA2NC02NCA2NEwyNTYgNzY4QzIyMC42MDggNzY4IDE5MiA3MzkuMzkyIDE5MiA3MDRMMTkyIDcwNHpNNjQgMTYwQzY0IDE0Mi4zMzYgNzguMzM2IDEyOCA5NiAxMjhsODMyIDBDOTQ1LjY2NCAxMjggOTYwIDE0Mi4zMzYgOTYwIDE2MGwwIDBDOTYwIDE3Ny42NjQgOTQ1LjY2NCAxOTIgOTI4IDE5MmwtODMyIDBDNzguMzM2IDE5MiA2NCAxNzcuNjY0IDY0IDE2MEw2NCAxNjB6IiBwLWlkPSI1ODQ4Ij48L3BhdGg+PC9zdmc+"},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTUyMjkyNDAzNzgzIiBjbGFzcz0iaWNvbiIgc3R5bGU9IiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjUwMjEiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNNTc2IDE5MmwxOTIgMCAwIDU3Nkw1NzYgNzY4IDU3NiAxOTJNNTEyIDE5MmwwIDU3NmMwIDM1LjM5MiAyOC42MDggNjQgNjQgNjRsMTkyIDBjMzUuMzkyIDAgNjQtMjguNjA4IDY0LTY0TDgzMiAxOTJjMC0zNS4zOTItMjguNjA4LTY0LTY0LTY0TDU3NiAxMjhDNTQwLjYwOCAxMjggNTEyIDE1Ni42MDggNTEyIDE5Mkw1MTIgMTkyek0xOTIgMzg0bDAgMzg0YzAgMzUuMzkyIDI4LjYwOCA2NCA2NCA2NGwxMjggMGMzNS4zOTIgMCA2NC0yOC42MDggNjQtNjRMNDQ4IDM4NGMwLTM1LjM5Mi0yOC42MDgtNjQtNjQtNjRMMjU2IDMyMEMyMjAuNjA4IDMyMCAxOTIgMzQ4LjYwOCAxOTIgMzg0TDE5MiAzODR6TTY0IDkyOEM2NCA5NDUuNzI4IDc4LjMzNiA5NjAgOTYgOTYwbDgzMiAwYzE3LjY2NCAwIDMyLTE0LjI3MiAzMi0zMmwwIDBjMC0xNy42LTE0LjMzNi0zMi0zMi0zMmwtODMyIDBDNzguMzM2IDg5NiA2NCA5MTAuNCA2NCA5MjhMNjQgOTI4eiIgcC1pZD0iNTAyMiI+PC9wYXRoPjwvc3ZnPg=="},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTUyMzgyMTQ1ODE2IiBjbGFzcz0iaWNvbiIgc3R5bGU9IiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjM4Mzc1IiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgd2lkdGg9IjIwMCIgaGVpZ2h0PSIyMDAiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTM3OS43NzYgNjM1LjkwNGMzOS4zNiAzNS45NjggNDguMzIgNDEuMzQ0IDUwLjQ5Ni0yNS44NTYgMy45NjgtNDkuMTUyIDAtMTAzLjU1MiAwLTEwMy41NTIgMS40MDgtMy4wNzIgODYuNDY0LTM1LjAwOCAyMjcuMDcyIDI1Ljg1NiAxNDAuNTQ0IDYwLjkyOCAyMzUuNDU2IDI1MS4wMDggMjUyLjE2IDMxMC41MjggMS4zNDQgMzQuMzY4IDQ2LjE0NCAxMDAuNzM2IDUwLjQzMi0xLjM0NCAwLjU3Ni0xNjYuNjU2LTY0LjUxMi0zNDEuMTItMjMwLjMzNi00NDEuMTUyQzU3NC45NzYgMzA3LjA3MiA0NDYuNCAzMTYuNjA4IDQzMi4xOTIgMzIxLjQ3MmMtMC4yNTYgMS4zNDQtMC42NCAxLjg1Ni0xLjM0NCAxLjAyNC0wLjE5Mi0wLjI1NiAwLjM4NC0wLjY0IDEuMzQ0LTEuMDI0IDEuMjE2LTYuMjA4LTIuNDk2LTM4LjI3Mi0yLjg4LTk4LjU2IDIuMzY4LTU0LjE0NC0xMi4wOTYtNTUuODA4LTQ5LjUzNi0yNi45NDRDMzExLjE2OCAyNTIuMjg4IDEyOCA0MjcuMjY0IDEyOCA0MjcuMjY0UzMxMS4xNjggNTgwLjYwOCAzNzkuNzc2IDYzNS45MDR6IiBwLWlkPSIzODM3NiI+PC9wYXRoPjwvc3ZnPg=="},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTUyMzgyMzAwMzc0IiBjbGFzcz0iaWNvbiIgc3R5bGU9IiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjEzOTgiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNNzA4LjE2IDYzNS45MDRjLTM5LjM2IDM1Ljk2OC00OC4zMiA0MS4zNDQtNTAuNDk2LTI1Ljg1Ni0zLjk2OC00OS4xNTIgMC0xMDMuNTUyIDAtMTAzLjU1Mi0xLjQwOC0zLjA3Mi04Ni40NjQtMzUuMDA4LTIyNy4wNzIgMjUuODU2LTE0MC41NDQgNjAuOTI4LTIzNS4zOTIgMjUxLjAwOC0yNTIuMTYgMzEwLjUyOC0xLjM0NCAzNC4zNjgtNDYuMTQ0IDEwMC43MzYtNTAuNDMyLTEuNDA4LTAuNTc2LTE2Ni42NTYgNjQuNTEyLTM0MS4xMiAyMzAuMzM2LTQ0MS4xNTIgMTU0LjYyNC05My4yNDggMjgzLjI2NC04My43NzYgMjk3LjQwOC03OC44NDggMC4yNTYgMS4zNDQgMC42NCAxLjg1NiAxLjM0NCAxLjAyNCAwLjE5Mi0wLjI1Ni0wLjM4NC0wLjY0LTEuMzQ0LTEuMDI0LTEuMjE2LTYuMjA4IDIuNDk2LTM4LjI3MiAyLjg4LTk4LjU2LTIuMzY4LTU0LjE0NCAxMi4wOTYtNTUuODA4IDQ5LjUzNi0yNi45NDQgNjguNTQ0IDU2LjMyIDI1MS43NzYgMjMxLjM2IDI1MS43NzYgMjMxLjM2cy0xODMuMTY4IDE1My4yOC0yNTEuNzc2IDIwOC41NzZ6IiBwLWlkPSIxMzk5Ij48L3BhdGg+PC9zdmc+"},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTU5ODEyMTYyNDMxIiBjbGFzcz0iaWNvbiIgc3R5bGU9IiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjI1OTkiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNNTEyIDBDMjI5LjIzIDAgMCAyMjkuMjMgMCA1MTJzMjI5LjIzIDUxMiA1MTIgNTEyIDUxMi0yMjkuMjMgNTEyLTUxMlM3OTQuNzcgMCA1MTIgMHpNNTEyIDkyOGMtMjI5Ljc1IDAtNDE2LTE4Ni4yNS00MTYtNDE2UzI4Mi4yNSA5NiA1MTIgOTZzNDE2IDE4Ni4yNSA0MTYgNDE2Uzc0MS43NSA5MjggNTEyIDkyOHoiIHAtaWQ9IjI2MDAiIGZpbGw9IiMwMDAwMDAiPjwvcGF0aD48cGF0aCBkPSJNNTM3LjY0IDM0My40NTJjNDcuMDc0IDAgODMuMjY2LTM3LjUyOCA4My4yNjYtNzguMDcyIDAtMzIuNDYtMjAuODMyLTYwLjg3OC02Mi40OTYtNjAuODc4LTU0LjgxNiAwLTgyLjE3OCA0NC42MTgtODIuMTc4IDc3LjExQzQ3NS4xNDQgMzIwLjEzMiA0OTguMTUyIDM0My40NTIgNTM3LjY0IDM0My40NTJ6IiBwLWlkPSIyNjAxIiBmaWxsPSIjMDAwMDAwIj48L3BhdGg+PHBhdGggZD0iTTUzMy4xNjIgNzI4LjkzNGMtNy42NDggMC0xMC45MTQtMTAuMTM2LTMuMjY0LTM5LjU1bDQzLjI1LTE2Ni40MDZjMTYuMzg2LTYwLjg0OCAxMC45NDQtMTAwLjM5OC0yMS45Mi0xMDAuMzk4LTM5LjQ1NiAwLTEzMS40NTggMzkuODMtMjExLjQ1OCAxMDcuNzk4bDE2LjQxNiAyNy4zOTJjMjUuMjQ2LTE3LjI1NiA2Ny45MDYtMzQuNzYyIDc3Ljc5Mi0zNC43NjIgNy42NDggMCA2LjU2IDEwLjE2OCAwIDM1LjUwOGwtMzcuNzQ2IDE1OC4yOTJjLTIzLjAwOCA4OS4yNjYgMS4wODggMTA5LjUzOCAzMy45ODQgMTA5LjUzOCAzMi44NjQgMCAxMTcuODA4LTMwLjQ3IDE5NS41Ny0xMDkuNjMybC0xOC42NTYtMjUuMzRDNTc1LjM1NCA3MTYuNzE0IDU0My4wNSA3MjguOTM0IDUzMy4xNjIgNzI4LjkzNHoiIHAtaWQ9IjI2MDIiIGZpbGw9IiMwMDAwMDAiPjwvcGF0aD48L3N2Zz4="},function(e,t,n){var a=n(136);"string"==typeof a&&(a=[[e.i,a,""]]);var i={transform:void 0};n(4)(a,i);a.locals&&(e.exports=a.locals)},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,"/*\n * @Author: yanxbm \n * @Date: 2018-11-19 19:23:24 \n * @Last Modified by: yanxbm\n * @Last Modified time: 2019-05-21 09:45:26\n */\n.html {\n  height: 100% !important;\n}\n.editorWrapper {\n  height: 100%;\n  overflow: hidden;\n  position: relative;\n}\n.canvasViewport {\n  height: 100%;\n  -webkit-box-flex: 1;\n      -ms-flex: 1 0 auto;\n          flex: 1 0 auto;\n  position: relative;\n  background-color: #fff;\n  overflow: hidden;\n}\n.canvasViewport * {\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.canvasViewport ul,\n.canvasViewport ol {\n  list-style-type: none;\n  margin: 0;\n  padding: 0;\n}\n.canvasViewport .canvas_selector {\n  background-color: rgba(0, 192, 255, 0.2);\n  border: solid 2px #00c0ff;\n  position: absolute;\n  z-index: 999;\n}\n.canvasArtboard {\n  position: relative;\n  -webkit-transform-origin: 0 0;\n          transform-origin: 0 0;\n  overflow: hidden;\n  -webkit-transition: -webkit-transform 150ms linear;\n  transition: -webkit-transform 150ms linear;\n  transition: transform 150ms linear;\n  transition: transform 150ms linear, -webkit-transform 150ms linear;\n}\n.canvasArtboard .relative-surface {\n  position: relative;\n}\n.svgLand {\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n",""])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=f(n(2)),o=n(1),l=n(7),s=n(27),u=n(138),c=n(0),p=f(n(139)),d=f(n(59));function f(e){return e&&e.__esModule?e:{default:e}}n(140);var m=o.base.NCModal,g=o.base.NCButton,y=o.base.NCFormControl,b=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleTabClick=function(e,t,a){n.props.changeTab(e,t,a)},n.closeBppSaveTip=function(){n.setState({showBppSaveModal:!1})},n.handleKeyDown=function(e){var t=e.altKey;return t&&89==e.keyCode||13==e.keyCode?("bpp"==n.flowType&&n.state.inputBusiCodeAndNameModal&&n.busiFlowConfirm(),!1):t&&78==e.keyCode||27==e.keyCode?("bpp"==n.flowType&&n.setState({inputBusiCodeAndNameModal:!1}),!1):void 0},n.closeTab=function(e,t,a,i){if(0!=a){e.stopPropagation();var r=n.props.flows,l=r.displayFlowIds,s=(r.subFlows,i>=a?i-1:i),u=l[s];n.props.closeTab(t,u,a,s)}else(0,o.toast)({title:c.multiLang["tab-000000"],color:"warning"})},n.save=function(){if("bpp"!=n.flowType)(0,u.saveData)(n.flowType);else{var e=c.attributesList.get("busiflow");if(!e.busicode||!e.businame)return void n.setState({busicode:e.busicode,businame:e.businame,inputBusiCodeAndNameModal:!0});1==e.validity?n.setState({showBppSaveModal:!0}):""==e.validity?(0,u.saveData)(n.flowType,!0):(0,u.saveData)(n.flowType,!1)}},n.coverOldVersion=function(){n.setState({showBppSaveModal:!1}),(0,u.saveData)(n.flowType,!1)},n.createNewVersion=function(){n.setState({showBppSaveModal:!1}),(0,u.saveData)(n.flowType,!0)},n.cancel=function(){console.log("cancel11"),n.setState({showCancelModal:!0})},n.busiFlowChange=function(e,t){"businame"==t&&n.setState({businame:e}),"busicode"==t&&n.setState({busicode:e})},n.busiFlowConfirm=function(){n.state.busicode&&n.state.businame?(c.attributesList.get("busiflow").busicode=n.state.busicode,c.attributesList.get("busiflow").businame=n.state.businame,n.setState({inputBusiCodeAndNameModal:!1},(function(){n.save()}))):(0,o.toast)({title:c.multiLang["tab-000016"],color:"warning"})},n.cancelPageTo=function(){c.urlConst.set({shouldUnload:!0}),console.log("confirm_cancel");var e=c.flowContext.get(),t=e.billType,a=e.billPK,i=e.flowPackageId,r=e.isLightApp,l=e.metaclassid,s=e.pk_org,u=e.openNode,p=e.isShowDis,d=e.pageIndex,f=e.pageSize,m=e.pk_wf_def,g=e.sourceType;"bpp"!=n.flowType?o.pageTo.linkTo("/uap/wfm/approveFlowDesign/list/index.html",{billType:t,billPK:a,flowPackageId:i,isLightApp:r,metaclassid:l,pk_org:s,openNode:u,isShowDis:p,pageIndex:d,pageSize:f,sourceType:g,focus_pk:m,operation:"cancel",pagecode:"101650list"}):o.pageTo.linkTo("/uap/wfm/businessFlowDesign/list/index.html",{pagecode:"101654designlist"})},n.flowType=c.urlConst.get("flowType"),n.state={showCancelModal:!1,showBppSaveModal:!1,inputBusiCodeAndNameModal:!1,busicode:"",businame:""},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentWillMount",value:function(){window.document.addEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this;console.log("tab");var t=r.default.createElement(m,{size:"sm",show:this.state.showCancelModal},r.default.createElement(m.Header,null,r.default.createElement(m.Title,null,c.multiLang["tab-000001"])),r.default.createElement(m.Body,null,r.default.createElement("div",{className:"prompt-body"},r.default.createElement("p",{className:"prompt-title"},r.default.createElement("i",{className:"icon iconfont icon-tixing-copy"}),r.default.createElement("span",null,c.multiLang["tab-000004"])),r.default.createElement("p",{className:"prompt-content"},c.multiLang["tab-000002"]))),r.default.createElement(m.Footer,null,r.default.createElement(g,{fieldid:"yes",onClick:this.cancelPageTo,colors:"primary"},c.multiLang["tab-000020"]),r.default.createElement(g,{fieldid:"no",onClick:function(){return e.setState({showCancelModal:!1})},style:{marginRight:10},colors:"secondary"},c.multiLang["tab-000004"])));if("bpp"!=this.props.flowType){var n=this.props.activeIndex||0,i=this.props.flows.displayFlowIds;return r.default.createElement("div",{className:"mainWrapper"},r.default.createElement(p.default,{saveRef:d.default.saveRef,activeKey:n,save:this.save,cancel:this.cancel,getRef:d.default.getRef},i&&i.map((function(t,i){var o=c.flowContext.get().billTypeName+"-"+c.attributesList.get(t).general.name,l=function(e,t){for(var n=0,a="",i=0;i<e.length;i++)if(e.charCodeAt(i)>128?n+=2:n++,a+=e.charAt(i),n>t)return a+"...";return a}(o,10),s={};return i==n&&(s.ref=d.default.saveRef("activeTab")),r.default.createElement("button",a({title:o,className:"tab "+(i==n?"active  nc-theme-sp-sle-font-c":"")},s,{onClick:function(){return e.handleTabClick(t,o,i)}}),l,r.default.createElement("span",{className:"closeIcon"},r.default.createElement("a",{className:"closeTab",title:c.multiLang["tab-000005"],onClick:function(a){return e.closeTab(a,t,i,n)}},"x")))}))),this.props.children,t)}return r.default.createElement("div",{className:"mainWrapper"},r.default.createElement(p.default,{saveRef:d.default.saveRef,save:this.save,cancel:this.cancel,getRef:d.default.getRef}),this.props.children,t,r.default.createElement(m,{size:"sm",show:this.state.showBppSaveModal,onHide:function(){return e.setState({showBppSaveModal:!1})}},r.default.createElement(m.Header,{closeButton:!0},r.default.createElement(m.Title,null,c.multiLang["tab-000015"])),r.default.createElement(m.Body,null,r.default.createElement("div",{style:{padding:"30px 40px"}},r.default.createElement("i",{className:"icon iconfont icon-tixing-copy"}),c.multiLang["tab-000014"])),r.default.createElement(m.Footer,null,r.default.createElement(g,{fieldid:"yes",onClick:this.createNewVersion,style:{marginRight:10},colors:"primary"},c.multiLang["tab-000003"]),r.default.createElement(g,{fieldid:"no",onClick:this.coverOldVersion,style:{marginRight:10},colors:"secondary"},c.multiLang["tab-000021"]),r.default.createElement(g,{fieldid:"cancel",onClick:function(){return e.setState({showBppSaveModal:!1})},colors:"secondary"},c.multiLang["tab-000004"]))),r.default.createElement(m,{size:"sm",show:this.state.inputBusiCodeAndNameModal,onHide:function(){return e.setState({inputBusiCodeAndNameModal:!1})}},r.default.createElement(m.Header,{closeButton:!0},r.default.createElement(m.Title,null,c.multiLang["tab-000017"])),r.default.createElement(m.Body,null,r.default.createElement("div",{className:"inputContentBox"},r.default.createElement("span",null,c.multiLang["tab-000018"],r.default.createElement("font",{color:"red"},"*")),r.default.createElement(y,{autoFocus:!0,onChange:function(t){return e.busiFlowChange(t,"busicode")},value:this.state.busicode})),r.default.createElement("div",{className:"inputContentBox"},r.default.createElement("span",null,c.multiLang["tab-000019"],r.default.createElement("font",{color:"red"},"*")),r.default.createElement(y,{onChange:function(t){return e.busiFlowChange(t,"businame")},value:this.state.businame}))),r.default.createElement(m.Footer,null,r.default.createElement(g,{colors:"primary",onClick:this.busiFlowConfirm},c.multiLang["tab-000020"]),r.default.createElement(g,{colors:"secondary",onClick:function(){e.setState({inputBusiCodeAndNameModal:!1})}},c.multiLang["tab-000013"]))))}}]),t}(r.default.PureComponent);t.default=(0,l.connect)((function(e){var t=c.urlConst.get("flowType");return{flowType:t,flows:e.flows,activeIndex:"bpp"==t?0:e.flows.activeIndex}}),{closeTab:s.closeTab,changeTab:s.changeTab})(b)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.saveData=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=n(1),r=n(16),o=n(0),l=n(6),s=function(e){if("start"==e.type){if(!e.linksTo||0==e.linksTo.length)return e.id}else if("finish"==e.type){if(!e.linksFrom||0==e.linksFrom.length)return e.id}else if(!e.linksTo||!e.linksFrom||0==e.linksTo.length||0==e.linksFrom.length)return e.id};t.saveData=function(e,t){if(console.log("flowType",e),"bpp"==e){var n=r.store.getState().entity;console.log("bpp_save",n);for(var u=!1,c=!1,p={},d=[],f=0;f<n.length;f++){var m=n[f];if("start"==m.type&&(u=!0),"finish"==m.type&&(c=!0),0==m.linksFrom.length&&0==m.linksTo.length)return void(0,i.toast)({title:o.multiLang["tab-000011"],color:"warning"});if("bill"==m.type||"router"==m.type||"drive"==m.type){if(0==m.linksFrom.length||0==m.linksTo.length)return void(0,i.toast)({title:o.multiLang["tab-000007"],color:"warning"});"bill"==m.type&&(1==m.linksTo.length&&("bpp_link_wb"==m.linksTo[0].type&&(0,i.toast)({title:o.multiLang["tab-000007"],color:"warning"}),"vo"==(0,l.getEntity)(n,m.linksTo[0].target).type&&(0,i.toast)({title:o.multiLang["tab-000007"],color:"warning"})),1==m.linksFrom.length&&"bpp_link_wb"==m.linksFrom[0].lineType&&(0,i.toast)({title:o.multiLang["tab-000007"],color:"warning"}))}d.push(m),p[m.id]=o.attributesList.get(m.id);for(var g=m.linksTo,y=0;y<g.length;y++){var b=g[y];p[b.linkId]=o.attributesList.get(b.linkId)}}p.busiflow=o.attributesList.get("busiflow"),u&&c||(0,i.toast)({title:o.multiLang["tab-000008"],color:"warning"});var v={actionType:"save",isNew:t,entity:d,attributes:p};return console.log("bpp_sendData",v),void(0,i.ajax)({url:"/nccloud/riart/busiflow/busiflowButtonAction.do",method:"POST",data:v,success:function(e){var t=e.data;"success"==t.success?((0,i.toast)({content:o.multiLang["tab-000023"],color:"success"}),o.urlConst.set({shouldUnload:!0}),i.pageTo.linkTo("/uap/wfm/businessFlowDesign/list/index.html",{pagecode:"101654designlist"})):(0,i.toast)({content:o.multiLang["tab-000024"]+t.errMsg,color:"danger"})},error:function(e){alert(e.message)}})}var h=r.store.getState(),w=h.flows,k=h.metaEntity,E=r.store.getState().entity,A=w.id,I=o.subflowsList.getByFlowId(A);I[A].entity=E,I[A].metaEntity=k;var C=o.subflowsList.data();console.log("allFlows",C);var T=[];"error_data"!=function e(t,n){for(var a=[],r=0;r<t.length;r++){var l=t[r];if(""!=l.entityId&&0!=l.entityId.length){var u={},c={};u.flowId=l.flowId,u.flowName=l.flowName,u.flowType=o.urlConst.get("flowType"),u.entity=l[l.flowId].entity;var p=u.entity,d=p.some((function(e){return"start"==e.type})),f=p.some((function(e){return"finish"==e.type}));if(!d||!f)return(0,i.toast)({title:o.multiLang["tab-000008"],color:"warning"}),"error_data";if(0==p.length)return(0,i.toast)({title:o.multiLang["tab-000009"],color:"warning"}),"error_data";for(var m=0;m<p.length;m++){var g=p[m],y=g.id,b=s(g);if(console.log("canSave",b),"subflow"==g.type){if(g.subflowId&&!o.subflowsList.getByEntityId(g.id)&&console.log("子流程未编辑原样返回"),!g.subflowId&&!o.subflowsList.getByEntityId(g.id))return(0,i.toast)({title:o.multiLang["tab-000009"]+l.flowId,color:"warning"}),"error_data";o.subflowsList.getByEntityId(g.id)&&a.push(o.subflowsList.getByEntityId(g.id))}if(b)return(0,i.toast)({title:o.multiLang["tab-000010"],color:"warning"}),console.warn("流程定义中不能存在孤立的活动"+b),"error_data";var v=o.attributesList.get(y);if(!v)return console.log("没有图元 "+y+" 的属性"),"error_data";c[y]=v;var h=g.linksTo;if(h&&h.length)for(var w=0;w<h.length;w++){var k=h[w].linkId,E=o.attributesList.get(k);if(!E)return console.log("没有连接线 "+k+" 的属性"),"error_data";c[k]=E}}var A=o.attributesList.get(l.flowId);if(!A)return"error_data";c[l.flowId]=A,u.attributes=c,n.push(u)}}if(a.length>0)return e(a,n)}(C.slice(0,1),T)?(console.log("sendData",T),(0,i.ajax)({url:"/nccloud/riawf/pf/approveFlowMngSave.do",method:"POST",data:a({data:T},o.flowContext.get(),{state:o.urlConst.get("state"),edittype:o.urlConst.get("edittype")}),success:function(e){console.log("success_send_data");var t=e.data;if(t&&"success"==t.result){o.urlConst.set({shouldUnload:!0});var n=t.focus_pk,a=o.flowContext.get(),r=a.billType,l=a.billPK,s=a.flowPackageId,u=a.isLightApp,c=a.metaclassid,p=a.pk_org,d=a.openNode,f=a.isShowDis,m=a.pageIndex,g=a.pageSize,y=a.sourceType;i.pageTo.linkTo("/uap/wfm/approveFlowDesign/list/index.html",{billType:r,billPK:l,flowPackageId:s,isLightApp:u,metaclassid:c,pk_org:p,openNode:d,isShowDis:f,pageIndex:m,pageSize:g,sourceType:y,focus_pk:n,operation:"save",pagecode:"101650list"})}else(0,i.toast)({content:t.error,color:"danger"})},error:function(e){(0,i.toast)({content:e.message,color:"danger"})}})):console.log("return")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(n(2)),r=n(1),o=n(6),l=n(0);var s=r.base.NCButton,u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.prevTransitionEnd=function(e){if("opacity"===e.propertyName){var t=n.props.getRef("container");n.scrollToActiveTab({target:t,currentTarget:t})}},n.scrollToActiveTab=function(e){var t=n.props.getRef("activeTab"),a=n.props.getRef("navWrap");if((!e||e.target===e.currentTarget)&&t){var i=n.isNextPrevShown()&&n.lastNextPrevShown;if(n.lastNextPrevShown=n.isNextPrevShown(),i){var r=n.getScrollWH(t),o=n.getOffsetWH(a),l=n.offset,s=n.getOffsetLT(a),u=n.getOffsetLT(t);s>u?(l+=s-u,n.setOffset(l)):s+o<u+r&&(l-=u+r-(s+o),n.setOffset(l))}}},n.prev=function(e){n.props.onPrevClick(e);var t=n.props.getRef("navWrap"),a=n.getOffsetWH(t),i=n.offset;n.setOffset(i+a)},n.next=function(e){n.props.onPrevClick(e);var t=n.props.getRef("navWrap"),a=n.getOffsetWH(t),i=n.offset;n.setOffset(i-a)},n.save=function(e){return n.props.save()},n.cancel=function(e){return n.props.cancel()},n.offset=0,n.state={next:!1,prev:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){this.componentDidUpdate(),this.setNextPrev(),this.scrollToActiveTab()}},{key:"componentDidUpdate",value:function(e){var t=this.props;if(e&&e.tabBarPosition!==t.tabBarPosition)this.setOffset(0);else{var n=this.setNextPrev();this.isNextPrevShown(this.state)!==this.isNextPrevShown(n)?this.setState({},this.scrollToActiveTab):e&&t.activeKey===e.activeKey||this.scrollToActiveTab()}}},{key:"setPrev",value:function(e){this.state.prev!==e&&this.setState({prev:e})}},{key:"setNext",value:function(e){this.state.next!==e&&this.setState({next:e})}},{key:"isNextPrevShown",value:function(e){return e?e.next||e.prev:this.state.next||this.state.prev}},{key:"setNextPrev",value:function(){var e=this.props.getRef("nav"),t=this.getScrollWH(e),n=this.getOffsetWH(this.props.getRef("container"))+1,a=this.getOffsetWH(this.props.getRef("navWrap")),i=this.offset,r=n-t,o=this.state,l=o.next,s=o.prev;if(r>=0)l=!1,this.setOffset(0,!1),i=0;else if(r<i)l=!0;else{l=!1;var u=a-t;this.setOffset(u,!1),i=u}return s=i<0,this.setNext(l),this.setPrev(s),{next:l,prev:s}}},{key:"setOffset",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Math.min(0,e);if(this.offset!==n){this.offset=n;var a={},i=this.props.tabBarPosition,r=this.props.getRef("nav").style,l=(0,o.isTransformSupported)(r);a="left"==i||"right"==i?l?{value:"translate3d(0, "+n+"px, 0)"}:{name:"top",value:n+"px"}:l?{value:"translate3d("+n+"px, 0, 0)"}:{name:"left",value:n+"px"},l?(0,o.setTransform)(r,a.value):r[a.name]=a.value,t&&this.setNextPrev()}}},{key:"getOffsetWH",value:function(e){var t=this.props.tabBarPosition,n="offsetWidth";return"left"!=t&&"right"!=t||(n="offsetHeight"),e[n]}},{key:"getScrollWH",value:function(e){var t=this.props.tabBarPosition,n="scrollWidth";return"left"!=t&&"right"!=t||(n="scrollHeight"),e[n]}},{key:"getOffsetLT",value:function(e){var t=this.props.tabBarPosition,n="left";return"left"!=t&&"right"!=t||(n="top"),e.getBoundingClientRect()[n]}},{key:"render",value:function(){var e=this.state,t=e.prev,n=e.next,a=this.props.scrollAnimated,r=t||n,o=i.default.createElement("span",{onClick:t?this.prev:null,className:"tab-prev "+(t?"tab-btn-show":"tab-btn-disabled tab-btn-hide"),onTransitionEnd:this.prevTransitionEnd},i.default.createElement("i",{className:"iconfont icon-jiantouzuo"})),u=i.default.createElement("span",{onClick:n?this.next:null,className:"tab-next "+(n?"tab-btn-show":"tab-btn-disabled tab-btn-hide")},i.default.createElement("i",{className:"iconfont icon-jiantouyou"})),c=a?"nav-animated":"nav-no-animated";return i.default.createElement("div",{className:"tabBox",fieldid:"tabs-area"},o,i.default.createElement("div",{className:"nav-container "+(r?"nav-container-scrolling":""),ref:this.props.saveRef("container")},i.default.createElement("div",{className:"nav-wrap",ref:this.props.saveRef("navWrap")},i.default.createElement("div",{className:"nav-scroll"},i.default.createElement("div",{className:c,ref:this.props.saveRef("nav")},this.props.children)))),i.default.createElement("span",{className:"prev-next-btns"}),u,i.default.createElement("div",{className:"btnBox"},i.default.createElement(s,{size:"sm",colors:"primary",fieldid:"save-btn",onClick:this.save},l.multiLang["tab-000012"]),i.default.createElement(s,{size:"sm",fieldid:"cancel-btn",onClick:this.cancel},l.multiLang["tab-000013"])))}}]),t}(i.default.Component);t.default=u,u.defaultProps={tabBarPosition:"top",onPrevClick:function(){},onNextClick:function(){},scrollAnimated:!0}},function(e,t,n){var a=n(141);"string"==typeof a&&(a=[[e.i,a,""]]);var i={transform:void 0};n(4)(a,i);a.locals&&(e.exports=a.locals)},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,"/*\n * @Author: yanxbm \n * @Date: 2018-12-10 10:51:07 \n * @Last Modified by: yanxbm\n * @Last Modified time: 2019-05-13 19:21:31\n */\n.mainWrapper {\n  height: 100%;\n  overflow: hidden;\n}\n.tabBox {\n  background: #ECEFF5;\n  padding: 5px 5px 0;\n  border-bottom: 1px solid #d0d0d0;\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n  height: 35px;\n  border-radius: 3px 3px 0 0;\n  position: relative;\n}\n.tabBox .nav-container {\n  width: 80%;\n  display: -webkit-inline-box;\n  display: -ms-inline-flexbox;\n  display: inline-flex;\n}\n.tabBox .nav-container .nav-wrap {\n  overflow: hidden;\n}\n.tabBox .nav-container .nav-wrap .nav-scroll {\n  border-radius: 3px 3px 0 0;\n  white-space: nowrap;\n  overflow: hidden;\n}\n.tabBox .nav-container .nav-wrap .nav-scroll .nav-animated {\n  display: inline-block;\n  position: relative;\n  transition: transform 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), -webkit-transform 0.3s cubic-bezier(0.645, 0.045, 0.355, 1);\n}\n.tabBox .cancelBtn,\n.tabBox .saveBtn {\n  cursor: pointer;\n  outline: none;\n  height: 25px;\n  padding: 3px 7px;\n  border: none;\n  border-radius: 2px;\n  color: #555;\n  font-size: 12px;\n  -webkit-transition: background-color 0.3s ease;\n  transition: background-color 0.3s ease;\n}\n.tabBox .btnBox {\n  display: -webkit-inline-box;\n  display: -ms-inline-flexbox;\n  display: inline-flex;\n  position: absolute;\n  top: 3px;\n  right: 8px;\n}\n.tabBox .btnBox .nc-button-wrapper {\n  height: 28px;\n  padding: 0 5px;\n}\n.tabBox .saveBtn {\n  background: #E14C46;\n  color: #fff;\n  margin-right: 6px;\n}\n.tabBox .saveBtn:hover {\n  background: #d7332c;\n}\n.tabBox .cancelBtn {\n  background: #fff;\n}\n.tabBox .cancelBtn:hover {\n  color: #E14C46;\n}\n.tabBox .tab-prev,\n.tabBox .tab-next {\n  cursor: pointer;\n  margin-right: 5px;\n  color: #dfe8dd;\n  -webkit-transition: opacity 0.3s cubic-bezier(0.645, 0.045, 0.355, 1);\n  transition: opacity 0.3s cubic-bezier(0.645, 0.045, 0.355, 1);\n}\n.tabBox .tab-prev i,\n.tabBox .tab-next i {\n  font-size: 12px;\n  color: #666666;\n}\n.tabBox .tab-prev.tab-btn-disabled,\n.tabBox .tab-next.tab-btn-disabled {\n  cursor: not-allowed;\n}\n.tabBox .tab-prev.tab-btn-show,\n.tabBox .tab-next.tab-btn-show {\n  visibility: visible;\n  opacity: 1;\n}\n.tabBox .tab-prev.tab-btn-hide,\n.tabBox .tab-next.tab-btn-hide {\n  visibility: hidden;\n  opacity: 0;\n}\n.tabBox .tab-next {\n  margin-left: 5px;\n}\n.tabBox .tab {\n  display: inline;\n  border: none;\n  border-bottom: 1px solid #d0d0d0;\n  border-radius: 3px 3px 0 0;\n  padding: 4px 7px;\n  margin-right: 4px;\n  vertical-align: middle;\n  text-align: center;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  background: #FAFAFA;\n  color: #555555;\n  outline: none;\n  width: 110px;\n  height: 30px;\n  position: relative;\n  overflow: hidden;\n  white-space: nowrap;\n  -webkit-transition: color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), background-color 0.3s ease;\n  transition: color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), background-color 0.3s ease;\n}\n.tabBox .tab .closeIcon {\n  position: absolute;\n  width: 50px;\n  height: 25px;\n  right: 0;\n  top: 0;\n  border-top-right-radius: 3px;\n  display: none;\n}\n.tabBox .tab .closeIcon .closeTab {\n  position: absolute;\n  top: 8px;\n  right: 2px;\n  cursor: pointer;\n  color: #8F8F8F;\n  font-size: 12px;\n  width: 14px;\n  height: 14px;\n  line-height: 13px;\n  text-align: center;\n  border-radius: 50%;\n  -webkit-transition: background-color 0.3s ease;\n  transition: background-color 0.3s ease;\n}\n.tabBox .tab .closeIcon .closeTab:hover {\n  background: #eee;\n}\n.tabBox .tab.active {\n  background: #fff;\n  border-bottom: none;\n  color: #E14C46;\n}\n.tabBox .tab.active .closeIcon {\n  background-image: -webkit-gradient(linear, left top, right top, color-stop(50%, rgba(255, 255, 255, 0.2)), color-stop(56%, rgba(255, 255, 255, 0.7)), color-stop(75%, #ffffff));\n  background-image: linear-gradient(to right, rgba(255, 255, 255, 0.2) 50%, rgba(255, 255, 255, 0.7) 56%, #ffffff 75%);\n  display: inline;\n}\n.tabBox .tab:hover {\n  background: #e6e6e6;\n}\n.tabBox .tab.active:hover {\n  background: #fff;\n}\n.inputContentBox {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  margin: 5px;\n}\n.inputContentBox .u-form-control-wrapper {\n  width: 60%;\n  margin-left: 10px;\n}\n.icon-tixing-copy {\n  color: #ff8b00;\n  font-size: 25px;\n  margin-right: 15px;\n}\n.u-modal-body .prompt-body {\n  padding: 16px 25px 21px 36px;\n}\n.u-modal-body .prompt-body .prompt-title {\n  margin-bottom: 10px;\n}\n.u-modal-body .prompt-body .prompt-title span {\n  font-size: 16px;\n  color: rgba(0, 0, 0, 0.65);\n}\n.u-modal-body .prompt-body .prompt-content {\n  padding-left: 40px;\n  font-size: 13px;\n  color: #666;\n}\n",""])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=p(n(2)),r=n(7),o=p(n(60)),l=n(25),s=n(24),u=p(n(61)),c=n(0);function p(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n(143);var g=function(e){var t=void 0,n=function(n){return function(){clearTimeout(t),t=setTimeout((function(){e.addEntityHelper(n)}),80)}},a=function(n){return function(){clearTimeout(t),e.addEntityHelper(n)}};return i.default.createElement("div",{className:"panelLg",fieldid:"dropdown"},i.default.createElement("ul",null,e.entityTypeNames.map((function(e){return i.default.createElement("li",{fieldid:e,key:e,onDoubleClick:a(e),onClick:n(e)},i.default.createElement(o.default,{name:e,svgSize:"30px",label:c.multiLang["panel-000000"]+" "+e}),i.default.createElement("p",null,c.panelItemMap[e]))}))))},y=function(e){var t=e.workflowActionList,n=e.addEntityHelper;return i.default.createElement("div",{className:"others"},i.default.createElement("ul",null,t&&t.map((function(e){return i.default.createElement("li",{fieldid:e.gadget_name,key:e.pk_workflowgadget,onMouseDown:function(){return n("auto-"+e.pk_workflowgadget)}},e.gadget_name)}))))},b=function(e){function t(e){d(this,t);var n=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleFold=function(){n.setState({isFold:!n.state.isFold})},n.state={isFold:n.props.isFold||!1},n}return m(t,e),a(t,[{key:"render",value:function(){var e=this.props,t=e.count,n=e.itemH,a=e.offset,r=e.maxH,o=this.state.isFold,l=a?a+t*n:t*n,s={height:o?0:l||"inherit"};return r&&(s.maxHeight=r,s.overflowY=l>r?"auto":"hidden"),i.default.createElement("div",{className:"editor-collapse clearfix "+(o?"fold":"")},i.default.createElement("div",{className:"editor-collapse-title",onClick:this.toggleFold},i.default.createElement("span",null,this.props.title),i.default.createElement("i",null)),i.default.createElement("div",{className:"editor-collapse-content",fieldid:"dropdown"},i.default.createElement("div",{className:"content-box",style:s},this.props.children)))}}]),t}(i.default.PureComponent),v=function(e){function t(e){d(this,t);var n=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.minToolSize=40,n.niceToolSize=50,n.entityTypeNames=[],n.shouldUpdate=!0,n.addEntityHelper=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Task",t=n.props.anchoredEntity,a=t.type,i=t.id,r=t.isAnchored;a&&a==e||(a&&r&&i&&n.props.removeEntity(i,a),n.props.stopCopying({multiSelect:!1}),c.multiSelectList.clearAllSelected(),n.props.addEntity(n.props.defaultEntity({entityType:e})))},n.foldLeft=function(){n.setState({isFold:!0},(function(){return setTimeout((function(){return n.props.resetViewport()}),400)}))},n.unfoldLeft=function(){n.setState({isFold:!1},(function(){return setTimeout((function(){return n.props.resetViewport()}),400)}))},n.others=function(){var e=c.WorkflowGadgetlist.get();return Array.isArray(e)&&e.length>0?i.default.createElement(b,{title:""+c.multiLang["panel-000001"],isFold:!0,count:e.length,itemH:25,offset:4,maxH:250},i.default.createElement(y,{addEntityHelper:n.addEntityHelper,workflowActionList:e})):""},n.state={isFold:!1},n}return m(t,e),a(t,[{key:"componentWillReceiveProps",value:function(e){this.entityTypeNames=Object.keys(e.entityTypes)}},{key:"shouldComponentUpdate",value:function(e,t){if(this.state.isFold!=t.isFold||this.entityTypeNames.length!=Object.keys(this.props.entityTypes).length||this.shouldUpdate)return!0}},{key:"componentWillUpdate",value:function(){this.shouldUpdate=!1}},{key:"render",value:function(){console.log("panel");var e=this.state.isFold,t=i.default.createElement("div",{className:"editorLeft-blank"});return i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{className:"editorLeft "+(e?"fold":"")},t,i.default.createElement("div",{className:"leftContentBox"},i.default.createElement(b,{title:""+c.multiLang["panel-000002"],isFold:!1,count:this.entityTypeNames.length,itemH:58,offset:1},i.default.createElement(g,{addEntityHelper:this.addEntityHelper,entityTypeNames:this.entityTypeNames})),"workflow"==c.urlConst.get("flowType")&&this.others()),e?i.default.createElement("div",{onClick:this.unfoldLeft,className:"leftFoldIcon"}):i.default.createElement("div",{onClick:this.foldLeft,className:"leftFoldIcon unfold"})))}}]),t}(i.default.PureComponent);t.default=(0,r.connect)((function(e){return{entityTypes:e.config.entityTypes,defaultEntity:(0,u.default)(e),anchoredEntity:e.canvas.anchoredEntity}}),{addEntity:l.addEntity,removeEntity:l.removeEntity,stopCopying:s.stopCopying,resetViewport:s.resetViewport})(v)},function(e,t,n){var a=n(144);"string"==typeof a&&(a=[[e.i,a,""]]);var i={transform:void 0};n(4)(a,i);a.locals&&(e.exports=a.locals)},function(e,t,n){var a=n(62);(e.exports=n(3)(!1)).push([e.i,"/*\n * @Author: yanxbm \n * @Date: 2018-11-29 11:19:08 \n * @Last Modified by: yanxbm\n * @Last Modified time: 2019-04-19 19:55:21\n */\n.editorLeft {\n  width: 6.392%;\n  -webkit-transition: width 150ms;\n  transition: width 150ms;\n  position: relative;\n  float: left;\n  margin-right: 4px;\n  border-radius: 3px;\n  height: 100%;\n  background: #fff;\n}\n.editorLeft.fold {\n  margin-right: 0;\n  width: 0;\n}\n.editorLeft.fold .leftContentBox {\n  -webkit-transform: scaleX(0);\n          transform: scaleX(0);\n  -webkit-transform-origin: 0% 0%;\n          transform-origin: 0% 0%;\n  opacity: 0;\n}\n.editorLeft.fold .leftFoldIcon {\n  left: 0;\n  background-image: url("+a(n(145))+");\n}\n.editorLeft .leftContentBox {\n  position: relative;\n  z-index: 200;\n  opacity: 1;\n  -webkit-transform: scaleX(1);\n          transform: scaleX(1);\n  -webkit-transform-origin: 0% 0%;\n          transform-origin: 0% 0%;\n  -webkit-transition: opacity 150ms, -webkit-transform 150ms;\n  transition: opacity 150ms, -webkit-transform 150ms;\n  transition: transform 150ms, opacity 150ms;\n  transition: transform 150ms, opacity 150ms, -webkit-transform 150ms;\n}\n.editorLeft .editorLeft-blank {\n  position: absolute;\n  top: 36px;\n  left: 0;\n  height: calc(100% - 36px);\n  width: 100%;\n  z-index: 100;\n  background-color: #fff;\n  border-bottom-left-radius: 3px;\n  border-bottom-right-radius: 3px;\n}\n.editorLeft .leftFoldIcon {\n  cursor: pointer;\n  position: absolute;\n  left: calc(100% - 11px);\n  top: 30%;\n  z-index: 90;\n  width: 14px;\n  height: 38px;\n  background-position: center center;\n  background-size: cover;\n  background-image: url("+a(n(146))+");\n  -webkit-transition: left 170ms linear;\n  transition: left 170ms linear;\n}\n.editorLeft .leftFoldIcon.unfold {\n  left: 100%;\n}\n.editorLeft .others {\n  width: 100%;\n  position: relative;\n  z-index: 100;\n}\n.editorLeft .others ul {\n  height: -webkit-fit-content;\n  height: -moz-fit-content;\n  height: fit-content;\n}\n.editorLeft .others ul li:first-child {\n  margin-top: 4px;\n}\n.editorLeft .others ul li {\n  cursor: pointer;\n  color: #555555;\n  width: 85%;\n  height: 17px;\n  line-height: 17px;\n  margin: 0 auto;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  font-size: 12px;\n  margin-bottom: 8px;\n}\n.editorLeft .panelLg {\n  width: 100%;\n  position: relative;\n  z-index: 100;\n}\n.editorLeft .panelLg ul {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n  -ms-flex-pack: distribute;\n      justify-content: space-around;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  background-color: #fff;\n  border-top-left-radius: 3px;\n  border-top-right-radius: 3px;\n}\n.editorLeft .panelLg ul li {\n  -webkit-transition: border ease-in 0.2s;\n  transition: border ease-in 0.2s;\n  cursor: pointer;\n  padding: 2px 0;\n  margin: 2px 0;\n  width: 80px;\n  text-align: center;\n  border: 1px solid rgba(0, 0, 0, 0);\n}\n.editorLeft .panelLg ul li p {\n  text-align: center;\n  margin-top: 2px;\n  font-size: 10px;\n  color: #000000a6;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n.editorLeft .panelLg ul li .svgIcon {\n  background-color: #e2f5ff;\n  border-radius: 3px;\n}\n.editorLeft .panelLg ul li:hover {\n  border: 1px solid #ccc;\n}\n.editorLeft .panelLg ul li.hide-blank {\n  visibility: hidden;\n}\n.editorLeft .editor-collapse {\n  position: relative;\n  z-index: 200;\n  border-bottom: 1px solid #E6E6E6;\n}\n.editorLeft .editor-collapse .editor-collapse-title {\n  cursor: pointer;\n  height: 36px;\n  padding: 12px 0 0 8px;\n}\n.editorLeft .editor-collapse .editor-collapse-title span {\n  color: #111111;\n  font-size: 12px;\n}\n.editorLeft .editor-collapse .editor-collapse-title i {\n  cursor: pointer;\n  position: absolute;\n  right: 8px;\n  top: 14px;\n  border-top: 4px solid transparent;\n  border-bottom: 4px solid transparent;\n  border-left: 4px solid #979797;\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n  -webkit-transition: -webkit-transform 200ms linear;\n  transition: -webkit-transform 200ms linear;\n  transition: transform 200ms linear;\n  transition: transform 200ms linear, -webkit-transform 200ms linear;\n}\n.editorLeft .editor-collapse .editor-collapse-content .content-box {\n  opacity: 1;\n  -webkit-transform-origin: 0% 0%;\n          transform-origin: 0% 0%;\n  -webkit-transform: scaleY(1);\n          transform: scaleY(1);\n  -webkit-transition: opacity 200ms, height 200ms, -webkit-transform 200ms;\n  transition: opacity 200ms, height 200ms, -webkit-transform 200ms;\n  transition: opacity 200ms, transform 200ms, height 200ms;\n  transition: opacity 200ms, transform 200ms, height 200ms, -webkit-transform 200ms;\n}\n.editorLeft .editor-collapse .editor-collapse-content .content-box::-webkit-scrollbar {\n  width: 3px;\n  height: 3px;\n}\n.editorLeft .editor-collapse .editor-collapse-content .content-box::-webkit-scrollbar-button {\n  display: none;\n}\n.editorLeft .editor-collapse .editor-collapse-content .content-box::-webkit-scrollbar-thumb {\n  background: #DCE3E8;\n  border-radius: 100px ;\n}\n.editorLeft .editor-collapse.fold .editor-collapse-title i {\n  -webkit-transform: rotate(0deg);\n          transform: rotate(0deg);\n}\n.editorLeft .editor-collapse.fold .editor-collapse-content .content-box {\n  opacity: 0;\n  -webkit-transform-origin: 0% 0%;\n          transform-origin: 0% 0%;\n  -webkit-transform: scaleY(0);\n          transform: scaleY(0);\n}\n",""])},function(e,t){e.exports="data:image/png;base64,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"},function(e,t){e.exports="data:image/png;base64,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"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(e){return e&&e.__esModule?e:{default:e}}(n(2)),o=n(1),l=n(7),s=n(16),u=n(6),c=n(27),p=n(24),d=b(n(25)),f=b(n(37)),m=n(0),g=n(148),y=n(178);function b(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}n(304);var v=o.base.NCFormControl,h=void 0,w=void 0,k=(0,u.getQueryString)("flowType");"bpp"==k?(h=f.setName,w=f.setSubflowId):(h=d.setName,w=d.setSubflowId);var E=void 0,A=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.showOtherTab=function(e){var t=e.general.type;return"check"==t||"lister"==t||"auto"==t||"manual"==t||"dummy"==t||"subflow"==t},n.handleTabClick=function(e){n.showOtherTab(e)&&(0==n.state.tabIndex?n.setState({tabIndex:1}):n.setState({tabIndex:0}))},n.setName=function(e,t){var a=n;return function(n){a.props.setName({id:e,type:t,name:n}),a.forceUpdate()}},n.closeTab=function(e,t,a,i,r){n.props.closeTab(e,t,a,i,r)},n.updateByItemId=function(e,t){return function(n){return m.attributesList.updateByItemId(e,t,n)}},n.bppUpdateById=function(e){return function(t){return m.attributesList.bppUpdateById(e,t)}},n.setParticipantType=function(e){n.setState({participantType:e}),console.log("this.state.participantType",n.state.participantType)},n.showBaseInfo=function(e){if(e){var t=e.general,i=e.participants,o=e.messageReminding,l=e.flowAttr,c=(e.application,e.branchMerge,e.condition),p=e.priority,d=(e.apparent,e.advanced),f=t.id,m=t.type,g=s.store.getState().entity;switch(m){case"start":case"finish":return r.default.createElement(r.default.Fragment,null,r.default.createElement(y.General,{value:t,type:m,setName:n.setName(f,m),updateAttr:n.updateByItemId(f,"general")}));case"auto":return r.default.createElement(r.default.Fragment,null,r.default.createElement(y.General,{value:t,type:m,setName:n.setName(f,m),updateAttr:n.updateByItemId(f,"general")}),r.default.createElement(y.MessageReminding,{value:o,type:m,updateAttr:n.updateByItemId(f,"messageReminding")}),r.default.createElement(y.FlowAttr,{value:l,participantType:n.state.participantType,billtypeConfig:n.billtypeConfig,type:m,updateAttr:n.updateByItemId(f,"flowAttr")}));case"check":case"manual":case"lister":return r.default.createElement(r.default.Fragment,null,r.default.createElement(y.General,{value:t,type:m,setName:n.setName(f,m),updateAttr:n.updateByItemId(f,"general")}),r.default.createElement(y.Participants,{entities:g,curEnt:(0,u.getEntity)(g,f),customerParticipant:n.customerParticipant,customerFilter:n.customerFilter,value:i,type:m,setParticipantType:n.setParticipantType.bind(n),setName:n.setName(f,m),updateGeneralAttr:n.updateByItemId(f,"general"),updateAttr:n.updateByItemId(f,"participants")}),r.default.createElement(y.MessageReminding,{value:o,updateAttr:n.updateByItemId(f,"messageReminding")}),r.default.createElement(y.FlowAttr,{value:l,participantType:n.state.participantType,billtypeConfig:n.billtypeConfig,type:m,updateAttr:n.updateByItemId(f,"flowAttr")}));case"dummy":case"subflow":return r.default.createElement(r.default.Fragment,null,r.default.createElement(y.General,{value:t,type:m,flows:n.props.flows,setSubflowId:n.props.setSubflowId,closeTab:n.closeTab,setName:n.setName(f,m),updateAttr:n.updateByItemId(f,"general")}),r.default.createElement(y.FlowAttr,{value:l,type:m,participantType:n.state.participantType,updateAttr:n.updateByItemId(f,"flowAttr")}));case"link":var b=(0,u.getLink)(g,t.id),v=(0,u.getEntity)(g,b.from),h=(0,u.getEntity)(g,b.target);return"start"==v.type||"finish"==h.type?r.default.createElement(r.default.Fragment,null,r.default.createElement(y.General,{value:t,type:m,setName:n.setName(f,m),updateAttr:n.updateByItemId(f,"general")})):r.default.createElement(r.default.Fragment,null,r.default.createElement(y.General,{value:t,type:m,setName:n.setName(f,m),updateAttr:n.updateByItemId(f,"general")}),r.default.createElement(y.Condition,{value:a({},c,{id:f}),entities:g,updateAttr:n.updateByItemId(f,"condition")}),r.default.createElement(y.Priority,{value:p,updateAttr:n.updateByItemId(f,"priority")}));default:return r.default.createElement(r.default.Fragment,null,r.default.createElement(y.General,{value:t,type:m,setName:n.setName(f,m),updateAttr:n.updateByItemId(f,"general")}),r.default.createElement(y.Advanced,{value:d,emendFlow:n.emendFlow,updateAttr:n.updateByItemId(f,"advanced")}))}}},n.showBppInfo=function(e,t){var a=e.type,i=s.store.getState().entity;switch(console.log("type",a),a){case"start":case"finish":return r.default.createElement("div",{className:"generalInput"},r.default.createElement("p",null,r.default.createElement("span",null,m.multiLang["attr-000003"],":")," ",r.default.createElement(v,{fieldid:"name_input",value:e.name,disabled:!0})));case"router":case"bpp_link":return r.default.createElement(g.RouterLink,{value:e,setName:n.setName(t,a),updateAttr:n.bppUpdateById(t)});case"bill":var o=[],l=[],c=[],p=(0,u.getEntity)(i,t);return console.log("selectedEntity",p),(0,u.getUpperBill)(i,p,o,c),(0,u.getLowerBill)(i,p,l,[]),r.default.createElement(g.Bill,{entities:i,entity:p,value:e,allPrevArr:c,prevArr:o,nextArr:l,setName:n.setName(t,a),updateAttr:n.bppUpdateById(t)});case"drive":var d=(0,u.getEntity)(i,t),f=[],y=[];return 1==d.linksFrom.length&&f.push(d.linksFrom[0].entityId),d.linksTo.forEach((function(e){y.push(e.target)})),r.default.createElement(g.Drive,{value:e,setName:n.setName(t,a),prevArr:f,nextArr:y,updateAttr:n.bppUpdateById(t)});case"vo":return r.default.createElement(g.Vo,{value:e,id:t,updateAttr:n.bppUpdateById(t)});case"bpp_link_wb":var b=(0,u.getLink)(i,t);return r.default.createElement(g.Wb,{value:e,from:b.from,target:b.target,updateAttr:n.bppUpdateById(t)});case"bpp_link_ps":var h=(0,u.getLink)(i,t);return r.default.createElement(g.Ps,{value:e,setName:n.setName(t,a),updateAttr:n.bppUpdateById(t),from:h.from,target:h.target});default:return r.default.createElement(g.BusiFlow,{value:e,updateAttr:n.bppUpdateById("busiflow")})}},n.rightFold=function(){n.setState({isFold:!0},(function(){return setTimeout((function(){return n.props.resetViewport()}),400)}))},n.rightUnfold=function(){n.setState({isFold:!1},(function(){return setTimeout((function(){return n.props.resetViewport()}),400)}))},n.state={tabIndex:0,participantType:"OPERATOR",isFold:!1},n.shouldUpdate=!0,n.flowType=k,E=m.attributesList.data(),console.log("testAttributes",E),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){var e=this,t=this;"bpp"!=k?(0,o.ajax)({url:"/nccloud/riawf/pf/approveFlowCustomConfig.do",data:{billOrTranstype:m.flowContext.get().billType,pk_org:m.flowContext.get().pk_org},method:"POST",async:!0,success:function(e){var n=e.success,a=e.data;n&&a&&(t.customerParticipant=e.data.customerParticipant,t.customerMessageReceiver=e.data.customerMessageReceiver,t.customerFlowType=e.data.customerFlowType,t.customerFilter=e.data.customerFilter,t.workflowGadgetList=e.data.WorkflowGadgetlist,t.emendFlow=e.data.emendFlow,t.billtypeConfig={isEnableButton:e.data.isEnableButton,isEditableProperty:e.data.isEditableProperty,isRejectUneditableProperty:e.data.isRejectUneditableProperty,isworkflowcanautoapprove:e.data.isworkflowcanautoapprove},t.forceUpdate())},error:function(e){(0,o.toast)({content:e.message,color:"danger"})}}):setTimeout((function(){e.forceUpdate()}),1e3)}},{key:"componentWillReceiveProps",value:function(e){var t=e.selectedEntity;if(this.selectedId=t.id||t.linkId,"bpp"!=this.flowType){var n=""==this.selectedId?E[e.flows.id]:E[this.selectedId];n&&"human"!==n.general.type&&this.setState({tabIndex:0})}}},{key:"componentWillUpdate",value:function(){this.shouldUpdate=!1}},{key:"shouldComponentUpdate",value:function(e,t){var n=this.props,a=n.selectedEntity,i=n.flows,r=a.id||a.linkId;return!(this.state.isFold==t.isFold&&this.state.participantType==t.participantType&&("bpp"==this.flowType||r==this.selectedId&&this.state.tabIndex==t.tabIndex&&i.id==e.flows.id&&!this.shouldUpdate))||(!(r==this.selectedId&&!this.shouldUpdate)||void 0)}},{key:"render",value:function(){var e=this,t=r.default.createElement("div",{className:"right-blank"});if("bpp"!=this.flowType){var n=this.props,a=n.selectedEntity,i=n.flows,o=a.id||a.linkId,l=""==o?E[i.id]:E[o];return console.log("attributes",E,i,l),r.default.createElement(r.default.Fragment,null,r.default.createElement("div",{className:"attrWrapper "+(this.state.isFold?"fold":"")},t,r.default.createElement("div",{className:"rightContentBox"},r.default.createElement("h3",{className:"attrTitle"},m.multiLang["attr-000000"]),l?r.default.createElement("div",{className:"attrBox"},r.default.createElement("div",{className:"attrTabBox",fieldid:"attr-tabs-area"},r.default.createElement("div",{className:"flexTab"},r.default.createElement("button",{className:"attrTab "+(0==this.state.tabIndex?"active  nc-theme-sp-sle-font-c":""),onClick:function(){e.handleTabClick(l)}},m.multiLang["attr-000001"]),r.default.createElement("b",{className:"tool-gap"}),this.showOtherTab(l)?r.default.createElement("button",{className:"attrTab "+(1==this.state.tabIndex?"active  nc-theme-sp-sle-font-c":""),onClick:function(){e.handleTabClick(l)}},m.multiLang["attr-000002"]):r.default.createElement("button",{className:"attrTab",disabled:!0},m.multiLang["attr-000002"]))),r.default.createElement("div",{className:"attrContent"},0==this.state.tabIndex?r.default.createElement(r.default.Fragment,null,this.showBaseInfo(l)):r.default.createElement(r.default.Fragment,null,r.default.createElement(y.BranchMerge,{value:l.branchMerge,updateAttr:this.updateByItemId(l.general.id,"branchMerge")}),r.default.createElement(y.Application,{activeType:l.general.type,workflowGadgetList:this.workflowGadgetList,value:l.application,updateAttr:this.updateByItemId(l.general.id,"application")})))):""),this.state.isFold?r.default.createElement("div",{onClick:this.rightUnfold,className:"rightFoldIcon"}):r.default.createElement("div",{className:"rightFoldIcon unfold",onClick:this.rightFold})))}var s=this.props.selectedEntity,u=s.id||s.linkId,c=""==u?E.busiflow:E[u];return r.default.createElement(r.default.Fragment,null,r.default.createElement("div",{className:"attrWrapper "+(this.state.isFold?"fold":"")},t,r.default.createElement("div",{className:"rightContentBox"},r.default.createElement("h3",{className:"attrTitle"},m.multiLang["attr-000000"]),r.default.createElement("div",{className:"attrContent"},r.default.createElement("div",{className:"partBox bpp"},c&&this.showBppInfo(c,u,s)))),this.state.isFold?r.default.createElement("div",{onClick:this.rightUnfold,className:"rightFoldIcon"}):r.default.createElement("div",{className:"rightFoldIcon unfold",onClick:this.rightFold})))}}]),t}(r.default.Component);t.default=(0,l.connect)((function(e){return{selectedEntity:e.canvas.selectedEntity,flows:e.flows}}),{setName:h,setSubflowId:w,closeTab:c.closeTab,resetViewport:p.resetViewport})(A)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RouterLink=t.BusiFlow=t.Wb=t.Vo=t.Ps=t.Drive=t.Bill=void 0;var a=c(n(149)),i=c(n(158)),r=c(n(161)),o=c(n(162)),l=c(n(173)),s=c(n(176)),u=c(n(177));function c(e){return e&&e.__esModule?e:{default:e}}t.Bill=a.default,t.Drive=i.default,t.Ps=r.default,t.Vo=o.default,t.Wb=l.default,t.BusiFlow=s.default,t.RouterLink=u.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=f(n(2)),r=n(1),o=f(n(82)),l=f(n(150)),s=n(0),u=(n(6),f(n(151))),c=f(n(63)),p=f(n(156)),d=n(0);function f(e){return e&&e.__esModule?e:{default:e}}var m=r.base.NCFormControl,g=r.base.NCSwitch,y=r.base.NCButton,b=r.base.NCTooltip,v=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={curBillType:e.value.billtypecode,curBillName:e.value.billtypename,curTransType:e.value.transtype,curTransName:e.value.transtypename,jumpflag:e.value.jumpflag,makebillflag:e.value.makebillflag,referbillflag:e.value.referbillflag,forwardmsgflag:e.value.forwardmsgflag,backmsgflag:e.value.backmsgflag},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"clickAction",value:function(e){var t=e.props;switch(e.action){case"showParticipant":t.modal.show("participant",{title:s.multiLang["bppattr-bill-partnerSet"],size:"lg",noFooter:!0,content:i.default.createElement(u.default,{props:t})});break;case"showBeforActionConst":t.modal.show("beforActionConst",{title:s.multiLang["bppattr-bill-constrictBeforSet"],size:"lg",noFooter:!0,content:i.default.createElement(c.default,{props:t,type:"beforActionConst"})});break;case"showAfterActionConst":t.modal.show("afterActionConst",{title:s.multiLang["bppattr-bill-constrictAfterSet"],size:"lg",noFooter:!0,content:i.default.createElement(c.default,{props:t,type:"afterActionConst"})});break;case"backMsgsSetting":t.modal.show("backMsgsSetting",{title:s.multiLang["bppattr-bill-backMsgSet"],size:"lg",noFooter:!0,content:i.default.createElement(p.default,{props:t})})}}},{key:"secondSwitch",value:function(){var e=this;return 0==this.props.prevArr.length?(null!==this.state.makebillflag&&void 0!==this.state.makebillflag&&""!==this.state.makebillflag||(this.state.makebillflag=!0,this.props.value.makebillflag=!0),i.default.createElement("p",null,i.default.createElement("span",null,s.multiLang["bppattr-bill-self"]),i.default.createElement(g,{fieldid:"makeBill_switch",checked:this.state.makebillflag,onChange:function(){e.setState({makebillflag:!e.props.value.makebillflag}),e.props.updateAttr({makebillflag:!e.props.value.makebillflag})}}))):0==this.props.nextArr.length?(this.state.makebillflag=!1,this.props.value.makebillflag=!1,i.default.createElement("p",null,i.default.createElement("span",null,s.multiLang["bppattr-bill-jump"]),i.default.createElement(g,{fieldid:"jumpflag_switch",checked:this.state.jumpflag,onChange:function(){e.setState({jumpflag:!e.props.value.jumpflag}),e.props.updateAttr({jumpflag:!e.props.value.jumpflag})}}))):void 0}},{key:"delSetting",value:function(e){e&&"drive"===e.type&&(e.msgDrivevos=null,e.pk_sourcebilltype=null,e.fwdBilltype=null,e.displayName=null,e.validity=!1)}},{key:"changeDependent",value:function(e){var t=this.props.entity.linksFrom,n=this.props.entity.linksTo;for(var a in t){var i=(l=t[a]).from,r=d.attributesList.get(i);this.delSetting(r)}for(var a in n){var o=(s=n[a]).target;r=d.attributesList.get(o);this.delSetting(r)}if("billtype"===e){for(var a in t){var l=t[a];"bpp_link_ps"==(u=d.attributesList.get(l.linkId)).type&&(u.pk_billtype=this.state.curBillType,u.pk_billtypename=this.state.curBillName)}for(var a in n){var s=n[a];"bpp_link_ps"==(u=d.attributesList.get(s.linkId)).type&&(u.referbilltype=this.state.curBillType,u.referbilltypename=this.state.curBillName)}}else if("transtype"==e){for(var a in t){l=t[a];"bpp_link_ps"==(u=d.attributesList.get(l.linkId)).type&&(this.state.curTransType?(u.pk_billtype=this.state.curTransType,u.pk_billtypename=this.state.curTransName):(u.pk_billtype=this.state.curBillType,u.pk_billtypename=this.state.curBillName))}for(var a in n){var u;s=n[a];"bpp_link_ps"==(u=d.attributesList.get(s.linkId)).type&&(this.state.curTransType?(u.referbilltype=this.state.curTransType,u.referbilltypename=this.state.curTransName):(u.referbilltype=this.state.curBillType,u.referbilltypename=this.state.curBillName))}}}},{key:"notNull",value:function(e){return!!e&&("{}"!=JSON.stringify(e)&&"[]"!=JSON.stringify(e))}},{key:"render",value:function(){var e=this,t=this.props;console.log("props",t);t.form;var n=t.modal,a=(t.updateAttr,n.createModal),r=i.default.createElement("div",null,s.multiLang["bppattr-drive-edit"]);return this.state.curBillType=t.value.billtypecode,this.state.curBillName=t.value.billtypename,this.state.curTransType=t.value.transtype,this.state.curTransName=t.value.transtypename,this.state.makebillflag=t.value.makebillflag,this.state.referbillflag=t.value.referbillflag,this.state.forwardmsgflag=t.value.forwardmsgflag,this.state.backmsgflag=t.value.backmsgflag,null!==this.state.referbillflag&&void 0!==this.state.referbillflag&&""!==this.state.makebillflag||(this.state.referbillflag=!0,t.value.referbillflag=!0),i.default.createElement("div",{className:"generalInput"},a("participant"),a("beforActionConst"),a("afterActionConst"),a("backMsgsSetting"),i.default.createElement("p",null,i.default.createElement("span",null,s.multiLang["bppattr-bill-billcode"]),i.default.createElement("div",{className:"inputBox"},i.default.createElement(o.default,{value:{refname:this.state.curBillName,refpk:this.state.curBillType},onChange:function(t){e.state.curBillType=t.refcode,e.state.curBillName=t.refname,t.refcode?(e.props.value.billtypecode=t.refcode,e.props.updateAttr({billtypecode:t.refcode,pk_billtype:t.refcode,billtypename:t.refname,displayName:t.refname}),e.props.setName(t.refname)):(e.props.updateAttr({billtypecode:null,pk_billtype:null,billtypename:null,displayName:null}),e.props.setName(null)),e.setState({curTransType:null,curTransName:null}),e.changeDependent("billtype"),e.props.updateAttr({transtype:null,transtypename:null})},placeholder:this.state.curBillName}))),i.default.createElement("p",null,i.default.createElement("span",null,s.multiLang["bppattr-bill-transcode"]),i.default.createElement("div",{className:"inputBox"},i.default.createElement(l.default,{value:{refname:this.state.curTransName,refpk:this.state.curTransType},onChange:function(t){e.state.curTransType=t.refcode,e.state.curTransName=t.refname,t.refcode?(e.props.updateAttr({transtype:t.refcode,transtypename:t.refname}),e.props.setName(t.refname)):(e.props.updateAttr({transtype:null,transtypename:null}),e.props.setName(e.state.curBillName)),e.changeDependent("transtype")},queryCondition:{parentbilltype:this.state.curBillType?this.state.curBillType:"What the fuck is this?"},placeholder:this.state.curTransName}))),this.secondSwitch(),i.default.createElement("p",null,i.default.createElement("span",null,s.multiLang["bppattr-bill-refer"]),i.default.createElement(g,{fieldid:"refMakeBill_switch",checked:this.state.referbillflag,onChange:function(){e.setState({referbillflag:!t.value.referbillflag}),e.props.updateAttr({referbillflag:!t.value.referbillflag})}})),i.default.createElement("p",null,i.default.createElement("span",{className:"long"},s.multiLang["bppattr-bill-sendMsgForward"]),i.default.createElement(g,{fieldid:"tarBillMsg_switch",checked:this.state.forwardmsgflag,onChange:function(){e.setState({forwardmsgflag:!e.props.value.forwardmsgflag}),e.props.updateAttr({forwardmsgflag:!e.props.value.forwardmsgflag})}})),i.default.createElement("p",null,i.default.createElement("span",{className:"long"},s.multiLang["bppattr-bill-sendMsgBack"]),i.default.createElement(g,{fieldid:"scrBillMsg_switch",checked:this.state.backmsgflag,onChange:function(){e.setState({backmsgflag:!e.props.value.backmsgflag}),e.props.updateAttr({backmsgflag:!e.props.value.backmsgflag})}})),i.default.createElement("p",null,i.default.createElement("span",{className:"long"},s.multiLang["bppattr-bill-partnerSet"]),i.default.createElement("div",{className:"inputBox"},i.default.createElement(m,{fieldid:"partners_input",value:this.notNull(t.value.partners)?s.multiLang["bppattr-drive-setUp"]:s.multiLang["bppattr-drive-unSet"],disabled:!0}),i.default.createElement(b,{delay:1e3,inverse:!0,overlay:r},i.default.createElement(y,{fieldid:"partners_btn",onClick:function(){e.clickAction({props:t,action:"showParticipant"})}},s.multiLang["bppattr-drive-edit"])))),i.default.createElement("p",null,i.default.createElement("span",{className:"long"},s.multiLang["bppattr-bill-constrictBefor"]),i.default.createElement("div",{className:"inputBox"},i.default.createElement(m,{fieldid:"actionConstricts_input",value:this.notNull(t.value.actionConstricts)?s.multiLang["bppattr-drive-setUp"]:s.multiLang["bppattr-drive-unSet"],disabled:!0}),i.default.createElement(b,{delay:1e3,inverse:!0,overlay:r},i.default.createElement(y,{fieldid:"actionConstricts_btn",onClick:function(){e.clickAction({props:t,action:"showBeforActionConst"})}},s.multiLang["bppattr-drive-edit"])))),i.default.createElement("p",null,i.default.createElement("span",{className:"long"},s.multiLang["bppattr-bill-constrictAfter"]),i.default.createElement("div",{className:"inputBox"},i.default.createElement(m,{fieldid:"actionConstrictsAfter_input",value:this.notNull(t.value.actionConstrictsAfter)?s.multiLang["bppattr-drive-setUp"]:s.multiLang["bppattr-drive-unSet"],disabled:!0}),i.default.createElement(b,{delay:1e3,inverse:!0,overlay:r},i.default.createElement(y,{fieldid:"actionConstrictsAfter_btn",onClick:function(){e.clickAction({props:t,action:"showAfterActionConst"})}},s.multiLang["bppattr-drive-edit"])))),i.default.createElement("p",null,i.default.createElement("span",{className:"long"},s.multiLang["bppattr-bill-backMsgSet"]),i.default.createElement("div",{className:"inputBox"},i.default.createElement(m,{fieldid:"backMsgs_input",value:this.notNull(t.value.backMsgs)?s.multiLang["bppattr-drive-setUp"]:s.multiLang["bppattr-drive-unSet"],disabled:!0}),i.default.createElement(b,{delay:1e3,inverse:!0,overlay:r},i.default.createElement(y,{fieldid:"backMsgs_btn",onClick:function(){e.clickAction({props:t,action:"backMsgsSetting"})}},s.multiLang["bppattr-drive-edit"])))))}}]),t}(i.default.Component);t.default=v=(0,r.createPage)({})(v)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={multiLang:{domainName:"uap",currentLocale:"zh-CN",moduleId:"uapRefer"},refType:"grid",refName:"1880000025-000104",placeholder:"1880000025-000105",refCode:"riart.refer.pub.transTypeGridRef",queryGridUrl:"/nccloud/riart/ref/transtypeRef.do",isMultiSelectedEnabled:!1,isHasDisabledData:!1,columnConfig:[{name:["1880000025-000106","1880000025-000107"],code:["refcode","refname"]}]};return React.createElement(i,a({},t,e))};var i=n(1).high.Refer},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(2),r=u(i),o=n(1),l=u(n(152)),s=n(0);function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"whatis",value:function(e){switch(e){case"01":return s.multiLang["bppattr-participant-user"];case"02":return s.multiLang["bppattr-participant-userGroup"];case"03":return s.multiLang["bppattr-participant-role"];case"04":return s.multiLang["bppattr-participant-roleGroup"]}}},{key:"initData",value:function(e){if(""!=e){var t=[];for(var n in e){var a={values:{partiType:{value:e[n].parnter_type,display:this.whatis(e[n].parnter_type)},participant:{value:e[n].parnter_pk,display:e[n].parnter_name}}};t.push(a)}this.props.editTable.setTableData("participantTable",{rows:t})}}},{key:"componentDidMount",value:function(){this.initData(this.props.props.value.partners)}},{key:"beforeEvent",value:function(e,t,n,a,i,r){var o=e.meta.getMeta();if("participant"==n.attrcode){var l=r.values.partiType.value,s="/uap/refer/riart/userRefer/index",u={isAuthFilter:!1,isSelfVisible:!0,isShowSysAdmin:!1,isShowGroupAdmin:!0};switch(l){case"01":s="/uap/refer/riart/userRefer/index",u={isAuthFilter:!1,isSelfVisible:!0,isShowSysAdmin:!1,isShowGroupAdmin:!0};break;case"02":s="/uap/refer/riart/userGroupTreeRef/index",u={isAuthFilter:!1};break;case"03":s="/uap/refer/riart/roleRefer/index",u={isAuthFilter:!1};break;case"04":s="/uap/refer/riart/roleGroupRefer/index",u={isAuthFilter:!1}}o[t].items.map((function(e){return o[t].items.find((function(e){return"participant"==e.attrcode})).refcode=s,o[t].items.find((function(e){return"participant"==e.attrcode})).itemtype="refer",o[t].items.find((function(e){return"participant"==e.attrcode})).isMultiSelectedEnabled=!1,o[t].items.find((function(e){return"participant"==e.attrcode})).queryCondition=u,o})),console.log("meta",o)}return!0}},{key:"afterEvent",value:function(e,t,n,a,i,r,o){return!0}},{key:"buttonClick",value:function(e,t,n){switch(t){case"addRow":this.props.editTable.addRow("participantTable");break;case"delRow":var a=this.props.editTable.getCheckedRows("participantTable"),i=[];if(a&&a.length>0){for(var r=0;r<a.length;r++)i.push(a[r].index),this.props.props.value.partners&&a[r].index<this.props.props.value.partners.length&&this.props.props.value.partners.splice(a[r].index);this.props.editTable.deleteTableRowsByIndex("participantTable",i,!0)}else(0,o.toast)({content:["bppattr-participant-selectDelRow"],color:"warning"});break;case"ok":var l=[],u=this.props.editTable.getAllRows("participantTable");for(var c in u){var p=u[c].values.partiType.value,d=u[c].values.participant.value,f=u[c].values.participant.display,m=!1;""!=d?l.push({parnter_name:f,parnter_pk:d,parnter_type:p}):m=!0}m&&(0,o.toast)({content:s.multiLang["bppattr-backMsg-sorry06"],color:"success"}),this.props.props.value.partners=l,this.Closemodal(this);break;case"cancel":this.Closemodal(this)}}},{key:"Closemodal",value:function(e){e.props.props.modal.close("participant");var t=ReactDOM.findDOMNode(e);t&&ReactDOM.unmountComponentAtNode(t)}},{key:"render",value:function(){var e=this.props,t=e.button,n=e.editTable.createEditTable,a=t.createButtonApp;return r.default.createElement("div",null,r.default.createElement("span",{class:"busiflow-button-top"},a({area:"page_header",buttonLimit:4,onButtonClick:this.buttonClick.bind(this),popContainer:document.querySelector(".footerBtn")})),n("participantTable",{showIndex:!0,showCheck:!0,onAfterEvent:this.afterEvent.bind(this),onBeforeEvent:this.beforeEvent.bind(this)}),r.default.createElement("hr",{color:"d0d0d0"}),r.default.createElement("div",{style:{position:"relative",bottom:"6px"}},a({area:"page_footer",buttonLimit:4,onButtonClick:this.buttonClick.bind(this),popContainer:document.querySelector(".footerBtn")})))}}]),t}(i.Component);c=(0,o.createPage)({initTemplate:l.default})(c),t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={participantTable:{moduletype:"table",status:"edit",items:[{attrcode:"partiType",required:!1,visible:!0,itemtype:"select",label:a.multiLang["bppattr-partiInit-opratorType"],width:"250px",options:[{value:"01",display:a.multiLang["bppattr-partiInit-user"]},{value:"02",display:a.multiLang["bppattr-partiInit-userGroup"]},{value:"03",display:a.multiLang["bppattr-partiInit-role"]},{value:"04",display:a.multiLang["bppattr-partiInit-roleGroup"]}],initialvalue:{display:a.multiLang["bppattr-partiInit-user"],value:"01"}},{attrcode:"participant",width:"250px",required:!0,visible:!0,itemtype:"input",label:a.multiLang["bppattr-partiInit-opratorName"]}]}},n={msgButtons:[{id:"0001A41000000006J5B1",btncolor:"button_secondary",type:"general_btn",key:"addRow",title:a.multiLang["bppattr-backMsgInit-addRow"],area:"page_header",children:[]},{id:"0001A41000000006J5B1",btncolor:"button_secondary",type:"general_btn",key:"delRow",title:a.multiLang["bppattr-backMsgInit-delRow"],area:"page_header",children:[]},{id:"0001A41000000006J5B1",btncolor:"button_main",type:"general_btn",key:"ok",title:a.multiLang["bppattr-backMsgInit-sure"],keyboard:"alt+y",area:"page_footer",children:[]},{id:"0001A41000000006J5B1",btncolor:"button_secondary",type:"general_btn",key:"cancel",title:a.multiLang["bppattr-backMsgInit-cansel"],keyboard:"alt+n",area:"page_footer",children:[]}]};!function(e,t){e.meta.setMeta(t)}(e,t),e.button.setButtons(n.msgButtons)};var a=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={constraintTable:{moduletype:"table",status:"edit",items:[{attrcode:"condition",width:"100px",required:!0,visible:!0,itemtype:"refer",label:a.multiLang["bppattr-constInit-condition"],refcode:"/uap/refer/riart/transTypeManagerRefer/index.js"},{attrcode:"operatorType",required:!1,visible:!0,itemtype:"select",label:a.multiLang["bppattr-constInit-oprator"],width:"130px",options:[{value:"1",display:a.multiLang["bppattr-constInit-noOperator"]},{value:"2",display:a.multiLang["bppattr-constInit-oprator"]},{value:"3",display:a.multiLang["bppattr-constInit-role"]}],initialvalue:{display:a.multiLang["bppattr-constInit-noOperator"],value:"1"}},{attrcode:"operator",width:"130px",visible:!0,itemtype:"input",label:a.multiLang["bppattr-actionConst-participiant"]},{attrcode:"message",width:"130px",visible:!0,itemtype:"input",label:a.multiLang["bppattr-constInit-tips"]}]}},n={msgButtons:[{id:"0001A41000000006J5B1",btncolor:"button_secondary",type:"general_btn",key:"addRow",title:a.multiLang["bppattr-backMsgInit-addRow"],area:"page_header",children:[]},{id:"0001A41000000006J5B1",btncolor:"button_secondary",type:"general_btn",key:"delRow",title:a.multiLang["bppattr-backMsgInit-delRow"],area:"page_header",children:[]},{id:"0001A41000000006J5B1",btncolor:"button_main",type:"general_btn",key:"ok",title:a.multiLang["bppattr-backMsgInit-sure"],keyboard:"alt+y",area:"page_footer",children:[]},{id:"0001A41000000006J5B1",btncolor:"button_secondary",type:"general_btn",key:"cancel",title:a.multiLang["bppattr-backMsgInit-cansel"],keyboard:"alt+n",area:"page_footer",children:[]}]};!function(e,t){e.meta.setMeta(t)}(e,t),e.button.setButtons(n.msgButtons)};var a=n(0)},function(e,t,n){var a=n(155);"string"==typeof a&&(a=[[e.i,a,""]]);var i={transform:void 0};n(4)(a,i);a.locals&&(e.exports=a.locals)},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,".u-modal-body {\n  padding: 0px 10px 0px !important;\n}\n.busiflow-button-top {\n  float: right !important;\n  position: relative !important;\n  top: -3px !important;\n}\n.transtype-manager-refer {\n  z-index: 300 !important;\n}\n.transtype-manager-refer .myCls {\n  max-height: 380px;\n  overflow: auto;\n}\n.transtype-manager-refer .u-tabs-simple {\n  overflow: hidden;\n}\n.transtype-manager-refer .leftspace {\n  display: none;\n}\n.transtype-manager-refer .form-item {\n  width: 20% !important;\n}\n.transtype-manager-refer .form-item .form-item-label {\n  display: none;\n}\n.transtype-manager-refer .form-item .form-item-control {\n  width: 100%;\n}\n.transtype-manager-refer .refer-popover .refer-bottom .buttons {\n  display: none;\n}\n.transtype-manager-refer .refer-popover .asynctree-area {\n  overflow: visible !important;\n}\n.transtype-manager-refer .syncTreeCom {\n  min-height: 390px;\n}\n.transtype-manager-refer .u-tree-node-content-wrapper {\n  width: 88%;\n}\n.transtype-manager-refer .del-btn {\n  line-height: 36px;\n}\n.transtype-manager-refer .synctree-area {\n  width: 100%;\n}\n.transtype-manager-refer .icon-jiantouyou:before,\n.transtype-manager-refer .icon-jiantouxia1:before {\n  display: none;\n  content: '';\n}\n.transtype-manager-refer .u-tabs-top .u-tabs-tab {\n  margin-left: 30px;\n}\n.transtype-manager-refer .u-tree li a {\n  margin-bottom: 5px;\n  height: auto;\n  line-height: normal;\n}\n.transtype-manager-refer .title-middle,\n.transtype-manager-refer .syncTreeCom .u-tree li {\n  line-height: 20px;\n}\n.rule-tree-btn-group {\n  position: absolute;\n  bottom: 9px;\n  right: 13px;\n  z-index: 15;\n}\n",""])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(2),r=c(i),o=n(1),l=c(n(157)),s=n(0),u=n(0);function c(e){return e&&e.__esModule?e:{default:e}}var p="messageReceiver",d="billAction",f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.temp=null,n.state={msgSetting:{},nowAction:null,nowRefPK:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"getActionType",value:function(){var e=this,t=(this.props.props.value.transtype,this.props.props.value.billtypecode),n={pk_billtype:t,actionType:"getActionCode",filterField:"false"};(0,o.ajax)({url:"/nccloud/riart/busiflow/busiflowButtonAction.do",data:n,success:function(t){var n=t.data;"success"==n.success?(e.temp=n.actionCode,e.initData()):(0,o.toast)({content:u.multiLang["bppattr-backMsg-sorry01"],color:"danger"})},error:function(e){alert(e.message)}})}},{key:"baseData",value:function(e,t,n){return{key:n,title:"leaf",refname:t,refpk:n,refcode:e,id:n,pid:"0001",innercode:n,children:[]}}},{key:"initData",value:function(){var e=[{key:"billActionRoot",title:u.multiLang["bppattr-backMsg-billAction"],refname:u.multiLang["bppattr-backMsg-billAction"],refpk:"0001",id:"0001",pid:null,innercode:"0001",children:[]}],t=this.props.syncTree,n=t.createTreeData(e);if(t.setSyncTreeData("billAction",n),t.setNodeDisable("billAction",!0,"0001"),this.temp){var a=this.temp,i=a.pk_billAction,r=a.code_billAction,o=a.name_billAction;if(i){for(var l in i)t.addNodeSuccess("billAction",this.baseData(r[l],o[l],i[l]));this.state.nowRefPK=i[0],this.state.nowAction=r[0],t.setNodeSelected(d,this.state.nowRefPK),this.treeSelectAction()}}}},{key:"initTableData",value:function(){var e=this.props.props.value.backMsgs;e&&(this.state.msgSetting=e)}},{key:"componentDidMount",value:function(){this.getActionType(),this.initTableData()}},{key:"whatis",value:function(e){switch(e){case"1":return u.multiLang["bppattr-backMsg-noOprator"];case"2":return u.multiLang["bppattr-backMsg-oprator"];case"3":return u.multiLang["bppattr-backMsg-roleRelevant"]}}},{key:"serchBillName",value:function(e){if(""==e||null==e)return null;var t=this.props.props.allPrevArr;for(var n in t){var a=s.attributesList.get(t[n]),i=a.transtypename?a.transtypename:a.billtypename;if(e==(a.transtype?a.transtype:a.billtypecode))return i}(0,o.toast)({content:u.multiLang["bppattr-backMsg-sorry02"],color:"danger"}),this.Closemodal(this)}},{key:"setTableData",value:function(e){var t=this.state.msgSetting[e],n=[];if(t)for(var a in t){var i={values:{bill:{value:t[a].pk_destbilltype,display:this.serchBillName(t[a].pk_destbilltype)},billMaker:{value:t[a].isbillmaker.value},approver:{value:t[a].isapprover.value}}};n.push(i)}this.props.editTable.setTableData(p,{rows:n},!1,!1)}},{key:"updatemessage",value:function(e){if(e){var t=this.props.editTable.getAllRows(p);if(t.length>0){var n=[],a=!1;for(var i in t)if(""!=t[i].values.bill.value&&null!=t[i].values.bill.value||0!=t[i].values.approver.value||0!=t[i].values.billMaker.value){if(""!=t[i].values.bill.value&&null!=t[i].values.bill.value&&0==t[i].values.approver.value&&0==t[i].values.billMaker.value)return(0,o.toast)({content:u.multiLang["bppattr-backMsg-sorry04"],color:"danger"}),!1;if(!(""!=t[i].values.bill.value&&null!=t[i].values.bill.value||1!=t[i].values.approver.value&&1!=t[i].values.billMaker.value))return(0,o.toast)({content:u.multiLang["bppattr-backMsg-sorry05"],color:"danger"}),!1;var r={pk_destbilltype:t[i].values.bill.value,pk_srcbilltype:this.props.props.value.transtype?this.props.props.value.transtype:this.props.props.value.billtypecode,isbillmaker:{value:t[i].values.billMaker.value},isapprover:{value:t[i].values.approver.value}};n.push(r)}else a=!0;0!=n.length&&(this.state.msgSetting[e]=n),a&&(0,o.toast)({content:u.multiLang["bppattr-backMsg-sorry06"],color:"success"})}}return!0}},{key:"treeSelectAction",value:function(){var e=this.props.syncTree;if(this.updatemessage(this.state.nowAction)){var t=e.getSelectNode(d),n=t.refcode;this.state.nowAction=n,this.state.nowRefPK=t.refpk,this.setTableData(n)}else this.state.nowRefPK?e.setNodeSelected(d,this.state.nowRefPK):e.cancelSelectedNode(d)}},{key:"buttonClick",value:function(e,t,n){switch(t){case"addRow":this.state.nowAction&&e.editTable.addRow(p);break;case"delRow":var a=e.editTable.getCheckedRows(p),i=[];if(a&&a.length>0){for(var r=0;r<a.length;r++)i.push(a[r].index),this.state.msgSetting[this.state.nowAction]&&(a[r].index<this.state.msgSetting[this.state.nowAction].length&&this.state.msgSetting[this.state.nowAction].splice([a[r].index],1),0==this.state.msgSetting[this.state.nowAction].length&&delete this.state.msgSetting[this.state.nowAction]);e.editTable.deleteTableRowsByIndex(p,i,!0)}else(0,o.toast)({content:u.multiLang["bppattr-backMsg-sorry03"],color:"warning"});break;case"ok":this.updatemessage(this.state.nowAction)&&(this.props.props.value.backMsgs=this.state.msgSetting,this.Closemodal(this));break;case"cancel":this.Closemodal(this)}}},{key:"Closemodal",value:function(e){e.props.props.modal.close("backMsgsSetting");var t=ReactDOM.findDOMNode(e);t&&ReactDOM.unmountComponentAtNode(t)}},{key:"exist",value:function(e,t){for(var n in e){if(e[n].values.bill.value==t)return!0}return!1}},{key:"afterEvent",value:function(){return!0}},{key:"beforeEvent",value:function(e,t,n,a,i,r){var o=e.meta.getMeta();if("bill"==n.attrcode){var l=this.props.editTable.getAllRows(p),u=this.props.props.allPrevArr,c=[];for(var d in u){var f=s.attributesList.get(u[d]),m=f.transtypename?f.transtypename:f.billtypename,g=f.transtype?f.transtype:f.billtypecode;this.exist(l,g)||c.push({value:g,display:m})}0==c.length&&c.push({value:"",display:"",isEdit:!1}),o[t].items.map((function(e){return o[t].items.find((function(e){return"bill"==e.attrcode})).options=c,o}))}return!0}},{key:"rightArray",value:function(){var e=this.props,t=e.button,n=e.editTable,a=t.createButtonApp,i=n.createEditTable;return r.default.createElement("div",null,r.default.createElement("div",{class:"busiflow-button-top"},a({area:"page_header",buttonLimit:4,onButtonClick:this.buttonClick.bind(this),popContainer:document.querySelector(".footerBtn")})),r.default.createElement("div",null,i(p,{showIndex:!0,showCheck:!0,onAfterEvent:this.afterEvent.bind(this),onBeforeEvent:this.beforeEvent.bind(this)})))}},{key:"render",value:function(){var e=this.props,t=e.button,n=e.editTable,a=e.syncTree,i=e.DragWidthCom,o=(n.createEditTable,t.createButtonApp),l=a.createSyncTree;return r.default.createElement("div",null,r.default.createElement(i,{leftDom:l({treeId:d,needSearch:!1,needEdit:!1,onSelectEve:this.treeSelectAction.bind(this),defaultExpandAll:!0}),rightDom:this.rightArray(),defLeftWid:"24%",lefMinWid:"100px"}),r.default.createElement("hr",{color:"d0d0d0"}),r.default.createElement("div",{style:{position:"relative",bottom:"6px"}},o({area:"page_footer",buttonLimit:4,onButtonClick:this.buttonClick.bind(this),popContainer:document.querySelector(".footerBtn")})))}}]),t}(i.Component);t.default=f=(0,o.createPage)({initTemplate:l.default})(f)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={messageReceiver:{moduletype:"table",status:"edit",items:[{attrcode:"bill",width:"250px",required:!0,visible:!0,itemtype:"select",label:a.multiLang["bppattr-backMsgInit-recievBill"],options:[{}]},{attrcode:"billMaker",disabled:!1,visible:!0,itemtype:"switch",label:a.multiLang["bppattr-backMsgInit-sand2Maker"]},{attrcode:"approver",disabled:!1,visible:!0,itemtype:"switch",label:a.multiLang["bppattr-backMsgInit-sand2appro"]}]}},n={msgButtons:[{id:"0001A41000000006J5B1",btncolor:"button_secondary",type:"general_btn",key:"addRow",title:a.multiLang["bppattr-backMsgInit-addRow"],area:"page_header",children:[]},{id:"0001A41000000006J5B1",btncolor:"button_secondary",type:"general_btn",key:"delRow",title:a.multiLang["bppattr-backMsgInit-delRow"],area:"page_header",children:[]},{id:"0001A41000000006J5B1",btncolor:"button_main",type:"general_btn",key:"ok",title:a.multiLang["bppattr-backMsgInit-sure"],keyboard:"alt+y",area:"page_footer",children:[]},{id:"0001A41000000006J5B1",btncolor:"button_secondary",type:"general_btn",key:"cancel",title:a.multiLang["bppattr-backMsgInit-cansel"],keyboard:"alt+n",area:"page_footer",children:[]}]};!function(e,t){e.meta.setMeta(t)}(e,t),e.button.setButtons(n.msgButtons)};var a=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=u(n(2)),r=n(1),o=u(n(159)),l=n(0),s=n(0);function u(e){return e&&e.__esModule?e:{default:e}}var c=r.base.NCFormControl,p=r.base.NCSelect,d=r.base.NCButton,f=r.base.NCTooltip,m=(p.NCOption,function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setName=function(e){n.props.updateAttr({name:n.state.name}),n.props.setName(n.state.name)},n.change=function(e,t){"name"==t&&n.setState({name:e})},n.state={name:e.value.name,tarBillName:null,srcBillName:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({name:e.value.name})}},{key:"clickAction",value:function(e){var t=e.props;switch(e.action){case"setActionDriver":t.modal.show("actionDriver",{title:s.multiLang["bppattr-drive-driveSet"],size:"lg",noFooter:!0,content:i.default.createElement(o.default,{props:t})})}}},{key:"render",value:function(){var e=this;console.log("drive_entity",this.props.prevArr,this.props.nextArr);var t=this.state.name,n=this.props,a=(n.form,n.modal),r=(n.updateAttr,a.createModal),o=this.props.prevArr,u=this.props.nextArr;o=l.attributesList.get(o),u=l.attributesList.get(u);var p=null,m=null;o&&(this.props.value.transtype=o.transtype,this.props.value.billtypecode=o.billtypecode,this.props.value.pk_sourcebilltype=o.transtype?o.transtype:o.billtypecode,p=o.transtype?o.transtypename:o.billtypename,this.state.srcBillName=p),u&&(this.props.value.fwdBilltype=u.transtype?u.transtype:u.billtypecode,m=u.transtype?u.transtypename:u.billtypename,this.state.tarBillName=m);var g=i.default.createElement("div",null,s.multiLang["bppattr-drive-edit"]);return i.default.createElement("div",{className:"generalInput"},r("actionDriver"),i.default.createElement("p",null,i.default.createElement("span",null,s.multiLang["bppattr-drive-name"]),i.default.createElement("div",{className:"inputBox"},i.default.createElement(c,{fieldid:"driveActionName_input",value:t,onChange:function(t){return e.change(t,"name")},onBlur:this.setName}))),i.default.createElement("p",null,i.default.createElement("span",null,s.multiLang["bppattr-drive-actionDrive"]),i.default.createElement("div",{className:"inputBox"},i.default.createElement(c,{fieldid:"driveAction_input",value:n.value.msgDrivevos?s.multiLang["bppattr-drive-setUp"]:s.multiLang["bppattr-drive-unSet"],disabled:!0}),i.default.createElement(f,{delay:1e3,inverse:!0,overlay:g},i.default.createElement(d,{fieldid:"driveActionName_btn",onClick:function(){e.clickAction({props:n,action:"setActionDriver"})}},s.multiLang["bppattr-drive-edit"])))),i.default.createElement("p",null,i.default.createElement("span",{className:"long"},s.multiLang["bppattr-drive-srcBillType"]),i.default.createElement("div",{className:"inputBox"},i.default.createElement(c,{fieldid:"srcBillName_input",value:this.state.srcBillName}))),i.default.createElement("p",null,i.default.createElement("span",{className:"long"},s.multiLang["bppattr-drive-tarBillType"]),i.default.createElement("div",{className:"inputBox"},i.default.createElement(c,{fieldid:"tarBillName_input",value:this.state.tarBillName}))))}}]),t}(i.default.Component));t.default=m=(0,r.createPage)({})(m)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(2),r=p(i),o=n(1),l=p(n(160)),s=n(0),u=n(0),c=p(n(63));function p(e){return e&&e.__esModule?e:{default:e}}var d="drivercontent",f="billAction",m=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setTableDataBelow=function(e){if(null!==e){var t=n.state.actionDriverData[n.state.nowAction][e];if(t){var a=[],i=t.constrictVO;if(i){for(var r in i){var o=null,l="";if((o=i[r]).conditionjson){null==o.conditionjson.querycondition&&null!=o.conditionjson&&(o.conditionjson=JSON.parse(o.conditionjson));var s=o.conditionjson.querycondition.conditions[0];s&&(l=s.extraParaVO.refname+" "+s.oprtype+" "+s.display)}else l=JSON.stringify(o.conditionXpression);var u={values:{constraint:{value:o,display:l}}};a.push(u)}n.props.editTable.setTableData("restriction",{rows:a},!1,!1)}}}else n.props.editTable.setTableData("restriction",{rows:[]},!1,!1)},n.state={temp:null,availableAction:{},actionDriverData:{},previousAction:null,preIndex:null,nowAction:null,nowIndex:null,nowRefPK:null,allowBills:[],actionConstrict:[],metaclassid:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"baseData",value:function(e,t,n){return{key:n,title:"leaf",refname:t||e,refpk:n,refcode:e,id:n,pid:"0001",innercode:n,children:[]}}},{key:"initData",value:function(e){var t=[{key:"billActionRoot",title:u.multiLang["bppattr-backMsg-billAction"],refname:u.multiLang["bppattr-backMsg-billAction"],refpk:"0001",id:"0001",pid:null,innercode:"0001",children:[]}],n=this.props.syncTree,a=n.createTreeData(t);if(n.setSyncTreeData(f,a),n.setNodeDisable(f,!0,"0001"),e){var i=e.pk_billAction,r=e.code_billAction,o=e.name_billAction;if(i){for(var l in i)n.addNodeSuccess(f,this.baseData(r[l],o[l],i[l]));this.state.nowRefPK=i[0],n.setNodeSelected(f,this.state.nowRefPK),this.treeSelectAction()}}}},{key:"treeInitData",value:function(){var e=this,t=this.props.props.prevArr,n=s.attributesList.get(t);if(!n)return null;n.transtype;var a=n.billtypecode,i={pk_billtype:a,actionType:"getActionCode",filterField:"finishflag"};(0,o.ajax)({url:"/nccloud/riart/busiflow/busiflowButtonAction.do",data:i,success:function(t){var n=t.data;"success"==n.success?e.initData(n.actionCode):(0,o.toast)({content:u.multiLang["bppattr-actDrive-sorry01"],color:"danger"})},error:function(e){alert(e.message)}})}},{key:"getPreBill",value:function(){var e=this.props.props.prevArr,t=s.attributesList.get(e);return t?t.transtype?t.transtype:t.billtypecode:null}},{key:"getNextBills",value:function(){var e=this.props.props.nextArr,t=[];for(var n in e){var a=s.attributesList.get(e[n]);t.push(a)}return t}},{key:"tableInitData",value:function(){var e=this,t=this.getNextBills(),n=[];for(var a in t)n.push(t[a].transtype?t[a].transtype:t[a].billtypecode);if(0==n.length)return null;var i={actionType:"getBillAction",pk_tarBillTypes:n};(0,o.ajax)({url:"/nccloud/riart/busiflow/busiflowButtonAction.do",data:i,async:!1,success:function(t){var n=t.data;"success"==n.success?e.state.availableAction=n.BillActions:(0,o.toast)({content:n.errMsg,color:"danger"})},error:function(e){alert(e.message)}})}},{key:"setMeta",value:function(){var e=this;this.props.meta.getMeta().restriction.items[1].render=function(t,n,a){return e.props.button.createOprationButton(["setCostraint"],{area:"bt_line",buttonLimit:2,onButtonClick:function(i,r){return e.buttonClick(i,r,t,n,a)}})}}},{key:"componentDidMount",value:function(){var e=this.props.props.value.msgDrivevos;e&&(this.state.actionDriverData=e),this.tableInitData(),this.treeInitData(),this.getAllowBills(),this.getMetaClass()}},{key:"upperTableClickEvent",value:function(e,t,n,a,i){a=e.editTable.getClickRowIndex(d);this.state.preIndex=this.state.nowIndex,this.state.nowIndex=a.index,this.updateConstraint(this.state.preIndex,this.state.nowAction),a&&this.setTableDataBelow(a.index)}},{key:"treeSelectAction",value:function(){this.updateConstraint(this.state.nowIndex,this.state.nowAction),this.state.preIndex=null,this.state.nowIndex=null,this.setTableDataBelow(null);var e=this.props.syncTree.getSelectNode(f);if(e){var t=e.refcode;this.state.previousAction=this.state.nowAction,this.state.nowAction=t,this.state.nowRefPK=e.refpk,this.updateDriver(this.state.previousAction),this.setTableData(t)}}},{key:"setTableData",value:function(e){var t=this.state.actionDriverData[e],n=[];if(t)for(var a in t){var i={values:{bill:{value:t[a].pk_billtype,display:t[a].billtypename},operatorType:{value:t[a].configflag,display:this.whatis(t[a].configflag)},operator:{value:t[a].operator,display:t[a].userOrRoleName},action:{value:t[a].actiontype,display:this.state.availableAction[t[a].pk_billtype][t[a].actiontype]},priority:{value:t[a].sysindex}}};n.push(i)}this.props.editTable.setTableData(d,{rows:n},!1,!1)}},{key:"whatis",value:function(e){switch(e){case"1":return u.multiLang["bppattr-backMsg-noOprator"];case"2":return u.multiLang["bppattr-backMsg-oprator"];case"3":return u.multiLang["bppattr-backMsg-roleRelevant"]}}},{key:"updateDriver",value:function(e){if(e){var t=this.props.editTable.getAllRows(d);if(t.length>0){var n=[];for(var a in t)if(""!=t[a].values.bill.value&&null!=t[a].values.bill.value&&""!=t[a].values.action.value&&null!=t[a].values.action.value){var i={actiontype:t[a].values.action.value,billtypename:t[a].values.bill.display,pk_billtype:t[a].values.bill.value,operator:t[a].values.operator.value,userOrRoleName:t[a].values.operator.display,sysindex:t[a].values.priority.value,configflag:t[a].values.operatorType.value,entityName:"Messagedrive",sourceaction:e};this.state.actionDriverData[e]&&this.state.actionDriverData[e][a]&&(i.pk_businesstype=this.state.actionDriverData[e][a].pk_businesstype,i.pk_driveconfig=this.state.actionDriverData[e][a].pk_driveconfig,this.state.actionDriverData[e][a].constrictVO&&(i.constrictVO=this.state.actionDriverData[e][a].constrictVO)),n.push(i)}this.state.actionDriverData[e]=n}else this.state.actionDriverData[e]=[]}}},{key:"updateConstraint",value:function(e,t){var n=[],a=this.props.props.prevArr,i=s.attributesList.get(a);if(!i)return null;var r=i.billtypecode;if(null!==e){var o=this.props.editTable.getAllRows("restriction");if(o.length>0)for(var l in o){var u=o[l].values.constraint.value;if(null==u||null==u.conditionjson){if(null==u||null==u.querycondition)continue;u={actiontype:t,conditionjson:u,configflag:"1",pk_billtype:r,pk_businesstype:null}}n.push(u)}this.state.actionDriverData&&this.state.actionDriverData[t]&&this.state.actionDriverData[t][e]&&(this.state.actionDriverData[t][e].constrictVO=n)}}},{key:"beforeEvent",value:function(e,t,n,a,i,r){var o=e.meta.getMeta();if("operator"==n.attrcode){var l=r.values.operatorType.value,s="/uap/refer/riart/userRefer/index",u={isAuthFilter:!1,isSelfVisible:!0,isShowSysAdmin:!1,isShowGroupAdmin:!0};switch(l){case"1":return!1;case"2":s="/uap/refer/riart/userRefer/index",u={isAuthFilter:!1,isSelfVisible:!0,isShowSysAdmin:!1,isShowGroupAdmin:!0};break;case"3":s="/uap/refer/riart/roleRefer/index",u={isAuthFilter:!1}}o[t].items.map((function(e){return o[t].items.find((function(e){return"operator"==e.attrcode})).refcode=s,o[t].items.find((function(e){return"operator"==e.attrcode})).itemtype="refer",o[t].items.find((function(e){return"operator"==e.attrcode})).isMultiSelectedEnabled=!1,o[t].items.find((function(e){return"operator"==e.attrcode})).queryCondition=u,o}))}else if("action"==n.attrcode){var c=[],p=r.values.bill.value,d=this.state.availableAction[p];for(var f in d)f!=this.state.nowAction&&c.push({value:f,display:d[f]});o[t].items.map((function(e){return o[t].items.find((function(e){return"action"==e.attrcode})).options=c,o[t].items.find((function(e){return"action"==e.attrcode})).itemtype="select",o}))}else if("bill"==n.attrcode){var m=this.getNextBills(),g=this.getPreBill(),y=[];for(var b in m)for(var v in this.state.allowBills)if(m[b].billtypecode==this.state.allowBills[v]||m[b].billtypecode==g||m[b].transtype==g){y.push({value:m[b].transtype?m[b].transtype:m[b].billtypecode,display:m[b].transtype?m[b].transtypename:m[b].billtypename});break}o[t].items.map((function(e){return o[t].items.find((function(e){return"bill"==e.attrcode})).options=y,o[t].items.find((function(e){return"bill"==e.attrcode})).itemtype="select",o}))}return!0}},{key:"belowTableBeforeEvent",value:function(e,t,n,a,i,r){var l=e.meta.getMeta(),c=e.editTable.getClickRowIndex(d),p=this.props.props.prevArr,f=s.attributesList.get(p);if(!f)return null;var m=f.billtypecode;if("constraint"==n.attrcode){if(null==this.state.actionDriverData[this.state.nowAction][c.index])return(0,o.toast)({content:u.multiLang["bppattr-actionConst-sorry04"],color:"warning"}),!1;var g=this.state.actionDriverData[this.state.nowAction][c.index].constrictVO,y={billtypecode:m,metaclassid:this.state.metaclassid,funcType:0};l[t].items.map((function(e){return l[t].items.find((function(e){return"constraint"==e.attrcode})).refcode="/uap/refer/riart/transTypeManagerRefer/index",l[t].items.find((function(e){return"constraint"==e.attrcode})).queryCondition=y,g&&g[a]&&("string"==typeof g[a].conditionjson?l[t].items.find((function(e){return"constraint"==e.attrcode})).treeJson=JSON.parse(g[a].conditionjson):l[t].items.find((function(e){return"constraint"==e.attrcode})).treeJson=g[a].conditionjson),l}))}return!0}},{key:"afterEvent",value:function(e,t,n,a,i,r,o){o=e.editTable.getClickRowIndex(t).index;return"operatorType"==n?e.editTable.setValByKeyAndIndex(t,o,"operator",{display:null,scale:null,value:"",isEdit:!1}):"bill"==n&&e.editTable.setValByKeyAndIndex(t,o,"action",{display:null,scale:null,value:"",isEdit:!1}),!0}},{key:"getMetaClass",value:function(){var e=this,t=this.props.props.prevArr,n=s.attributesList.get(t);if(!n)return null;var a={actionType:"getMdClass",pk_billtype:n.billtypecode};(0,o.ajax)({url:"/nccloud/riart/busiflow/busiflowButtonAction.do",data:a,async:!0,success:function(t){var n=t.data;if("success"==n.success){var a=n.mdClass;e.setState({metaclassid:a})}else(0,o.toast)({content:u.multiLang["bppattr-actionConst-sorry02"],color:"danger"})},error:function(e){alert(e.message)}})}},{key:"getAllowBills",value:function(){var e=this,t=this.props.props.prevArr,n=s.attributesList.get(t);if(!n)return null;var a={actionType:"getAllowBills",billcode:n.billtypecode};(0,o.ajax)({url:"/nccloud/riart/busiflow/busiflowButtonAction.do",data:a,async:!0,success:function(t){var n=t.data;"success"==n.success?e.state.allowBills=n.allowBills:(0,o.toast)({content:n.errMsg,color:"danger"})},error:function(e){alert(e.message)}})}},{key:"Closemodal",value:function(e){e.props.props.modal.close("actionDriver");var t=ReactDOM.findDOMNode(e);t&&ReactDOM.unmountComponentAtNode(t)}},{key:"buttonClick",value:function(e,t,n,a,i){switch(t){case"addConst":this.updateDriver(this.state.nowAction),e.editTable.getClickRowIndex(d)&&e.editTable.addRow("restriction");break;case"delConst":var l=e.editTable.getCheckedRows("restriction");if(l)for(var s=this.state.actionDriverData[this.state.nowAction][e.editTable.getClickRowIndex(d).index],p=l.length-1;p>=0;p--){i=l[p].index;s&&s.constrictVO&&i<s.constrictVO.length&&(delete s.constrictVO[i],(0==s.constrictVO.length||1==s.constrictVO.length&&null==s.constrictVO[1])&&(s.constrictVO=null)),e.editTable.deleteTableRowsByIndex("restriction",p,!0)}break;case"setCostraint":p=e.editTable.getClickRowIndex(d);var f=this.state.actionDriverData[this.state.nowAction][p.index];f.constrictVO||(f.constrictVO=[]),e.props.modal.show("actionConst",{title:u.multiLang["bppattr-backMsgInit-constraint"],size:"lg",noFooter:!0,content:r.default.createElement(c.default,{props:e.props,type:"actionConst",iIndex:p.index,refresh:this.setTableDataBelow,constraint:f.constrictVO,index:i})});break;case"addRow":this.state.nowAction&&e.editTable.addRow(d);break;case"delRow":var m=e.editTable.getCheckedRows(d),g=[];if(m&&m.length>0){for(var y=0;y<m.length;y++)g.push(m[y].index),this.state.actionDriverData[this.state.nowAction]&&(m[y].index<this.state.actionDriverData[this.state.nowAction].length&&this.state.actionDriverData[this.state.nowAction].splice([m[y].index],1),0==this.state.actionDriverData[this.state.nowAction].length&&delete this.state.actionDriverData[this.state.nowAction]);e.editTable.deleteTableRowsByIndex(d,g,!0)}else(0,o.toast)({content:u.multiLang["bppattr-actDrive-sorry02"],color:"warning"});break;case"ok":this.updateConstraint(this.state.nowIndex,this.state.nowAction),this.updateDriver(this.state.nowAction),this.props.props.value.msgDrivevos=this.state.actionDriverData,this.Closemodal(this);break;case"cancel":this.Closemodal(this)}}},{key:"rightArray",value:function(){var e=this.props,t=e.button,n=e.editTable,a=t.createButtonApp,i=n.createEditTable;return r.default.createElement("div",null,r.default.createElement("div",{class:"busiflow-button-top"},a({area:"page_header",buttonLimit:4,onButtonClick:this.buttonClick.bind(this),popContainer:document.querySelector(".footerBtn")})),r.default.createElement("div",null,i(d,{showIndex:!0,showCheck:!0,onAfterEvent:this.afterEvent.bind(this),onBeforeEvent:this.beforeEvent.bind(this),onRowClick:this.upperTableClickEvent.bind(this),height:220})),r.default.createElement("div",null,i("restriction",{showIndex:!0,showCheck:!0,onAfterEvent:this.afterEvent.bind(this),onBeforeEvent:this.belowTableBeforeEvent.bind(this),height:150})))}},{key:"render",value:function(){var e=this.props,t=e.button,n=e.syncTree,a=e.DragWidthCom,i=t.createButtonApp,o=n.createSyncTree;return r.default.createElement("div",null,e.props.modal.createModal("actionConst"),r.default.createElement(a,{leftDom:o({treeId:f,needSearch:!1,needEdit:!1,onSelectEve:this.treeSelectAction.bind(this),defaultExpandAll:!0}),rightDom:this.rightArray(),defLeftWid:"24%",lefMinWid:"100px"}),r.default.createElement("hr",{color:"d0d0d0"}),r.default.createElement("div",{style:{position:"relative",bottom:"6px"}},i({area:"page_footer",buttonLimit:4,onButtonClick:this.buttonClick.bind(this),popContainer:document.querySelector(".footerBtn")})))}}]),t}(i.Component);t.default=m=(0,o.createPage)({initTemplate:l.default})(m)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={drivercontent:{moduletype:"table",status:"edit",items:[{attrcode:"bill",required:!0,visible:!0,itemtype:"select",label:a.multiLang["bppattr-actDrive-tarBill"],options:[{}]},{attrcode:"operatorType",required:!1,visible:!0,itemtype:"select",label:a.multiLang["bppattr-constInit-oprator"],width:"130px",options:[{value:"1",display:a.multiLang["bppattr-constInit-noOperator"]},{value:"2",display:a.multiLang["bppattr-constInit-oprator"]},{value:"3",display:a.multiLang["bppattr-constInit-role"]}],initialvalue:{display:a.multiLang["bppattr-constInit-noOperator"],value:"1"}},{attrcode:"operator",width:"130px",visible:!0,itemtype:"input",label:a.multiLang["bppattr-actDrive-oprator"]},{attrcode:"action",required:!0,disabled:!1,visible:!0,itemtype:"select",label:a.multiLang["bppattr-actDrive-action"]},{attrcode:"priority",disabled:!1,visible:!0,itemtype:"input",label:a.multiLang["bppattr-actDrive-priority"]}]},restriction:{moduletype:"table",status:"edit",items:[{attrcode:"constraint",width:"300px",visible:!0,itemtype:"refer",label:a.multiLang["bppattr-constInit-condition"],refcode:"/uap/refer/riart/transTypeManagerRefer/index.js"}]}},n={msgButtons:[{id:"0001A41000000006J5B1",btncolor:"button_secondary",type:"general_btn",key:"addRow",title:a.multiLang["bppattr-backMsgInit-addRow"],area:"page_header",children:[]},{id:"0001A41000000006J5B2",btncolor:"button_secondary",type:"general_btn",key:"delRow",title:a.multiLang["bppattr-backMsgInit-delRow"],area:"page_header",children:[]},{id:"0001A41000000006J5B3",btncolor:"button_secondary",type:"general_btn",key:"addConst",title:a.multiLang["bppattr-backMsgInit-addConst"],area:"page_header",children:[]},{id:"0001A41000000006J5B4",btncolor:"button_secondary",type:"general_btn",key:"delConst",title:a.multiLang["bppattr-backMsgInit-delConst"],area:"page_header",children:[]},{id:"0001A41000000006J5B5",btncolor:"button_main",type:"general_btn",key:"ok",title:a.multiLang["bppattr-backMsgInit-sure"],keyboard:"alt+y",area:"page_footer",children:[]},{id:"0001A41000000006J5B6",btncolor:"button_secondary",type:"general_btn",key:"cancel",title:a.multiLang["bppattr-backMsgInit-cansel"],keyboard:"alt+n",area:"page_footer",children:[]},{id:"0001A41000000006J5B7",btncolor:"button_secondary",type:"general_btn",key:"setCostraint",title:a.multiLang["bppattr-backMsgInit-setConstraint"],area:"bt_line"}]};!function(e,t){e.meta.setMeta(t)}(e,t),e.button.setButtons(n.msgButtons)};var a=n(0);!function(e){e&&e.__esModule}(n(63))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(0),r=function(e){return e&&e.__esModule?e:{default:e}}(n(2)),o=n(1),l=n(0);var s=o.base.NCFormControl,u=o.base.NCSelect,c=(o.base.NCButton,u.NCOption,function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setName=function(e){n.props.updateAttr({name:n.state.name}),n.props.setName(n.state.name)},n.change=function(e,t){"name"==t&&n.setState({name:e})},n.state={name:e.value.name,nextBillName:null,preBillName:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({name:e.value.name})}},{key:"componentWillMount",value:function(){var e=this.props.from,t=this.props.target;e=i.attributesList.get(e),t=i.attributesList.get(t),e=e.transtype?e.transtypename:e.billtypename,t=t.transtype?t.transtypename:t.billtypename,this.state.nextBillName=t,this.state.preBillName=e}},{key:"render",value:function(){var e=this,t=this.state.name;return r.default.createElement("div",{className:"generalInput"},r.default.createElement("p",null,r.default.createElement("span",null,l.multiLang["bppattr-ps-name"]),r.default.createElement("div",{className:"inputBox"},r.default.createElement(s,{fieldid:"psName_input",value:t,onChange:function(t){return e.change(t,"name")},onBlur:this.setName}))),r.default.createElement("p",null,r.default.createElement("span",{className:"long"},l.multiLang["bppattr-ps-srcBillType"]),r.default.createElement("div",{className:"inputBox"},r.default.createElement(s,{fieldid:"preBillName_input",value:this.state.preBillName,disabled:!0}))),r.default.createElement("p",null,r.default.createElement("span",{className:"long"},l.multiLang["bppattr-ps-tarBillType"]),r.default.createElement("div",{className:"inputBox"},r.default.createElement(s,{fieldid:"nextBillName_input",value:this.state.nextBillName,disabled:!0}))))}}]),t}(r.default.Component));t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=s(n(2)),r=n(1),o=s(n(163)),l=n(0);function s(e){return e&&e.__esModule?e:{default:e}}var u=r.base.NCFormControl,c=r.base.NCSelect,p=r.base.NCButton,d=r.base.NCTooltip,f=(c.NCOption,function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"clickAction",value:function(e){var t=e.props;switch(e.action){case"VOExchange":t.modal.show("VOExchange",{title:l.multiLang["bppattr-ps-billExchange"],size:"lg",noFooter:!0,content:i.default.createElement(o.default,{props:t})})}}},{key:"notNull",value:function(e){return!!e&&("{}"!=JSON.stringify(e)&&"[]"!=JSON.stringify(e))}},{key:"render",value:function(){var e=this,t=this.props,n=(t.form,t.modal),a=(t.updateAttr,n.createModal),r=i.default.createElement("div",null,l.multiLang["bppattr-drive-edit"]);return i.default.createElement("div",{className:"generalInput"},a("VOExchange"),i.default.createElement("p",null,i.default.createElement("span",null,l.multiLang["bppattr-ps-billExchange"]),i.default.createElement("div",{className:"inputBox"},i.default.createElement(u,{fieldid:"exchangevo_input",value:this.notNull(t.value.exchangevo)?l.multiLang["bppattr-drive-setUp"]:l.multiLang["bppattr-drive-unSet"],disabled:!0}),i.default.createElement(d,{delay:1e3,inverse:!0,overlay:r},i.default.createElement(p,{fieldid:"exchangevo_btn",onClick:function(){e.clickAction({props:t,action:"VOExchange"})}},l.multiLang["bppattr-drive-edit"])))))}}]),t}(i.default.Component));t.default=f=(0,r.createPage)({})(f)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(2),r=d(i),o=n(1),l=d(n(164)),s=n(0),u=(d(n(83)),n(0)),c=n(16),p=n(6);function d(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.temp=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"checkCorrrelation",value:function(e,t){var n=this;if(null==e||null==t)return null;var a=t.billtypecode,i=[],r=[];for(var l in e)i.push(e[l].billtypecode);(0,o.ajax)({url:"/nccloud/riart/busiflow/busiflowButtonAction.do",method:"POST",data:{actionType:"check_scr2tarBill",srcBilltype:i,tarBillType:a},success:function(a){var i=a.data;if("success"==i.success){var l=i.srcBilltype;for(var s in e)l[e[s].billtypecode]&&r.push(e[s]);n.setData(r,t)}else(0,o.toast)({content:u.multiLang["bppattr-vo-sorry01"],color:"danger"})},error:function(e){alert(e.message)}})}},{key:"refreshData",value:function(){var e=c.store.getState().entity,t=this.props.props.id,n=(0,p.getEntity)(e,t),a=(0,p.getEntity)(e,n.linksFrom[0].entityId),i=null==a?null:a.id,r=[];(0,p.getUpperBill)(e,a,r,[],!1);var o=s.attributesList.get(i),l=[];for(var u in r)l.push(s.attributesList.get(r[u]));this.checkCorrrelation(l,o)}},{key:"setData",value:function(e,t){var n=[],a=this.props.props.value;for(var i in e){var r=e[i].transtype?e[i].transtype:e[i].billtypecode,o=!1;if(a.exchangevo)for(var l in a.exchangevo){if(null!=a.exchangevo[l])r==(a.exchangevo[l].src_transtype?a.exchangevo[l].src_transtype:a.exchangevo[l].src_billtype)&&(o=a.exchangevo[l].busitypeCustomed)}else a.exchangevo=[];var s={values:{billfrom:{value:e[i].billtypecode,display:e[i].billtypename},transfrom:{value:e[i].transtype,display:e[i].transtypename},billtarget:{value:t.billtypecode,display:t.billtypename},transtarget:{value:t.transtype,display:t.billtypename},customize:{value:o,display:o?u.multiLang["bppattr-vo-yes"]:u.multiLang["bppattr-vo-no"]}}};n.push(s)}this.props.editTable.setTableData("voexchange",{rows:n})}},{key:"componentDidMount",value:function(){this.refreshData()}},{key:"afterEvent",value:function(){}},{key:"beforeEvent",value:function(){}},{key:"buttonClick",value:function(e,t,n){switch(t){case"cancel":this.Closemodal(this)}}},{key:"Closemodal",value:function(e){e.props.props.modal.close("VOExchange");var t=ReactDOM.findDOMNode(e);t&&ReactDOM.unmountComponentAtNode(t)}},{key:"render",value:function(){var e=this.props,t=e.button,n=e.editTable.createEditTable,a=t.createButtonApp,i=e.modal.createModal;return r.default.createElement("div",null,i("voexchangeTable"),n("voexchange",{showIndex:!0,showCheck:!1,onAfterEvent:this.afterEvent.bind(this),onBeforeEvent:this.beforeEvent.bind(this)}),r.default.createElement("hr",{color:"d0d0d0"}),r.default.createElement("div",{style:{position:"relative",bottom:"6px"}},a({area:"page_footer",buttonLimit:4,onButtonClick:this.buttonClick.bind(this),popContainer:document.querySelector(".footerBtn")})))}}]),t}(i.Component);t.default=f=(0,o.createPage)({initTemplate:l.default})(f)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={voexchange:{moduletype:"table",status:"edit",items:[{attrcode:"billfrom",width:"150px",visible:!0,itemtype:"input",label:a.multiLang["bppattr-vo-srcBillType"],disabled:!0},{attrcode:"transfrom",width:"150px",visible:!0,itemtype:"input",label:a.multiLang["bppattr-vo-srcTransType"],disabled:!0},{attrcode:"billtarget",width:"150px",visible:!0,itemtype:"input",label:a.multiLang["bppattr-vo-tarBillType"],disabled:!0},{attrcode:"transtarget",width:"150px",visible:!0,itemtype:"input",label:a.multiLang["bppattr-vo-tarTransType"],disabled:!0},{attrcode:"customize",disabled:!0,visible:!0,itemtype:"input",label:a.multiLang["bppattr-vo-setUp"]}]}},n={msgButtons:[{btncolor:"button_secondary",type:"general_btn",key:"customize",title:a.multiLang["bppattr-vo-set"],area:"bt_line"},{btncolor:"button_secondary",type:"general_btn",key:"clear",title:a.multiLang["bppattr-vo-clear"],area:"bt_line"},{id:"0001A41000000006J5B1",btncolor:"button_main",type:"general_btn",key:"cancel",title:a.multiLang["bppattr-vo-sure"],keyboard:"alt+y",area:"page_footer",children:[]},{id:"0001A41000000006J5B1",type:"general_btn",key:"cancel",title:a.multiLang["bppattr-backMsgInit-cansel"],keyboard:"alt+n",area:"page_footer",children:[]}]};e.button.setButtons(n.msgButtons);var o={label:"操作",itemtype:"customer",attrcode:"opr",visible:!0,fixed:"right",render:function(t,n,o){return e.button.createOprationButton(["customize","clear"],{area:"bt_line",buttonLimit:2,onButtonClick:function(e,t){return function(e,t,n,o,l){var s=null,u=null,c=null,p=null;switch(t){case"customize":s=o.values.billfrom.value,u=o.values.transfrom.value,c=o.values.billtarget.value,p=o.values.transtarget.value,e.props.pk_billFrom=s,e.props.pk_transFrom=u,e.props.pk_billTarget=c,e.props.pk_transTarget=p,e.props.checkedRows=l,e.modal.show("voexchangeTable",{title:a.multiLang["bppattr-vo-setRoles"],size:"lg",noFooter:!0,content:React.createElement(i.default,{props:e})});break;case"clear":var d=e.props.value.exchangevo;for(var f in s=o.values.billfrom.value,u=o.values.transfrom.value,c=o.values.billtarget.value,p=o.values.transtarget.value,d)if(d[f].src_transtype==u&&d[f].src_billtype==s&&d[f].dest_transtype==p&&d[f].dest_billtype==c){d[f]=null;break}e.editTable.setValByKeyAndIndex("voexchange",l,"customize",{value:!1,display:a.multiLang["bppattr-vo-no"]}),(0,r.toast)({color:"success"})}}(e,t,0,n,o)}})}};t.voexchange.items.push(o),function(e,t){e.meta.setMeta(t)}(e,t)};var a=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(n(83)),r=n(1)},function(e,t,n){var a=n(166);"string"==typeof a&&(a=[[e.i,a,""]]);var i={transform:void 0};n(4)(a,i);a.locals&&(e.exports=a.locals)},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,".wfm-setrule-bill-contain .u-breadcrumb {\n  border-radius: 0;\n  margin-bottom: 0;\n  background-color: #fff;\n}\n",""])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tableModelConfirm=t.searchBtnClick=t.afterEvent=t.initTemplate=t.buttonClick=void 0;var a=s(n(168)),i=s(n(169)),r=s(n(170)),o=s(n(171)),l=s(n(172));function s(e){return e&&e.__esModule?e:{default:e}}t.buttonClick=a.default,t.initTemplate=i.default,t.afterEvent=r.default,t.searchBtnClick=o.default,t.tableModelConfirm=l.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){switch(t){case"add":e.editTable.addRow(i,0),e.editTable.setValByKeyAndIndex(i,0,"m_status",{value:"add",dispaly:"add"}),e.button.setDisabled({add:!0});var n=e.editTable.getNumberOfRows(i);n>1&&setTimeout((function(){for(var t=1;t<n;t++)e.editTable.setEditableRowByIndex(i,t,!1)}),0);break;case"save_rule":var r=e.getUrlParam("pk_vochange"),o=e.editTable.getAllData("changerule"),l=e.editTable.getAllData("splitrule"),s={changerule:{changerule:o},splitrule:{splitrule:l},pk_vochange:r};(0,a.ajax)({url:"/nccloud/riart/billexchange/billMappingSave.do",method:"POST",data:s,success:function(e){var t=e.success,n=e.data;t&&"success"==n.result&&(0,a.toast)({content:this.state.json["13050213-000000"],color:e.data.result}),t&&"success"!=n.result&&(0,a.toast)({content:e.data.message,color:e.data.result})},error:function(e){console.log(e),alert(e.message)}});break;case"cancel_rule":e.linkTo("/uap/wfm/billChangeRule/list")}};var a=n(1),i=(a.base.Message,"billChangeRule")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.MultiInit.getMultiLang({moduleId:"1022-13050213",domainName:"uap",callback:function(t,n,a){if(n){var i={code:"13050213",pageid:"1305021301",changerule:{items:[{itemtype:"input",visible:!0,width:"220px",label:t["13050213-000019"],disabled:!0,required:!0,attrcode:"dest_attr"},{itemtype:"input",visible:!1,label:t["13050213-000020"],disabled:!0,required:!1,attrcode:"src_billtype"},{itemtype:"input",visible:!0,width:"220px",label:t["13050213-000021"],disabled:!0,attrcode:"dest_attrname"},{itemtype:"select",visible:!0,label:t["13050213-000022"],required:!0,attrcode:"ruleType",options:[{display:"",value:100},{display:t["13050213-000023"],value:1},{display:t["13050213-000024"],value:2},{display:t["13050213-000025"],value:3}]},{itemtype:"input",visible:!0,width:"240px",label:t["13050213-000026"],disabled:!0,attrcode:"ruleData"},{itemtype:"input",visible:!0,width:"220px",label:t["13050213-000027"],disabled:!0,attrcode:"ruledata_name"}],moduletype:"table",pagination:!0,code:"changerule",status:"browse",name:t["13050213-000028"]},splitrule:{items:[{itemtype:"label",visible:!0,label:t["13050213-000029"],disabled:!0,required:!0,attrcode:"itemtype"},{itemtype:"input",visible:!1,label:t["13050213-000030"],attrcode:"item"},{itemtype:"label",visible:!0,disabled:!0,width:"280px",label:t["13050213-000030"],attrcode:"itemname"},,{itemtype:"checkbox_switch",visible:!0,width:"80px",label:t["13050213-000031"],disabled:!0,attrcode:"ismust"},{itemtype:"number",visible:!0,width:"80px",label:t["13050213-000032"],required:!1,attrcode:"timespace"},{itemtype:"checkbox_switch",visible:!0,width:"80px",label:t["13050213-000033"],attrcode:"selected"},{itemtype:"label",visible:!1,label:"pk_vochange_s",attrcode:"pk_vochange_s"},{itemtype:"label",visible:!1,label:"pk_vochange",attrcode:"pk_vochange"},{itemtype:"label",visible:!1,label:"pk_vosplititem",attrcode:"pk_vosplititem"}],moduletype:"table",pagination:!0,code:"splitrule",status:"browse",name:t["13050213-000028"]},relation:{}};e.meta.setMeta(i)}}})};var a=n(1);i(n(64)),i(n(65)),i(n(84));function i(e){return e&&e.__esModule?e:{default:e}}a.base.NCPopconfirm,a.base.NCIcon,a.base.NCMessage,a.high.Refer,a.high.FormulaEditor},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,a,i,r,o){("selected"==n&&a&&e.editTable.setEditableRowKeyByRowId(t,i[0].rowid,"timespace",!0),"selected"!=n||a||e.editTable.setEditableRowKeyByRowId(t,i[0].rowid,"timespace",!1),"ruleType"===n&&"3"===a&&this.setState({isShow:!0}),"src_billtype"==n)&&e.meta.getMeta().billChangeRule.items.map((function(e){"dest_billtype"==e.attrcode&&(e.queryCondition={billtypecode:a.refcode,ExtRefSqlBuilder:"nccloud.web.riart.billtype.ref.action.BillChangeDestBillTypeConditionRef"}),"src_transtype"==e.attrcode&&(e.queryCondition={parentbilltype:a.refcode})}));if("dest_billtype"==n){e.meta.getMeta().billChangeRule.items.map((function(e){"dest_transtype"==e.attrcode&&(e.queryCondition={parentbilltype:a.refcode})}));var l=e.editTable.getAllRows(t,!1);if(null!=l&&l.length>1)for(var s=1;s<l.length;s++)if(""!==l[s].values.src_transtype.value&&""!=l[s].values.dest_transtype.value&&l[s].values.src_billtype.display===l[0].values.src_billtype.display&&l[s].values.dest_billtype.value===a.refcode){e.editTable.setValByKeyAndIndex(t,0,"frontClass",l[s].values.frontClass),e.editTable.setValByKeyAndIndex(t,0,"backClass",l[s].values.backClass),e.editTable.setValByKeyAndIndex(t,0,"src_billui",l[s].values.src_billui),e.editTable.setValByKeyAndIndex(t,0,"src_qrytemplate",l[s].values.src_qrytemplate),e.editTable.setValByKeyAndIndex(t,0,"src_nodekey",l[s].values.src_nodekey),e.editTable.setValByKeyAndIndex(t,0,"reserveFrontClass",l[s].values.reserveFrontClass),e.editTable.setValByKeyAndIndex(t,0,"reserveBackClass",l[s].values.reserveBackClass);break}}};var a=n(1);i(n(84)),i(n(64)),i(n(65));function i(e){return e&&e.__esModule?e:{default:e}}a.high.FormulaEditor},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(null==t)(0,a.ajax)({url:"/nccloud/riart/billtype/billChangeRule.do",success:function(t){var n=t.success,a=t.data;n&&(a&&a[i]?e.editTable.setTableData(i,t.data[i]):e.editTable.setTableData(i,{rows:[]}))}});else{(0,a.ajax)({url:"/nccloud/riart/billtype/billChangeRuleCondition.do",data:t,success:function(t){var n=t.success,a=t.data;n&&(a&&a[i]?e.editTable.setTableData(i,t.data[i]):e.editTable.setTableData(i,{rows:[]}))}})}};var a=n(1),i="billChangeRule"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){console.log("AAAA")};n(1)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=s(n(2)),r=n(1),o=n(0),l=s(n(174));function s(e){return e&&e.__esModule?e:{default:e}}var u=r.base.NCFormControl,c=(r.base.NCSelect,r.base.NCButton),p=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"clickAction",value:function(e){switch(e){case"setWBField":this.props.modal.show("wbfield",{title:"设置回写字段",size:"lg",noFooter:!0,content:i.default.createElement(l.default,{props:this.props})})}}},{key:"render",value:function(){var e=this,t=this.props.from,n=this.props.target,a=this.props.modal.createModal;return t=o.attributesList.get(t),n=o.attributesList.get(n),t=t.transtype?t.transtypename:t.billtypename,n=n.transtype?n.transtypename:n.billtypename,i.default.createElement("div",{className:"generalInput"},a("wbfield"),i.default.createElement("p",null,i.default.createElement("span",null,"单据类型"),i.default.createElement("div",{className:"inputBox"},i.default.createElement(u,{fieldid:"exchangevo_pane",value:t,disabled:!0}))),i.default.createElement("p",null,i.default.createElement("span",null,"回写字段"),i.default.createElement("div",{className:"inputBox"},i.default.createElement(u,{value:this.props.value.actionConstricts?"已设置":"未设置",disabled:!0}),i.default.createElement(c,{onClick:function(){e.clickAction("setWBField")}},"编辑"))),i.default.createElement("p",null,i.default.createElement("span",null,"回写控制"),i.default.createElement("div",{className:"inputBox"},i.default.createElement(u,null))),i.default.createElement("p",null,i.default.createElement("span",{className:"long"},"目标单据类型"),i.default.createElement("div",{className:"inputBox"},i.default.createElement(u,{value:n,disabled:!0}))))}}]),t}(i.default.Component);t.default=p=(0,r.createPage)({})(p)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(2),r=s(i),o=n(1),l=s(n(175));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"tableInitData",value:function(){}},{key:"componentDidMount",value:function(){this.tableInitData()}},{key:"buttonClick",value:function(e,t,n){switch(t){case"addRow":this.props.editTable.addRow("wbfield");break;case"delRow":var a=this.props.editTable.getCheckedRows("wbfield"),i=[];if(a&&a.length>0){for(var r=0;r<a.length;r++)i.push(a[r].index);this.props.editTable.deleteTableRowsByIndex("wbfield",i,!0)}else toast({content:"请选择要删除的行",color:"warning"});break;case"ok":var o=[],l=this.props.editTable.getAllRows("wbfield");for(var s in l){var u=l[s].values.partiType.value,c=l[s].values.participant.value,p=l[s].values.participant.display;""!=c&&o.push({parnter_name:p,parnter_pk:c,parnter_type:u})}this.props.props.value.partners=o,this.Closemodal(this);break;case"cancel":this.Closemodal(this)}}},{key:"Closemodal",value:function(e){e.props.props.modal.close("wbfield");var t=ReactDOM.findDOMNode(e);t&&ReactDOM.unmountComponentAtNode(t)}},{key:"afterEvent",value:function(){return!0}},{key:"beforeEvent",value:function(){return!0}},{key:"render",value:function(){var e=this.props;console.log("wbdate",e.props.value);var t=e.button,n=e.editTable.createEditTable,a=t.createButtonApp;return r.default.createElement("div",null,a({area:"page_header",buttonLimit:4,onButtonClick:this.buttonClick.bind(this),popContainer:document.querySelector(".footerBtn")}),n("wbfield",{showIndex:!0,showCheck:!0,onAfterEvent:this.afterEvent.bind(this),onBeforeEvent:this.beforeEvent.bind(this)}),a({area:"page_footer",buttonLimit:4,onButtonClick:this.buttonClick.bind(this),popContainer:document.querySelector(".footerBtn")}))}}]),t}(i.Component);t.default=u=(0,o.createPage)({initTemplate:l.default})(u)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){!function(e,t){e.meta.setMeta(t)}(e,{wbfield:{moduletype:"table",status:"edit",items:[{attrcode:"wbfield",required:!1,visible:!0,itemtype:"refer",label:"回写字段",width:"150px"},{attrcode:"sourceAnalysis",required:!1,visible:!0,itemtype:"select",label:"来源分析方式",width:"150px",options:[{value:"01",display:"差异"},{value:"02",display:"全部"}]},{attrcode:"tarfield",required:!1,visible:!0,itemtype:"refer",label:"目标字段",width:"150px"},{attrcode:"writeModel",required:!1,visible:!0,itemtype:"select",label:"目标写入方式",width:"150px",options:[{value:"01",display:"累加"},{value:"02",display:"覆盖"}]}]}}),e.button.setButtons([{id:"0001A41000000006J5B1",btncolor:"button_secondary",type:"general_btn",key:"addRow",title:"增行",area:"page_header",children:[]},{id:"0001A41000000006J5B1",btncolor:"button_secondary",type:"general_btn",key:"delRow",title:"删行",area:"page_header",children:[]},{id:"0001A41000000006J5B1",btncolor:"button_main",type:"general_btn",key:"ok",title:"确定",keyboard:"alt+y",area:"page_footer",children:[]},{id:"0001A41000000006J5B1",btncolor:"button_secondary",type:"general_btn",key:"cancel",title:"取消",keyboard:"alt+n",area:"page_footer",children:[]}])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=s(n(2)),r=n(1),o=n(0),l=s(n(40));function s(e){return e&&e.__esModule?e:{default:e}}var u=r.base.NCFormControl,c=r.base.NCSelect,p=(r.base.NCButton,c.NCOption),d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={busiType:e.value.busiType,busiflowCode:e.value.busicode,busiflowName:e.value.businame,def2:e.value.defstr2,def3:e.value.defstr3,def4:e.value.defstr4,def5:e.value.defstr5,priority:e.value.priority,busiflowCode2:e.value.mnecode,busiflowOrg:n.getOrgs(e.value.busiflowOrg)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"getOrgs",value:function(e){var t=this.getKeyValue(e)[0],n=this.getKeyValue(e)[1],a=[];for(var i in t){var r={refpk:t[i],refname:n[i]};a[i]=r}return a}},{key:"getKeyValue",value:function(e){if(!e)return[null];var t=new Array,n=new Array;for(var a in e)t.push(a),n.push(e[a]);return[t,n]}},{key:"countbyte",value:function(e){for(var t=0,n=0;n<e.length;n++){var a=e.charAt(n);/^[\u0000-\u00ff]$/.test(a)?t+=1:t+=2}return t}},{key:"render",value:function(){var e=this;return this.props.value.priority||(this.props.value.priority="0",this.state.priority="0"),this.props.value.busiType||(this.props.value.busiType="0",this.state.busiType="0"),i.default.createElement("div",{className:"generalInput"},i.default.createElement("p",null,i.default.createElement("span",{className:"long"},o.multiLang["bppattr-busiflow-busicode"]),i.default.createElement("div",{className:"inputBox"},i.default.createElement(u,{fieldid:"busicode_input",value:this.state.busiflowCode,onChange:function(t){e.countbyte(t)<=20&&(e.setState({busiflowCode:t}),e.props.updateAttr({busicode:t}))}}))),i.default.createElement("p",null,i.default.createElement("span",{className:"long"},o.multiLang["bppattr-busiflow-businame"]),i.default.createElement("div",{className:"inputBox"},i.default.createElement(u,{fieldid:"businame_input",value:this.state.busiflowName,onChange:function(t){e.setState({busiflowName:t}),e.props.updateAttr({businame:t})}}))),i.default.createElement("p",null,i.default.createElement("span",{className:"long"},o.multiLang["bppattr-busiflow-busitype"]),i.default.createElement("div",{className:"inputBox"},i.default.createElement(c,{fieldid:"busitype_select",value:this.state.busiType,onChange:function(t){e.setState({busiType:t}),e.props.updateAttr({busiType:t})}},i.default.createElement(p,{value:"0"},o.multiLang["bppattr-busiflow-purchase"]),i.default.createElement(p,{value:"1"},o.multiLang["bppattr-busiflow-sale"]),i.default.createElement(p,{value:"2"},o.multiLang["bppattr-busiflow-pur_sale"]),i.default.createElement(p,{value:"3"},o.multiLang["bppattr-busiflow-Recei_payable"]),i.default.createElement(p,{value:"4"},o.multiLang["bppattr-busiflow-cost"]),i.default.createElement(p,{value:"9"},o.multiLang["bppattr-busiflow-asset"]),i.default.createElement(p,{value:"6"},o.multiLang["bppattr-busiflow-hr"]),i.default.createElement(p,{value:"7"},o.multiLang["bppattr-busiflow-allocation"]),i.default.createElement(p,{value:"8"},o.multiLang["bppattr-busiflow-capital"]),i.default.createElement(p,{value:"5"},o.multiLang["bppattr-busiflow-other"])))),i.default.createElement("p",null,i.default.createElement("span",null,o.multiLang["bppattr-busiflow-orgs"]),i.default.createElement("div",{className:"inputBox"},i.default.createElement(l.default,{value:this.state.busiflowOrg,onChange:function(t){var n={},a=[];for(var i in t)n[t[i].refpk]=t[i].refname,a[i]={refpk:t[i].refpk,refname:t[i].refname};e.setState({busiflowOrg:a}),e.props.value.busiflowOrg=n},isAlwaysEmitOnChange:!0}))),i.default.createElement("p",null,i.default.createElement("span",null,o.multiLang["bppattr-busiflow-defstr2"]),i.default.createElement("div",{className:"inputBox"},i.default.createElement(u,{fieldid:"busidef2_input",value:this.state.def2,onChange:function(t){e.setState({def2:t}),e.props.updateAttr({defstr2:t})}}))),i.default.createElement("p",null,i.default.createElement("span",null,o.multiLang["bppattr-busiflow-defstr3"]),i.default.createElement("div",{className:"inputBox"},i.default.createElement(u,{fieldid:"busidef3_input",value:this.state.def3,onChange:function(t){e.setState({def3:t}),e.props.updateAttr({defstr3:t})}}))),i.default.createElement("p",null,i.default.createElement("span",null,o.multiLang["bppattr-busiflow-defstr4"]),i.default.createElement("div",{className:"inputBox"},i.default.createElement(u,{fieldid:"busidef4_input",value:this.state.def4,onChange:function(t){e.setState({def4:t}),e.props.updateAttr({defstr4:t})}}))),i.default.createElement("p",null,i.default.createElement("span",null,o.multiLang["bppattr-busiflow-defstr5"]),i.default.createElement("div",{className:"inputBox"},i.default.createElement(u,{fieldid:"busidef5_input",value:this.state.def5,onChange:function(t){e.setState({def5:t}),e.props.updateAttr({defstr5:t})}}))),i.default.createElement("p",null,i.default.createElement("span",null,o.multiLang["bppattr-busiflow-mnecode"]),i.default.createElement("div",{className:"inputBox"},i.default.createElement(u,{fieldid:"busiflowCode2_input",value:this.state.busiflowCode2,onChange:function(t){e.setState({busiflowCode2:t}),e.props.updateAttr({mnecode:t})}}))),i.default.createElement("p",null,i.default.createElement("span",null,o.multiLang["bppattr-busiflow-priority"]),i.default.createElement("div",{className:"inputBox"},i.default.createElement(u,{fieldid:"priority_input",value:this.state.priority,defaultValue:"0",onChange:function(t){e.setState({priority:t}),e.props.updateAttr({priority:t})}}))))}}]),t}(i.default.Component);t.default=d=(0,r.createPage)({})(d)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(0),r=function(e){return e&&e.__esModule?e:{default:e}}(n(2));var o=n(1).base.NCFormControl,l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setName=function(e){n.props.updateAttr({name:n.state.name}),n.props.setName(n.state.name)},n.change=function(e,t){"name"==t&&n.setState({name:e})},n.state={name:e.value.name},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({name:e.value.name})}},{key:"render",value:function(){var e=this,t=this.state.name;return r.default.createElement("div",{className:"generalInput"},r.default.createElement("p",null,r.default.createElement("span",null,i.multiLang["bppattr-ps-name"]),r.default.createElement("div",{className:"inputBox"},r.default.createElement(o,{fieldid:"routerName_input",value:t,onChange:function(t){return e.change(t,"name")},onBlur:this.setName}))))}}]),t}(r.default.PureComponent);t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Priority=t.Condition=t.Advanced=t.Participants=t.MessageReminding=t.FlowAttr=t.BranchMerge=t.Application=t.Apparent=t.General=void 0;var a=f(n(179)),i=f(n(186)),r=f(n(187)),o=f(n(208)),l=f(n(217)),s=f(n(253)),u=f(n(263)),c=f(n(275)),p=f(n(295)),d=f(n(303));function f(e){return e&&e.__esModule?e:{default:e}}t.General=a.default,t.Apparent=i.default,t.Application=r.default,t.BranchMerge=o.default,t.FlowAttr=l.default,t.MessageReminding=s.default,t.Participants=u.default,t.Advanced=c.default,t.Condition=p.default,t.Priority=d.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=f(n(2)),o=n(1),l=n(180),s=n(182),u=f(n(18)),c=n(0),p=n(6),d=f(n(40));function f(e){return e&&e.__esModule?e:{default:e}}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(184);var g=o.base.NCFormControl,y=o.base.NCSelect,b=y.NCOption,v=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.change=function(e,t){"name"==t&&n.setState({stateName:e}),"describe"==t&&n.setState({stateDescribe:e})},n.setName=function(e){n.props.updateAttr({name:n.state.stateName}),n.props.setName(n.state.stateName)},n.setSubflowId=function(e,t,i){if(t!=i){console.log("test",i);var r=n.props.flows.displayFlowIds;if(c.subflowsList.getByEntityId(e)&&(i=i||n.props.value.subflowId,c.subflowsList.delEntityFromFlow(i,e),n.usableSubflows.some((function(e){return e.guid==n.props.value.subflowId}))||c.subflowsList.delete([n.props.value.subflowId]),r.includes(i))){var l=i,s=r.findIndex((function(e){return e==i})),d=n.props.flows.activeIndex,f=n.props.flows.id;n.props.closeTab(l,f,s,d,"Y")}var g=n.usableSubflows.find((function(e){return e.guid==t}));if(n.setState({setSubflowName:g?g.nameAndVersion:"",setSubflowId:g?g.guid:""}),c.attributesList.get(e).general.subflowId=t,n.props.setSubflowId(e,t),t){var y=c.subflowsList.getByFlowId(t);if(y&&y.entityId!=e&&!y.entityId.includes(e))return void c.subflowsList.addEntityToFlow(t,e)}(0,o.ajax)({url:"/nccloud/riawf/pf/querySubFlowContent.do",method:"POST",data:{flowId:t,billType:c.flowContext.get().billType,pk_org:c.flowContext.get().pk_org},success:function(t){if(t.data){var n,i=t.data.flow;console.log("change-subflow",i);var r=[];i.entity.forEach((function(e){e.height=40,e.width=40,e.x=Number(e.x),e.y=Number(e.y);var t={id:e.id,isAnchored:!1,isSelected:!1,anchor:{x:e.x,y:e.y}};r.push(t)})),!c.attributesList.get(i.flowId)&&c.attributesList.add(i.attributes);var o=i.entity.map((function(e){return a({},e,{linksTo:e.linksTo?e.linksTo.map((function(t){return a({},t,{points:(0,u.default)(e,(0,p.getEntity)(i.entity,t.target),c.attributesList.get(t.linkId).apparent.lineType)})})):[]})}));c.subflowsList.push((m(n={},i.flowId,{entity:o,metaEntity:r,history:{past:[],future:[],lastAction:"@@INIT"},artboard:{zoom:1,canvasArtboard:{x:0,y:0}}}),m(n,"flowName",i.flowName),m(n,"flowId",i.flowId),m(n,"entityId",e),n))}else console.error("subflow-data",t)}})}},n.setDescribe=function(e){n.props.updateAttr({describe:n.state.stateDescribe})},n.showItems=function(e,t,a){var i=e.id,o=e.name,l=e.version,u=e.createTime,p=(e.subflowId,n.state),f=(p.stateName,p.stateDescribe,p.setSubflowName),m=p.setSubflowId;switch(t){case"finish":case"start":return r.default.createElement("div",{className:"generalInput"},r.default.createElement("p",null,r.default.createElement("span",null,c.multiLang["attr-general-000000"]),r.default.createElement("div",{className:"inputBox"},r.default.createElement(g,{value:o,fieldid:"title_inpput",disabled:!0}))),r.default.createElement("p",null,r.default.createElement("span",null,c.multiLang["attr-general-000001"]),r.default.createElement("div",{className:"inputBox"},r.default.createElement(g,{disabled:!0,fieldid:"activetype_inpput",value:c.activityNameMap[t]}))));case"check":case"lister":case"auto":case"manual":case"dummy":return r.default.createElement("div",{className:"generalInput"},r.default.createElement("p",null,r.default.createElement("span",null,c.multiLang["attr-general-000002"]),r.default.createElement("div",{className:"inputBox"},r.default.createElement(g,{disabled:!0,fieldid:"systemid_inpput",value:i}))),a("attrname",{setVisibleByForm:!0,onAfterEvent:s.afterEvent.bind(n)}),r.default.createElement("p",null),r.default.createElement("p",null,r.default.createElement("span",null,c.multiLang["attr-general-000001"]),r.default.createElement("div",{className:"inputBox"},r.default.createElement(g,{disabled:!0,fieldid:"activetype_inpput",value:c.activityTypeMap[t]}))));case"subflow":return r.default.createElement("div",{className:"generalInput"},r.default.createElement("p",null,r.default.createElement("span",null,c.multiLang["attr-general-000002"]),r.default.createElement("div",{className:"inputBox"},r.default.createElement(g,{disabled:!0,fieldid:"systemid_inpput",value:i}))),a("attrname",{setVisibleByForm:!0,onAfterEvent:s.afterEvent.bind(n)}),r.default.createElement("p",null),r.default.createElement("p",null,r.default.createElement("span",null,c.multiLang["attr-general-000001"]),r.default.createElement("div",{className:"inputBox"},r.default.createElement(g,{disabled:!0,fieldid:"activetype_inpput",value:c.activityTypeMap[t]}))),r.default.createElement("p",null,r.default.createElement("span",null,c.multiLang["attr-general-000005"]),r.default.createElement("div",{className:"inputBox"},r.default.createElement(y,{value:f,showClear:!1,fieldid:"subflow_inpput",onChange:function(e){return n.setSubflowId(i,e,m)}},c.usableSubflowList.get().map((function(e){return r.default.createElement(b,{value:e.guid},e.nameAndVersion)}))))));case"link":return r.default.createElement("div",{className:"generalInput"},r.default.createElement("p",null,r.default.createElement("span",null,c.multiLang["attr-general-000002"]),r.default.createElement("div",{className:"inputBox"},r.default.createElement(g,{disabled:!0,fieldid:"systemid_inpput",value:i}))),a("attrname",{setVisibleByForm:!0,onAfterEvent:s.afterEvent.bind(n)}),r.default.createElement("p",null));default:return r.default.createElement("div",{className:"generalInput"},r.default.createElement("p",null,r.default.createElement("span",null,c.multiLang["attr-general-000002"]),r.default.createElement("div",{className:"inputBox"},r.default.createElement(g,{disabled:!0,fieldid:"systemid_inpput",value:i}))),a("attrname",{setVisibleByForm:!0,onAfterEvent:s.afterEvent.bind(n)}),r.default.createElement("p",null),r.default.createElement("p",null,r.default.createElement("span",null,c.multiLang["attr-general-000006"]),r.default.createElement("div",{className:"inputBox"},r.default.createElement(g,{disabled:!0,fieldid:"version_inpput",value:l}))),r.default.createElement("p",null,r.default.createElement("span",null,c.multiLang["attr-general-000007"]),r.default.createElement("div",{className:"inputBox"},r.default.createElement(g,{disabled:!0,fieldid:"create_inpput",value:u}))),r.default.createElement("p",null,r.default.createElement("span",null,c.multiLang["attr-general-000008"]),r.default.createElement(d.default,{fieldid:"businessUnitTreeRef_refer",value:n.state.currency,isTreelazyLoad:!0,onChange:function(e){n.setState({currency:e}),n.props.updateAttr({usageorg:e})},isMultiSelectedEnabled:!0,placeholder:c.multiLang["attr-general-000009"]})))}};var i=[],l=c.flowContext.get(),f=(l.pk_org,l.orgcode,l.isOrgType),v=l.cur_refpk,h=l.cur_refcode,w=l.cur_refname,k=c.urlConst.get("state");return"curflow"===e.type&&(e.value.usageorg&&""!==e.value.usageorg?i=e.value.usageorg:"add"===k&&"Y"===f&&(i=[{refpk:v,refcode:h,refname:w}]),n.props.updateAttr({usageorg:i})),n.state={stateName:e.value.name,stateDescribe:e.value.describe,setSubflowName:"",setSubflowId:"",currency:i,languageMeta:[]},n.general=e.value,n.usableSubflows=c.usableSubflowList.get(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){if(this.props.value.name){var e={};e=this.props.value.name.value&&this.props.value.name.value.name?{name:{value:this.props.value.name.value.name.value},describe:{value:this.props.value.describe}}:{name:{value:this.props.value.name},describe:{value:this.props.value.describe}},this.props.form.setFormItemsValue("attrname",e)}else""===this.props.value.name&&this.props.form.setFormItemsValue("attrname",{name:{value:""},describe:{value:this.props.value.describe}})}},{key:"componentWillReceiveProps",value:function(e){this.general=e.value,this.setState({stateName:e.value.name,stateDescribe:e.value.describe});var t=e.value.multiLangName,n={};if(t?(n={describe:{value:e.value.describe},name:{value:t.text},name2:{value:t.text2},name3:{value:t.text3},name4:{value:t.text4},name5:{value:t.text5},name6:{value:t.text6}},e.form.setFormItemsValue("attrname",n)):e.value.name?(n=e.value.name.value?{name:{value:e.value.name.value.name.value},describe:{value:e.value.describe}}:{name:{value:e.value.name},describe:{value:e.value.describe}},e.form.setFormItemsValue("attrname",n)):""===e.value.name&&e.form.setFormItemsValue("attrname",{name:{value:""},describe:{value:e.value.describe}}),"subflow"==e.value.type&&e.value.subflowId!==this.props.value.subflowId){var a=this.usableSubflows.find((function(t){return t.guid==e.value.subflowId}));this.setState({setSubflowName:a?a.nameAndVersion:"",setSubflowId:a?a.guid:""})}}},{key:"render",value:function(){var e=this.props.type,t=this.props.form.createForm;return r.default.createElement("div",{className:"partBox"},r.default.createElement("span",{className:"attrContentTitle"},c.multiLang["attr-general-000010"]," "),this.showItems(this.props.value,e,t))}}]),t}(r.default.Component);t.default=v=(0,o.createPage)({initTemplate:l.initTemplate})(v)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initTemplate=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(181));t.initTemplate=a.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=[];(0,i.ajax)({url:"/nccloud/riacc/bgtask/querylangmeta.do",async:!1,success:function(e){var n=e.success,a=e.data;n&&(t=a)},error:function(e){(0,i.toast)({content:e.message,color:"danger"})}}),function(e,t){e.meta.setMeta(t)}(e,{attrname:{moduletype:"form",items:[{label:a.multiLang["attr-general-000003"],attrcode:"name",required:!1,itemtype:"residtxt",languageMeta:t,visible:!0},{label:a.multiLang["attr-general-000004"],attrcode:"describe",visible:!0,itemtype:"input"}],status:"edit"}})};var a=n(0),i=n(1)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.afterEvent=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(183));t.afterEvent=a.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,o){if("name"===n){if(""==r.value.name.value&&(e.form.setFormItemsValue("attrname",{name:{value:this.props.value.name}}),"check"==e.type||"lister"==e.type||"manual"==e.type))return void(0,a.toast)({title:i.multiLang["attr-general-000012"],color:"warning"});if(r.value.name2&&r.value.name2.value);else{var l=i.attributesList.data();if(Object.keys(l).some((function(e){return"link"!=l[e].general.type&&l[e].general.name==r.value.name.value})))return e.form.setFormItemsValue("attrname",{name:{value:this.props.value.name}}),this.props.value.name!=r.value.name.value&&(0,a.toast)({title:i.multiLang["attr-general-000011"],color:"warning"}),void this.setState({stateName:this.props.value.name})}this.setState({stateName:r.value.name.value}),e.updateAttr({name:r.value.name.value}),e.updateAttr({multiLangName:{text:r.value.name.value,text2:r.value.name2?r.value.name2.value:r.value.name2,text3:r.value.name3?r.value.name3.value:r.value.name3,text4:r.value.name4?r.value.name4.value:r.value.name4,text5:r.value.name5?r.value.name5.value:r.value.name5,text6:r.value.name6?r.value.name6.value:r.value.name6}}),e.setName(r.value.name.value)}else"describe"===n&&(e.updateAttr({describe:r.value}),this.setState({stateDescribe:r.value}))};var a=n(1),i=n(0)},function(e,t,n){var a=n(185);"string"==typeof a&&(a=[[e.i,a,""]]);var i={transform:void 0};n(4)(a,i);a.locals&&(e.exports=a.locals)},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,"/*\n * @Author: yanxbm \n * @Date: 2018-12-19 18:04:20 \n * @Last Modified by: yanxbm\n * @Last Modified time: 2019-05-08 09:49:58\n */\n.partBox {\n  padding: 2px;\n  margin: 2px;\n}\n.partBox .group-form-wrapper {\n  background: #fff;\n}\n.partBox .lightapp-component-form {\n  background: #fff;\n}\n.partBox .lightapp-component-form .form-item .form-item-label {\n  width: 70px;\n  margin-right: 20px;\n  padding-right: 0;\n  max-width: auto;\n  min-width: auto;\n  font-size: 12px;\n}\n.partBox .lightapp-component-form .form-item .form-item-control {\n  padding-right: 0;\n}\n.partBox .form-item-control {\n  width: calc(100% - 100px) !important;\n}\n.partBox .attrContentTitle {\n  margin: 8px 0 15px 4px;\n  display: inline-block;\n  color: #111111;\n  font-size: 15px;\n}\n.partBox .generalInput {\n  margin-bottom: 5px;\n  margin-top: 5px;\n  padding-right: 5px;\n  position: relative;\n}\n.partBox .generalInput input {\n  font-size: 10px;\n  color: #555 !important;\n}\n.partBox .generalInput p.marginTop {\n  margin-top: 8px;\n  margin-bottom: 0;\n}\n.partBox .generalInput p {\n  margin-bottom: 8px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.partBox .generalInput p > span {\n  width: 70px;\n  text-align: right;\n  display: inline-block;\n  color: #000000a6;\n  font-size: 12px;\n  margin-right: 20px;\n  line-height: 15px;\n}\n.partBox .generalInput p span.buleTitle {\n  color: #60B0F7;\n  font-size: 13px;\n  text-decoration: underline;\n  cursor: pointer;\n}\n.partBox .generalInput p .inputBox {\n  width: calc(100% - 100px);\n}\n.partBox .generalInput p .refer-wrapper {\n  width: calc(100% - 100px);\n}\n.partBox .generalInput p .refer-wrapper .refer {\n  width: -webkit-fit-content;\n  width: -moz-fit-content;\n  width: fit-content;\n}\n.partBox .generalInput .partBtn {\n  width: 30px;\n  height: 18px;\n  min-width: auto;\n  line-height: 15px;\n}\n",""])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(n(2)),r=(n(1),n(0));var o=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"render",value:function(){return i.default.createElement("div",{className:"partBox"},i.default.createElement("span",{className:"attrContentTitle"},r.multiLang["attr-apparent-000000"]),i.default.createElement("div",{className:"generalInput"}))}}]),t}(i.default.Component);t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=p(n(2)),r=n(1),o=n(188),l=n(190),s=n(0),u=p(n(85)),c=p(n(199));function p(e){return e&&e.__esModule?e:{default:e}}n(206);r.base.NCFormControl,r.base.NCRadio;var d=r.base.NCButton,f=(r.base.NCCheckbox,r.base.NCSelect,"application"),m=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.handleClick=function(e){switch(e){case"relatedData":(0,u.default)({newProps:n.props,queryParams:{data:{},url:""},call:n.noticeCall});break;case"workFlowParameter":var t=n.props.form.getFormItemsValue(f,"workflowGadgetName");(0,c.default)({newProps:n.props,queryParams:{data:t,url:""},call:n.noticeCall})}};var a=s.urlConst.get("flowType");return n.state={flowType:a,relatedDataDisplay:null,workFlowParameterDisplay:null,workFlowParameterShow:!1,relatedDataShow:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){this.showValue(this.props,this.props.value),this.showRelatedData(this.props,this.props.value.applicationArgs),this.showWorkflowGadgetParam(this.props,this.props.value.workflowGadgetParam)}},{key:"componentWillReceiveProps",value:function(e){this.showValue(e,e.value),this.showRelatedData(e,e.value.applicationArgs),this.showWorkflowGadgetParam(e,e.value.workflowGadgetParam)}},{key:"showWorkflowGadgetParam",value:function(e,t){t?(t.length>20&&(t=t.substr(0,20)+"..."),this.setState({workFlowParameterDisplay:t})):this.setState({workFlowParameterDisplay:null})}},{key:"showRelatedData",value:function(e,t){if(t)if(t.length>0){for(var n="",a=0;a<t.length;a++)a===t.length-1?n+=t[a].multiLangName.text:n=n+t[a].multiLangName.text+",";n.length>12&&(n=n.substr(0,12)+"..."),this.setState({relatedDataDisplay:n})}else this.setState({relatedDataDisplay:null});else this.setState({relatedDataDisplay:null})}},{key:"showValue",value:function(e,t){var n=this.getShowData(e,t);"workflow"!==this.state.flowType&&"workflow_sub"!==this.state.flowType||("lister"===e.activeType||"manual"===e.activeType||"auto"===e.activeType?this.setState({workFlowParameterShow:!0}):this.setState({workFlowParameterShow:!1})),"auto"===e.activeType?this.setState({relatedDataShow:!1}):this.setState({relatedDataShow:!0}),e.form.setFormItemsValue(f,n)}},{key:"getShowData",value:function(e,t){var n={};if(t&&t.pk_workflowgadget&&e.updateAttr({workflowGadget:t.pk_workflowgadget}),t&&t.gadget_name&&e.updateAttr({workflowGadgetName:t.gadget_name}),t&&"{}"!==JSON.stringify(t))n={type:{value:this.transferApplicationType(t.type)},id:{value:this.transferApplicationId(t.id)},name:{value:t.name},applicationArgs:{value:t.applicationArgs},workflowGadgetName:{value:t.workflowGadget,display:t.workflowGadgetName}};else if(e.activeType)if("lister"===e.activeType)n={type:{value:s.multiLang["attr-application-000004"]},id:{value:"MAKEBILL_ID"},name:{value:s.multiLang["attr-application-000006"]},applicationArgs:{value:null}},e.updateAttr({implementName:"Tool",id:"lister",name:s.multiLang["attr-application-000006"],type:"APPLICATION"});else if("subflow"===e.activeType)n={type:{value:s.multiLang["attr-application-000007"]},id:{value:"SUBFLOW_ID"},name:{value:s.multiLang["attr-application-000007"]},applicationArgs:{value:null}},e.updateAttr({implementName:"Subflow",id:"subflow",name:s.multiLang["attr-application-000007"],type:"SUBFLOW"});else{if("dummy"===e.activeType)return n={type:{value:s.multiLang["attr-application-000008"]},id:{value:"DUMMY"},name:{value:s.multiLang["attr-application-000008"]},applicationArgs:{value:null}},e.updateAttr({implementName:"Dummy",id:"dummy",name:s.multiLang["attr-application-000008"],type:"DUMMY"}),e.form.setItemsVisible(f,{type:!1,id:!1,name:!1,applicationArgs:!0}),n;"check"===e.activeType?(n={type:{value:s.multiLang["attr-application-000004"]},id:{value:"CHECKBILL_ID"},name:{value:s.multiLang["attr-application-000005"]},applicationArgs:{value:null}},e.updateAttr({implementName:"Tool",id:"check",name:s.multiLang["attr-application-000005"],type:"APPLICATION"})):"auto"===e.activeType&&(n={type:{value:s.multiLang["attr-application-000009"]},id:{value:"AUTO_ID"},name:{value:s.multiLang["attr-application-000010"]},applicationArgs:{value:null}},e.updateAttr({implementName:"Tool",id:"auto",name:s.multiLang["attr-application-000009"],type:"PROCEDURE"}))}else n={type:{value:s.multiLang["attr-application-000004"]},id:{value:"CHECKBILL_ID"},name:{value:s.multiLang["attr-application-000005"]},applicationArgs:{value:null}},e.updateAttr({implementName:"Tool",id:"check",name:s.multiLang["attr-application-000005"],type:"APPLICATION"});("workflow"===this.state.flowType||"workflow_sub"===this.state.flowType?"dummy"===t.id?e.form.setItemsVisible(f,{type:!1,id:!1,name:!1,applicationArgs:!0,workflowGadgetName:!1}):"subflow"===t.id?e.form.setItemsVisible(f,{type:!1,id:!1,name:!1,applicationArgs:!0,workflowGadgetName:!1}):e.form.setItemsVisible(f,{type:!0,id:!0,name:!0,applicationArgs:!0,workflowGadgetName:!0}):"dummy"===t.id?e.form.setItemsVisible(f,{type:!1,id:!1,name:!1,applicationArgs:!0,workflowGadgetName:!1}):"subflow"===t.id?e.form.setItemsVisible(f,{type:!1,id:!1,name:!1,applicationArgs:!0,workflowGadgetName:!1}):e.form.setItemsVisible(f,{type:!0,id:!0,name:!0,applicationArgs:!0,workflowGadgetName:!1}),"workflow"===this.state.flowType||"workflow_sub"===this.state.flowType)&&e.meta.getMeta()[f].items.map((function(t,n){if("workflowGadgetName"===t.attrcode){var a=[];if(e.workflowGadgetList){if("none"!=e.workflowGadgetList){for(var i=0;i<e.workflowGadgetList.length;i++){var r=e.workflowGadgetList[i],o={value:r.pk_workflowgadget,display:r.gadget_name};a.push(o)}t.options=a}}else;}}));return n}},{key:"transferApplicationType",value:function(e){return e?"APPLICATION"===e?s.multiLang["attr-application-000004"]:"SYNCHR"===e?s.multiLang["attr-application-000007"]:"PROCEDURE"===e?s.multiLang["attr-application-000009"]:s.multiLang["attr-application-000011"]:s.multiLang["attr-application-000004"]}},{key:"transferApplicationId",value:function(e){return e?"check"===e?"CHECKBILL_ID":"subflow"===e?"SUBFLOW_ID":"manual"===e?"MANUAL_ID":"dummy"===e?"DUMMY":"auto"===e?"AUTO_ID":"MAKEBILL_ID":"CHECKBILL_ID"}},{key:"render",value:function(){var e=this,t=this.props,n=t.form,a=t.modal,r=n.createForm,o=a.createModal;return i.default.createElement("div",{className:"partBox"},o("relatedData"),o("workFlowParameter"),i.default.createElement("span",{className:"attrContentTitle"},s.multiLang["attr-application-000004"]),r(f,{setVisibleByForm:!0,onAfterEvent:l.afterEvent.bind(this)}),i.default.createElement("div",{className:"generalInput"},this.state.workFlowParameterShow?i.default.createElement("div",null,i.default.createElement("p",{className:"marginTop"},i.default.createElement("span",null,s.multiLang["attr-application-000012"]," "),i.default.createElement(d,{className:"partBtn",fieldid:"workFlowParameter_btn",onClick:function(){e.handleClick("workFlowParameter")}},"···"),i.default.createElement("span",null,this.state.workFlowParameterDisplay))):"",this.state.relatedDataShow?i.default.createElement("p",null,i.default.createElement("span",null,s.multiLang["attr-application-000013"]," "),i.default.createElement(d,{className:"partBtn",fieldid:"relatedData_btn",onClick:function(){e.handleClick("relatedData")}},"···"),i.default.createElement("span",null,this.state.relatedDataDisplay)):""))}}]),t}(i.default.Component);t.default=m=(0,r.createPage)({initTemplate:o.initTemplate})(m)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initTemplate=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(189));t.initTemplate=a.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){!function(e,t){e.meta.setMeta(t)}(e,{application:{moduletype:"form",items:[{attrcode:"type",placeholder:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"input",disabled:!0,label:a.multiLang["attr-application-000000"]},{attrcode:"id",placeholder:"",leftspace:0,rightspace:0,required:!1,disabled:!0,visible:!0,itemtype:"input",label:a.multiLang["attr-application-000001"]},{attrcode:"name",placeholder:"",leftspace:0,rightspace:0,required:!1,visible:!0,disabled:!0,itemtype:"input",label:a.multiLang["attr-application-000002"]},{attrcode:"workflowGadgetName",placeholder:"",leftspace:0,rightspace:0,required:!1,visible:!0,showClear:!1,itemtype:"select",label:a.multiLang["attr-application-000003"],options:[]}],status:"edit"}})};var a=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.afterEvent=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(191));t.afterEvent=a.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,i,r){var o=null;i&&i.value&&i.value.key?o=i.value.key:i&&(o=i.value);switch(n){case"workflowGadgetName":e.updateAttr({workflowGadget:o,workflowGadgetName:i.display}),i&&r&&i.value!=r.value&&e.updateAttr({workflowGadgetParam:null}),e.updateAttr({classname:null,gadget_name:null,gadget_name2:null,gadget_name3:null,pk_workflowgadget:null})}a(e,t,n,o)};n(1);var a=function(e,t,n,a){}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(2),r=function(e){return e&&e.__esModule?e:{default:e}}(i),o=n(1),l=n(0),s=n(193);n(28);var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={billtype:l.flowContext.get().billType},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"initData",value:function(e){var t=[];if(e&&e.length>0)for(var n=0;n<e.length;n++){var a={values:{description:{value:e[n].multiLangName.text,display:e[n]._description},dataType:{value:e[n].dataType.type._value},initialValue:{value:e[n].initialValue},_id:{value:e[n]._id}}};"0"===e[n].dataType.type._value?a.values.dataType.display="String":"1"===e[n].dataType.type._value?a.values.dataType.display="Float":"2"===e[n].dataType.type._value?a.values.dataType.display="Integer":"3"===e[n].dataType.type._value?a.values.dataType.display="Reference":"4"===e[n].dataType.type._value?a.values.dataType.display="Datetime":"5"===e[n].dataType.type._value?a.values.dataType.display="Boolean":"6"===e[n].dataType.type._value&&(a.values.dataType.display="Performer"),t.push(a)}this.props.editTable.setTableData("relatedData",{rows:t})}},{key:"componentDidMount",value:function(){this.initStruData(),this.initData(this.props.preprops.value.applicationArgs)}},{key:"componentWillReceiveProps",value:function(e){}},{key:"initStruData",value:function(){var e=this;(0,o.ajax)({url:"/nccloud/riawf/pf/dataFieldMaker.do",data:{billType:e.state.billtype},async:!1,success:function(t){t.success;var n=t.data;"none"!=n.result?e.props.meta.getMeta().relatedData.items.map((function(e,t){switch(e.attrcode){case"description":for(var a=[],i=0;i<n.dataField.length;i++)a.push({value:n.dataField[i].multiLangName.text,display:n.dataField[i]._description});e.options=a;break;case"mapping":for(var r=[],o=0;o<n.dataField.length;o++)r.push({value:n.dataField[o].dataType.type._value,display:n.dataField[o].multiLangName.text});e.options=r;break;case"dataType":for(var l=[],s=0;s<n.dataField.length;s++)"0"===n.dataField[s].dataType.type._value?l.push({value:n.dataField[s].dataType.type._value,display:"String"}):"1"===n.dataField[s].dataType.type._value?l.push({value:n.dataField[s].dataType.type._value,display:"Float"}):"2"===n.dataField[s].dataType.type._value?l.push({value:n.dataField[s].dataType.type._value,display:"Integer"}):"3"===n.dataField[s].dataType.type._value?l.push({value:n.dataField[s].dataType.type._value,display:"Reference"}):"4"===n.dataField[s].dataType.type._value?l.push({value:n.dataField[s].dataType.type._value,display:"Datetime"}):"5"===n.dataField[s].dataType.type._value?l.push({value:n.dataField[s].dataType.type._value,display:"Boolean"}):"6"===n.dataField[s].dataType.type._value&&l.push({value:n.dataField[s].dataType.type._value,display:"Performer"});e.options=l}})):e.props.meta.getMeta().relatedData.items.map((function(e,t){switch(e.attrcode){case"description":case"dataType":e.options=[]}}))},error:function(){(0,o.toast)({color:"danger"})}})}},{key:"render",value:function(){var e=this.props,t=(e.editTable,e.button),n=(e.modal,this.props.editTable.createEditTable),a=t.createButtonApp;return r.default.createElement("div",null,r.default.createElement("div",{className:"topButton"},a({area:"page_header",buttonLimit:6,onButtonClick:s.buttonClick.bind(this),popContainer:document.querySelector(".footerBtn")})),n("relatedData",{showIndex:!0,showCheck:!0,onAfterEvent:s.afterEvent.bind(this),onBeforeEvent:s.beforeEvent.bind(this)}),r.default.createElement("div",{className:"bottomButton"},a({area:"page_footer",buttonLimit:6,onButtonClick:s.buttonClick.bind(this),popContainer:document.querySelector(".footerBtn")})))}}]),t}(i.Component);t.default=u=(0,o.createPage)({initTemplate:s.initTemplate})(u)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.beforeEvent=t.afterEvent=t.buttonClick=t.initTemplate=void 0;var a=l(n(194)),i=l(n(195)),r=l(n(196)),o=l(n(197));function l(e){return e&&e.__esModule?e:{default:e}}t.initTemplate=a.default,t.buttonClick=i.default,t.afterEvent=r.default,t.beforeEvent=o.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={relatedData:{moduletype:"table",status:"edit",items:[{attrcode:"description",visible:!0,itemtype:"select",width:"400px",label:a.multiLang["attr-attrmodel-000038"],options:[]},{attrcode:"dataType",required:!1,visible:!0,itemtype:"select",disabled:!0,label:a.multiLang["attr-attrmodel-000039"],options:[]},{attrcode:"initialValue",required:!1,visible:!0,itemtype:"input",label:a.multiLang["attr-attrmodel-000040"]},{attrcode:"isArray",required:!1,visible:!1,itemtype:"input",label:"isArray"},{attrcode:"mapping",required:!1,visible:!1,itemtype:"select",disabled:!0,label:a.multiLang["attr-attrmodel-000041"],options:[]},,{attrcode:"_id",required:!1,visible:!1,itemtype:"input",disabled:!0,label:"_id"}]}},n={msgButtons:[{id:"0001A41000000006J5B1",btncolor:"button_secondary",type:"general_btn",key:"addRow",title:a.multiLang["attr-attrmodel-000042"],area:"page_header",children:[]},{id:"0001A41000000006J5B1",btncolor:"button_secondary",type:"general_btn",key:"delRow",title:a.multiLang["attr-attrmodel-000043"],area:"page_header",children:[]},{id:"0001A41000000006J5B1",btncolor:"button_main",type:"general_btn",key:"ensure",title:a.multiLang["attr-attrmodel-000044"],keyboard:"alt+y",area:"page_footer",children:[]},{id:"0001A41000000006J5B1",btncolor:"button_secondary",type:"general_btn",key:"cancel",title:a.multiLang["attr-attrmodel-000045"],keyboard:"alt+n",area:"page_footer",children:[]}]};!function(e,t){e.meta.setMeta(t)}(e,t),e.button.setButtons(n.msgButtons)};var a=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){switch(t){case"addRow":this.props.editTable.addRow("relatedData");break;case"delRow":var o=this.props.editTable.getCheckedRows("relatedData"),l=[];if(o&&o.length>0){for(var s=0;s<o.length;s++)l.push(o[s].index);this.props.editTable.deleteTableRowsByIndex("relatedData",l,!0)}else(0,a.toast)({content:i.multiLang["attr-attrmodel-000037"],color:"warning"});break;case"ensure":var u=[],c=this.props.editTable.getAllRows("relatedData");if(!this.props.editTable.checkRequired("relatedData",c))return;c&&c.length>0&&c.map((function(e,t){var n={dataType:{type:{_value:e.values.dataType.value}},initialValue:e.values.initialValue.value,multiLangName:{text:e.values.description.value},_description:e.values.description.display,_id:e.values._id.value};return u.push(n),u})),e.preprops.updateAttr({applicationArgs:u}),r(this);break;case"cancel":r(this)}};var a=n(1),i=n(0);function r(e){e.props.preprops.modal.close("relatedData");var t=ReactDOM.findDOMNode(e);t&&ReactDOM.unmountComponentAtNode(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,a,i,r,o){switch(n){case"description":var l=e.meta.getMeta(),s=[],u=[];if(l[t].items.map((function(e){"mapping"===e.attrcode&&(s=e.options),"dataType"===e.attrcode&&(u=e.options)})),s&&s.length>0)for(var c=0;c<s.length;c++)if(a===s[c].display){for(var p=0,d=0;d<u.length;d++)if(s[c].value===u[d].value){e.editTable.setValByKeyAndRowId(t,o.rowid,"dataType",{value:s[c].value,display:u[c].display}),p=1;break}if(1===p)break}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,a,i,r){return!0}},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,".lightapp-component-editTable {\n  margin-top: 6px;\n}\n.topButton {\n  text-align: right;\n  margin-top: 5px;\n  margin-bottom: 5px;\n}\n.bottomButton {\n  height: 42px;\n  border-top: 1px solid #d0d0d0;\n}\n",""])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.newProps,n=e.queryParams;e.call;t.modal.show("workFlowParameter",{title:i.multiLang["attr-attrmodel-000036"],size:"lg",noFooter:!0,content:React.createElement(a.default,{preprops:t,queryParams:n})})};var a=function(e){return e&&e.__esModule?e:{default:e}}(n(200)),i=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(2),r=function(e){return e&&e.__esModule?e:{default:e}}(i),o=n(1),l=n(201),s=n(0);n(28);var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={billtype:s.flowContext.get().billType,pk_gadget:e.queryParams.data.value},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"initData",value:function(e){var t=this;(0,o.ajax)({url:"/nccloud/riawf/pf/gadgetParamProperty.do",data:{billType:t.state.billtype,pk_gadget:t.state.pk_gadget,workflowGadgetParam:e},async:!1,success:function(e){e.success;var n=e.data;if("none"!=n.result){var a=n.data.realParams,i=n.data.vartype,r=[];if(null!=a&&a.length>0){if("pkref"===i)t.props.meta.getMeta().workFlowParameter.items.map((function(e,t){switch(e.attrcode){case"valuepk":e.refcode=n.data.pkref.refpath,e.itemtype="refer"}}));else if("combobox"===i){t.props.meta.getMeta().workFlowParameter.items.map((function(e,t){switch(e.attrcode){case"valuepk":e.refcode="uap/refer/riart/workFlowParameterGridRef/index",e.itemtype="refer",e.queryCondition={realParams:n.data.combobox}}}))}else if("booleanbox"===i){t.props.meta.getMeta().workFlowParameter.items.map((function(e,t){switch(e.attrcode){case"valuepk":e.refcode="uap/refer/riart/booleanpara/index",e.itemtype="refer"}}))}if("booleanbox"===i)for(var o=0;o<a.length;o++){var l={values:{varcode:{value:a[o].varcode},varname:{value:a[o].varname},valuepk:{value:"N"}}};a[o].value&&"true"===a[o].value?l.values.valuepk={value:"Y",display:"true"}:l.values.valuepk={value:"N",display:"false"},r.push(l)}else for(var s=0;s<a.length;s++){var u={values:{varcode:{value:a[s].varcode},varname:{value:a[s].varname},valuepk:{value:a[s].value,display:a[s].displayvalue}}};r.push(u)}}t.props.editTable.setTableData("workFlowParameter",{rows:r})}else t.props.editTable.setTableData("workFlowParameter",[])}})}},{key:"componentDidMount",value:function(){this.initData(this.props.preprops.value.workflowGadgetParam)}},{key:"componentWillReceiveProps",value:function(e){this.initData(e.preprops.value.workflowGadgetParam)}},{key:"render",value:function(){var e=this.props,t=(e.editTable,e.button),n=(e.modal,this.props.editTable.createEditTable),a=t.createButtonApp;return r.default.createElement("div",null,n("workFlowParameter",{showIndex:!0,showCheck:!0,onAfterEvent:l.afterEvent.bind(this),onBeforeEvent:l.beforeEvent.bind(this)}),r.default.createElement("div",{className:"bottomButton"},a({area:"page_footer",buttonLimit:6,onButtonClick:l.buttonClick.bind(this),popContainer:document.querySelector(".footerBtn")})))}}]),t}(i.Component);t.default=u=(0,o.createPage)({initTemplate:l.initTemplate})(u)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.beforeEvent=t.afterEvent=t.buttonClick=t.initTemplate=void 0;var a=l(n(202)),i=l(n(203)),r=l(n(204)),o=l(n(205));function l(e){return e&&e.__esModule?e:{default:e}}t.initTemplate=a.default,t.buttonClick=i.default,t.afterEvent=r.default,t.beforeEvent=o.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={workFlowParameter:{moduletype:"table",status:"edit",items:[{attrcode:"varcode",visible:!0,itemtype:"input",label:a.multiLang["attr-attrmodel-000052"],disabled:!0},{attrcode:"varname",required:!1,visible:!0,itemtype:"input",label:a.multiLang["attr-attrmodel-000053"],disabled:!0},{attrcode:"valuepk",required:!1,visible:!0,itemtype:"input",label:a.multiLang["attr-attrmodel-000054"],refcode:""}]}},n={msgButtons:[{id:"0001A41000000006J5B1",btncolor:"button_main",type:"general_btn",key:"ensure",title:a.multiLang["attr-attrmodel-000044"],keyboard:"alt+y",area:"page_footer",children:[]},{id:"0001A41000000006J5B1",btncolor:"button_secondary",type:"general_btn",key:"cancel",title:a.multiLang["attr-attrmodel-000045"],keyboard:"alt+n",area:"page_footer",children:[]}]};!function(e,t){e.meta.setMeta(t)}(e,t),e.button.setButtons(n.msgButtons)};var a=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){switch(t){case"ensure":var i=this.props.editTable.getAllRows("workFlowParameter"),r="";if(i&&i.length>0)for(var o=i.length,l=0;l<o;l++){var s=i[l];s.values&&s.values.valuepk&&s.values.valuepk.value&&(r=l===o-1?r+s.values.varcode.value+"="+s.values.valuepk.value+","+s.values.valuepk.display:r+s.values.varcode.value+"="+s.values.valuepk.value+","+s.values.valuepk.display+";")}""!=r&&e.preprops.updateAttr({workflowGadgetParam:r}),console.log(r),a(this);break;case"cancel":a(this)}};n(1);function a(e){e.props.preprops.modal.close("workFlowParameter");var t=ReactDOM.findDOMNode(e);t&&ReactDOM.unmountComponentAtNode(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,a,i,r,o){console.log(o)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,a,i,r){return!0}},function(e,t,n){var a=n(207);"string"==typeof a&&(a=[[e.i,a,""]]);var i={transform:void 0};n(4)(a,i);a.locals&&(e.exports=a.locals)},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,".lightapp-component-form {\n  padding: 0 !important;\n}\n",""])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=u(n(2)),r=n(1),o=n(209),l=(n(211),n(0)),s=u(n(86));function u(e){return e&&e.__esModule?e:{default:e}}n(215);var c=r.base.NCFormControl,p=(r.base.NCRadio,r.base.NCButton),d=(r.base.NCCheckbox,r.base.NCSelect),f=d.NCOption,m=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleMergeChange=function(e){"AND"===e?(n.setState({join:"AND",preValue:"100%",preVisible:!0}),n.props.updateAttr({join:"AND",preconditionValue:"100%"})):(n.setState({join:"XOR",preValue:null,preVisible:!1}),n.props.updateAttr({join:"XOR",preconditionValue:null}))},n.handleMergeChangeButton=function(){n.props.modal.show("modal",{title:l.multiLang["attr-branchMerge-000014"],size:"sm",rightBtnName:l.multiLang["attr-branchMerge-000002"],leftBtnName:l.multiLang["attr-branchMerge-000001"],content:i.default.createElement(s.default,{modeltype:"merge",ppValue:n.state.preValue,getCountValue:n.getCountValue.bind(n),getPercentageValue:n.getPercentageValue.bind(n)}),beSureBtnClick:function(){n.props.updateAttr({join:"AND",preconditionValue:n.state.preValue})}})},n.handleBranchChange=function(e){"AND"===e?(n.setState({split:"AND",postValue:"100%",postVisible:!0}),n.props.updateAttr({split:"AND",postconditionValue:"100%"})):(n.setState({split:"XOR",postValue:null,postVisible:!1}),n.props.updateAttr({split:"XOR",postconditionValue:null}))},n.handleBranchChangeButton=function(){n.props.modal.show("modal",{title:l.multiLang["attr-branchMerge-000015"],size:"sm",rightBtnName:l.multiLang["attr-branchMerge-000002"],leftBtnName:l.multiLang["attr-branchMerge-000001"],content:i.default.createElement(s.default,{modeltype:"branch",ppValue:n.state.postValue,getCountValue:n.getCountValue.bind(n),getPercentageValue:n.getPercentageValue.bind(n)}),beSureBtnClick:function(){n.props.updateAttr({split:"AND",postconditionValue:n.state.postValue})}})},n.state={join:"XOR",split:"XOR",preVisible:!1,postVisible:!1,preValue:null,postValue:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){this.showValue(this.props,this.props.value)}},{key:"componentWillReceiveProps",value:function(e){this.showValue(e,e.value)}},{key:"showValue",value:function(e,t){this.getShowData(t)}},{key:"getShowData",value:function(e){e&&"{}"!==JSON.stringify(e)?("AND"===e.join?this.setState({join:e.join,preValue:e.preconditionValue,preVisible:!0}):this.setState({join:e.join,preValue:null,preVisible:!1}),"AND"===e.split?this.setState({split:e.split,postValue:e.postconditionValue,postVisible:!0}):this.setState({split:e.split,postValue:"",postVisible:!1})):(this.setState({join:"XOR",split:"XOR",preVisible:!1,preValue:null,postValue:null,postVisible:!1}),this.props.updateAttr({join:"XOR",split:"XOR",preconditionValue:null,postconditionValue:null}))}},{key:"getCountValue",value:function(e,t){"merge"===e?this.setState({join:"AND",preValue:t,preVisible:!0}):this.setState({split:"AND",postValue:t,postVisible:!0})}},{key:"getPercentageValue",value:function(e,t){"merge"===e?this.setState({join:"AND",preValue:t+"%",preVisible:!0}):this.setState({split:"AND",postValue:t+"%",postVisible:!0})}},{key:"render",value:function(){var e=this.props,t=e.form,n=e.modal,a=(t.createForm,n.createModal);return i.default.createElement("div",{className:"partBox"},a("modal"),i.default.createElement("span",{className:"attrContentTitle"},l.multiLang["attr-branchMerge-000003"]),i.default.createElement("div",{className:"generalInput"},i.default.createElement("p",null,i.default.createElement("span",null,l.multiLang["attr-branchMerge-000004"]),i.default.createElement("div",{className:"inputBox"},i.default.createElement(d,{fieldid:"branchMerge_merge",defaultValue:"XOR",value:this.state.join,showClear:!1,onChange:this.handleMergeChange},i.default.createElement(f,{value:"XOR"},l.multiLang["attr-attrmodel-000058"]),i.default.createElement(f,{value:"AND"},l.multiLang["attr-attrmodel-000059"])))),i.default.createElement("div",{className:this.state.preVisible?null:"hideThisDom"},i.default.createElement("p",null,i.default.createElement("span",null,l.multiLang["attr-branchMerge-000005"]," "),i.default.createElement("div",{className:"inputBox",style:{display:"flex"}},i.default.createElement(c,{fieldid:"inputBox_merge",text:"number",disabled:!0,visible:this.state.preVisible,value:this.state.preValue}),i.default.createElement(p,{style:{height:"30px",lineHeight:"30px"},visible:this.state.preVisible,fieldid:"branchMerge_m",className:"partBtn",onClick:this.handleMergeChangeButton.bind(this)},"···")))),i.default.createElement("p",null,i.default.createElement("span",null," ",l.multiLang["attr-branchMerge-000006"]),i.default.createElement("div",{className:"inputBox"},i.default.createElement(d,{fieldid:"branchMerge_branch",defaultValue:"XOR",showClear:!1,value:this.state.split,onChange:this.handleBranchChange},i.default.createElement(f,{value:"XOR"},l.multiLang["attr-attrmodel-000058"]),i.default.createElement(f,{value:"AND"},l.multiLang["attr-attrmodel-000059"])))),i.default.createElement("div",{className:this.state.postVisible?null:"hideThisDom"},i.default.createElement("p",null,i.default.createElement("span",null," ",l.multiLang["attr-branchMerge-000007"]),i.default.createElement("div",{className:"inputBox",style:{display:"flex"}},i.default.createElement(c,{fieldid:"inputBox_branch",text:"number",disabled:!0,visible:this.state.postVisible,value:this.state.postValue}),i.default.createElement(p,{visible:this.state.postVisible,style:{height:"30px",lineHeight:"30px"},fieldid:"branchMerge_f",className:"partBtn",onClick:this.handleBranchChangeButton.bind(this)},"···"))))))}}]),t}(i.default.Component);t.default=m=(0,r.createPage)({initTemplate:o.initTemplate})(m)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initTemplate=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(210));t.initTemplate=a.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){!function(e,t){e.meta.setMeta(t)}(e,{branchMerge:{moduletype:"form",items:[{attrcode:"join",placeholder:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"select",label:i.multiLang["attr-branchMerge-000004"],options:(0,a.constantOption)("join")},{attrcode:"preconditionValue",placeholder:"",leftspace:0,rightspace:0,required:!1,visible:!1,itemtype:"input",label:i.multiLang["attr-branchMerge-000008"]},{attrcode:"preconditionValueCount",placeholder:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"input",label:i.multiLang["attr-branchMerge-000009"]},{attrcode:"preconditionValuePercentage",placeholder:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"input",label:i.multiLang["attr-branchMerge-000010"]},{attrcode:"split",placeholder:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"select",label:i.multiLang["attr-branchMerge-000006"],options:(0,a.constantOption)("split")},{attrcode:"postconditionValue",placeholder:"",leftspace:0,rightspace:0,required:!1,visible:!1,itemtype:"input",label:i.multiLang["attr-branchMerge-000011"]},{attrcode:"postconditionValueCount",placeholder:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"input",label:i.multiLang["attr-branchMerge-000012"]},{attrcode:"postconditionValuePercentage",placeholder:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"input",label:i.multiLang["attr-branchMerge-000013"]}],status:"edit"}})};var a=n(38),i=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.afterEvent=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(212));t.afterEvent=a.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,a,i){}},function(e,t,n){var a=n(214);"string"==typeof a&&(a=[[e.i,a,""]]);var i={transform:void 0};n(4)(a,i);a.locals&&(e.exports=a.locals)},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,".yuzhi .u-form-control-wrapper {\n  width: 45% !important;\n}\n.yuzhi .nc-button-wrapper {\n  min-width: 25px !important;\n}\n.yuzhi-modal {\n  text-align: center;\n}\n.yuzhi-modal .u-radio-label {\n  width: 95px !important;\n}\n.yuzhi-modal .u-form-control-wrapper {\n  width: 200px !important;\n}\n.yuzhi-modal .threshold {\n  display: -webkit-inline-box;\n  display: -ms-inline-flexbox;\n  display: inline-flex;\n  margin-top: 10px;\n}\n.yuzhi-modal .threshold .u-radio {\n  width: auto !important;\n}\n.yuzhi-modal .threshold .u-input-number.u-input-group.simple .u-input-group-btn .icon-group {\n  height: 24px;\n}\n",""])},function(e,t,n){var a=n(216);"string"==typeof a&&(a=[[e.i,a,""]]);var i={transform:void 0};n(4)(a,i);a.locals&&(e.exports=a.locals)},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,".lightapp-component-form {\n  padding: 0 !important;\n}\n.hideThisDom {\n  display: none;\n}\n",""])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=f(n(2)),r=n(1),o=n(218),l=n(220),s=n(0),u=f(n(86)),c=f(n(222)),p=f(n(226)),d=f(n(90));function f(e){return e&&e.__esModule?e:{default:e}}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(251);var g=r.base.NCFormControl,y=(r.base.NCRadio,r.base.NCButton),b=(r.base.NCCheckbox,r.base.NCSelect),v=b.NCOption,h="flowAttr",w=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.handleModalValueChange=function(){var e=n,t=e.state.raceModalValue;e.props.modal.show("modal",{title:s.multiLang["attr-attrmodel-000062"],size:"sm",userControl:!0,content:i.default.createElement(u.default,{modeltype:"raceModalValue",ppValue:e.state.raceModalValue,getCountValue:e.getCountValue.bind(n),getPercentageValue:e.getPercentageValue.bind(n)}),beSureBtnClick:function(){if(e.state.raceModalValue.indexOf){if(-1!=e.state.raceModalValue.indexOf("%")&&-1!=e.state.togetherApprovePassingThreshold.indexOf("%")){var t=e.state.raceModalValue.substring(0,e.state.raceModalValue.indexOf("%")),n=e.state.togetherApprovePassingThreshold.substring(0,e.state.togetherApprovePassingThreshold.indexOf("%"));if(Number(t)<Number(n))return void(0,r.toast)({content:s.multiLang["attr-attrmodel-000086"]+e.state.raceModalValue,color:"danger"})}if(-1==e.state.raceModalValue.indexOf("%")&&-1==e.state.togetherApprovePassingThreshold.indexOf("%")){var a=e.state.raceModalValue,i=e.state.togetherApprovePassingThreshold;if(Number(a)<Number(i))return void(0,r.toast)({content:s.multiLang["attr-attrmodel-000086"]+e.state.raceModalValue,color:"danger"})}}e.props.updateAttr({raceModal:"0",raceModalValue:e.state.raceModalValue+""}),e.props.modal.close("modal")},cancelBtnClick:function(){e.props.updateAttr({raceModal:"0",raceModalValue:t}),e.props.modal.close("modal")}})},n.handleThresholdChange=function(){var e=n,t=e.state.togetherApprovePassingThreshold;n.props.modal.show("modal",{title:s.multiLang["attr-attrmodel-000072"],size:"sm",userControl:!0,content:i.default.createElement(u.default,{modeltype:"togetherApprovePassingThreshold",ppValue:e.state.togetherApprovePassingThreshold,getCountValue:e.getCountValue.bind(n),getPercentageValue:e.getPercentageValue.bind(n)}),beSureBtnClick:function(){if(e.state.raceModalValue.indexOf&&e.state.togetherApprovePassingThreshold.indexOf){if(-1!=e.state.raceModalValue.indexOf("%")&&-1!=e.state.togetherApprovePassingThreshold.indexOf("%")){var t=e.state.raceModalValue.substring(0,e.state.raceModalValue.indexOf("%")),n=e.state.togetherApprovePassingThreshold.substring(0,e.state.togetherApprovePassingThreshold.indexOf("%"));if(Number(t)<Number(n))return void(0,r.toast)({content:s.multiLang["attr-attrmodel-000086"]+e.state.raceModalValue,color:"danger"})}if(-1==e.state.raceModalValue.indexOf("%")&&-1==e.state.togetherApprovePassingThreshold.indexOf("%")){var a=e.state.raceModalValue,i=e.state.togetherApprovePassingThreshold;if(Number(a)<Number(i))return void(0,r.toast)({content:s.multiLang["attr-attrmodel-000086"]+e.state.raceModalValue,color:"danger"})}}e.props.updateAttr({raceModal:"0",togetherApprovePassingThreshold:e.state.togetherApprovePassingThreshold+""}),e.props.modal.close("modal")},cancelBtnClick:function(){e.props.updateAttr({raceModal:"0",togetherApprovePassingThreshold:t}),e.props.modal.close("modal")}})};var a=s.urlConst.get("flowType");return n.state={flowType:a,raceModeVisible:!0,thresholdVisible:!0,raceModal:"0",raceModalValue:"",togetherApprovePassingThreshold:"",isLightApp:s.flowContext.get().isLightApp,billtype:s.flowContext.get().billType,metaclassid:s.flowContext.get().metaclassid,rejectUneditablePropertiesDisplay:"",editablePropertiesDisplay:"",enableButtonDisplay:"",workflowAgentDisplay:"",isEditablePropertyShow:!1,isAgentShow:!1,isRejectUneditablePropertyShow:!1,isEnableButtonShow:!1,msgNoticeDisplay:"",isMsgNoticeShow:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){console.log("FlowAttr--componentDidMount",this.props.value),this.showValue(this.props.value,this.props),this.showUneditableAndeditablePropertiesDis(this.props.value.rejectUneditablePropertiesDisplay,this.props.value.editablePropertiesDisplay),this.showWorkflowAgentDisplay(this.props.value.agents),this.showEnableButtonDisplay(this.props.value.enableButton),this.showMsgNoticeDisplay(this.props.value.notice,this.props.value.copy)}},{key:"componentWillReceiveProps",value:function(e){console.log("FlowAttr-componentWillReceiveProps",e.value),this.showValue(e.value,e),this.showUneditableAndeditablePropertiesDis(e.value.rejectUneditablePropertiesDisplay,e.value.editablePropertiesDisplay),this.showWorkflowAgentDisplay(e.value.agents),this.showEnableButtonDisplay(e.value.enableButton),this.showMsgNoticeDisplay(e.value.notice,e.value.copy)}},{key:"showValue",value:function(e,t){var n=this.getShowData(t,e);if(this.setFormStructure(t,e,t.participantType),this.setState({isEditablePropertyShow:!1,isAgentShow:!1,isRejectUneditablePropertyShow:!1,isEnableButtonShow:!1,isMsgNoticeShow:!1}),e){if(t.form.setFormItemsValue(h,n),"Y"===this.state.isLightApp?t.form.setItemsVisible(h,{funcode:!1,nccAppcode:!0}):t.form.setItemsVisible(h,{funcode:!0,nccAppcode:!1}),"lister"===t.type)t.form.setItemsVisible(h,{autoApprove:!1,assigned:!1,canAddApprover:!1,canTransfer:!1,agents:!1}),"OPERATOR"===t.participantType&&this.setState({isAgentShow:!1}),t.billtypeConfig&&t.billtypeConfig.isRejectUneditableProperty&&this.setState({isRejectUneditablePropertyShow:!0});else if("subflow"===t.type){var a;t.form.setItemsVisible(h,(m(a={funcode:!1,nccAppcode:!1,autoApprove:!1,assigned:!1,canAddApprover:!1,canTransfer:!1,agents:!1,timeLimit:!0,timeRemind:!0},"funcode",!1),m(a,"nccAppcode",!1),m(a,"submitRejectBillMode",!1),m(a,"electSignature",!1),m(a,"exchange",!0),a)),t.updateAttr({exchange:!0}),this.setState({isMsgNoticeShow:!0})}else if("dummy"===t.type){var i;t.form.setItemsVisible(h,(m(i={funcode:!1,nccAppcode:!1,autoApprove:!1,assigned:!1,canAddApprover:!1,canTransfer:!1,agents:!1,timeLimit:!0,timeRemind:!0},"funcode",!1),m(i,"nccAppcode",!1),m(i,"submitRejectBillMode",!1),m(i,"electSignature",!1),m(i,"exchange",!1),i)),this.setState({isMsgNoticeShow:!0})}else if("auto"===t.type){var r;t.form.setItemsVisible(h,(m(r={funcode:!1,nccAppcode:!1,autoApprove:!1,assigned:!1,canAddApprover:!1,canTransfer:!1,agents:!1,timeLimit:!1,timeRemind:!1},"funcode",!1),m(r,"nccAppcode",!1),m(r,"submitRejectBillMode",!1),m(r,"electSignature",!0),m(r,"exchange",!0),r)),t.updateAttr({exchange:!0})}else"manual"===t.type?t.billtypeConfig&&t.billtypeConfig.isworkflowcanautoapprove?t.form.setItemsVisible(h,{autoApprove:!0,assigned:!0,canAddApprover:!0,canTransfer:!0,agents:!0}):t.form.setItemsVisible(h,{autoApprove:!1,assigned:!0,canAddApprover:!0,canTransfer:!0,agents:!0}):t.form.setItemsVisible(h,{autoApprove:!0,assigned:!0,canAddApprover:!0,canTransfer:!0,agents:!0}),"OPERATOR"===t.participantType&&(this.setState({isAgentShow:!0}),t.form.setItemsVisible(h,{assigned:!1})),t.billtypeConfig&&t.billtypeConfig.isEnableButton&&("workflow"===this.state.flowType||"workflow_sub"===this.state.flowType)&&this.setState({isEnableButtonShow:!0}),t.billtypeConfig&&t.billtypeConfig.isEditableProperty&&this.setState({isEditablePropertyShow:!0});"workflow"===this.state.flowType||"workflow_sub"===this.state.flowType?"dummy"===t.type?t.form.setItemsVisible(h,{exchange:!1}):(t.form.setItemsVisible(h,{exchange:!0}),t.updateAttr({exchange:!0})):t.form.setItemsVisible(h,{exchange:!1})}else t.form.setFormItemsValue(h,n)}},{key:"setFormStructure",value:function(e,t,n){var a=this;"lister"!==e.type&&"check"!==e.type&&"manual"!==e.type||e.meta.getMeta()[h].items.map((function(t,n){switch(t.attrcode){case"funcode":case"nccAppcode":"lister"===e.type?t.queryCondition={isMakeBill:"Y",billtype:a.state.billtype}:t.queryCondition={isMakeBill:"N",billtype:a.state.billtype}}}));if("lister"!==e.type)if("dummy"!==e.type)if("subflow"!==e.type)if("check"===e.type||"manual"===e.type)if("OPERATOR"===n)this.setState({raceModeVisible:!1});else{var i=this.transferRaceModal(t.raceModal),r=!0;n||t&&"{}"!==JSON.stringify(t)||(r=!1);var o=!0;o="0"===i;var l=this.transferRaceModalValue(t.raceModalValue),s=this.transferTogetherApprovePassingThreshold(t.togetherApprovePassingThreshold);this.setState({raceModeVisible:r,thresholdVisible:o,raceModal:i,raceModalValue:l,togetherApprovePassingThreshold:s}),e.updateAttr({raceModal:i,raceModalValue:l,togetherApprovePassingThreshold:s})}else"auto"===e.type&&this.setState({raceModeVisible:!1,thresholdVisible:!1});else this.setState({raceModeVisible:!1,thresholdVisible:!1,raceModal:null,raceModalValue:null,togetherApprovePassingThreshold:null});else this.setState({raceModeVisible:!1,thresholdVisible:!1,raceModal:null,raceModalValue:null,togetherApprovePassingThreshold:null});else this.setState({raceModeVisible:!1,thresholdVisible:!1,raceModal:null,raceModalValue:null,togetherApprovePassingThreshold:null})}},{key:"getShowData",value:function(e,t){var n={};return t&&"{}"!==JSON.stringify(t)?n={autoApprove:{value:this.transferBoolean(t.autoApprove)},assigned:{value:this.transferBoolean(t.assigned)},canAddApprover:{value:this.transferBoolean(t.canAddApprover)},canTransfer:{value:this.transferBoolean(t.canTransfer)},agents:{value:t.agents},electSignature:{value:this.transferBoolean(t.electSignature)},funcode:{value:t.funcodePK,display:t.funcodeDisplay},nccAppcode:{value:t.nccAppcodePK,display:t.nccAppcodeDisplay},submitRejectBillMode:{value:t.submitRejectBillMode?t.submitRejectBillMode:"0"},timeLimit:{value:this.getNumber(t.timeLimit)},timeRemind:{value:this.getNumber(t.timeRemind)},exchange:{value:this.transferBoolean(t.exchange)}}:(n={autoApprove:{value:!1},assigned:{value:!1},canAddApprover:{value:!1},canTransfer:{value:!1},agents:{value:null},electSignature:{value:!1},funcode:{value:null},nccAppcode:{value:null},submitRejectBillMode:{value:"0"},timeLimit:{value:0},timeRemind:{value:0},exchange:{value:!0}},e.updateAttr({submitRejectBillMode:"0"})),n}},{key:"getNumber",value:function(e){return e||0}},{key:"transferRaceModal",value:function(e){return e||"0"}},{key:"transferRaceModalValue",value:function(e){return e||"100%"}},{key:"transferTogetherApprovePassingThreshold",value:function(e){return e||"100%"}},{key:"transferBoolean",value:function(e){return!!e&&(!0===e||!1!==e&&"true"===e)}},{key:"getCountValue",value:function(e,t){"raceModalValue"===e?this.setState({raceModal:"0",raceModalValue:t}):this.setState({raceModal:"0",togetherApprovePassingThreshold:t})}},{key:"getPercentageValue",value:function(e,t){"raceModalValue"===e?this.setState({raceModal:"0",raceModalValue:t+"%"}):this.setState({raceModal:"0",togetherApprovePassingThreshold:t+"%"})}},{key:"handleRaceModeChange",value:function(e){"1"===e?(this.props.updateAttr({raceModal:"1",raceModalValue:null,togetherApprovePassingThreshold:null}),this.setState({raceModal:"1",raceModeVisible:!0,thresholdVisible:!1,raceModalValue:null,togetherApprovePassingThreshold:null})):(this.props.updateAttr({raceModal:"0",raceModalValue:"100%",togetherApprovePassingThreshold:"100%"}),this.setState({raceModal:"0",raceModeVisible:!0,thresholdVisible:!0,raceModalValue:"100%",togetherApprovePassingThreshold:"100%"}))}},{key:"showWorkflowAgentDisplay",value:function(e){var t="";if(e&&e.length>0){for(var n=0;n<e.length;n++)e[n]&&e[n].user_name&&(n===e.length-1?t+=e[n].user_name:t=t+e[n].user_name+";");t.length>12&&(t=t.substr(0,12)+"..."),this.setState({workflowAgentDisplay:t})}else this.setState({workflowAgentDisplay:""})}},{key:"showEnableButtonDisplay",value:function(e){var t="";if(e&&e.length>0){for(var n=0;n<e.length;n++)n===e.length-1?e[n]&&e[n].btnname&&(t+=e[n].btnname):e[n]&&e[n].btnname&&(t=t+e[n].btnname+";");t.length>12&&(t=t.substr(0,12)+"..."),this.setState({enableButtonDisplay:t})}else this.setState({enableButtonDisplay:""})}},{key:"showUneditableAndeditablePropertiesDis",value:function(e,t){var n="";if(t&&t.length>0){if(t instanceof Array)for(var a=0;a<t.length;a++)a==t.length-1?n+=t[a]:n=n+t[a]+",";else n=t;n.length>20&&(n=n.substr(0,20)+"..."),this.setState({editablePropertiesDisplay:n})}else this.setState({editablePropertiesDisplay:null});if(e&&e.length>0){n="";for(var i=0;i<e.length;i++)t instanceof Array?i==e.length-1?n+=e[i]:n=n+e[i]+",":n=e;n.length>20&&(n=n.substr(0,20)+"..."),this.setState({rejectUneditablePropertiesDisplay:n})}else this.setState({rejectUneditablePropertiesDisplay:null})}},{key:"showMsgNoticeDisplay",value:function(e,t){if(e&&e.length>0)for(var n=0;n<e.length;n++)if(e[n].msgTempcode&&""!=e[n].msgTempcode)return void this.setState({msgNoticeDisplay:s.multiLang["attr-attrmodel-000063"]});if(t&&t.length>0)for(var a=0;a<t.length;a++)if(t[a].msgTempcode&&""!=t[a].msgTempcode)return void this.setState({msgNoticeDisplay:s.multiLang["attr-attrmodel-000063"]});this.setState({msgNoticeDisplay:null})}},{key:"handleClick",value:function(e){var t=this,n=[];switch(e){case"rejectUneditableProperties":if(this.props.value.rejectUneditableProperties&&this.props.value.rejectUneditableProperties.length>0)for(var a=0;a<this.props.value.rejectUneditableProperties.length;a++){var i={children:null,isleaf:!1,pid:"root",refcode:this.props.value.rejectUneditableProperties[a],refname:this.props.value.rejectUneditableProperties[a],refpk:this.props.value.rejectUneditableProperties[a]};this.props.value.rejectUneditablePropertiesDisplay instanceof Array?i.refname=this.props.value.rejectUneditablePropertiesDisplay[a]:i.refname=this.props.value.rejectUneditablePropertiesDisplay,n.push(i)}(0,c.default)(this.props,{modalTitle:s.multiLang["attr-attrmodel-000064"],queryUrl:"/nccloud/riart/ref/mdtreeRefByBilltype.do",queryData:{pid:"root",queryCondition:{src_billtype:this.state.billtype},rtListArr:n},checkStrictly:!0},(function(e){if(e&&e.length>0){for(var n=[],a=[],i=0;i<e.length;i++)n.push(e[i].refcode),a.push(e[i].refname);t.props.updateAttr({rejectUneditableProperties:n,rejectUneditablePropertiesDisplay:a})}else t.props.updateAttr({rejectUneditableProperties:null,rejectUneditablePropertiesDisplay:null})}));break;case"editableProperties":if(this.props.value.editableProperties&&this.props.value.editableProperties.length>0)for(var r=0;r<this.props.value.editableProperties.length;r++){i={children:null,isleaf:!1,pid:"root",refcode:this.props.value.editableProperties[r],refname:this.props.value.editableProperties[r],refpk:this.props.value.editableProperties[r]};this.props.value.editablePropertiesDisplay instanceof Array?i.refname=this.props.value.editablePropertiesDisplay[r]:i.refname=this.props.value.editablePropertiesDisplay,n.push(i)}(0,c.default)(this.props,{modalTitle:s.multiLang["attr-attrmodel-000065"],queryUrl:"/nccloud/riart/ref/mdtreeRefByBilltype.do",queryData:{pid:"root",queryCondition:{src_billtype:this.state.billtype},rtListArr:n},checkStrictly:!0},(function(e){if(e&&e.length>0){for(var n=[],a=[],i=0;i<e.length;i++)n.push(e[i].refcode),a.push(e[i].refname);t.props.updateAttr({editableProperties:n,editablePropertiesDisplay:a})}else t.props.updateAttr({editableProperties:null,editablePropertiesDisplay:null})}));break;case"enableButton":if(this.props.value.enableButton&&this.props.value.enableButton.length>0)for(var o=0;o<this.props.value.enableButton.length;o++)if(this.props.value.enableButton[o]){i={children:null,isleaf:!1,pid:"root",refcode:this.props.value.enableButton[o].btncode,refname:this.props.value.enableButton[o].btnname,refpk:this.props.value.enableButton[o].pk_btn};n.push(i)}(0,c.default)(this.props,{modalTitle:s.multiLang["attr-attrmodel-000066"],queryUrl:"/nccloud/riawf/pf/enableButtonAction.do",queryData:{pid:"root",queryCondition:{src_billtype:this.state.billtype},rtListArr:n},checkStrictly:!0},(function(e){if(e&&e.length>0){for(var n=[],a=0;a<e.length;a++){var i={children:null,id:e[a].refpk,isleaf:!0,pid:"root",refcode:e[a].refcode,refname:e[a].refname,refpk:e[a].refpk,btnname:e[a].refname,btncode:e[a].refcode,pk_btn:e[a].refpk};n.push(i)}t.props.updateAttr({enableButton:n})}else t.props.updateAttr({enableButton:null})}));break;case"workflowAgent":(0,p.default)({newProps:this.props,queryParams:{data:{},url:""},call:this.noticeCall});break;case"msgNotice":(0,d.default)({newProps:this.props,queryParams:{data:{},url:""},call:this.noticeCall})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.form,a=t.modal,r=n.createForm,o=a.createModal;return i.default.createElement("div",{className:"partBox"},o("modal"),o("syncTreeToList"),o("workflowAgent"),o("msgNotice"),i.default.createElement("span",{className:"attrContentTitle"},s.multiLang["attr-attrmodel-000067"]),i.default.createElement("div",{className:"generalInput"},i.default.createElement("div",{className:this.state.raceModeVisible?null:"hideThisDom"},i.default.createElement("p",null,i.default.createElement("span",null," ",s.multiLang["attr-attrmodel-000068"]),i.default.createElement(b,{fieldid:"raceMode",defaultValue:"0",showClear:!1,value:this.state.raceModal,onChange:this.handleRaceModeChange.bind(this)},i.default.createElement(v,{value:"1"}," ",s.multiLang["attr-attrmodel-000069"]),i.default.createElement(v,{value:"0"},s.multiLang["attr-attrmodel-000070"]))),i.default.createElement("div",{className:this.state.thresholdVisible?null:"hideThisDom"},i.default.createElement("p",null,i.default.createElement("span",null," ",s.multiLang["attr-attrmodel-000071"]),i.default.createElement("div",{className:"inputBox"},i.default.createElement(g,{text:"number",fieldid:"raceModalValue",disabled:!0,value:this.state.raceModalValue})),i.default.createElement(y,{style:{height:"30px",lineHeight:"30px"},className:"partBtn",fieldid:"handleModalValueChange_btn",onClick:this.handleModalValueChange.bind(this)},"···")),i.default.createElement("p",null,i.default.createElement("span",null," ",s.multiLang["attr-attrmodel-000072"]),i.default.createElement("div",{className:"inputBox"},i.default.createElement(g,{text:"number",disabled:!0,fieldid:"togetherApprovePassingThreshold",value:this.state.togetherApprovePassingThreshold})),i.default.createElement(y,{style:{height:"30px",lineHeight:"30px"},className:"partBtn",fieldid:"handleThresholdChange_btn",onClick:this.handleThresholdChange.bind(this)},"···"))))),i.default.createElement("p",null,r(h,{setVisibleByForm:!0,onAfterEvent:l.afterEvent.bind(this)})),i.default.createElement("div",{className:"generalInput"},this.state.isMsgNoticeShow?i.default.createElement("p",{className:"marginTop"},i.default.createElement("span",null,s.multiLang["attr-attrmodel-000073"]),i.default.createElement(y,{className:"partBtn",fieldid:"msgNotice_btn",onClick:function(){e.handleClick("msgNotice")}},"···"),i.default.createElement("span",null,this.state.msgNoticeDisplay)):"",this.state.isEnableButtonShow?i.default.createElement("p",null,i.default.createElement("span",null,s.multiLang["attr-attrmodel-000066"]),i.default.createElement(y,{className:"partBtn",fieldid:"enableButton_btn",onClick:function(){e.handleClick("enableButton")}},"···"),i.default.createElement("span",null,this.state.enableButtonDisplay)):"",this.state.isAgentShow?i.default.createElement("p",null,i.default.createElement("span",null,s.multiLang["attr-attrmodel-000074"]),i.default.createElement(y,{className:"partBtn",fieldid:"workflowAgent_btn",onClick:function(){e.handleClick("workflowAgent")}},"···"),i.default.createElement("span",null,this.state.workflowAgentDisplay)):"",this.state.isEditablePropertyShow?i.default.createElement("p",null,i.default.createElement("span",null,s.multiLang["attr-attrmodel-000065"]),i.default.createElement(y,{className:"partBtn",fieldid:"editableProperties_btn",onClick:function(){e.handleClick("editableProperties")}},"···"),i.default.createElement("span",null,this.state.editablePropertiesDisplay)):"",this.state.isRejectUneditablePropertyShow?i.default.createElement("p",null,i.default.createElement("span",null,s.multiLang["attr-attrmodel-000064"]),i.default.createElement(y,{className:"partBtn",fieldid:"rejectUneditableProperties_btn",onClick:function(){e.handleClick("rejectUneditableProperties")}},"···"),i.default.createElement("span",null,this.state.rejectUneditablePropertiesDisplay)):""))}}]),t}(i.default.Component);t.default=w=(0,r.createPage)({initTemplate:o.initTemplate})(w)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initTemplate=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(219));t.initTemplate=a.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){!function(e,t){e.meta.setMeta(t)}(e,{flowAttr:{moduletype:"form",items:[{attrcode:"autoApprove",placeholder:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"switch",label:i.multiLang["attr-flowattr-000000"]},{attrcode:"assigned",placeholder:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"switch",label:i.multiLang["attr-flowattr-000001"]},{attrcode:"canAddApprover",placeholder:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"switch",label:i.multiLang["attr-flowattr-000002"]},{attrcode:"canTransfer",placeholder:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"switch",label:i.multiLang["attr-flowattr-000003"]},{attrcode:"timeLimit",placeholder:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"number",label:i.multiLang["attr-flowattr-000004"]},{attrcode:"timeRemind",placeholder:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"number",label:i.multiLang["attr-flowattr-000005"]},{attrcode:"funcode",placeholder:"",leftspace:0,rightspace:0,required:!1,visible:!1,itemtype:"refer",isMultiSelectedEnabled:!1,disabled:!1,label:i.multiLang["attr-flowattr-000006"],refcode:"uap/refer/riart/wfActivityFuncodeRef/index"},{attrcode:"nccAppcode",placeholder:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"refer",isMultiSelectedEnabled:!1,disabled:!1,label:i.multiLang["attr-flowattr-000007"],refcode:"uap/refer/riart/wfActivityAppcodeRef/index"},{attrcode:"submitRejectBillMode",placeholder:"",leftspace:0,rightspace:0,required:!1,visible:!0,showClear:!1,itemtype:"select",label:i.multiLang["attr-flowattr-000008"],options:(0,a.constantOption)("rejectType")},{attrcode:"electSignature",placeholder:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"switch",label:i.multiLang["attr-flowattr-000009"]},{attrcode:"exchange",placeholder:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"switch",label:i.multiLang["attr-flowattr-000010"]}],status:"edit"}})};var a=n(38),i=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.afterEvent=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(221));t.afterEvent=a.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,a,i){if("autoApprove"!=n&&"assigned"!=n&&"canAddApprover"!=n&&"canTransfer"!=n&&"electSignature"!=n&&"exchange"!=n&&!a.value)return;var o=null;a&&a.value&&a.value.key?o=a.value.key:a&&(o=a.value);switch(r(e,t,n,o),n){case"autoApprove":e.updateAttr({autoApprove:o});break;case"assigned":e.updateAttr({assigned:o});break;case"canAddApprover":e.updateAttr({canAddApprover:o});break;case"canTransfer":e.updateAttr({canTransfer:o});break;case"electSignature":e.updateAttr({electSignature:o});break;case"funcode":e.updateAttr({funcode:a.refcode,funcodePK:a.refpk,funcodeDisplay:a.refname});break;case"nccAppcode":e.updateAttr({nccAppcode:a.refcode,nccAppcodePK:a.refpk,nccAppcodeDisplay:a.refname});break;case"submitRejectBillMode":e.updateAttr({submitRejectBillMode:o});break;case"exchange":e.updateAttr({exchange:o})}};var a=n(1),i=n(0);var r=function(e,t,n,r){switch(n){case"timeLimit":if(r&&""!==r){if(isNaN(r))return e.updateAttr({timeRemind:0}),e.form.setFormItemsValue(t,{timeLimit:{value:0}}),void(0,a.toast)({content:i.multiLang["attr-advanced-000036"],color:"danger"});if(Number(r)<0)return e.updateAttr({timeRemind:0}),e.form.setFormItemsValue(t,{timeLimit:{value:0}}),void(0,a.toast)({content:i.multiLang["attr-advanced-000039"],color:"danger"});e.updateAttr({timeLimit:r});var o=e.form.getFormItemsValue(t,"timeRemind");o&&o.value?parseInt(o.value)>=parseInt(r)?parseInt(o.value)==parseInt(r)&&0==parseInt(r)?e.updateAttr({timeLimit:r}):(e.form.setFormItemsValue(t,{timeLimit:{value:oldValue,display:oldValue}}),e.updateAttr({timeLimit:oldValue}),(0,a.toast)({content:i.multiLang["attr-advanced-000029"],color:"danger"})):e.updateAttr({timeLimit:r}):(e.updateAttr({timeRemind:0}),e.form.setFormItemsValue(t,{timeRemind:{value:0}}))}else e.updateAttr({timeRemind:0}),e.form.setFormItemsValue(t,{timeLimit:{value:0}});break;case"timeRemind":if(r&&""!==r){if(isNaN(r))return e.updateAttr({timeRemind:0}),e.form.setFormItemsValue(t,{timeRemind:{value:0}}),void(0,a.toast)({content:i.multiLang["attr-advanced-000036"],color:"danger"});if(Number(r)<0)return e.updateAttr({timeRemind:0}),e.form.setFormItemsValue(t,{timeRemind:{value:0}}),void(0,a.toast)({content:i.multiLang["attr-advanced-000039"],color:"danger"});var l=e.form.getFormItemsValue(t,"timeLimit");l&&l.value?parseInt(l.value)<=parseInt(r)?(e.form.setFormItemsValue(t,{timeRemind:{value:0}}),e.updateAttr({timeRemind:0}),(0,a.toast)({content:i.multiLang["attr-advanced-000029"],color:"danger"})):e.updateAttr({timeRemind:r}):e.form.setFormItemsValue(t,{timeRemind:{value:0}})}else e.updateAttr({timeRemind:0}),e.form.setFormItemsValue(t,{timeRemind:{value:0}})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{data:{},url:""},n=arguments[2],r=function(r,o,l){e.modal.show("syncTreeToList",{title:t.modalTitle||"数据修改",size:"lg",noFooter:!0,content:React.createElement(a.default,{params:t,onCancelInfoSave:function(){i(e)},onEnsureInfoSave:function(t){i(e),n&&"function"==typeof n&&n(t)}}),closeModalEve:i(e)})};r()};var a=function(e){return e&&e.__esModule?e:{default:e}}(n(223));var i=function(e){e.modal.close("syncTreeToList")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(2),o=c(r),l=(c(n(8)),n(1)),s=c(n(224));n(87);var u=n(88);function c(e){return e&&e.__esModule?e:{default:e}}var p=l.base.NCButton,d=l.base.NCTree,f=d.NCTreeNode,m=function(e){function t(e){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i,r,o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.getData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=o,i=o.props.params;(0,l.ajax)({url:i.queryUrl,data:a({},i.queryData,e),success:function(e){var a=e.success,i=e.data;a&&n.initTreeListData(i.rows,t)},error:function(e){console.log(e)}})},o.initTreeListData=function(e,t){o.setState({treeData:e})},o.onCheckEve=function(e,t){o.setState({checkedArr:e.checked})},o.onLoadData=(i=regeneratorRuntime.mark((function e(t){var a,i,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.props.eventKey,i=o,r=o.props.params,e.abrupt("return",new Promise((function(e){(0,l.ajax)({url:r.queryUrl,data:{pid:a,queryCondition:{src_billtype:o.state.billtype}},success:function(e){var t=e.success,n=e.data;t&&i.addNodeInfoToTree(n.rows,a)},error:function(e){console.log(e)}}),e()})));case 4:case"end":return e.stop()}}),e,n)})),r=function(){var e=i.apply(this,arguments);return new Promise((function(t,n){return function a(i,r){try{var o=e[i](r),l=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(l).then((function(e){a("next",e)}),(function(e){a("throw",e)}));t(l)}("next")}))},function(e){return r.apply(this,arguments)}),o.addNodeInfoToTree=function(e,t){var n=o.state.treeData;!function n(a){a.map((function(a){a.refpk===t?a.children=e:a.children&&n(a.children)}))}(n),console.log("treeData",n),o.setState({treeData:n})},o.changeState=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o.setState(e)},o.addToList=function(){var e=o.state,t=e.checkedArr,n=e.rtListArr,a=e.treeData;if(t.length){var i=(0,u.nodeExistById)(t,n);if(i.length){var r=(0,u.generateLfListArr)(i,a);n=n.concat(r),o.setState({rtListArr:n})}}},o.delList=function(){var e=o.state.rtListArr;e.length<=0||(e.splice(o.state.itemIndex,1),o.setState({itemIndex:-1}))},o.loadTreeData=function(e,t){o.getData({pk:e},!1)},o.listClick=function(e,t){o.setState({itemIndex:t})},o.expand=function(e,t){console.log(e,t),o.setState({expandedKeys:e})},o.state={rtListArr:e.params.queryData.rtListArr||[],currNodeObj:{},itemIndex:-1,treeData:[],checkedArr:[],billtype:e.params.queryData.queryCondition.src_billtype,expandedKeys:[]},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this,t=this.props.params,n=this.state,a=n.rtListArr,i=n.itemIndex,r=n.expandedKeys,l=this.state.treeData.length&&function e(t){return t.map((function(t){return o.default.createElement(f,{title:t.refname,liAttr:{fieldid:"sync_tree_node"},key:t.refpk},t.children&&e(t.children))}))}(this.state.treeData);return o.default.createElement("section",null,o.default.createElement("div",{className:"single-attribute-modal-contain"},o.default.createElement("div",{className:"flex-lf",fieldid:"sync_list_tree"},this.state.treeData.length&&o.default.createElement(d,{openIcon:o.default.createElement("i",{className:"iconfont icon-wenjianjiadakai"}),closeIcon:o.default.createElement("i",{className:"iconfont icon-wenjianjia"}),checkable:!0,checkStrictly:t.checkStrictly||!0,onCheck:this.onCheckEve,loadData:this.onLoadData,onExpand:this.expand,expandedKeys:r},l)),o.default.createElement("div",{className:"flex-center"},o.default.createElement("div",{className:"btn-group"},o.default.createElement(p,{onClick:this.addToList,fieldid:"right_btn"}," >>"),o.default.createElement(p,{style:{marginTop:8},onClick:this.delList,fieldid:"del_btn"}," <<"))),o.default.createElement("div",{className:"flex-rt"},o.default.createElement(s.default,{rtListArr:a,itemIndex:i,onItemClick:this.listClick}))),o.default.createElement("footer",{className:"single-attribute-modal-footer"},o.default.createElement(p,{fieldid:"ensure_btn",onClick:function(){e.props.onEnsureInfoSave(a)}},"确定"),o.default.createElement(p,{fieldid:"cancel_btn",onClick:function(){e.props.onCancelInfoSave()}},"取消")))}}]),t}(r.Component);m=(0,l.createPage)({})(m),t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(2),r=o(i);o(n(8)),n(1);function o(e){return e&&e.__esModule?e:{default:e}}n(87);var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.generateItem=function(){var e=n.props.rtListArr;return r.default.createElement("ul",{fieldid:"ul-list"},e.map((function(e,t){return r.default.createElement("li",{fieldid:"li-list",className:[t===n.state.currIndex?"active-item":"","list-item"].join(" "),key:t.toString(),onClick:n.handleItemClick.bind(n,e,t)},r.default.createElement("p",null,e.refname))})))},n.state={rtListArr:n.props.rtListArr,currIndex:-1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentWillReceiveProps",value:function(e){e.itemIndex!==this.props.itemIndex&&this.setState({currIndex:e.itemIndex}),this.props.rtListArr&&e.rtListArr.length!==this.props.rtListArr.length&&this.setState({rtListArr:e.rtListArr})}},{key:"handleItemClick",value:function(e,t){this.setState({currIndex:t}),this.props.onItemClick&&"function"==typeof this.props.onItemClick&&this.props.onItemClick(e,t)}},{key:"render",value:function(){return r.default.createElement("div",null,this.generateItem())}}]),t}(i.Component);t.default=l},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,".single-attribute-modal-contain {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n.single-attribute-modal-contain .flex-lf,\n.single-attribute-modal-contain .flex-rt {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  height: 320px;\n  width: 320px;\n  padding: 6px 8px;\n  border: 1px solid #ddd;\n  overflow: auto;\n}\n.single-attribute-modal-contain .flex-center {\n  position: relative;\n  width: 70px;\n}\n.single-attribute-modal-contain .btn-group {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n}\n.single-attribute-modal-contain .active-item {\n  background-color: #ddd;\n}\n.single-attribute-modal-contain .icon-wenjianjiadakai,\n.single-attribute-modal-contain .icon-wenjianjia {\n  color: aqua;\n}\n.single-attribute-modal-footer {\n  margin-top: 10px;\n  text-align: right;\n}\n",""])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.newProps;e.queryParams,e.call;t.modal.show("workflowAgent",{title:i.multiLang["attr-attrmodel-000035"],size:"lg",noFooter:!0,content:React.createElement(a.default,{preprops:t})})};var a=function(e){return e&&e.__esModule?e:{default:e}}(n(227)),i=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(2),r=c(i),o=n(1),l=n(0),s=c(n(228)),u=n(230);n(88);function c(e){return e&&e.__esModule?e:{default:e}}n(89);var p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.listClick=function(e,t){n.setState({itemIndex:t})},n.state={billtype:l.flowContext.get().billType,rtListArr:[],itemIndex:-1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){this.initData(this.props.preprops.value.agents)}},{key:"componentWillReceiveProps",value:function(e){}},{key:"initData",value:function(e){var t=[],n=-1;if(e&&e.length>0){for(var a=0;a<e.length;a++){var i={pid:"root",refcode:e[a].user_code,refname:e[a].user_name,refpk:e[a].cuserid};t.push(i)}n=0,this.props.button.setButtonVisible({addRow:!0,delRow:!0,upRow:!0,downRow:!0}),this.props.form.setFormItemsValue("workflowAgent",{defaultAgent:{value:!1}}),this.props.form.setFormItemsDisabled("workflowAgent",{defaultAgent:!1,userfer:!1})}else this.props.button.setButtonVisible({addRow:!1,delRow:!1,upRow:!1,downRow:!1}),this.props.form.setFormItemsValue("workflowAgent",{defaultAgent:{value:!0}}),this.props.form.setFormItemsDisabled("workflowAgent",{defaultAgent:!1,userfer:!0});this.setState({rtListArr:t,itemIndex:n})}},{key:"render",value:function(){var e=this.props,t=(e.modal,e.button),n=this.props.form.createForm,a=t.createButtonApp;return r.default.createElement("div",null,r.default.createElement("div",{className:"single-attribute-modal-contain"},r.default.createElement("div",{className:"flex-lf"},r.default.createElement(s.default,{rtListArr:this.state.rtListArr,itemIndex:this.state.itemIndex,onItemClick:this.listClick})),r.default.createElement("div",{className:"flex-rt"},n("workflowAgent",{onAfterEvent:u.afterEvent.bind(this),onBeforeEvent:u.beforeEvent.bind(this)}),r.default.createElement("div",{className:"page_agent"},a({area:"page_agent",buttonLimit:6,onButtonClick:u.buttonClick.bind(this),popContainer:document.querySelector(".page_agent")})))),r.default.createElement("div",{className:"flex-bottom"},a({area:"page_footer",buttonLimit:6,onButtonClick:u.buttonClick.bind(this),popContainer:document.querySelector(".footerBtn")})))}}]),t}(i.Component);t.default=p=(0,o.createPage)({initTemplate:u.initTemplate})(p)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(2),r=o(i);o(n(8)),n(1);function o(e){return e&&e.__esModule?e:{default:e}}n(89);var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.generateItem=function(){var e=n.props.rtListArr;return r.default.createElement("ul",{fieldid:"flow_ul_list"},e.map((function(e,t){return r.default.createElement("li",{fieldid:"flow_li_list",className:[t===n.state.currIndex?"active-item":"","list-item"].join(" "),key:t.toString(),onClick:n.handleItemClick.bind(n,e,t)},r.default.createElement("p",null,e.refname))})))},n.state={rtListArr:n.props.rtListArr,currIndex:-1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentWillReceiveProps",value:function(e){e.itemIndex!==this.props.itemIndex&&this.setState({currIndex:e.itemIndex}),this.props.rtListArr&&e.rtListArr.length!==this.props.rtListArr.length&&this.setState({rtListArr:e.rtListArr})}},{key:"handleItemClick",value:function(e,t){this.setState({currIndex:t}),this.props.onItemClick&&"function"==typeof this.props.onItemClick&&this.props.onItemClick(e,t)}},{key:"render",value:function(){return r.default.createElement("div",null,this.generateItem())}}]),t}(i.Component);t.default=l},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,".single-attribute-modal-contain {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n.single-attribute-modal-contain .flex-lf {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  height: 320px;\n  width: 320px;\n  overflow: auto;\n  padding: 6px 8px;\n  border: 1px solid #ddd;\n}\n.single-attribute-modal-contain .flex-rt {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  height: 320px;\n  width: 320px;\n  overflow: auto;\n  padding: 6px 8px;\n  border: 1px solid #ddd;\n}\n.single-attribute-modal-contain .active-item {\n  background-color: #ddd;\n}\n.flex-bottom {\n  margin-top: 10px;\n}\n",""])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.beforeEvent=t.afterEvent=t.buttonClick=t.initTemplate=void 0;var a=l(n(231)),i=l(n(232)),r=l(n(233)),o=l(n(234));function l(e){return e&&e.__esModule?e:{default:e}}t.initTemplate=a.default,t.buttonClick=i.default,t.afterEvent=r.default,t.beforeEvent=o.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={workflowAgent:{moduletype:"form",status:"edit",items:[{attrcode:"defaultAgent",visible:!0,itemtype:"checkbox_switch",label:a.multiLang["attr-attrmodel-000047"]},{attrcode:"userfer",visible:!0,itemtype:"refer",label:a.multiLang["attr-attrmodel-000075"],isMultiSelectedEnabled:!1,refcode:"uap/refer/riart/userRefer/index",queryCondition:function(){return{isMutiGroup:!1,isAuthFilter:!1,isSelfVisible:!0,isShowSysAdmin:!1,isShowGroupAdmin:!0}}}]}},n={msgButtons:[{id:"0001A41000000006J5B1",btncolor:"button_secondary",type:"general_btn",key:"upRow",title:a.multiLang["attr-attrmodel-000050"],area:"page_agent",children:[]},{id:"0001A41000000006J5B1",btncolor:"button_secondary",type:"general_btn",key:"downRow",title:a.multiLang["attr-attrmodel-000051"],area:"page_agent",children:[]},{id:"0001A41000000006J5B1",btncolor:"button_secondary",type:"general_btn",key:"addRow",title:a.multiLang["attr-attrmodel-000048"],area:"page_agent",children:[]},{id:"0001A41000000006J5B1",btncolor:"button_secondary",type:"general_btn",key:"delRow",title:a.multiLang["attr-attrmodel-000049"],area:"page_agent",children:[]},{id:"0001A41000000006J5B1",btncolor:"button_main",type:"general_btn",key:"ensure",title:a.multiLang["attr-attrmodel-000044"],keyboard:"alt+y",area:"page_footer",children:[]},{id:"0001A41000000006J5B1",btncolor:"button_secondary",type:"general_btn",key:"cancel",title:a.multiLang["attr-attrmodel-000045"],keyboard:"alt+n",area:"page_footer",children:[]}]};!function(e,t){e.meta.setMeta(t)}(e,t),e.button.setButtons(n.msgButtons)};var a=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var l=this.state.rtListArr,s=this.state.itemIndex;switch(t){case"addRow":var u=e.form.getFormItemsValue("workflowAgent","userfer");if(u&&u.value){var c=function(e,t){var n=e.state.rtListArr;if(!(n&&n.length>0))return[t];n.push(t);for(var a=[],i=[],r=n.length,o=0;o<r;o++){for(var l=o+1;l<r;l++)n[o].refpk===n[l].refpk&&(o++,l=o);a.push(n[o]),i.push(o)}return a}(this,{pid:"root",refcode:u.value,refname:u.display,refpk:u.value});c&&c.length>0?this.setState({rtListArr:c,itemIndex:c.length-1}):this.setState({rtListArr:[]})}else(0,a.toast)({content:i.multiLang["attr-attrmodel-000046"],color:"warning"});break;case"delRow":var p=this.state.rtListArr;p.splice(this.state.itemIndex,1),p&&p.length>0?this.setState({rtListArr:p,itemIndex:0}):this.setState({rtListArr:[],itemIndex:-1});break;case"upRow":if(s>0){var d=function(e,t){if(e.length>1&&0!==t){return r(e,t,t-1)}return e}(l,s);this.setState({rtListArr:d,itemIndex:s-1})}break;case"downRow":if(l&&l.length>0)if(s>=l.length-1)this.setState({itemIndex:l.length-1});else{var f=function(e,t){if(e.length>1&&t!==e.length-1){return r(e,t,t+1)}return e}(l,s);this.setState({rtListArr:f,itemIndex:s+1})}break;case"ensure":var m=[];if(this.state.rtListArr&&this.state.rtListArr.length>0){for(var g=0;g<this.state.rtListArr.length;g++){var y={pid:this.state.rtListArr[g].pid,refcode:this.state.rtListArr[g].refcode,refname:this.state.rtListArr[g].refname,refpk:this.state.rtListArr[g].refpk,cuserid:this.state.rtListArr[g].refpk,user_code:this.state.rtListArr[g].refcode,user_name:this.state.rtListArr[g].refname};m.push(y)}e.preprops.updateAttr({agents:m})}else e.preprops.updateAttr({agents:null});o(this);break;case"cancel":o(this)}};var a=n(1),i=n(0);function r(e,t,n){return e[t]=e.splice(n,1,e[t])[0],e}function o(e){e.props.preprops.modal.close("workflowAgent");var t=ReactDOM.findDOMNode(e);t&&ReactDOM.unmountComponentAtNode(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,a,i,r,o){"defaultAgent"===n&&(a&&a.value?(this.setState({rtListArr:[]}),e.form.setFormItemsValue("workflowAgent",{userfer:{value:null}}),e.button.setButtonVisible({addRow:!1,delRow:!1,upRow:!1,downRow:!1}),e.form.setFormItemsDisabled("workflowAgent",{userfer:!0})):(e.form.setFormItemsDisabled("workflowAgent",{userfer:!1}),e.button.setButtonVisible({addRow:!0,delRow:!0,upRow:!0,downRow:!0})))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,a,i,r){return!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(2),r=d(i),o=n(1),l=d(n(236)),s=d(n(237)),u=d(n(238)),c=d(n(239)),p=n(0);function d(e){return e&&e.__esModule?e:{default:e}}n(249);var f=o.base.NCTabs,m=(o.base.NCButton,f.NCTabPane),g=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.initNoticeTable=function(){var e=n,t=[];if(e.state.msginfo&&e.state.msginfo.notice){var a=n.props.meta.getMeta().notice.items;e.state.msginfo.notice.map((function(e,n){var i={value:e.condition},r={value:e.type},o={c:i,t:r};return a.map((function(t,n){return"condition"==t.attrcode&&t.options.map((function(t,n){return t.value==e.condition&&(i=t),i})),"type"==t.attrcode&&t.options.map((function(t,n){return t.value==e.type&&(r=t),r})),o={c:i,t:r}})),t.push(JSON.parse(JSON.stringify({values:{condition:o.c,type:o.t,msgTempcode:{value:e.msgTempcode},receiver:{value:e.receiver},needCheck:{value:e.needCheck},pushable:{value:e.pushable},receivervos:{value:{names:e.receiver,receiver:e.receivervos}}}}))),t}))}e.props.editTable.setTableData("notice",{rows:t})},n.reBackFun=function(e){n.props.onEnsureInfoSave&&"function"==typeof n.props.onEnsureInfoSave&&n.props.onEnsureInfoSave(e)},n.initCopyTable=function(){var e=n,t=[];if(e.state.msginfo&&e.state.msginfo.copy)e.state.msginfo.copy.map((function(e,n){return t.push({values:{condition:{value:0},type:{value:e.type},msgTempcode:{value:e.msgTempcode},receiver:{value:e.receiver},needCheck:{value:!1},pushable:{value:!1},receivervos:{value:{names:e.receiver,receiver:e.receivervos}}}}),t})),e.props.editTable.setTableData("copy",{rows:t});else{e.props.editTable.setTableData("copy",{rows:[{values:{msgTempcode:{value:""}},receiver:{value:""}}]})}},n.state={billtype:p.flowContext.get().billType,msginfo:e.preprops?e.preprops.value:{},activeKey:"notice"},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){this.btnVisible(this.props,this.state.activeKey),this.initNoticeTable(),this.initCopyTable()}},{key:"onTabChange",value:function(e){this.setState({activeKey:e}),this.btnVisible(this.props,e)}},{key:"btnVisible",value:function(e,t){"notice"==t?e.button.setButtonsVisible({addRow:!0,delRow:!0}):e.button.setButtonsVisible({addRow:!1,delRow:!1})}},{key:"render",value:function(){var e=this.props,t=e.button,n=e.modal,a=this.props.editTable.createEditTable,i=n.createModal,o=t.createButtonApp;return r.default.createElement("div",null,i("modal"),r.default.createElement(f,{onChange:this.onTabChange.bind(this),navtype:"turn",contenttype:"moveleft",defaultActiveKey:this.state.activeKey,extraContent:r.default.createElement("div",{className:"topButton"},o({area:"page_header",buttonLimit:6,onButtonClick:s.default.bind(this),popContainer:document.querySelector(".footerBtn")}))},r.default.createElement(m,{tab:p.multiLang["attr-messagereminding-000004"],key:"notice"},a("notice",{showCheck:!0,onAfterEvent:u.default.bind(this),onBeforeEvent:c.default.bind(this)})),r.default.createElement(m,{tab:p.multiLang["attr-messagereminding-000005"],key:"copy"},a("copy",{onAfterEvent:u.default.bind(this),onBeforeEvent:c.default.bind(this)}))),r.default.createElement("div",{className:"bottomButton"},o({area:"page_footer",buttonLimit:6,onButtonClick:s.default.bind(this),popContainer:document.querySelector(".footerBtn")})))}}]),t}(i.Component);g=(0,o.createPage)({initTemplate:l.default})(g),t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={notice:{moduletype:"table",status:"edit",items:[{attrcode:"condition",required:!1,visible:!0,itemtype:"select",showClear:!1,label:a.multiLang["attr-messagereminding-000031"],options:[{display:a.multiLang["attr-messagereminding-000032"],value:"0"},{display:a.multiLang["attr-messagereminding-000033"],value:"1"},{display:a.multiLang["attr-messagereminding-000034"],value:"2"},{display:a.multiLang["attr-messagereminding-000035"],value:"3"}],initialvalue:{display:a.multiLang["attr-messagereminding-000032"],value:"0"}},{attrcode:"type",required:!1,visible:!0,itemtype:"select",showClear:!1,label:a.multiLang["attr-messagereminding-000036"],options:[{display:a.multiLang["attr-messagereminding-000002"],value:"4"},{display:a.multiLang["attr-messagereminding-000037"],value:"1"},{display:a.multiLang["attr-messagereminding-000038"],value:"2"}],initialvalue:{display:a.multiLang["attr-messagereminding-000002"],value:"4"}},{attrcode:"msgTempcode",required:!0,visible:!0,itemtype:"input",label:a.multiLang["attr-messagereminding-000039"]},{attrcode:"receiver",required:!0,visible:!0,itemtype:"input",label:a.multiLang["attr-messagereminding-000040"]},{attrcode:"needCheck",required:!1,visible:!0,itemtype:"switch",label:a.multiLang["attr-messagereminding-000041"]},{attrcode:"pushable",required:!1,visible:!0,itemtype:"switch",label:a.multiLang["attr-messagereminding-000042"]},{attrcode:"receivervos",required:!1,visible:!1,itemtype:"input",label:a.multiLang["attr-messagereminding-000043"]}]},copy:{moduletype:"table",status:"edit",items:[{attrcode:"msgTempcode",required:!1,visible:!0,itemtype:"input",label:a.multiLang["attr-messagereminding-000039"]},{attrcode:"receiver",required:!1,visible:!0,itemtype:"input",label:a.multiLang["attr-messagereminding-000044"]},{attrcode:"receivervos",required:!1,visible:!1,itemtype:"input",label:a.multiLang["attr-messagereminding-000043"]},{attrcode:"type",required:!1,visible:!1,itemtype:"select",showClear:!1,label:a.multiLang["attr-messagereminding-000036"],options:[{display:a.multiLang["attr-messagereminding-000045"],value:"5"}],initialvalue:{display:a.multiLang["attr-messagereminding-000045"],value:"5"}}]}},n={msgButtons:[{id:"0001A41000000006J5B1",btncolor:"button_secondary",type:"general_btn",key:"addRow",title:a.multiLang["attr-messagereminding-000018"],area:"page_header",children:[]},{id:"0001A41000000006J5B1",btncolor:"button_secondary",type:"general_btn",key:"delRow",title:a.multiLang["attr-messagereminding-000019"],area:"page_header",children:[]},{id:"0001A41000000006J5B1",btncolor:"button_main",type:"general_btn",key:"ensure",title:a.multiLang["attr-messagereminding-000046"],keyboard:"alt+y",area:"page_footer",children:[]},{id:"0001A41000000006J5B1",btncolor:"button_secondary",type:"general_btn",key:"cancel",title:a.multiLang["attr-messagereminding-000047"],keyboard:"alt+n",area:"page_footer",children:[]},{id:"0001A41000000006J5B1",btncolor:"button_secondary",type:"general_btn",key:"clearmsg",title:a.multiLang["attr-messagereminding-000048"],area:"bt_line",children:[]}]};!function(e,t){var n={label:a.multiLang["attr-messagereminding-000027"],attrcode:"opr",itemtype:"customer",visible:!0,render:function(t,n,a){return e.button.createOprationButton(["clearmsg"],{area:"bt_line",buttonLimit:5,onButtonClick:function(e,t){return function(e,t,n,a,i){switch(t){case"clearmsg":e.editTable.setValByKeyAndIndex("copy",i,"msgTempcode",{value:null,display:null}),e.editTable.setValByKeyAndIndex("copy",i,"receiver",{value:null,display:null}),e.editTable.setValByKeyAndIndex("copy",i,"receivervos",{value:null,display:null})}}(e,t,0,0,a)}})}};t.copy.items.push(n),e.meta.setMeta(t)}(e,t),e.button.setButtons(n.msgButtons)};var a=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){switch(t){case"addRow":e.editTable.addRow("notice",e.editTable.getNumberOfRows("notice"),!1,{condition:{display:i.multiLang["attr-messagereminding-000032"],value:"0"},type:{display:i.multiLang["attr-messagereminding-000002"],value:"4"}});break;case"delRow":var o=e.editTable.getCheckedRows("notice");if(!o||!o.length)return void(0,a.toast)({content:i.multiLang["attr-messagereminding-000030"],color:"warning"});for(var l=[],s=0;s<o.length;s++)l.push(o[s].index);e.editTable.deleteTableRowsByIndex("notice",l);break;case"ensure":var u=[],c=[],p=e.editTable.getAllRows("notice");if(!this.props.editTable.checkRequired("notice",p))return;p&&p.length>0&&p.map((function(e,t){var n={condition:e.values.condition.value,type:e.values.type.value,msgTempcode:e.values.msgTempcode.value,receiver:e.values.receiver.value,needCheck:e.values.needCheck.value,pushable:e.values.pushable.value,receivervos:e.values.receivervos.value.receiver};return"3"!=e.status&&u.push(n),u}));var d=e.editTable.getAllRows("copy");d&&d.length>0&&d.map((function(e,t){var n={condition:"0",type:"5",needCheck:!1,pushable:!1};return e.values.msgTempcode&&e.values.msgTempcode.value&&(n.msgTempcode=e.values.msgTempcode.value),e.values.receiver&&e.values.receiver.value&&(n.receiver=e.values.receiver.value,n.receivervos=e.values.receivervos.value.receiver),"3"!=e.status&&c.push(n),c})),e.preprops.updateAttr({notice:u,copy:c}),r(this);break;case"cancel":r(this)}};var a=n(1),i=n(0);function r(e){e.props.preprops.modal.close("msgNotice");var t=ReactDOM.findDOMNode(e);t&&ReactDOM.unmountComponentAtNode(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,a,i){}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,o,l,s){switch(u=o,c=t,n.attrcode){case"needCheck":case"pushable":if(s&&s.values&&s.values.type&&s.values.type.value&&"4"===s.values.type.value)break;return!1;case"msgTempcode":this.props.modal.show("modal",{title:r.multiLang["attr-messagereminding-000028"],content:React.createElement(i.default,{billtype:this.state.billtype,getmestempcode:d.bind(this)}),userControl:!1,size:"lg",beSureBtnClick:d.bind(this),cancelBtnClick:function(){}});break;case"receiver":this.props.modal.show("modal",{title:r.multiLang["attr-messagereminding-000029"],content:React.createElement(a.default,{preprops:this.props,billtype:this.state.billtype,optindex:o,optname:t,getReceiver:p.bind(this)}),userControl:!1,size:"lg",beSureBtnClick:p.bind(this),cancelBtnClick:function(){}})}return!0};var a=o(n(240)),i=o(n(91)),r=n(0);function o(e){return e&&e.__esModule?e:{default:e}}var l=void 0,s=void 0,u=void 0,c=void 0;function p(e){if(e)l=e;else{var t=l.getReceiverData();this.props.editTable.setValByKeyAndIndex(c,u,"receivervos",{value:null!=t?t:""}),this.props.editTable.setValByKeyAndIndex(c,u,"receiver",{value:null!=t?t.names:""})}}function d(e){if(e)s=e;else{var t=s.getmestempData();this.props.editTable.setValByKeyAndIndex(c,u,"msgTempcode",t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(2),r=function(e){return e&&e.__esModule?e:{default:e}}(i),o=n(1),l=n(241),s=n(0);n(28);var u=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"initData",value:function(){var e=[],t=this.props.preprops.editTable.getValByKeyAndIndex(this.props.optname,this.props.optindex,"receivervos"),n=this;if(t&&t.value)if(t.value.rows&&t.value.rows.length>0)e=t.value.rows;else{var a=t.value.receiver;if(a&&a.length>0)return void(0,o.ajax)({url:"/nccloud/wfm/message/toTranslateMsg.do",data:a,async:!1,success:function(t){var i={};t&&t.success&&(i=t.data);var r=n.props.meta.getMeta().notice.items;a.map((function(t,n){var a={value:t.m_type};return r.map((function(e,n){return"m_type"==e.attrcode&&e.options.map((function(e,n){return e.value==t.m_type&&(a=e),a})),a})),e.push({values:{m_type:a,m_code:{value:t.m_code},m_name:{value:t.m_name},m_pk:{value:t.m_pk,display:t.m_code},m_corppk:{value:i[t.m_corppk]?t.m_corppk:"",display:i[t.m_corppk]?i[t.m_corppk]:""},m_bavailable:{value:t.m_bavailable}}}),e})),n.props.editTable.setTableData("notice",{rows:e})}});e=[]}this.props.editTable.setTableData("notice",{rows:e})}},{key:"getReceiverData",value:function(){var e=[],t="";this.props.editTable.filterEmptyRows("notice",["m_type"]);var n=this.props.editTable.getAllRows("notice",!0);if(n&&n.length>0)for(var a=0;a<n.length;a++){var i={m_name:n[a].values.m_name.value,m_code:n[a].values.m_code.value,m_pk:n[a].values.m_pk.value,m_type:n[a].values.m_type.value,m_corppk:n[a].values.m_corppk?n[a].values.m_corppk.value:"",m_bavailable:n[a].values.m_bavailable.value};e.push(i),t+=n[a].values.m_name.value,a<n.length-1&&(t+=",")}return{names:t,receiver:e,rows:n}}},{key:"componentDidMount",value:function(){this.props.getReceiver(this),this.initTemp(),this.initData()}},{key:"initTemp",value:function(){var e=this.props.meta.getMeta(),t=[{display:s.multiLang["attr-messagereminding-000006"],value:"2"},{display:s.multiLang["attr-messagereminding-000007"],value:"1"},{display:s.multiLang["attr-messagereminding-000008"],value:"3"},{display:s.multiLang["attr-messagereminding-000009"],value:"4"}];"copy"==this.props.optname&&t.push({value:"5",display:s.multiLang["attr-messagereminding-000010"]}),e.notice.items.map((function(n,a){return"m_type"==n.attrcode&&(e.notice.items[a].options=t),e})),this.props.meta.setMeta(e)}},{key:"render",value:function(){var e=this.props,t=(e.editTable,e.button),n=(e.modal,this.props.editTable.createEditTable),a=t.createButtonApp;return r.default.createElement("div",null,r.default.createElement("div",{className:"topButton"},a({area:"page_footer",buttonLimit:6,onButtonClick:l.buttonClick.bind(this),popContainer:document.querySelector(".footerBtn")})),n("notice",{showIndex:!0,showCheck:!0,height:340,onAfterEvent:l.afterEvent.bind(this),onBeforeEvent:l.beforeEvent.bind(this)}))}}]),t}(i.Component);t.default=u=(0,o.createPage)({initTemplate:l.initTemplate})(u)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.beforeEvent=t.afterEvent=t.buttonClick=t.initTemplate=void 0;var a=l(n(242)),i=l(n(243)),r=l(n(244)),o=l(n(245));function l(e){return e&&e.__esModule?e:{default:e}}t.initTemplate=a.default,t.buttonClick=i.default,t.afterEvent=r.default,t.beforeEvent=o.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={notice:{moduletype:"table",status:"edit",items:[{attrcode:"m_type",required:!1,visible:!0,itemtype:"select",showClear:!1,label:a.multiLang["attr-messagereminding-000012"],options:[{display:a.multiLang["attr-messagereminding-000006"],value:"2"},{display:a.multiLang["attr-messagereminding-000007"],value:"1"},{display:a.multiLang["attr-messagereminding-000008"],value:"3"},{display:a.multiLang["attr-messagereminding-000009"],value:"4"}],initialvalue:{display:a.multiLang["attr-messagereminding-000006"],value:"2"}},{attrcode:"m_code",required:!1,visible:!1,itemtype:"refer",label:a.multiLang["attr-messagereminding-000013"],refcode:""},{attrcode:"m_pk",required:!1,visible:!0,itemtype:"refer",label:a.multiLang["attr-messagereminding-000014"],refcode:""},{attrcode:"m_name",required:!1,visible:!0,itemtype:"input",label:a.multiLang["attr-messagereminding-000015"],disabled:!0},{attrcode:"m_corppk",required:!1,visible:!0,itemtype:"input",label:a.multiLang["attr-messagereminding-000016"],disabled:!0},{attrcode:"m_bavailable",required:!1,visible:!1,itemtype:"switch",label:a.multiLang["attr-messagereminding-000017"],disabled:!0,initialvalue:{value:!0}}]}},n={msgButtons:[{id:"0001A41000000006J5B1",type:"button_main",key:"addRow",title:a.multiLang["attr-messagereminding-000018"],area:"page_footer",children:[]},{id:"0001A41000000006J5B1",type:"button_main",key:"delRow",title:a.multiLang["attr-messagereminding-000019"],area:"page_footer",children:[]}]};!function(e,t){e.meta.setMeta(t)}(e,t),e.button.setButtons(n.msgButtons)};var a=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){switch(t){case"addRow":this.props.editTable.addRow("notice");break;case"delRow":var n=this.props.editTable.getCheckedRows("notice"),r=[];if(n&&n.length>0){for(var o=0;o<n.length;o++)r.push(n[o].index);this.props.editTable.deleteTableRowsByIndex("notice",r,!0)}else(0,a.toast)({content:i.multiLang["attr-messagereminding-000011"],color:"warning"})}};var a=n(1),i=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,i,r,o,l){var s=l.values.m_type;if("m_type"==n&&(e.editTable.deleteTableRowsByIndex(t,[o],!0),e.editTable.addRow(t,o,!1,{m_type:s})),n==a&&i&&i.length>0){for(var u=e.editTable.getNumberOfRows(t),c=0;c<i.length;c++)if(i[c]&&i[c].refpk&&i[c].refname){var p={m_type:s,m_code:{value:i[c].refcode},m_name:{value:i[c].refname},m_pk:{value:i[c].refpk,display:i[c].refcode},m_corppk:{value:i[c].values.pk_org&&null!=i[c].values.pk_org?i[c].values.pk_org.value:"",display:i[c].values.pk_org&&null!=i[c].values.pk_org?i[c].values.pk_org.display:""}};"1"===l.values.m_type.value?p.m_corppk={value:i[c].values.pk_org&&null!=i[c].values.pk_org?i[c].values.pk_org.value:"",display:i[c].values.name&&null!=i[c].values.name?i[c].values.name.value:""}:"2"===l.values.m_type.value&&(p.m_corppk={value:i[c].values.pk_org&&null!=i[c].values.pk_org?i[c].values.pk_org.value:"",display:i[c].values.name&&null!=i[c].values.name?i[c].values.name.value:""}),e.editTable.addRow(t,u<=0?c:u+c,!1,p)}e.editTable.deleteTableRowsByIndex(t,[o],!0);var d=[];!function(e,t,n){null!=n&&n.length>0&&n.map((function(n,a){null!=e&&(e.length<=0||!e.includes(n.values.m_pk.value))?e.push(n.values.m_pk.value):t.push(a)}))}([],d,e.editTable.getAllRows(t,!0)),e.editTable.deleteTableRowsByIndex(t,d),e.editTable.filterEmptyRows(t,["m_type"])}};var a="m_pk"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,o,l){var s=this;if(n.attrcode==a){var u=s.props.meta.getMeta();s.props.renderItem("table","notice",a,null);var c="/uap/refer/riart/userRefer/index",p={};switch(l.values[i].value){case"2":c="/uap/refer/riart/userRefer/index",p={isMutiGroup:!1,isAuthFilter:!1,isSelfVisible:!0,isShowSysAdmin:!1,isShowGroupAdmin:!0};break;case"1":c="/uap/refer/riart/roleRefer/index",p={isAuthFilter:!1};break;case"3":c="/uap/refer/riart/rcvVarTableRefer/index";break;case"4":c="/uap/refer/riart/rcvCustomRef/index";break;case"5":c="/uap/refer/riart/wfUserGroupTableRef/index"}u[t].items.map((function(e){return u[t].items.find((function(e){return e.attrcode==a})).refcode=c,u[t].items.find((function(e){return e.attrcode==a})).itemtype="refer",u[t].items.find((function(e){return e.attrcode==a})).isMultiSelectedEnabled=!0,"4"==l.values[i].value?u[t].items.find((function(e){return e.attrcode==a})).queryCondition=function(){return{billtypecode:s.props.billtype}}:u[t].items.find((function(e){return e.attrcode==a})).queryCondition=p,u})),s.props.meta.setMeta(u)}return!0};var a="m_pk",i="m_type"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buttonClick=t.initTemplate=void 0;var a=r(n(247)),i=r(n(248));function r(e){return e&&e.__esModule?e:{default:e}}t.initTemplate=a.default,t.buttonClick=i.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={notice:{moduletype:"table",status:"browe",items:[{attrcode:"pk_templet",required:!1,visible:!1,itemtype:"input",label:"primaryKey"},{attrcode:"tempcode",required:!1,visible:!0,itemtype:"input",label:a.multiLang["attr-messagereminding-000014"]},{attrcode:"tempname",required:!1,visible:!0,itemtype:"input",label:a.multiLang["attr-messagereminding-000015"],disabled:!0},{attrcode:"tempdscrpt",required:!1,visible:!0,itemtype:"input",label:a.multiLang["attr-messagereminding-000021"],disabled:!0},{attrcode:"isglobal",required:!1,visible:!0,itemtype:"switch",label:a.multiLang["attr-messagereminding-000022"],disabled:!0},{attrcode:"isdefault",required:!1,visible:!0,itemtype:"switch",label:a.multiLang["attr-messagereminding-000023"],disabled:!0},{attrcode:"isapprove",required:!1,visible:!0,width:"20%",itemtype:"switch",label:a.multiLang["attr-messagereminding-000024"],disabled:!0}]}},n={msgButtons:[{id:"0001A41000000006J5B1",type:"button_main",key:"preview",title:a.multiLang["attr-messagereminding-000025"],area:"bt_line",children:[]},{id:"0001A41000000006J5B1",type:"button_main",key:"maintenance",title:a.multiLang["attr-messagereminding-000026"],area:"bt_line",children:[]}]};!function(e,t){var n={label:a.multiLang["attr-messagereminding-000027"],attrcode:"opr",itemtype:"customer",fixed:"right",visible:!0,render:function(t,n,a){return e.button.createOprationButton(["preview","maintenance"],{area:"bt_line",buttonLimit:5,onButtonClick:function(e,t){return function(e,t,n,a,i){var r="browse";switch(t){case"preview":r="browse";break;case"maintenance":r="edit"}"preview"===t?e.openTo("/uap/riart/msgTemp/main/index.html?global="+("Y"==a.isglobal.value?"1":"0")+"&openCode="+e.billtype+"&openTemplateId="+a.pk_templet.value,{appcode:"Y"==a.isglobal.value?"10180402":"10180403",pagecode:"Y"==a.isglobal.value?"10180402PAGE":"10180403PAGE",c:"Y"==a.isglobal.value?"10180402":"10180403",p:"Y"==a.isglobal.value?"10180402PAGE":"10180403PAGE",status:r}):"maintenance"===t&&e.openTo("/uap/riart/msgTemp/main/index.html?global="+("Y"==a.isglobal.value?"1":"0")+"&openCode="+e.billtype,{appcode:"Y"==a.isglobal.value?"10180402":"10180403",pagecode:"Y"==a.isglobal.value?"10180402PAGE":"10180403PAGE",c:"Y"==a.isglobal.value?"10180402":"10180403",p:"Y"==a.isglobal.value?"10180402PAGE":"10180403PAGE",status:r})}(e,t,0,n)}})}};t.notice.items.push(n),e.meta.setMeta(t)}(e,t),e.button.setButtons(n.msgButtons)};var a=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.table.getClickRowIndex("notice"),r="browse";switch(t){case"preview":r="browse";break;case"maintenance":r="edit"}n&&n.index&&n.index>=0?this.previewpage(n.record,r):(0,a.toast)({content:i.multiLang["attr-messagereminding-000020"],color:"danger"})};var a=n(1),i=n(0)},function(e,t,n){var a=n(250);"string"==typeof a&&(a=[[e.i,a,""]]);var i={transform:void 0};n(4)(a,i);a.locals&&(e.exports=a.locals)},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,".page_footer-button-app-wrapper .nc-hotkeys-wrapper {\n  width: 99%;\n  text-align: right;\n  margin-top: 5px;\n}\n",""])},function(e,t,n){var a=n(252);"string"==typeof a&&(a=[[e.i,a,""]]);var i={transform:void 0};n(4)(a,i);a.locals&&(e.exports=a.locals)},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,".lightapp-component-form {\n  padding: 0 !important;\n}\n.hideThisDom {\n  display: none;\n}\n",""])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=c(n(2)),r=n(1),o=c(n(254)),l=c(n(90)),s=c(n(92)),u=n(0);function c(e){return e&&e.__esModule?e:{default:e}}var p=r.base.NCButton,d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.noticeCall=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1]},n.handleClick=function(e){switch(e){case"msgNotice":(0,l.default)({newProps:n.props,queryParams:{data:{},url:""},call:n.noticeCall});break;case"taskNotice":(0,s.default)({newProps:n.props,position:"activeTask",queryParams:{data:{},url:""},call:n.noticeCall})}},n.state={msgNoticeDisplay:null,taskNoticeDisplay:null,taskNoticeShow:!0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){this.showTaskNoticeDisplay(this.props,this.props.value.workitemMsg),this.showMsgNoticeDisplay(this.props.value.notice,this.props.value.copy)}},{key:"componentWillReceiveProps",value:function(e){this.showTaskNoticeDisplay(e,e.value.workitemMsg),this.showMsgNoticeDisplay(e.value.notice,e.value.copy)}},{key:"showMsgNoticeDisplay",value:function(e,t){if(e&&e.length>0)for(var n=0;n<e.length;n++)if(e[n].msgTempcode&&""!=e[n].msgTempcode)return void this.setState({msgNoticeDisplay:u.multiLang["attr-attrmodel-000063"]});if(t&&t.length>0)for(var a=0;a<t.length;a++)if(t[a].msgTempcode&&""!=t[a].msgTempcode)return void this.setState({msgNoticeDisplay:u.multiLang["attr-attrmodel-000063"]});this.setState({msgNoticeDisplay:null})}},{key:"showTaskNoticeDisplay",value:function(e,t){if("auto"===e.type?this.setState({taskNoticeShow:!1}):this.setState({taskNoticeShow:!0}),t)if(t&&t.length>0){for(var n=0;n<t.length;n++)if("0"===t[n].type){if(t[n].msgTempCode&&""!=t[n].msgTempCode)return void this.setState({taskNoticeDisplay:u.multiLang["attr-attrmodel-000063"]});if(t[n].pushable)return void this.setState({taskNoticeDisplay:u.multiLang["attr-attrmodel-000063"]})}else if("210"===t[n].type||"220"===t[n].type||"230"===t[n].type||"240"===t[n].type){if(t[n].msgTempCode&&""!=t[n].msgTempCode)return void this.setState({taskNoticeDisplay:u.multiLang["attr-attrmodel-000063"]})}else if(("110"===t[n].type||"120"===t[n].type||"130"===t[n].type||"140"===t[n].type)&&t[n].msgTempCode&&""!=t[n].msgTempCode)return void this.setState({taskNoticeDisplay:u.multiLang["attr-attrmodel-000063"]})}else this.setState({taskNoticeDisplay:null});else this.setState({taskNoticeDisplay:null});this.setState({taskNoticeDisplay:null})}},{key:"render",value:function(){var e=this,t=this.props,n=t.modal,a=(t.form.createForm,n.createModal);return i.default.createElement("div",{className:"partBox"},a("msgNotice"),a("taskNotice"),i.default.createElement("span",{className:"attrContentTitle"},u.multiLang["attr-messagereminding-000064"]),i.default.createElement("div",{className:"generalInput"},i.default.createElement("p",null,i.default.createElement("span",null,u.multiLang["attr-attrmodel-000073"]),i.default.createElement(p,{className:"partBtn",fieldid:"msgNotice_btn",onClick:function(){e.handleClick("msgNotice")}},"···"),i.default.createElement("span",null,this.state.msgNoticeDisplay)),this.state.taskNoticeShow?i.default.createElement("p",null,i.default.createElement("span",null,u.multiLang["attr-messagereminding-000003"]),i.default.createElement(p,{className:"partBtn",fieldid:"taskNotice_btn",onClick:function(){e.handleClick("taskNotice")}},"···"),i.default.createElement("span",null,this.state.taskNoticeDisplay)):""))}}]),t}(i.default.Component);d=(0,r.createPage)({initTemplate:o.default})(d),t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){!function(e,t){e.meta.setMeta(t)}(e,{messageReminding:{moduletype:"form",status:"edit",items:[{attrcode:"msgNotice",placeholder:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"switch",label:a.multiLang["attr-messagereminding-000002"]},{attrcode:"taskNotice",placeholder:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"switch",label:a.multiLang["attr-messagereminding-000003"]}]}})};var a=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(2),r=function(e){return e&&e.__esModule?e:{default:e}}(i),o=n(1),l=n(0),s=n(256);n(261);var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={billtype:l.flowContext.get().billType},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"getDefaultDataByPosition",value:function(e){return{rows:[{values:{type:{value:"0",display:l.multiLang["attr-messagereminding-000056"]},captionType:{value:"0",display:l.multiLang["attr-messagereminding-000056"]},workitemTempCode:{value:""},pushable:{value:!1}}},{values:{type:{value:"140",display:l.multiLang["attr-messagereminding-000057"]},captionType:{value:"140",display:e},workitemTempCode:{value:""},pushable:{value:!1}}},{values:{type:{value:"240",display:l.multiLang["attr-messagereminding-000058"]},captionType:{value:"240",display:e},workitemTempCode:{value:""},pushable:{value:!1}}}]}}},{key:"getDefaultData",value:function(e,t,n){var a={};if(n?"advanced"===n?a=this.getDefaultDataByPosition(l.multiLang["attr-messagereminding-000049"]):"activeTask"===n&&(a=this.getDefaultDataByPosition(l.multiLang["attr-messagereminding-000052"])):a=this.getDefaultDataByPosition(l.multiLang["attr-messagereminding-000052"]),t&&"{}"!==JSON.stringify(t)){for(var i=0;i<t.length;i++)"0"===t[i].type?(a.rows[0].values.workitemTempCode.value=t[i].msgTempCode,a.rows[0].values.workitemTempCode.display=t[i].msgTempCodeDisplay,t[i].pushable?a.rows[0].values.pushable.value=t[i].pushable:a.rows[0].values.pushable.value=!1):"210"===t[i].type||"220"===t[i].type||"230"===t[i].type||"240"===t[i].type?(a.rows[2].values.captionType.value=t[i].type,a.rows[2].values.captionType.display=this.getDisplay(t[i].type),a.rows[2].values.workitemTempCode.value=t[i].msgTempCode,a.rows[2].values.workitemTempCode.display=t[i].msgTempCodeDisplay,a.rows[2].values.pushable.value=!1):"110"!==t[i].type&&"120"!==t[i].type&&"130"!==t[i].type&&"140"!==t[i].type||(a.rows[1].values.captionType.value=t[i].type,a.rows[1].values.captionType.display=this.getDisplay(t[i].type),a.rows[1].values.workitemTempCode.value=t[i].msgTempCode,a.rows[1].values.workitemTempCode.display=t[i].msgTempCodeDisplay,a.rows[1].values.pushable.value=!1);return a}return a}},{key:"getDisplay",value:function(e){return"210"===e?l.multiLang["attr-messagereminding-000061"]:"220"===e?l.multiLang["attr-messagereminding-000062"]:"230"===e?l.multiLang["attr-messagereminding-000050"]:"240"===e?l.multiLang["attr-messagereminding-000052"]:"110"===e?l.multiLang["attr-messagereminding-000051"]:"120"===e?l.multiLang["attr-messagereminding-000060"]:"130"===e?l.multiLang["attr-messagereminding-000050"]:"140"===e?l.multiLang["attr-messagereminding-000052"]:l.multiLang["attr-messagereminding-000049"]}},{key:"componentDidMount",value:function(){this.initData()}},{key:"initData",value:function(){this.props.editTable.setTableData("workitemMsg",this.getDefaultData(this.props.preprops,this.props.preprops.value.workitemMsg,this.props.position))}},{key:"render",value:function(){var e=this.props,t=e.modal,n=e.button,a=this.props.editTable.createEditTable,i=t.createModal,o=n.createButtonApp;return r.default.createElement("div",null,i("modal"),a("workitemMsg",{onAfterEvent:s.afterEvent.bind(this),onBeforeEvent:s.beforeEvent.bind(this)}),r.default.createElement("div",{className:"bottomButton"},o({area:"page_footer",buttonLimit:6,onButtonClick:s.buttonClick.bind(this),popContainer:document.querySelector(".footerBtn")})))}}]),t}(i.Component);u=(0,o.createPage)({initTemplate:s.initTemplate})(u),t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.beforeEvent=t.afterEvent=t.buttonClick=t.initTemplate=void 0;var a=l(n(257)),i=l(n(258)),r=l(n(259)),o=l(n(260));function l(e){return e&&e.__esModule?e:{default:e}}t.initTemplate=a.default,t.buttonClick=i.default,t.afterEvent=r.default,t.beforeEvent=o.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={workitemMsg:{moduletype:"table",status:"edit",items:[{attrcode:"type",required:!1,visible:!0,itemtype:"select",showClear:!1,label:a.multiLang["attr-messagereminding-000036"],options:[{value:"0",display:a.multiLang["attr-messagereminding-000056"]},{value:"140",display:a.multiLang["attr-messagereminding-000057"]},{value:"240",display:a.multiLang["attr-messagereminding-000058"]}],initialvalue:{display:a.multiLang["attr-messagereminding-000056"],value:"0"},disabled:!0},{attrcode:"captionType",required:!1,visible:!0,itemtype:"select",showClear:!1,label:a.multiLang["attr-messagereminding-000059"],options:[{display:a.multiLang["attr-messagereminding-000056"],value:"0"},{display:a.multiLang["attr-messagereminding-000051"],value:"110"},{display:a.multiLang["attr-messagereminding-000060"],value:"120"},{display:a.multiLang["attr-messagereminding-000050"],value:"130"},{display:a.multiLang["attr-messagereminding-000052"],value:"140"},{display:a.multiLang["attr-messagereminding-000061"],value:"210"},{display:a.multiLang["attr-messagereminding-000062"],value:"220"},{display:a.multiLang["attr-messagereminding-000050"],value:"230"},{display:a.multiLang["attr-messagereminding-000052"],value:"240"}],initialvalue:{display:a.multiLang["attr-messagereminding-000056"],value:"0"}},{attrcode:"workitemTempCode",required:!1,visible:!0,itemtype:"input",label:a.multiLang["attr-messagereminding-000039"]},{attrcode:"pushable",visible:!0,itemtype:"switch",label:a.multiLang["attr-messagereminding-000042"],disabled:!1}]}},n={msgButtons:[{id:"0001A41000000006J5B1",btncolor:"button_main",type:"general_btn",key:"ensure",title:a.multiLang["attr-messagereminding-000046"],keyboard:"alt+y",area:"page_footer",children:[]},{id:"0001A41000000006J5B1",btncolor:"button_secondary",type:"general_btn",key:"cancel",title:a.multiLang["attr-messagereminding-000047"],keyboard:"alt+n",area:"page_footer",children:[]},{id:"0001A41000000006J5B1",btncolor:"button_secondary",type:"general_btn",key:"clearmsg",title:a.multiLang["attr-messagereminding-000063"],area:"bt_line",children:[]}]};!function(e,t){var n={label:a.multiLang["attr-messagereminding-000027"],attrcode:"opr",itemtype:"customer",visible:!0,render:function(t,n,a){return e.button.createOprationButton(["clearmsg"],{area:"bt_line",buttonLimit:5,onButtonClick:function(e,t){return function(e,t,n,a,i){switch(t){case"clearmsg":e.editTable.setValByKeyAndIndex("workitemMsg",i,"workitemTempCode",{value:null,display:null})}}(e,t,0,0,a)}})}};t.workitemMsg.items.push(n),e.meta.setMeta(t)}(e,t),e.button.setButtons(n.msgButtons)};var a=n(0)},function(e,t,n){"use strict";function a(e){e.props.preprops.modal.close("taskNotice");var t=ReactDOM.findDOMNode(e);t&&ReactDOM.unmountComponentAtNode(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){switch(t){case"ensure":var i=[],r=e.editTable.getAllRows("workitemMsg");if(!e.editTable.checkRequired("workitemMsg",r))return;r&&r.length>0&&r.map((function(e,t){var n={type:e.values.captionType.value,msgTempCode:e.values.workitemTempCode.value,msgTempCodeDisplay:e.values.workitemTempCode.display,pushable:e.values.pushable.value};return i.push(n),i})),e.preprops.updateAttr({workitemMsg:i}),a(this);break;case"cancel":a(this)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,a,i){}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,o,u,c){if(l=o,"captionType"==n.attrcode){var p=e.meta.getMeta(),d=e.editTable.getValByKeyAndIndex(t,o,"type"),f=[];if("140"==d.value)f="advanced"===e.position?[{value:"140",display:r.multiLang["attr-messagereminding-000049"]},{value:"130",display:r.multiLang["attr-messagereminding-000050"]},{value:"110",display:r.multiLang["attr-messagereminding-000051"]}]:[{value:"140",display:r.multiLang["attr-messagereminding-000052"]},{value:"130",display:r.multiLang["attr-messagereminding-000050"]},{value:"110",display:r.multiLang["attr-messagereminding-000051"]}];else{if("240"!=d.value)return!1;f="advanced"===e.position?[{value:"240",display:r.multiLang["attr-messagereminding-000049"]},{value:"230",display:r.multiLang["attr-messagereminding-000050"]},{value:"210",display:r.multiLang["attr-messagereminding-000053"]}]:[{value:"240",display:r.multiLang["attr-messagereminding-000052"]},{value:"230",display:r.multiLang["attr-messagereminding-000050"]},{value:"210",display:r.multiLang["attr-messagereminding-000053"]}]}return p.workitemMsg.items.map((function(e,t){return"captionType"==e.attrcode&&(p.workitemMsg.items[t].options=f),p})),e.meta.setMeta(p),!0}if("workitemTempCode"!=n.attrcode){if("pushable"==n.attrcode){e.meta.getMeta();var m=e.editTable.getValByKeyAndIndex(t,o,"type");return"140"==m.value?((0,i.toast)({content:r.multiLang["attr-messagereminding-000055"],color:"warning"}),!1):"240"!=m.value||((0,i.toast)({content:r.multiLang["attr-messagereminding-000055"],color:"warning"}),!1)}return!1}return e.modal.show("modal",{title:r.multiLang["attr-messagereminding-000054"],content:React.createElement(a.default,{billtype:this.state.billtype,getmestempcode:s.bind(this)}),userControl:!1,size:"lg",beSureBtnClick:s.bind(this),cancelBtnClick:function(){}}),!0};var a=function(e){return e&&e.__esModule?e:{default:e}}(n(91)),i=n(1),r=n(0);var o=void 0,l=void 0;function s(e){e?o=e:this.props.editTable.setValByKeyAndIndex("workitemMsg",l,"workitemTempCode",o.getmestempData())}},function(e,t,n){var a=n(262);"string"==typeof a&&(a=[[e.i,a,""]]);var i={transform:void 0};n(4)(a,i);a.locals&&(e.exports=a.locals)},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,".page_footer-button-app-wrapper .nc-hotkeys-wrapper {\n  width: 99%;\n  text-align: right;\n  margin-top: 5px;\n}\n",""])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=f(n(2)),r=n(1),o=n(264),l=n(266),s=n(0),u=n(6),c=n(93),p=f(n(269)),d=f(n(270));function f(e){return e&&e.__esModule?e:{default:e}}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(273);var g=r.base.NCRadio,y=r.base.NCButton;function b(e){var t=e.setName,n=e.setExplain;return i.default.createElement("ul",{className:"tab-content"},i.default.createElement("li",{className:"tab-content-item",onClick:function(){n(s.multiLang["attr-attrmodel-000076"])},onDoubleClick:function(){t("getoriginalcheckman( )")}},"getoriginalcheckman( )"),i.default.createElement("li",{className:"tab-content-item",onClick:function(){n(s.multiLang["attr-attrmodel-000077"])},onDoubleClick:function(){t("getrealcheckman( )")}},"getrealcheckman( )"))}function v(e){var t=e.setName,n=e.setExplain;return i.default.createElement("ul",{className:"tab-content"},i.default.createElement("li",{className:"tab-content-item",onClick:function(){n(s.multiLang["attr-attrmodel-000078"])},onDoubleClick:function(){t("_maxchildrenvar_( )")}},"_maxchildrenvar_( )"),i.default.createElement("li",{className:"tab-content-item",onClick:function(){n(s.multiLang["attr-attrmodel-000079"])},onDoubleClick:function(){t("_minchildrenvar_( )")}},"_minchildrenvar_( )"),i.default.createElement("li",{className:"tab-content-item",onClick:function(){n(s.multiLang["attr-attrmodel-000080"])},onDoubleClick:function(){t("_sumchildrenvar_( )")}},"_sumchildrenvar_( )"))}var h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=s.flowContext.get(),i=a.metaclassid,r=a.billType;return n.state={isShow:!1,metaclassid:i,billType:r,formulavalue:"",participantType:"",modeType:"defaultModel",customerRuleStat:!0,defaultType:"OPERATOR",appcode:"",upperArr:[],name:"aaa",flag:!1,json:{},inlt:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"isEqual",value:function(e,t){var n=e.value,a=t.value;return n.organizeUnitType===a.organizeUnitType&&n.organizeUnitPK===a.organizeUnitPK&&n.participantName===a.participantName&&n.participantFilterMode===a.participantFilterMode&&e.type==t.type}},{key:"getActorData",value:function(e,t,n,a,i,r,o,l,s,u){return a?{partType:{value:"CON_PARTICIPANT"},actorType:{value:e},limitMode:{value:a},activityType:{value:t,display:n},generalRule:{value:null,display:null},ruleDefine:{value:null,display:null},orgUnitTree:{value:r,display:l},showBillOrg:{value:o,display:u},orgSystem:{value:i,display:s}}:{partType:{value:"CON_PARTICIPANT"},actorType:{value:e},limitMode:{value:null},activityType:{value:t,display:n},generalRule:{value:null,display:null},ruleDefine:{value:null,display:null},orgUnitTree:{value:null,display:null},showBillOrg:{value:null,display:null},orgSystem:{value:null,display:null}}}},{key:"componentDidMount",value:function(){(0,c.initStructure)(this.props.value,this.props),this.initData(this.props.value,this.props)}},{key:"componentWillUpdate",value:function(){}},{key:"componentWillReceiveProps",value:function(e){this.isEqual(this.props,e)||((0,c.initStructure)(e.value,e),this.initData(e.value,e))}},{key:"initData",value:function(e,t){e&&"{}"!==JSON.stringify(e)&&e.organizeUnitType&&""!==e.organizeUnitType||(t.form.setFormItemsValue("actor",{activityType:{value:null,dispaly:null},actorType:{value:"OPERATOR"},limitMode:{value:0,display:null},generalRule:{display:null,value:0},ruleDefine:{display:null,value:""}}),t.form.setItemsVisible("actor",{orgUnitTree:!1,showBillOrg:!1,orgSystem:!1}),t.form.setFormItemsDisabled("actor",{activityType:!1,limitMode:!0}),t.updateAttr({organizeUnitType:"OPERATOR",participantType:"HUMAN"}),t.setParticipantType("OPERATOR"),this.setState({modeType:"defaultModel"}));var n={};null!=e&&null!=e.organizeUnitType&&""!==e.organizeUnitType&&t.setParticipantType(e.organizeUnitType),"COMMONRULE"===e.organizeUnitType?(n={partType:{value:"CON_GENERAL"},actorType:{value:0},activityType:{value:null,display:null},limitMode:{value:null},generalRule:{value:e.organizeUnitPK,display:e.participantName},ruleDefine:{value:null,dispaly:null},orgUnitTree:{value:null,dispaly:null},showBillOrg:{value:null,dispaly:null},orgSystem:{value:null,dispaly:null}},t.form.setFormItemsDisabled("actor",{activityType:!0}),t.form.setFormItemsValue("actor",n),t.form.setFormItemsValue("generalRule",{generalRule:{value:e.organizeUnitPK,display:e.participantName}}),t.form.setFormItemsValue("ruleDefine",{ruleDefine:{value:null,display:null}}),this.setState({modeType:"generalRuleMode"})):"CUSTOMRULE"===e.organizeUnitType?(n={partType:{value:"CON_CUSTOMERGENRRAL"},actorType:{value:0},activityType:{value:null,display:null},limitMode:{value:null},generalRule:{value:null,dispaly:null},ruleDefine:{value:e.organizeUnitPK,display:e.participantName},orgUnitTree:{value:null,dispaly:null},showBillOrg:{value:null,dispaly:null},orgSystem:{value:null,dispaly:null}},this.setState({customerRuleStat:!1,formulavalue:e.organizeUnitPK,modeType:"customeRuleModel"}),t.form.setFormItemsDisabled("actor",{activityType:!0}),t.form.setFormItemsValue("actor",n),t.form.setFormItemsValue("generalRule",{generalRule:{value:null,display:null}}),t.form.setFormItemsValue("ruleDefine",{ruleDefine:{value:e.organizeUnitPK,display:e.participantName}})):(this.setState({modeType:"defaultModel"}),n=this.getActorData(e.organizeUnitType,e.organizeUnitPK,e.participantName,e.participantFilterMode,e.orgSystem,e.orgUnitTree,e.showBillOrg,e.orgUnitTreeDisplay,e.orgSystemDisplay,e.showBillOrgDisplay),e.orgSystem?t.form.setItemsVisible("actor",{orgUnitTree:!1,showBillOrg:!1,orgSystem:!0}):e&&e.participantFilterMode&&"[U]SuperiorOrg"===e.participantFilterMode?t.form.setItemsVisible("actor",{orgUnitTree:!1,showBillOrg:!1,orgSystem:!0}):e.orgUnitTree?t.form.setItemsVisible("actor",{orgUnitTree:!0,showBillOrg:!1,orgSystem:!1}):e&&e.participantFilterMode&&"[U]SPECIFYOrg"===e.participantFilterMode?t.form.setItemsVisible("actor",{orgUnitTree:!0,showBillOrg:!1,orgSystem:!1}):e.showBillOrg?t.form.setItemsVisible("actor",{orgUnitTree:!1,showBillOrg:!0,orgSystem:!1}):e&&e.participantFilterMode&&"[U]BillOrg"===e.participantFilterMode&&t.form.setItemsVisible("actor",{orgUnitTree:!1,showBillOrg:!0,orgSystem:!1}),t.form.setFormItemsDisabled("actor",{actorType:!1,activityType:!1,generalRule:!0}),t.form.setFormItemsValue("actor",n),t.form.setFormItemsValue("generalRule",{generalRule:{value:null,display:null}}),t.form.setFormItemsValue("ruleDefine",{ruleDefine:{value:null,display:null}})),t.form.setItemsVisible("actor",{actorType:!0,activityType:!0}),"auto"===t.type&&(t.form.setItemsVisible("actor",{actorType:!0,orgUnitTree:!1,showBillOrg:!1,orgSystem:!1,activityType:!1,limitMode:!1,generalRule:!1,ruleDefine:!1}),t.form.setFormItemsDisabled("generalRule",{generalRule:!0}),t.form.setFormItemsValue("generalRule",{generalRule:{value:0,display:null}}),this.props.form.setFormItemsDisabled("actor",{actorType:!1,activityType:!0}),this.setState({customerRuleStat:!0,formulavalue:"",modeType:"defaultModel"}),t.form.setFormItemsValue("ruleDefine",{ruleDefine:{value:null,display:null}}))}},{key:"onOK",value:function(e){this.props.form.setFormItemsValue("actor",{actorType:{value:0,display:null},activityType:{value:0,display:null},limitMode:{value:0,display:null},generalRule:{display:null,value:0},ruleDefine:{value:e,display:e}}),this.props.form.setFormItemsValue("generalRule",{generalRule:{value:0,display:null}}),this.setState({formulavalue:e,isShow:!1}),this.props.value.participantId?this.props.updateAttr({organizeUnitType:"CUSTOMRULE",organizeUnitPK:e,organizeUnitBelongOrg:null,organizeUnitCode:null,participantFilterMode:null,participantName:null,participantType:"CUSTOMRULE",orgUnitTree:null,showBillOrg:null,showBillOrgDisplay:null,orgSystem:null,orgSystemDisplay:null}):this.props.updateAttr({organizeUnitType:"CUSTOMRULE",organizeUnitPK:e,organizeUnitBelongOrg:null,organizeUnitCode:null,participantFilterMode:null,participantName:null,participantType:"CUSTOMRULE",participantId:(0,u.uuid)(),orgUnitTree:null,showBillOrg:null,showBillOrgDisplay:null,orgSystem:null,orgSystemDisplay:null}),(0,c.setPartipantName)(this.props,s.multiLang["attr-participants-000003"]),this.props.setParticipantType("CUSTOMRULE"),this.props.form.setItemsVisible("actor",{orgUnitTree:!1,showBillOrg:!1,orgSystem:!1}),this.props.form.setFormItemsValue("actor",m({orgUnitTree:{value:null,display:null},showBillOrg:{display:null,value:null}},"showBillOrg",{display:null,value:null})),this.props.form.setFormItemsValue("ruleDefine",{ruleDefine:{value:e,display:e}})}},{key:"handleChange",value:function(e){if("auto"!==this.props.type){var t=this.props.form.getFormItemsValue("actor","actorType");switch(t&&t.value&&this.setState({defaultType:t.value}),e){case"generalRuleMode":this.props.form.setFormItemsDisabled("actor",{actorType:!0,activityType:!0}),this.props.form.setFormItemsValue("actor",{actorType:{value:0,display:null},activityType:{value:0,display:null},limitMode:{value:0,display:null},ruleDefine:{display:null,value:""}}),this.props.form.setFormItemsValue("actor",m({orgUnitTree:{value:null,display:null},showBillOrg:{display:null,value:null}},"showBillOrg",{display:null,value:null})),this.props.form.setItemsVisible("actor",{actorType:!0,activityType:!0,limitMode:!1,ruleDefine:!1,orgUnitTree:!1,showBillOrg:!1,orgSystem:!1}),this.props.form.setFormStatus("generalRule","edit"),this.props.form.setFormItemsDisabled("generalRule",{generalRule:!1}),this.setState({customerRuleStat:!0,formulavalue:""}),this.props.form.setFormItemsValue("ruleDefine",{ruleDefine:{value:null,display:null}});break;case"customeRuleModel":this.props.form.setFormItemsDisabled("actor",{actorType:!0,activityType:!0}),this.props.form.setFormItemsValue("actor",{actorType:{value:0,display:null},activityType:{value:0,display:null},limitMode:{value:0,display:null},ruleDefine:{display:null,value:""}}),this.props.form.setFormItemsValue("actor",m({orgUnitTree:{value:null,display:null},showBillOrg:{display:null,value:null}},"showBillOrg",{display:null,value:null})),this.props.form.setItemsVisible("actor",{actorType:!0,activityType:!0,limitMode:!1,ruleDefine:!1,orgUnitTree:!1,showBillOrg:!1,orgSystem:!1}),this.props.form.setFormItemsDisabled("generalRule",{generalRule:!0}),this.props.form.setFormItemsValue("generalRule",{generalRule:{value:0,display:null}}),this.setState({customerRuleStat:!1,formulavalue:""});break;case"defaultModel":this.props.form.setFormStatus("actor","edit"),this.props.form.setFormItemsDisabled("actor",{actorType:!1,activityType:!1}),this.props.form.setFormItemsDisabled("generalRule",{generalRule:!0}),this.props.form.setFormItemsValue("generalRule",{generalRule:{value:0,display:null}}),this.props.form.setFormItemsValue("ruleDefine",{ruleDefine:{value:null,display:null}}),this.props.updateAttr({organizeUnitType:this.state.defaultType,participantType:"HUMAN",organizeUnitPK:null}),this.props.setParticipantType(this.state.defaultType);var n={partType:{value:"CON_PARTICIPANT"},actorType:{value:this.state.defaultType},limitMode:{value:null},activityType:{value:null,display:null},generalRule:{value:null,display:null},ruleDefine:{value:null,display:null},orgUnitTree:{value:null,display:null},showBillOrg:{value:null,display:null},orgSystem:{value:null,display:null}};this.props.form.setFormItemsValue("actor",n),this.setState({customerRuleStat:!0,formulavalue:""})}this.setState({modeType:e})}}},{key:"onCancel",value:function(e){this.setState({isShow:!1})}},{key:"onHide",value:function(){this.setState({isShow:!1})}},{key:"handleClick",value:function(){var e=[];(0,u.getUpperConfigManualAction)(this.props.entities,this.props.curEnt,e),this.setState({upperArr:e}),this.props.form.setFormItemsValue("actor",{actorType:{value:0,display:null},activityType:{value:0,display:null},limitMode:{value:0,display:null},generalRule:{display:null,value:0}}),this.setState({isShow:!0})}},{key:"render",value:function(){var e=this.props.form.createForm,t=r.high.FormulaEditor;return i.default.createElement("div",{className:"partBox"},i.default.createElement("span",{className:"attrContentTitle"},s.multiLang["attr-participants-000004"]),i.default.createElement(g.NCRadioGroup,{name:"participant",selectedValue:this.state.modeType,onChange:this.handleChange.bind(this),fieldid:"participants"},i.default.createElement("div",null,i.default.createElement("div",{className:"radio-label"},i.default.createElement(g,{value:"defaultModel",fieldid:"defaultModel"},i.default.createElement("span",{className:"generalInput"},s.multiLang["attr-participants-000014"]))),e("actor",{setVisibleByForm:!0,onAfterEvent:l.afterEvent.bind(this),onBeforeEvent:l.beforeEvent.bind(this)})),i.default.createElement("div",null,i.default.createElement("div",{className:"radio-label"},i.default.createElement(g,{value:"generalRuleMode",fieldid:"generalRuleMode"},i.default.createElement("span",{className:"generalInput"},s.multiLang["attr-participants-000011"]))),e("generalRule",{setVisibleByForm:!0,onAfterEvent:l.afterEvent.bind(this),onBeforeEvent:l.beforeEvent.bind(this)})),i.default.createElement("div",null,i.default.createElement("div",{className:"radio-label"},i.default.createElement(g,{value:"customeRuleModel",fieldid:"customeRuleModel"},i.default.createElement("span",{className:"generalInput"},s.multiLang["attr-participants-000005"]))),i.default.createElement("div",{className:"generalInput"},i.default.createElement("p",{className:"marginTop"},i.default.createElement("span",null,s.multiLang["attr-participants-000015"]),i.default.createElement(y,{className:"partBtn",onClick:this.handleClick.bind(this),disabled:this.state.customerRuleStat},"···"))),e("ruleDefine",{setVisibleByForm:!0}))),i.default.createElement(t,{ref:"formulaEditor",onHide:this.onHide.bind(this),onCancel:this.onCancel.bind(this),onOk:this.onOK.bind(this),value:this.state.formulavalue,show:this.state.isShow,attrConfig:[{tab:s.multiLang["attr-participants-000020"],key:"WorkflowAttrLink",TabPaneContent:p.default,params:{linkname:this.state.upperArr}},{tab:s.multiLang["attr-participants-000021"],key:"MdMappingFormula",TabPaneContent:d.default,params:{src_billtype:this.state.billType}}],formulaConfig:[{tab:s.multiLang["attr-participants-000018"],key:"WorkflowFormulaLink",TabPaneContent:b},{tab:s.multiLang["attr-participants-000019"],key:"WorkflowFormulaOther",TabPaneContent:v}],metaParam:{pk_billtype:this.state.billType,classid:this.state.metaclassid},className:"referssssssss"}))}}]),t}(i.default.Component);t.default=h=(0,r.createPage)({initTemplate:o.initTemplate})(h)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initTemplate=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(265));t.initTemplate=a.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){!function(e,t){e.meta.setMeta(t)}(e,{actor:{moduletype:"form",items:[{attrcode:"partType",placeholder:"",leftspace:0,rightspace:0,required:!1,visible:!1,showClear:!1,itemtype:"select",label:i.multiLang["attr-participants-000012"],options:(0,a.constantOption)("partType")},{attrcode:"actorType",placeholder:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"select",showClear:!1,disabled:!1,label:i.multiLang["attr-participants-000016"],options:(0,a.constantOption)("actorType")},{attrcode:"activityType",placeholder:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"refer",isMultiSelectedEnabled:!1,disabled:!0,label:i.multiLang["attr-participants-000017"],refcode:"uap/refer/riart/userRefer/index"},{attrcode:"limitMode",placeholder:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"select",label:i.multiLang["attr-participants-000007"],options:(0,a.constantOption)("limitMode")},{attrcode:"orgUnitTree",placeholder:"",leftspace:0,rightspace:0,required:!1,visible:!1,isMultiSelectedEnabled:!0,itemtype:"refer",isTreelazyLoad:!1,label:i.multiLang["attr-participants-000008"],refcode:"uap/refer/riart/orgUnitPropertyTreeRef/index"},{attrcode:"showBillOrg",placeholder:"",leftspace:0,rightspace:0,required:!1,visible:!1,isMultiSelectedEnabled:!1,itemtype:"refer",label:i.multiLang["attr-participants-000009"],refcode:"uap/refer/riart/MDTreebyBilltype/index",queryCondition:function(){return{pid:"root",src_billtype:null}}},{attrcode:"orgSystem",placeholder:"",leftspace:0,rightspace:0,required:!1,visible:!1,itemtype:"refer",isMultiSelectedEnabled:!1,isTreelazyLoad:!1,label:i.multiLang["attr-participants-000010"],refcode:"uap/refer/riart/orgTypeAndMemberRef/index"},{attrcode:"generalRule",placeholder:"",leftspace:0,rightspace:0,required:!1,visible:!1,itemtype:"refer",isMultiSelectedEnabled:!1,disabled:!1,label:i.multiLang["attr-participants-000011"],refcode:"uap/refer/riart/generalRuleRef/index"},{attrcode:"ruleDefine",placeholder:"",leftspace:0,rightspace:0,required:!1,disabled:!0,visible:!1,itemtype:"input",label:""}],status:"edit"},generalRule:{moduletype:"form",items:[{attrcode:"generalRule",placeholder:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"refer",isMultiSelectedEnabled:!1,disabled:!1,label:i.multiLang["attr-participants-000013"],refcode:"uap/refer/riart/generalRuleRef/index"}],status:"edit"},ruleDefine:{moduletype:"form",items:[{attrcode:"ruleDefine",placeholder:"",leftspace:0,rightspace:0,required:!1,disabled:!0,visible:!0,itemtype:"textarea"}],status:"edit"}})};var a=n(38),i=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.beforeEvent=t.afterEvent=void 0;var a=r(n(267)),i=r(n(268));function r(e){return e&&e.__esModule?e:{default:e}}t.afterEvent=a.default,t.beforeEvent=i.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,l,s){if("auto"===e.type)return;var u=null;l&&l.value&&l.value.key?u=l.value.key:l&&(u=l.value);var c={};switch(n){case"generalRule":e.form.setFormItemsValue(t,{actorType:{value:0,display:null},activityType:{value:0,display:null},limitMode:{value:0,display:null},ruleDefine:{display:null,value:""}}),c={organizeUnitType:"COMMONRULE"},this.setState({formulavalue:""}),e.form.setItemsVisible("actor",{orgUnitTree:!1,showBillOrg:!1,orgSystem:!1}),e.form.setFormItemsValue("actor",o({orgUnitTree:{value:null,display:null},showBillOrg:{display:null,value:null}},"showBillOrg",{display:null,value:null}));break;case"actorType":e.form.setFormItemsValue(t,{activityType:{value:null,display:null},limitMode:{value:0,display:null},generalRule:{display:null,value:0},ruleDefine:{display:null,value:""}});var p=l.value;p&&(c={organizeUnitType:p}),this.setState({formulavalue:""}),e.form.setItemsVisible("actor",{orgUnitTree:!1,showBillOrg:!1,orgSystem:!1}),e.form.setFormItemsValue("actor",o({orgUnitTree:{value:null,display:null},showBillOrg:{display:null,value:null}},"showBillOrg",{display:null,value:null}));break;case"limitMode":if("[U]SuperiorOrg"===u)e.form.setItemsVisible("actor",{orgUnitTree:!1,showBillOrg:!1,orgSystem:!0});else if("[U]SPECIFYOrg"===u)e.form.setItemsVisible("actor",{orgUnitTree:!0,showBillOrg:!1,orgSystem:!1});else if("[U]BillOrg"===u){var d=e.meta.getMeta(),f=i.flowContext.get().billType;d[t].items.map((function(e){"showBillOrg"===e.attrcode&&(e.queryCondition={pid:"root",src_billtype:f})})),e.form.setItemsVisible("actor",{orgUnitTree:!1,showBillOrg:!0,orgSystem:!1})}else e.form.setItemsVisible("actor",{orgUnitTree:!1,showBillOrg:!1,orgSystem:!1});e.form.setFormItemsValue("actor",{orgUnitTree:{value:null,display:null},showBillOrg:{display:null,value:null},orgSystem:{display:null,value:null}})}c.organizeUnitType&&(0,a.initStructure)(c,e);switch(n){case"actorType":e.updateAttr({organizeUnitType:u,organizeUnitPK:"",organizeUnitBelongOrg:"",organizeUnitCode:"",participantFilterMode:"",participantType:"HUMAN",orgUnitTree:null,showBillOrg:null,showBillOrgDisplay:null,orgSystem:null,orgSystemDisplay:null}),console.log("participant select value: ",u),e.setParticipantType(u);break;case"activityType":var m="";"OPERATOR"===e.value.organizeUnitType?m="":"ROLE"===e.value.organizeUnitType?l.values&&l.values.pk_org&&l.values.pk_org.value&&(m=l.values.pk_org.value):"USERGROUP"===e.value.organizeUnitType?l.values&&l.values.pk_org&&l.values.pk_org.value&&(m=l.values.pk_org.value):"ROLEGROUP"===e.value.organizeUnitType?l.values&&l.values.pk_org&&l.values.pk_org.value&&(m=l.values.pk_org.value):"POST"===e.value.organizeUnitType?m="":"RESPONSIBILITY"===e.value.organizeUnitType?l.values&&l.values.pk_org&&l.values.pk_org.value&&(m=l.values.pk_org.value):"VIRTUAL_ROLE"===e.value.organizeUnitType?m=i.flowContext.get().pk_org:"WFUSERGROUP"===e.value.organizeUnitType?m="":"BusiReport"===e.value.organizeUnitType?l.values&&l.values.pk_org&&l.values.pk_org.value&&(m=l.values.pk_org.value):"CUSTOMRULE"===e.value.organizeUnitType||e.value.organizeUnitType,u&&null!=u?(e.value.participantId?e.updateAttr({organizeUnitPK:u,organizeUnitBelongOrg:m,organizeUnitCode:l.refcode,participantFilterMode:null,participantName:l.refname,participantType:"HUMAN",orgUnitTree:null,showBillOrg:null,showBillOrgDisplay:null,orgSystem:null,orgSystemDisplay:null}):e.updateAttr({organizeUnitPK:u,organizeUnitBelongOrg:m,organizeUnitCode:l.refcode,participantFilterMode:null,participantName:l.refname,participantType:"HUMAN",participantId:(0,r.uuid)(),orgUnitTree:null,showBillOrg:null,showBillOrgDisplay:null,orgSystem:null,orgSystemDisplay:null}),(0,a.setPartipantName)(e,l.refname)):(e.updateAttr({organizeUnitPK:u,organizeUnitBelongOrg:m,organizeUnitCode:l.refcode,participantFilterMode:null,participantName:l.refname,participantType:"HUMAN",participantId:null,orgUnitTree:null,showBillOrg:null,showBillOrgDisplay:null,orgSystem:null,orgSystemDisplay:null}),e.setName(""));break;case"limitMode":u&&"NULL"===u?e.updateAttr({participantFilterMode:null,participantType:"HUMAN",orgUnitTree:null,showBillOrg:null,showBillOrgDisplay:null,orgSystem:null,orgSystemDisplay:null}):e.updateAttr({participantFilterMode:u,participantType:"HUMAN",orgUnitTree:null,showBillOrg:null,showBillOrgDisplay:null,orgSystem:null,orgSystemDisplay:null});break;case"generalRule":u&&null!=u?(e.value.participantId?e.updateAttr({organizeUnitType:"COMMONRULE",organizeUnitPK:u,organizeUnitBelongOrg:null,organizeUnitCode:l.refcode,participantFilterMode:null,participantName:l.refname,participantType:"HUMAN",orgUnitTree:null,showBillOrg:null,showBillOrgDisplay:null,orgSystem:null,orgSystemDisplay:null}):e.updateAttr({organizeUnitType:"COMMONRULE",organizeUnitPK:u,organizeUnitBelongOrg:null,organizeUnitCode:l.refcode,participantFilterMode:null,participantId:(0,r.uuid)(),participantName:l.refname,participantType:"HUMAN",orgUnitTree:null,showBillOrg:null,showBillOrgDisplay:null,orgSystem:null,orgSystemDisplay:null}),(0,a.setPartipantName)(e,l.refname),e.setParticipantType("COMMONRULE")):(e.updateAttr({organizeUnitType:"COMMONRULE",organizeUnitPK:u,organizeUnitBelongOrg:null,organizeUnitCode:l.refcode,participantFilterMode:null,participantId:null,participantName:l.refname,participantType:"HUMAN",orgUnitTree:null,showBillOrg:null,showBillOrgDisplay:null,orgSystem:null,orgSystemDisplay:null}),e.setName(""),e.setParticipantType("COMMONRULE"));break;case"orgUnitTree":e.updateAttr({orgUnitTree:u,orgUnitTreeDisplay:l.display,showBillOrg:null,showBillOrgDisplay:null,orgSystem:null,orgSystemDisplay:null});break;case"showBillOrg":e.updateAttr({orgUnitTree:null,showBillOrg:u,showBillOrgDisplay:l.display,orgSystem:null,orgSystemDisplay:null});break;case"orgSystem":e.updateAttr({orgUnitTree:null,showBillOrg:null,showBillOrgDisplay:null,orgSystem:u,orgSystemDisplay:l.display})}};n(1);var a=n(93),i=n(0),r=n(6);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,i,r){var o=e.meta.getMeta(),l=a.flowContext.get().billType;return o[t].items.map((function(e){"showBillOrg"===e.attrcode&&(e.queryCondition={pid:"root",src_billtype:l})})),e.meta.setMeta(o),!0};var a=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(n(2)),r=n(1),o=n(0);r.base.NCTree,r.base.NCTreeNode;var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(n.state={treeData:[{key:"0001",title:o.multiLang["attr-attrmodel-000081"],refname:o.multiLang["attr-attrmodel-000081"],refpk:"0001",id:"0001",name:o.multiLang["attr-attrmodel-000081"],pid:null,innercode:"0001",children:[]},{key:"0002",title:o.multiLang["attr-attrmodel-000082"],refname:o.multiLang["attr-attrmodel-000082"],refpk:"0002",id:"0002",name:o.multiLang["attr-attrmodel-000082"],pid:null,innercode:"0002",children:[{key:"000201",refname:o.multiLang["attr-attrmodel-000083"],refcode:"WF@billType",refpk:"000201",id:"000201",name:o.multiLang["attr-attrmodel-000083"],pid:null,innercode:"000201",children:[]},{key:"000202",refname:o.multiLang["attr-attrmodel-000084"],refcode:"WF@billId",refpk:"000202",id:"000202",name:o.multiLang["attr-attrmodel-000084"],pid:null,innercode:"000202",children:[]},{key:"000203",refname:o.multiLang["attr-attrmodel-000085"],refcode:"WF@billNo",refpk:"000203",id:"000203",name:o.multiLang["attr-attrmodel-000085"],pid:null,innercode:"000203",children:[]}]}]},e.linkname){for(var a=n.state.treeData,i=0;i<e.linkname.length;i++){var r=n.createChildNode(e.linkname[i],i);a[0].children.push(r)}n.setState({treeData:a})}return n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"createChildNode",value:function(e,t){return{key:"0001"+t,refname:e,refcode:e,refpk:"0001"+t,id:"0001"+t,name:e,pid:null,innercode:"0001"+t,children:[]}}},{key:"componentDidMount",value:function(){this.props.syncTree.setSyncTreeData("treeworkflow",this.state.treeData)}},{key:"onSelectEve",value:function(e,t,n){this.props.setExplain(t.refname)}},{key:"handleDoubleClick",value:function(e){var t=this.props.syncTree.getSyncTreeValue("treeworkflow",e);t&&t.refcode&&this.props.setName(t.refcode)}},{key:"render",value:function(){var e=this.props,t=(e.table,e.button,e.search,e.syncTree),n=(e.modal,t.createSyncTree);return i.default.createElement("div",null,n({treeId:"treeworkflow",needSearch:!1,needEdit:!1,onDoubleClickEve:this.handleDoubleClick.bind(this),onSelectEve:this.onSelectEve.bind(this),selectedForInit:!1,searchType:"filtration"}))}}]),t}(i.default.Component);l=(0,r.createPage)({})(l),t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=o(n(2)),r=(o(n(8)),n(1));function o(e){return e&&e.__esModule?e:{default:e}}n(271);var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={treeData:[]},n.src_billtype=e.src_billtype,n.state={json:{},inlt:null},n.getTreeData(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"afterEvent",value:function(e,t,n,a,i){}},{key:"componentDidMount",value:function(){}},{key:"getTreeData",value:function(){var e=this,t={pid:"root",queryCondition:{src_billtype:this.src_billtype}};(0,r.ajax)({method:"post",data:t,url:"/nccloud/riart/ref/mdtreeRefByBilltype.do",success:function(t){e.props.asyncTree.setTreeData("mdmappingformula",t.data.rows),e.setState({treeData:t.data.rows})}})}},{key:"loadTreeData",value:function(e,t,n){var a=this,i={pid:e,queryCondition:{src_billtype:this.src_billtype}};(0,r.ajax)({method:"post",data:i,url:"/nccloud/riart/ref/mdtreeRefByBilltype.do",success:function(e){var t=e.success,n=e.data;t&&(a.props.asyncTree.addTreeData("mdmappingformula",n.rows),a.setState({treeData:n.rows}))}})}},{key:"onSelectEve",value:function(e,t,n){this.props.setExplain(t.refname)}},{key:"handleDoubleClick",value:function(e,t,n){if(t&&t.event&&"dblclick"===t.event){var a=this.props.asyncTree.getAsyncTreeValue("mdmappingformula",e);a&&a.refcode&&this.props.setName(a.refcode)}}},{key:"render",value:function(){var e=this.props.asyncTree.createAsyncTree;return i.default.createElement("div",{className:"mdmappingformulacss"},e({treeId:"mdmappingformula",doubleClickEve:this.handleDoubleClick.bind(this),editType:!1,onSelectEve:this.onSelectEve.bind(this),selectedForInit:this.onSelectEve.bind(this),loadTreeData:this.loadTreeData.bind(this)}))}}]),t}(i.default.Component);l=(0,r.createPage)({})(l),t.default=l},function(e,t,n){var a=n(272);"string"==typeof a&&(a=[[e.i,a,""]]);var i={transform:void 0};n(4)(a,i);a.locals&&(e.exports=a.locals)},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,".mdmappingformulacss {\n  height: 250px;\n  overflow: auto;\n}\n",""])},function(e,t,n){var a=n(274);"string"==typeof a&&(a=[[e.i,a,""]]);var i={transform:void 0};n(4)(a,i);a.locals&&(e.exports=a.locals)},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,".lightapp-component-form {\n  padding: 0 !important;\n}\n.radio-label {\n  margin: 10px 0 10px 5px;\n}\n",""])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=f(n(2)),r=n(1),o=n(276),l=n(278),s=n(0),u=f(n(92)),c=f(n(280)),p=f(n(286)),d=(f(n(94)),f(n(85)));function f(e){return e&&e.__esModule?e:{default:e}}n(293);r.base.NCFormControl,r.base.NCRadio;var m=r.base.NCButton,g=(r.base.NCCheckbox,r.base.NCSelect.NCOption,"advanced"),y=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.noticeCall=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1]},n.handleClick=function(e){switch(e){case"taskNotice":(0,u.default)({newProps:n.props,position:"advanced",queryParams:{data:{},url:""},call:n.noticeCall});break;case"flowInstance":(0,c.default)({newProps:n.props,queryParams:{data:{},url:""},call:n.noticeCall});break;case"monitorPerson":(0,p.default)({newProps:n.props,queryParams:{data:{},url:""},call:n.noticeCall});break;case"relatedData":(0,d.default)({newProps:n.props,queryParams:{data:{},url:""},call:n.noticeCall})}};var a=s.urlConst.get("flowType");return n.state={flowType:a,taskNoticeDisplay:null,workflowStateChangeInfo:[],workflowStateDispaly:null,supervisorDis:null,relatedDataDisplay:null,supervisorDisShow:!0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){this.setStruct(this.props),this.showValue(this.props,this.props.value),this.showworkflowStateChange(this.props.value.workflowStateChangeInfo),this.showSupervisorDis(this.props.value.supervisor,this.props.value.supervisorDis),this.showRelatedData(this.props,this.props.value.applicationArgs),this.showTaskNoticeDisplay(this.props.value.workitemMsg)}},{key:"showSupervisorDis",value:function(e,t){if(t)t.length>10&&(t=t.substr(0,10)+"..."),this.setState({supervisorDis:t});else if(e){var n="";if(e&&e.length>0)for(var a=0;a<e.length;a++)"2"===e[a].m_type?n=n+"[U]"+e[a].m_name:"1"===e[a].m_type?n=n+"[R]"+e[a].m_name:"4"===e[a].m_type&&(n=n+"[C]"+e[a].m_name);n.length>20&&(n=n.substr(0,20)+"..."),this.setState({supervisorDis:n})}else this.setState({supervisorDis:null})}},{key:"showworkflowStateChange",value:function(e){if(e){var t="";if(e.length>0){for(var n=0;n<e.length;n++)switch(parseInt(e[n])){case 0:t+=s.multiLang["attr-advanced-000000"];break;case 10:t+=s.multiLang["attr-advanced-000001"];break;case 2:t+=s.multiLang["attr-advanced-000002"];break;case 3:t+=s.multiLang["attr-advanced-000003"]}this.setState({workflowStateDispaly:t})}else this.setState({workflowStateDispaly:null})}else this.setState({workflowStateDispaly:null})}},{key:"showTaskNoticeDisplay",value:function(e){if(e)if(e&&e.length>0){for(var t=0;t<e.length;t++)if("0"===e[t].type){if(e[t].msgTempCode&&""!=e[t].msgTempCode)return void this.setState({taskNoticeDisplay:s.multiLang["attr-advanced-000004"]});if(e[t].pushable)return void this.setState({taskNoticeDisplay:s.multiLang["attr-advanced-000004"]})}else if("210"===e[t].type||"220"===e[t].type||"230"===e[t].type||"240"===e[t].type){if(e[t].msgTempCode&&""!=e[t].msgTempCode)return void this.setState({taskNoticeDisplay:s.multiLang["attr-advanced-000004"]})}else if(("110"===e[t].type||"120"===e[t].type||"130"===e[t].type||"140"===e[t].type)&&e[t].msgTempCode&&""!=e[t].msgTempCode)return void this.setState({taskNoticeDisplay:s.multiLang["attr-advanced-000004"]})}else this.setState({taskNoticeDisplay:null});else this.setState({taskNoticeDisplay:null});this.setState({taskNoticeDisplay:null})}},{key:"showRelatedData",value:function(e,t){if(t)if(t.length>0){for(var n="",a=0;a<t.length;a++)a===t.length-1?n+=t[a].multiLangName.text:n=n+t[a].multiLangName.text+",";n.length>12&&(n=n.substr(0,12)+"..."),this.setState({relatedDataDisplay:n})}else this.setState({relatedDataDisplay:null});else this.setState({relatedDataDisplay:null})}},{key:"componentWillReceiveProps",value:function(e){this.setStruct(e),this.showValue(e,e.value),this.showworkflowStateChange(e.value.workflowStateChangeInfo),this.showSupervisorDis(e.value.supervisor,e.value.supervisorDis),this.showTaskNoticeDisplay(e.value.workitemMsg)}},{key:"getWorkflowStateChangeInfo",value:function(e){e&&this.setState({workflowStateChangeInfo:e})}},{key:"setStruct",value:function(e){var t=this.state.flowType;e.value&&e.value.workflowType&&("2"===e.value.workflowType?t="approve":"3"===e.value.workflowType?t="approve_sub":"4"===e.value.workflowType?t="workflow":"5"===e.value.workflowType&&(t="workflow_sub"));var n=e.meta.getMeta();switch(t){case"approve":e.emendFlow&&"none"!=e.emendFlow?(n.advanced.items.map((function(t,n){switch(t.attrcode){case"emendFlow":t.options=e.emendFlow}})),e.form.setItemsVisible(g,{submitTORejecter:!1,emendFlow:!0})):e.form.setItemsVisible(g,{submitTORejecter:!1,emendFlow:!1}),this.setState({supervisorDisShow:!0});break;case"approve_sub":e.form.setItemsVisible(g,{submitTORejecter:!1,emendFlow:!1}),this.setState({supervisorDisShow:!1});break;case"workflow":e.emendFlow&&"none"!=e.emendFlow?(e.form.setItemsVisible(g,{submitTORejecter:!1,emendFlow:!0,hideNoPassing:!1}),n.advanced.items.map((function(t,n){switch(t.attrcode){case"emendFlow":t.options=e.emendFlow}}))):e.form.setItemsVisible(g,{submitTORejecter:!1,emendFlow:!1,hideNoPassing:!1}),this.setState({supervisorDisShow:!0});break;case"workflow_sub":e.form.setItemsVisible(g,{submitTORejecter:!1,emendFlow:!1,hideNoPassing:!1}),this.setState({supervisorDisShow:!1})}}},{key:"showValue",value:function(e,t){var n=this.getShowData(e,t);e.form.setFormItemsValue(g,n)}},{key:"getShowData",value:function(e,t){var n={};if(t&&"{}"!==JSON.stringify(t))n={submitTORejecter:{value:t.submitTORejecter,display:s.multiLang["attr-advanced-000005"]},timeLimit:{value:this.getNumber(t.timeLimit)},timeRemind:{value:this.getNumber(t.timeRemind)},hideNoPassing:{value:this.transferBoolean(t.hideNoPassing)},priority:{value:this.getNumber(t.priority)},emendFlow:{value:this.getEmenedFlow(t.emendFlow)}};else switch(n={submitTORejecter:{value:"Y",display:s.multiLang["attr-advanced-000005"]},timeLimit:{value:0},timeRemind:{value:0},hideNoPassing:{value:!0},priority:{value:0},emendFlow:{value:"-1",display:s.multiLang["attr-advanced-000038"]}},this.state.flowType){case"approve":case"approve_sub":e.updateAttr({submitTORejecter:"Y",workflowType:"3"});break;case"workflow":case"workflow_sub":e.updateAttr({submitTORejecter:"Y",workflowType:"5"})}return n}},{key:"getEmenedFlow",value:function(e){return e||"-1"}},{key:"getNumber",value:function(e){return e||0}},{key:"transferBoolean",value:function(e){return!0===e||!1!==e&&(!(!e||"true"!==e)||(!e||"false"!==e))}},{key:"render",value:function(){var e=this,t=this.props,n=t.form,a=t.modal,r=n.createForm,o=a.createModal;return i.default.createElement("div",{className:"partBox"},o("taskNotice"),o("flowInstance"),o("monitorPerson"),o("relatedData"),i.default.createElement("span",{className:"attrContentTitle"},s.multiLang["attr-advanced-000006"]),i.default.createElement("div",{className:"generalInput"},i.default.createElement("p",null,i.default.createElement("span",null,s.multiLang["attr-advanced-000007"]),i.default.createElement(m,{className:"partBtn",fieldid:"relatedData_btn",onClick:function(){e.handleClick("relatedData")}},"···"),i.default.createElement("span",null,this.state.relatedDataDisplay)),i.default.createElement("p",null,i.default.createElement("span",null,s.multiLang["attr-advanced-000008"]),i.default.createElement(m,{className:"partBtn",fieldid:"taskNotice_btn",onClick:function(){e.handleClick("taskNotice")}},"···"),i.default.createElement("span",null,this.state.taskNoticeDisplay)),i.default.createElement("p",null,i.default.createElement("span",null,s.multiLang["attr-advanced-000009"]),i.default.createElement(m,{className:"partBtn",fieldid:"flowInstance_btn",onClick:function(){e.handleClick("flowInstance")}},"···"),i.default.createElement("span",null,this.state.workflowStateDispaly)),this.state.supervisorDisShow?i.default.createElement("p",null,i.default.createElement("span",null,s.multiLang["attr-advanced-000010"]),i.default.createElement(m,{className:"partBtn",fieldid:"monitorPerson_btn",onClick:function(){e.handleClick("monitorPerson")}},"···"),i.default.createElement("span",null,this.state.supervisorDis)):""),i.default.createElement("p",null,r(g,{setVisibleByForm:!0,onAfterEvent:l.afterEvent.bind(this)})))}}]),t}(i.default.Component);t.default=y=(0,r.createPage)({initTemplate:o.initTemplate})(y)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initTemplate=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(277));t.initTemplate=a.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){!function(e,t){e.meta.setMeta(t)}(e,{advanced:{moduletype:"form",items:[{label:a.multiLang["attr-advanced-000030"],attrcode:"submitTORejecter",placeholder:"",leftspace:0,rightspace:0,required:!1,disabled:!1,visible:!1,itemtype:"select",showClear:!1,options:[{display:a.multiLang["attr-advanced-000031"],value:"Y"}]},{label:a.multiLang["attr-advanced-000032"],attrcode:"timeLimit",placeholder:"",leftspace:0,rightspace:0,required:!1,visible:!0,disabled:!1,itemtype:"number"},{label:a.multiLang["attr-advanced-000033"],attrcode:"timeRemind",placeholder:"",leftspace:0,rightspace:0,required:!1,visible:!0,disabled:!1,itemtype:"number"},{label:a.multiLang["attr-advanced-000034"],attrcode:"hideNoPassing",placeholder:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"checkbox_switch"},{label:a.multiLang["attr-advanced-000035"],attrcode:"priority",placeholder:"",leftspace:0,rightspace:0,required:!1,visible:!0,disabled:!1,itemtype:"number"},{label:a.multiLang["attr-advanced-000037"],attrcode:"emendFlow",placeholder:"",leftspace:0,rightspace:0,required:!1,visible:!1,disabled:!1,showClear:!1,itemtype:"select",options:[{display:a.multiLang["attr-advanced-000038"],value:"-1"}]}],status:"edit"}})};var a=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.beforeEvent=t.afterEvent=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(279));t.afterEvent=a.default,t.beforeEvent=a.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,a,i){var o=null;a&&a.value&&a.value.key?o=a.value.key:a&&(o=a.value);"hideNoPassing"===n&&a&&(o=a.value);r(e,t,n,o,i)};var a=n(1),i=n(0);var r=function(e,t,n,r,o){switch(n){case"submitTORejecter":e.updateAttr({submitTORejecter:r});break;case"timeLimit":if(r&&""!==r){if(isNaN(r))return e.updateAttr({timeRemind:0}),e.form.setFormItemsValue(t,{timeLimit:{value:0}}),void(0,a.toast)({content:i.multiLang["attr-advanced-000036"],color:"danger"});if(Number(r)<0)return e.updateAttr({timeRemind:0}),e.form.setFormItemsValue(t,{timeLimit:{value:0}}),void(0,a.toast)({content:i.multiLang["attr-advanced-000039"],color:"danger"});e.updateAttr({timeLimit:r});var l=e.form.getFormItemsValue(t,"timeRemind");l&&l.value?parseInt(l.value)>=parseInt(r)?parseInt(l.value)==parseInt(r)&&0==parseInt(r)?e.updateAttr({timeLimit:r}):(e.form.setFormItemsValue(t,{timeLimit:{value:o,display:o}}),e.updateAttr({timeLimit:o}),(0,a.toast)({content:i.multiLang["attr-advanced-000029"],color:"danger"})):e.updateAttr({timeLimit:r}):(e.updateAttr({timeRemind:0}),e.form.setFormItemsValue(t,{timeRemind:{value:0}}))}else e.updateAttr({timeRemind:0}),e.form.setFormItemsValue(t,{timeLimit:{value:0}});break;case"timeRemind":if(r&&""!==r){if(isNaN(r))return e.updateAttr({timeRemind:0}),e.form.setFormItemsValue(t,{timeRemind:{value:0}}),void(0,a.toast)({content:i.multiLang["attr-advanced-000036"],color:"danger"});if(Number(r)<0)return e.updateAttr({timeRemind:0}),e.form.setFormItemsValue(t,{timeRemind:{value:0}}),void(0,a.toast)({content:i.multiLang["attr-advanced-000039"],color:"danger"});var s=e.form.getFormItemsValue(t,"timeLimit");s&&s.value?parseInt(s.value)<=parseInt(r)?(e.form.setFormItemsValue(t,{timeRemind:{value:0}}),e.updateAttr({timeRemind:0}),(0,a.toast)({content:i.multiLang["attr-advanced-000029"],color:"danger"})):e.updateAttr({timeRemind:r}):e.form.setFormItemsValue(t,{timeRemind:{value:0}})}else e.updateAttr({timeRemind:0}),e.form.setFormItemsValue(t,{timeRemind:{value:0}});break;case"hideNoPassing":e.updateAttr({hideNoPassing:r});break;case"emendFlow":e.updateAttr({emendFlow:r});break;case"priority":if(r&&""!==r){if(isNaN(r))return e.updateAttr({priority:0}),e.form.setFormItemsValue(t,{priority:{value:0}}),void(0,a.toast)({content:i.multiLang["attr-advanced-000036"],color:"danger"});e.updateAttr({priority:r})}else e.updateAttr({priority:0}),e.form.setFormItemsValue(t,{priority:{value:0}})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.newProps;e.queryParams,e.call;t.modal.show("flowInstance",{title:i.multiLang["attr-advanced-000009"],size:"lg",noFooter:!0,content:React.createElement(a.default,{preprops:t})})};var a=function(e){return e&&e.__esModule?e:{default:e}}(n(94)),i=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.beforeEvent=t.afterEvent=t.buttonClick=t.initTemplate=void 0;var a=l(n(282)),i=l(n(283)),r=l(n(284)),o=l(n(285));function l(e){return e&&e.__esModule?e:{default:e}}t.initTemplate=a.default,t.buttonClick=i.default,t.afterEvent=r.default,t.beforeEvent=o.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={workflowStateChangeInfo:{moduletype:"form",status:"edit",items:[{attrcode:"start",visible:!0,itemtype:"checkbox_switch",label:a.multiLang["attr-advanced-000011"]},{attrcode:"recovery",visible:!0,itemtype:"checkbox_switch",label:a.multiLang["attr-advanced-000012"]},{attrcode:"hangUp",visible:!0,itemtype:"checkbox_switch",label:a.multiLang["attr-advanced-000013"]},{attrcode:"finish",visible:!0,itemtype:"checkbox_switch",label:a.multiLang["attr-advanced-000014"]}]}},n={msgButtons:[{id:"0001A41000000006J5B1",btncolor:"button_main",type:"general_btn",key:"ensure",title:a.multiLang["attr-advanced-000015"],keyboard:"alt+y",area:"page_footer",children:[]},{id:"0001A41000000006J5B1",btncolor:"button_secondary",type:"general_btn",key:"cancel",title:a.multiLang["attr-advanced-000016"],keyboard:"alt+n",area:"page_footer",children:[]}]};!function(e,t){e.meta.setMeta(t)}(e,t),e.button.setButtons(n.msgButtons)};var a=n(0)},function(e,t,n){"use strict";function a(e){e.props.preprops.modal.close("flowInstance");var t=ReactDOM.findDOMNode(e);t&&ReactDOM.unmountComponentAtNode(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){switch(t){case"ensure":var i=[],r=this.props.form.getAllFormValue("workflowStateChangeInfo");r&&r.rows.length>0&&(r.rows[0].values.start.value&&i.push(0),r.rows[0].values.recovery.value&&i.push(10),r.rows[0].values.hangUp.value&&i.push(2),r.rows[0].values.finish.value&&i.push(3)),e.preprops.updateAttr({workflowStateChangeInfo:i}),a(this);break;case"cancel":a(this)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,a,i){}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,a,i,r){return!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.newProps;e.queryParams,e.call;t.modal.show("monitorPerson",{title:i.multiLang["attr-advanced-000010"],size:"lg",noFooter:!0,content:React.createElement(a.default,{preprops:t})})};var a=function(e){return e&&e.__esModule?e:{default:e}}(n(287)),i=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(2),r=function(e){return e&&e.__esModule?e:{default:e}}(i),o=n(1),l=n(288),s=n(0);n(28);var u=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"initData",value:function(e){var t=[];if(e&&e.length>0)for(var n=0;n<e.length;n++){var a={values:{m_type:{value:e[n].m_type},m_code:{value:e[n].m_code},m_name:{value:e[n].m_name},m_pk:{value:e[n].m_pk,display:e[n].m_code}}};"2"===e[n].m_type?a.values.m_type={value:e[n].m_type,display:s.multiLang["attr-advanced-000028"]}:"2"===e[n].m_type?a.values.m_type={value:e[n].m_type,display:s.multiLang["attr-advanced-000020"]}:"4"===e[n].m_type?a.values.m_type={value:e[n].m_type,display:s.multiLang["attr-advanced-000021"]}:a.values.m_type={value:e[n].m_type,display:"Error"},t.push(a)}this.props.editTable.setTableData("monitorPerson",{rows:t})}},{key:"componentDidMount",value:function(){this.initData(this.props.preprops.value.supervisor)}},{key:"componentWillReceiveProps",value:function(e){}},{key:"render",value:function(){var e=this.props,t=(e.editTable,e.button),n=(e.modal,this.props.editTable.createEditTable),a=t.createButtonApp;return r.default.createElement("div",null,r.default.createElement("div",{className:"topButton"},a({area:"page_header",buttonLimit:6,onButtonClick:l.buttonClick.bind(this),popContainer:document.querySelector(".footerBtn")})),n("monitorPerson",{showIndex:!0,showCheck:!0,onAfterEvent:l.afterEvent.bind(this),onBeforeEvent:l.beforeEvent.bind(this)}),r.default.createElement("div",{className:"bottomButton"},a({area:"page_footer",buttonLimit:6,onButtonClick:l.buttonClick.bind(this),popContainer:document.querySelector(".footerBtn")})))}}]),t}(i.Component);t.default=u=(0,o.createPage)({initTemplate:l.initTemplate})(u)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.beforeEvent=t.afterEvent=t.buttonClick=t.initTemplate=void 0;var a=l(n(289)),i=l(n(290)),r=l(n(291)),o=l(n(292));function l(e){return e&&e.__esModule?e:{default:e}}t.initTemplate=a.default,t.buttonClick=i.default,t.afterEvent=r.default,t.beforeEvent=o.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={monitorPerson:{moduletype:"table",status:"edit",items:[{attrcode:"m_type",visible:!0,itemtype:"select",label:a.multiLang["attr-advanced-000018"],options:[{display:a.multiLang["attr-advanced-000019"],value:"2"},{display:a.multiLang["attr-advanced-000020"],value:"1"},{display:a.multiLang["attr-advanced-000021"],value:"4"}],initialvalue:{display:a.multiLang["attr-advanced-000019"],value:"2"}},{attrcode:"m_code",required:!1,visible:!1,itemtype:"refer",label:a.multiLang["attr-advanced-000022"],refcode:""},{attrcode:"m_pk",required:!1,visible:!0,itemtype:"refer",label:a.multiLang["attr-advanced-000023"],refcode:""},{attrcode:"m_name",visible:!0,itemtype:"input",label:a.multiLang["attr-advanced-000024"],disabled:!0},{attrcode:"m_corppk",visible:!0,itemtype:"input",label:a.multiLang["attr-advanced-000025"],disabled:!0}]}},n={msgButtons:[{id:"0001A41000000006J5B1",btncolor:"button_secondary",type:"general_btn",key:"addRow",title:a.multiLang["attr-advanced-000026"],area:"page_header",children:[]},{id:"0001A41000000006J5B1",btncolor:"button_secondary",type:"general_btn",key:"delRow",title:a.multiLang["attr-advanced-000027"],area:"page_header",children:[]},{id:"0001A41000000006J5B1",btncolor:"button_main",type:"general_btn",key:"ensure",title:a.multiLang["attr-advanced-000015"],keyboard:"alt+y",area:"page_footer",children:[]},{id:"0001A41000000006J5B1",btncolor:"button_secondary",type:"general_btn",key:"cancel",title:a.multiLang["attr-advanced-000016"],keyboard:"alt+n",area:"page_footer",children:[]}]};!function(e,t){e.meta.setMeta(t)}(e,t),e.button.setButtons(n.msgButtons)};var a=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){switch(t){case"addRow":this.props.editTable.addRow("monitorPerson");break;case"delRow":var o=this.props.editTable.getCheckedRows("monitorPerson"),l=[];if(o&&o.length>0){for(var s=0;s<o.length;s++)l.push(o[s].index);this.props.editTable.deleteTableRowsByIndex("monitorPerson",l,!0)}else(0,a.toast)({content:i.multiLang["attr-advanced-000017"],color:"warning"});break;case"ensure":var u=[],c=this.props.editTable.getAllRows("monitorPerson");if(!this.props.editTable.checkRequired("monitorPerson",c))return;c&&c.length>0&&c.map((function(e,t){var n={m_type:e.values.m_type.value,m_code:e.values.m_code.value,m_name:e.values.m_name.value,m_pk:e.values.m_pk.value,m_corppk:e.values.m_corppk.value};return u.push(n),u})),e.preprops.updateAttr({supervisor:u,supervisorDis:null}),r(this);break;case"cancel":r(this)}};var a=n(1),i=n(0);function r(e){e.props.preprops.modal.close("monitorPerson");var t=ReactDOM.findDOMNode(e);t&&ReactDOM.unmountComponentAtNode(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,i,r,o,l){var s=l.values.m_type;if("m_type"==n&&(e.editTable.deleteTableRowsByIndex(t,[o],!0),e.editTable.addRow(t,o,!1,{m_type:s})),n==a&&i&&i.length>0){for(var u=e.editTable.getNumberOfRows(t),c=0;c<i.length;c++)if(i[c]&&i[c].refpk&&i[c].refname){var p={m_type:s,m_code:null,m_name:{value:i[c].refname},m_pk:null,m_corppk:{value:i[c].values&&i[c].values.pk_org&&i[c].values.pk_org.value?i[c].values.pk_org.value:"",display:i[c].values&&i[c].values.pk_org&&i[c].values.pk_org.display?i[c].values.pk_org.display:""}};if(i[c].refcode?(p.m_code={value:i[c].refcode},p.m_pk={value:i[c].refpk,display:i[c].refcode}):(p.m_code=l.values.m_code.value,p.m_pk={value:i[c].refpk,display:l.values.m_code.value}),"1"===l.values.m_type.value||"2"===l.values.m_type.value){var d=null;i[c].values&&i[c].values.pk_org&&i[c].values.pk_org.value&&(d=i[c].values.pk_org.value);var f=null;i[c].values&&i[c].values.name&&i[c].values.name.value&&(f=i[c].values.name.value),p.m_corppk={value:d,display:f}}e.editTable.addRow(t,u<=0?c:u+c,!1,p)}e.editTable.deleteTableRowsByIndex(t,[o],!0);var m=[];!function(e,t,n){null!=n&&n.length>0&&n.map((function(n,a){null!=e&&(e.length<=0||!e.includes(n.values.m_pk.value))?e.push(n.values.m_pk.value):t.push(a)}))}([],m,e.editTable.getAllRows(t,!0)),e.editTable.deleteTableRowsByIndex(t,m),e.editTable.filterEmptyRows(t,["m_type"])}};var a="m_pk"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,o,l){var s=this;if(n.attrcode==a){var u=s.props.meta.getMeta();s.props.renderItem("table","monitorPerson",a,null);var c="/uap/refer/riart/userRefer/index",p={};switch(l.values[i].value){case"2":c="/uap/refer/riart/userRefer/index",p={isMutiGroup:!1,isAuthFilter:!1,isSelfVisible:!0,isShowSysAdmin:!1,isShowGroupAdmin:!0};break;case"1":c="/uap/refer/riart/roleRefer/index",p={isAuthFilter:!1};break;case"4":c="/uap/refer/riart/rcvCustomRef/index"}u[t].items.map((function(e){return u[t].items.find((function(e){return e.attrcode==a})).refcode=c,u[t].items.find((function(e){return e.attrcode==a})).itemtype="refer",u[t].items.find((function(e){return e.attrcode==a})).isMultiSelectedEnabled=!0,"4"==l.values[i].value?u[t].items.find((function(e){return e.attrcode==a})).queryCondition=function(){return{billtypecode:s.props.billtype}}:"2"==l.values[i].value?u[t].items.find((function(e){return e.attrcode==a})).queryCondition=p:"1"==l.values[i].value&&(u[t].items.find((function(e){return e.attrcode==a})).queryCondition=p),u})),s.props.meta.setMeta(u)}return!0};var a="m_pk",i="m_type"},function(e,t,n){var a=n(294);"string"==typeof a&&(a=[[e.i,a,""]]);var i={transform:void 0};n(4)(a,i);a.locals&&(e.exports=a.locals)},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,".lightapp-component-form {\n  padding: 0 !important;\n}\n",""])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(n(2)),r=n(1),o=n(0),l=n(296),s=n(298),u=n(6);n(301);r.base.NCFormControl,r.base.NCButton;var c=r.base.NCSelect,p=(r.base.NCSwitch,c.NCOption,function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=o.flowContext.get(),i=a.billType,r=a.metaclassid;return n.state={conditionXpression:null,currency:null,billtypecode:i,metaclassid:r,fromType:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentWillMount",value:function(){var e=(0,u.getLink)(this.props.entities,this.props.value.id),t=(0,u.getEntity)(this.props.entities,e.from);this.setState({fromType:t.type}),console.log("fromType",t.type),this.initRefer(t.type)}},{key:"componentDidMount",value:function(){var e=(0,u.getLink)(this.props.entities,this.props.value.id),t=(0,u.getEntity)(this.props.entities,e.from);this.setState({fromType:t.type}),console.log("fromType",t.type),this.showValue(this.props,this.props.value)}},{key:"initData",value:function(e,t,n){}},{key:"initRefer",value:function(e){var t=this,n=this.props.value.conditionXpression,a=this.props.value.approve_result;!e||"check"!==e&&"subflow"!==e||(this.props.value.conditionXpression&&null!==this.props.value.conditionXpression||(n={querytype:"tree",querycondition:{logic:"and",extraParaVO:{},conditions:[{display:o.multiLang["attr-condition-000000"],field:"approve_result",oprtype:"=",extraParaVO:{firstdisplay:o.multiLang["attr-condition-000001"],isleaf:!0,itemtype:"number",nodeTitleId:"62ffbdc0a67f1582398308683b000000",operationtype:"APPROVERESULT",options:"APPROVERESULT",pid:"root",pks:"0",refcode:"approve_result",refname:o.multiLang["attr-condition-000002"],refpk:"0",returntype:null,showcode:null,valuetype:"APPROVERESULT",isApproveResult:!0},value:{firstvalue:"0",secondvalue:""}}]}}),a&&null!=a||(a="0")),this.props.meta.getMeta().condition.items.map((function(e){"conditionjson"==e.attrcode&&(e.refcode="uap/refer/riart/transTypeManagerRefer/index",e.queryCondition=a?{billtypecode:t.state.billtypecode,metaclassid:t.state.metaclassid,funcType:0,formula:"workflow",approveResult:a}:{billtypecode:t.state.billtypecode,metaclassid:t.state.metaclassid,funcType:0,formula:"workflow"},e.treeJson=n||"")}))}},{key:"componentWillReceiveProps",value:function(e){this.showValue(e,e.value)}},{key:"getShowData",value:function(e,t){var n={};if(t&&"{}"!==JSON.stringify(t)){var a=this.transferConditionjson(e,t.conditionXpression),i=this.transferConditionjsonDisplay(e,t.conditionXpression);n={conditionType:{value:this.transferConditionType(e,t.conditionType)},conditionjson:{value:a,display:i}}}else n={conditionType:{value:"CONDITION"},conditionjson:{value:null}},e.updateAttr({conditionType:"CONDITION",conditionXpression:null});return n}},{key:"transferConditionType",value:function(e,t){return t||(e.updateAttr({conditionType:"CONDITION"}),"CONDITION")}},{key:"transferConditionjson",value:function(e,t){return t?JSON.stringify(t):(e.updateAttr({conditionXpression:null}),null)}},{key:"transferConditionjsonDisplay",value:function(e,t){if(t&&t.querycondition&&t.querycondition.conditions&&t.querycondition.conditions.length>0){if(1==t.querycondition.conditions.length){var n=t.querycondition.conditions[0];return n.value&&n.value.firstvalue&&"0"===n.value.firstvalue?null:o.multiLang["attr-condition-000003"]}return o.multiLang["attr-condition-000003"]}return null}},{key:"showValue",value:function(e,t){var n=this.getShowData(e,t);console.log("data condition",n),e.form.setFormItemsValue("condition",n)}},{key:"render",value:function(){var e=this.props,t=e.table,n=e.button,a=(e.search,e.form),r=e.editTable,l=(e.modal,t.createSimpleTable,n.createButton,r.createEditTable,a.createForm);return console.log("render111"),i.default.createElement("div",{className:"partBox"},i.default.createElement("span",{className:"attrContentTitle"},o.multiLang["attr-condition-000004"]),i.default.createElement("div",{className:"generalInput"},l("condition",{setVisibleByForm:!0,onAfterEvent:s.afterEvent.bind(this),onBeforeEvent:s.beforeEvent.bind(this)})))}}]),t}(i.default.PureComponent));t.default=p=(0,r.createPage)({initTemplate:l.initTemplate})(p)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initTemplate=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(297));t.initTemplate=a.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){!function(e,t){e.meta.setMeta(t)}(e,{condition:{moduletype:"form",items:[{label:a.multiLang["attr-condition-000005"],attrcode:"conditionType",required:!1,disabled:!1,visible:!0,itemtype:"select",options:[{display:a.multiLang["attr-condition-000000"],value:"NONE"},{display:a.multiLang["attr-condition-000006"],value:"CONDITION"},{display:a.multiLang["attr-condition-000007"],value:"OTHERWISE"},{display:a.multiLang["attr-condition-000008"],value:"EXCEPTION"},{display:a.multiLang["attr-condition-000009"],value:"DEFAULTEXCEPTION"}]},{label:a.multiLang["attr-condition-000010"],attrcode:"conditionjson",required:!1,itemtype:"refer",refcode:"uap/refer/riart/transTypeManagerRefer/index",visible:!0,disabled:!1}],status:"edit"}})};var a=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.beforeEvent=t.afterEvent=void 0;var a=r(n(299)),i=r(n(300));function r(e){return e&&e.__esModule?e:{default:e}}t.afterEvent=a.default,t.beforeEvent=i.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,i,r){var o=null;i&&i.value&&i.value.key?o=i.value.key:i&&(o=i.value);if("conditionType"===n)e.updateAttr({conditionType:o}),e.updateAttr({conditionXpression:null}),e.form.setFormItemsValue(t,{conditionjson:{value:null,display:null}});else if("conditionjson"===n){if(o&&o.querycondition&&o.querycondition.conditions&&o.querycondition.conditions.length>0)if(1==o.querycondition.conditions.length){var l=o.querycondition.conditions[0];l.value&&l.value.firstvalue&&"0"===l.value.firstvalue?e.form.setFormItemsValue(t,{conditionjson:{value:null,display:null}}):e.form.setFormItemsValue(t,{conditionjson:{value:o,display:a.multiLang["attr-condition-000003"]}})}else e.form.setFormItemsValue(t,{conditionjson:{value:o,display:a.multiLang["attr-condition-000003"]}});else e.form.setFormItemsValue(t,{conditionjson:{value:null,display:null}});e.updateAttr({conditionXpression:o})}};n(1);var a=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,i,r,o,l){var s=this;if("conditionjson"===n){var u=e.value.conditionXpression,c=e.value.approve_result;!this.state.fromType||"check"!==this.state.fromType&&"subflow"!==this.state.fromType||(e.value.conditionXpression&&null!==e.value.conditionXpression||(u={querytype:"tree",querycondition:{logic:"and",extraParaVO:{},conditions:[{display:a.multiLang["attr-condition-000000"],field:"approve_result",oprtype:"=",extraParaVO:{firstdisplay:a.multiLang["attr-condition-000001"],isleaf:!0,itemtype:"number",nodeTitleId:"62ffbdc0a67f1582398308683b000000",operationtype:"APPROVERESULT",options:"APPROVERESULT",pid:"root",pks:"0",refcode:"approve_result",refname:a.multiLang["attr-condition-000002"],refpk:"0",returntype:null,showcode:null,valuetype:"APPROVERESULT",isApproveResult:!0},value:{firstvalue:"0",secondvalue:""}}]}}),c&&null!=c||(c="0")),e.meta.getMeta().condition.items.map((function(e){"conditionjson"==e.attrcode&&(e.refcode="uap/refer/riart/transTypeManagerRefer/index",e.queryCondition=c?{billtypecode:s.state.billtypecode,metaclassid:s.state.metaclassid,funcType:0,formula:"workflow",approveResult:c}:{billtypecode:s.state.billtypecode,metaclassid:s.state.metaclassid,funcType:0,formula:"workflow"},e.treeJson=u||"")}))}return!0};var a=n(0)},function(e,t,n){var a=n(302);"string"==typeof a&&(a=[[e.i,a,""]]);var i={transform:void 0};n(4)(a,i);a.locals&&(e.exports=a.locals)},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,".nc-modal.u-modal.referformula.FormulaEditorWrap {\n  z-index: 370 !important;\n}\n.transtype-manager-refer .myCls {\n  max-height: 380px;\n  overflow: auto;\n}\n.transtype-manager-refer .u-tabs-simple {\n  overflow: hidden;\n}\n.transtype-manager-refer .leftspace {\n  display: none;\n}\n.transtype-manager-refer .form-item {\n  width: 20% !important;\n}\n.transtype-manager-refer .form-item .form-item-label {\n  display: none;\n}\n.transtype-manager-refer .form-item .form-item-control {\n  width: 100%;\n}\n.transtype-manager-refer .refer-popover .refer-bottom .buttons {\n  display: none;\n}\n.transtype-manager-refer .refer-popover .asynctree-area {\n  overflow: visible !important;\n}\n.transtype-manager-refer .fun-btn-group {\n  margin-top: 10px;\n}\n.transtype-manager-refer .syncTreeCom {\n  min-height: 390px;\n}\n.transtype-manager-refer .u-tree-node-content-wrapper {\n  width: 88%;\n}\n.transtype-manager-refer .del-btn {\n  line-height: 36px;\n}\n.transtype-manager-refer .synctree-area {\n  width: 100%;\n}\n.transtype-manager-refer .icon-jiantouyou:before,\n.transtype-manager-refer .icon-jiantouxia1:before {\n  display: none;\n  content: '';\n}\n.transtype-manager-refer .u-tabs-top .u-tabs-tab {\n  margin-left: 30px;\n}\n.transtype-manager-refer .u-tree.nc-tree li a {\n  margin-bottom: 5px;\n  height: auto;\n  line-height: normal;\n}\n.transtype-manager-refer .title-middle,\n.transtype-manager-refer .syncTreeCom .u-tree li {\n  line-height: 20px;\n}\n.transtype-manager-refer .add-icon {\n  color: #E14C46;\n}\n.rule-tree-btn-group {\n  position: absolute;\n  bottom: 9px;\n  right: 13px;\n  z-index: 15;\n}\n",""])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(n(2)),r=n(1),o=n(0);var l=r.base.NCFormControl,s=r.base.NCSwitch,u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.onChange=function(e){n.setState({priority:e}),n.props.updateAttr({priority:e})},n.onChangeByHand=function(e){n.setState({manualChoice:e}),n.props.updateAttr({manualChoice:e})};var a=o.urlConst.get("flowType");return n.state={priority:null,manualChoice:!1,flowType:a},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){this.showValue(this.props,this.props.value)}},{key:"componentWillReceiveProps",value:function(e){this.showValue(e,e.value)}},{key:"showValue",value:function(e,t){t&&"{}"!==JSON.stringify(t)?(this.setState({priority:t.priority,manualChoice:this.transferBoolean(t.manualChoice)}),this.props.updateAttr({priority:t.priority,manualChoice:this.transferBoolean(t.manualChoice)})):(this.setState({priority:"0",manualChoice:!1}),this.props.updateAttr({priority:"0",manualChoice:!1}))}},{key:"transferBoolean",value:function(e){return!!e&&(!0===e||!1!==e&&"true"===e)}},{key:"render",value:function(){return i.default.createElement("div",{className:"partBox"},i.default.createElement("span",{className:"attrContentTitle"},o.multiLang["attr-priority-000000"]),i.default.createElement("div",{className:"generalInput"},i.default.createElement("p",null,i.default.createElement("span",null,o.multiLang["attr-priority-000000"]),i.default.createElement(l,{text:"number",disabled:!1,visible:!0,fieldid:"priority",value:this.state.priority,onChange:this.onChange.bind(this)})),"workflow"===this.state.flowType||"workflow_sub"===this.state.flowType?i.default.createElement("p",null,i.default.createElement("span",null,o.multiLang["attr-priority-000001"]),i.default.createElement(s,{fieldid:"priority_switch",checked:this.state.manualChoice,onChange:this.onChangeByHand})):i.default.createElement("span",null)))}}]),t}(i.default.PureComponent);t.default=u},function(e,t,n){var a=n(305);"string"==typeof a&&(a=[[e.i,a,""]]);var i={transform:void 0};n(4)(a,i);a.locals&&(e.exports=a.locals)},function(e,t,n){var a=n(62);(e.exports=n(3)(!1)).push([e.i,"/*\n * @Author: yanxbm \n * @Date: 2018-12-19 14:17:57 \n * @Last Modified by: yanxbm\n * @Last Modified time: 2019-05-13 13:54:29\n */\n.attrWrapper {\n  background: #fff;\n  width: 19.886%;\n  height: 100%;\n  float: right;\n  margin-left: 4px;\n  position: relative;\n  border-radius: 3px;\n  -webkit-transition: width 150ms;\n  transition: width 150ms;\n}\n.attrWrapper.fold {\n  width: 0;\n  margin-left: 0;\n}\n.attrWrapper.fold .rightContentBox {\n  -webkit-transform: scaleX(0);\n          transform: scaleX(0);\n  -webkit-transform-origin: 100% 0%;\n          transform-origin: 100% 0%;\n  opacity: 0;\n}\n.attrWrapper.fold .rightFoldIcon {\n  background-image: url("+a(n(306))+");\n  left: -14px;\n}\n.attrWrapper .rightContentBox {\n  opacity: 1;\n  position: relative;\n  height: 100%;\n  z-index: 200;\n  -webkit-transform: scaleX(1);\n          transform: scaleX(1);\n  -webkit-transform-origin: 100% 0%;\n          transform-origin: 100% 0%;\n  -webkit-transition: opacity 100ms, -webkit-transform 100ms;\n  transition: opacity 100ms, -webkit-transform 100ms;\n  transition: transform 100ms, opacity 100ms;\n  transition: transform 100ms, opacity 100ms, -webkit-transform 100ms;\n}\n.attrWrapper .right-blank {\n  position: absolute;\n  z-index: 100;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: #fff;\n  border-radius: 3px;\n}\n.attrWrapper .rightFoldIcon {\n  cursor: pointer;\n  position: absolute;\n  top: 30%;\n  z-index: 90;\n  width: 14px;\n  height: 38px;\n  background-position: center center;\n  background-size: cover;\n  background-image: url("+a(n(307))+");\n  -webkit-transition: left 150ms;\n  transition: left 150ms;\n}\n.attrWrapper .rightFoldIcon.unfold {\n  left: -14px;\n}\n.attrWrapper .attrTitle,\n.attrWrapper .attrBox,\n.attrWrapper .attrContent {\n  position: relative;\n  z-index: 120;\n}\n.attrWrapper .attrTitle {\n  height: 35px;\n  text-align: center;\n  line-height: 35px;\n  border-bottom: 1px solid #ccc;\n  color: #666;\n  font-size: 13px;\n  border-top-left-radius: 3px;\n  border-top-right-radius: 3px;\n  background: #ECEFF5;\n}\n.attrWrapper .attrBox {\n  height: 100%;\n}\n.attrWrapper .attrTabBox {\n  text-align: left;\n  background: #fff;\n  margin: 0 auto;\n  border-bottom: 1px solid #D0D0D0;\n  text-align: center;\n}\n.attrWrapper .attrTabBox .flexTab {\n  display: -webkit-inline-box;\n  display: -ms-inline-flexbox;\n  display: inline-flex;\n  -webkit-box-pack: space-evenly;\n      -ms-flex-pack: space-evenly;\n          justify-content: space-evenly;\n}\n.attrWrapper .attrTabBox .flexTab .attrTab {\n  display: inline;\n  cursor: pointer;\n  padding: 4px 7px;\n  background-color: #fff;\n  text-align: center;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  outline: none;\n  font-size: 13px;\n  color: #555555;\n  height: 40px;\n  border: none;\n  border-bottom: 2px solid transparent;\n  margin: 0 3px;\n}\n.attrWrapper .attrTabBox .flexTab .attrTab:disabled {\n  pointer-events: none;\n  cursor: not-allowed;\n  color: #999;\n}\n.attrWrapper .attrTabBox .flexTab .attrTab.active {\n  background: #ffffff;\n  color: #D63A39;\n  border-bottom-color: #E14C46;\n}\n.attrWrapper .attrTabBox .flexTab .tool-gap {\n  position: relative;\n  height: 9px;\n  top: 15px;\n  margin: 0 30px;\n  border-right: 1px solid #eee;\n  display: inline-block;\n}\n.attrWrapper .attrContent {\n  padding-top: 15px;\n  padding-bottom: 4px;\n  height: calc(100% - 76px);\n  display: inline-block;\n  overflow: auto;\n  width: 100%;\n}\n.attrWrapper .attrContent .partBox.bpp .generalInput p .refer-wrapper {\n  width: initial;\n}\n.attrWrapper .attrContent .partBox.bpp .generalInput p .inputBox {\n  display: -webkit-inline-box;\n  display: -ms-inline-flexbox;\n  display: inline-flex;\n}\n.attrWrapper .attrContent::-webkit-scrollbar {\n  width: 5px;\n  height: 3px;\n}\n.attrWrapper .attrContent::-webkit-scrollbar-button {\n  display: none;\n}\n.attrWrapper .attrContent::-webkit-scrollbar-thumb {\n  background: #DCE3E8;\n  border-radius: 100px ;\n}\n",""])},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASQAAAMfCAYAAAB/26qrAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAFDBJREFUeNrs3cGLndXdwPEzQVBw4Qhi3WgfF9FNiyNaBBXyGAUpXWTURUoXzU0Xihsd/4LEvyDpXzBpF6UGNLEgIlQTQYWgYqTd2CyS6sZKIHERiCv7nJlzm2tqYpKZub/fzP18YN55ed++bd8z5cvvnPM895YCEOzsuQv98HN6m6UAgmO0f/h1bPjpbrIcQFCIFoZfy8PPwvh/ZkICoqaizyZjVJmQgGmGqGtTUf9j/3sTEjCtGC21qai/0j/GhASETkUmJCDNVGRCAjY6RP93g3YtTEjAesdof/mRGzQTEjDNENVt2YEbCZEgAesVovnh177hZ2mt/1yCBKwlRottKurW459PkIAbCVHXQrS4nv+8DrWB643R+Cp/cb3/uU1IwLWGqC9rPLQWJGCtIZpvIRpt9L+WLRtwtRjVCJ2eRoxMSMDVtmf1Kr+f5r+uIAEh2zNbNuBqMVqa5vbMhARcaXtWX4Ttov+9CBLMboi6co2fUyRIwEaFaN3ePRMkYC0xWmoxms/470+QYDZCtK4vwQoScCMh6kvA80SCBEyGqCsb8Da+IAHXE6LQBxsFCRiHqB5Yv1ySHlgLEsxGjPZv9hAJEmz+ENVtWT2w7rbK/0+CBEIkSIAQCRJsvhBtiocaBQm2doj6sokeahQkECJBAjYkRKOyen2/MKtrIEiQI0Rb+rBakECIBAkQIkGC3BHaEu+aCRIIkSABawpR17ZlI6shSBAVon74tUeIBAkiQ7TYtmW91RAkiIhQPRNaLG7MBAkCQ9S1LZmDakGCsBAttAiNrIYgQVSIaoDqQXVvNQQJIiI0fn6ohqizIoIEtmWCBLZlCBJMO0Jdm4RsywQJwkLUF09TCxIERmi+XHp2yDQkSGAaQpAwDSFIYBpCkDANIUgw1RDVt+x3mYYECaIi1BXPDQkSBG/JFounqAUJAkPUtwjVGPnMIUECWzIECVsyBAmmGqLxLZktGYJESIQWyqVzIVsyBImpR6ib2JItWBEEiWlHyLkQgkR4iEbl0rkQCBJTj5DDaQSJ0AiNPwhfhBAkwiLkhgxBQoQQJGYzQl0LkM8XQpAIjZBnhRAkRAgESYRAkBAhECQRAkFiKhFyRY8gkWISckWPIGE7BoI0myEaFW/SI0gERshLrAgSoRHy1dAIEuEh6svqudDIaiBIRE1DdTu2zzQEghQVoq5tyeo05GwIBClsWzY+pAYEKSREdRLyDRwgSOEhcj4EghQWoXomtNQmIiECQQoNUT0jclANgiREIEizG6P9QgSCFB2iUXFYDYIUHKL6/NABIQJBigxR3yai3mqAIEWFqGshGlkNEKTIGO0vDqxBkIJD5JwIBCnF9my5OCeCMNsswf+2Z5+JEZiQIkPUt+2Zb+8AQQoLUT2orrdnS/4jAIIUPRXVs6LOnx8EyVQEzG6Q2vebHTEVQW5b/pZt4gZNjMCEFBairk1FbtDAhBQao1GbisQITEhhIaoH1/W5opE/LQhSZIzqNLRsKgJbtugY1Rdij4kRCFJ0jOoWrR5e+5gQsGULC9F8C1HvzwgmpMgY1a2Zt/NBkMJjND4v6vz5QJAiYzQqzotgy9o0Z0hDjOqV/sifDAQpMkR1GqoxWvTnAkGKjpHni2BGpD1Dai/HihGYkMJjtNBi5PAaTEhiBMx4kMQIBEmMAEESIyBVkMQISBEkMQJSBEmMgBRBEiPgx8wFxKhG6LQYAaET0sS7aWIExAXJi7JApgnpgBgB4UFq3wwystxAaJDax84uWWrgp2zoLdvEt4MAxE1IEx+wBhAXpIkvcXS9D4RPSG7UgPggtUPskaUFrte6Hmo7xAZSTEgT50YA4Vu2+mWOnSUFQoPUzo18syywJms+Q2rPG9VzI1f8QPiEtCxGQHiQhulo//Crt4xA6JbNFT+QaUJatnxAeJCG6ah+nIhXQ4DYLZtbNSDThHRAjIDwIA3TUX340QOQQIoJ6YAlA8KD1J456iwZsFGu6VDbQTaQaULaJ0ZA+ITUpqPTlgrIMCF5IhuID9IwHfXFy7NAkglpnyUCwoNkOgIyTUimIyA+SKYjINOE9LKlAaZt7kemo6547ghIMiE5OwLiJ6T27bN1OvKaCBA+IY3ECMgSJIfZQHyQ2lV/Z0mADBPSHssBZAmSz8oG4oM0bNdGxWE2kGRC2mUpgGhzbUL63lIA4RNS+641gBRbNts1IE2QessAZAlSZxmALEECECQAQQIECUCQAEECECRAkAAECRAkAEECBAlAkABBAhAkQJAABAlAkABBAhAkQJAABAkQJABBAgQJQJAAQQIQJECQAAQJECQAQQIECUCQAAQJECQAQQIECUCQAEECECRAkAAECRAkAEECBAlAkABBAhAkAEECBAlAkABBAhAkQJAABAkQJABBAgQJQJAAQQIQJECQAAQJECQAQQIQJECQAAQJECQAQQIECUCQAEECECRAkAAECRAkAEECBAlAkABBsgSAIAEIEiBIAIIECBKAIAGCBCBIgCABCBIgSACCBAgSgCABggQgSACCBAgSgCABggQgSIAgAQgSIEgAggQIEoAgAYIEIEiAIAEIEiBIAIIEIEiAIAEIEiBIAIIECBKAIAGCBCBIgCABCBIgSACCBAgSgCABCBIgSACCBAgSgCABggQgSIAgAQgSIEgAggQIEoAgAYIEIEiAIAEIEoAgAYIEIEiAIAEIEiBIAIIECBKAIAGCBCBIsHbvvfuORRAkiPXddxfL0TdeK59+fMJiJHeTJWCrx+ivf/lz+eY/X1sMQYI433zz9UqMvrt40WIIEsT55z8+XzkzEiNBglCffnKivPd3B9iCBMHefuvNlekIQYIw9fD6yOuHy1dfnrEYggRxvv32fDn6xmE3aYIEsdykCRKkUM+K6pkRggShPvrg/fLh8IMgQSg3aYIE4bwGIkiQQj28fvutv4mRIEF8jNykCRKEc5MmSJBCfTnWZxgJEoSqh9f15Vg3aYIE4TFykyZIEK4eXh99/fDKu2kIEoT56st/lyNvvOYmTZAglps0BIkU3KQhSISrh9d1Kjr1ry8sBoJEbIzcpCFIhPMaCIJECqdOfbGyTRMjBIlQbtIQJFLwgWoIEuHcpCFIpOCriRAkUnCThiCRQj0rqk9fixGCRKhPPzmx8jlGIEiEcpOGIBGu3qQdef1w+erLMxYDQSKOryZCkEgTIzdpCBLhvAaCIJHCRx+8Xz4cfkCQCOUmDUEinA9UQ5BIwU0agkQKvpoIQSIFN2kIEin4aiIEiXD18Lq+HOsmDUEiPEZu0hAkwtWbtKOvH175lEcQJMK4SUOQSMFNGoJECl4DQZAI56uJECTSxMhNGoJEOB+ohiCRwqlTX6xs08QIQSKUmzQEiRTcpCFIhPPVRAgSKdTXP46+cdhNGoJELDdpCBIp1LOi+jlGYoQgEerTT06sfI4RCBKh3KQhSITzGghb0TZLsEm3aR+fECMEiRwefXxH+cUvH7AQCBI5/Po3u8rOp562EGwZzpA2uYcefqTcfPMtrvwxIZFD3br99ne/LzffcovFQJCId+edd61E6c6f3WUxECRECQSJH6jnSXv2Pu8GDkEij3oD99CvHrEQCBI57Hzy6ZUwgSCRQt26LT632w0cgkQO27ff77EABIk86g3cCy++5AYOQSKHegNXJ6W77+ksBoJEnih5LABBIg0v5iJIpFJfzPVYAIJEGnXrtucPz7uBQ5DIYfwO3G23zVsMBIkcUaqTkscCECRScAOHIJEuSvWgW5QQJNKoUXIDhyCRhhdzESRS8WIugkQqKzdwe93AIUgkUZ9R8nndCBJp+LxuBIl06u3bY4/vsBAIEjk8OgTJYwEIEmmsfmPuHjdwCBI53H3Pz72YiyCRhxdzESRSGb+Yu/2++y0GgkSOKC0+u9tjAQgSeXgxlxt1kyVgI4ynpPfefad8d/GiBcGERHyUvJiLIJHG+PO63cAhSIgSggSX82IugkQ69fbtoV89YiEQJHLY+eTTHgtAkMjDi7kIEqmMX8wVJQSJFOoN3AsvvuQGDkEih/GLuXff01kMQYI8UfJYgCBBGvX2bedTT1sIQYIcHnr4EY8FCBLkUbdu9VMo3cAJEqTgHThBAlFCkOBK3MAJEqSLUj3oFiVBgjR8XrcgQSp1Slp8brcbOEGCHLZvv9+LuYIEeax8Y+5e35grSJDEbbfNezFXkCAPjwUIEqRTb98ee3yHhRAkyOHRIUgeCxAkSMOLuYIEqYzfgauH3ggSpIhSnZQ8FiBIkML4Bm77ffdbDEGCHFFafHa3b8zdBObOnrvwvWUATEgAggQIEoAgAYIEIEiAIAEIEiBIAIIECBKAIAGCBCBIgCABCBKAIAGCBCBIgCABCBIgSACCBAgSgCABggQgSIAgAQgSIEgAggQIEoAgAQgSIEgAggQIEoAgAYIEIEiAIAEIEiBIAIIECBKAIAGCBCBIAIIECBKAIAGCBCBIgCABCBIgSACCBAgSgCABggQgSIAgAQgSIEgAggQgSIAgAQgSIEgAggQIEoAgAYIEIEiAIAEIEiBIAIIECBKAIAGCBCBIAIIECBKAIAGCBCBIgCABCBIgSACCBAgSgCABggQgSIAgAQgSgCABggQgSIAgAQgSIEgAggQIEoAgAYIEIEiAIAEIEiBIAIIECBKAIAEIEiBIAIIECBKAIAGCBCBIgCABCBIgSACCBAgSgCABggQgSACCBAgSgCABggQgSIAgAQgSIEgAggQIEoAgAYIEMKUgHbcMgAkJ4LIgvW8ZgCxBOmMZAEECmDBX/8vZcxe+txRAhgmpmJKATEE6aSmALEH63FIAWYJ03FIA0ebG/42DbSDLhFQ5RwLSBMm2DUgTJK+QACYkgB8E6Y7bbz0vSkCWCal605IAWYJkQgJyBGnYttWr/zOWBcgwIVVHLQuQJUh/sixAiiDZtgGZJiTbNiBVkP5oaYAUQRq2bXXL5mVbIMWEZEoCUgWpniOdt0RAeJDau20Ot4EUE1L1qiUCUgSpHW4ft0xAhgnJlARMzdy1/IPOnrtwevjVWS4gekIyJQF5JiRTEpBpQjIlAXkmJFMSkGlCMiUBeSakNiUdG371lg6InpBMSUCeIN1x+63Hi3fcgCQTUvVK8UkAQIYgtXfcfF4SsK7m1vJ/7DEAIMOWbWyvJQRSBKkdcB+0jECGCamqjwGcsZRAeJDaR93augEpJiRbNyBPkCa2br7LDYgP0sTWzQOTQPiEVKNUJ6RXLCsQHqQWpUPDr0OWFggPUlOnJOdJQHyQ2nnSM8V5EpBgQhq/gPuMJQbCg9SidLx4aBLIEKQWpUPFITeQIUgtSnVK8imTQHyQmholN29AfJDazdsTogRcydy0/wXPnrswP/yqnzQ5b/mBqC3b5ZOSZ5SA2CC1KJ0UJSBFkEQJSBUkUQJSBUmUgFRBmojSg8UjASBISaJ0pnhOCQQpUZTGjwQc96eB2TOX9d/Y2XMXlodfI38iMCFlmJbqu2+v+hOBCSnTpFSnpGV/KhCkLFFaGH4dK95/A1u2BNu3evN2b3EDB4KUJErnh5/6rNIhfzYQpCxhqofdviEXBClNlOqU5CFKEKQ0URq/A2cLB1vE3Fb4f+LsuQuLZfXRALdwYEIKn5bqN5rUA+/j/qQgSBmidGb4qVu4V4oDb7BlS7SF69oWrvcnBhOSaQkwIZmWQJA2Q5hGw68DxU0c2LIl2MYdKqvvwx30ZwcTUqZpaaFNS7ZxIEiptnH7hp/OfxRAkDJEqZ4pLQ0/LxfnSyBIScLUtWlpZDVAkDKFyWMCEGCbJfihiYcqfR0TmJDSTUx928qZmECQhAkECWECQdo0YaoPV9ZHBUZWAwQpS5i6iTB5jgkEKUWY5luUapw6KwKClCVOiy1MvdUAQbKdA0HiKnGqUdpjagJByjg11W1dZ0VAkLLEqUZpV/HoAAhSojDNt4lpV/sNgoQ4gSAhTiBImzJOO9pvjxEgSKQJVN8mp/p7wYogSGSJU9fCNA6U6QlBIk2gFlqYdggUgkTGQC20QC3Y4iFIZItU38L0QFl9Yry3KggSGSepB9pvkUKQSBup3nYPQSLrdm98JtVZFQSJLIGaL5du9Wz1ECRSTlH9xFbPowcIEmkC5dkoBAmBQpBAoBAktkyg+nLp/TyPGggSpInTfPnhy8OdVREkyLa9GwcKQYI005MPrhMkSDs97Sm+ZkqQIFmcuhamGigH44IE6eI03tohSJAiTr7NRZBAnBAkuN44vVycOQkSJIpTVxyICxIkjJNHCQQJUsZp8rzJQ5iCBCnC5LxJkCBlnLoWppGpSZAg25ZufN6EIEGaqWnU4tRZEUGCLHEah6m3GoIEmaYmZ02CBKnCNL6h22c7J0iQKU59C5PtnCBBqu3cvjLjD1wKEuTbzi2V1bOmmQuTIEHeOI3KjJ0zCRJsjjDNxGMDggSbJ0x92eIH4IIEwiRIgDAJEgiTIAHCJEggTIIECJMgAZeHaVQ2yQOWggSzE6alFqa0r6Rs82eC2XDH7bceHH7dO/y8akICMk1LXZuWRoIEZAlTXxIdfAsSMD74PlCCz5ecIQH1fOlQSXC+ZEICLp+WuuHXcsQ2TpCANNs4Wzbgp7ZxB01IQKZpqW/T0oIgAVnCtL+sPiYgSECKKNUpaXkjpiVnSMB1ueP2W08OPw+WDXhEwIQEpJmWTEhAmmnJhASs57R0pKzhc5dMSMC6TUvDrzot3fBzSyYkYCOmpcWyerZ0XU95m5CAjZiWjrZp6aQgARmidKYdeF/zFk6QgI0O0yvDr2eGn/OCBGyaLZwgAVPbwg2/nhh+Dl3pH+OWDZi6K72ka0ICIqalGqS95bJzJRMSEDkp1ae7j5X2vJIJCYiclMZPd580IQFZJqU6IR37rwADAPSdk6k4Th9SAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,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"},function(e,t,n){var a=n(309);"string"==typeof a&&(a=[[e.i,a,""]]);var i={transform:void 0};n(4)(a,i);a.locals&&(e.exports=a.locals)},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,"/*\n * @Author: yanxbm \n * @Date: 2018-12-10 10:13:03 \n * @Last Modified by: yanxbm\n * @Last Modified time: 2019-04-16 20:21:33\n */\n.editorWrapper {\n  height: 100%;\n}\n",""])},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(e){return e&&e.__esModule?e:{default:e}}(n(2)),o=n(8),l=n(1),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(102)),u=n(96);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}window.onbeforeunload=function(e){if(!s.urlConst.get("shouldUnload"))return(e||window.event).returnValue=null,null};var p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.multiLang=n.props.multiLang,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"getunicodeString",value:function(e){return e?unescape(e.replace(/-/g,"%u")):null}},{key:"componentWillMount",value:function(){var e=this,t=s.parseUrl();console.log("params",t);var n={billPK:t.billPK,billType:t.billType,isLightApp:t.isLightApp,flowPackageId:t.flowPackageId,metaclassid:t.metaclassid,pk_org:t.pk_org,isOrgType:t.isOrgType,orgcode:t.orgcode,openNode:t.openNode,isShowDis:t.isShowDis,pageIndex:t.pageIndex,pageSize:t.pageSize,pk_wf_def:t.pk_wf_def,billTypeName:this.getunicodeString(t.billTypeName),sourceType:t.sourceType};s.flowContext.set(n);var i=t.state,r=t.flowType;s.urlConst.set({flowType:t.flowType,state:t.state,edittype:t.edittype});var o=void 0;if("workflow"==r||"workflow_sub"==r)o=u.config.workflow;else if("approve"==r||"approve_sub"==r)o=u.config.approve;else{if("bpp"!=r)return void console.error("未指定流程类型");o=u.config.bpp}var p="add"!=i,d=[{id:s.uuid(),type:"start",name:this.multiLang["index-000002"],width:40,height:40,x:60,y:60,linksFrom:[],linksTo:[]},{id:s.uuid(),type:"finish",name:this.multiLang["index-000003"],width:40,height:40,x:600,y:500,linksFrom:[],linksTo:[]}];if("bpp"!=r)if(p){var f=t.pk_wf_def,m=t.edittype,g="/nccloud/riawf/pf/queryFlowContentByPk.do",y=a({pk_wf_def:f},n);if("template"===m){var b=t.filename;g="/nccloud/riawf/pf/queryFlowContentByTemplate.do",y=a({filename:b},n),console.log("urlParams",t),console.log("filename",b)}(0,l.ajax)({url:g,data:y,method:"POST",success:function(e){if(console.log("res_data",e),e.data){var t,n=e.data.flow,i=e.data.sublist;s.usableSubflowList.set(i),e.data.WorkflowGadgetlist&&"workflow"==r&&s.WorkflowGadgetlist.set(e.data.WorkflowGadgetlist);var l=s.flowContext.get().metaclassid;l&&null!=l&&"null"!==l&&"undifine"!==l||(l=e.data.metaclassid,s.flowContext.set({metaclassid:l}));var u=s.flowContext.get().billTypeName;u&&null!=u&&"null"!==u&&"undifine"!==u||(u=e.data.billTypeName,s.flowContext.set({billTypeName:u}));var p=[];n.entity.forEach((function(e){e.width=40,e.height=40,e.x=Number(e.x),e.y=Number(e.y),e.linksTo.length>0&&e.linksTo.forEach((function(e){var t=e.color;t&&!p.includes(t)&&p.push(t)}))}));var d={id:n.flowId,name:n.flowName,activeIndex:0,flowNames:c({},n.flowId,n.flowName),displayFlowIds:[n.flowId]};s.attributesList.add(n.attributes);var f=n.entity.map((function(e){return a({},e,{linksTo:e.linksTo?e.linksTo.map((function(t){return a({},t,{points:s.calcLinkPoints(e,s.getEntity(n.entity,t.target),s.attributesList.get(t.linkId).apparent.lineType,t.points.cPoint,t.points.curviness)})})):[]})}));console.log("initModel",f,"attributesList",s.attributesList.data),s.subflowsList.push((c(t={},n.flowId,{entity:f,metaEntity:[]}),c(t,"flowName",n.flowName),c(t,"flowId",n.flowId),c(t,"entityId","main"),t)),s.store.dispatch(s.setMainFlowId(n.flowId)),s.store.dispatch(s.setFlows(d)),s.store.dispatch(s.initialColors(p)),s.store.dispatch(s.setEntities(f)),s.store.dispatch(s.setConfig(o))}else console.error("request-main-flow",e)}})}else(0,l.ajax)({url:"/nccloud/riawf/pf/approveFlowMngAdd.do",data:n,method:"POST",success:function(n){if(console.log("新建",n),n.data){var a,i=n.data.sublist,l={cur_refpk:n.data.cur_refpk,cur_refcode:n.data.cur_refcode,cur_refname:n.data.cur_refname};s.flowContext.set(l),s.usableSubflowList.set(i);var u=s.uuid();n.data.WorkflowGadgetlist&&"workflow"==r&&s.WorkflowGadgetlist.set(n.data.WorkflowGadgetlist),s.attributesList.add(c({},u,{general:{id:u,name:"workflow"==r?e.multiLang["index-000005"]:e.multiLang["index-000004"],describe:e.multiLang["index-000001"],pfBillType:t.billType,version:"1.0",createTime:s.formatTime("yyyy-MM-dd hh:mm:ss"),useOrg:"",type:"curflow"},advanced:"approve"==r?{submitToRejecter:"N",workflowType:"2"}:"workflow"==r?{submitToRejecter:"N",workflowType:"4"}:{}})),d.forEach((function(e){s.attributesList.add(c({},e.id,{general:{id:e.id,name:e.name,type:e.type,describe:""}}))}));var p={id:u,name:"workflow"==r?e.multiLang["index-000005"]:e.multiLang["index-000004"],activeIndex:0,flowNames:c({},u,e.multiLang["index-000000"]),displayFlowIds:[u]};s.subflowsList.push((c(a={},u,{entity:[],metaEntity:[]}),c(a,"flowName",e.multiLang["index-000000"]),c(a,"flowId",u),c(a,"entityId","main"),a)),s.store.dispatch(s.setMainFlowId(u)),s.store.dispatch(s.setFlows(p)),s.store.dispatch(s.setEntities(d)),s.store.dispatch(s.setConfig(o))}else console.error("新建请求子流程失败")}});else if(p){var v=t.pk_wf_def;(0,l.ajax)({url:"/nccloud/riart/busiflow/busiflowButtonAction.do",data:{pk_wf_def:v,actionType:"open",areaType:"bt_line"},method:"POST",success:function(e){if(console.log("res_data",e),e.success&&e.data&&"success"==e.data.success){var t=e.data.busiflow,n=[];t.entity.forEach((function(e){e.x*=1.5,e.y*=1.5,"drive"==e.type?(e.width=30,e.height=30):(e.width=40,e.height=40),e.linksTo.length>0&&e.linksTo.forEach((function(e){var t=e.color;t&&!n.includes(t)&&n.push(t)}))})),s.attributesList.add(t.attributes);var i=t.entity.map((function(e){return a({},e,{linksTo:e.linksTo?e.linksTo.map((function(n){return a({},n,{points:s.calcLinkPoints(e,s.getEntity(t.entity,n.target),n.type,n.points.cPoint,n.points.curviness)})})):[]})}));console.log("initModel",i,"attributesList",s.attributesList.data()),s.store.dispatch(s.initialColors(n)),s.store.dispatch(s.setEntities(i)),s.store.dispatch(s.setConfig(o))}else(0,l.toast)({content:e.data.errMsg,color:"danger"})}})}else s.store.dispatch(s.setEntities(d)),s.store.dispatch(s.setConfig(o)),s.attributesList.add({busiflow:{busicode:"",businame:"",busiType:"",pk_orgs:"",defstr2:"",defstr3:"",defstr4:"",defstr5:"",mnecode:"",priority:"",validity:""}}),d.forEach((function(e){s.attributesList.add(c({},e.id,{type:e.type,name:e.name}))}))}},{key:"render",value:function(){return r.default.createElement("div",null,r.default.createElement(s.Graph,{customEntities:u.customEntities}))}}]),t}(r.default.PureComponent);(0,l.getMultiLang)({moduleId:"flowMaker",domainName:"uap",callback:function(e,t,n){t&&(s.setMultiLang(e),(0,o.render)(r.default.createElement(p,{multiLang:e}),document.querySelector("#app")))}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(n(2));n(380);var r=n(96);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(e){function t(e){o(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setTextareaRef=function(t){e.handleRef(t)},n}return s(t,e),a(t,[{key:"shouldComponentUpdate",value:function(e){if(e.modelName!=this.props.modelName)return!0}},{key:"render",value:function(){console.log("task");var e=this.props,t=e.type,n=e.width,a=e.height,o=e.modelName,l={width:n+"px",height:a+"px",backgroundImage:"url('../../../public/img/"+r.customEntities[t].bg+"')"};return i.default.createElement("div",{className:"task",style:l},i.default.createElement("span",null,o))}}]),t}(i.default.PureComponent),c=function(e){function t(){var e,n,a;o(this,t);for(var i=arguments.length,r=Array(i),s=0;s<i;s++)r[s]=arguments[s];return n=a=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),a.state={isEditing:!1,name:a.props.model.name},a.handleRef=function(e){a.textarea||(a.textarea=e)},a.handleKeyPress=function(e){switch(e.key){case"Enter":a.toggleEdit(!1),a.props.setName({id:a.props.model.id,name:a.state.name});break;case"Escape":a.toggleEdit(!1),a.setState({name:a.props.model.name})}},a.refreshName=function(e){a.setState({name:e.currentTarget.value})},a.toggleEdit=function(e){var t=a.textarea;e&&t&&setTimeout((function(){return t.focus()}),100),a.setState({isEditing:e})},l(a,n)}return s(t,e),a(t,[{key:"componentWillUnmount",value:function(){this.textarea=null}},{key:"render",value:function(){var e=this.props.model,t=e.width,n=e.height,a=e.type,r=e.name;return i.default.createElement(u,{width:t,height:n,type:a,name:this.state.name,modelName:r})}}]),t}(i.default.PureComponent);t.default=c},function(e,t,n){var a=n(381);"string"==typeof a&&(a=[[e.i,a,""]]);var i={transform:void 0};n(4)(a,i);a.locals&&(e.exports=a.locals)},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,"/*\n * @Author: yanxbm \n * @Date: 2018-11-29 14:16:02 \n * @Last Modified by: yanxbm\n * @Last Modified time: 2019-04-17 10:39:32\n */\n.task {\n  background-color: #e2f5ff;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-flow: row nowrap;\n          flex-flow: row nowrap;\n  border-radius: 13px;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  background-size: 107% 107%;\n  background-position: center center;\n  background-repeat: no-repeat;\n}\n.task span {\n  position: absolute;\n  top: 100%;\n  width: 160%;\n  left: -30%;\n  line-height: 14px;\n  padding-top: .8em;\n  font-size: 12px;\n  color: #555;\n}\n.task textarea {\n  position: absolute;\n  top: 100%;\n  width: 100%;\n  padding: .5em;\n  border: none;\n  font-size: 1.2rem;\n  text-align: center;\n  border-radius: .1rem;\n  resize: none;\n  z-index: 10;\n  background-color: rgba(255, 255, 255, 0.8);\n}\n.task .svgIcon {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 100%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  text-align: center;\n}\n",""])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(n(2)),r=n(96);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n(383);var u=function(e){function t(e){o(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setTextareaRef=function(t){e.handleRef(t)},n}return s(t,e),a(t,[{key:"shouldComponentUpdate",value:function(e){if(e.modelName!=this.props.modelName)return!0}},{key:"render",value:function(){console.log("event");var e=this.props,t=e.type,n=e.width,a=e.height,o=e.modelName,l=e.ctmClass,s={width:n+"px",height:a+"px",backgroundImage:"url('../../../public/img/"+r.customEntities[t].bg+"')"};return i.default.createElement("div",{className:"event "+(l&&"ctm_class"),style:s},i.default.createElement("span",null," ",o," "))}}]),t}(i.default.PureComponent),c=function(e){function t(){var e,n,a;o(this,t);for(var i=arguments.length,r=Array(i),s=0;s<i;s++)r[s]=arguments[s];return n=a=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),a.state={isEditing:!1,name:a.props.model.name},a.handleRef=function(e){a.textarea||(a.textarea=e)},a.toggleEdit=function(e){var t=a.textarea;e&&t&&setTimeout((function(){return t.focus()}),1e3),a.setState({isEditing:e})},a.handleKeyPress=function(e){switch(e.key){case"Enter":a.toggleEdit(!1),a.props.setName({id:a.props.model.id,name:a.state.name});break;case"Escape":a.toggleEdit(!1),a.setState({name:a.props.model.name})}},a.refreshName=function(e){a.setState({name:e.currentTarget.value})},l(a,n)}return s(t,e),a(t,[{key:"componentWillUnmount",value:function(){this.textarea=null}},{key:"render",value:function(){var e=this.props.model,t=e.width,n=e.height,a=e.type,r=e.name,o=e.ctm_class;return i.default.createElement(u,{width:t,height:n,type:a,modelName:r,ctmClass:o})}}]),t}(i.default.PureComponent);t.default=c},function(e,t,n){var a=n(384);"string"==typeof a&&(a=[[e.i,a,""]]);var i={transform:void 0};n(4)(a,i);a.locals&&(e.exports=a.locals)},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,"/*\n * @Author: yanxbm \n * @Date: 2018-11-29 14:46:04 \n * @Last Modified by: yanxbm\n * @Last Modified time: 2019-04-17 10:38:48\n */\n.event {\n  background-color: #e2f5ff;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-flow: row nowrap;\n          flex-flow: row nowrap;\n  border-radius: 15px;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  font-size: .5rem;\n  background-size: 107% 107%;\n  background-position: center center;\n  background-repeat: no-repeat;\n}\n.event span {\n  position: absolute;\n  top: 100%;\n  width: 160%;\n  left: -30%;\n  padding-top: .8em;\n  line-height: 14px;\n  font-size: 12px;\n  color: #555;\n}\n.event textarea {\n  position: absolute;\n  top: 100%;\n  width: 200%;\n  padding: .5em;\n  border: none;\n  font-size: 1.2rem;\n  text-align: center;\n  border-radius: .1rem;\n  resize: none;\n  z-index: 10;\n  background-color: rgba(255, 255, 255, 0.8);\n}\n.ctm_class span {\n  color: #00aeff;\n}\n",""])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(n(2)),r=n(96);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n(386);var u=function(e){function t(e){o(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setTextareaRef=function(t){e.handleRef(t)},n}return s(t,e),a(t,[{key:"shouldComponentUpdate",value:function(e){if(e.modelName!=this.props.modelName)return!0}},{key:"render",value:function(){var e=this.props,t=e.width,n=e.height,a=e.type,o=e.modelName,l=e.isEditing,s={width:t+"px",height:n+"px",backgroundImage:"url('../../../public/img/"+r.customEntities[a].bg+"')"};return i.default.createElement("div",{className:"flow",style:s,alignItems:l?"stretch":"center"},i.default.createElement("span",null,o))}}]),t}(i.default.PureComponent),c=function(e){function t(){var e,n,a;o(this,t);for(var i=arguments.length,r=Array(i),s=0;s<i;s++)r[s]=arguments[s];return n=a=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),a.state={isEditing:!1,name:a.props.model.name},a.handleRef=function(e){a.textarea||(a.textarea=e)},a.handleKeyPress=function(e){switch(e.key){case"Enter":a.toggleEdit(!1),a.props.setName({id:a.props.model.id,name:a.state.name});break;case"Escape":a.toggleEdit(!1),a.setState({name:a.props.model.name})}},a.refreshName=function(e){a.setState({name:e.currentTarget.value})},a.toggleEdit=function(e){var t=a.textarea;e&&t&&setTimeout((function(){return t.focus()}),100),a.setState({isEditing:e})},l(a,n)}return s(t,e),a(t,[{key:"componentWillUnmount",value:function(){this.textarea=null}},{key:"render",value:function(){var e=this.props.model,t=e.type,n=e.width,a=e.height,r=e.name;return i.default.createElement(u,{width:n,height:a,type:t,modelName:r,name:this.state.name})}}]),t}(i.default.PureComponent);t.default=c},function(e,t,n){var a=n(387);"string"==typeof a&&(a=[[e.i,a,""]]);var i={transform:void 0};n(4)(a,i);a.locals&&(e.exports=a.locals)},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,"/*\n * @Author: yanxbm \n * @Date: 2018-12-13 14:50:13 \n * @Last Modified by: yanxbm\n * @Last Modified time: 2019-04-17 10:39:16\n */\n.flow {\n  background-color: #e2f5ff;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-flow: row nowrap;\n          flex-flow: row nowrap;\n  border-radius: 13px;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  background-size: 107% 107%;\n  background-position: center center;\n  background-repeat: no-repeat;\n}\n.flow span {\n  position: absolute;\n  top: 100%;\n  width: 160%;\n  left: -30%;\n  line-height: 14px;\n  padding-top: .8em;\n  font-size: 12px;\n  color: #555;\n}\n.flow textarea {\n  position: absolute;\n  top: 100%;\n  width: 100%;\n  padding: .5em;\n  border: none;\n  font-size: 1.2rem;\n  text-align: center;\n  border-radius: .1rem;\n  resize: none;\n  z-index: 10;\n  background-color: rgba(255, 255, 255, 0.8);\n}\n.flow .svgIcon {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 100%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  text-align: center;\n}\n",""])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){var n="../../../public/img/"+e;return{path:React.createElement("image",{xlinkHref:n,width:"100%",height:"100%"}),size:t||16}}}])}));
//# sourceMappingURL=index.c2a12f94.js.map