/*! @ncctag {"date":"2020-5-11 23:41:31"} */
!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("nc-lightapp-front"),require("react")):"function"==typeof define&&define.amd?define(["nc-lightapp-front","react"],r):"object"==typeof exports?exports["uap/refer/riart/acceptUserRef/index"]=r(require("nc-lightapp-front"),require("react")):e["uap/refer/riart/acceptUserRef/index"]=r(e["nc-lightapp-front"],e.React)}(window,(function(e,r){return function(e){var r={};function t(a){if(r[a])return r[a].exports;var n=r[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,t),n.l=!0,n.exports}return t.m=e,t.c=r,t.d=function(e,r,a){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:a})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(t.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var n in e)t.d(a,n,function(r){return e[r]}.bind(null,n));return a},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="../../../../",t(t.s=64)}({0:function(r,t){r.exports=e},1:function(e,t){e.exports=r},5:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.conf=void 0;var a=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e};r.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return React.createElement(n,a({},o,e))};var n=t(0).high.Refer,o=r.conf={multiLang:{domainName:"uap",currentLocale:"zh-CN",moduleId:"uapRefer"},queryTreeUrl:"/nccloud/riart/ref/groupRefTreeAction.do",refType:"tree",placeholder:"1880000025-000061",refName:"1880000025-000061",rootNode:{refname:"1880000025-000061",refpk:"root"}}},51:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.beforeEvent=r.selectOnchange=void 0;var a=o(t(66)),n=o(t(67));function o(e){return e&&e.__esModule?e:{default:e}}r.selectOnchange=a.default,r.beforeEvent=n.default},64:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e};r.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={multiLang:{domainName:"uap",currentLocale:"zh-CN",moduleId:"uapRefer"},queryGridUrl:"",columnConfig:[{name:["1880000025-000002","1880000025-000003","1880000025-000012","1880000025-000013"],code:["refcode","refname","sug.groupname","oo.name"]}],showHistory:!1,isMultiSelectedEnabled:!0,refType:"grid"};return React.createElement(l.default,a({popWindowClassName:"accept-user-ref master-table"},r,e))};t(1);var n,o=t(65),l=(n=o)&&n.__esModule?n:{default:n}},65:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a,n,o=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},l=function(){function e(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(r,t,a){return t&&e(r.prototype,t),a&&e(r,a),r}}(),i=function e(r,t,a){null===r&&(r=Function.prototype);var n=Object.getOwnPropertyDescriptor(r,t);if(void 0===n){var o=Object.getPrototypeOf(r);return null===o?void 0:e(o,t,a)}if("value"in n)return n.value;var l=n.get;return void 0!==l?l.call(a):void 0},u=t(0),s=t(51),c=t(68);var f=(a=function(e){function r(e){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return n.call(t),t.state=o({},t.state,{currentReffer:[],children_data:[],selectedMsgCode:"",selectList:[],json:{},inlt:null}),t}return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}(r,e),l(r,[{key:"componentWillMount",value:function(){var e=this;i(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"componentWillMount",this).call(this);(0,u.getMultiLang)({moduleId:"uapRefer",domainName:"uap",callback:function(r,t,a){t?e.setState({json:r,inlt:a}):console.log(未加载到多语资源)}})}},{key:"componentDidMount",value:function(){var e=this;i(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"componentDidMount",this).call(this);var t=null==e.state.selectedValues?new Map:e.state.selectedValues,a=new Array,n=e.props.params;if(null!=n&&null!=n&&null!=n.receivers&&n.receivers&&n.receivers.display&&n.receivertype){for(var o=n.receivers.value.split("#"),l=n.receivers.display.split("#"),u=n.receivertype.value.split("#"),c=0;c<u.length;c++){var f="";switch(u[c]){case"1":f=e.state.json["1880000025-000004"];break;case"2":f=e.state.json["1880000025-000005"];break;case"3":f=e.state.json["1880000025-000006"];break;case"4":f=e.state.json["1880000025-000007"];break;case"5":f=e.state.json["1880000025-000008"];break;case"6":f=e.state.json["1880000025-000009"];break;case"7":f=e.state.json["1880000025-000010"];break;case"0":f=e.state.json["1880000025-000011"]}var d={msgsendtype:{value:u[c],display:f},receiver:{value:o[c],display:l[c]}};a.push({values:d})}a.forEach((function(e){e.refcode=e.values.receiver.value,e.refpk=e.values.receiver.value,e.refname=e.values.receiver.display})),a.forEach((function(r){t.set(r.refpk,r),(0,s.selectOnchange)(r.values.msgsendtype.value,e.props,r)})),e.setState({selectedValues:t},(function(){e.props.editTable.setTableData("referTable",{rows:a})}))}}}]),r}(u.high.Refer.PopRefer),n=function(){var e,r,t=this;this.rowclick=function(e,r){},this.getAllSelect=function(){},this.renderPopoverHeader=function(){return React.createElement("div",null,t.state.json["1880000025-000020"])},this.renderPopoverLeftHeader=function(){return React.createElement("div",null)},this.loadTableData=(e=regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){t.setState({loading:!1},(function(){var e=t.state,r=(e.tableData,e.currentLevel,e.referVal,t.props);r.queryGridUrl,r.queryCondition,r.isCacheable}))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,t)})),r=function(){var r=e.apply(this,arguments);return new Promise((function(e,t){return function a(n,o){try{var l=r[n](o),i=l.value}catch(e){return void t(e)}if(!l.done)return Promise.resolve(i).then((function(e){a("next",e)}),(function(e){a("throw",e)}));e(i)}("next")}))},function(e){return r.apply(this,arguments)}),this.renderPopoverLeft=function(){return React.createElement("div",null)},this.renderPopoverSearchExtendArea=function(){return React.createElement("div",null)},this.renderPopoverPageArea=function(){return React.createElement("div",null)},this.onRowClick=function(){t.props.editTable.setStatus("referTable","edit",null)},this.afterEvent=function(e,r,a,n,o,l,i){var u=t,s=null==u.state.selectedValues?new Map:u.state.selectedValues;u.addRefParam(i),s.clear();new Map;u.props.editTable.getAllRows("referTable",!0).forEach((function(e){null!=e&&null!=e.refpk&&s.set(e.refpk,e)})),u.setState({selectedValues:s})},this.addRefParam=function(e){return e.refcode=e.values.receiver.value,e.refpk=e.values.receiver.value,e.refname=e.values.receiver.display,e},this.tableButtonClick=function(e,r,a,n,o){switch(r){case"del":var l=t,i=null==l.state.selectedValues||null==l.state.selectedValues?new Map:l.state.selectedValues,s=e.editTable.getCheckedRows("referTable");if(s.length<=0)(0,u.toast)({color:"danger",content:l.state.json["1880000025-000019"]});else{var c=new Array;s.forEach((function(e){c.push(e.index)})),e.editTable.deleteTableRowsByIndex("referTable",c,!0),i.clear(),e.editTable.getAllRows("referTable").forEach((function(e){null!=e&&null!=e.refpk&&i.set(e.refpk,e)})),l.setState({selectedValues:i})}break;case"add":var f=t.props.meta.getMeta();f.referTable.items.find((function(e){return"receiver"==e.attrcode})).queryCondition=function(){return{msgres_code:t.props.code}},t.props.meta.setMeta(f),t.props.editTable.addRow("referTable")}},this.renderPopoverRight=function(){var e=t.props,r=e.editTable,a=e.button,n=r.createEditTable;a.createButtonApp;return React.createElement("div",null,t.props.button.createButtonApp({area:"page_header",buttonLimit:3,onButtonClick:t.tableButtonClick,popContainer:document.querySelector(".header-button-area")}),n("referTable",{alloweFilter:!1,onBeforeEvent:s.beforeEvent.bind(t),onRowClick:t.onRowClick.bind(t),onAfterEvent:t.afterEvent,showCheck:!0,height:350}))}},a),d=(0,u.createPage)({initTemplate:c.initTemplate,appAutoFocus:!1})(f);r.default=d},66:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,r,t){r.MultiInit.getMultiLang({moduleId:"uapRefer",domainName:"uap",callback:function(a,n,o){if(n){e!=t.values.msgsendtype.value&&(t.values.receiver={display:"",value:""}),t.values.msgsendtype.value=e;var l="";switch(e){case"1":l=a["1880000025-000004"];break;case"2":l=a["1880000025-000005"];break;case"3":l=a["1880000025-000006"];break;case"4":l=a["1880000025-000007"];break;case"5":l=a["1880000025-000008"];break;case"6":l=a["1880000025-000009"];break;case"7":l=a["1880000025-000010"];break;case"0":l=a["1880000025-000011"]}t.values.msgsendtype.display=l;var i=r.meta.getMeta(),u=e,s="",c="",f={},d=!0;switch(u){case"1":s="refer",c="uap/refer/riart/userDefaultRefer/index.js",d=!0;break;case"2":s="refer",c="uap/refer/riart/userGroupTreeRef/index.js",d=!0;break;case"3":s="refer",c="uap/refer/riart/roleRefer/index.js",d=!1;break;case"4":s="refer",c="uap/refer/riart/roleGroupRefer/index.js",d=!0;break;case"5":s="refer",c="uapbd/refer/psninfo/PsndocTreeGridRef/index.js",f={placeholder:a["1880000025-000000"],rootNode:{refname:a["1880000025-000000"],refpk:"root"},refType:"tree",refName:a["1880000025-000001"],refCode:"uapbd.org.BusinessUnitAndGroupTreeRef",queryTreeUrl:"/nccloud/uapbd/ref/BusinessUnitAndGroupTreeRef.do",treeConfig:{name:[a["1880000025-000002"],a["1880000025-000003"]],code:["refcode","refname"]},isMultiSelectedEnabled:!1},d=!0;break;case"6":s="refer",c="uap/refer/riart/responsibilityTabelRef/index.js",d=!0;break;case"7":s="refer",c="uapbd/refer/org/PostDefaultGridRef/index",f={placeholder:a["1880000025-000000"],rootNode:{refname:a["1880000025-000000"],refpk:"root"},refType:"tree",refName:a["1880000025-000001"],refCode:"uapbd.org.BusinessUnitAndGroupTreeRef",queryTreeUrl:"/nccloud/uapbd/ref/BusinessUnitAndGroupTreeRef.do",treeConfig:{name:[a["1880000025-000002"],a["1880000025-000003"]],code:["refcode","refname"]},isMultiSelectedEnabled:!1},d=!0;break;case"0":s="refer",c="uap/refer/riart/msgresSfdfrcvTableAction/index.js",d=!1}return r.renderItem("table","referTable","receiver",null),i.referTable.items[1].itemtype=s,i.referTable.items[1].refcode=c,"57".indexOf(u)>=0&&(i.referTable.items[1].unitProps=f),i.referTable.items[1].isShowUnit=d,r.meta.setMeta(i),!0}console.log("未加载到多语资源")}})};t(5)},67:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,r,t,a,n,o){var l=this.state.json;if("receiver"==t.attrcode){var i=e.meta.getMeta(),u=null==o.values.msgsendtype.value?1:o.values.msgsendtype.value,s="",c="",f={},d=!0;switch(u){case"1":s="refer",c="uap/refer/riart/userDefaultRefer/index.js",d=!0;break;case"2":s="refer",c="uap/refer/riart/userGroupTreeRef/index.js",d=!0;break;case"3":s="refer",c="uap/refer/riart/roleRefer/index.js",d=!1;break;case"4":s="refer",c="uap/refer/riart/roleGroupRefer/index.js",d=!0;break;case"5":s="refer",c="uapbd/refer/psninfo/PsndocTreeGridRef/index.js",f={placeholder:l["1880000025-000000"],rootNode:{refname:l["1880000025-000000"],refpk:"root"},refType:"tree",refName:l["1880000025-000001"],refCode:"uapbd.org.BusinessUnitAndGroupTreeRef",queryTreeUrl:"/nccloud/uapbd/ref/BusinessUnitAndGroupTreeRef.do",treeConfig:{name:[l["1880000025-000002"],l["1880000025-000003"]],code:["refcode","refname"]},isMultiSelectedEnabled:!1},d=!0;break;case"6":s="refer",c="uap/refer/riart/responsibilityTabelRef/index.js",d=!0;break;case"7":s="refer",c="uapbd/refer/org/PostDefaultGridRef/index",f={placeholder:l["1880000025-000000"],rootNode:{refname:l["1880000025-000000"],refpk:"root"},refType:"tree",refName:l["1880000025-000001"],refCode:"uapbd.org.BusinessUnitAndGroupTreeRef",queryTreeUrl:"/nccloud/uapbd/ref/BusinessUnitAndGroupTreeRef.do",treeConfig:{name:[l["1880000025-000002"],l["1880000025-000003"]],code:["refcode","refname"]},isMultiSelectedEnabled:!1},d=!0;break;case"0":s="refer",c="uap/refer/riart/msgresSfdfrcvTableAction/index.js",d=!1}e.renderItem("table","referTable","receiver",null),i.referTable.items[1].itemtype=s,i.referTable.items[1].refcode=c,"57".indexOf(u)>=0&&(i.referTable.items[1].unitProps=f),i.referTable.items[1].isShowUnit=d,e.meta.setMeta(i)}return!0};t(0)},68:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.initTemplate=void 0;var a,n=t(69),o=(a=n)&&a.__esModule?a:{default:a};r.initTemplate=o.default},69:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){(0,a.getMultiLang)({moduleId:"uapRefer",domainName:"uap",callback:function(r,t,a){if(t){var u;u={button:[{id:"0001A41000000006U5S4",type:"button_main",key:"add",title:r["1880000025-000014"],area:"page_header",children:[]},{id:"0001A41000000006U5S2",type:"button_main",key:"del",title:r["1880000025-000015"],area:"page_header",children:[]}],referTable:{moduletype:"table",pagination:!1,status:"browse",lineHeight:"40px",items:[{itemtype:"select",visible:!0,label:r["1880000025-000016"],attrcode:"msgsendtype",maxlength:"50",required:!0,metapath:"msgsendtype",render:function(t,a,o){var u=e.editTable.getAllData("referTable"),s=new Array;u.rows.forEach((function(e){null!=e.values.msgsendtype.value&&""!=e.values.msgsendtype.value&&s.push(e.values.msgsendtype.value)}));var c=new Array;-1==s.indexOf("1")&&c.push(React.createElement(i,{value:"1"},r["1880000025-000004"])),-1==s.indexOf("2")&&c.push(React.createElement(i,{value:"2"},r["1880000025-000005"])),-1==s.indexOf("3")&&c.push(React.createElement(i,{value:"3"},r["1880000025-000006"])),-1==s.indexOf("4")&&c.push(React.createElement(i,{value:"4"},r["1880000025-000007"])),-1==s.indexOf("5")&&c.push(React.createElement(i,{value:"5"},r["1880000025-000008"])),-1==s.indexOf("6")&&c.push(React.createElement(i,{value:"6"},r["1880000025-000009"])),-1==s.indexOf("7")&&c.push(React.createElement(i,{value:"7"},r["1880000025-000010"])),-1==s.indexOf("8")&&c.push(React.createElement(i,{value:"0"},r["1880000025-000018"]));var f=React.createElement("div",null,React.createElement(l,{dropdownClassName:"refer-select",onSelect:function(r){return(0,n.selectOnchange)(r,e,a)}},c));return(React.createElement("div",null,f))}},o({itemtype:"refer",refcode:"uap/refer/riart/userDefaultRefer/index.js",col:4,width:"100px",label:r["1880000025-000017"],maxlength:20,attrcode:"receiver",visible:!0},"width","100px")]}},e.button.setButtons(u.button),e.meta.setMeta(u)}else console.log("未加载到多语资源")}})};var a=t(0),n=t(51);function o(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var l=a.base.NCSelect,i=l.NCOption}})}));
//# sourceMappingURL=index.js.map