/*! @ncctag {"date":"2020-5-11 23:34:54"} */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nc-lightapp-front"),require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["nc-lightapp-front","react","react-dom"],t):"object"==typeof exports?exports["uap/dc/transtypeManage/list/index"]=t(require("nc-lightapp-front"),require("react"),require("react-dom")):e["uap/dc/transtypeManage/list/index"]=t(e["nc-lightapp-front"],e.React,e.ReactDOM)}(window,(function(e,t,a){return function(e){var t={};function a(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,a),s.l=!0,s.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(n,s,function(t){return e[t]}.bind(null,s));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="../../../../",a(a.s=568)}({1:function(t,a){t.exports=e},11:function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var a=t.protocol+"//"+t.host,n=a+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var s,l=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(l)?e:(s=0===l.indexOf("//")?l:0===l.indexOf("/")?a+l:n+l.replace(/^\.\//,""),"url("+JSON.stringify(s)+")")}))}},2:function(e,a){e.exports=t},3:function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=function(e,t){var a=e[1]||"",n=e[3];if(!n)return a;if(t&&"function"==typeof btoa){var s=(i=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),l=n.sources.map((function(e){return"/*# sourceURL="+n.sourceRoot+e+" */"}));return[a].concat(l).concat([s]).join("\n")}var i;return[a].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+a+"}":a})).join("")},t.i=function(e,a){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},s=0;s<this.length;s++){var l=this[s][0];"number"==typeof l&&(n[l]=!0)}for(s=0;s<e.length;s++){var i=e[s];"number"==typeof i[0]&&n[i[0]]||(a&&!i[2]?i[2]=a:a&&(i[2]="("+i[2]+") and ("+a+")"),t.push(i))}},t}},4:function(e,t,a){var n,s,l={},i=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===s&&(s=n.apply(this,arguments)),s}),o=function(e){var t={};return function(a){return void 0===t[a]&&(t[a]=e.call(this,a)),t[a]}}((function(e){return document.querySelector(e)})),r=null,c=0,u=[],p=a(11);function d(e,t){for(var a=0;a<e.length;a++){var n=e[a],s=l[n.id];if(s){s.refs++;for(var i=0;i<s.parts.length;i++)s.parts[i](n.parts[i]);for(;i<n.parts.length;i++)s.parts.push(v(n.parts[i],t))}else{var o=[];for(i=0;i<n.parts.length;i++)o.push(v(n.parts[i],t));l[n.id]={id:n.id,refs:1,parts:o}}}}function b(e,t){for(var a=[],n={},s=0;s<e.length;s++){var l=e[s],i=t.base?l[0]+t.base:l[0],o={css:l[1],media:l[2],sourceMap:l[3]};n[i]?n[i].parts.push(o):a.push(n[i]={id:i,parts:[o]})}return a}function f(e,t){var a=o(e.insertInto);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=u[u.length-1];if("top"===e.insertAt)n?n.nextSibling?a.insertBefore(t,n.nextSibling):a.appendChild(t):a.insertBefore(t,a.firstChild),u.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");a.appendChild(t)}}function h(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=u.indexOf(e);t>=0&&u.splice(t,1)}function y(e){var t=document.createElement("style");return e.attrs.type="text/css",m(t,e.attrs),f(e,t),t}function m(e,t){Object.keys(t).forEach((function(a){e.setAttribute(a,t[a])}))}function v(e,t){var a,n,s,l;if(t.transform&&e.css){if(!(l=t.transform(e.css)))return function(){};e.css=l}if(t.singleton){var i=c++;a=r||(r=y(t)),n=x.bind(null,a,i,!1),s=x.bind(null,a,i,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(a=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",m(t,e.attrs),f(e,t),t}(t),n=B.bind(null,a,t),s=function(){h(a),a.href&&URL.revokeObjectURL(a.href)}):(a=y(t),n=k.bind(null,a),s=function(){h(a)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else s()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=i()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var a=b(e,t);return d(a,t),function(e){for(var n=[],s=0;s<a.length;s++){var i=a[s];(o=l[i.id]).refs--,n.push(o)}e&&d(b(e,t),t);for(s=0;s<n.length;s++){var o;if(0===(o=n[s]).refs){for(var r=0;r<o.parts.length;r++)o.parts[r]();delete l[o.id]}}}};var g,w=(g=[],function(e,t){return g[e]=t,g.filter(Boolean).join("\n")});function x(e,t,a,n){var s=a?"":n.css;if(e.styleSheet)e.styleSheet.cssText=w(t,s);else{var l=document.createTextNode(s),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(l,i[t]):e.appendChild(l)}}function k(e,t){var a=t.css,n=t.media;if(n&&e.setAttribute("media",n),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}function B(e,t,a){var n=a.css,s=a.sourceMap,l=void 0===t.convertToAbsoluteUrls&&s;(t.convertToAbsoluteUrls||l)&&(n=p(n)),s&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */");var i=new Blob([n],{type:"text/css"}),o=e.href;e.href=URL.createObjectURL(i),o&&URL.revokeObjectURL(o)}},568:function(e,t,a){"use strict";var n,s,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=a(2),o=d(i),r=d(a(9)),c=a(1),u=a(569),p=d(a(580));function d(e){return e&&e.__esModule?e:{default:e}}a(583),a(585);c.base.NCButton,c.base.NCFromControl,c.base.NCMessage;var b=c.base.NCDiv,f="transtypeManage",h=c.viewModel.setGlobalStorage,y=(c.viewModel.getGlobalStorage,c.viewModel.removeGlobalStorage,n=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.call(a),a.state={billvo:"",billtypecode:"",billtypeid:"",billstate:"browse",realBilltype:"",ncbrcode:"",extendurl:"",istoBottom:!0,currLine:-1,addcount:0,openNode:"",currrowid:"",currkey:"",billtypename:"",islock:!0,json:{},inlt:null},a.setBillIdFun,a.pushPropsfrom,a.getDataFun,a.setExtendStat,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),l(t,[{key:"componentWillMount",value:function(){var e=this;this.props.MultiInit.getMultiLang({moduleId:"1016-101613",domainName:"uap",callback:function(t,a,n){a&&e.setState({json:t,inlt:n})}})}},{key:"componentDidMount",value:function(){this.props.button.setDisabled({add:!1,onPublish:!1,edit:!1,save:!0,cancel:!0}),this.getBtn();var e=this.props.getUrlParam("backBilltype")||"";""!=e?(this.state.realBilltype=e,this.state.islock=!0,this.state.openNode=this.props.getUrlParam("opennode")||"",this.getData(),this.onRefresh()):this.getData()}},{key:"setInit",value:function(){this.props.button.setDisabled({add:!1,onPublish:!1,edit:!1,delete:!1,save:!0,cancel:!0}),this.state.currLine=-1,this.state.extendurl="",this.state.billtypecode="",this.state.realBilltype="",this.state.extendurl="",this.state.addcount=0,this.state.currrowid="",this.state.billstate="browse",this.state.billtypeid=""}},{key:"getExtendUrl",value:function(e){var t=this;(0,c.ajax)({url:"/nccloud/riart/billtype/getExtendAttUrl.do",type:"post",data:e,success:function(e){var a=e.success,n=e.data;if(a&&"success"==n.result){t.state.extendurl=n.url,t.setState({istoBottom:!1});var s=document.getElementsByTagName("body")[0];document.getElementById("extInfo")&&s.removeChild(document.getElementById("extInfo")),(i=document.createElement("script")).type="text/javascript";var l=n.url;i.src=l,i.id="extInfo",i.method=t.getExtendAttributes,i.onload=t.setBillId,i.onclick=t.setBillId,i.onsubmit=t.getExtendAttributes,s.appendChild(i),document.getElementById("extInfo").setAttribute("extendStat","browse")}if(a&&"danger"==n.result){var i;s=document.getElementsByTagName("body")[0];document.getElementById("extInfo")&&s.removeChild(document.getElementById("extInfo")),(i=document.createElement("script")).id="extInfo",i.type="text/javascript";i.src="/nccloud/resources/uap/dc/transtypeManage/blankAttribute/index.js",s.appendChild(i),document.getElementById("extInfo").setAttribute("extendStat","browse"),t.setState({istoBottom:!0})}}})}},{key:"onAdd",value:function(){var e=this;if(""!=this.state.realBilltype)if(this.state.addcount=this.state.addcount+1,this.state.addcount>1)(0,c.toast)({content:this.state.json["101613-000088"],color:"warning"});else{this.props.button.setDisabled({add:!0,onPublish:!0,edit:!0,delete:!0,save:!1,cancel:!1}),this.props.button.setButtonVisible(["add","onPublish","edit","delete","filter","config","refresh"],!1),this.props.button.setButtonVisible(["save","cancel"],!0);var t=this.props.meta.getMeta();t[f].items.map((function(t){"billcoderule"==t.attrcode&&(t.queryCondition={nbcrcode:e.state.ncbrcode})})),this.props.meta.setMeta(t),this.props.editTable.setStatus(f,"edit");var a=this.props.editTable.getNumberOfRows(f);if(this.props.editTable.addRow(f,a,!0,{pk_billtypecode:{display:this.state.realBilltype+"-Cxx-",value:this.state.realBilltype+"-Cxx-"}}),this.props.editTable.selectAllRows(f,!1),this.props.editTable.selectTableRows(f,a,!0),this.state.billstate="add",setTimeout((function(){for(var t=0;t<a;t++)e.props.editTable.setEditableRowByIndex(f,t,!1);e.props.editTable.setEditableRowKeyByIndex(f,a,"pk_billtypecode",!0)}),1),""!=this.state.extendurl)document.getElementById("extInfo").setAttribute("extendStat","add"),this.setBillId("")}else(0,c.toast)({content:this.state.json["101613-000087"],color:"warning"})}},{key:"cancelBtnClick",value:function(){this.props.modal.close("publishApp")}},{key:"publishOK",value:function(e){var t=this;if(e)this.pushPropsfrom=e;else{var a=this.pushPropsfrom.getAllFormValue("publishApp"),n=this.state.billvo;n.key={display:"",value:this.state.billvo.key};var s={publishAppVO:{pushData:a},billtypeid:this.state.billvo.values.pk_billtypeid.value},l=this;(0,c.ajax)({url:"/nccloud/riart/billtype/transPublishApp.do",type:"post",data:s,success:function(e){var a=e.success,n=e.data;a&&"success"==n.result&&(l.props.modal.close("publishApp"),(0,c.toast)({content:t.state.json["101613-000091"],color:"success"})),a&&"success"!=n.result&&(0,c.toast)({content:n.message,color:n.result})}})}}},{key:"onPublish",value:function(){var e=this.props.editTable.getCheckedRows(f);0!==e.length&&1==e.length?this.props.modal.show("publishApp"):(0,c.toast)({content:this.state.json["101613-000024"],color:"warning"})}},{key:"onSave",value:function(){var e=void 0,t=void 0,a=void 0,n=this.props.editTable.getCheckedRows(f);if(0==n.length)(0,c.toast)({content:this.state.json["101613-000092"],color:"warning"});else if(1==n.length){if("edit"==this.state.billstate)e=n[0].data.values.pk_billtypecode,t=n[0].data.values.pk_billtypeid,n[0].data.values.billtypename,n[0].data.values.billtypename2,n[0].data.values.billtypename3,n[0].data.values.billtypename4,n[0].data.values.billtypename5,n[0].data.values.billtypename6,e.value,a=t.value;else if("add"==this.state.billstate){var s=this.props.editTable.getNumberOfRows("transtypeManage");e=this.props.editTable.getValByKeyAndIndex("transtypeManage",s-1,"pk_billtypecode"),t=this.props.editTable.getValByKeyAndIndex("transtypeManage",s-1,"pk_billtypeid"),this.props.editTable.getValByKeyAndIndex("transtypeManage",s-1,"billtypename"),this.props.editTable.getValByKeyAndIndex("transtypeManage",s-1,"billtypename2"),this.props.editTable.getValByKeyAndIndex("transtypeManage",s-1,"billtypename3"),this.props.editTable.getValByKeyAndIndex("transtypeManage",s-1,"billtypename4"),this.props.editTable.getValByKeyAndIndex("transtypeManage",s-1,"billtypename5"),this.props.editTable.getValByKeyAndIndex("transtypeManage",s-1,"billtypename6")}}else(0,c.toast)({content:this.state.json["101613-000092"],color:"warning"});if(null!=e.value&&""!==e.value){var l=this.props.editTable.getChangedRows("transtypeManage");if(0==l.length)l=[n[0].data];else if(l.length>1)for(var i=0;i<l.length;i++)if("2"==l[i].status){l=[l[i]];break}var o=!1,r="",u={data:{areaType:"form",rows:l}},p=void 0;if(""!=this.state.extendurl){var d=this.getExtendAttributes("extendAttribute"),b=document.getElementById("extInfo"),h=b.getAttribute("confirmmodel");h&&"Y"==h&&(o=!0,r=b.getAttribute("confirmtips")),p={data:u,realBilltype:this.state.realBilltype,status:"edit"==this.state.billstate?"editSave":"addSave",extStatus:"exist",extendData:{extendData:d},islock:this.state.islock}}else p={data:u,realBilltype:this.state.realBilltype,status:"edit"==this.state.billstate?"editSave":"addSave",extStatus:"none",islock:this.state.islock};var y=this;o?(0,c.promptBox)({color:"warning",content:r,noFooter:!1,noCancelBtn:!1,beSureBtnClick:function(){y.onSaveMethod(y,p,e,t,a)},cancelBtnClick:function(){}}):y.onSaveMethod(y,p,e,t,a)}else(0,c.toast)({content:this.state.json["101613-000093"],color:"warning"})}},{key:"onSaveMethod",value:function(e,t,a,n,s){(0,c.ajax)({url:"/nccloud/riart/billtype/transtypeMngSave.do",method:"POST",data:t,success:function(t){var l=t.success,i=t.data;if(l&&"success"==i.result){e.props.button.setDisabled({add:!1,onPublish:!1,edit:!1,delete:!1,save:!0,cancel:!0}),e.state.addcount=0,e.props.editTable.setStatus(f,"browse");var o=null;if(i&&"success"===i.result&&"none"!=i.value){if(e.props.editTable.setStatus(f,"browse"),e.props.editTable.setTableData(f,i.value[f]),null!=(o=i.value[f])&&null!=o.rows&&o.rows.length>0)for(var r=0;r<o.rows.length;r++)if(a.value===o.rows[r].values.pk_billtypecode.value){n=o.rows[r].values.pk_billtypeid,e.props.editTable.focusRowByIndex(f,r),e.props.editTable.selectAllRows(f,!1),e.props.editTable.selectTableRows(f,r,!0),e.state.currLine=r,e.state.currrowid=o.rows[r].rowid,e.state.billvo=o.rows[r],e.state.billtypecode=o.rows[r].values.pk_billtypecode.value,e.state.billtypename=o.rows[r].values.billtypename.value;break}}else i&&"success"===i.result&&"none"===i.value&&e.props.editTable.setTableData(f,{rows:[]});if(i&&"success"!=i.result&&(0,c.toast)({content:i.exception,color:"warning"}),"edit"==e.state.billstate){if(""!=e.state.extendurl)document.getElementById("extInfo").setAttribute("extendStat","browse"),e.setBillId(s);e.setState({billstate:"browse"}),e.props.button.setButtonVisible(["add","onPublish","edit","delete","filter","config","refresh"],!0),e.props.button.setButtonVisible(["save","cancel"],!1),(0,c.toast)({color:"success"})}else{if(""!=e.state.extendurl){if(null!=o&&null!=o.rows&&o.rows.length>0)for(var u=0;u<o.rows.length;u++)if(a.value===o.rows[u].values.pk_billtypecode.value){n=o.rows[u].values.pk_billtypeid;break}document.getElementById("extInfo").setAttribute("extendStat","browse"),null!=n&&null!=n.value&&e.setBillId(n.value)}e.setState({billstate:"browse"}),(0,c.toast)({color:"success"}),e.props.button.setButtonVisible(["add","onPublish","edit","delete","filter","config","refresh"],!0),e.props.button.setButtonVisible(["save","cancel"],!1)}}l&&"danger"==i.result&&i.exception&&(0,c.toast)({content:i.exception,color:"danger"})},error:function(e){(0,c.toast)({content:e.message,color:"danger"})}})}},{key:"onRefresh",value:function(){var e=this;this.props.button.setButtonVisible(["add","onPublish","edit","delete","filter","config","refresh"],!0),this.props.button.setButtonVisible(["save","cancel"],!1);var t=this.state.realBilltype,a={realbilltype:t,islock:this.state.islock};""!=t?(this.setInit(),this.state.billtypecode=t,this.state.realBilltype=t,(0,c.ajax)({url:"/nccloud/riart/billtype/transtypeInfoQuery.do",data:a,async:!0,success:function(a){a.success;var n=a.data;n.isenabletranstypebcr?h("sessionStorage","transtypeMng-isenabletranstypebcr","has_billcoderule"):h("sessionStorage","transtypeMng-isenabletranstypebcr","nohas_billcoderule"),n&&"success"===n.result&&"none"!=n.value?(e.props.editTable.setStatus(f,"browse"),e.props.editTable.setTableData(f,n.value[f])):n&&"success"===n.result&&"none"===n.value&&e.props.editTable.setTableData(f,{rows:[]}),n&&"success"!=n.result&&(0,c.toast)({content:n.exception,color:"warning"}),""!=t&&e.getExtendUrl(e.state.billtypecode)},error:function(e){(0,c.toast)({content:e.message,color:"danger"})}})):(0,c.ajax)({url:"/nccloud/riart/billtype/transtypeMngQuery.do",type:"post",success:function(a){var n=a.success,s=a.data;n&&(e.props.button.setButtonVisible(["add","onPublish","edit","delete","filter","config","refresh"],!0),e.props.button.setButtonVisible(["save","cancel"],!1),e.props.syncTree.setSyncTreeData("tree1",s.rows),e.props.editTable.setTableData(f,{rows:[]}),""!=t&&e.getExtendUrl(e.state.billtypecode))}})}},{key:"setConfig",value:function(){var e=this.props.editTable.getCheckedRows(f);0!==e.length&&1==e.length?this.props.linkTo("/uap/dc/transtypeManage/rule/index.html",{pk_billtypeid:e[0].data.values.pk_billtypeid.value,realBilltype:e[0].data.values.parentbilltype.value,opennode:this.state.openNode,pagecode:"101613001"}):(0,c.toast)({content:this.state.json["101613-000024"],color:"warning"})}},{key:"onShow",value:function(){this.state.islock=!1;var e=this.state.realBilltype,t={realbilltype:e,islock:this.state.islock};if(""!=e){this.setInit(),this.state.billtypecode=e,this.setState({realBilltype:e});var a=this;(0,c.ajax)({url:"/nccloud/riart/billtype/transtypeInfoQuery.do",data:t,success:function(t){t.success;var n=t.data;if(n.isenabletranstypebcr)for(var s=a.props.meta.getMeta().transtypeManage,l=0;l<s.items.length;l++)"billcoderule"===s.items[l].attrcode&&(s.items[l].visible=!0);else for(var i=a.props.meta.getMeta().transtypeManage,o=0;o<i.items.length;o++)"billcoderule"===i.items[o].attrcode&&(i.items[o].visible=!1);n&&"success"===n.result&&"none"!=n.value?(a.props.editTable.setStatus(f,"browse"),a.props.editTable.setTableData(f,n.value[f])):n&&"success"===n.result&&"none"===n.value&&a.props.editTable.setTableData(f,{rows:[]}),n&&"success"!=n.result&&(0,c.toast)({content:n.exception,color:"warning"}),""!=e&&a.getExtendUrl(a.state.billtypecode)},error:function(e){(0,c.toast)({content:e.message,color:"danger"})}})}}},{key:"onHide",value:function(){this.state.islock=!0;var e=this.state.realBilltype,t={realbilltype:e,islock:this.state.islock};if(""!=e){this.setInit(),this.state.billtypecode=e,this.setState({realBilltype:e});var a=this;(0,c.ajax)({url:"/nccloud/riart/billtype/transtypeInfoQuery.do",data:t,success:function(t){t.success;var n=t.data;if(n.isenabletranstypebcr)for(var s=a.props.meta.getMeta().transtypeManage,l=0;l<s.items.length;l++)"billcoderule"===s.items[l].attrcode&&(s.items[l].visible=!0);else for(var i=a.props.meta.getMeta().transtypeManage,o=0;o<i.items.length;o++)"billcoderule"===i.items[o].attrcode&&(i.items[o].visible=!1);n&&"success"===n.result&&"none"!=n.value?(a.props.editTable.setStatus(f,"browse"),a.props.editTable.setTableData(f,n.value[f])):n&&"success"===n.result&&"none"===n.value&&a.props.editTable.setTableData(f,{rows:[]}),n&&"success"!=n.result&&(0,c.toast)({content:n.exception,color:"warning"}),""!=e&&a.getExtendUrl(a.state.billtypecode)},error:function(e){(0,c.toast)({content:e.message,color:"danger"})}})}}},{key:"onCancel",value:function(){var e=this;(0,c.promptBox)({color:"warning",title:this.state.json["101613-000122"],content:this.state.json["101613-000123"],noFooter:!1,noCancelBtn:!1,beSureBtnName:this.state.json["101613-000098"],cancelBtnName:this.state.json["101613-000099"],hasCloseBtn:!1,beSureBtnClick:function(){if(e.props.button.setDisabled({add:!1,onPublish:!1,edit:!1,delete:!1,save:!0,cancel:!0}),e.props.button.setButtonVisible(["add","onPublish","edit","delete","filter","config","refresh"],!0),e.props.button.setButtonVisible(["save","cancel"],!1),"add"===e.state.billstate)""!=e.state.extendurl&&(document.getElementById("extInfo").setAttribute("extendStat","browse"),e.state.billvo&&e.state.billvo.values.pk_billtypeid?e.setBillId(e.state.billvo.values.pk_billtypeid.value):e.setBillId(""),e.getExtendAttributes("extendAttribute"));else if("edit"===e.state.billstate){var t=e.props.editTable.getCheckedRows(f);if(""!=e.state.extendurl)document.getElementById("extInfo").setAttribute("extendStat","cancel"),e.setBillId(t[0].data.values.pk_billtypeid.value),e.getExtendAttributes("extendAttribute")}e.state.addcount=0,e.props.editTable.cancelEdit("transtypeManage"),e.props.editTable.focusRowByIndex(f,e.state.currLine),e.props.editTable.selectAllRows(f,!1),e.props.editTable.selectTableRows(f,e.state.currLine,!0),e.setState({billstate:"browse"})}})}},{key:"onModify",value:function(){var e=this,t=this.props.editTable.getCheckedRows(f);if(0!==t.length)if(1==t.length){this.props.button.setDisabled({add:!0,onPublish:!0,edit:!0,delete:!0,save:!1,cancel:!1}),this.props.button.setButtonVisible(["add","onPublish","edit","delete","filter","config","refresh"],!1),this.props.button.setButtonVisible(["save","cancel"],!0),this.props.meta.getMeta()[f].items.map((function(e){"billcoderule"==e.attrcode&&(e.queryCondition={nbcrcode:t[0].data.values.ncbrcode.value})}));var a=this.props.editTable.getAllRows(f);if(this.props.editTable.setStatus(f,"edit"),setTimeout((function(){for(var n=0;n<a.length;n++)a[n].rowid==t[0].data.rowid?(e.props.editTable.setEditableRowByRowId(f,t[0].data.rowid,!0),e.props.editTable.setEditableRowKeyByIndex(f,t[0].index,"pk_billtypecode",!1)):e.props.editTable.setEditableRowByRowId(f,a[n].rowid,!1)}),0),this.setState({billstate:"edit"}),""!=this.state.extendurl)document.getElementById("extInfo").setAttribute("extendStat","edit"),this.setBillId(t[0].data.values.pk_billtypeid.value),this.getExtendAttributes("extendAttribute")}else(0,c.toast)({content:this.state.json["101613-000024"],color:"warning"});else(0,c.toast)({content:this.state.json["101613-000024"],color:"warning"})}},{key:"onDelete",value:function(){var e,t=this,a=[];if((e=this.props.editTable.getCheckedRows(f)).length>0)for(var n=0,s=0;s<e.length;s++)3!=e[s].data.status&&(a[n]=e[s],n+=1);0!==a.length&&1==a.length?(0,c.promptBox)({color:"warning",title:this.state.json["101613-000121"],content:this.state.json["101613-000096"]+a[0].data.values.pk_billtypecode.value+this.state.json["101613-000097"],noFooter:!1,noCancelBtn:!1,beSureBtnName:this.state.json["101613-000098"],cancelBtnName:this.state.json["101613-000099"],hasCloseBtn:!1,beSureBtnClick:function(){var e=void 0,n=t;if(""!=t.state.extendurl){var s=t.getExtendAttributes("extendAttribute");e={billtypeid:a[0].data.values.pk_billtypeid.value,extStatus:"exit",extendData:{extendData:s},status:"confirm"}}else e={billtypeid:a[0].data.values.pk_billtypeid.value,extStatus:"none",status:"confirm"};(0,c.ajax)({url:"/nccloud/riart/billtype/transtypeMngDelete.do",type:"post",data:e,success:function(s){var l=s.success,i=s.data;if(l&&"continue"==i.result&&(0,c.promptBox)({color:"warning",title:n.state.json["101613-000121"],content:n.state.json["101613-000100"]+a[0].data.values.pk_billtypecode.value+t.state.json["101613-000101"],noFooter:!1,noCancelBtn:!1,beSureBtnName:n.state.json["101613-000098"],cancelBtnName:n.state.json["101613-000099"],hasCloseBtn:!1,beSureBtnClick:function(){e.status="delete",(0,c.ajax)({url:"/nccloud/riart/billtype/transtypeMngDelete.do",type:"post",data:e,success:function(e){var t=e.success,s=e.data;if(t&&"success"==s.result){if(n.props.editTable.deleteTableRowsByRowId(f,a[0].data.rowid),""!=n.state.extendurl)document.getElementById("extInfo").setAttribute("extendStat","browse"),n.setBillId("");n.setState({billstate:"browse"}),(0,c.toast)({color:"success"})}if(t&&"danger"==s.result){var l="";null!=s.message&&(l=s.message),null!=s.exception&&(l+=s.exception),(0,c.toast)({content:l,color:"danger"})}},error:function(e){(0,c.toast)({content:e.message,color:"danger"})}})},closeByClickBackDrop:!0}),l&&"danger"==i.result){var o="";null!=i.message&&(o=i.message),null!=i.exception&&(o+=i.exception),(0,c.toast)({content:o,color:"danger"})}if(l&&"success"==i.result){if(n.props.editTable.deleteTableRowsByRowId(f,a[0].data.rowid),""!=n.state.extendurl)document.getElementById("extInfo").setAttribute("extendStat","browse"),n.setBillId("");n.setState({billstate:"browse"}),(0,c.toast)({color:"success"})}},error:function(e){(0,c.toast)({content:e.message,color:"danger"})}})},closeByClickBackDrop:!0}):(0,c.toast)({content:this.state.json["101613-000094"],color:"warning"})}},{key:"onExt",value:function(e){}},{key:"handleIframe",value:function(){document.getElementById("son")}},{key:"headButtonClick",value:function(e,t,a){switch(t){case"add":this.onAdd();break;case"onPublish":this.onPublish();break;case"edit":this.onModify();break;case"delete":this.onDelete();break;case"save":this.onSave();break;case"cancel":this.onCancel();break;case"refresh":this.onRefresh();break;case"config":this.setConfig();break;case"show":this.onShow(),e.button.setButtonVisible("show",!1),e.button.setButtonVisible("hide",!0);break;case"hide":this.onHide(),e.button.setButtonVisible("show",!0),e.button.setButtonVisible("hide",!1)}}},{key:"render",value:function(){var e=this.props,t=e.table,a=e.button,n=e.form,s=e.editTable,l=e.syncTree,i=e.modal,r=e.BillHeadInfo,c=l.createSyncTree,d=(t.createSimpleTable,a.createButton,s.createEditTable),h=(n.createForm,i.createModal),y=r.createBillHeadInfo,m=this.props.DragWidthCom,v=o.default.createElement("div",{className:"tree-area"},c({treeId:"tree1",needSearch:!0,needEdit:!1,onSelectEve:this.onSelectEve.bind(this),selectedForInit:!1,searchType:"filtration"})),g=o.default.createElement("div",{className:"table-area"},d(f,{onAfterEvent:u.afterEvent.bind(this),showIndex:!0,onRowClick:this.onRowClick.bind(this),onSelectedAll:this.onSelectedAllFn.bind(this),onSelected:this.onSelectedFn.bind(this),adaptionHeight:this.state.istoBottom}),o.default.createElement("div",{id:"transtypebusi"}));return o.default.createElement("div",{className:"nc-bill-tree-table"},h("modal"),o.default.createElement(b,{areaCode:b.config.HEADER},o.default.createElement("div",{className:"header"},y({title:this.state.json["101613-000103"],initShowBackBtn:!1}),o.default.createElement("div",{className:"btn-group"},this.props.button.createButtonApp({area:"btn_head",buttonLimit:4,onButtonClick:this.headButtonClick.bind(this),popContainer:document.querySelector(".btn-group")})))),o.default.createElement("div",{className:"tree-table"},o.default.createElement(m,{leftDom:v,rightDom:g,defLeftWid:"20%"})),h("publishApp",{title:this.state.json["101613-000054"],rightBtnName:this.state.json["101613-000099"],leftBtnName:this.state.json["101613-000098"],userControl:!0,content:o.default.createElement(p.default,{publishOK:this.publishOK.bind(this),billtypecode:this.state.realBilltype,billtypename:this.state.billtypename}),beSureBtnClick:this.publishOK.bind(this),cancelBtnClick:this.cancelBtnClick.bind(this)}))}}]),t}(i.Component),s=function(){var e=this;this.getData=function(){var t=e;(0,c.ajax)({url:"/nccloud/riart/billtype/transtypeMngQuery.do",type:"post",async:!0,success:function(e){var a=e.success,n=e.data;t.props.button.setButtonVisible(["add","onPublish","edit","delete","filter","config","refresh"],!0),t.props.button.setButtonVisible(["save","cancel"],!1),a&&(t.props.syncTree.setSyncTreeData("tree1",n.rows),""!=t.state.openNode?(t.props.syncTree.openNodeByPk("tree1",t.state.openNode),t.props.syncTree.setNodeSelected("tree1",t.state.openNode)):n.rows.length>0&&(t.props.syncTree.openNodeByPk("tree1",n.rows[0].refpk),t.props.syncTree.setNodeSelected("tree1",n.rows[0].refpk)))}})},this.onSelectEve=function(t,a,n){var s=a.values.iVOType;if(e.state.currLine=-1,2==s)return e.setState({realBilltype:"",openNode:a.key}),e.props.syncTree.openNodeByPk("tree1",a.refpk),e.props.editTable.setTableData(f,{rows:[]}),void e.setInit();if(1==s){e.setInit(),e.state.billtypecode=a.values.objVO.pk_billtypecode,e.setState({realBilltype:a.refcode,openNode:a.key,ncbrcode:a.values.objVO.ncbrcode});var l=e,i={realbilltype:a.refcode,islock:e.state.islock};(0,c.ajax)({url:"/nccloud/riart/billtype/transtypeInfoQuery.do",data:i,success:function(e){e.success;var t=e.data;if(t.isenabletranstypebcr)for(var a=l.props.meta.getMeta().transtypeManage,n=0;n<a.items.length;n++)"billcoderule"===a.items[n].attrcode&&(a.items[n].visible=!0);else for(var s=l.props.meta.getMeta().transtypeManage,i=0;i<s.items.length;i++)"billcoderule"===s.items[i].attrcode&&(s.items[i].visible=!1);t&&"success"===t.result&&"none"!=t.value?(l.props.editTable.setStatus(f,"browse"),l.props.editTable.setTableData(f,t.value[f]),l.getExtendUrl(l.state.billtypecode)):t&&"success"===t.result&&"none"===t.value&&(l.props.editTable.setTableData(f,{rows:[]}),l.getExtendUrl(l.state.billtypecode)),t&&"success"!=t.result&&(0,c.toast)({content:t.exception,color:"warning"})},error:function(e){(0,c.toast)({content:e.message,color:"danger"})}})}l.props.button.setButtonVisible(["add","onPublish","edit","delete","filter","config","refresh"],!0),l.props.button.setButtonVisible(["save","cancel"],!1)},this.selectedChangeFn=function(e,t,a,n){},this.loadTreeData=function(e,t){},this.queryTreeData=function(t){var a=e;(0,c.ajax)({loading:!0,url:"/ncdemo-web/bd/basedoc/regiontree.do",success:function(e){e.success?a.setTreeData("tree1",e.data.rows):(0,c.toast)({content:e.message,color:"danger"})},error:function(e){(0,c.toast)({content:e.message,color:"danger"})}})},this.showHide=function(){e.setState({showHide:!e.state.showHide})},this.onSelectedChange=function(){},this.onRef=function(t){e.child=t},this.setBillId=function(t){"function"==typeof t?e.setBillIdFun=t:e.setBillIdFun&&e.setBillIdFun(t)},this.onSelectedAllFn=function(t,a,n){n?(t.editTable.selectAllRows(a,!1),(0,c.toast)({content:e.state.json["101613-000025"],color:"warning"})):t.editTable.selectAllRows(a,!1)},this.onSelectedFn=function(t,a,n,s){if(e.state.currLine<0)(0,c.toast)({content:e.state.json["101613-000102"],color:"warning"});else if("edit"!=e.state.billstate&&"add"!=e.state.billstate){var l=t.editTable.getCheckedRows("transtypeManage");if(l.length>1)for(var i=0;i<l.length;i++)l[i].index!=s&&t.editTable.selectTableRows("transtypeManage",l[i].index,!1);e.state.currLine=s,e.state.currrowid=n.rowid,e.state.billvo=n,e.state.billtypecode=n.values.pk_billtypecode.value,e.state.billtypename=n.values.billtypename.value,e.state.realBilltype=n.values.parentbilltype.value}else s!=e.state.currLine?t.editTable.selectTableRows("transtypeManage",s,!1):t.editTable.selectTableRows("transtypeManage",s,!0)},this.onRowClick=function(t,a,n,s){"edit"!=e.state.billstate&&"add"!=e.state.billstate&&(e.props.editTable.selectAllRows(a,!1),e.props.editTable.selectTableRows(a,s,!0),e.state.currLine=s,e.state.currrowid=n.rowid,e.state.billvo=n,e.state.billtypecode=n.values.pk_billtypecode.value,e.state.billtypename=n.values.billtypename.value,"browse"==e.state.billstate&&(e.state.billtypeid=n.values.pk_billtypeid.value,""!=n.values.pk_billtypecode.value&&""!=e.state.extendurl&&(document.getElementById("extInfo").setAttribute("extendStat","browse"),e.setBillId(n.values.pk_billtypeid.value),e.getExtendAttributes("extendAttribute"))))},this.getData2=function(t){"function"==typeof t?e.getData2=t:e.getData2(t)},this.getExtendAttributes=function(t){if("function"==typeof t)e.getDataFun=t;else if(e.getDataFun)return e.getDataFun(t)},this.getBtn=function(){var t=e;(0,c.ajax)({url:"/nccloud/platform/appregister/queryallbtns.do",data:{appcode:"101613",pagecode:"101613001"},success:function(e){t.props.button.setButtons(e.data),t.props.button.setButtonVisible("hide",!1),t.props.button.setButtonVisible("save",!1),t.props.button.setButtonVisible("cancel",!1),t.props.button.setDisabled({add:!1,onPublish:!1,edit:!1,delete:!1,save:!0,cancel:!0})}})}},n);y=(0,c.createPage)({initTemplate:u.initTemplate})(y),r.default.render(o.default.createElement(y,null),document.querySelector("#app"))},569:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clickSearchBtn=t.headerButtonClick=t.buttonClick=t.beforeEvent=t.afterEvent=t.initTemplate=t.pageInfoClick=t.searchBtnClick=void 0;var n=a(570),s=a(578);t.searchBtnClick=n.searchBtnClick,t.pageInfoClick=n.pageInfoClick,t.initTemplate=s.initTemplate,t.afterEvent=n.afterEvent,t.beforeEvent=n.beforeEvent,t.buttonClick=n.buttonClick,t.headerButtonClick=n.headerButtonClick,t.clickSearchBtn=n.clickSearchBtn},570:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clickSearchBtn=t.headerButtonClick=t.buttonClick=t.beforeEvent=t.afterEvent=t.pageInfoClick=t.searchBtnClick=void 0;var n=u(a(571)),s=u(a(572)),l=u(a(573)),i=u(a(574)),o=u(a(575)),r=u(a(576)),c=u(a(577));function u(e){return e&&e.__esModule?e:{default:e}}t.searchBtnClick=n.default,t.pageInfoClick=s.default,t.afterEvent=l.default,t.beforeEvent=i.default,t.buttonClick=o.default,t.headerButtonClick=r.default,t.clickSearchBtn=c.default},571:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){this.props.table.getTablePageInfo("financeListTable").size};var n=a(1);n.base.NCButton,n.base.NCMessage},572:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.table.getTablePageInfo("purchaseOrderListTable"),a=e.search.getAllSearchData("purchaseOrderSearchArea");a.page=t.page,a.size=t.size,a.sort={direction:"desc"};t.page,t.size};a(1)},573:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,n,s){}},574:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,n,s,l){if(null!=a&&null!=a.attrcode){if("billcoderule"==a.attrcode)e.meta.getMeta()[t].items.map((function(e){"billcoderule"==e.attrcode&&(e.queryCondition={nbcrcode:l.values.ncbrcode.value})}))}}},575:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){switch(t){case"addSubTable":e.editTable.addRow("billtypeSubTableAdd");break;case"addDownBill":e.editTable.addRow("downstreamBillAdd");break;case"addSubTableEdit":e.editTable.addRow("billtypeSubTable");break;case"addDownBillEdit":e.editTable.addRow("downstreamBill");break;case"delSubTable":e.editTable.delRow("billtypeSubTableAdd",e.editTable.index);break;case"insertBackList":break;case"save":e.editTable.save("purchaseOrderCardTable",(function(e,t){(0,n.ajax)({url:"/nccloud/reva/pobdoc/save.do",mode:"normal",method:"POST",data:e,success:function(e){},error:function(e){}})}));break;case"edit":e.editTable.edit("purchaseOrderCardTable",(function(){}));break;case"cancel":e.editTable.cancelEdit("purchaseOrderCardTable",(function(){}));break;case"del":e.editTable.delRow("purchaseOrderCardTable",0)}};var n=a(1)},576:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){switch(t){case"add":e.onChangeShow();break;case"save":e.form.getAllFormValue("head");break;case"edit":e.form.setFormStatus("head","edit"),e.form.setFormStatus("purchaseOrderCardForm2","edit"),e.editTable.edit("purchaseOrderCardTable");break;case"cancel":e.modal.show("modal",{title:this.state.json["101613-000002"],content:this.state.json["101613-000003"],beSureBtnClick:function(){e.form.cancel("head"),e.form.cancel("purchaseOrderCardForm2"),e.editTable.cancelEdit("purchaseOrderCardTable")}});break;case"del":e.modal.show("modal",{title:this.state.json["101613-000004"],content:this.state.json["101613-000005"],beSureBtnClick:function(){}})}}},577:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){this.props.search.getAllSearchData("searchArea")};a(1)},578:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initTemplate=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(a(579));t.initTemplate=n.default},579:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.MultiInit.getMultiLang({moduleId:"1016-101613",domainName:"uap",callback:function(t,a,l){a&&e.createUIDom({pagecode:"101613001",appcode:"101613"},(function(a){if(a&&a.template){var l=a.template,i={itemtype:"refer",label:t["101613-000085"],queryOperateType:"like",refcode:"/uap/refer/riart/billcodeRule/index.js",attrcode:"billcoderule",visible:!1};l.transtypeManage.items.push(i);var o=s("sessionStorage","transtypeMng-isenabletranstypebcr");null!=o&&"has_billcoderule"===o?l.transtypeManage.items.map((function(e){"isaccount"==e.attrcode&&(e.label=t["101613-000076"]),"billcoderule"==e.attrcode&&(e.visible=!0)})):l.transtypeManage.items.map((function(e){"isaccount"==e.attrcode&&(e.label=t["101613-000076"]),"billcoderule"==e.attrcode&&(e.visible=!1)}));var r={label:t["101613-000021"],attrcode:"opr",itemtype:"customer",visible:!0,render:function(a,s,l){var i;return i=["queryapp"],e.button.createOprationButton(i,{area:"btn_list",buttonLimit:3,onButtonClick:function(e,a){return function(e,t,a,s,l,i){var o=e.editTable.getStatus("transtypeManage");o&&"browse"===o?e.linkTo("/uap/dc/transtypeManage/publisedapp/index.html",{pk_billtypecode:s.values.pk_billtypecode.value,realBilltype:s.values.parentbilltype.value,pagecode:"101613001"}):(0,n.toast)({content:i["101613-000125"],color:"warning"})}(e,0,0,s,0,t)}})}};l.transtypeManage.items.push(r),e.meta.setMeta(l)}}))}})};var n=a(1),s=(n.base.NCPopconfirm,n.base.NCIcon,n.viewModel.setGlobalStorage,n.viewModel.getGlobalStorage);n.viewModel.removeGlobalStorage},580:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(2),l=o(s),i=(o(a(9)),a(1));function o(e){return e&&e.__esModule?e:{default:e}}a(581);i.base.NCInput,i.high.Refer;var r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onSelectEve=function(e,t,n){if(null!=e)if(6==e.length){var s=a.props.syncTree.getSyncTreeValue("tree1",e);if(a.props.form.setFormItemsDisabled("publishApp",{menuCode:!1}),a.props.form.setFormItemsDisabled("publishApp",{menuName:!1}),a.props.form.setFormItemsDisabled("publishApp",{appId:!1}),a.props.form.setFormItemsDisabled("publishApp",{appName:!1}),null!=s.children&&s.children.length>0){for(var l=s.children[s.children.length-1].refcode,o=0;o<t.children.length&&(l=a.addindex(l),a.isexist(t,l));o++);a.props.form.setFormItemsValue(a.formId,{menuCode:{value:l,dispaly:l}});t.refname.substring(t.refcode.length+2);l.substring(6),a.props.form.setFormItemsValue(a.formId,{menuName:{value:a.state.billtypename,dispaly:a.state.billtypename}}),a.props.form.setFormItemsValue(a.formId,{appName:{value:a.state.billtypename,dispaly:a.state.billtypename}}),a.props.form.setFormItemsValue(a.formId,{appId:{display:a.state.defaultappName,value:a.state.defaultappPk}}),a.props.form.setFormItemsValue(a.formId,{sence:{display:1,value:1}}),a.props.form.setFormItemsValue(a.formId,{pagecode:{display:a.state.defaultappPageCode,value:a.state.defaultappPageCode}})}else{var r=e;r+="01";t.refname.substring(t.refcode.length+2);r.substring(6),a.props.form.setFormItemsValue(a.formId,{menuCode:{value:r,dispaly:r}}),a.props.form.setFormItemsValue(a.formId,{menuName:{value:a.state.billtypename,dispaly:a.state.billtypename}}),a.props.form.setFormItemsValue(a.formId,{appName:{value:a.state.billtypename,dispaly:a.state.billtypename}}),a.props.form.setFormItemsValue(a.formId,{appId:{value:a.state.defaultappPk,dispaly:a.state.defaultappName}}),a.props.form.setFormItemsValue(a.formId,{sence:{display:1,value:1}}),a.props.form.setFormItemsValue(a.formId,{pagecode:{display:a.state.defaultappPageCode,value:a.state.defaultappPageCode}})}}else(0,i.toast)({content:json["101613-000056"],color:"warning"})},a.addOne=function(e){var t=e.substring(0,4),a=e.substring(4,e.length);return 0==a.substring(e.length-1,e.length)?(a="1"+a,a=Number(a)+1):a=Number(a)+1,e=t+(a=(a+"").substring(1,a.length))},a.state={appcode:"",billtypename:e.billtypename,defaultappPk:"",defaultappName:"",defaultappCode:"",defaultappPageCode:"",json:{},inlt:null},a.formId="publishApp",a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"componentWillMount",value:function(){var e=this;this.props.MultiInit.getMultiLang({moduleId:"1016-101613",domainName:"uap",callback:function(t,a,n){a&&(e.setState({json:t,inlt:n}),e.setMetaData(t))}})}},{key:"setMetaData",value:function(e){var t=this,a={publishApp:{items:[{itemtype:"input",maxlength:"40",visible:!0,initialvalue:{display:"",value:""},label:e["101613-000048"],disabled:!0,attrcode:"menuCode"},{itemtype:"input",maxlength:"40",visible:!0,label:e["101613-000049"],disabled:!0,attrcode:"menuName"},{itemtype:"refer",maxlength:"40",visible:!0,disabled:!0,initialvalue:{display:e["101613-000050"],value:""},refcode:"/uap/refer/riart/publishAppRefer/index.js",label:e["101613-000050"],attrcode:"appId"},{itemtype:"input",maxlength:"40",label:e["101613-000051"],visible:!0,disabled:!0,attrcode:"appName"},{label:e["101613-000052"],attrcode:"sence",itemtype:"label",disabled:!1,visible:!1},{label:e["101613-000053"],attrcode:"pagecode",itemtype:"label",disabled:!1,visible:!1}],moduletype:"form",pagination:!0,status:"edit",code:"publishApp",name:e["101613-000054"]}};a.publishApp.items.map((function(e){"appId"==e.attrcode&&(e.queryCondition={billtype:t.props.billtypecode})})),this.props.meta.setMeta(a)}},{key:"afterEvent",value:function(e,t,a,n,s,l){if("menuCode"==a&&n.value.length<6&&(e.form.setFormItemsValue("publishApp",{menuCode:{dispaly:"",value:""}}),(0,i.toast)({content:json["101613-000055"],color:"warning"})),"appId"==a){var o=e.form.getAllFormValue(this.formId),r={value:this.state.billtypename,dispaly:this.state.billtypename};o.rows[0].values.appName=r,null!=l&&null!=l.values&&null!=l.values.sence&&null!=l.values.sence.value&&(o.rows[0].values.sence={value:l.values.sence.value,dispaly:l.values.sence.value}),null!=l.values&&null!=l.values.pagecode&&null!=l.values.pagecode.value&&(o.rows[0].values.pagecode={value:l.values.pagecode.value,dispaly:l.values.pagecode.value});o.rows[0].values.menuCode.value;this.state.appcode=l.refcode,e.form.setAllFormValue({publishApp:o}),e.form.setFormItemsDisabled("publishApp",{appName:!1})}}},{key:"componentDidMount",value:function(){this.getData(),this.props.publishOK(this.props.form)}},{key:"queryCondition",value:function(){}},{key:"publishOK",value:function(){return obj}},{key:"getAllData",value:function(){return this.props.form.getAllFormValue(this.formId)}},{key:"isexist",value:function(e,t){for(var a=0;a<e.children.length;a++)if(t===e.children[a].refcode)return!0;return!1}},{key:"addindex",value:function(e){for(var t=e,a=e.substring(0,6),n=e.split(""),s=0,l=n.length-1;l>=0;l--)if(isNaN(n[l])){s=l+1;break}for(var i=s;i<n.length&&"0"===n[i];i++)s+=1;var o=parseInt(e.substring(s)),r=o+1;if((o+"").length!=(r+"").length&&"0"==n[s-1]&&s--,a!=(e=e.substring(0,s)+r).substring(0,6)){for(var c=t.substring(6),u="",p=0;p<c.length;p++)0==p?u="1":u+="0";e=a+(u+="00")}return e}},{key:"getData",value:function(){var e=this;(0,i.ajax)({url:"/nccloud/riart/billtype/menuItemTree.do",type:"post",success:function(t){var a=t.success,n=t.data;a&&n&&e.props.syncTree.setSyncTreeData("tree1",n.rows)}}),(0,i.ajax)({url:"/nccloud/riart/billtype/queryDefaultSceneApp.do",type:"post",data:{billtype:e.props.billtypecode},success:function(t){var a=t.success,n=t.data;a&&n&&"success"===n.result&&e.setState({defaultappPk:n.defaultappPk,defaultappCode:n.defaultappCode,defaultappName:n.defaultappName,defaultappPageCode:n.defaultappPageCode})}})}},{key:"render",value:function(){var e=this.props,t=e.table,a=e.button,n=(e.search,e.form),s=e.editTable,i=e.syncTree,o=(e.modal,i.createSyncTree),r=(t.createSimpleTable,a.createButton,s.createEditTable,n.createForm);return l.default.createElement("div",{style:{height:"450px"}},l.default.createElement("div",{className:"tree1"},o({treeId:"tree1",needSearch:!1,needEdit:!1,onSelectEve:this.onSelectEve.bind(this),selectedForInit:!1,showLine:!0,defaultExpandAll:!1})),r(this.formId,{onAfterEvent:this.afterEvent.bind(this)}))}}]),t}(s.Component);r=(0,i.createPage)({})(r),t.default=r},581:function(e,t,a){var n=a(582);"string"==typeof n&&(n=[[e.i,n,""]]);var s={transform:void 0};a(4)(n,s);n.locals&&(e.exports=n.locals)},582:function(e,t,a){(e.exports=a(3)(!1)).push([e.i,".tree1 {\n  width: 100%;\n  height: 300px;\n  padding: 20px;\n  overflow: auto;\n}\n.tree1 .synctree-area {\n  width: 100%;\n}\n",""])},583:function(e,t,a){var n=a(584);"string"==typeof n&&(n=[[e.i,n,""]]);var s={transform:void 0};a(4)(n,s);n.locals&&(e.exports=n.locals)},584:function(e,t,a){(e.exports=a(3)(!1)).push([e.i,'#transtypebusi .scm-transtype-wrap {\n  border-top: 1px solid #d0d0d0;\n  padding: 8px 76px 16px 40px;\n}\n#transtypebusi .scm-transtype-wrap .list-item {\n  height: 32px;\n  min-width: 280px;\n  white-space: nowrap;\n  display: -webkit-inline-box;\n  display: -ms-inline-flexbox;\n  display: inline-flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  margin-right: 10px;\n}\n#transtypebusi .scm-transtype-wrap .list-item > label:not(.u-checkbox) {\n  min-width: 150px;\n  max-width: 150px;\n  display: inline-block;\n  white-space: pre-wrap;\n  text-align: right;\n  color: #555;\n}\n#transtypebusi .scm-transtype-wrap .list-item .colon {\n  margin-right: 10px;\n}\n#transtypebusi .scm-transtype-wrap .list-item .nc-select.u-select {\n  width: 120px;\n}\n#transtypebusi .scm-potrantype-wrap .left,\n#transtypebusi .scm-potrantype-wrap .right {\n  display: inline-block;\n  padding-bottom: 10px;\n}\n#transtypebusi .scm-potrantype-wrap .left.left,\n#transtypebusi .scm-potrantype-wrap .right.left {\n  width: 400px;\n  padding-right: 10px;\n}\n#transtypebusi .scm-potrantype-wrap .left.left .checkbox-item,\n#transtypebusi .scm-potrantype-wrap .right.left .checkbox-item {\n  width: 400px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n#transtypebusi .scm-potrantype-wrap .left.left .checkbox-item .u-checkbox-label,\n#transtypebusi .scm-potrantype-wrap .right.left .checkbox-item .u-checkbox-label {\n  white-space: nowrap;\n}\n#transtypebusi .scm-potrantype-wrap .left.right,\n#transtypebusi .scm-potrantype-wrap .right.right {\n  padding-left: 40px;\n  border-left: 1px solid #d9d9d9;\n}\n#transtypebusi .scm-potrantype-wrap .left.right h3,\n#transtypebusi .scm-potrantype-wrap .right.right h3 {\n  margin: 10px auto 10px -20px;\n}\n#transtypebusi .scm-potrantype-wrap .left.right h3::before,\n#transtypebusi .scm-potrantype-wrap .right.right h3::before {\n  content: "";\n  display: inline-block;\n  width: 4px;\n  height: 12px;\n  margin-right: 6px;\n  background: #e14c46;\n  border-radius: 1px;\n  vertical-align: bottom;\n}\n#transtypebusi .scm-potrantype-wrap .left.right .u-checkbox,\n#transtypebusi .scm-potrantype-wrap .right.right .u-checkbox {\n  margin-left: 0;\n}\n#transtypebusi .scm-potrantype-wrap .left.right .list-item,\n#transtypebusi .scm-potrantype-wrap .right.right .list-item {\n  display: -webkit-box;\n}\n#transtypebusi .scm-potrantype-wrap .left.right .list-item > label,\n#transtypebusi .scm-potrantype-wrap .right.right .list-item > label {\n  width: 120px;\n}\n#transtypebusi .scm-potrantype-wrap .list-item {\n  height: 32px;\n  white-space: nowrap;\n  display: -webkit-inline-box;\n  display: -ms-inline-flexbox;\n  display: inline-flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n#transtypebusi .scm-potrantype-wrap .list-item > label {\n  min-width: 120px;\n  max-width: 120px;\n  margin-right: 10px;\n  display: inline-block;\n  white-space: pre-wrap;\n}\n#transtypebusi .scm-potrantype-wrap .list-item.select-item label {\n  text-align: right;\n}\n#transtypebusi .scm-potrantype-wrap .list-item.select-item .nc-select.u-select {\n  width: 220px;\n}\n#transtypebusi .scm-potrantype-wrap .list-item.select-item,\n#transtypebusi .scm-potrantype-wrap .list-item.checkbox-item {\n  margin-right: 1%;\n}\n#transtypebusi .scm-potrantype-wrap .list-item.select-item .u-checkbox-label,\n#transtypebusi .scm-potrantype-wrap .list-item.checkbox-item .u-checkbox-label {\n  white-space: nowrap;\n}\n#transtypebusi .scm-potrantype-wrap .list-item .u-checkbox {\n  margin-left: 130px;\n}\n#transtypebusi .scm-potrantype-wrap .list-item .list-item {\n  display: -webkit-inline-box;\n  display: -ms-inline-flexbox;\n  display: inline-flex;\n}\n',""])},585:function(e,t,a){var n=a(586);"string"==typeof n&&(n=[[e.i,n,""]]);var s={transform:void 0};a(4)(n,s);n.locals&&(e.exports=n.locals)},586:function(e,t,a){(e.exports=a(3)(!1)).push([e.i,"",""])},9:function(e,t){e.exports=a}})}));
//# sourceMappingURL=index.6fa6e7cf.js.map