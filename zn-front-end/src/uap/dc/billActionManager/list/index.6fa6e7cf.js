/*! @ncctag {"date":"2020-5-11 23:34:54"} */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nc-lightapp-front"),require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["nc-lightapp-front","react","react-dom"],t):"object"==typeof exports?exports["uap/dc/billActionManager/list/index"]=t(require("nc-lightapp-front"),require("react"),require("react-dom")):e["uap/dc/billActionManager/list/index"]=t(e["nc-lightapp-front"],e.React,e.ReactDOM)}(window,(function(e,t,n){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="../../../../",n(n.s=282)}({1:function(t,n){t.exports=e},11:function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,o=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var r,a=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(a)?e:(r=0===a.indexOf("//")?a:0===a.indexOf("/")?n+a:o+a.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")}))}},2:function(e,n){e.exports=t},282:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(2),a=c(r),i=(c(n(9)),n(1)),l=n(283);function c(e){return e&&e.__esModule?e:{default:e}}n(288);i.base.NCButton,i.base.NCFromControl,i.base.NCBackBtn,i.base.NCIcon;var s=i.base.NCDiv,u="13050207list",p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getTreeCacheData=function(){var e=n.props.getUrlParam("pk_billtypeid"),t=n,o=localStorage.getItem("data.dataVO.rows");if(t.props.syncTree.setSyncTreeData("tree1",JSON.parse(o)),e&&"sys"!=e){var r=t.props.syncTree.getSyncTreeValue("tree1",e);null!=r&&null!=r.pid&&(t.props.syncTree.openNodeByPk("tree1",r.pid),t.props.syncTree.openNodeByPk("tree1",r.treeId),t.props.syncTree.setNodeSelected("tree1",e))}},n.getTreeData=function(){console.log("getData");var e=n.props.getUrlParam("pk_billtypeid"),t=n;(0,i.ajax)({url:"/nccloud/riart/billActionManager/billActMngerQueryTree.do",type:"post",async:!1,success:function(n){var o=n.success,r=n.data;if(o&&r){localStorage.setItem("data.dataVO.rows",JSON.stringify(r.dataVO.rows));var a=localStorage.getItem("data.dataVO.rows");if(t.props.syncTree.setSyncTreeData("tree1",JSON.parse(a)),e&&"sys"!=e){var i=t.props.syncTree.getSyncTreeValue("tree1",e);null!=i&&null!=i.pid&&(t.props.syncTree.openNodeByPk("tree1",i.pid),t.props.syncTree.openNodeByPk("tree1",i.treeId),t.props.syncTree.setNodeSelected("tree1",e))}}},error:function(e){(0,i.toast)({content:t.state.json["13050207-000001"],color:"danger"})}})},n.onSelectEve=function(e,t,o){if(console.log("onSelectEve"),"root"!==t.pid){n.setState({pk_billtype:t.refcode,pk_billtypecode:t.refcode,pk_billtypeid:t.refpk});var r={billOrTranstype:t.refcode,billpk:t.refpk};n.onInitData(null,!0,r)}else n.props.table.setAllTableData(u,{rows:[]})},n.onRowClick=function(e,t,n,o){},n.onRowDoubleClick=function(e,t,n,o){},n.state={hasPackage:!1,packageId:"",pk_billtype:"",pk_billtypeid:"",openNode:null,appcode:"",appname:"",target:null,json:{},isOrgType:"N",cur_pk_org:{},pk_org:"",inlt:null},n.packageId="",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentWillMount",value:function(){var e=this;this.props.MultiInit.getMultiLang({moduleId:"1022-13050207",domainName:"uap",callback:function(t,n,o){n?e.setState({json:t,inlt:o}):console.log("未加载到多语资源")}})}},{key:"componentDidMount",value:function(){var e=this.props.getUrlParam("pk_billtypeid");e&&"root"!=e?(this.getTreeCacheData(),this.initTable(e)):this.getTreeData()}},{key:"onInitData",value:function(e,t,n){if(n&&n!={}){var o=this;(0,i.ajax)({url:"/nccloud/riart/billActionManager/onChangeTreeEvent.do",type:"post",async:!1,data:n,success:function(e){e.success;var t=e.data;if(t&&t.success){var n=t.data[u];o.props.table.setAllTableData(u,n)}else o.props.table.setAllTableData(u,{rows:[]})},error:function(e){(0,i.toast)({content:o.state.json["13050207-000000"],color:"danger"})}})}}},{key:"initTable",value:function(e){var t={billpk:e},n=this,o=n.props.getUrlParam("pk_billtypecode");this.state={pk_billtypeid:e,pk_billtypecode:o},n.setState(n.state),(0,i.ajax)({url:"/nccloud/riart/billActionManager/onChangeTreeEvent.do",type:"post",async:!1,data:t,success:function(e){e.success;var t=e.data;if(t&&t.success){var o=t.data[u];n.props.table.setAllTableData(u,o)}else n.props.table.setAllTableData(u,{rows:[]})},error:function(e){(0,i.toast)({content:n.state.json["13050207-000000"],color:"danger"})}})}},{key:"onSearchAfterEvent",value:function(e,t){}},{key:"render",value:function(){var e=this.props,t=e.table,n=e.button,o=e.search,r=e.syncTree,i=e.modal,c=this.props.BillHeadInfo.createBillHeadInfo,p=r.createSyncTree,f=t.createSimpleTable,d=(n.createButton,o.NCCreateSearch,i.createModal,this.props.DragWidthCom),b=a.default.createElement("div",{className:"tree-area"},p({treeId:"tree1",needSearch:!0,needEdit:!1,onSelectEve:this.onSelectEve.bind(this),selectedForInit:!1,searchType:"filtration"})),y=a.default.createElement("div",{className:"table-area billtype-manager-container"},f(u,{showIndex:!0,adaptionHeight:!0,onRowClick:this.onRowClick.bind(this),onRowDoubleClick:this.onRowDoubleClick.bind(this)}));return a.default.createElement("div",{className:"nc-bill-tree-card"},a.default.createElement("div",{className:"header"},a.default.createElement(s,{areaCode:s.config.HEADER},a.default.createElement("div",{className:"title"},c({title:""+this.state.json["13050207-000002"],initShowBackBtn:!1}))),a.default.createElement("div",{className:" btn-group"},this.props.button.createButtonApp({area:"bt_header_add",buttonLimit:1,onButtonClick:l.onClickButton.bind(this),popContainer:document.querySelector(".btn-group")}))),a.default.createElement("div",{className:"tree-table",fieldid:"treetable"},a.default.createElement(d,{leftDom:b,rightDom:y,defLeftWid:"20%"})))}}]),t}(r.Component);p=(0,i.createPage)({initTemplate:l.initTemplate})(p),t.default=p},283:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onClickButton=t.initTemplate=void 0;var o=n(284),r=n(286);t.initTemplate=r.initTemplate,t.onClickButton=o.onClickButton},284:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onClickButton=void 0;var o,r=n(285),a=(o=r)&&o.__esModule?o:{default:o};t.onClickButton=a.default},285:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n;if(null!=(n=this.props.syncTree.getSelectNode("tree1"))&&"root"!==n.pid&&null!=n.pid){switch(t){case"addButton":!function(e,t){var n=e.state.pk_billtypeid,o=e.state.pk_billtypecode;t.pushTo("/card",{pagecode:"13050207card",pk_billtypeid:n,pk_billtypecode:o,status:"add"})}(this,e)}}else(0,o.toast)({content:this.state.json["13050207-000003"],color:"warning"})};var o=n(1)},286:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initTemplate=void 0;var o,r=n(287),a=(o=r)&&o.__esModule?o:{default:o};t.initTemplate=a.default},287:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.MultiInit.getMultiLang({moduleId:"1022-13050207",domainName:"uap",callback:function(t,n,r){n?e.createUIDom({pagecode:"13050207001",appcode:"13050207"},(function(n){if(n){if(n.template){var r=n.template;r=function(e,t,n){var r={label:n["13050207-000004"],attrcode:"opr",itemtype:"customer",width:"15%",fixed:"right",visible:!0,render:function(t,r,a){return e.button.createOprationButton(["edit","delete"],{area:"bt_line",buttonLimit:2,onButtonClick:function(e,t){return function(e,t,n,r,a,i){switch(n){case"edit":var l=a.actionnote.value,c=a.actionnote3.value,s=a.actionstyle.value,u=a.actiontype.value,p=a.action_type.value,f=a.constrictflag.value,d=a.controlflag.value,b=a.finishflag.value,y=a.pk_billtype.value,v=a.pk_billtypeid.value,h=a.showhint.value,m={pk_billaction:c,actionnote:l,actionstyle:s,actiontype:u,action_type:p,showhint:h,constrictflag:f,controlflag:d,finishflag:b,pk_billtypeid:v,pk_billtype:y,status:"edit"};(0,o.ajax)({url:"/nccloud/riart/billActionManager/editBillAction.do",type:"post",data:m,success:function(n){var r=n.success,a=n.data.busiClassPk;r?t.pushTo("/card",{actionnote3:c,actionnote:l,actionstyle:s,actiontype:u,action_type:p,showhint:h,constrictflag:f,controlflag:d,finishflag:b,pk_billtypeid:v,pk_billtypecode:y,busiClassPk:a,status:"edit"}):(0,o.toast)({content:e["13050207-000005"],color:"warning"})}});break;case"delete":(0,o.promptBox)({color:"warning",title:e["13050207-000012"],content:e["13050207-000013"],noFooter:!1,noCancelBtn:!1,hasCloseBtn:!1,beSureBtnClick:function(){var n=a.pk_billtype.value,r=a.actiontype.value,l=function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}({billActionPK:a.actionnote3.value,pk_billtype:n,actiontype:r},"actiontype",r);(0,o.ajax)({url:"/nccloud/riart/billActionManager/deleteBillAction.do",type:"post",data:l,success:function(n){var r=n.success;r?(t.table.deleteTableRowsByIndex("13050207list",i),(0,o.toast)({content:e["13050207-000010"],color:"success"})):(0,o.toast)({content:e["13050207-000006"],color:"warning"})}})},closeByClickBackDrop:!1})}}(n,e,t,0,r,a)}})}};return t["13050207list"].items.push(r),t}(e,r,t),e.meta.setMeta(r)}if(n.button){var a=n.button;e.button.setButtons(a)}}})):console.log("未加载到多语资源")}})};var o=n(1);o.base.NCButton,o.base.NCFromControl,o.base.NCPopconfirm,o.base.NCIcon},288:function(e,t,n){var o=n(289);"string"==typeof o&&(o=[[e.i,o,""]]);var r={transform:void 0};n(4)(o,r);o.locals&&(e.exports=o.locals)},289:function(e,t,n){(e.exports=n(3)(!1)).push([e.i,".hideThisDom {\n  display: none;\n}\n.headerBtn {\n  position: absolute;\n  right: 0;\n  top: -36px;\n  z-index: 5;\n}\n.headerBtn button {\n  margin: 5px;\n}\n.billtype-manager-container .u-tabs-tabpane {\n  position: relative;\n}\n.billtype-manager-container .u-tabs-tabpane {\n  overflow: visible;\n}\n",""])},3:function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",o=e[3];if(!o)return n;if(t&&"function"==typeof btoa){var r=(i=o,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),a=o.sources.map((function(e){return"/*# sourceURL="+o.sourceRoot+e+" */"}));return[n].concat(a).concat([r]).join("\n")}var i;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},r=0;r<this.length;r++){var a=this[r][0];"number"==typeof a&&(o[a]=!0)}for(r=0;r<e.length;r++){var i=e[r];"number"==typeof i[0]&&o[i[0]]||(n&&!i[2]?i[2]=n:n&&(i[2]="("+i[2]+") and ("+n+")"),t.push(i))}},t}},4:function(e,t,n){var o,r,a={},i=(o=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=o.apply(this,arguments)),r}),l=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e.call(this,n)),t[n]}}((function(e){return document.querySelector(e)})),c=null,s=0,u=[],p=n(11);function f(e,t){for(var n=0;n<e.length;n++){var o=e[n],r=a[o.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](o.parts[i]);for(;i<o.parts.length;i++)r.parts.push(m(o.parts[i],t))}else{var l=[];for(i=0;i<o.parts.length;i++)l.push(m(o.parts[i],t));a[o.id]={id:o.id,refs:1,parts:l}}}}function d(e,t){for(var n=[],o={},r=0;r<e.length;r++){var a=e[r],i=t.base?a[0]+t.base:a[0],l={css:a[1],media:a[2],sourceMap:a[3]};o[i]?o[i].parts.push(l):n.push(o[i]={id:i,parts:[l]})}return n}function b(e,t){var n=l(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var o=u[u.length-1];if("top"===e.insertAt)o?o.nextSibling?n.insertBefore(t,o.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),u.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function y(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=u.indexOf(e);t>=0&&u.splice(t,1)}function v(e){var t=document.createElement("style");return e.attrs.type="text/css",h(t,e.attrs),b(e,t),t}function h(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function m(e,t){var n,o,r,a;if(t.transform&&e.css){if(!(a=t.transform(e.css)))return function(){};e.css=a}if(t.singleton){var i=s++;n=c||(c=v(t)),o=_.bind(null,n,i,!1),r=_.bind(null,n,i,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",h(t,e.attrs),b(e,t),t}(t),o=T.bind(null,n,t),r=function(){y(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(t),o=w.bind(null,n),r=function(){y(n)});return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else r()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=i()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=d(e,t);return f(n,t),function(e){for(var o=[],r=0;r<n.length;r++){var i=n[r];(l=a[i.id]).refs--,o.push(l)}e&&f(d(e,t),t);for(r=0;r<o.length;r++){var l;if(0===(l=o[r]).refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete a[l.id]}}}};var g,k=(g=[],function(e,t){return g[e]=t,g.filter(Boolean).join("\n")});function _(e,t,n,o){var r=n?"":o.css;if(e.styleSheet)e.styleSheet.cssText=k(t,r);else{var a=document.createTextNode(r),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(a,i[t]):e.appendChild(a)}}function w(e,t){var n=t.css,o=t.media;if(o&&e.setAttribute("media",o),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function T(e,t,n){var o=n.css,r=n.sourceMap,a=void 0===t.convertToAbsoluteUrls&&r;(t.convertToAbsoluteUrls||a)&&(o=p(o)),r&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var i=new Blob([o],{type:"text/css"}),l=e.href;e.href=URL.createObjectURL(i),l&&URL.revokeObjectURL(l)}},9:function(e,t){e.exports=n}})}));
//# sourceMappingURL=index.6fa6e7cf.js.map