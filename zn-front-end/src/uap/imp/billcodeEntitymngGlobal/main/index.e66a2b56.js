/*! @ncctag {"date":"2020-5-11 23:37:19"} */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nc-lightapp-front"),require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["nc-lightapp-front","react","react-dom"],t):"object"==typeof exports?exports["uap/imp/billcodeEntitymngGlobal/main/index"]=t(require("nc-lightapp-front"),require("react"),require("react-dom")):e["uap/imp/billcodeEntitymngGlobal/main/index"]=t(e["nc-lightapp-front"],e.React,e.ReactDOM)}(window,(function(e,t,a){return function(e){var t={};function a(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="../../../../",a(a.s=250)}({1:function(t,a){t.exports=e},2:function(e,a){e.exports=t},250:function(e,t,a){"use strict";var n,o,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=a(2),l=u(i),s=u(a(5)),c=a(1),d=a(251);function u(e){return e&&e.__esModule?e:{default:e}}a(258);c.base.NCButton,c.base.NCPopconfirm,c.base.NCIcon,c.base.NCMessage;var f=c.base.NCTabs,p=f.NCTabPane,b=(c.high.Refer,c.high.FormulaEditor),m=(n=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));o.call(a),a.props=e;var n=a.props,r=(n.form,n.button,n.table,n.syncTree.setSyncTreeData);return a.setSyncTreeData=r,a.state={showHide:!1,editTree:!1,formulaEditorShow:!1,formulaEditorValue:"ReflectValue->",classid:"",json:{},inlt:null},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentWillMount",value:function(){var e=this;this.props.MultiInit.getMultiLang({moduleId:"1018-billcodeentitymngglobal",domainName:"uap",callback:function(t,a,n){a?e.setState({json:t,inlt:n}):console.log("未加载到多语资源")}})}},{key:"componentDidMount",value:function(){var e=this,t=null;(0,c.ajax)({loading:!0,url:"/nccloud/riart/entitymng/initEntitymngTree.do",data:{isglobal:"Y"},success:function(a){console.log(a),t=a.data,a.success?(e.setSyncTreeData("billcodeEntitymngTree",t.rows),e.props.syncTree.openNodeByPk("billcodeEntitymngTree","0000"),e.props.button.setButtonVisible({reflesh:!0,edit:!1,save:!1,cancel:!1,candidate_query:!1,candidate_edit:!1,candidate_save:!1,candidate_cancel:!1})):(0,c.toast)({color:"warning",content:a.message})},error:function(e){(0,c.toast)({color:"warning",content:e.message})}})}},{key:"qryEntityModalContent",value:function(){return l.default.createElement("div",{className:"unAssignOrgTable"},this.props.table.createSimpleTable("qryEntityTable",{onAfterEvent:d.afterEvent,height:"300px",showCheck:!0,showIndex:!0,handlePageInfoChange:this.handlePageInfoChangeFn,cancelCustomRightMenu:!0}))}},{key:"onSaveCandidatePropsEvent",value:function(){var e=this;if("browse"!=e.props.editTable.getStatus("candidatePropsCardTable")&&e.props.syncTree.getSelectNode("billcodeObjTree").isleaf){var t=e.props.editTable.getAllData("candidatePropsCardTable"),a=e.props.editTable.getChangedRows("candidatePropsCardTable"),n={areaType:t.areaType,areacode:t.areacode,rows:a};(0,c.ajax)({loading:!0,url:"/nccloud/riart/billcodeobjreg/SaveCandidateProps.do",data:{data:n},success:function(t){t.success?e.props.editTable.setStatus("candidatePropsCardTable","browse",(function(){for(var n=0;n<t.data.length;n++)e.props.editTable.setValByKeyAndRowId("candidatePropsCardTable",a[n].rowid,"pk_billcodeentityrela",{value:t.data[n]})})):(0,c.toast)({color:"warning",content:t.message})},error:function(e){(0,c.toast)({color:"warning",content:e.message})}})}}},{key:"render",value:function(){var e=this,t=this.props,a=t.table,n=t.button,o=t.form,r=t.editTable,i=t.syncTree,s=t.modal,u=t.BillHeadInfo,m=r.createEditTable,y=o.createForm,v=(a.createSimpleTable,n.createButton,c.base.NCDiv),g=u.createBillHeadInfo,h=this.state,E=(h.activeKey,h.orderdateVal,i.createSyncTree);console.log(this.props);var B=s.createModal,C=this.props.DragWidthCom,T=l.default.createElement("div",{className:"tree-area"},E({needEdit:!1,treeId:"billcodeEntitymngTree",needSearch:!0,onSelectEve:this.onSelectEve.bind(this),loadTreeData:this.loadTreeData.bind(this),editNodeCallBack:this.editNodeCallBack.bind(this),searchType:"filtration"})),_=l.default.createElement("div",{className:"table-area"},l.default.createElement("div",{className:"nc-bill-form-area"},y("entityInfoCardForm",{onAfterEvent:this.onAfterFormEvent.bind(this),onBeforeEvent:this.onBeforeFormEvent()})),l.default.createElement("div",{className:"nc-bill-tableTab-area"},l.default.createElement(f,{navtype:"turn",contenttype:"moveleft",defaultActiveKey:"1"},l.default.createElement(p,{tab:this.state.json["10180BCEGLB-000040"],key:"1"},this.getTableHead(),m("discreteValueTable",{onAfterEvent:d.afterEvent,adaptionHeight:!0,cancelCustomRightMenu:!0})),l.default.createElement(p,{tab:this.state.json["10180BCEGLB-000041"],key:"2"},m("referenceEntityTable",{onAfterEvent:d.afterEvent,adaptionHeight:!0,cancelCustomRightMenu:!0})))));this.props.MutiInit.getIntl(1018);return l.default.createElement("div",{className:"nc-bill-tree-table"},l.default.createElement(v,{areaCode:v.config.HEADER},l.default.createElement("div",{className:"header"},g({title:this.state.json["10180BCEGLB-000043"],initShowBackBtn:!1}),l.default.createElement("div",{className:" btn-group"},this.props.button.createButtonApp({area:"page_header",buttonLimit:6,onButtonClick:d.headerButtonClick.bind(this),popContainer:document.querySelector(".header-button-area")})))),l.default.createElement(b,{ref:"formulaEditor",value:this.state.formulaEditorValue,show:this.state.formulaEditorShow,onHide:function(){e.formulaEditorCancel("")},onOk:function(t){e.formulaEditorOK(t)},onCancel:function(t){e.formulaEditorCancel(t)},metaParam:{classid:this.state.classid}}),B("qryEntityModal",{title:this.state.json["10180BCEGLB-000042"],content:this.qryEntityModalContent(),beSureBtnClick:this.qryEntitySureBtnClick.bind(this),userControl:!1,size:"lg",noFooter:!1}),B("confirmModal",{title:this.state.json["10180BCEGLB-000000"],userControl:!1,size:"lg",noFooter:!1,className:"junior"}),l.default.createElement("div",{className:"tree-table"},l.default.createElement(C,{leftDom:T,rightDom:_,defLeftWid:"20%"})))}}]),t}(i.Component),o=function(){var e=this;this.onSelectEve=function(t,a){if(!a.isleaf)return e.props.button.setButtonVisible({reflesh:!0,edit:!1,save:!1,cancel:!1,candidate_query:!1,candidate_edit:!1,candidate_save:!1,candidate_cancel:!1}),e.props.form.cancel("entityInfoCardForm"),e.props.form.EmptyAllFormValue("entityInfoCardForm"),e.props.editTable.setTableData("discreteValueTable",{rows:[]}),void e.props.editTable.setTableData("referenceEntityTable",{rows:[]});e.setState({showHideForm:!0,classid:a.refpk}),e.treeNode=a,console.log(a);var n=e,o={classid:a.refpk,isglobal:"Y"};(0,c.ajax)({loading:!0,url:"/nccloud/riart/entitymng/initEntityFormAndTable.do",data:o,success:function(e){if(e.success){n.props.button.setButtonVisible({reflesh:!0,edit:!0,save:!1,cancel:!1});var t=e.data.entityInfoCardForm.entityInfoCardForm;t.rows[0].values.oldelength={value:t.rows[0].values.elength.value},n.props.form.setAllFormValue({entityInfoCardForm:t});var o=e.data.entityInfoCardForm.entityInfoCardForm.rows[0].values.defaultrule.value;null==o&&(o="");var r=n.props.meta.getMeta();r.entityInfoCardForm.items.map((function(e){"defaultrule"!=e.attrcode||2!=e.options.length||e.options.shift()})),n.props.meta.setMeta(r),o?n.setState({formulaEditorValue:o}):n.setState({formulaEditorValue:"ReflectValue->"+o}),"0"==e.data.entityInfoCardForm.entityInfoCardForm.rows[0].values.elength.value?n.props.button.setButtonVisible({candidate_query:!1,candidate_edit:!1,candidate_save:!1,candidate_cancel:!1}):a.values&&"Y"==a.values.isenum?(n.props.button.setButtonVisible({candidate_query:!1,candidate_edit:!0,candidate_save:!1,candidate_cancel:!1}),n.props.form.setFormItemsDisabled("entityInfoCardForm",{defaultrule:!0})):n.props.button.setButtonVisible({candidate_query:!0,candidate_edit:!1,candidate_save:!1,candidate_cancel:!1}),e.data.referenceEntityTable?n.props.editTable.setTableData("referenceEntityTable",e.data.referenceEntityTable.referenceEntityTable):n.props.editTable.setTableData("referenceEntityTable",{rows:[]}),e.data.discreteValueTable?n.props.editTable.setTableData("discreteValueTable",e.data.discreteValueTable.discreteValueTable):n.props.editTable.setTableData("discreteValueTable",{rows:[]})}else(0,c.toast)({color:"warning",content:e.message})},error:function(e){(0,c.toast)({color:"warning",content:e.message})}})},this.editNodeCallBack=function(e,t,a){console.log(e,a)},this.loadTreeData=function(t,a){e.queryTreeData(t,a)},this.onAfterFormEvent=function(t,a,n,o,r,i){var l=e;"elength"==n&&o&&o.value.length>1&&t.form.setFormItemsValue(a,{elength:{value:o.value.replace(/\b(0+)/gi,"")}}),"styl"==n&&("2"==o.value?t.form.setFormItemsDisabled(a,{sign:!0}):t.form.setFormItemsDisabled(a,{sign:!1})),"defaultrule"==n&&"Edit"==o.value&&l.setState({formulaEditorShow:!0})},this.onBeforeFormEvent=function(e,t,a,n,o,r){},this.handlePageInfoChangeFn=function(e,t,a,n){var o=e.syncTree.getSelectNode("billcodeEntitymngTree"),r=e.table.getTablePageInfo("qryEntityTable");(0,c.ajax)({loading:!0,url:"/nccloud/riart/entitymng/QryEntityRef.do",data:{metaid:o.refpk,isglobal:"Y",pageIndex:JSON.stringify(r.pageIndex),pageSize:JSON.stringify(r.pageSize),isFirstQry:"N"},success:function(t){t.success&&(t.data.qryEntityTable?e.table.setAllTableData("qryEntityTable",t.data.qryEntityTable):e.table.setAllTableData("defitemtypeTable",{rows:[]}))},error:function(e){(0,c.toast)({color:"warning",content:e.message})}})},this.qryEntitySureBtnClick=function(){for(var t=e,a=t.props.syncTree.getSelectNode("billcodeEntitymngTree"),n=t.props.form.getFormItemsValue("entityInfoCardForm","pk_billcodeentity").value,o=t.props.table.getCheckedRows("qryEntityTable"),r=[],i=0;i<o.length;i++)r[i]=o[i].data.values.id.value;r.length<1||(0,c.ajax)({loading:!0,url:"/nccloud/riart/entitymng/QryDiscreteValue.do",data:{pks:r,metaid:a.refpk,isglobal:"Y",pk_billcodeentity:n},success:function(e){e.success?e.data.discreteValueTable?(t.props.editTable.setTableData("discreteValueTable",e.data.discreteValueTable),t.props.button.setButtonVisible({candidate_query:!0,candidate_edit:!0,candidate_save:!1,candidate_cancel:!1})):(t.props.editTable.setTableData("discreteValueTable",{rows:[]}),(0,c.toast)({color:"error",content:e.data.content})):(0,c.toast)({color:"error",content:e.message})}})},this.showHide=function(){e.setState({showHide:!e.state.showHide})},this.formulaEditorCancel=function(t){var a=e;e.props.meta.getMeta().entityInfoCardForm.items.map((function(e){if("defaultrule"==e.attrcode)return 1==e.options.length?a.props.form.setFormItemsValue("entityInfoCardForm",{defaultrule:{value:"",display:" "}}):a.props.form.setFormItemsValue("entityInfoCardForm",{defaultrule:{value:e.options[0].value,display:e.options[0].display}}),void a.setState({formulaEditorShow:!1})})),e.setState({formulaEditorShow:!1})},this.formulaEditorOK=function(t){var a=e,n=a.props.meta.getMeta();n.entityInfoCardForm.items.map((function(e){if("defaultrule"==e.attrcode){var n={display:t,value:t};return 1==e.options.length?e.options.unshift(n):e.options[0]=n,a.props.form.setFormItemsValue("entityInfoCardForm",{defaultrule:{value:e.options[0].value,display:e.options[0].display}}),void a.setState({formulaEditorShow:!1,formulaEditorValue:t})}})),a.props.meta.setMeta(n)},this.getTableHead=function(){return l.default.createElement("div",{className:"shoulder-definition-area"},l.default.createElement("div",{className:"definition-icons"},e.props.button.createButtonApp({area:"page_body",buttonLimit:4,onButtonClick:d.bodyButtonClick.bind(e)})))}},n),y=(0,c.createPage)({initTemplate:d.initTemplate,mutiLangCode:"1018"})(m);s.default.render(l.default.createElement(y,null),document.querySelector("#app"))},251:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bodyButtonClick=t.headerButtonClick=t.afterEvent=t.initTemplate=void 0;var n=a(252),o=a(256);t.initTemplate=o.initTemplate,t.afterEvent=n.afterEvent,t.headerButtonClick=n.headerButtonClick,t.bodyButtonClick=n.bodyButtonClick},252:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bodyButtonClick=t.headerButtonClick=t.afterEvent=void 0;var n=i(a(253)),o=i(a(254)),r=i(a(255));function i(e){return e&&e.__esModule?e:{default:e}}t.afterEvent=n.default,t.headerButtonClick=o.default,t.bodyButtonClick=r.default},253:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,n,o,r,i){var l=e.form.getFormItemsValue("entityInfoCardForm","elength").value,s=i.values.rvalue.value;i.values.rvalue.value=s.substring(0,parseInt(l))}},254:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=e.syncTree.getSelectNode("billcodeEntitymngTree"),l=this;switch(t){case"save":e.form.getAllFormValue("entityInfoCardForm");var s=e.form.getFormItemsValue("entityInfoCardForm","elength").value,c=e.form.getFormItemsValue("entityInfoCardForm","sign").value;if(i(s)||parseInt(s)<1)return void(0,n.toast)({color:"warning",content:l.state.json["10180BCEGLB-000001"]});if(parseInt(s)>20)return void(0,n.toast)({color:"warning",content:l.state.json["10180BCEGLB-000002"]});if(i(c))return void(0,n.toast)({color:"warning",content:l.state.json["10180BCEGLB-000003"]});if(1!=c.length)return void(0,n.toast)({color:"warning",content:l.state.json["10180BCEGLB-000004"]});if(new RegExp("[\\u4E00-\\u9FFF]+","g").test(c))return void(0,n.toast)({color:"warning",content:l.state.json["10180BCEGLB-000005"]});var d=e.editTable.getAllRows("referenceEntityTable"),u=void 0;for(var f in d){var p=d[f].values;if(p&&p.isautofill.value){u=!0;break}}if("2"==e.form.getFormItemsValue("entityInfoCardForm","styl").value&&u)return void(0,n.toast)({color:"warning",content:l.state.json["10180BCEGLB-000006"]});var b=l.state.json["10180BCEGLB-000007"];if(0==e.form.getFormItemsValue("entityInfoCardForm","oldelength").value)return void o(e,a,l);e.modal.show("confirmModal",{title:l.state.json["10180BCEGLB-000000"],content:r(b),beSureBtnClick:function(){if(e.form.getFormItemsValue("entityInfoCardForm","oldelength").value>s){var t=l.state.json["10180BCEGLB-000008"];e.modal.show("confirmModal",{title:l.state.json["10180BCEGLB-000000"],content:r(t),beSureBtnClick:function(){o(e,a,l)}})}else o(e,a,l)}});break;case"edit":e.syncTree.setNodeDisable("billcodeEntitymngTree",!0),e.form.setFormStatus("entityInfoCardForm","edit"),e.button.setButtonVisible({cancel:!0,edit:!1,save:!0,reflesh:!1,candidate_query:!1,candidate_edit:!1,candidate_save:!1,candidate_cancel:!1}),a.values&&"Y"==a.values.isenum?e.form.setFormItemsDisabled("entityInfoCardForm",{defaultrule:!0}):e.form.setFormItemsDisabled("entityInfoCardForm",{defaultrule:!1});break;case"cancel":e.form.cancel("entityInfoCardForm"),e.syncTree.setNodeDisable("billcodeEntitymngTree",!1),e.button.setButtonVisible({cancel:!1,edit:!0,save:!1,reflesh:!0}),"0"==e.form.getFormItemsValue("entityInfoCardForm","elength").value?e.button.setButtonVisible({candidate_query:!1,candidate_edit:!1,candidate_save:!1,candidate_cancel:!1}):a.values&&"Y"==a.values.isenum?(e.button.setButtonVisible({candidate_query:!1,candidate_edit:!0,candidate_save:!1,candidate_cancel:!1}),e.form.setFormItemsDisabled("entityInfoCardForm",{defaultrule:!0})):e.button.setButtonVisible({candidate_query:!0,candidate_edit:!1,candidate_save:!1,candidate_cancel:!1});break;case"reflesh":(0,n.ajax)({loading:!0,url:"/nccloud/riart/entitymng/initEntitymngTree.do",data:{},success:function(t){var a=t.data;t.success?(e.syncTree.setSyncTreeData("billcodeEntitymngTree",a.rows),e.button.setButtonVisible({reflesh:!0,edit:!1,save:!1,cancel:!1,candidate_query:!1,candidate_edit:!1,candidate_save:!1,candidate_cancel:!1})):(0,n.toast)({color:"warming",content:t.message})},error:function(e){(0,n.toast)({color:"warming",content:e.message})}})}};var n=a(1);n.base.NCMessage,n.base.NCPopconfirm;function o(e,t,a){var o=e.form.getAllFormValue("entityInfoCardForm");if(o.rows[0].values.defaultrule.value){var r=o.rows[0].values.defaultrule.value,i="";i=-1!=r.indexOf("ReflectValue->")?r.slice(14,r.length):r,o.rows[0].values.firstvar={value:i}}else o.rows[0].values.firstvar={value:""};(0,n.ajax)({loading:!0,url:"/nccloud/riart/entitymng/SaveEntityForm.do",data:{model:o,userjson:JSON.stringify({isglobal:"Y"})},success:function(r){if(r.success){if(r.data.title){var i="1"==r.data.type?"success":"warning";e.form.setFormStatus("entityInfoCardForm","browse"),e.syncTree.setNodeDisable("billcodeEntitymngTree",!1),(0,n.toast)({color:i,content:r.data.content})}else{e.form.setFormStatus("entityInfoCardForm","browse"),e.syncTree.setNodeDisable("billcodeEntitymngTree",!1);var l=r.data;e.form.setFormItemsValue("entityInfoCardForm",{pk_billcodeentity:{value:l,display:null},isLoadedEntity:{display:null,value:!0}}),(0,n.toast)({color:"success",content:a.state.json["10180BCEGLB-000009"]})}if(e.button.setButtonVisible({cancel:!1,edit:!0,save:!1,reflesh:!0}),t.values&&"Y"==t.values.isenum)e.button.setButtonVisible({candidate_query:!1,candidate_edit:!0,candidate_save:!1,candidate_cancel:!1});else e.editTable.getAllRows("discreteValueTable").length>0?e.button.setButtonVisible({candidate_query:!0,candidate_edit:!0,candidate_save:!1,candidate_cancel:!1}):e.button.setButtonVisible({candidate_query:!0,candidate_edit:!1,candidate_save:!1,candidate_cancel:!1});e.form.setFormItemsValue("entityInfoCardForm",{oldelength:{value:o.rows[0].values.elength.value}});var s=e.form.getAllFormValue("entityInfoCardForm");e.form.setAllFormValue({entityInfoCardForm:s})}else(0,n.toast)({color:"warning",content:r.message})},error:function(e){(0,n.toast)({color:"warning",content:e.message})}})}function r(e){return React.createElement("div",{className:"nc-theme-common-font-c"},e)}function i(e){var t=new RegExp("^[ ]+$");return null==e||(!e||(0==e.length||!!t.test(e)))}},255:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=e.syncTree.getSelectNode("billcodeEntitymngTree"),o=this;switch(t){case"candidate_query":(0,n.ajax)({loading:!0,url:"/nccloud/riart/entitymng/QryEntityRef.do",data:{metaid:a.refpk,isglobal:"Y",pageIndex:"0",pageSize:"10",isFirstQry:"Y"},success:function(t){t.success?(e.modal.show("qryEntityModal",{title:a.refname}),t.data.qryEntityTable?e.table.setAllTableData("qryEntityTable",t.data.qryEntityTable):(e.table.setAllTableData("defitemtypeTable",{rows:[]}),(0,n.toast)({color:"warning",content:t.data.content}))):(0,n.toast)({color:"warning",content:t.message})},error:function(e){(0,n.toast)({color:"warning",content:e.message})}});break;case"candidate_edit":e.syncTree.setNodeDisable("billcodeEntitymngTree",!0),e.button.setButtonVisible({edit:!1,candidate_query:!1,candidate_edit:!1,candidate_save:!0,candidate_cancel:!0}),e.editTable.setStatus("discreteValueTable","edit");break;case"candidate_save":e.syncTree.setNodeDisable("billcodeEntitymngTree",!1);var r=e.editTable.getAllRows("discreteValueTable",!1),i=e.form.getFormItemsValue("entityInfoCardForm","pk_billcodeentity").value;(0,n.ajax)({loading:!0,url:"/nccloud/riart/entitymng/SaverReflectValue.do",data:{model:{rows:r},userjson:"{entityID:"+i+",ischeck:Y}"},success:function(t){var l;t.success?t.data.defvalues&&"repeat"==t.data.defvalues.checkresult?e.modal.show("confirmModal",{title:o.state.json["10180BCEGLB-000000"],content:(l=t.data.content,React.createElement("div",null,l)),beSureBtnClick:function(){(0,n.ajax)({loading:!0,url:"/nccloud/riart/entitymng/SaverReflectValue.do",data:{model:{rows:r},userjson:"{entityID:"+i+",ischeck:N}"},success:function(t){t.success&&(e.button.setButtonVisible({edit:!0,candidate_query:!0,candidate_edit:!0,candidate_save:!1,candidate_cancel:!1}),a.values&&"Y"==a.values.isenum&&e.button.setButtonVisible({candidate_query:!1}),e.editTable.setStatus("discreteValueTable","browse"),(0,n.toast)({color:"success",content:t.data.content}))}})}}):(e.button.setButtonVisible({edit:!0,candidate_query:!0,candidate_edit:!0,candidate_save:!1,candidate_cancel:!1}),a.values&&"Y"==a.values.isenum&&e.button.setButtonVisible({candidate_query:!1}),e.editTable.setStatus("discreteValueTable","browse"),(0,n.toast)({color:"success",content:t.data.content})):(0,n.toast)({color:"warning",content:t.message})},error:function(e){(0,n.toast)({color:"warning",content:e.message})}});break;case"candidate_cancel":e.syncTree.setNodeDisable("billcodeEntitymngTree",!1),a.values&&"Y"==a.values.isenum?e.button.setButtonVisible({edit:!0,candidate_query:!1,candidate_edit:!0,candidate_save:!1,candidate_cancel:!1}):e.button.setButtonVisible({edit:!0,candidate_query:!0,candidate_edit:!0,candidate_save:!1,candidate_cancel:!1}),e.editTable.cancelEdit("discreteValueTable")}};var n=a(1);n.base.NCMessage},256:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initTemplate=void 0;var n,o=a(257),r=(n=o)&&n.__esModule?n:{default:n};t.initTemplate=r.default},257:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={};e.MultiInit.getMultiLang({moduleId:"1018-billcodeentitymngglobal",domainName:"uap",callback:function(a,n,o){if(n){t={bcEntitybutton:[{id:"0001A41000000006J5B2",type:"general_btn",btncolor:"button_main",key:"edit",keyboard:"Alt+P",title:a["10180BCEGLB-000010"],area:"page_header",children:[]},{id:"0001A41000000006J5B3",type:"general_btn",btncolor:"button_main",key:"save",keyboard:"Ctrl+S",title:a["10180BCEGLB-000011"],area:"page_header",children:[]},{id:"0001A41000000006J5B4",type:"general_btn",key:"cancel",keyboard:"Alt+Q",title:a["10180BCEGLB-000012"],area:"page_header",children:[]},{id:"bodyA41000000006J5B5",type:"buttongroup",btncolor:"button_secondary",key:"buttongroup_bodyopr",title:"",area:"page_body",children:[{id:"bodyA41000000006J5B1",type:"general_btn",key:"candidate_query",title:a["10180BCEGLB-000013"],area:"page_body",parentCode:"buttongroup_bodyopr",children:[]},{id:"body1A41000000006J5B2",type:"general_btn",key:"candidate_edit",title:a["10180BCEGLB-000010"],area:"page_edit",parentCode:"buttongroup_bodyopr",children:[]},{id:"bodyA41000000006J5B3",type:"general_btn",key:"candidate_save",title:a["10180BCEGLB-000011"],area:"page_body",parentCode:"buttongroup_bodyopr",children:[]},{id:"bodyA41000000006J5B3",type:"general_btn",key:"candidate_cancel",title:a["10180BCEGLB-000012"],area:"page_body",parentCode:"buttongroup_bodyopr",children:[]}]}],entityInfoCardForm:{moduletype:"form",items:[{attrcode:"elength",label:a["10180BCEGLB-000014"],itemtype:"number",col:4,leftspace:0,scale:0,rightspace:0,visible:!0},{attrcode:"styl",label:a["10180BCEGLB-000015"],itemtype:"select",showClear:!1,col:4,leftspace:0,rightspace:0,visible:!0,options:[{display:a["10180BCEGLB-000016"],value:"0"},{display:a["10180BCEGLB-000017"],value:"1"},{display:a["10180BCEGLB-000018"],value:"2"}]},{attrcode:"sign",label:a["10180BCEGLB-000019"],itemtype:"input",col:4,leftspace:0,rightspace:0,initialvalue:{value:"@"},visible:!0},{attrcode:"defaultrule",label:a["10180BCEGLB-000020"],itemtype:"select",showClear:!1,col:4,leftspace:0,rightspace:0,visible:!0,options:[{display:a["10180BCEGLB-000021"],value:"Edit"}]},{attrcode:"ruledesc",label:a["10180BCEGLB-000022"],itemtype:"input",col:4,leftspace:0,rightspace:0,visible:!0},{attrcode:"pk_billcodeentity",label:a["10180BCEGLB-000023"],itemtype:"input",col:4,leftspace:0,rightspace:0,disabled:!0,visible:!1},{attrcode:"isLoadedEntity",label:a["10180BCEGLB-000024"],itemtype:"input",col:4,leftspace:0,rightspace:0,disabled:!0,visible:!1},{attrcode:"oldelength",label:a["10180BCEGLB-000025"],itemtype:"input",col:4,leftspace:0,rightspace:0,disabled:!0,visible:!1}]},discreteValueTable:{moduletype:"table",pagination:!1,status:"browse",lineHeight:"40px",showindex:!0,items:[{itemtype:"input",col:4,label:a["10180BCEGLB-000026"],maxlength:20,attrcode:"scode",disabled:!0,visible:!0},{itemtype:"input",col:4,label:a["10180BCEGLB-000027"],maxlength:20,attrcode:"sname",disabled:!0,visible:!0},{itemtype:"input",col:4,label:a["10180BCEGLB-000028"],maxlength:20,attrcode:"rvalue",visible:!0},{itemtype:"input",col:4,label:a["10180BCEGLB-000029"],maxlength:20,attrcode:"org",disabled:!0,visible:!1},{itemtype:"input",col:4,label:a["10180BCEGLB-000030"],maxlength:20,attrcode:"sorgname",disabled:!0,visible:!0}]},referenceEntityTable:{moduletype:"table",pagination:!1,status:"browse",lineHeight:"40px",showindex:!0,items:[{itemtype:"input",col:4,label:a["10180BCEGLB-000031"],maxlength:20,attrcode:"grp_name",visible:!0},{itemtype:"input",col:4,label:a["10180BCEGLB-000032"],maxlength:20,attrcode:"billtypecode",visible:!0},{itemtype:"input",col:4,label:a["10180BCEGLB-000033"],maxlength:20,attrcode:"billtypename",visible:!0},{itemtype:"input",col:4,label:a["10180BCEGLB-000034"],maxlength:20,attrcode:"rulecode",visible:!0},{itemtype:"input",col:4,label:a["10180BCEGLB-000035"],maxlength:20,attrcode:"rulename",visible:!0},{itemtype:"switch",col:4,label:a["10180BCEGLB-000036"],maxlength:20,attrcode:"isautofill",visible:!0}]},qryEntityTable:{moduletype:"table",pagination:!0,status:"browse",lineHeight:"40px",showindex:!0,items:[{itemtype:"input",col:4,label:a["10180BCEGLB-000026"],maxlength:20,attrcode:"scode",visible:!0},{itemtype:"input",col:4,label:a["10180BCEGLB-000027"],maxlength:20,attrcode:"sname",visible:!0},{itemtype:"input",col:4,label:a["10180BCEGLB-000028"],maxlength:20,attrcode:"rvalue",visible:!1},{itemtype:"input",col:4,label:a["10180BCEGLB-000029"],maxlength:20,attrcode:"sorgname",visible:!0}]}},e.button.setButtons(t.bcEntitybutton);var r=function(e,t,a){a["10180BCEGLB-000037"];return t}(e,t,a);e.meta.setMeta(r)}}})};var n=a(1);n.base.NCPopconfirm,n.base.NCIcon,n.base.NCMessage},258:function(e,t,a){var n=a(259);"string"==typeof n&&(n=[[e.i,n,""]]);var o={transform:void 0};a(4)(n,o);n.locals&&(e.exports=n.locals)},259:function(e,t,a){(e.exports=a(3)(!1)).push([e.i,"html,\nbody {\n  width: 100%;\n  height: 100%;\n}\n.shoulder-definition-area {\n  height: 34px;\n  position: absolute;\n  right: 20px;\n  top: 5px;\n  z-index: 5;\n}\n.lightapp-component-form span:first-child .js-type-number {\n  /**\n    \n    .form-item-control {\n      max-width: calc(100% - 140px);\n      width: inherit;\n    }\n    .form-item-label{\n      width: 155px;\n      min-width: inherit;\n      max-width: inherit;\n      .form-item-colon{\n        left: 132px;\n      }\n    }\n    */\n}\n.lightapp-component-form span:last-child .js-type-input {\n  /**\n    \n    .form-item-control {\n      max-width: calc(100% - 140px);\n      width: inherit;\n    }\n    .form-item-label{\n      width: 170px;\n      min-width: inherit;\n      max-width: inherit;\n      .form-item-colon{\n        left: 150px;\n      }\n    }\n    */\n}\n",""])},3:function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=function(e,t){var a=e[1]||"",n=e[3];if(!n)return a;if(t&&"function"==typeof btoa){var o=(i=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),r=n.sources.map((function(e){return"/*# sourceURL="+n.sourceRoot+e+" */"}));return[a].concat(r).concat([o]).join("\n")}var i;return[a].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+a+"}":a})).join("")},t.i=function(e,a){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},o=0;o<this.length;o++){var r=this[o][0];"number"==typeof r&&(n[r]=!0)}for(o=0;o<e.length;o++){var i=e[o];"number"==typeof i[0]&&n[i[0]]||(a&&!i[2]?i[2]=a:a&&(i[2]="("+i[2]+") and ("+a+")"),t.push(i))}},t}},4:function(e,t,a){var n,o,r={},i=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=n.apply(this,arguments)),o}),l=function(e){var t={};return function(a){return void 0===t[a]&&(t[a]=e.call(this,a)),t[a]}}((function(e){return document.querySelector(e)})),s=null,c=0,d=[],u=a(7);function f(e,t){for(var a=0;a<e.length;a++){var n=e[a],o=r[n.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](n.parts[i]);for(;i<n.parts.length;i++)o.parts.push(g(n.parts[i],t))}else{var l=[];for(i=0;i<n.parts.length;i++)l.push(g(n.parts[i],t));r[n.id]={id:n.id,refs:1,parts:l}}}}function p(e,t){for(var a=[],n={},o=0;o<e.length;o++){var r=e[o],i=t.base?r[0]+t.base:r[0],l={css:r[1],media:r[2],sourceMap:r[3]};n[i]?n[i].parts.push(l):a.push(n[i]={id:i,parts:[l]})}return a}function b(e,t){var a=l(e.insertInto);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=d[d.length-1];if("top"===e.insertAt)n?n.nextSibling?a.insertBefore(t,n.nextSibling):a.appendChild(t):a.insertBefore(t,a.firstChild),d.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");a.appendChild(t)}}function m(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=d.indexOf(e);t>=0&&d.splice(t,1)}function y(e){var t=document.createElement("style");return e.attrs.type="text/css",v(t,e.attrs),b(e,t),t}function v(e,t){Object.keys(t).forEach((function(a){e.setAttribute(a,t[a])}))}function g(e,t){var a,n,o,r;if(t.transform&&e.css){if(!(r=t.transform(e.css)))return function(){};e.css=r}if(t.singleton){var i=c++;a=s||(s=y(t)),n=B.bind(null,a,i,!1),o=B.bind(null,a,i,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(a=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",v(t,e.attrs),b(e,t),t}(t),n=T.bind(null,a,t),o=function(){m(a),a.href&&URL.revokeObjectURL(a.href)}):(a=y(t),n=C.bind(null,a),o=function(){m(a)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=i()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var a=p(e,t);return f(a,t),function(e){for(var n=[],o=0;o<a.length;o++){var i=a[o];(l=r[i.id]).refs--,n.push(l)}e&&f(p(e,t),t);for(o=0;o<n.length;o++){var l;if(0===(l=n[o]).refs){for(var s=0;s<l.parts.length;s++)l.parts[s]();delete r[l.id]}}}};var h,E=(h=[],function(e,t){return h[e]=t,h.filter(Boolean).join("\n")});function B(e,t,a,n){var o=a?"":n.css;if(e.styleSheet)e.styleSheet.cssText=E(t,o);else{var r=document.createTextNode(o),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(r,i[t]):e.appendChild(r)}}function C(e,t){var a=t.css,n=t.media;if(n&&e.setAttribute("media",n),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}function T(e,t,a){var n=a.css,o=a.sourceMap,r=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||r)&&(n=u(n)),o&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var i=new Blob([n],{type:"text/css"}),l=e.href;e.href=URL.createObjectURL(i),l&&URL.revokeObjectURL(l)}},5:function(e,t){e.exports=a},7:function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var a=t.protocol+"//"+t.host,n=a+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var o,r=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(r)?e:(o=0===r.indexOf("//")?r:0===r.indexOf("/")?a+r:n+r.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")}))}}})}));
//# sourceMappingURL=index.e66a2b56.js.map