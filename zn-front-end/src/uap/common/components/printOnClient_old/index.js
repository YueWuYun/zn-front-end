/*! @ncctag {"date":"2020-5-11 23:34:17"} */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nc-lightapp-front"),require("react-dom"),require("react")):"function"==typeof define&&define.amd?define(["nc-lightapp-front","react-dom","react"],t):"object"==typeof exports?exports["uap/common/components/printOnClient_old/index"]=t(require("nc-lightapp-front"),require("react-dom"),require("react")):e["uap/common/components/printOnClient_old/index"]=t(e["nc-lightapp-front"],e.ReactDOM,e.React)}(window,(function(e,t,n){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="../../../../",n(n.s=26)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var r=(o=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),a=i.sources.map((function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"}));return[n].concat(a).concat([r]).join("\n")}var o;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},r=0;r<this.length;r++){var a=this[r][0];"number"==typeof a&&(i[a]=!0)}for(r=0;r<e.length;r++){var o=e[r];"number"==typeof o[0]&&i[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),t.push(o))}},t}},function(e,t,n){var i,r,a={},o=(i=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=i.apply(this,arguments)),r}),l=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e.call(this,n)),t[n]}}((function(e){return document.querySelector(e)})),s=null,p=0,d=[],c=n(5);function u(e,t){for(var n=0;n<e.length;n++){var i=e[n],r=a[i.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](i.parts[o]);for(;o<i.parts.length;o++)r.parts.push(y(i.parts[o],t))}else{var l=[];for(o=0;o<i.parts.length;o++)l.push(y(i.parts[o],t));a[i.id]={id:i.id,refs:1,parts:l}}}}function f(e,t){for(var n=[],i={},r=0;r<e.length;r++){var a=e[r],o=t.base?a[0]+t.base:a[0],l={css:a[1],media:a[2],sourceMap:a[3]};i[o]?i[o].parts.push(l):n.push(i[o]={id:o,parts:[l]})}return n}function m(e,t){var n=l(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=d[d.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),d.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function g(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=d.indexOf(e);t>=0&&d.splice(t,1)}function h(e){var t=document.createElement("style");return e.attrs.type="text/css",v(t,e.attrs),m(e,t),t}function v(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function y(e,t){var n,i,r,a;if(t.transform&&e.css){if(!(a=t.transform(e.css)))return function(){};e.css=a}if(t.singleton){var o=p++;n=s||(s=h(t)),i=w.bind(null,n,o,!1),r=w.bind(null,n,o,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",v(t,e.attrs),m(e,t),t}(t),i=_.bind(null,n,t),r=function(){g(n),n.href&&URL.revokeObjectURL(n.href)}):(n=h(t),i=S.bind(null,n),r=function(){g(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=o()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=f(e,t);return u(n,t),function(e){for(var i=[],r=0;r<n.length;r++){var o=n[r];(l=a[o.id]).refs--,i.push(l)}e&&u(f(e,t),t);for(r=0;r<i.length;r++){var l;if(0===(l=i[r]).refs){for(var s=0;s<l.parts.length;s++)l.parts[s]();delete a[l.id]}}}};var b,x=(b=[],function(e,t){return b[e]=t,b.filter(Boolean).join("\n")});function w(e,t,n,i){var r=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=x(t,r);else{var a=document.createTextNode(r),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function S(e,t){var n=t.css,i=t.media;if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function _(e,t,n){var i=n.css,r=n.sourceMap,a=void 0===t.convertToAbsoluteUrls&&r;(t.convertToAbsoluteUrls||a)&&(i=c(i)),r&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var o=new Blob([i],{type:"text/css"}),l=e.href;e.href=URL.createObjectURL(o),l&&URL.revokeObjectURL(l)}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,i=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var r,a=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(a)?e:(r=0===a.indexOf("//")?a:0===a.indexOf("/")?n+a:i+a.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isWindowSystem=t.generateCurrPaperResource=t.findCurrPrinterNameObjById=t.modifyToEndInfo=t.initToEndInfo=t.initFormVal=t.modifyMeta=t.generateCurrPaperStyle=t.generatePaperList=t.generateCurrentPrintMachine=t.generatePaperResourceList=t.generatePrintNameList=void 0;var i=n(0),r=i.viewModel.getGlobalStorage,a=function(e){var t=[];return e.nccloudPrinterList.length?(e.nccloudPrinterList.forEach((function(e){t.push({display:e.printerName,value:e.printerId})})),t):t},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return"Array"!==Object.prototype.toString.call(e).slice(8,-1)||!e.length};function l(e,t){var n={};return!t&&!e.currentNCCloudPrinter||!t&&!e.currentNCCloudPrinter.printerName?n=e.nccloudPrinterList[0]:!t&&e.currentNCCloudPrinter?n=function(e,t){var n={};return o(e.nccloudPrinterList)?n:n=e.nccloudPrinterList.find((function(e){return e.printerName==t.printerName}))}(e,e.currentNCCloudPrinter):t&&(n=e.nccloudPrinterList.find((function(e){return t===e.printerId}))),n}function s(e,t){var n=l(e,t);return{printerStatus:n.printerStatus,twoSide:n.twoSide,printerName:n.printerName,printerId:n.printerId,paperSourceId:o(n.nccloudPaperResourceList)?"":n.nccloudPaperResourceList[0].paperSourceId,paperSourceName:o(n.nccloudPaperResourceList)?"":n.nccloudPaperResourceList[0].paperSourceName}}function p(e,t){var n=[],i=l(e,t);return i.nccloudPaperResourceList&&i.nccloudPaperResourceList.length?(i.nccloudPaperResourceList.forEach((function(e){n.push({display:e.paperSourceName,value:e.paperSourceId})})),n):n}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=[],i=l(e,t);return i.paperList&&i.paperList.length?(i.paperList.forEach((function(e){n.push({display:e.paperName,value:e.paperId})})),n):n}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i={},r=l(e,t),a={};return e&&e.currentNccloudPaper&&!n?(a=e.currentNccloudPaper,u(r.paperList,a)&&(a=Object.assign({},a,{paperName:"自定义纸张"}))):a=n?r.paperList.find((function(e){return n===e.paperId})):r.paperList.find((function(e){return"A4 "===e.paperName})),i={paperHeight:a.paperHeight,paperId:a.paperId,paperName:a.paperName,paperWidth:a.paperWidth},this.setState({printSetting:i}),i}var u=function(e,t){return!e.some((function(e){return e.paperName===t.paperName}))},f=function(e){var t=[];return o(e.nccloudTemplateInfoList)?t:(e.nccloudTemplateInfoList.forEach((function(e){t.push({display:e.templateName,value:e.templateId})})),t)};function m(e){var t="";t=this.state.changeTem?this.state.currPrintTemplateID:r("localStorage",this.state.asid)&&!this.state.currPrintTemplateID?JSON.parse(r("localStorage",this.state.asid)).toEndInfo.printTemplateID:this.state.currPrintTemplateID;var n={};if(o(e.nccloudTemplateInfoList))return n;if(n=e.nccloudTemplateInfoList[0],this.state.changeTem||!this.state.changeTem&&r("localStorage",this.state.asid))n=e.nccloudTemplateInfoList.find((function(e){return e.templateId==t}));else{if(t)return n=e.nccloudTemplateInfoList.find((function(e){return e.templateId==t}));if(e.currentNCCloudTemplateInfo&&Object.keys(e.currentNCCloudTemplateInfo).length)return e.currentNCCloudTemplateInfo;if(!e.nccloudTemplateInfoList.length)return!1}return n}function g(e){var t={printerId:e.printerId,printerName:e.printerName,printerStatus:e.printerStatus,twoSide:e.twoSide};this.setState({currentNCCloudPrinter:t})}function h(e){var t={paperSourceId:e.paperSourceId,paperSourceName:e.paperSourceName};this.setState({currentNCCloudPaperResource:t})}t.generatePrintNameList=a,t.generatePaperResourceList=p,t.generateCurrentPrintMachine=s,t.generatePaperList=d,t.generateCurrPaperStyle=c,t.modifyMeta=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.props.meta.getMeta(),i=a(e),r=p(e,t),o=d(e,t),l=f(e);n.printTemplate.items.map((function(e){"templateInfoList"===e.attrcode&&(e.options=l)})),n.printMachine.items.map((function(e){"PrinterList"===e.attrcode&&(e.options=i),"paperResourceList"===e.attrcode&&(e.options=r)})),n.printStyle.items.map((function(e){"paperList"===e.attrcode&&(e.options=o)})),this.props.meta.setMeta(n)},t.initFormVal=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i={};this.state.asid&&r("localStorage",this.state.asid)&&(i=JSON.parse(r("localStorage",this.state.asid)).info);var a=function(e){return!e||!Object.keys(e).length},o=null,l=null;a(i)||!0===i.doubleside.value||0===i.doubleside.value?(o=this.state.json.index_027,l=0):i.isDuplex.value?i.isDuplex.value&&(o=this.state.json.index_029,l=2):(o=this.state.json.index_028,l=1);var p={rows:[{values:{pageRangeType:{display:a(i)?this.state.json.index_000:i.pageRangeType.display,value:a(i)?0:i.pageRangeType.value},pageFrom:{value:a(i)?1:i.pageFrom.value},pageTo:{value:a(i)?1:i.pageTo.value},pageWholeType:{display:a(i)?this.state.json.index_020:i.pageWholeType.display,value:a(i)?0:i.pageWholeType.value},copies:{value:a(i)?1:i.copies.value},collated:{value:!a(i)&&i.collated.value},doubleside:{display:o,value:l}}}]};!a(i)&&i.doubleside.value&&this.props.form.setFormItemsDisabled("printRange",{isDuplex:!1});var d=s.call(this,e,t);g.call(this,d),h.call(this,d);var u=m.call(this,e,n),f={rows:[{values:{templateInfoList:{display:u?u.templateName:"",value:u?u.templateId:""}}}]},v={rows:[{values:{currentNCCloudPrinter:{display:"",value:0},PrinterList:{display:d.printerName,value:d.printerId},printerStatus:{value:d.printerStatus},twoSide:{value:d.twoSide},paperResourceList:{display:d.paperSourceName,value:d.paperSourceId}}}]},y=c.call(this,e,t),b={rows:[{values:{paperList:{display:y.paperName,value:y.paperId},paperWidth:{value:y.paperWidth},paperHeight:{value:y.paperHeight},nccloudPaperDirect:{display:e.nccloudPaperDirect?this.state.json.index_039:this.state.json.index_038,value:e.nccloudPaperDirect},printMode:{value:0!=e.printMode}}}]};this.props.form.setFormItemsDisabled("printStyle",{paperWidth:this.state.json.index_015!==y.paperName,paperHeight:this.state.json.index_015!==y.paperName}),this.props.form.setAllFormValue({printTemplate:f}),this.props.form.setAllFormValue({printRange:p}),this.props.form.setAllFormValue({printMachine:v}),this.props.form.setAllFormValue({printStyle:b})},t.initToEndInfo=function(e){var t=(0,i.deepClone)(e);delete t.nccloudPrinterList,t.changeType=2,this.setState({toEndInfo:t})},t.modifyToEndInfo=function(e){this.setState({toEndInfo:e})},t.findCurrPrinterNameObjById=l,t.generateCurrPaperResource=function(e,t){return l(e,this.state.currentNCCloudPrinter.printerId).nccloudPaperResourceList.find((function(e){return t===e.paperSourceId}))},t.isWindowSystem=function(){return navigator.userAgent.toLowerCase().includes("windows")}},,function(e,t,n){(function(e){!function(n,i){"use strict";var r={};n.PubSub=r;var a=n.define;!function(e){var t={},n=-1;function i(e){var t;for(t in e)if(e.hasOwnProperty(t))return!0;return!1}function r(e,t,n){try{e(t,n)}catch(e){setTimeout(function(e){return function(){throw e}}(e),0)}}function a(e,t,n){e(t,n)}function o(e,n,i,o){var l,s=t[n],p=o?a:r;if(t.hasOwnProperty(n))for(l in s)s.hasOwnProperty(l)&&p(s[l],e,i)}function l(e,n,r,a){var l=function(e,t,n){return function(){var i=String(e),r=i.lastIndexOf(".");for(o(e,e,t,n);-1!==r;)r=(i=i.substr(0,r)).lastIndexOf("."),o(e,i,t,n)}}(e="symbol"==typeof e?e.toString():e,n,a);return!!function(e){for(var n=String(e),r=Boolean(t.hasOwnProperty(n)&&i(t[n])),a=n.lastIndexOf(".");!r&&-1!==a;)a=(n=n.substr(0,a)).lastIndexOf("."),r=Boolean(t.hasOwnProperty(n)&&i(t[n]));return r}(e)&&(!0===r?l():setTimeout(l,0),!0)}e.publish=function(t,n){return l(t,n,!1,e.immediateExceptions)},e.publishSync=function(t,n){return l(t,n,!0,e.immediateExceptions)},e.subscribe=function(e,i){if("function"!=typeof i)return!1;e="symbol"==typeof e?e.toString():e,t.hasOwnProperty(e)||(t[e]={});var r="uid_"+String(++n);return t[e][r]=i,r},e.subscribeOnce=function(t,n){var i=e.subscribe(t,(function(){e.unsubscribe(i),n.apply(this,arguments)}));return e},e.clearAllSubscriptions=function(){t={}},e.clearSubscriptions=function(e){var n;for(n in t)t.hasOwnProperty(n)&&0===n.indexOf(e)&&delete t[n]},e.unsubscribe=function(n){var i,r,a,o="string"==typeof n&&(t.hasOwnProperty(n)||function(e){var n;for(n in t)if(t.hasOwnProperty(n)&&0===n.indexOf(e))return!0;return!1}(n)),l=!o&&"string"==typeof n,s="function"==typeof n,p=!1;if(!o){for(i in t)if(t.hasOwnProperty(i)){if(r=t[i],l&&r[n]){delete r[n],p=n;break}if(s)for(a in r)r.hasOwnProperty(a)&&r[a]===n&&(delete r[a],p=!0)}return p}e.clearSubscriptions(n)}}(r),"function"==typeof a&&a.amd?a((function(){return r})):(void 0!==e&&e.exports&&(t=e.exports=r),t.PubSub=r,e.exports=t=r)}("object"==typeof window&&window||this)}).call(this,n(10)(e))},,function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.default=function(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments[4],o=function(a,o){o?l(e,t,n,i,r,a):console.log("未加载到多语资源")};(0,a.getMultiLang)({moduleId:"contains_printOnClient",callback:o})};o(n(2)),o(n(1));var r=o(n(12)),a=n(0);function o(e){return e&&e.__esModule?e:{default:e}}var l=function(e,t,n,r,o,l){var p=n.ncclouPrintSetting;p&&p.printTemplateID?s(e,t,i({},n,{printTemplateID:r?p.printTemplateID:n.printTemplateID,printSetting:JSON.stringify(p)}),o,l):r?function(e,t,n,r,o){var l=null;(0,a.ajax)({method:"post",url:"/nccloud/platform/print/queryTemplates.do",data:n,success:function(p){var d=p.success,c=p.data;if(d){if(!c||!c.length)return(0,a.toast)({color:"warning",content:o.index_048});l=c[0].m_ctemplateid?c[0].m_ctemplateid:null,s(e,t,i({},n,{printTemplateID:l}),r,o)}}})}(e,t,n,o,l):s(e,t,n,o,l)};function s(e,t,n,a,o){(0,r.default)({newProps:e,params:i({},n,{realData:n.realData||!1,download:"preview"}),url:t,enctype:2},a,o)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=s(n(1)),a=n(0),o=s(n(29)),l=s(n(13));function s(e){return e&&e.__esModule?e:{default:e}}var p,d,c=a.base.NCLoading,u=window.document.createElement("div");function f(e){r.default.render(React.createElement(c,{show:!0,fullScreen:!0,container:e}),e)}function m(e){e.className="",r.default.unmountComponentAtNode(e),e.parentElement&&e.parentElement.removeChild(e)}window.document.body.appendChild(u),u.className="nc-loading-hidden",t.default=(p=regeneratorRuntime.mark((function e(t){var n,s,p,d,c,g,h,v,y,b,x,w,S,_,P=t.newProps,I=t.params,T=t.url,C=t.enctype,N=t.hasModal,O=void 0!==N&&N,k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},j=arguments[2];return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(u),e.next=3,(0,l.default)(P,T,I);case 3:if("error"!==e.sent){e.next=8;break}return(0,a.toast)({color:"error",content:j.index_052}),r.default.unmountComponentAtNode(section),e.abrupt("return");case 8:for(_ in m(u),O||(n=document.body,(s=document.createElement("section")).classList.add("form-preview-print-contain"),n.appendChild(s),r.default.render(React.createElement(o.default,i({},P,{params:I,url:T,onEnsureInfoSave:k})),s)),p="",d="",(c=window.parent.location.hash.split("?"))&&c[1]&&(g=c[1].split("&"))&&g instanceof Array&&g.forEach((function(e){-1!=e.indexOf("=")&&e.split("=")&&e.split("=")instanceof Array&&("n"===e.split("=")[0]&&e.split("=")[1]&&(p=decodeURIComponent(decodeURIComponent(e.split("=")[1]))),"c"===e.split("=")[0]&&e.split("=")[1]&&(d=decodeURIComponent(decodeURIComponent(e.split("=")[1]))))})),h=(p||null)+"-"+(window.actionName||null),v={sys_busiaction:h,sys_appcode:d,sys_ts:(new Date).getTime()},C=function(e){switch(e){case 1:return"multipart/form-data";case 2:return"application/x-www-form-urlencoded";case 3:return"text/plain";default:return"multipart/form-data"}}(C),y=[{target:"printPreviewModal",method:"POST",enctype:C,type:"hidden",action:T||""},document.createElement("form")],b=y[0],x=y[1],Object.assign(x,b),w=i({},I,v,{formulaConfig:null}),S=function(e){if(w[e]instanceof Array)w[e].forEach((function(t,n){var i=document.createElement("input");i.type="hidden",i.name=e,i.value=t,x.appendChild(i)}));else{var t=document.createElement("input");t.type="hidden",t.name=e,t.value=w[e],x.appendChild(t)}},w)S(_);return document.body.appendChild(x),x.submit(),document.body.removeChild(x),e.abrupt("return",!1);case 25:case"end":return e.stop()}}),e,this)})),d=function(){var e=p.apply(this,arguments);return new Promise((function(t,n){return function i(r,a){try{var o=e[r](a),l=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(l).then((function(e){i("next",e)}),(function(e){i("throw",e)}));t(l)}("next")}))},function(e){return d.apply(this,arguments)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r){var a=null;return new Promise((function(o,l){if(null!=a&&1==a.readyState)(0,i.toast)({color:"warning",content:r.index_043});else if("WebSocket"in window){a=null;var s=new WebSocket("ws://"+(n.socketIp||"127.0.0.1")+":9999/websocket");s.onopen=function(e){console.log("连接成功")},s.onclose=function(e){console.log("关闭连接")},s.onerror=function(i){return e.openTo("/uap/printExeDown/ExeDownload/main/index.html?pk_message=dd",{appcode:n.appcode,pagecode:n.pagecode,actionUrl:t}),o("error")},s.onmessage=function(e){console.log("msg",JSON.parse(e.data));var t={};if(e&&(Object.keys(e).length||e.data))return s.close(),t.nccloudPrinterList=JSON.parse(e.data).nccloudPrinterList,o(t)};var p={},d=setInterval((function(){if(s.readyState==WebSocket.OPEN){clearInterval(d),p=Object.assign({},n,{compalteAddress:t,type:"2",nccloudsessionid:n.nccloudsessionid});var e=JSON.stringify(p);s.send(e)}}),1e3)}else(0,i.toast)({color:"warning",content:r.index_046})}))};var i=n(0)},,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=l(n(27)),r=l(n(28)),a=l(n(38)),o=l(n(8));function l(e){return e&&e.__esModule?e:{default:e}}var s={printOnClient:i.default,printPreview:r.default,printerView:a.default,PubSub:o.default};t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.default=function(e,t,n){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],l=function(l,s,d){if((0,a.isWindowSystem)()){(0,r.getMultiLang)({moduleId:"contains_printOnClient",callback:function(i,r,a){r?p(e,t,n,o,i):console.log("未加载到多语资源")}})}else(0,r.print)("pdf",t,i({},n,{sysType:(0,a.isWindowSystem)()?"1":"2"}),o)};l()};o(n(2)),o(n(1));var r=n(0),a=n(6);function o(e){return e&&e.__esModule?e:{default:e}}var l=r.Cipher.opaqueDecrypt,s=r.viewModel.getGlobalStorage,p=function(e,t,n,a,o){(0,r.ajax)({url:"/nccloud/riart/printtool/sessionid.do",data:{printTemplateID:n.printTemplateID,nodekey:n.nodekey,appcode:n.appcode,num:3==n.type?n.oids.length.toString():"1"},success:function(p){var c=p.success,f=p.data;if(c)if(f.authority){var m=null;f.asid&&l(s("localStorage",f.asid))&&(m=JSON.parse(l(s("localStorage",f.asid))).toEndInfo);var g=i({},n,{nccloudsessionid:f.sessionid,ncclouPrintSetting:m,asid:f.asid});m&&m.printTemplateID?u(e,t,i({},g,{printTemplateID:m.printTemplateID}),o):a?d(e,t,g,o):u(e,t,g,o)}else(0,r.toast)({color:"warning",content:o.index_051});else(0,r.toast)({color:"error",content:o.index_047})},error:function(e){console.error(e.message)}})},d=function(e,t,n,a){var o=null;(0,r.ajax)({method:"post",url:"/nccloud/platform/print/queryTemplates.do",data:n,success:function(l){var s=l.success,p=l.data;if(s){if(!p||!p.length)return(0,r.toast)({color:"warning",content:"未查询到任何模板信息"});o=p[0].m_ctemplateid?p[0].m_ctemplateid:null,u(e,t,i({},n,{printTemplateID:o}),a)}},error:function(e){(0,r.toast)({color:"danger",content:e.message})}})},c=null,u=function(e,t,n,i){var a=null,o=n.beginUrl||window.location.protocol+"//"+window.location.hostname+":"+window.location.port,p=l(s("localStorage","cowboy")),d=s("localStorage","rockin")||!1;if(null!=a&&1==a.readyState)(0,r.toast)({color:"warning",content:i.index_043});else if("WebSocket"in window){a=null;var u=new WebSocket("ws://"+(n.socketIp||"127.0.0.1")+":9999/websocket");u.onopen=function(e){console.log("连接成功"),c=window.open("");var t="<div><h2 style='border-bottom: 1px solid #ddd;padding: 10px 0'>"+i.index_050+'</h2>\n          <div style="width: 560px; margin: 0 auto; position: relative;">\n            <div style="display:inline-block; text-align:center;">\n              <p><img style="width: 34px; height: 34px;" src="https://images.gitee.com/uploads/images/2019/0314/110540_e2d0849a_919028.png"/></p>\n              <span>'+i.index_058+'</span>\n            </div>\n            <p style="width:180px; border-bottom: 1px solid #ddd;position: absolute; top: 23px; left: 48px;"></p>\n            <div style="display:inline-block; text-align:center; margin-left: 150px;">\n              <p><img style="width: 40px; height: 40px;" src="https://images.gitee.com/uploads/images/2019/0314/110508_a5f9c80c_919028.png"/></p>\n              <span>'+i.index_059+'</span>\n            </div>\n            <p style="width:180px; border-bottom: 1px solid #ddd;position: absolute; top: 23px; left: 286px;"></p>\n            <div style="display:inline-block; text-align:center; margin-left: 150px;"">\n              <p><img style="width: 34px; height: 34px;" src="https://images.gitee.com/uploads/images/2019/0314/110518_e60c0d16_919028.png"/></p>\n              <span>...</span>\n            </div>\n          </div>\n        </div>    \n        ';c.document.body.innerHTML=t},u.onclose=function(e){console.log("关闭连接")},u.onerror=function(i){e.openTo("/uap/printExeDown/ExeDownload/main/index.html?pk_message=dd",{appcode:n.appcode,pagecode:n.pagecode,actionUrl:t})},u.onmessage=function(e){var t="<div><h2 style='border-bottom: 1px solid #ddd;padding: 10px 0'>"+i.index_050+'</h2>\n          <div style="width: 560px; margin: 0 auto; position: relative;">\n            <div style="display:inline-block; text-align:center;">\n              <p><img style="width: 34px; height: 34px;" src="https://images.gitee.com/uploads/images/2019/0314/110540_e2d0849a_919028.png"/></p>\n              <span>'+i.index_058+'</span>\n            </div>\n            <p style="width:180px; border-bottom: 1px solid #ddd;position: absolute; top: 23px; left: 48px;"></p>\n            <div style="display:inline-block; text-align:center; margin-left: 150px;">\n              <p><img style="width: 40px; height: 40px;" src="https://images.gitee.com/uploads/images/2019/0314/110508_a5f9c80c_919028.png"/></p>\n              <span>'+i.index_059+'</span>\n            </div>\n            <p style="width:180px; border-bottom: 1px solid #ddd;position: absolute; top: 23px; left: 286px;"></p>\n            <div style="display:inline-block; text-align:center; margin-left: 102px;"">\n              <p><img style="width: 34px; height: 34px;" src="https://images.gitee.com/uploads/images/2019/0314/110533_f85d3142_919028.png"/></p>\n              <span>'+i.index_061+"</span>\n            </div>\n          </div>\n        </div>    \n        ",n="<div><h2 style='border-bottom: 1px solid #ddd;padding: 10px 0'>"+i.index_050+'</h2>\n          <div style="width: 560px; margin: 0 auto; position: relative;">\n            <div style="display:inline-block; text-align:center;">\n              <p><img style="width: 34px; height: 34px;" src="https://images.gitee.com/uploads/images/2019/0314/110540_e2d0849a_919028.png"/></p>\n              <span>'+i.index_058+'</span>\n            </div>\n            <p style="width:180px; border-bottom: 1px solid #ddd;position: absolute; top: 23px; left: 48px;"></p>\n            <div style="display:inline-block; text-align:center; margin-left: 150px;">\n              <p><img style="width: 40px; height: 40px;" src="https://images.gitee.com/uploads/images/2019/0314/110508_a5f9c80c_919028.png"/></p>\n              <span>'+i.index_059+'</span>\n            </div>\n            <p style="width:180px; border-bottom: 1px solid #ddd;position: absolute; top: 23px; left: 286px;"></p>\n            <div style="display:inline-block; text-align:center; margin-left: 96px;"">\n              <p><img style="width: 30px; height: 30px;" src="https://images.gitee.com/uploads/images/2019/0314/110526_3b417874_919028.png"/></p>\n              <span>'+i.index_060+"</span>\n            </div>\n          </div>\n        </div>    \n        ";e&&(Object.keys(e).length||e.data)&&(u.close(),c.document.body.innerHTML=e.data.includes(i.index_056)?t:n)};var f={},m=setInterval((function(){if(u.readyState==WebSocket.OPEN){clearInterval(m),f=Object.assign({},n,{compalteAddress:t,type:n.type,nccloudsessionid:n.nccloudsessionid,download:n.download||null,suffx:n.suffx||null,beginUrl:o,aeskey:p,rockin:d}),s("localStorage",n.printTemplateID)&&(f.ncclouPrintSetting=JSON.parse(s("localStorage",f.printTemplateID)).toEndInfo);var e=JSON.stringify(f);u.send(e)}}),1e3)}else(0,r.toast)({color:"warning",content:i.index_057+"websocket"})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.default=function(e,t,n){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if((0,o.isWindowSystem)()){var l=function(i,r){r?d(e,t,n,a,i):console.log("未加载到多语资源")};(0,r.getMultiLang)({moduleId:"contains_printOnClient",callback:l})}else(0,r.print)("pdf",t,i({},n,{sysType:(0,o.isWindowSystem)()?"1":"2"}),a)};l(n(2)),l(n(1));var r=n(0),a=l(n(11)),o=n(6);function l(e){return e&&e.__esModule?e:{default:e}}var s=r.Cipher.opaqueDecrypt,p=r.viewModel.getGlobalStorage,d=function(e,t,n,a,o){(0,r.ajax)({url:"/nccloud/riart/printtool/sessionid.do",data:{printTemplateID:n.printTemplateID,nodekey:n.nodekey,appcode:n.appcode,num:"1"},success:function(l){var s=l.success,d=l.data;if(s){var u=null;d.asid&&p("localStorage",d.asid)&&(u=JSON.parse(p("localStorage",d.asid)).toEndInfo);var f=i({},n,{nccloudsessionid:d.sessionid,ncclouPrintSetting:u,asid:d.asid,isPrinterView:!1,searchTemplate:a,authority:d.authority});c(e,t,f,a,o)}else(0,r.toast)({color:"error",content:o.index_047})},error:function(e){console.error(e.message)}})},c=function(e,t,n,o,l){(0,a.default)(e,t,n,o,(function(a){var o=n.ncclouPrintSetting;n.asid&&p("localStorage",n.asid)&&(o=JSON.parse(p("localStorage",n.asid)).toEndInfo),n.authority?f(e,t,i({},n,a,{ncclouPrintSetting:o,type:n.virType?n.virType:"1"}),l):(0,r.toast)({color:"warning",content:l.index_051})}))},u=null,f=function(e,t,n,i){var a=null,o=n.beginUrl||window.location.protocol+"//"+window.location.hostname+":"+window.location.port,l=s(p("localStorage","cowboy")),d=p("localStorage","rockin")||!1;if(null!=a&&1==a.readyState)(0,r.toast)({color:"warning",content:i.index_043});else if("WebSocket"in window){a=null;var c=new WebSocket("ws://"+(n.socketIp||"127.0.0.1")+":9999/websocket");c.onopen=function(e){console.log("连接成功"),(u=window.open("")).document.title=i.index_049;var t="<div><h2 style='border-bottom: 1px solid #ddd;padding: 10px 0'>"+i.index_050+'</h2>\n          <div style="width: 560px; margin: 0 auto; position: relative;">\n            <div style="display:inline-block; text-align:center;">\n              <p><img style="width: 34px; height: 34px;" src="https://images.gitee.com/uploads/images/2019/0314/110540_e2d0849a_919028.png"/></p>\n              <span>'+i.index_058+'</span>\n            </div>\n            <p style="width:180px; border-bottom: 1px solid #ddd;position: absolute; top: 23px; left: 48px;"></p>\n            <div style="display:inline-block; text-align:center; margin-left: 150px;">\n              <p><img style="width: 40px; height: 40px;" src="https://images.gitee.com/uploads/images/2019/0314/110508_a5f9c80c_919028.png"/></p>\n              <span>'+i.index_059+'</span>\n            </div>\n            <p style="width:180px; border-bottom: 1px solid #ddd;position: absolute; top: 23px; left: 286px;"></p>\n            <div style="display:inline-block; text-align:center; margin-left: 150px;"">\n              <p><img style="width: 34px; height: 34px;" src="https://images.gitee.com/uploads/images/2019/0314/110518_e60c0d16_919028.png"/></p>\n              <span>...</span>\n            </div>\n          </div>\n        </div>    \n        ';u.document.body.innerHTML=t},c.onclose=function(e){console.log("关闭连接")},c.onerror=function(i){e.openTo("/uap/printExeDown/ExeDownload/main/index.html?pk_message=dd",{appcode:n.appcode,pagecode:n.pagecode,actionUrl:t})},c.onmessage=function(e){var t="<div><h2 style='border-bottom: 1px solid #ddd;padding: 10px 0'>"+i.index_050+'</h2>\n          <div style="width: 560px; margin: 0 auto; position: relative;">\n            <div style="display:inline-block; text-align:center;">\n              <p><img style="width: 34px; height: 34px;" src="https://images.gitee.com/uploads/images/2019/0314/110540_e2d0849a_919028.png"/></p>\n              <span>'+i.index_058+'</span>\n            </div>\n            <p style="width:180px; border-bottom: 1px solid #ddd;position: absolute; top: 23px; left: 48px;"></p>\n            <div style="display:inline-block; text-align:center; margin-left: 150px;">\n              <p><img style="width: 40px; height: 40px;" src="https://images.gitee.com/uploads/images/2019/0314/110508_a5f9c80c_919028.png"/></p>\n              <span>'+i.index_059+'</span>\n            </div>\n            <p style="width:180px; border-bottom: 1px solid #ddd;position: absolute; top: 23px; left: 286px;"></p>\n            <div style="display:inline-block; text-align:center; margin-left: 102px;"">\n              <p><img style="width: 34px; height: 34px;" src="https://images.gitee.com/uploads/images/2019/0314/110533_f85d3142_919028.png"/></p>\n              <span>'+i.index_061+"</span>\n            </div>\n          </div>\n        </div>    \n        ",n="<div><h2 style='border-bottom: 1px solid #ddd;padding: 10px 0'>"+i.index_050+'</h2>\n          <div style="width: 560px; margin: 0 auto; position: relative;">\n            <div style="display:inline-block; text-align:center;">\n              <p><img style="width: 34px; height: 34px;" src="https://images.gitee.com/uploads/images/2019/0314/110540_e2d0849a_919028.png"/></p>\n              <span>'+i.index_058+'</span>\n            </div>\n            <p style="width:180px; border-bottom: 1px solid #ddd;position: absolute; top: 23px; left: 48px;"></p>\n            <div style="display:inline-block; text-align:center; margin-left: 150px;">\n              <p><img style="width: 40px; height: 40px;" src="https://images.gitee.com/uploads/images/2019/0314/110508_a5f9c80c_919028.png"/></p>\n              <span>'+i.index_059+'</span>\n            </div>\n            <p style="width:180px; border-bottom: 1px solid #ddd;position: absolute; top: 23px; left: 286px;"></p>\n            <div style="display:inline-block; text-align:center; margin-left: 96px;"">\n              <p><img style="width: 30px; height: 30px;" src="https://images.gitee.com/uploads/images/2019/0314/110526_3b417874_919028.png"/></p>\n              <span>'+i.index_060+"</span>\n            </div>\n          </div>\n        </div>    \n        ";e&&(Object.keys(e).length||e.data)&&(c.close(),u.document.body.innerHTML=e.data.includes(i.index_056)?t:n)};var f={},m=setInterval((function(){if(c.readyState==WebSocket.OPEN){clearInterval(m),f=Object.assign({},n,{compalteAddress:t,type:n.type,nccloudsessionid:n.nccloudsessionid,download:null,beginUrl:o,aeskey:l,rockin:d}),p("localStorage",n.printTemplateID)&&(f.ncclouPrintSetting=JSON.parse(p("localStorage",f.printTemplateID)).toEndInfo);var e=JSON.stringify(f);c.send(e)}}),1e3)}else(0,r.toast)({color:"warning",content:i.index_057+"websocket"})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(2),o=b(a),l=b(n(1)),s=n(0),p=b(n(30)),d=b(n(31)),c=b(n(32)),u=b(n(12)),f=n(6),m=b(n(13)),g=b(n(33)),h=b(n(34)),v=n(35),y=b(n(8));function b(e){return e&&e.__esModule?e:{default:e}}function x(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function i(r,a){try{var o=t[r](a),l=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(l).then((function(e){i("next",e)}),(function(e){i("throw",e)}));e(l)}("next")}))}}var w=s.viewModel.getCookie,S=(s.viewModel.getGlobalStore,s.viewModel.getGlobalStorage),_=s.viewModel.removeGlobalStorage,P=new(0,s.gzip),I=s.Cipher.opaqueDecrypt,T=s.base.NCButton,C=(s.base.NCInput,s.base.NCRow),N=s.base.NCCol,O=s.base.NCIcon,k=s.base.NCCheckbox,j=s.base.NCLoading;n(36);var E=function(e){function t(e){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r,a,o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.saveLocalData=function(){var e=o.state,t=e.currentNCCloudPaperResource,n=e.toEndInfo,i=e.currentNCCloudPrinter,r=(0,s.deepClone)(n);r.currentNCCloudPaperResource=t,r.currentNCCloudPrinter=i;var a={info:o.state.info,toEndInfo:r};(0,v.setStorage)(o.state.asid,JSON.stringify(a))},o.save=function(){o.cancel(),o.saveLocalData(),o.props.onEnsureInfoSave&&"function"==typeof o.props.onEnsureInfoSave&&o.props.onEnsureInfoSave(o.state.toEndInfo)},o.cancel=function(){o.setState({modalVis:!1});var e=l.default.findDOMNode(o);l.default.unmountComponentAtNode(e);var t=e.parentNode;t.parentNode&&t.parentNode.removeChild(t)},o.getCurrentPages=(r=x(regeneratorRuntime.mark((function e(t){var r,a,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=o.props.params.printTemplateID,a=null,o.props.params.asid&&S("localStorage",o.props.params.asid)&&(a=JSON.stringify(JSON.parse(S("localStorage",o.props.params.asid)).toEndInfo)),l=i({},o.props.params,{printTemplateID:r,appcode:o.props.params.appcode,nodeKey:o.props.params.nodekey,ncclouPrintSetting:a?i({},a,{changeType:1}):a,download:"preview",sysType:3}),(0,h.default)({newProps:o.props,url:t.url,params:l,enctype:2}),console.log("gzipStatus",S("localStorage","gzip")),o.getUnzipCurrentPage("current");case 7:case"end":return e.stop()}}),e,n)}))),function(e){return r.apply(this,arguments)}),o.getTotalPages=function(e){var t=(0,s.deepClone)(e.params),n=i({},t,{download:"previewTotalPages"});(0,g.default)({newProps:o.props,url:e.url,params:n,enctype:2}),console.log("gzipStatus",S("localStorage","gzip")),o.getUnzipTotalPage("total")},o.getUnzipCurrentPage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"current",t=I(S("localStorage","cowboy")),n=w("cookiets")||Date.now(),i=(n=isNaN(n)?n:Number(n))+"";t=i+t.substring(0,t.length-i.length);var r=o,a=0,l=setInterval((function(){var n="total"==e?window.frames.totalPageIframe:window.frames.currentPageIframe;if(n){(a+=1)>200&&clearInterval(l);var i=n.document.getElementsByTagName("pre")[0];if(i&&i.innerHTML){console.log(S("localStorage","rockin"));var o=i.innerHTML;"string"==typeof i.innerHTML&&"true"==S("localStorage","rockin")&&(o=s.Cipher.decrypt(i.innerHTML,t)),clearInterval(l),o="1"==S("localStorage","gzip")?P.unzip(o):JSON.parse(o),console.log("res",o),"total"==e?r.setState({totalPages:o.data}):"current"===e&&r.setState({currentPages:o.data})}}}),800)},o.getUnzipTotalPage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"total",t=I(S("localStorage","cowboy")),n=w("cookiets")||Date.now(),i=(n=isNaN(n)?n:Number(n))+"";t=i+t.substring(0,t.length-i.length);var r=o,a=0,l=setInterval((function(){var n="total"==e?window.frames.totalPageIframe:window.frames.currentPageIframe;if(n){(a+=1)>2e3&&clearInterval(l);var i=n.document.getElementsByTagName("pre")[0];if(i&&i.innerHTML){console.log(S("localStorage","rockin"));var o=i.innerHTML;"string"==typeof i.innerHTML&&"true"==S("localStorage","rockin")&&(o=s.Cipher.decrypt(i.innerHTML,t)),clearInterval(l),o="1"==S("localStorage","gzip")?P.unzip(o):JSON.parse(o),console.log("res",o),"total"==e?r.setState({totalPages:o.data}):"current"===e&&r.setState({currentPages:o.data})}}}),1e3)},o.initFormData=(a=x(regeneratorRuntime.mark((function e(){var t,r,a,l,p,d,c,u,g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.printTemplateID?g.printTemplateID:o.props.params.printTemplateID,e.next=3,(0,m.default)(o.props,o.props.url,i({},o.props.params,{printTemplateID:t}),o.state.json);case 3:r=e.sent,a=o.state.resInfo,l=r.nccloudPrinterList,p=o,d=null,o.props.params.asid&&S("localStorage",o.props.params.asid)&&(d=JSON.stringify(JSON.parse(S("localStorage",o.props.params.asid)).toEndInfo)),o.props.params.printTemplateID&&(_("localStorage",o.props.params.asid),d=null,(c=S("localStorage","printClientHistory"))&&c.includes(o.props.params.asid)&&((u=c.split(",")).pop(),(0,v.setStorage)("printClientHistory",u.join(",")))),o.setState({currPrintTemplateID:t,nopreview:!!d&&JSON.parse(d).nopreview||!1}),(0,s.ajax)({url:"/nccloud/riart/printtool/down.do",data:{printTemplateID:t,appcode:o.props.params.appcode,nodeKey:o.props.params.nodekey,ncclouPrintSetting:g.printTemplateID?i({},d,{changeType:1}):d},success:function(e){var n=e.success;e.data,n&&(a=i({},e.data,{nccloudPrinterList:l,printTemplateID:t}),p.setState({resInfo:a}),p.formatData(a),f.initToEndInfo.call(p,a))}});case 12:case"end":return e.stop()}}),e,n)}))),function(){return a.apply(this,arguments)}),o.formatData=function(e){f.modifyMeta.call(o,e),f.initFormVal.call(o,e,"",e.printTemplateID)},o.resetPageSize=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=o.state,r=n.originalQuery,a=n.printSetting;n.toEndInfo;Object.keys(e).length||(e=a),o.toggleShowLoad.call(o,!0),(0,u.default)({newProps:o.props,params:i({},r.params,{printTemplateID:t||r.params.printTemplateID,printSetting:JSON.stringify(e),changeType:t?1:2}),url:r.url,enctype:2,hasModal:!0},o.state.json),setTimeout((function(){o.toggleShowLoad.call(o,!1)}),1500)},o.resetPageWH=function(e){o.setState({printSetting:e.currentNccloudPaper}),o.props.form.setFormItemsValue("printStyle",{paperWidth:{value:e.currentNccloudPaper.paperWidth},paperHeight:{value:e.currentNccloudPaper.paperHeight}})},o.resetIframeStyle=function(){},o.changePreviewStatus=function(e){f.modifyToEndInfo.call(o,i({},o.state.toEndInfo,{nopreview:e})),o.setState({nopreview:e})},o.output=function(){var e=o.state.originalQuery;console.log("currPrintTemplateID",o.state.currPrintTemplateID),(0,s.output)({url:e.url,data:i({},e.params,{download:null,outputType:"output"}),callback:o.onButtonClick})},o.state={showLoad:!1,modalVis:!1,nopreview:!1,totalPages:0,currentPages:0,printSetting:{paperId:"",paperName:"",paperWidth:210,paperHeight:297,nccloudPaperDirect:!1},currentNCCloudPrinter:{},currentNCCloudPaperResource:{},info:{pageRangeType:{display:"所有页面",value:0},pageFrom:{display:"1",value:1},pageTo:{display:"1",value:1},pageWholeType:{display:"全部",value:0},copies:{display:!1,value:!1},collated:{display:!1,value:!1},doubleside:{display:!0,value:!0},isDuplex:{display:!1,value:!1}},toEndInfo:{},asid:o.props.params.asid,resInfo:{},originalQuery:{},currPrintTemplateID:"",changeTem:!1,json:{},init:null},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentWillMount",value:function(){var e=this;(0,s.getMultiLang)({moduleId:"contains_printOnClient",callback:function(t,n,i){n?e.setState({json:t,inlt:i}):console.log("未加载到多语资源")}})}},{key:"componentDidMount",value:function(){var e=this;this.setState({modalVis:!0,originalQuery:{params:this.props.params,url:this.props.url}}),this.initFormData(),this.getTotalPages({params:this.props.params,url:this.props.url}),this.getCurrentPages({params:this.props.params,url:this.props.url}),y.default.subscribe("modifySfVar",(function(t,n){var i=e.state.originalQuery;for(var r in n)i.params.userjson[r]=n[r];e.setState({originalQuery:i})})),y.default.subscribe("modifySfPaper",(function(t,n){var r=e.state,a=r.originalQuery,o=r.printSetting,l=r.resInfo,p=a.params.printTemplateID,d=void 0===p?null:p,c=a.params.userjson;for(var f in c=JSON.parse(decodeURI(c)),n)c[f]=n[f];a.params.userjson=encodeURI(JSON.stringify(c)),console.log({originalQuery:a,printSetting:o,resInfo:l});var m=(0,s.deepClone)(l);a.params.printSetting&&(m=Object.assign({},m,JSON.parse(a.params.printSetting))),delete m.nccloudPrinterList,m.changeType=2;var g=i({},a.params,{printTemplateID:d||a.params.printTemplateID,changeType:d?1:2,printSetting:JSON.stringify(m)});(0,u.default)({newProps:e.props,params:g,url:a.url,enctype:2,hasModal:!0},e.state.json)}))}},{key:"toggleShowLoad",value:function(e){this.setState({showLoad:e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.form,i=t.params,r=n.createForm,l=this.state,s=l.modalVis;l.originalQuery,l.resInfo;return o.default.createElement("div",{className:"print-preview-model",style:{display:s?"block":"none"}},o.default.createElement("iframe",{id:"totalPageIframe",name:"totalPageIframe",style:{display:"none"}}),o.default.createElement("iframe",{id:"currentPageIframe",name:"currentPageIframe",style:{display:"none"}}),o.default.createElement("div",{className:"print-preview-model-dialog"}),o.default.createElement("div",{className:"model-body"},o.default.createElement("header",{className:"model-header"},o.default.createElement("span",null,this.state.json.index_003),o.default.createElement(O,{type:"uf-close",className:"close-modal",onClick:this.cancel})),o.default.createElement(C,null,o.default.createElement(N,{md:9},o.default.createElement("iframe",{id:"printPreviewModal",name:"printPreviewModal",style:{width:"100%",height:"430px"},onLoad:function(){e.resetIframeStyle()}})),o.default.createElement(N,{md:3},o.default.createElement(j,{container:this,show:this.state.showLoad}),o.default.createElement("div",{className:"print-form-contain"},i.hideTemplate?null:o.default.createElement(a.Fragment,null,o.default.createElement("h4",{className:"header-title header-title-first"},this.state.json.index_004),r("printTemplate",{onAfterEvent:c.default.bind(this),onBeforeEvent:d.default.bind(this)})),o.default.createElement("h4",{className:"header-title"},this.state.json.index_005),r("printRange",{onAfterEvent:c.default.bind(this),onBeforeEvent:d.default.bind(this)}),o.default.createElement("h4",{className:"header-title"},this.state.json.index_006),r("printMachine",{onAfterEvent:c.default.bind(this),onBeforeEvent:d.default.bind(this)}),o.default.createElement("h4",{className:"header-title"},this.state.json.index_007),r("printStyle",{onAfterEvent:c.default.bind(this),onBeforeEvent:d.default.bind(this)}),i.formulaConfig?i.formulaConfig:null))),o.default.createElement("footer",{className:"model-footer"},o.default.createElement(k,{checked:this.state.nopreview,fieldid:"preview_check",value:this.state.nopreview,onChange:this.changePreviewStatus},this.state.json.index_008),i.hideTemplate?null:o.default.createElement("p",{className:"total-paegs"},"(",this.state.json.index_009,this.state.currentPages,this.state.json.index_010,")",this.state.json.index_011,this.state.totalPages,this.state.json.index_010),o.default.createElement(T,{onClick:this.save,fieldid:"print_btn",colors:"danger"},this.state.json.index_012),o.default.createElement(T,{onClick:this.output,fieldid:"output_btn"},this.state.json.index_013),o.default.createElement(T,{onClick:this.cancel,fieldid:"cancel_btn"},this.state.json.index_014))))}}]),t}(a.Component);E=(0,s.createPage)({initTemplate:p.default})(E),t.default=E},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={};(0,i.getMultiLang)({moduleId:"contains_printOnClient",callback:function(n,i,a){i?(t={printTemplate:{moduletype:"form",items:[{attrcode:"templateInfoList",placeholder:"",value:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"select",options:[],label:n.index_004+"："}],status:"edit"},printRange:{moduletype:"form",items:[{attrcode:"pageRangeType",placeholder:"",value:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"radio",options:[{display:""+n.index_000,value:0},{display:""+n.index_016,value:1}],label:""},{attrcode:"pageFrom",placeholder:"",value:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"number",label:""+n.index_018},{attrcode:"pageTo",placeholder:"",value:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"number",label:""+n.index_019},{attrcode:"pageWholeType",placeholder:"",value:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"select",options:[{display:""+n.index_020,value:0},{display:""+n.index_021,value:1},{display:""+n.index_022,value:2}],label:""+n.index_023},{attrcode:"copies",placeholder:"",value:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"number",label:""+n.index_024},{attrcode:"collated",placeholder:"",value:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"switch",label:""+n.index_025},{attrcode:"doubleside",placeholder:"",value:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"select",label:""+n.index_026,options:[{display:""+n.index_027,value:0},{display:""+n.index_028,value:1},{display:""+n.index_029,value:2}]}],status:"edit"},printMachine:{moduletype:"form",items:[{attrcode:"PrinterList",placeholder:"",value:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"select",options:[],label:""+n.index_030},r({attrcode:"printerStatus",placeholder:"",value:"",leftspace:0,rightspace:0,required:!1,visible:!0,disabled:!0,itemtype:"input",label:""+n.index_031},"disabled",!0),{attrcode:"paperResourceList",placeholder:"",value:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"select",options:[],label:""+n.index_032},{attrcode:"twoSide",placeholder:"",value:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"switch",label:""+n.index_033,disabled:!0}],status:"edit"},printStyle:{moduletype:"form",items:[{attrcode:"paperList",placeholder:"",value:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"select",options:[],label:""+n.index_034},{attrcode:"paperWidth",placeholder:"",value:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"input",label:""+n.index_035,disabled:!0},{attrcode:"paperHeight",placeholder:"",value:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"input",label:""+n.index_036,disabled:!0},{attrcode:"nccloudPaperDirect",placeholder:"",value:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"radio",label:""+n.index_037,options:[{display:""+n.index_038,value:!1},{display:""+n.index_039,value:!0}]},{attrcode:"printMode",placeholder:"",value:"",leftspace:0,rightspace:0,required:!1,visible:!0,itemtype:"switch",label:""+n.index_040}],status:"edit"}},e.meta.setMeta(t)):console.log("未加载到多语资源")}})};var i=n(0);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,i,r){["pageFrom","pageTo"].includes(n)&&function(e,t){1!=e.form.getFormItemsValue(t,"pageRangeType")&&e.form.setFormItemsValue(t,{pageRangeType:{display:"页面",value:1}})}(e,t);return!0};n(6)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,f){var m=r.value.key?r.value.key:r.value;["pageRangeType","pageFrom","pageTo","pageWholeType","copies","collated","doubleside"].includes(n)&&s.call(this,n,r);"PrinterList"===n&&l.call(this,e,t,n,m);"nccloudPaperDirect"===n&&o.call(this,m);if(["paperList"].includes(n)&&r!==f){var g=i.generateCurrPaperStyle.call(this,this.state.resInfo,this.state.currentNCCloudPrinter.printerId,m);a.call(this,g),p.call(this,e,t,n,m),this.props.form.setFormItemsDisabled(t,{paperWidth:this.state.json.index_015!==r.display,paperHeight:this.state.json.index_015!==r.display})}["templateInfoList"].includes(n)&&u.call(this,m);"printMode"==n&&(m=m?1:0);["paperWidth","paperHeight"].includes(n)&&c.call(this,n,m);d.call(this,t,n,m)};var i=n(6),r=n(0);function a(e){var t=(0,r.deepClone)(this.state.resInfo);delete t.nccloudPrinterList,t.changeType=2,t.currentNccloudPaper=e,this.resetPageSize(t)}function o(e){var t=(0,r.deepClone)(this.state.resInfo);delete t.nccloudPrinterList,t.changeType=2;var n=this.state.printSetting;if(n.nccloudPaperDirect=e,this.state.json.index_015!==n.paperName){var a=n.paperHeight,o=n.paperWidth;n.paperWidth=a,n.paperHeight=o}t.currentNccloudPaper=n,t.nccloudPaperDirect=e,this.resetPageSize(t),this.resetPageWH(t);var l=this.state.toEndInfo;l.currentNCCloudPrinter=n,i.modifyToEndInfo.call(this,l)}function l(e,t,n,r){i.modifyMeta.call(this,this.state.resInfo,r),i.initFormVal.call(this,this.state.resInfo,r)}function s(e,t){var n=this.state.info;n[e]=t,this.setState({info:n})}function p(e,t,n,r){var a=i.generateCurrPaperStyle.call(this,this.state.resInfo,this.state.currentNCCloudPrinter.printerId,r);this.setState({printSetting:a}),this.props.form.setFormItemsValue(t,{paperWidth:{value:a.paperWidth},paperHeight:{value:a.paperHeight},nccloudPaperDirect:{value:!1}})}function d(e,t,n){var r=this.state.toEndInfo,a=this.state.printSetting;switch(t){case"paperList":var o=i.generateCurrPaperStyle.call(this,this.state.resInfo,this.state.currentNCCloudPrinter.printerId,n);r.currentNccloudPaper=o,r.changetype=2,r.nccloudPaperDirect=!1;break;case"PrinterList":var l=(0,i.findCurrPrinterNameObjById)(this.state.resInfo,n),s=this.state.currentNCCloudPrinter;s.printerId=l.printerId,s.printerName=l.printerName,r.currentNCCloudPrinter=s;break;case"printerStatus":case"twoSide":var p=this.state.currentNCCloudPrinter;p[t]=n,r.currentNCCloudPrinter=p;break;case"paperResourceList":var d=i.generateCurrPaperResource.call(this,this.state.resInfo,n),c=this.state.currentNCCloudPaperResource;c.paperSourceName=d.paperSourceName,c.paperSourceId=d.paperSourceId,r.currentNCCloudPaperResource=c;break;case"templateInfoList":r.changetype=1;break;case"doubleside":r.doubleside=0!=n,r.isDuplex=1!=n;break;case"paperWidth":case"paperHeight":a={paperId:"",paperName:this.state.json.index_015,paperWidth:"paperWidth"===t?n:a.paperWidth,paperHeight:"paperHeight"===t?n:a.paperHeight},this.setState({printSetting:a}),r.currentNccloudPaper=a;default:r[t]=n}i.modifyToEndInfo.call(this,r)}function c(e,t){var n=(0,r.deepClone)(this.state.resInfo),i=this.state.printSetting;delete n.nccloudPrinterList,n.changeType=2,n.currentNccloudPaper={paperId:"",paperName:this.state.json.index_015,paperWidth:"paperWidth"===e?t:i.paperWidth,paperHeight:"paperHeight"===e?t:i.paperHeight},this.resetPageSize(n)}function u(e){var t=(0,r.deepClone)(this.state.resInfo);t.changeType=1,this.initFormData({printTemplateID:e}),this.resetPageSize(t,e),this.setState({changeTem:!0,currPrintTemplateID:e})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.default=function(e){e.newProps;var t=e.params,n=e.url,r=e.enctype,a=(e.hasModal,arguments.length>1&&void 0!==arguments[1]&&arguments[1],""),o="",l=window.parent.location.hash.split("?");if(l&&l[1]){var s=l[1].split("&");s&&s instanceof Array&&s.forEach((function(e){-1!=e.indexOf("=")&&e.split("=")&&e.split("=")instanceof Array&&("n"===e.split("=")[0]&&e.split("=")[1]&&(a=decodeURIComponent(decodeURIComponent(e.split("=")[1]))),"c"===e.split("=")[0]&&e.split("=")[1]&&(o=decodeURIComponent(decodeURIComponent(e.split("=")[1]))))}))}var p=(a||null)+"-"+(window.actionName||null),d={sys_busiaction:p,sys_appcode:o,sys_ts:(new Date).getTime()},c=[{target:"totalPageIframe",method:"POST",enctype:r=function(e){switch(e){case 1:return"multipart/form-data";case 2:return"application/x-www-form-urlencoded";case 3:return"text/plain";default:return"multipart/form-data"}}(r),type:"hidden",action:n||""},document.createElement("form")],u=c[0],f=c[1];Object.assign(f,u);var m=i({},t,d),g=function(e){if(m[e]instanceof Array)m[e].forEach((function(t,n){var i=document.createElement("input");i.type="hidden",i.name=e,i.value=t,f.appendChild(i)}));else{var t=document.createElement("input");t.type="hidden",t.name=e,t.value=m[e],f.appendChild(t)}};for(var h in m)g(h);return document.body.appendChild(f),f.submit(),document.body.removeChild(f),!1};var r,a=n(1);(r=a)&&r.__esModule},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.default=function(e){e.newProps;var t=e.params,n=e.url,r=e.enctype,a=(e.hasModal,arguments.length>1&&void 0!==arguments[1]&&arguments[1],""),o="",l=window.parent.location.hash.split("?");if(l&&l[1]){var s=l[1].split("&");s&&s instanceof Array&&s.forEach((function(e){-1!=e.indexOf("=")&&e.split("=")&&e.split("=")instanceof Array&&("n"===e.split("=")[0]&&e.split("=")[1]&&(a=decodeURIComponent(decodeURIComponent(e.split("=")[1]))),"c"===e.split("=")[0]&&e.split("=")[1]&&(o=decodeURIComponent(decodeURIComponent(e.split("=")[1]))))}))}var p=(a||null)+"-"+(window.actionName||null),d={sys_busiaction:p,sys_appcode:o,sys_ts:(new Date).getTime()},c=[{target:"currentPageIframe",method:"POST",enctype:r=function(e){switch(e){case 1:return"multipart/form-data";case 2:return"application/x-www-form-urlencoded";case 3:return"text/plain";default:return"multipart/form-data"}}(r),type:"hidden",action:n||""},document.createElement("form")],u=c[0],f=c[1];Object.assign(f,u);var m=i({},t,d),g=function(e){if(m[e]instanceof Array)m[e].forEach((function(t,n){var i=document.createElement("input");i.type="hidden",i.name=e,i.value=t,f.appendChild(i)}));else{var t=document.createElement("input");t.type="hidden",t.name=e,t.value=m[e],f.appendChild(t)}};for(var h in m)g(h);return document.body.appendChild(f),f.submit(),document.body.removeChild(f),!1};var r,a=n(1);(r=a)&&r.__esModule},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setStorage=void 0;var i=n(0),r=i.viewModel.setGlobalStorage,a=i.viewModel.getGlobalStorage,o=i.viewModel.removeGlobalStorage,l=function(){var e=a("localStorage","printClientHistory");if(e&&e.includes(",")&&e.split(",").length>5){var t=e.split(","),n=t.pop();r("localStorage","printClientHistory",t.join(",")),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";a("localStorage",e)&&o("localStorage",e)}(n)}};t.setStorage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{return a("localStorage","printClientHistory")&&!a("localStorage","printClientHistory").includes(e)?r("localStorage","printClientHistory",a("localStorage","printClientHistory")+","+e):r("localStorage","printClientHistory",e),l(),r("localStorage",e,t)}catch(e){console.error("localStorage容量溢出"),l()}}},function(e,t,n){var i=n(37);"string"==typeof i&&(i=[[e.i,i,""]]);var r={transform:void 0};n(4)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,".print-preview-model .u-col-md-9,\n.print-preview-model .u-col-md-3 {\n  padding-right: 0;\n}\n.print-preview-model .u-col-md-3 {\n  padding-left: 0;\n  width: 24%;\n}\n.print-preview-model .print-preview-model-dialog {\n  position: fixed;\n  z-index: 100;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.4);\n}\n.print-preview-model .lightapp-component-form {\n  padding: 0;\n}\n.print-preview-model .lightapp-component-form .form-item .form-item-label {\n  width: 100px;\n  min-width: 50px;\n}\n.print-preview-model .lightapp-component-form .form-item .form-item-control {\n  width: calc(100% - 100px);\n}\n.print-preview-model .model-body {\n  position: fixed;\n  z-index: 110;\n  left: 50%;\n  top: 20px;\n  -webkit-transform: translateX(-50%);\n          transform: translateX(-50%);\n  width: 80%;\n  height: 520px;\n  top: 360;\n  background: #fff;\n}\n.print-preview-model .model-header {\n  padding: 12px 15px;\n  background: #f3f3f3;\n  font-size: 16px;\n}\n.print-preview-model .model-header .close-modal {\n  float: right;\n  cursor: pointer;\n}\n.print-preview-model .model-footer {\n  position: relative;\n  padding: 10px 8px;\n  text-align: right;\n  border-top: 1px solid #ddd;\n}\n.print-preview-model .model-footer .u-checkbox {\n  float: left;\n  line-height: 18px;\n}\n.print-preview-model .model-footer .u-checkbox-label {\n  padding-top: 5px;\n}\n.print-preview-model .model-footer .u-checkbox-label::before,\n.print-preview-model .model-footer .u-checkbox-label::after {\n  top: 8px;\n}\n.print-preview-model .print-form-contain {\n  height: 430px;\n  width: 95%;\n  overflow-y: auto;\n}\n.print-preview-model .header-title {\n  padding: 0 0 0 16px;\n  margin-top: 5px;\n  height: 32px;\n  line-height: 32px;\n  font-size: 13px;\n  background-color: #eceff5;\n}\n.print-preview-model .header-title.header-title-first {\n  margin-top: 0;\n}\n.print-preview-model .total-paegs {\n  position: absolute;\n  right: 26%;\n  bottom: 18px;\n}\n.print-preview-model .lightapp-component-form .pageRangeType .form-item-label {\n  width: 16px;\n  min-width: 16px;\n}\n.print-preview-model .lightapp-component-form .pageRangeType .form-item-control {\n  margin-left: 16px;\n  width: calc(100% - 16px);\n}\n.print-preview-model .lightapp-component-form .pageRangeType .u-radio {\n  width: 100%;\n  display: block;\n  height: 28px;\n}\n.print-preview-model .group-form-wrapper {\n  position: relative;\n}\n.print-preview-model .form-item.pageFrom,\n.print-preview-model .form-item.pageTo {\n  position: absolute;\n  left: 80px;\n  top: 38px;\n}\n.print-preview-model .form-item.pageFrom .form-item-label,\n.print-preview-model .form-item.pageTo .form-item-label {\n  width: 20px;\n  min-width: 0;\n}\n.print-preview-model .form-item.pageFrom .form-item-control,\n.print-preview-model .form-item.pageTo .form-item-control {\n  width: 50px;\n}\n.print-preview-model .form-item.pageTo {\n  left: auto;\n  right: 0;\n}\n.print-preview-model .pageFrom,\n.print-preview-model .pageTo {\n  width: 32% !important;\n}\n",""])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.default=function(e,t,n){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if((0,o.isWindowSystem)()){var l=function(i,r,o){r?d(e,t,n,a,i):console.log("未加载到多语资源")};(0,r.getMultiLang)({moduleId:"contains_printOnClient",callback:l})}else(0,r.print)("pdf",t,i({},n,{sysType:(0,o.isWindowSystem)()?"1":"2"}),a)};l(n(2)),l(n(1));var r=n(0),a=l(n(11)),o=n(6);function l(e){return e&&e.__esModule?e:{default:e}}var s=r.Cipher.opaqueDecrypt,p=r.viewModel.getGlobalStorage,d=function(e,t,n,a,o){(0,r.ajax)({url:"/nccloud/riart/printtool/sessionid.do",data:{printTemplateID:n.printTemplateID,nodekey:n.nodekey,appcode:n.appcode,num:"1"},success:function(l){var s=l.success,d=l.data;if(s)if(d.authority){var u=null;d.asid&&p("localStorage",d.asid)&&(u=JSON.parse(p("localStorage",d.asid)).toEndInfo);var m=i({},n,{nccloudsessionid:d.sessionid,ncclouPrintSetting:u,asid:d.asid,isPrinterView:!0,searchTemplate:a,authority:d.authority});u&&u.printTemplateID&&u.nopreview?f(e,t,i({},m,{printTemplateID:a?u.printTemplateID:n.printTemplateID}),o):c(e,t,m,a,o)}else(0,r.toast)({color:"warning",content:o.index_051});else(0,r.toast)({color:"error",content:o.index_047})},error:function(e){console.error(e.message)}})},c=function(e,t,n,r,o){(0,a.default)(e,t,n,r,(function(r){var a=n.ncclouPrintSetting;n.asid&&p("localStorage",n.asid)&&(a=JSON.parse(p("localStorage",n.asid)).toEndInfo),f(e,t,i({},n,r,{ncclouPrintSetting:a,type:n.virType?n.virType:"1"}),o)}))},u=null,f=function(e,t,n,i){var a=null,o=n.beginUrl||window.location.protocol+"//"+window.location.hostname+":"+window.location.port,l=s(p("localStorage","cowboy")),d=p("localStorage","rockin")||!1;if(null!=a&&1==a.readyState)(0,r.toast)({color:"warning",content:i.index_043});else if("WebSocket"in window){a=null;var c=new WebSocket("ws://"+(n.socketIp||"127.0.0.1")+":9999/websocket");c.onopen=function(e){console.log("连接成功"),(u=window.open("")).document.title=i.index_049;var t="<div><h2 style='border-bottom: 1px solid #ddd;padding: 10px 0'>"+i.index_050+'</h2>\n          <div style="width: 560px; margin: 0 auto; position: relative;">\n            <div style="display:inline-block; text-align:center;">\n              <p><img style="width: 34px; height: 34px;" src="https://images.gitee.com/uploads/images/2019/0314/110540_e2d0849a_919028.png"/></p>\n              <span>'+i.index_058+'</span>\n            </div>\n            <p style="width:180px; border-bottom: 1px solid #ddd;position: absolute; top: 23px; left: 48px;"></p>\n            <div style="display:inline-block; text-align:center; margin-left: 150px;">\n              <p><img style="width: 40px; height: 40px;" src="https://images.gitee.com/uploads/images/2019/0314/110508_a5f9c80c_919028.png"/></p>\n              <span>'+i.index_059+'</span>\n            </div>\n            <p style="width:180px; border-bottom: 1px solid #ddd;position: absolute; top: 23px; left: 286px;"></p>\n            <div style="display:inline-block; text-align:center; margin-left: 150px;"">\n              <p><img style="width: 34px; height: 34px;" src="https://images.gitee.com/uploads/images/2019/0314/110518_e60c0d16_919028.png"/></p>\n              <span>...</span>\n            </div>\n          </div>\n        </div>    \n        ';u.document.body.innerHTML=t},c.onclose=function(e){console.log("关闭连接")},c.onerror=function(i){e.openTo("/uap/printExeDown/ExeDownload/main/index.html?pk_message=dd",{appcode:n.appcode,pagecode:n.pagecode,actionUrl:t})},c.onmessage=function(e){var t="<div><h2 style='border-bottom: 1px solid #ddd;padding: 10px 0'>"+i.index_050+'</h2>\n          <div style="width: 560px; margin: 0 auto; position: relative;">\n            <div style="display:inline-block; text-align:center;">\n              <p><img style="width: 34px; height: 34px;" src="https://images.gitee.com/uploads/images/2019/0314/110540_e2d0849a_919028.png"/></p>\n              <span>'+i.index_058+'</span>\n            </div>\n            <p style="width:180px; border-bottom: 1px solid #ddd;position: absolute; top: 23px; left: 48px;"></p>\n            <div style="display:inline-block; text-align:center; margin-left: 150px;">\n              <p><img style="width: 40px; height: 40px;" src="https://images.gitee.com/uploads/images/2019/0314/110508_a5f9c80c_919028.png"/></p>\n              <span>'+i.index_059+'</span>\n            </div>\n            <p style="width:180px; border-bottom: 1px solid #ddd;position: absolute; top: 23px; left: 286px;"></p>\n            <div style="display:inline-block; text-align:center; margin-left: 102px;"">\n              <p><img style="width: 34px; height: 34px;" src="https://images.gitee.com/uploads/images/2019/0314/110533_f85d3142_919028.png"/></p>\n              <span>'+i.index_061+"</span>\n            </div>\n          </div>\n        </div>    \n        ",n="<div><h2 style='border-bottom: 1px solid #ddd;padding: 10px 0'>"+i.index_050+'</h2>\n          <div style="width: 560px; margin: 0 auto; position: relative;">\n            <div style="display:inline-block; text-align:center;">\n              <p><img style="width: 34px; height: 34px;" src="https://images.gitee.com/uploads/images/2019/0314/110540_e2d0849a_919028.png"/></p>\n              <span>'+i.index_058+'</span>\n            </div>\n            <p style="width:180px; border-bottom: 1px solid #ddd;position: absolute; top: 23px; left: 48px;"></p>\n            <div style="display:inline-block; text-align:center; margin-left: 150px;">\n              <p><img style="width: 40px; height: 40px;" src="https://images.gitee.com/uploads/images/2019/0314/110508_a5f9c80c_919028.png"/></p>\n              <span>'+i.index_059+'</span>\n            </div>\n            <p style="width:180px; border-bottom: 1px solid #ddd;position: absolute; top: 23px; left: 286px;"></p>\n            <div style="display:inline-block; text-align:center; margin-left: 96px;"">\n              <p><img style="width: 30px; height: 30px;" src="https://images.gitee.com/uploads/images/2019/0314/110526_3b417874_919028.png"/></p>\n              <span>'+i.index_060+"</span>\n            </div>\n          </div>\n        </div>    \n        ";e&&(Object.keys(e).length||e.data)&&(c.close(),u.document.body.innerHTML=e.data.includes(i.index_056)?t:n)};var f={},m=setInterval((function(){if(c.readyState==WebSocket.OPEN){clearInterval(m),f=Object.assign({},n,{compalteAddress:t,type:n.type,nccloudsessionid:n.nccloudsessionid,download:null,beginUrl:o,aeskey:l,rockin:d}),p("localStorage",n.printTemplateID)&&(f.ncclouPrintSetting=JSON.parse(p("localStorage",f.printTemplateID)).toEndInfo);var e=JSON.stringify(f);c.send(e)}}),1e3)}else(0,r.toast)({color:"warning",content:"不支持websocket"})}}])}));
//# sourceMappingURL=index.js.map