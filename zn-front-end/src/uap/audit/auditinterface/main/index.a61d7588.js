/*! @ncctag {"date":"2020-5-11 23:33:11"} */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nc-lightapp-front"),require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["nc-lightapp-front","react","react-dom"],t):"object"==typeof exports?exports["uap/audit/auditinterface/main/index"]=t(require("nc-lightapp-front"),require("react"),require("react-dom")):e["uap/audit/auditinterface/main/index"]=t(e["nc-lightapp-front"],e.React,e.ReactDOM)}(window,(function(e,t,a){return function(e){var t={};function a(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,a),n.l=!0,n.exports}return a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="../../../../",a(a.s=2)}([function(t,a){t.exports=e},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,n,i){if("pk_glorgbook"==a||"year"==a)!function(e,t,a,n){var i=[],o=[],u=[],f={},s=!1,d=e.form.getFormItemsValue(a,"pk_glorgbook").value,c=e.form.getFormItemsValue(a,"year").value;"pk_glorgbook"==t&&n&&n.refpk&&(s=!0,d=n.refpk);"year"==t&&n&&n.value&&(s=!0);s?(0,r.ajax)({loading:!0,url:"/nccloud/iaudit/interface/initpagedata.do",async:!1,data:{optkey:t,pk_glorgbook:d,year:c},success:function(r){if(r&&r.data){if("year"!=t){var n=r.data.years;n&&n.length>0&&n.map((function(e){return i.push({value:e.periodyear,display:e.periodyear}),i})),e.form.getFormItemsValue(a,"year").value||e.form.setFormItemsValue(a,{year:i[0]})}var s=r.data.months,d=r.data.refSetAssSeq,c=e.form.getFormItemsValue(a,"startmonth").value,l=e.form.getFormItemsValue(a,"endmonth").value;if(s&&s.length>0){for(var m=0;m<s.length;m++)o.push({value:s[m].accperiodmth,display:s[m].accperiodmth}),u.push({value:s[s.length-m-1].accperiodmth,display:s[s.length-m-1].accperiodmth});c&&"year"!=t?e.form.setFormItemsValue(a,{startmonth:{value:c,display:c}}):e.form.setFormItemsValue(a,{startmonth:o[0]}),l&&"year"!=t?e.form.setFormItemsValue(a,{endmonth:{value:l,display:l}}):e.form.setFormItemsValue(a,{endmonth:u[0]})}if(d){for(var p="",b="",_=0;_<d.auditassarea.rows.length;_++)d.auditassarea.rows[_].values.pk_bdinfo&&d.auditassarea.rows[_].values.pk_bdinfo.value&&(p+=","+d.auditassarea.rows[_].values.pk_bdinfo.value,b+=","+d.auditassarea.rows[_].values.pk_bdinfo.display);f.value=p.substring(1),f.display=b.substring(1),e.form.setFormItemsValue(a,{pk_defdoclist:f})}}}}):(i=[],o=[],u=[],f={value:null,display:""},e.form.setFormItemsValue(a,{year:{value:null,display:""},startmonth:{value:null,display:""},endmonth:{value:null,display:""}}),e.form.setFormItemsValue(a,{pk_defdoclist:f}));setTimeout((function(){var t=e.meta.getMeta();t.auditintefface_area.items.find((function(e){return"year"==e.attrcode})).options=i,t.auditintefface_area.items.find((function(e){return"startmonth"==e.attrcode})).options=o,t.auditintefface_area.items.find((function(e){return"endmonth"==e.attrcode})).options=u,e.meta.setMeta(t)}),0)}(e,a,t,n);else if("auditmodules"==a){var o=n.value;setTimeout((function(){o&&o.indexOf("1001Z910000000FA9999")>=0?(e.form.setFormItemsDisabled("auditintefface_area",{fasubj:!1,sumdepsubj:!1,predevsubj:!1}),e.form.setFormItemsRequired("auditintefface_area",{fasubj:!0,sumdepsubj:!0,predevsubj:!0})):(e.form.setFormItemsDisabled("auditintefface_area",{fasubj:!0,sumdepsubj:!0,predevsubj:!0}),e.form.setFormItemsRequired("auditintefface_area",{fasubj:!1,sumdepsubj:!1,predevsubj:!1})),o&&o.indexOf("1003Z3GL100000300001")>=0?(e.form.setFormItemsDisabled("auditintefface_area",{pk_defdoclist:!1}),e.form.setFormItemsRequired("auditintefface_area",{pk_defdoclist:!0})):(e.form.setFormItemsDisabled("auditintefface_area",{pk_defdoclist:!0}),e.form.setFormItemsRequired("auditintefface_area",{pk_defdoclist:!1})),o&&o.indexOf("1003Z710000000306013")>=0?(e.form.setFormItemsDisabled("auditintefface_area",{pk_waitems:!1}),e.form.setFormItemsRequired("auditintefface_area",{pk_waitems:!0})):(e.form.setFormItemsDisabled("auditintefface_area",{pk_waitems:!0}),e.form.setFormItemsRequired("auditintefface_area",{pk_waitems:!1})),o&&o.indexOf("1003Z310000000000003")>=0?(e.form.setFormItemsDisabled("auditintefface_area",{arsubj:!1,apsubj:!1}),e.form.setFormItemsRequired("auditintefface_area",{arsubj:!0,apsubj:!0})):(e.form.setFormItemsDisabled("auditintefface_area",{arsubj:!0,apsubj:!0}),e.form.setFormItemsRequired("auditintefface_area",{arsubj:!1,apsubj:!1}))}),0)}};var r=a(0)},function(e,t,a){"use strict";var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),n=a(3),i=l(n),o=l(a(4)),u=a(0),f=l(a(5)),s=l(a(6)),d=l(a(1)),c=l(a(7));function l(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={json:{}},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentWillMount",value:function(){var e=this;this.props.MultiInit.getMultiLang({moduleId:"12500101",domainName:"uap",callback:function(t,a,r){a?e.setState({json:t,inlt:r}):console.log("未加载到多语资源")}})}},{key:"componentDidMount",value:function(){this.initPageData()}},{key:"initPageData",value:function(){var e=this;(0,u.ajax)({loading:!0,url:"/nccloud/iaudit/interface/init.do",success:function(t){if(console.log(t),t&&t.data&&t.data.auditintefface_area){e.props.form.setAllFormValue({auditintefface_area:t.data.auditintefface_area});var a={refpk:t.data.auditintefface_area.rows[0].values.pk_glorgbook.value},r=t.data.auditintefface_area.rows[0].values.auditmodules;(0,d.default)(e.props,"auditintefface_area","pk_glorgbook",a,null),(0,d.default)(e.props,"auditintefface_area","auditmodules",r,null)}else e.props.form.EmptyAllFormValue("auditintefface_area")}})}},{key:"render",value:function(){var e=this.props,t=e.form,a=e.button,r=e.BillHeadInfo.createBillHeadInfo,n=(a.createButtonApp,t.createForm),o=u.base.NCDiv;return i.default.createElement("div",{className:"nc-bill-extCard"},i.default.createElement(o,{areaCode:o.config.HEADER},i.default.createElement("div",{className:"nc-bill-header-area"},i.default.createElement("div",{className:"header-title-area"},r({title:"GB/T 24589.1-2010",initShowBackBtn:!1})),i.default.createElement("div",{className:"header-button-area"},this.props.button.createButtonApp({area:"main_area",onButtonClick:s.default.bind(this),popContainer:document.querySelector(".header-button-area")})))),i.default.createElement("div",{className:"nc-bill-form-area"},n("auditintefface_area",{onAfterEvent:d.default.bind(this),onBeforeEvent:c.default.bind(this)})))}}]),t}(n.Component),p=(0,u.createPage)({initTemplate:f.default})(m);o.default.render(i.default.createElement(p,null),document.querySelector("#app"))},function(e,a){e.exports=t},function(e,t){e.exports=a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.MultiInit.getMultiLang({moduleId:"12500101",domainName:"uap",callback:function(t,a,r){a?e.createUIDom({pagecode:"12500101_CARD"},(function(a){if(a){if(a.button){var r=a.button;e.button.setButtons(r)}if(a.template){var n=a.template;n.auditintefface_area.status="edit",n.auditintefface_area.items.find((function(e){return"pk_corp"==e.attrcode})).isMultiSelectedEnabled=!0,n.auditintefface_area.items.find((function(e){return"pk_glorgbook"==e.attrcode})).fieldDisplayed="refname",n.auditintefface_area.items.find((function(e){return"auditmodules"==e.attrcode})).refcode="uap/refer/riart/auditmoudle/index",n.auditintefface_area.items.find((function(e){return"pk_bdinfo"==e.attrcode})).queryCondition=function(){return{GridRefActionExt:"nccloud.web.iaudit.audit.refer.sqlbuilder.AuditDefdoclistRefSqlbuilder"}},n.auditintefface_area.items.find((function(e){return"pk_bdinfo"==e.attrcode})).refName=t["12500101-000009"],n.auditintefface_area.items.find((function(e){return"pk_bdinfo"==e.attrcode})).isMultiSelectedEnabled=!0,n.GL_AREA.items.find((function(e){return"pk_defdoclist"==e.attrcode})).refcode="uap/refer/riart/auditinterface/index",n.GL_AREA.items.find((function(e){return"pk_defdoclist"==e.attrcode})).refName=t["12500101-000001"],function(e,t){var a={placeholder:e["12500101-000005"],rootNode:{refname:e["12500101-000005"],refpk:"root"},refType:"tree",refName:e["12500101-000005"],isMultiSelectedEnabled:!1,refCode:"uapbd.refer.fiacc.AccCharTreetRef",queryTreeUrl:"/nccloud/uapbd/fiacc/AccChartTreeRef.do",treeConfig:{name:[e["12500101-000006"],e["12500101-000007"]],code:["refcode","refname"]}};t.arap_area.items.find((function(e){return"arsubj"==e.attrcode})).unitProps=a,t.arap_area.items.find((function(e){return"apsubj"==e.attrcode})).unitProps=a,t.arap_area.items.find((function(e){return"arsubj"==e.attrcode})).isShowUnit=!0,t.arap_area.items.find((function(e){return"apsubj"==e.attrcode})).isShowUnit=!0,t.arap_area.items.find((function(e){return"arsubj"==e.attrcode})).refName=e["12500101-000008"],t.arap_area.items.find((function(e){return"apsubj"==e.attrcode})).refName=e["12500101-000008"],t.fa_area.items.find((function(e){return"fasubj"==e.attrcode})).unitProps=a,t.fa_area.items.find((function(e){return"predevsubj"==e.attrcode})).unitProps=a,t.fa_area.items.find((function(e){return"sumdepsubj"==e.attrcode})).unitProps=a,t.fa_area.items.find((function(e){return"fasubj"==e.attrcode})).refName=e["12500101-000008"],t.fa_area.items.find((function(e){return"predevsubj"==e.attrcode})).refName=e["12500101-000008"],t.fa_area.items.find((function(e){return"sumdepsubj"==e.attrcode})).refName=e["12500101-000008"],t.fa_area.items.find((function(e){return"fasubj"==e.attrcode})).isShowUnit=!0,t.fa_area.items.find((function(e){return"predevsubj"==e.attrcode})).isShowUnit=!0,t.fa_area.items.find((function(e){return"sumdepsubj"==e.attrcode})).isShowUnit=!0}(t,n),e.meta.setMeta(n)}}})):console.log("未加载到多语资源")}})}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){switch(t){case"export":!function(e){if(!e.props.form.isCheckNow("auditintefface_area"))return;(0,r.ajax)({url:"/nccloud/iaudit/interface/export.do",data:{auditintefface_area:{auditintefface_area:e.props.form.getAllFormValue("auditintefface_area")},startMonth:JSON.stringify(e.props.meta.getMeta().auditintefface_area.items.find((function(e){return"startmonth"==e.attrcode})).options)},loading:!0,success:function(e){if(e&&e.data)if(e.data.status){var t={url:"/nccloud/iaudit/interface/download.do",enctype:2,params:{path:e.data.path,fileName:e.data.fileName}};(0,r.formDownload)(t)}else(0,r.toast)({content:e.data.errmsg,color:"danger"})}})}(this)}};var r=a(0)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,r,i){var f=null,s=e.meta.getMeta(),d=!0,c=this.props.form.getFormItemsValue(t,"pk_corp").value;switch(a){case"pk_defdoclist":var l=i.pk_glorgbook.value;s.GL_AREA.items.find((function(e){return"pk_defdoclist"==e.attrcode})).queryCondition=function(){return{pk_glorgbook:l}},s.GL_AREA.items.find((function(e){return"pk_defdoclist"==e.attrcode})).cancel=u.bind(this);case"arsubj":s.arap_area.items.find((function(e){return"arsubj"==e.attrcode})).unitCondition=function(){return{pk_orgs:c}};case"apsubj":s.arap_area.items.find((function(e){return"apsubj"==e.attrcode})).unitCondition=function(){return{pk_orgs:c}};case"fasubj":s.fa_area.items.find((function(e){return"fasubj"==e.attrcode})).unitCondition=function(){return{pk_orgs:c}};case"sumdepsubj":s.fa_area.items.find((function(e){return"sumdepsubj"==e.attrcode})).unitCondition=function(){return{pk_orgs:c}};case"predevsubj":s.fa_area.items.find((function(e){return"predevsubj"==e.attrcode})).unitCondition=function(){return{pk_orgs:c}};case"reportobj":case"pk_waitems":var m=i.auditmodules.value;(!m||m.length<=0)&&(f=s.auditintefface_area.items.find((function(e){return"auditmodules"==e.attrcode})).label,(0,n.toast)({color:"warning",content:this.state.json["12500101-000000"]+f}),d=!1);break;case"year":case"startmonth":case"endmonth":var p={refpk:i.pk_glorgbook.value};(0,o.default)(e,t,"pk_glorgbook",p)}return e.meta.setMeta(s),d};var r,n=a(0),i=a(1),o=(r=i)&&r.__esModule?r:{default:r};function u(e){var t=this;e&&e.props&&(0,n.ajax)({loading:!1,url:"/nccloud/iaudit/ref/refSetAssSeqRefTableAction.do",data:{pk_glorgbook:t.props.form.getFormItemsValue("auditintefface_area","pk_glorgbook").value},success:function(e){if(e&&e.data&&e.data.auditassarea){var a="",r="";e.data.auditassarea.rows.map((function(e){e&&e.values&&e.values.pk_bdinfo&&e.values.pk_bdinfo.value&&(a+=","+e.values.pk_bdinfo.value,r+=","+e.values.pk_bdinfo.display)})),t.props.form.setFormItemsValue("auditintefface_area",{pk_defdoclist:{value:a.substring(1),display:r.substring(1)}})}else t.props.form.setFormItemsValue("auditintefface_area",{pk_defdoclist:{value:null,display:null}})}})}}])}));
//# sourceMappingURL=index.a61d7588.js.map