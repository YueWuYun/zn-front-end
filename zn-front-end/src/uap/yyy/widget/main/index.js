/*! @ncctag {"date":"2020-5-11 23:45:48"} */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom"),require("nc-lightapp-front")):"function"==typeof define&&define.amd?define(["react","react-dom","nc-lightapp-front"],t):"object"==typeof exports?exports["uap/yyy/widget/main/index"]=t(require("react"),require("react-dom"),require("nc-lightapp-front")):e["uap/yyy/widget/main/index"]=t(e.React,e.ReactDOM,e["nc-lightapp-front"])}(window,(function(e,t,n){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="../../../../",n(n.s=10)}([function(t,n){t.exports=e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={white:"#FFFFFF",paleGrey:"#F3F3F3",lightGrey:"#E4E4E4",mediumGrey:"#DBDBDB",grey:"#979797",greyOpa2:"rgba(151, 151, 151, 0.2)",greyOpa6:"rgba(151, 151, 151, 0.6)",greyBlack:"#555555",black:"#111111",blue:"#289CF2",jadeGreen:"#41CCB3",orange:"#FF8B00",lightOrange:"rgba(245,106,0, 0.1)",scarlet:"#E14C46"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={WAITING:"waiting",PENDING:"pending",COMPLETE:"complete",ERROR:"error"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6);t.default=function(e){var t={url:"/nccloud/platform/appregister/yyyhandler.do",method:"post",data:(e=e||{}).data||{},loading:!1,success:function(t){t&&t.success&&t.data?"function"==typeof e.success&&e.success(t.data):"function"==typeof e.error&&e.error()},error:function(t){e.error&&e.error(t)},headers:{"Content-Type":"application/json;charset=UTF-8"}};setTimeout((function(){(0,r.ajax)(t)}),1e3)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){var n=this,r=void 0,o=void 0;"PENDING"===n._status&&setTimeout((function(){n._status=e,o="FULFILLED"===n._status;for(var a=n[o?"_resolves":"_rejects"];r=a.shift();)t=r.call(n,t)||t;n[o?"_value":"_reason"]=t,n._resolves=n._rejects=void 0}))},o=function e(t){if("function"!=typeof t)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof e))return new e(t);var n=this;n._value=null,n._reason=null,n._status="PENDING",n._resolves=[],n._rejects=[];t((function(e){r.apply(n,["FULFILLED"].concat([e]))}),(function(e){r.apply(n,["REJECTED"].concat([e]))}))};o.prototype.then=function(e,t){var n=this;return new o((function(r,o){function a(t){var n="function"==typeof e&&e(t)||t;n&&"function"==typeof n.then?n.then((function(e){r(e)}),(function(e){o(e)})):r(n)}function i(e){e="function"==typeof t&&t(e)||e,o(e)}"PENDING"===n._status?(n._resolves.push(a),n._rejects.push(i)):"FULFILLED"===n._status?a(n._value):"REJECTED"===n._status&&i(n._reason)}))},o.prototype.catch=function(e){return this.then(void 0,e)},o.prototype.delay=function(e,t){return this.then((function(n){return o.delay(e,t||n)}))},o.delay=function(e,t){return new o((function(n,r){setTimeout((function(){n(t),console.log("1")}),e)}))},o.resolve=function(e){return new o((function(t,n){t(e)}))},o.reject=function(e){return o((function(t,n){n(e)}))},o.all=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to all.");return o((function(t,n){var r=0,o=[],a=e.length,i=a;function u(e){return function(n){!function(e,n){o[e]=n,0==--i&&t(o)}(e,n)}}function l(e){n(e)}for(;r<a;r++)e[r].then(u(r),l)}))},o.race=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to race.");return o((function(t,n){var r=0,o=e.length;function a(e){t(e)}function i(e){n(e)}for(;r<o;r++)e[r].then(a,i)}))},t.default=o},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.background="../../../public/img/yyy/bg.svg",t.find="../../../public/img/yyy/find.svg",t.user="../../../public/img/yyy/user.svg",t.net="../../../public/img/yyy/net.svg",t.link="../../../public/img/yyy/link.svg",t.computer="../../../public/img/yyy/computer.svg"},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var o=(i=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),a=r.sources.map((function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"}));return[n].concat(a).concat([o]).join("\n")}var i;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var a=this[o][0];"number"==typeof a&&(r[a]=!0)}for(o=0;o<e.length;o++){var i=e[o];"number"==typeof i[0]&&r[i[0]]||(n&&!i[2]?i[2]=n:n&&(i[2]="("+i[2]+") and ("+n+")"),t.push(i))}},t}},function(e,t,n){var r,o,a={},i=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=r.apply(this,arguments)),o}),u=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e.call(this,n)),t[n]}}((function(e){return document.querySelector(e)})),l=null,s=0,c=[],f=n(19);function d(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=a[r.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](r.parts[i]);for(;i<r.parts.length;i++)o.parts.push(m(r.parts[i],t))}else{var u=[];for(i=0;i<r.parts.length;i++)u.push(m(r.parts[i],t));a[r.id]={id:r.id,refs:1,parts:u}}}}function p(e,t){for(var n=[],r={},o=0;o<e.length;o++){var a=e[o],i=t.base?a[0]+t.base:a[0],u={css:a[1],media:a[2],sourceMap:a[3]};r[i]?r[i].parts.push(u):n.push(r[i]={id:i,parts:[u]})}return n}function y(e,t){var n=u(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=c[c.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),c.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function h(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=c.indexOf(e);t>=0&&c.splice(t,1)}function b(e){var t=document.createElement("style");return e.attrs.type="text/css",g(t,e.attrs),y(e,t),t}function g(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function m(e,t){var n,r,o,a;if(t.transform&&e.css){if(!(a=t.transform(e.css)))return function(){};e.css=a}if(t.singleton){var i=s++;n=l||(l=b(t)),r=w.bind(null,n,i,!1),o=w.bind(null,n,i,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",g(t,e.attrs),y(e,t),t}(t),r=_.bind(null,n,t),o=function(){h(n),n.href&&URL.revokeObjectURL(n.href)}):(n=b(t),r=x.bind(null,n),o=function(){h(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=i()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=p(e,t);return d(n,t),function(e){for(var r=[],o=0;o<n.length;o++){var i=n[o];(u=a[i.id]).refs--,r.push(u)}e&&d(p(e,t),t);for(o=0;o<r.length;o++){var u;if(0===(u=r[o]).refs){for(var l=0;l<u.parts.length;l++)u.parts[l]();delete a[u.id]}}}};var v,E=(v=[],function(e,t){return v[e]=t,v.filter(Boolean).join("\n")});function w(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=E(t,o);else{var a=document.createTextNode(o),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(a,i[t]):e.appendChild(a)}}function x(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function _(e,t,n){var r=n.css,o=n.sourceMap,a=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||a)&&(r=f(r)),o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var i=new Blob([r],{type:"text/css"}),u=e.href;e.href=URL.createObjectURL(i),u&&URL.revokeObjectURL(u)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=l(n(0)),a=l(n(5)),i=l(n(11)),u=l(n(12));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(21);var f=function(e){function t(){return s(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"render",value:function(){var e=void 0;return location.hash.indexOf("#activation")>-1?(document.title="友云音",e=o.default.createElement(u.default,null)):e=o.default.createElement("div",{id:"yyy-board"},o.default.createElement("div",{className:"logo"}),o.default.createElement(i.default,null)),e}}]),t}(o.default.Component);location.hash.indexOf("#activation")>-1&&a.default.render(o.default.createElement(f,null),document.querySelector("#app")),t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=u(n(0)),a=u(n(3)),i=n(6);function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return t.activate=t.activate.bind(n),n.state={title:"友云音已经开始数字化管理您的业务",activated:0,waiting:1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentWillMount",value:function(){var e=this;if(this.state.waiting){var t=new XMLHttpRequest;t.onload=function(){t.status>=200&&t.status<300||304===t.status?e.setState({waiting:0,activated:!0,title:"使用友云音数字化管理您的业务性能"}):e.checkActivation()},t.onerror=t.onabort=function(){e.checkActivation()},t.open("head","/yyy/gettidappid"),t.send(null)}}},{key:"checkActivation",value:function(){var e=this;(0,a.default)({data:{type:"activation"},success:function(t){e.setState({waiting:0,activated:"0"===t.error,title:"0"===t.error?"友云音已经开始数字化管理您的业务":"您的首席智能运维官"})},error:function(){e.setState({waiting:0,activated:0})}})}},{key:"render",value:function(){var e=this.state.activated,n=null;return this.state.waiting||(n=e?o.default.createElement("div",{className:"welcome"},o.default.createElement("p",{className:"title"},this.state.title),o.default.createElement("button",{onClick:t.openYyy},"立即进入")):o.default.createElement("div",{className:"welcome"},o.default.createElement("p",{className:"title"},"您的首席智能运维官"),o.default.createElement("p",{className:"sub-title"},"新一代智能运维平台，一站式解决性能难题"),o.default.createElement("button",{onClick:t.activate},"点击激活"))),n}}],[{key:"activate",value:function(){i.pageTo.openTo("/nccloud/resources/uap/yyy/widget/main/index.html#activation",{appcode:"00220701"})}},{key:"openYyy",value:function(){window.open("https://yyy.yonyoucloud.com/ycm-appmonitor/home.html?ra="+Math.random())}}]),t}(o.default.Component);t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=d(n(0)),a=d(n(5)),i=d(n(13)),u=n(7),l=d(n(16)),s=d(n(1));n(17);var c=d(n(2)),f=d(n(20));function d(e){return e&&e.__esModule?e:{default:e}}var p={complete:"✓",error:"!"},y={container:{header:{height:160,logo:{width:"100%",height:"100%",backgroundImage:"url("+u.background+")"}},body:{result:{position:"fixed",bottom:0,width:1200,height:80,zIndex:100,backgroundColor:s.default.paleGrey}}}},h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={errors:[],status:c.default.WAITING},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"showSolution",value:function(){this.refs["yyy-solution"].show()}},{key:"complete",value:function(e){e&&e.length>0?this.setState({errors:e,status:c.default.ERROR}):this.setState({errors:[],status:c.default.COMPLETE})}},{key:"reactivate",value:function(){var e=document.getElementById("yyy-activation-manager");a.default.unmountComponentAtNode(e),a.default.render(o.default.createElement(i.default,{complete:this.complete.bind(this)}),e),this.setState({errors:[],status:c.default.WAITING})}},{key:"render",value:function(){var e=this.state.status,t=p[e],n=y.container;return o.default.createElement("div",{id:"yyy-activation-board",className:"activation-board"},o.default.createElement("div",{style:n.header,className:"activation-board-header"},o.default.createElement("div",{style:n.header.logo})),o.default.createElement("div",{style:n.body,className:"activation-board-body"},o.default.createElement("div",{style:n.body.result,className:e===c.default.ERROR?"visible":"invisible"},o.default.createElement(l.default,{indicator:t,status:this.state.status,showSolution:this.showSolution.bind(this),reactivate:this.reactivate.bind(this)})),o.default.createElement(i.default,{complete:this.complete.bind(this)})),o.default.createElement(f.default,{ref:"yyy-solution",errors:this.state.errors}))}}]),t}(o.default.Component);t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=s(n(0)),a=s(n(14)),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(7)),u=s(n(3)),l=s(n(4));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={inProgress:!0,activated:!1},n.errors=[],n.tid="",n.appid="",n.checkAgentStatus=n.checkAgentStatus.bind(n),n.checkJvmStatus=n.checkJvmStatus.bind(n),n.checkJsStatus=n.checkJsStatus.bind(n),n.checkNetStatus=n.checkNetStatus.bind(n),n.activeYyy=n.activeYyy.bind(n),n.updateConfig=n.updateConfig.bind(n),n.addError=n.addError.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentDidMount",value:function(){var e=this;console.log("stage module mounted");var t=this,n=new l.default((function(e){e()})),r=function(e,t){t()};n.then((function(t){return t?new l.default(r):e.refs.stg1.execute()})).then((function(t){return t?new l.default(r):e.refs.stg2.execute()})).then((function(t){return t?new l.default(r):e.refs.stg3.execute()})).then((function(t){return t?new l.default(r):e.refs.stg4.execute()})).then((function(t){return t?new l.default(r):e.refs.stg5.execute()})).then((function(e){console.log("activation completed.")})).catch((function(e){console.log("activation failed."),t.complete()}))}},{key:"addError",value:function(e){var t=void 0,n=!0,r=!1,o=void 0;try{for(var a,i=this.errors[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var u;if(a.value.code===e.code){t=!0;break}}}catch(u){r=!0,o=u}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}t||this.errors.push(e)}},{key:"handleError",value:function(e){var t=this;return function(n){var r=n.response&&n.response.status||"01151999",o={code:r,msg:n.response&&n.response.statusText||n.message||""};t.addError(o),e(r)}}},{key:"checkAgentStatus",value:function(e,t){console.log("checking agent status.");var n=this;(0,u.default)({data:{type:"agent_status"},success:function(r){"0"!==r.error?(n.addError({code:r.error,msg:r.msg+"。未启动Agent的主机列表："+r.data}),t(r.error)):e()},error:n.handleError(t)})}},{key:"checkJvmStatus",value:function(e,t){var n=this;(0,u.default)({data:{type:"jvm_installation"},success:function(r){"0"!==r.error?(n.addError({code:r.error,msg:r.msg+"。未安装JVM的主机列表："+r.data}),t(r.error)):e()},error:n.handleError(t)})}},{key:"checkJsStatus",value:function(e,t){var n=this;(0,u.default)({data:{type:"js_installation"},success:function(r){"0"!==r.error?(n.addError({code:r.error,msg:r.msg+"。未安装JS的主机列表："+r.data}),t(r.error)):e()},error:n.handleError(t)})}},{key:"checkNetStatus",value:function(e,t){console.log("checking net status.");var n=this;(0,u.default)({data:{type:"net_status"},success:function(r){"0"!==r.error?(n.addError({code:r.error,msg:r.msg}),t(r.error)):e()},error:n.handleError(t)})}},{key:"activeYyy",value:function(e,t){var n=this;(0,u.default)({data:{type:"activate"},success:function(r){if("0"===r.error&&r.data)n.tid=r.data.tid,n.appid=r.data.appid,e();else{var o=r.error||"01151999";n.addError({code:o,msg:r.msg}),t(o)}},error:n.handleError(t)})}},{key:"updateConfig",value:function(e,t){var n=this;(0,u.default)({data:{type:"update",tid:n.tid,appid:n.appid},success:function(r){"0"!==r.error?(n.addError({code:r.error,msg:"01151009"===r.error?r.msg:r.msg+"。更新失败的主机列表："+r.data}),t(r.error)):e()},error:n.handleError(t)})}},{key:"complete",value:function(){this.props.complete(this.errors)}},{key:"render",value:function(){return o.default.createElement("div",{id:"yyy-activation-manager",className:"activation-panel"},o.default.createElement(a.default,{ref:"stg1",sn:1,title:"初始化",items:[{icon:i.find,title:"检查Agent状态",action:this.checkAgentStatus}]}),o.default.createElement(a.default,{ref:"stg2",sn:2,title:"组件检查",items:[{icon:i.find,title:"检查JS探针状态",action:this.checkJsStatus},{icon:i.find,title:"检查JVM探针状态",action:this.checkJvmStatus},{icon:i.link,title:"检查网络状态",action:this.checkNetStatus}]}),o.default.createElement(a.default,{ref:"stg3",sn:3,title:"注册账号",items:[{icon:i.computer,title:"注册账号",action:this.activeYyy}]}),o.default.createElement(a.default,{ref:"stg4",sn:4,title:"更新配置",items:[{icon:i.computer,title:"更新配置信息",action:this.updateConfig}]}),o.default.createElement(a.default,{ref:"stg5",sn:5,title:"重启NCCloud",index:"last",items:[{icon:i.computer,title:"请重启NCCloud应用！监控将在NCCloud重启后生效！"}]}))}}]),t}(o.default.Component);t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=s(n(0)),a=s(n(2)),i=s(n(15)),u=s(n(1)),l=s(n(4));function s(e){return e&&e.__esModule?e:{default:e}}var c={complete:"✓",error:"!"},f={width:730,header:{height:30,marginTop:8,marginLeft:-14,marginBottom:8,sn:{display:"inline-block",width:30,height:30,border:"2px solid",borderRadius:15,lineHeight:"26px",textAlign:"center",waiting:{borderColor:u.default.grey,color:u.default.grey},pending:{borderColor:u.default.jadeGreen,color:u.default.white},complete:{borderColor:u.default.jadeGreen,color:u.default.jadeGreen},error:{borderColor:u.default.orange,color:u.default.orange}},title:{display:"inline-block",width:175,height:30,marginLeft:18,fontSize:16,fontWeight:"bold",fontFamily:"MicrosoftYaHei",color:"rgba(17, 17, 17, 1)",lineHeight:"30px"}},items:{padding:"8px 0 8px 32px",waiting:{borderLeft:"2px solid "+u.default.grey},pending:{borderLeft:"2px solid "+u.default.jadeGreen},complete:{borderLeft:"2px solid "+u.default.jadeGreen},error:{borderLeft:"2px solid "+u.default.orange}}},d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.props.items=n.props.items||[],n.state={status:a.default.WAITING},n.queues=n.props.items.filter((function(e){return"function"==typeof e.action})),n.failedTaskNum=0,n.getSn=n.getSn.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"updateState",value:function(){var e=void 0;e=this.failedTaskNum>0?a.default.ERROR:a.default.COMPLETE,this.setState({status:e})}},{key:"execute",value:function(){var e=this;console.log("stage "+this.props.title+" is executing tasks");for(var t=new l.default((function(t){e.setState({status:a.default.PENDING}),t()})),n=function(n){var r=e.refs[n].execute.bind(e.refs[n]);t=t.then((function(t){return t&&(e.failedTaskNum+=1),r()}))},r=0;r<this.queues.length;r++)n(r);return t=t.then((function(t){t&&(e.failedTaskNum+=1),e.updateState();var n=e;return new l.default((function(e,t){n.failedTaskNum>0?t("error occurs"):e()}))}))}},{key:"componentDidMount",value:function(){console.log("stage "+this.props.title+" mounted")}},{key:"shouldComponentUpdate",value:function(){return console.log("stage "+this.props.title+" updating"),!0}},{key:"getSn",value:function(e){return e!==a.default.COMPLETE&&e!==a.default.ERROR||"last"===this.props.index?this.props.sn:c[e]}},{key:"render",value:function(){var e=this.state.status,n=t.getStyle(e);return"last"===this.props.index&&(n.items.borderLeft="none"),o.default.createElement("div",{className:"yyy-stage",style:n},o.default.createElement("div",{className:"yyy-stage-header",style:n.header},o.default.createElement("div",{style:n.header.sn},this.getSn(e)),o.default.createElement("div",{style:n.header.title},this.props.title)),o.default.createElement("div",{className:"yyy-stage-steps",style:n.items},this.props.items&&this.props.items.map((function(e,t){return o.default.createElement(i.default,{ref:t,icon:e.icon,title:e.title,action:e.action})}))||""))}}],[{key:"getStyle",value:function(e){var n=Object.assign({},f);return n.header.sn=t.getHeaderSnStyle(e),n.items=t.getItemsBorderStyle(e),e===a.default.WAITING?n.opacity=.2:n.opacity=1,n}},{key:"getHeaderSnStyle",value:function(e){var t=Object.assign({},f.header.sn,f.header.sn[e]);return e===a.default.PENDING?t.backgroundColor=u.default.jadeGreen:t.backgroundColor="transparent",t}},{key:"getItemsBorderStyle",value:function(e){return Object.assign({},f.items,f.items[e])}}]),t}(o.default.Component);t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=l(n(0)),a=l(n(1)),i=l(n(2)),u=l(n(4));function l(e){return e&&e.__esModule?e:{default:e}}var s={frame:{display:"inline-block",width:510,height:40,border:"1px solid",borderColor:a.default.grey,borderRadius:3,marginTop:8,marginBottom:8,paddingLeft:18,paddingRight:30,lineHeight:"38px"},content:{icon:{verticalAlign:"middle",marginRight:14},statusText:{display:"inline-block",float:"right",fontSize:12}},error:{color:a.default.orange,paddingLeft:"1em"}},c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={status:i.default.WAITING},"function"==typeof n.props.action&&(n.props.action=function(){}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"execute",value:function(){var e=this;return new u.default((function(t,n){e.setState({status:i.default.PENDING}),e.props.action((function(){e.setState({status:i.default.COMPLETE}),t()}),(function(n){e.setState({error:n,status:i.default.ERROR}),t(n)}))}))}},{key:"componentDidMount",value:function(){console.log("step "+this.props.title+" mounted")}},{key:"shouldComponentUpdate",value:function(){return console.log("step "+this.props.title+" updating"),!0}},{key:"render",value:function(){var e=this.state.status,n=t.getFrameStyle(e),r=s.content,a=e===i.default.ERROR?s.error:Object.assign({},s.error,{display:"none"});return o.default.createElement("div",null,o.default.createElement("div",{style:n},o.default.createElement("div",{style:r},o.default.createElement("img",{style:s.content.icon,src:this.props.icon}),o.default.createElement("span",null,this.props.title),o.default.createElement("div",{style:s.content.statusText},t.getExecutionStatusText(this.state.status)))),o.default.createElement("span",{style:a},"错误码：",this.state.error))}}],[{key:"getExecutionStatusText",value:function(e){if(e===i.default.PENDING)return o.default.createElement("span",{style:{color:a.default.blue}},"执行中",o.default.createElement("span",{className:"yyy-loader-dotting",style:{verticalAlign:"baseline"}}));if(e===i.default.COMPLETE){var t={border:"1px solid "+a.default.jadeGreen,borderRadius:9,padding:"0 8px",lineHeight:"16px",color:a.default.jadeGreen};return o.default.createElement("span",{style:t},"成功")}if(e===i.default.ERROR){var n={border:"1px solid "+a.default.orange,borderRadius:9,padding:"0 8px",lineHeight:"16px",color:a.default.orange};return o.default.createElement("span",{style:n},"异常")}return"待执行"}},{key:"getFrameStyle",value:function(e){var t=Object.assign({},s.frame);return e===i.default.ERROR?(t.color=a.default.orange,t.borderColor=a.default.orange,t.backgroundColor=a.default.lightOrange):(t.color="inherit",t.borderColor=a.default.grey,t.backgroundColor="transparent"),t}}]),t}(o.default.Component);t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=u(n(0)),a=u(n(2)),i=u(n(1));function u(e){return e&&e.__esModule?e:{default:e}}var l={position:"relative",width:700,margin:"auto",paddingTop:20,description:{display:"inline-block",indicator:{display:"inherit",marginRight:14,width:36,height:36,border:"2px solid",borderRadius:18,lineHeight:"32px",textAlign:"center"},text:{fontSize:14,color:i.default.greyBlack}},complete:{borderColor:i.default.jadeGreen,color:i.default.jadeGreen},error:{borderColor:i.default.orange,color:i.default.orange},next:{display:"inline-block",float:"right",lineHeight:"36px"},faqButton:{margin:"0 8px",width:143,height:32,background:i.default.scarlet,border:"none",borderRadius:3,color:i.default.white,cursor:"pointer"},reactivateButton:{margin:"0 8px",width:96,height:32,background:i.default.lightGrey,border:"none",borderRadius:3,cursor:"pointer"}},s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={status:a.default.WAITING},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"openYyy",value:function(){window.location.replace("https://yyy.yonyoucloud.com/ycm-appmonitor/home.html?ra="+Math.random())}},{key:"render",value:function(){var e=void 0,t=void 0;return this.props.status===a.default.ERROR?(e=o.default.createElement("div",{style:l.description},o.default.createElement("div",{style:Object.assign({},l.description.indicator,l.error)},this.props.indicator),o.default.createElement("span",{style:l.description.text},"帐号激活出现异常！")),t=o.default.createElement("div",{style:l.next},o.default.createElement("button",{style:l.faqButton,onClick:this.props.showSolution},"查看解决方案"),o.default.createElement("button",{style:l.reactivateButton,onClick:this.props.reactivate},"重新激活"))):this.props.status===a.default.COMPLETE&&(e=o.default.createElement("div",{style:l.description},o.default.createElement("div",{style:Object.assign({},l.description.indicator,l.complete)},this.props.indicator),o.default.createElement("span",{style:l.description.text},"帐号激活成功")),t=o.default.createElement("div",{style:l.next},o.default.createElement("span",null,"请重启NCCloud应用完成激活。"),o.default.createElement("button",{style:l.faqButton,onClick:this.openYyy},"点击进入友云音"))),o.default.createElement("div",{id:"YYY-Result",style:l},e,t)}}]),t}(o.default.Component);t.default=s},function(e,t,n){var r=n(18);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};n(9)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(8)(!1)).push([e.i,'#app {\n  background: none !important;\n}\n#yyy-activation-board {\n  width: 100%;\n  max-width: 1200px;\n  height: auto !important;\n  margin: auto;\n  padding: 20px 0;\n  font-family: "\\5FAE\\8F6F\\96C5\\9ED1", "Microsoft YaHei", "PingFangSC-Regular", "arial", "sans-serif";\n  font-size: 14px;\n  /* IE8 */\n  /* IE9+ */\n}\n#yyy-activation-board pre {\n  margin: 1em 0;\n  line-height: 16px;\n}\n#yyy-activation-board b {\n  font-weight: bold;\n}\n#yyy-activation-board .visible {\n  display: block;\n}\n#yyy-activation-board .invisible {\n  display: none;\n}\n#yyy-activation-board .activation-board-body {\n  height: 800px;\n  padding-top: 20px;\n  background-color: #FFFFFF;\n}\n#yyy-activation-board .activation-board-body .activation-panel {\n  width: 600px;\n  margin: 0 auto 40px;\n  padding-top: 20px;\n}\n#yyy-activation-board .activation-board-body .activation-panel .yyy-stage {\n  width: 730px;\n}\n#yyy-activation-board .yyy-loader-dotting {\n  display: inline-block;\n  width: 10px;\n  min-height: 2px;\n  margin-left: 2px;\n  padding-left: 2px;\n  padding-right: 2px;\n  border-left: 2px solid currentColor;\n  border-right: 2px solid currentColor;\n  background-color: currentColor;\n  background-clip: content-box;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  -webkit-animation: dot 1s infinite step-start both;\n  animation: dot 1s infinite step-start both;\n}\n#yyy-activation-board .yyy-loader-dotting:before {\n  content: \'...\';\n}\n#yyy-activation-board .yyy-loader-dotting::before {\n  content: \'\';\n}\n@-webkit-keyframes dot {\n  25% {\n    border-color: transparent;\n    background-color: transparent;\n  }\n  50% {\n    border-right-color: transparent;\n    background-color: transparent;\n  }\n  75% {\n    border-right-color: transparent;\n  }\n}\n@keyframes dot {\n  25% {\n    border-color: transparent;\n    background-color: transparent;\n  }\n  50% {\n    border-right-color: transparent;\n    background-color: transparent;\n  }\n  75% {\n    border-right-color: transparent;\n  }\n}\n',""])},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var o,a=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(a)?e:(o=0===a.indexOf("//")?a:0===a.indexOf("/")?n+a:r+a.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=u(n(0)),a=u(n(3)),i=u(n(1));function u(e){return e&&e.__esModule?e:{default:e}}var l={display:"none",position:"fixed",left:0,top:0,bottom:0,right:0,zIndex:9999,backgroundColor:i.default.greyOpa6,panel:{position:"relative",width:600,height:400,margin:"100px auto",padding:20,backgroundColor:i.default.white,header:{fontSize:18,color:i.default.greyBlack,lineHeight:"24px"},body:{height:300,overflowY:"auto"},footer:{position:"absolute",bottom:20,right:20,closeButton:{width:88,height:32,float:"right",background:i.default.greyBlack,border:"none",borderRadius:3,color:"white"}}}},s={"01151004":{code:"01151004",definition:"Agent未启动",solution:"进入目录{nc_home}/yonyou-yyy-agent，执行startAgent.bat（windows）或者startAgent.sh（Linux）命令启动agent。启动成功后，会出现名字包含yyy-agent的进程，并且进程号保持不变。"}},c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={visible:!1,solutions:{}},n.show=n.show.bind(n),n.hide=n.hide.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"show",value:function(){this.setState({visible:!0})}},{key:"hide",value:function(){this.setState({visible:!1})}},{key:"componentWillReceiveProps",value:function(e){console.log("Component WILL RECEIVE PROPS!");var t=e.errors;if(t&&t.length>0){this.state.solutions={};for(var n=this.state.solutions,r=0;r<t.length;r++){var o=t[r];s[o.code]?(n[o.code]=Object.assign({},s[o.code],{detail:o.msg}),t.splice(r,1)):n[o.code]={code:o.code,definition:"",detail:o.msg,solution:"请联系友云音售后获取支持。联系电话：010-86396688转36257; 邮箱: yyy@yonyou.com"}}var i=t.map((function(e){return e.code}));i.length>0&&(0,a.default)({data:{type:"solution",codes:i.join(",")},success:function(e){"0"===e.error&&e.data&&e.data.forEach((function(e){var t=n[e.code];t&&(t.definition=e.definition,t.solution=e.solution)}))},error:function(e){}})}}},{key:"render",value:function(){var e=this.state.visible?"block":"none";if(this.state.visible){var t=this.state.solutions;return o.default.createElement("div",{className:"yyy-solution",style:Object.assign({},l,{display:e})},o.default.createElement("div",{className:"yyy-solution-panel",style:l.panel},o.default.createElement("div",{className:"yyy-solution-header",style:l.panel.header},o.default.createElement("span",null,o.default.createElement("b",{style:{fontSize:18}},"解决方案")),o.default.createElement("span",{style:{float:"right",cursor:"pointer",fontSize:28},onClick:this.hide},"×")),o.default.createElement("div",{className:"yyy-solution-body",style:l.panel.body},Object.keys(t).map((function(e,n){var r=t[e];return o.default.createElement("div",{id:"yyy-solution-"+n,style:{paddingTop:8}},o.default.createElement("pre",null,o.default.createElement("b",null,"错误码："),o.default.createElement("span",{style:{color:i.default.scarlet}},r.code)),o.default.createElement("pre",null,o.default.createElement("b",null,"错误名称："),r.definition),o.default.createElement("pre",null,o.default.createElement("b",null,"错误描述："),r.detail),o.default.createElement("pre",null,o.default.createElement("b",null,"解决方案：")),o.default.createElement("pre",{style:{whiteSpace:"pre-wrap"}},r.solution))}))),o.default.createElement("div",{className:"yyy-solution-footer",style:l.panel.footer},o.default.createElement("button",{style:l.panel.footer.closeButton,onClick:this.hide},"关闭"))))}return null}}]),t}(o.default.Component);t.default=c},function(e,t,n){var r=n(22);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};n(9)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(8)(!1)).push([e.i,'#yyy-board {\n  position: relative;\n  width: 360px;\n  height: 175px !important;\n  padding: 10px;\n  font-size: 14px;\n  font-family: "\\5FAE\\8F6F\\96C5\\9ED1", "Microsoft YaHei", " PingFangSC-Regular", arial, sans-serif;\n}\n#yyy-board .logo {\n  width: 100px;\n  height: 20px;\n  background: url(/nccloud/resources/uap/public/img/yyy/yyy_logo.svg) center center no-repeat;\n  background-size: contain;\n}\n#yyy-board .welcome {\n  height: 135px;\n  padding-top: 20px;\n  line-height: 28px;\n  text-align: center;\n}\n#yyy-board .welcome p {\n  margin: 0;\n  height: 28px;\n  line-height: 28px;\n}\n#yyy-board .welcome .title {\n  font-size: 18px;\n  font-weight: bold;\n  color: rgba(0, 0, 0, 0.65) !important;\n}\n#yyy-board .welcome .sub-title {\n  font-size: 14px;\n  font-weight: 600;\n  color: rgba(0, 0, 0, 0.65) !important;\n}\n#yyy-board .welcome button {\n  margin-top: 18px;\n  width: 120px;\n  height: 40px;\n  background: #448bdf;\n  border: none;\n  border-radius: 2px;\n  color: #FFFFFF;\n  line-height: 38px;\n  font-size: 16px;\n  cursor: pointer;\n}\n',""])}])}));
//# sourceMappingURL=index.js.map