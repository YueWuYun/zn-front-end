/*! @ncctag {"provider":"test","date":"2020-5-11 22:26:01"} */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nc-lightapp-front"),require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["nc-lightapp-front","react","react-dom"],t):"object"==typeof exports?exports["sf/fundtransfer/fundtransferfundreceipt/card/index"]=t(require("nc-lightapp-front"),require("react"),require("react-dom")):e["sf/fundtransfer/fundtransferfundreceipt/card/index"]=t(e["nc-lightapp-front"],e.React,e.ReactDOM)}(window,(function(e,t,r){return function(e){var t={};function r(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="../../../../",r(r.s=112)}({0:function(t,r){t.exports=e},1:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.go2CardCheck=t.tbbWarnDialog=t.showTBBMsg=t.getTBBMsg=t.saveCommit=t.frozenBtnCtrl=t.showErrBtn=t.createCardWebSocket=t.createListWebSocket=t.setRate2NewRow=t.getCacheRateValue=t.bodyRateEditOnAfterEdit=t.addDefReferFilter=t.elecSignCardPrint=t.elecSignListPrint=t.createSimpleBillData=t.buildLightBodyAfterEditData=t.loadMultiLang=t.getMultiLangRes=t.appendMultiLangRes=t.saveMultiLangRes=t.getPropCache=t.setPropCache=t.showPagination=t.setDefOrg2AdvanceSrchArea=t.setDefOrg2ListSrchArea=t.setDefOrg2Form=t.hasDefaultOrg=t.isLinkScene=void 0;var a=r(0),n=r(5);function o(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function a(n,o){try{var l=t[n](o),i=l.value}catch(e){return void r(e)}if(!l.done)return Promise.resolve(i).then((function(e){a("next",e)}),(function(e){a("throw",e)}));e(i)}("next")}))}}var l,i,u=t.isLinkScene=function(e){var t=e.getUrlParam(n.URL_PARAM.SCENE);return!(!!!e.getUrlParam(n.URL_PARAM.TBB_LINK)&&t!=n.SCENE.LINK&&t!=n.SCENE.FIP)},c=t.hasDefaultOrg=function(e){return e&&e.context&&e.context&&e.context.pk_org},s=function(e,t,r){if(!(e&&e.search&&t&&r))return!1;try{var a=e.search.getSearchValByField(t,r);return!(!a||!a.value||!a.value.firstvalue&&!a.value.secondvalue)}catch(e){return!0}},d=(t.setDefOrg2Form=function(e,t,r){if(e&&t&&c(r)){var a=r.context,n=a.pk_org,o=a.org_Name,l=a.pk_org_v,i=a.org_v_Name;e.form.setFormItemsValue(t,{pk_org:{value:n,display:o},pk_org_v:{value:l,display:i}})}},t.setDefOrg2ListSrchArea=function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pk_org";if(e&&e.search&&t&&c(r)&&!u(e)&&!s(e,t,a)){var n=r.context,o=n.pk_org,l=n.org_Name,i={display:l,value:o};e.search.setSearchValByField(t,a,i)}},t.setDefOrg2AdvanceSrchArea=function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pk_org";if(e&&e.search&&t&&c(r)&&r.template&&!u(e)){var n=r.template,o=r.context,l=o.pk_org,i=o.org_Name;n[t].items.map((function(e){e.attrcode==a&&(e.initialvalue={display:i,value:l})}))}},t.showPagination=function(e,t,r){e&&t&&r&&!r.template&&(r.template[t].pagination=!u(e))},function(e){return e+"_extObj"}),f=(t.setPropCache=function(e,t,r,a){if(e&&t&&r){var n=d(t),o=e.ViewModel.getData(n);o||(o={}),o[r]=a,e.ViewModel.setData(n,o)}},t.getPropCache=function(e,t,r){if(!e||!t||!r)return null;var a=d(t),n=e.ViewModel.getData(a);return n&&n.hasOwnProperty(r)?n[r]:null},t.saveMultiLangRes=function(e,t){if(e&&t){e.ViewModel.setData("multiLang",t)}}),p=(t.appendMultiLangRes=function(e,t){if(e&&t){var r=p(e);r?Object.assign(r,t):f(e,t)}},t.getMultiLangRes=function(e){if(e){return e.ViewModel.getData("multiLang")}}),v=t.loadMultiLang=function(e,t){var r=p(e);return r&&r[t]||""},g=function(e,t){var r={},a=e.form.getAllFormValue(t);return a.areacode=t,r[t]=a,r},h=function(e,t){var r={rows:e.cardTable.getChangedRows(t),areaType:"table",areacode:t},a={};return a[t]=r,a},y=function(e,t,r,a,n,o,l,i){var u={head:g(e,r),pageid:t};return i?u.body=h(e,a):u.bodys=h(e,a),{areacode:a,attrcode:n,card:u,changedrows:o,index:l}},b=(t.buildLightBodyAfterEditData=function(e,t,r,a,n,o,l){var i=arguments.length>7&&void 0!==arguments[7]&&arguments[7];try{if(!(e&&t&&r&&a&&n&&o))throw new Error("参数缺失！");var u=y(e,t,r,a,n,o,l,i),c=u.card,s=c.body,d=c.bodys;if(i&&1==s[a].rows.length||!i&&1==d[a].rows.length)return u;var f=[],p=o[0].rowid;if(!(s=i?s[a]:d[a]))throw new Error("未获取到指定的表体["+a+"]!");var v=s,g=v.rows,h=!0,b=!1,m=void 0;try{for(var C,_=g[Symbol.iterator]();!(h=(C=_.next()).done);h=!0){var w=C.value,k=w.rowid;if(k&&k==p){f.push(w);break}}}catch(e){b=!0,m=e}finally{try{!h&&_.return&&_.return()}finally{if(b)throw m}}if(0==f.length)throw new Error("未找到修改的行!");return s.rows=f,u}catch(e){throw e}},function(e){if(!e||0==e.length)return null;var t=!0,r=!1,a=void 0;try{for(var n,o=e[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var l=n.value;if(l&&l.values&&0!=Object.keys(l.values).length){var i=l.values,u=Object.keys(i),c=!0,s=!1,d=void 0;try{for(var f,p=u[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var v=f.value,g=i[v];g&&0!=Object.keys(g).length&&g.value||delete i[v]}}catch(e){s=!0,d=e}finally{try{!c&&p.return&&p.return()}finally{if(s)throw d}}}}}catch(e){r=!0,a=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw a}}}),m=function(e,t,r,a,n){var o=e.createMasterChildDataSimple(t,r,a),l=o.head,i=o.body;return n&&(b(l[r].rows),b(i[a].rows)),o},C=function(e,t,r,a,n){var o=e.createExtCardDataSimple(t,r,a),l=o.head,i=o.bodys;if(n){b(l[r].rows);var u=!0,c=!1,s=void 0;try{for(var d,f=a[Symbol.iterator]();!(u=(d=f.next()).done);u=!0){var p=d.value;b(i[p].rows)}}catch(e){c=!0,s=e}finally{try{!u&&f.return&&f.return()}finally{if(c)throw s}}}return o},_=t.createSimpleBillData=function(e,t,r,a){var n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!(e&&t&&r&&a))return null;var o=!!Array.isArray(a)&&a.length>1,l=Array.isArray(a)?a:[a];return o?C(e,t,r,l,n):m(e,t,r,l[0],n)},w=(t.elecSignListPrint=function(e,t){var r=t.url,n=t.offical,o=void 0!==n&&n,l=t.appCode,i=t.nodeKey,u=t.tableCode,c=t.field_id,s=t.field_billno,d=void 0===s?"vbillno":s,f=t.getOrgFunc,p=t.validateFunc;if(!(r&&l&&u&&c&&d))throw new Error("参数缺失！");var g=e.table.getCheckedRows(u);if(null!=g&&0!=g.length){var h=[],y=[],b=!0,m=!1,C=void 0;try{for(var _,w=g[Symbol.iterator]();!(b=(_=w.next()).done);b=!0){var P=_.value,R=P&&P.data&&P.data.values&&P.data.values[c]&&P.data.values[c].value;if(R){var S=P&&P.data&&P.data.values&&P.data.values[d]&&P.data.values[d].value,I=P&&P.data&&P.data.values&&P.data.values.pk_org&&P.data.values.pk_org.value,E=P.index;f&&"function"==typeof f&&(I=f(P));var B=!0;if(p&&"function"==typeof p){var x=p(P);x&&(y.push(A(e,x,S,E)),B=!1)}B&&h.push({id:R,vbillno:S,pk_org:I,index:E})}}}catch(e){m=!0,C=e}finally{try{!b&&w.return&&w.return()}finally{if(m)throw C}}k(e,{url:r,offical:o,appCode:l,nodeKey:i,detail:h,errMessArr:y})}else(0,a.toast)({color:"warning",content:v(e,"3601-000010")})},t.elecSignCardPrint=function(e,t){var r=t.url,a=t.offical,n=void 0!==a&&a,o=t.appCode,l=t.nodeKey,i=t.headCode,u=t.field_id,c=t.field_billno,s=void 0===c?"vbillno":c,d=t.getOrgFunc,f=t.validateFunc;if(!(r&&o&&i&&u&&s))throw new Error("参数缺失！");var p=e.form.getFormItemsValue(i,u).value,v=e.form.getFormItemsValue(i,s).value,g=e.form.getFormItemsValue(i,"pk_org").value;d&&"function"==typeof d&&(g=d());var h=[],y=!0;if(f&&"function"==typeof f){var b=f();b&&(h.push(A(e,b,v,0)),y=!1)}k(e,{url:r,offical:n,appCode:o,nodeKey:l,detail:y?[{id:p,vbillno:v,pk_org:g}]:null,errMessArr:h})},function(e,t){t&&0!=t.length&&(1==t.length?(0,a.toast)({duration:"infinity",color:"danger",content:t[0],hasCloseBtn:!0}):(0,a.toast)({duration:"infinity",color:"danger",TextArr:[v(e,"3601-000000"),v(e,"3601-000001"),v(e,"3601-000021")],groupOperation:!0,groupOperationMsg:t}))}),k=function(e,t){var r=t.url,o=t.offical,l=t.appCode,i=t.nodeKey,u=t.detail,c=t.errMessArr,s=void 0===c?[]:c;if(!(s&&s.length>0)||u&&0!=u.length){var d={offical:o,detail:u};(0,a.ajax)({url:n.COMMON_URL.ELECSIGNPRINTCHECK,data:d,success:function(t){var n=t.data,u=n.passPKs,c=n.passInfos,d=n.unPassInfos;if(s.length>0||d&&d.length>0){var f=!0,p=!1,v=void 0;try{for(var g,h=d[Symbol.iterator]();!(f=(g=h.next()).done);f=!0){var y=g.value,b=y.vbillno,m=y.mess,C=y.index,_=A(e,m,b,C);s.push(_)}}catch(e){p=!0,v=e}finally{try{!f&&h.return&&h.return()}finally{if(p)throw v}}w(e,s)}if(u&&u.length>0&&c&&c.length>0){var k={offical:o,detail:c};(0,a.print)("pdf",r,{nodekey:i,appcode:l,oids:u,userjson:JSON.stringify(k)})}}})}else w(e,s)},A=function(e,t,r,a){return v(e,"3601-000008")+r+v(e,"3601-000009")+t||""},P=(t.addDefReferFilter=function(e,t){var r=t.headCode,a=t.areaCode,n=t.meta,o=t.orgField,l=t.getOrgFunc;if(a&&n&&(r||o||l)){var i=Array.isArray(a)?a:[a],u=!0,c=!1,s=void 0;try{for(var d,f=i[Symbol.iterator]();!(u=(d=f.next()).done);u=!0){n[d.value].items.map((function(t){(t.attrcode.startsWith("vdef")||t.attrcode.startsWith("vuserdef"))&&(t.queryCondition=function(){return{pk_org:l&&"function"==typeof l?l():(e.form.getFormItemsValue(r,o)||{}).value}})}))}}catch(e){c=!0,s=e}finally{try{!u&&f.return&&f.return()}finally{if(c)throw s}}}},t.bodyRateEditOnAfterEdit=function(e){var t=e.props,r=e.bodyCodes,o=e.rateInfo,l=e.datasource,i=e.olcRates,u=e.glcRates,c=e.gllcRates;if(t&&o&&l&&r){!function(e){var t=e.rateInfo,r=e.datasource;if(t&&r){a.cardCache.setDefData(n.cache.rateinfo,r,t);a.cardCache.getDefData(n.cache.rateinfo,r)}}({rateInfo:o,datasource:l}),Array.isArray(r)||(r=[r]);var s=o.olcRateEditable,d=o.glcRateEditable,f=o.gllcRateEditable,p=!0,v=!1,g=void 0;try{for(var h,y=r[Symbol.iterator]();!(p=(h=y.next()).done);p=!0){var b=h.value;i&&(Array.isArray(i)||(i=[i]),t.cardTable.setColEditableByKey(b,i,!s)),u&&(Array.isArray(u)||(u=[u]),t.cardTable.setColEditableByKey(b,u,!d)),c&&(Array.isArray(c)||(c=[c]),t.cardTable.setColEditableByKey(b,c,!f))}}catch(e){v=!0,g=e}finally{try{!p&&y.return&&y.return()}finally{if(v)throw g}}}},t.getCacheRateValue=function(e){var t=e.datasource;if(t){var r=a.cardCache.getDefData(n.cache.rateinfo,t);return r?{olcRate:r.olcRate,glcRate:r.glcRate,gllcRate:r.gllcRate}:null}}),R=(t.setRate2NewRow=function(e){var t=e.olcRates,r=e.glcRates,a=e.gllcRates,n=e.datasource,o=e.row;if(n){var l=P({datasource:n});if(l){var i=l.olcRate,u=l.glcRate,c=l.gllcRate;if(t){Array.isArray(t)||(t=[t]);var s=!0,d=!1,f=void 0;try{for(var p,v=t[Symbol.iterator]();!(s=(p=v.next()).done);s=!0){o[p.value]={value:i}}}catch(e){d=!0,f=e}finally{try{!s&&v.return&&v.return()}finally{if(d)throw f}}}if(r){Array.isArray(r)||(r=[r]);var g=!0,h=!1,y=void 0;try{for(var b,m=r[Symbol.iterator]();!(g=(b=m.next()).done);g=!0){o[b.value]={value:u}}}catch(e){h=!0,y=e}finally{try{!g&&m.return&&m.return()}finally{if(h)throw y}}}if(a){Array.isArray(a)||(a=[a]);var C=!0,_=!1,w=void 0;try{for(var k,A=a[Symbol.iterator]();!(C=(k=A.next()).done);C=!0){o[k.value]={value:c}}}catch(e){_=!0,w=e}finally{try{!C&&A.return&&A.return()}finally{if(_)throw w}}}}}},t.createListWebSocket=function(e,t){var r=t.tableAreaCode,a=t.tablePkName,n=t.billtype,o=t.dataSource,l=t.serverLocation;if(e&&r&&a&&n){var i=e.socket,u={tableAreaCode:r,billpkname:a,billtype:n,dataSource:o};return l&&(u.serverLocation=l),React.createElement("div",null,i.connectMesg(u))}},t.createCardWebSocket=function(e,t){var r=t.headBtnAreaCode,a=t.formAreaCode,n=t.billpkname,o=t.billtype,l=t.dataSource,i=t.serverLocation;if(e&&r&&a&&n&&o){var u=e.socket,c={headBtnAreaCode:r,formAreaCode:a,billtype:o,billpkname:n,dataSource:l};return i&&(c.serverLocation=i),React.createElement("div",null,u.connectMesg(c))}},t.showErrBtn=function(e,t){var r=t.headBtnCode,a=t.headAreaCode,o=t.fieldPK;t.datasource;if(e&&r&&a){var l=e.getUrlParam(n.URL_PARAM.STATE),i="0";try{i=e.form.getFormItemsValue(a,n.sagaField.status).value}catch(e){i="0"}var u="1"===i&&"browse"==l;e.button.toggleErrorStatus(r,{isError:u}),u&&R(e,{headAreaCode:a,fieldPK:o})}},function(e,t){var r=t.headAreaCode,a=t.fieldPK;if(r&&a){var o=e.getUrlParam("status"),l=e.form.getFormItemsValue(r,n.sagaField.gtxid),i=e.form.getFormItemsValue(r,a);"browse"==o&&l&&l.value&&i&&i.value&&e.socket.showToast({gtxid:l.value,billpk:i.value})}}),S=(t.frozenBtnCtrl=function(e,t){var r=t.btnCodes;if(e&&r){var a=Array.isArray(r)?r:[r];if("browse"==e.getUrlParam(n.URL_PARAM.STATE)){var o="1";try{o=e.form.getFormItemsValue(headAreaCode,n.sagaField.frozen).value}catch(e){o="1"}e.button.setButtonDisabled(a,"1"==o)}}},function(e,t){var r=t.pageCode,a=t.headCode,n=t.bodyCodeArr,o=t.saveFunc,l={},i={};if(0==n.length)l={pageid:r,model:{areacode:a,rows:e.form.getAllFormValue(a).rows,areaType:"form"}},i[a]="form";else{l=n.length>1?e.createExtCardData(r,a,n):e.createMasterChildData(r,a,n[0]);var u=!0,c=!1,s=void 0;try{for(var d,f=n[Symbol.iterator]();!(u=(d=f.next()).done);u=!0){i[d.value]="cardTable"}}catch(e){c=!0,s=e}finally{try{!u&&f.return&&f.return()}finally{if(c)throw s}}}e.validateToSave(l,o,i,"")}),I=(l=o(regeneratorRuntime.mark((function e(t,r){var a,n=r.pageCode,o=r.headCode,l=r.bodyCodeArr,i=r.saveValidate,u=r.processSaveData;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.form.isCheckNow(o)){e.next=2;break}return e.abrupt("return",null);case 2:if(!(l&&l.length>0)||t.cardTable.checkTableRequired()){e.next=4;break}return e.abrupt("return",null);case 4:if(!i||"function"!=typeof i){e.next=7;break}if(i()){e.next=7;break}return e.abrupt("return",null);case 7:if(a=_(t,n,o,l),!u||"function"!=typeof u){e.next=12;break}return e.next=11,u(a);case 11:a=e.sent;case 12:return e.abrupt("return",{data:JSON.stringify(a),pageCode:n});case 13:case"end":return e.stop()}}),e,this)}))),function(e,t){return l.apply(this,arguments)}),E=(t.saveCommit=(i=o(regeneratorRuntime.mark((function e(t,r){var n,o,l=r.pageCode,i=r.headCode,u=r.bodyCode,c=r.url,s=r.assign,d=r.showAssignFunc,f=r.updateViewFunc,p=r.saveValidate,v=r.processSaveData,g=r.extParam;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l&&i&&c&&d&&f){e.next=2;break}return e.abrupt("return");case 2:return g||(g={}),n=(r=u)?Array.isArray(r)?r:[r]:[],e.next=6,I(t,{pageCode:l,headCode:i,bodyCodeArr:n,saveValidate:p,processSaveData:v});case 6:if(o=e.sent){e.next=9;break}return e.abrupt("return");case 9:s&&(g.content=JSON.stringify(s)),o.extParam=g,S(t,{pageCode:l,headCode:i,bodyCodeArr:n,saveFunc:function(){(0,a.ajax)({url:c,data:o,success:function(e){var t=e.data.workflow;t&&"approveflow"==t||"workflow"==t?d(e):f(e)}})}});case 12:case"end":return e.stop()}var r}),e,this)}))),function(e,t){return i.apply(this,arguments)}),t.getTBBMsg=function(e){var t=e.row,r=e.msgfield;r||(r="ntbinfo");var a=(t&&t.values&&t.values[r]||{}).value;return a&&(t.values[r]={value:null,display:null}),a});t.showTBBMsg=function(e){var t=e.head,r=e.headCode,n=e.msgfield;if(!(t&&r&&t[r]&&t[r].rows&&0!=t[r].rows.length))return!1;var o=!1,l=t[r].rows[0],i=E({row:l,msgfield:n});return i&&((0,a.toast)({color:"warning",content:i}),o=!0),o},t.tbbWarnDialog=function(e,t){var r=t.ntbinfos,n=t.onConfirm;if(r&&0!=r.length){var o=[],l=r.length>1,i=1,u=l?[v(e,"3601-000019")+"["+r.length+"]"+v(e,"3601-000020")]:[],c=!0,s=!1,d=void 0;try{for(var f,p=r[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var g=f.value;if(null!=g){var h=g.pk,y=g.msg,b=g.vbillno;if(h&&b){o.push(h);var m="";l&&(m=i+". "+v(e,"3601-000018")+"["+b+"] "),u.push(React.createElement("li",null,m+y)),i++}}}}catch(e){s=!0,d=e}finally{try{!c&&p.return&&p.return()}finally{if(s)throw d}}0!=u.length&&(0,a.promptBox)({color:"warning",title:v(e,"3601-000017"),content:React.createElement("ul",null,u),beSureBtnClick:function(){n(o)}})}},t.go2CardCheck=function(e){var t=e.props,r=e.url,n=e.pk,o=e.ts,l=e.fieldPK,i=e.actionCode,u=e.permissionCode,c=e.checkSaga,s=void 0===c||c,d=e.checkTS,f=void 0===d||d,p=e.go2CardFunc;p&&"function"==typeof p&&(t&&r&&n&&o&&l||p(),(0,a.ajax)({url:r,data:{pk:n,ts:o,actionCode:i,permissionCode:u,fieldPK:l,checkSaga:s,checkTS:f},success:function(e){p()}}))}},112:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=r(2),o=d(n),l=(d(r(4)),r(0)),i=r(169),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(35)),c=r(1),s=r(1);function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=l.high.NCUploader,v=u.dataSource,g=u.pageCodeCard,h=(u.tableId,u.searchId,u.Query_BY_PK_URL),y=u.moudleId,b=u.formId,m=u.pkname,C=u.receiptBillType,_=l.base.NCDiv,w=l.base.NCAffix,k=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.toggleShow=function(){r.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!0,showBillCode:!0,billCode:r.billno}),(0,c.showErrBtn)(r.props,{headBtnCode:"card_head",headAreaCode:b,fieldPK:m,datasource:v})},r.handleClick=function(){r.props.pushTo("/list",{status:"browse"})},r.getData=function(){var e=r;r.flag||(r.flag="linksce"==r.props.getUrlParam("scene"));var t=!0===r.props.getUrlParam("formList"),a={};if(a=r.flag?{type:"link"}:{type:"original"},r.props.cardPagination.setCardPaginationVisible("cardPaginationBtn",!r.flag||t),"browse"==r.props.getUrlParam("status")){var n=r.props.getUrlParam("pk_src");if(null==n&&(n=r.props.getUrlParam("id")),"null"!=n&&null!=n){var o=[];o.push(n);var i={pks:o,pageCode:g,extParam:a};(0,l.ajax)({url:h,data:i,success:function(a){a.data?(e.props.form.setAllFormValue(f({},b,a.data.head[b])),r.billno=a.data.head[b].rows[0].values.vbillno.value,r.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!(r.flag&&!t),showBillCode:!0,billCode:r.billno}),"linksce"==r.props.getUrlParam("scence")&&(r.props.cardPagination.setCardPaginationVisible("cardPaginationBtn",!1),r.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!1}))):e.props.form.setAllFormValue(f({},b,{rows:[]})),(0,c.showErrBtn)(r.props,{headBtnCode:"card_head",headAreaCode:b,fieldPK:m,datasource:v})}})}}},r.billno="",i.initTemplate.call(r,e),r.state={billno:"",showUploader:!1,target:null},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this,t=this.props,r=(t.table,t.form),a=t.button,n=t.cardPagination,l=r.createForm,u=a.createButtonApp,c=a.createErrorFlag,d=n.createCardPagination,f=this.props.BillHeadInfo.createBillHeadInfo,g=this.state,h=g.showUploader,y=g.target,k=g.billno,A=g.billId;return o.default.createElement("div",{className:"nc-bill-card"},(0,s.createCardWebSocket)(this.props,{headBtnAreaCode:"card_head",formAreaCode:b,billpkname:m,billtype:C,dataSource:v}),o.default.createElement(w,null,o.default.createElement(_,{areaCode:_.config.HEADER,className:"nc-bill-header-area"},o.default.createElement("div",{className:"header-title-search-area"},f({title:this.props.MutiInit.getIntl("36320AADRF")&&this.props.MutiInit.getIntl("36320AADRF").get("36320AADRF-000000"),billCode:this.billno,backBtnClick:function(){e.handleClick()}})),o.default.createElement("div",{className:"header-button-area"},c({headBtnAreaCode:"card_head"}),u({area:"card_head",buttonLimit:3,onButtonClick:i.buttonClick.bind(this),popContainer:document.querySelector(".header-button-area")})),o.default.createElement("div",{className:"header-cardPagination-area",style:{float:"right"}},d({handlePageInfoChange:i.pageInfoClick.bind(this),dataSource:v})))),o.default.createElement("div",{className:"nc-bill-form-area"},l(b,{})),o.default.createElement("div",{className:"nc-faith-demo-div2"},h&&o.default.createElement(p,{billId:A,target:y,placement:"bottom",billNo:k,onHide:function(){e.setState({showUploader:!1})},customInterface:{queryLeftTree:"/nccloud/tmpub/pub/lefttreequery.do",queryAttachments:null}})))}}]),t}(n.Component);k=(0,l.createPage)({mutiLangCode:y})(k),t.default=k},169:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pageInfoClick=t.initTemplate=t.buttonClick=t.afterEvent=void 0;var a=i(r(170)),n=i(r(171)),o=i(r(172)),l=i(r(173));function i(e){return e&&e.__esModule?e:{default:e}}t.afterEvent=a.default,t.buttonClick=n.default,t.initTemplate=o.default,t.pageInfoClick=l.default},170:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,a,n){}},171:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){switch(t){case"refresh":this.getData(),this.toggleShow();break;case"print":var r=[],n=this.props.form.getFormItemsValue(c,s).value;r.push(n),(0,a.print)("pdf",i,{appcode:l,nodekey:u,oids:r});break;case"printout":var g=[];g.push(this.props.form.getFormItemsValue(c,s).value),(0,a.output)({url:i,data:{nodekey:u,appcode:l,oids:g,outputType:"output"}});break;case"formalprint":(0,o.elecSignCardPrint)(e,{url:d,offical:!0,appCode:l,nodeKey:f,headCode:c,field_id:s,field_billno:v,getOrgFunc:function(){var t=e.form.getFormItemsValue(c,"pk_org_t")&&e.form.getFormItemsValue(c,"pk_org_t").value;return t||e.form.getFormItemsValue(c,"pk_org").value}});break;case"supplyprint":(0,o.elecSignCardPrint)(e,{url:d,offical:!1,appCode:l,nodeKey:p,headCode:c,field_id:s,field_billno:v,getOrgFunc:function(){var t=e.form.getFormItemsValue(c,"pk_org_t")&&e.form.getFormItemsValue(c,"pk_org_t").value;return t||e.form.getFormItemsValue(c,"pk_org").value}});break;case"file":var h=this.props.form.getFormItemsValue(c,s).value,y=this.props.form.getFormItemsValue(c,v).value;this.setState({billId:h,billno:y,showUploader:!this.state.showUploader,target:null})}};var a=r(0),n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(35)),o=r(1);n.dataSource;var l=n.appcode,i=(n.tableId,n.searchId,n.Print_URL),u=n.nodekey,c=n.formId,s=(n.linkkbilltype,n.pkname),d=n.Elecsign_Print_URL,f=n.formal_nodekey,p=n.supply_nodekey,v=n.vbillno},172:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){e.createUIDom({pagecode:o},(function(t){if(t){if(t.template){var r=t.template;r=function(e,t,r){return r}(0,0,r),e.meta.setMeta(r)}if(t.button){var a=t.button;e.button.setButtons(a),c(l,i)&&e.button.setButtonVisible(["refresh"],!1)}}}))};var a=r(0),n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(35));var o=n.pageCodeCard,l=n.dataSource,i=n.islink,u=a.base.NCMenu,c=(a.base.NCDropdown,a.base.NCCheckbox,a.base.NCButton,a.base.NCMessage,a.base.NCCol,a.base.NCRow,u.Item,a.cardCache.setDefData,a.cardCache.getDefData)},173:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=this,n=l(t,s);if(n){var p=n.head;n.body;if(p){this.props.form.setAllFormValue(o({},d,n.head[d]));var v=n.head[d].rows[0].values.vbillno.value;this.billno=v,this.toggleShow()}}else{var g=[];g.push(t);var h={pks:g,pageCode:u,extParam:{type:"original"}};(0,a.ajax)({url:c,data:h,success:function(a){a.data?(a.data.head&&(r.props.form.setAllFormValue(o({},d,a.data.head[d])),r.billno=a.data.head[d].rows[0].values.vbillno.value,r.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!0,showBillCode:!0,billCode:r.billno})),e.setUrlParam({status:"browse",id:t}),i(f,t,a.data,d,s)):r.props.form.setAllFormValue(o({},d,{rows:[]}))}})}};var a=r(0),n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(35));function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=a.cardCache.getCacheById,i=a.cardCache.updateCache,u=(a.cardCache.addCache,n.tableId,n.pageCodeCard),c=n.Query_BY_PK_URL,s=n.dataSource,d=n.formId,f=n.pkname},2:function(e,r){e.exports=t},35:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.moudleId="36320AADRF",t.appcode="36320AADRF",t.tableId="table",t.searchId="search",t.formId="detail",t.pageCodeList="36320AADRF_L01",t.pageCodeCard="36320AADRF_C01",t.nodekey="NCC36320AADRF",t.dataSource="sf.fundtransfer.fundtransferreceipt.cachedata",t.search_key="sf.fundtransfer.fundtransferreceipt.search.key",t.receiptBillType="36KA",t.pkname="pk_fundtransferreceipt",t.Query_BY_PK_URL="/nccloud/sf/fundtransfer/receiptpk.do",t.Page_URL="/nccloud/sf/fundtransfer/receiptpage.do",t.Query_List_URL="/nccloud/sf/fundtransfer/receiptquery.do",t.Link_Query_URL="/nccloud/sf/fundtransfer/receiptlinkquery.do",t.Print_URL="/nccloud/sf/fundtransfer/receiptprint.do",t.attrCode="vbillno",t.formal_nodekey="NCC36320AADRFF",t.supply_nodekey="NCC36230AADRFU",t.Elecsign_Print_URL="/nccloud/sf/fundtransfer/recelecsignprint.do",t.vbillno="vbillno",t.islink="islink"},4:function(e,t){e.exports=r},5:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.URL_PARAM={ID:"id",STATE:"status",SCENE:"scene",TBB_LINK:"pk_ntbparadimvo",LINK_ID:"linkId",PK_SRC:"pk_src"},t.sagaField={frozen:"saga_frozen",gtxid:"saga_gtxid",btxid:"saga_btxid",status:"saga_status"},t.sagaFrozenEnum={frozen:1,unfrozen:0},t.sagaStateEnum={success:0,fail:1},t.SCENE={DEFAULT:"defaultsce",APPROVE:"approvesce",LINK:"linksce",FIP:"fip",OTHER:"othersce"},t.LINKTYPE={NORMAL:"NORMAL",BILL_REVIEW:"BILL_REVIEW"},t.LINK_PARAM={ARAP:{FLAG:"flag",FLAG_VALUE:"ftsLinkArap"}},t.MODULE_INFO={TMPUB:"tmpub",TMPUB_NUM:"3601"},t.COMMON_URL={ELECSIGNPRINTCHECK:"/nccloud/tmpub/pub/elecsignprintcheck.do"},t.cache={rateinfo:"rateinfo",iserrtoast:"iserrtoast"},t.SPLIT_TBBCTRLTYPE="_ctrltype_",t.tbbwarntype={flexibility:"0",inflexibility:"1",warning:"2"}}})}));
//# sourceMappingURL=index.6d2516c0.js.map