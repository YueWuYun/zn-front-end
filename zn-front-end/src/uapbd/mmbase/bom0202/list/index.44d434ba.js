/*! @ncctag {"project":"","branch":"","provider":"","date":"2020-5-12 18:00:53"} */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nc-lightapp-front"),require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["nc-lightapp-front","react","react-dom"],t):"object"==typeof exports?exports["uapbd/mmbase/bom0202/list/index"]=t(require("nc-lightapp-front"),require("react"),require("react-dom")):e["uapbd/mmbase/bom0202/list/index"]=t(e["nc-lightapp-front"],e.React,e.ReactDOM)}(window,(function(e,t,a){return function(e){var t={};function a(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="../../../../",a(a.s=6)}([function(t,a){t.exports=e},function(e,a){e.exports=t},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.URL={update:"/nccloud/mmbd/bom0202/update.do",insert:"/nccloud/mmbd/bom0202/insert.do",delete:"/nccloud/mmbd/bom0202/delete.do",queryGrand:"/nccloud/mmbd/bom0202/queryGrand.do",queryCard:"/nccloud/mmbd/bom0202/queryCard.do",commit:"/nccloud/mmbd/bom0202/commit.do",uncommit:"/nccloud/mmbd/bom0202/uncommit.do",queryOrgVid:"/nccloud/mmbd/pub/queryOrgVid.do",matoidevent:"/nccloud/mmbd/bom0202/matoidevent.do",matvidevent:"/nccloud/mmbd/bom0202/matvidevent.do",hnnum:"/nccloud/mmbd/bom0202/hnumevent.do",hnassnum:"/nccloud/mmbd/bom0202/hassnumevent.do",copyAdd:"/nccloud/mmbd/bom0202/copyAdd.do",enable:"/nccloud/mmbd/bom0202/enable.do",disable:"/nccloud/mmbd/bom0202/disable.do",default:"/nccloud/mmbd/bom0202/default.do",suredefault:"/nccloud/mmbd/bom0202/suredefault.do",canceldefault:"/nccloud/mmbd/bom0202/canceldefault.do",checkbefore:"/nccloud/mmbd/bom0202/beforedetect.do",print:"/nccloud/mmbd/bom0202/print.do",checkdefaultversion:"/nccloud/mmbd/bom0202/checkdefaultversion.do",card:"/card",list:"/list",beforeEditHead:"/nccloud/mmbd/bom0202/bodyBeforeEvent.do",afterBodyEdit:"/nccloud/mmbd/bom0202/bodyEvent.do",afterOutputsEdit:"/nccloud/mmbd/bom0202/bodyOutEvent.do",beforeBodyEdit:"/nccloud/mmbd/bom0202/bodyBeforeEvent.do",lossscale:"/nccloud/mmbd/bom0202/lossscale.do",checkpermission:"/nccloud/mmbd/pub/checkpermission.do",replscale:"/nccloud/mmbd/bom0202/replscale.do"},t.AREA={bomlist:"bomwh_head",bomcardh:"bomcard_h",bomcarditem:"bomcard_b",bomcarditem2:"bomcard_b2",bomcardoutputs:"bomcard_outputs",bomcarduseorg:"bomcard_useorg",bomwips:"bomwips",bomrepls:"bomrepls",bomloss:"bomloss",bompos:"bompos",bomquery:"bomwh_query"},t.PAGECODE={bom_list:"10140BOMM_list",bom_card:"10140BOMM_card",bom_grand:"10140BOMM_grand"}},function(e,t,a){var n=a(16);"string"==typeof n&&(n=[[e.i,n,""]]);var o={transform:void 0};a(5)(n,o);n.locals&&(e.exports=n.locals)},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=function(e,t){var a=e[1]||"",n=e[3];if(!n)return a;if(t&&"function"==typeof btoa){var o=(r=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),s=n.sources.map((function(e){return"/*# sourceURL="+n.sourceRoot+e+" */"}));return[a].concat(s).concat([o]).join("\n")}var r;return[a].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+a+"}":a})).join("")},t.i=function(e,a){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},o=0;o<this.length;o++){var s=this[o][0];"number"==typeof s&&(n[s]=!0)}for(o=0;o<e.length;o++){var r=e[o];"number"==typeof r[0]&&n[r[0]]||(a&&!r[2]?r[2]=a:a&&(r[2]="("+r[2]+") and ("+a+")"),t.push(r))}},t}},function(e,t,a){var n,o,s={},r=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=n.apply(this,arguments)),o}),i=function(e){var t={};return function(a){return void 0===t[a]&&(t[a]=e.call(this,a)),t[a]}}((function(e){return document.querySelector(e)})),l=null,c=0,u=[],d=a(17);function p(e,t){for(var a=0;a<e.length;a++){var n=e[a],o=s[n.id];if(o){o.refs++;for(var r=0;r<o.parts.length;r++)o.parts[r](n.parts[r]);for(;r<n.parts.length;r++)o.parts.push(v(n.parts[r],t))}else{var i=[];for(r=0;r<n.parts.length;r++)i.push(v(n.parts[r],t));s[n.id]={id:n.id,refs:1,parts:i}}}}function f(e,t){for(var a=[],n={},o=0;o<e.length;o++){var s=e[o],r=t.base?s[0]+t.base:s[0],i={css:s[1],media:s[2],sourceMap:s[3]};n[r]?n[r].parts.push(i):a.push(n[r]={id:r,parts:[i]})}return a}function m(e,t){var a=i(e.insertInto);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=u[u.length-1];if("top"===e.insertAt)n?n.nextSibling?a.insertBefore(t,n.nextSibling):a.appendChild(t):a.insertBefore(t,a.firstChild),u.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");a.appendChild(t)}}function h(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=u.indexOf(e);t>=0&&u.splice(t,1)}function b(e){var t=document.createElement("style");return e.attrs.type="text/css",g(t,e.attrs),m(e,t),t}function g(e,t){Object.keys(t).forEach((function(a){e.setAttribute(a,t[a])}))}function v(e,t){var a,n,o,s;if(t.transform&&e.css){if(!(s=t.transform(e.css)))return function(){};e.css=s}if(t.singleton){var r=c++;a=l||(l=b(t)),n=C.bind(null,a,r,!1),o=C.bind(null,a,r,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(a=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",g(t,e.attrs),m(e,t),t}(t),n=B.bind(null,a,t),o=function(){h(a),a.href&&URL.revokeObjectURL(a.href)}):(a=b(t),n=w.bind(null,a),o=function(){h(a)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=r()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var a=f(e,t);return p(a,t),function(e){for(var n=[],o=0;o<a.length;o++){var r=a[o];(i=s[r.id]).refs--,n.push(i)}e&&p(f(e,t),t);for(o=0;o<n.length;o++){var i;if(0===(i=n[o]).refs){for(var l=0;l<i.parts.length;l++)i.parts[l]();delete s[i.id]}}}};var y,E=(y=[],function(e,t){return y[e]=t,y.filter(Boolean).join("\n")});function C(e,t,a,n){var o=a?"":n.css;if(e.styleSheet)e.styleSheet.cssText=E(t,o);else{var s=document.createTextNode(o),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(s,r[t]):e.appendChild(s)}}function w(e,t){var a=t.css,n=t.media;if(n&&e.setAttribute("media",n),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}function B(e,t,a){var n=a.css,o=a.sourceMap,s=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||s)&&(n=d(n)),o&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var r=new Blob([n],{type:"text/css"}),i=e.href;e.href=URL.createObjectURL(r),i&&URL.revokeObjectURL(i)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o,s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=a(1),l=m(i),c=(m(a(7)),a(0)),u=a(8),d=m(a(13)),p=a(2),f=(a(20),m(a(21)));function m(e){return e&&e.__esModule?e:{default:e}}c.base.NCPopconfirm,c.base.NCCheckbox,c.base.NCIcon,c.base.NCTabs.NCTabPane;var h=c.high.PrintOutput,b=c.high.ApproveDetail,g=c.cardCache.getDefData,v=c.cardCache.setDefData,y="mmbd.bom.bom0202.data",E="10140BOMM_list",C="bomwh_query",w="bomwh_head",B="/nccloud/mmbd/psg/print.do",M=(n=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.call(a),a.searchId=C,a.tableId=w,a.selectedRowRecord=null,a.searchVal=null,a.state={json:{},inlt:null,pks:[],billid:"",approveDetailShow:!1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"modifierMeta",value:function(e,t){var a=this;return t[C].items.forEach((function(t){switch(t.attrcode){case"useorgs.pk_useorg":t.queryCondition=function(){return{GridRefActionExt:"nccloud.web.mmbd.refer.pub.AppPermissionOrgRefFilter"}};break;case"hcmaterialid":t.isHasDisabledData=!0,t.isShowDisabledData=!0,t.queryCondition=function(){return{pk_org:e.search.getSearchValByField(C,"useorgs.pk_useorg").value.firstvalue,GridRefActionExt:"nccloud.web.mmbd.refer.query.MaterialQueryFilter"}};break;case"hcmaterialvid":t.fieldDisplayed="refcode",t.queryCondition=function(){return{pk_org:e.search.getSearchValByField(C,"useorgs.pk_useorg").value.firstvalue,materialoid:e.search.getSearchValByField(C,"hcmaterialid").value.firstvalue,GridRefActionExt:"nccloud.web.mmbd.refer.pub.MaterialvidRefFilter"}};break;case"hfbomsource":t.options.length>2&&t.options.splice(2,1);break;case"bomitems.vitemversion":t.queryCondition=function(){var t={pk_group:window.parent.GETBUSINESSINFO().groupId,pk_org:e.search.getSearchValByField(C,"useorgs.pk_useorg").value.firstvalue,fbomtype:1};return e.search.getSearchValByField(C,"bomitems.cmaterialid").value&&e.search.getSearchValByField(C,"bomitems.cmaterialid").value.firstvalue&&(t.hcmaterialid=e.search.getSearchValByField(C,"bomitems.cmaterialid").value.firstvalue),e.search.getSearchValByField(C,"bomitems.cmaterialvid").value&&e.search.getSearchValByField(C,"bomitems.cmaterialvid").value.firstvalue&&(t.hcmaterialvid=e.search.getSearchValByField(C,"bomitems.cmaterialvid").value.firstvalue),t};break;case"bomitems.vpackversion":t.queryCondition=function(){var t={pk_group:window.parent.GETBUSINESSINFO().groupId,pk_org:e.search.getSearchValByField(C,"useorgs.pk_useorg").value.firstvalue,fbomtype:2};return e.search.getSearchValByField(C,"bomitems.cmaterialid").value&&e.search.getSearchValByField(C,"bomitems.cmaterialid").value.firstvalue&&(t.hcmaterialid=e.search.getSearchValByField(C,"bomitems.cmaterialid").value.firstvalue),e.search.getSearchValByField(C,"bomitems.cmaterialvid").value&&e.search.getSearchValByField(C,"bomitems.cmaterialvid").value.firstvalue&&(t.hcmaterialvid=e.search.getSearchValByField(C,"bomitems.cmaterialvid").value.firstvalue),t};break;case"bomitems.cvendorid":case"bomitems.cprojectid":case"bomitems.cproductorid":case"bomitems.ccustomerid":t.queryCondition=function(){return{pk_org:e.search.getSearchValByField(C,"useorgs.pk_useorg").value.firstvalue}}}})),t[w].pagination=!0,t[w].items.push({attrcode:"opr",label:this.state.json?this.state.json["110140BOMM3002"]:"110140BOMM3002",width:220,fixed:"right",className:"table-opr",visible:!0,render:function(t,n,o){var s=[];return g("permorgs",y).includes(n.pk_org.value)&&1==n.fbillstatus.value&&s.push("Revise"),g("permorgs",y).includes(n.pk_org.value)&&-1==n.fbillstatus.value&&(s.push("EditLine"),s.push("DelLine")),g("permorgs",y).includes(n.pk_org.value)&&s.push("CopyLine"),e.button.createOprationButton(s,{area:"list-inner",buttonLimit:4,onButtonClick:function(e,s){a.onTableButtonClick.bind(a)(e,s,t,n,o)}})}}),t}},{key:"componentDidMount",value:function(){var e=this;this.props.MultiInit.getMultiLang({moduleId:"10140BOMM",domainName:"uapbd",callback:function(t,a,n){a&&e.setState({json:t,inlt:n},(function(){e.initTemplate(e.props)}))}});this.props.MultiInit.getMultiLang({moduleId:"10140MMPUBMSG",domainName:"uapbd",callback:function(t,a,n){a&&e.setState({pubjson:s({},t)})}}),!g("searchParam",y)||this.props.search.setSearchValue(C,g("searchParam",y)),this.setBtnStatus(),this.getPermissionOrgs()}},{key:"getPermissionOrgs",value:function(){(0,c.ajax)({url:"/nccloud/mmbd/pub/getpermorgs.do",data:{},success:function(e){v("permorgs",y,e.data.orgs)}})}},{key:"setBtnStatus",value:function(){var e=this.props.table.getCheckedRows(p.AREA.bomlist);e.length>0?(this.props.button.setButtonDisabled(["Delete","Copy","Enable","Disable","Assign","Unassign","Commit","UnCommit","Print","Assistfunction","gylxyzxjc","Output","BatchEdit"],!1),1==e.length?g("permorgs",y).includes(e[0].data.values.pk_org.value)&&("1"==e[0].data.values.fbillstatus.value?("1"==e[0].data.values.hfversiontype.value&&"1"==e[0].data.values.fbillstatus.value&&0==e[0].data.values.hbdefault.value&&(this.props.button.setButtonDisabled(["CancelDefault"],!0),this.props.button.setButtonDisabled(["Default"],!1)),"1"==e[0].data.values.hfversiontype.value&&"1"==e[0].data.values.fbillstatus.value&&1==e[0].data.values.hbdefault.value&&(this.props.button.setButtonDisabled(["CancelDefault"],!1),this.props.button.setButtonDisabled(["Default"],!0))):this.props.button.setButtonDisabled(["Default","CancelDefault"],!0),"1"==e[0].data.values.fbillstatus.value?(this.props.button.setButtonDisabled(["Commit","UnCommit","BatchEdit"],!0),this.props.button.setButtonDisabled(["Assign","Unassign"],!1)):"2"==e[0].data.values.fbillstatus.value?(this.props.button.setButtonDisabled({Commit:!0,UnCommit:!1,BatchEdit:!0}),this.props.button.setButtonDisabled({Assign:!0,Unassign:!0})):(this.props.button.setButtonDisabled(["BatchEdit"],!1),this.props.button.setButtonDisabled(["UnCommit","Assign"],!0)),"1"==e[0].data.values.fbillstatus.value?2==e[0].data.values.hfversiontype.value?this.props.button.setButtonDisabled({Enable:!1,Disable:!0}):this.props.button.setButtonDisabled({Enable:!0,Disable:!1}):this.props.button.setButtonDisabled({Enable:!0,Disable:!0}),"-1"!=e[0].data.values.fbillstatus.value&&this.props.button.setButtonDisabled(["UnCommit"],!1),this.props.button.setButtonDisabled(["LinkTree"],!1)):this.props.button.setButtonDisabled(["Default","CancelDefault","Assistfunction","gylxyzxjc","LinkTree"],!0)):this.props.button.setButtonDisabled(["Delete","Copy","Enable","Disable","Default","CancelDefault","Assign","Unassign","Commit","UnCommit","Assistfunction","gylxyzxjc","Print","Output","LinkTree","BatchEdit"],!0)}},{key:"output",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.props.table.getAllTableData(w),a=[];t.rows.forEach((function(e){a.push(e.values.cbomid.value)})),""!=e&&(0,c.print)("pdf",B,{funcode:"10140PSG",nodekey:"10140PSG",oids:a,outputType:e})}},{key:"getData",value:function(e,t){var a=this,n=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments[3]),o=this.props.search.getQueryInfo("bomwh_query");console.log(o,"qryinf");var r=this.props.table.getTablePageInfo(this.tableId),i=o.oid;if(o&&o.querycondition&&o.querycondition.conditions){o.querycondition.conditions.push({field:"hfbomcategory",value:{firstvalue:"1",secondvalue:""},oprtype:"=",datatype:"203",isIncludeSub:!1}),o.querycondition.conditions.push({field:"hbcustomized",value:{firstvalue:!1,secondvalue:""},oprtype:"=",datatype:"32",isIncludeSub:!1});var l=s({},o,{pageInfo:r,pagecode:E,queryAreaCode:C,oid:i,queryType:"simple"});(0,c.ajax)({url:"/nccloud/mmbd/bom0202/queryList.do",data:l,success:function(e){if(e.data){var t=[];e.data[w].allpks.forEach((function(e){t.push(e)})),e.data[w].allpks=t,c.cacheTools.set("allpks",t),a.props.table.setAllTableData(w,e.data[w]);var o=a.state.inlt,s=t.length;(0,c.toast)({title:"",content:o.get("110140BOMM4001",{count:s}),color:"success"}),n&&n()}else{a.props.table.setAllTableData(w,{allpks:[],rows:[]}),(0,c.toast)({content:a.state.json?a.state.json["110140BOMM3007"]:"110140BOMM3007",color:"warning"})}a.props.table.selectAllRows(p.AREA.bomlist,!1),a.setBtnStatus()}})}}},{key:"afterSearchEvent",value:function(e,t){if(console.log(e,t),"useorgs.pk_useorg"===e){var a=this.props.meta.getMeta()[C].items;if(t.length>1||0==t.length){var n=!0,o=!1,s=void 0;try{for(var r,i=a[Symbol.iterator]();!(n=(r=i.next()).done);n=!0){var l=r.value;"hcmaterialid"!=l.attrcode&&"hcmaterialvid"!=l.attrcode&&"bomitems.cvendorid"!=l.attrcode&&"bomitems.ccustomerid"!=l.attrcode&&"bomitems.cproductorid"!=l.attrcode&&"bomitems.cprojectid"!=l.attrcode||(l.isShowUnit=!0)}}catch(e){o=!0,s=e}finally{try{!n&&i.return&&i.return()}finally{if(o)throw s}}}else{var c=!0,u=!1,d=void 0;try{for(var p,f=a[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var m=p.value;"hcmaterialid"!=m.attrcode&&"hcmaterialvid"!=m.attrcode&&"bomitems.cvendorid"!=m.attrcode&&"bomitems.ccustomerid"!=m.attrcode&&"bomitems.cproductorid"!=m.attrcode&&"bomitems.cprojectid"!=m.attrcode||(m.isShowUnit=!1)}}catch(e){u=!0,d=e}finally{try{!c&&f.return&&f.return()}finally{if(u)throw d}}}}"hbcustomized"==e&&this.props.search.setSearchValByField(C,"hbcustomized",{value:"false"}),"hcmaterialid"==e&&t.length>0&&this.props.search.setSearchValByField(C,"hcmaterialvid",{value:"",display:""}),"hcmaterialvid"==e&&t.values&&(console.log(this.props.search.getAllSearchData(C)),this.props.search.setSearchValue(C,[{field:"hcmaterialvid",value:{firstvalue:t.refpk,secondvalue:""},display:t.refcode,oprtype:"="}]))}},{key:"render",value:function(){var e=this,t=this.props,a=t.table,n=t.button,o=t.search,r=(t.base,t.modal),i=this.props.button.getButtons();i=i.sort((function(e,t){return t.btnorder-e.btnorder}));var c=a.createSimpleTable,m=o.NCCreateSearch,g=(r.createModal,n.createButtonApp);n.getButtons;return l.default.createElement("div",{className:"nc-bill-list"},l.default.createElement("div",{className:"nc-bill-header-area"},l.default.createElement("div",{className:"header-title-search-area"},l.default.createElement("h2",{className:"title-search-detail"},this.state.json?this.state.json["110140BOMM3001"]:"110140BOMM3001")),l.default.createElement("div",{className:"header-button-area"},g({area:"header",buttonLimit:3,onButtonClick:u.buttonClicks.bind(this),popContainer:document.querySelector(".header-button-area")}))),l.default.createElement("div",{className:"nc-bill-search-area"},m(this.searchId,{clickSearchBtn:this.clickSearchBtn.bind(this),onAfterEvent:this.afterSearchEvent.bind(this)})),l.default.createElement("div",{className:"nc-bill-table-area"},c(this.tableId,{dataSource:y,pkname:"cbomid",tableModelConfirm:this.tableModelConfirm,showIndex:!1,showCheck:!0,handlePageInfoChange:this.pageInfoClick.bind(this),onRowDoubleClick:this.doubleClick.bind(this),onSelected:this.setBtnStatus.bind(this),onSelectedAll:this.setBtnStatus.bind(this)})),l.default.createElement(h,{ref:"printOutput",url:p.URL.print,data:{funcode:"10140BOMM",nodekey:"bommprint",oids:this.state.pks,outputType:"output"}}),l.default.createElement(d.default,s({ref:function(t){return e.assignModal=t}},this.props)),l.default.createElement(f.default,s({ref:function(t){return e.batcheditModal=t}},this.props)),l.default.createElement(b,{show:this.state.approveDetailShow,close:this.closeApprove.bind(this),billtype:"19B1",billid:this.state.billid}))}}]),t}(i.Component),o=function(){var e=this;this.initTemplate=function(t){var a=t.createUIDom({pagecode:E,appcode:"10140BOMM"},(function(a){if(a){if(a.template){var n=a.template;n=e.modifierMeta(t,n),t.meta.setMeta(n),!g("searchParam",y)||e.props.search.setSearchValue(C,g("searchParam",y))}if(a.button){var o=a.button;t.button.setButtons(o)}a.context&&v("context",y,a.context)}}));console.log(a);var n=t.getUrlParam("crtids");"string"==typeof n&&(n=[n]),n&&n.length>0&&((0,c.ajax)({url:"/nccloud/mmbd/bom0202/queryRt.do",data:{crtids:n},success:function(t){if(t.data){var a=[];t.data[w].allpks.forEach((function(e){a.push(e)})),t.data[w].allpks=a,c.cacheTools.set("allpks",a),e.props.table.setAllTableData(w,t.data[w]);var n=e.state.inlt,o=a.length;if(t.data.userjson)JSON.parse(t.data.userjson).hidden?(0,c.toast)({title:"",content:"用户无BOM使用组织权限，部分结果未显示。"}):(0,c.toast)({title:"",content:n.get("110140BOMM4001",{count:o}),color:"success"});else(0,c.toast)({title:"",content:n.get("110140BOMM4001",{count:o}),color:"success"})}else{e.props.table.setAllTableData(w,{allpks:[],rows:[]}),(0,c.toast)({content:e.state.json?e.state.json["110140BOMM3007"]:"110140BOMM3007",color:"warning"})}e.props.table.selectAllRows(p.AREA.bomlist,!1),e.setBtnStatus()}}),e.props.button.setButtonDisabled({Refresh:!1}))},this.onTableButtonClick=function(t,a,n,o,s){if("Revise"===a&&(t.table.selectAllRows(p.AREA.bomlist,!1),t.pushTo("/card",{status:"edit",reviseEdit:!0,id:o.cbomid.value})),"EditLine"===a){var r=!1;if((0,c.ajax)({url:p.URL.checkpermission,async:!1,data:{id:o.cbomid.value,actioncode:"Edit"},success:function(e){r=!0},error:function(e){(0,c.toast)({color:"danger",content:e.message})}}),!r)return;e.props.table.selectAllRows(p.AREA.bomlist,!1),t.pushTo("/card",{status:"edit",id:o.cbomid.value})}if("DelLine"===a){var i=!1;if((0,c.ajax)({url:p.URL.checkpermission,async:!1,data:{id:o.cbomid.value,actioncode:"Edit"},success:function(e){i=!0},error:function(e){(0,c.toast)({color:"danger",content:e.message})}}),!i)return;var l=o.cbomid.value;1==o.hbdefault.value&&!0,(0,c.promptBox)({color:"warning",content:e.state.json["10140BOMM2-000006"],beSureBtnClick:function(){(0,c.ajax)({url:"/nccloud/mmbd/bom0202/delete.do",data:{param:[{id:l,ts:o.ts.value}]},success:function(a){a.success&&"1"==a.data.sucessNum?((0,c.toast)({color:"success",content:e.state.json["110140BOMM3006"]}),(0,t.table.deleteCacheId)(w,l),t.table.deleteTableRowsByIndex(w,s)):(0,c.toast)({color:"danger",content:a.data.errorMessages[0]})}})}})}"CopyLine"===a&&(t.table.selectAllRows(p.AREA.bomlist,!1),t.pushTo("/card",{status:"add",id:o.cbomid.value,copyadd:!0}))},this.closeApprove=function(){e.setState({approveDetailShow:!1})},this.doubleClick=function(t,a,n,o){var s=e.props.search.getAllSearchData(C);c.cacheTools.set("searchParams",s),e.props.table.selectAllRows(p.AREA.bomlist,!1),e.props.pushTo("/card",{status:"browse",id:t.cbomid.value,appcode:"10140BOMM"})},this.deleteAction=function(t){var a={id:e.selectedRowRecord.cbomid.value,ts:e.selectedRowRecord.ts.value};(0,c.ajax)({url:"/nccloud/mmbd/psg/delete.do",data:a,success:function(a){(0,c.toast)({color:"success",title:e.state.json["10140TAXRE-000019"]}),e.refreshAction(t)}})},this.refreshAction=function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.getData({},e.state.isShowOff,!1,(function(){a&&(0,c.toast)({title:e.state.json["10140TAXRE-000013"],color:"success"})}))},this.pageInfoClick=function(e,t,a){var n=e.table.getTablePageInfo(p.AREA.bomlist);if(0==a.length)for(var o=c.cacheTools.get("allpks"),s=Number(n.pageIndex),r=Number(n.pageSize),i=(s-1)*r,l=i;l<i+r&&o[l];l++)a.push(o[l]);var u={pageInfo:n,pagepks:a};(0,c.ajax)({url:"/nccloud/mmbd/bom0202/queryPage.do",data:u,success:function(t){var a=t.success,n=t.data;a&&(n?e.table.setAllTableData(w,n[w]):e.table.setAllTableData(w,{rows:[]}))}})},this.clickSearchBtn=function(t,a){console.log(a),a&&a.conditions&&a.conditions.push({field:"hfbomcategory",value:{firstvalue:"1",secondvalue:""},oprtype:"=",datatype:"203",isIncludeSub:!1}),e.searchVal=a,c.cacheTools.set("searchParams",a),e.getData(a,e.state.isShowOff,!0,(function(){e.props.button.setButtonDisabled({Refresh:!1})}))}},n);M=(0,c.createPage)({initTemplate:[]})(M),t.default=M},function(e,t){e.exports=a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buttonClicks=void 0;var n,o=a(9),s=(n=o)&&n.__esModule?n:{default:n};t.buttonClicks=s.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=this,l=void 0,c=void 0;switch(t){case"Add":var u=e.search.getAllSearchData(r.AREA.bomquery);n.cacheTools.set("searchParams",u),e.table.selectAllRows(r.AREA.bomlist,!1),e.pushTo("/card",{status:"add"});break;case"Edit":var d=!1;if((0,n.ajax)({url:r.URL.checkpermission,async:!1,data:{id:this.props.table.getCheckedRows(r.AREA.bomlist)[0].data.values.cbomid.value,actioncode:"Edit"},success:function(e){d=!0},error:function(e){(0,n.toast)({color:"danger",content:e.message})}}),!d)return;var p;if(p=e.search.getAllSearchData(r.AREA.bomquery),n.cacheTools.set("searchParams",p),1!=this.props.table.getCheckedRows(r.AREA.bomlist).length)return void(0,n.toast)({content:this.state.json["110140BOMM3010"],color:"warning"});e.table.selectAllRows(r.AREA.bomlist,!1),e.pushTo("/card",{status:"edit",id:this.props.table.getCheckedRows(r.AREA.bomlist)[0].data.values.cbomid.value});break;case"ReviseEdit":var f;f=e.search.getAllSearchData(r.AREA.bomquery),n.cacheTools.set("searchParams",f),e.table.selectAllRows(r.AREA.bomlist,!1),e.pushTo("/card",{status:"edit",reviseEdit:!0,id:this.props.table.getCheckedRows(r.AREA.bomlist)[0].data.values.cbomid.value});break;case"Delete":var m=!1;if((0,n.ajax)({url:r.URL.checkpermission,async:!1,data:{id:this.props.table.getCheckedRows(r.AREA.bomlist)[0].data.values.cbomid.value,actioncode:"Edit"},success:function(e){m=!0},error:function(e){(0,n.toast)({color:"danger",content:e.message})}}),!m)return;(0,n.promptBox)({color:"warning",title:this.state.json["110140BOMM3004"],content:this.state.json["110140BOMM3005"],beSureBtnClick:function(){!function(){var t=a.props.table.getCheckedRows(r.AREA.bomlist),s=[],i=!1;t.length>0?t.forEach((function(e){1==e.data.values.hbdefault.value&&(i=!0),s.push({id:e.data.values.cbomid.value,ts:e.data.values.ts.value})})):a.selectedRowRecord&&(1==selectedRowRecord.hbdefault.value&&(i=!0),s.push({id:a.selectedRowRecord.cbomid.value,ts:a.selectedRowRecord.ts.value})),i?(0,n.promptBox)({color:"warning",content:a.state.json["10140BOMM2-000006"],beSureBtnClick:function(){(0,n.ajax)({url:r.URL.delete,data:{param:s},success:function(t){(0,o.showBatchOprMessage)(null,t.data,a.state.pubjson["10140PUBMESSAGE-000028"]);var n=e.table.deleteCacheId,s=a.props.table.getCheckedRows(r.AREA.bomlist);s.length>0&&s.forEach((function(t){n(r.AREA.bomlist,t.data.values.cbomid.value),e.table.deleteTableRowsByRowId(r.AREA.bomlist,t.data.rowId)}))}})}}):(0,n.ajax)({url:r.URL.delete,data:{param:s},success:function(t){(0,o.showBatchOprMessage)(null,t.data,a.state.pubjson["10140PUBMESSAGE-000028"]);var n=e.table.deleteCacheId,s=a.props.table.getCheckedRows(r.AREA.bomlist);s.length>0&&s.forEach((function(t){n(r.AREA.bomlist,t.data.values.cbomid.value),e.table.deleteTableRowsByRowId(r.AREA.bomlist,t.data.rowId)}))}})}()}});break;case"Commit":var h=[],b=[],g=e.table.getCheckedRows(r.AREA.bomlist);if(g.length<=0)return void(0,n.toast)({color:"warning",content:(0,s.getLangByResId)(this,"10140PUBMESSAGE-000026")});g.map((function(e){var t={pk:e.data.values.cbomid.value,ts:e.data.values.ts.value};h.push(t),b.push(e.index)}));var v={pkTsParams:h,pageid:r.PAGECODE.bom_list};(0,n.ajax)({url:r.URL.commit,data:v,success:function(t){if(t.data&&t.data.workflow&&("approveflow"==t.data.workflow||"workflow"==t.data.workflow))return a.commitInfo={index:index,record:record},void a.setState({compositedata:t.data,compositedisplay:!0});if(t.success){(0,o.showBatchOprMessage)(null,t.data,(0,s.getLangByResId)(a,"10140PUBMESSAGE-000025"));var i=a.props.table.getTablePageInfo(r.AREA.bomlist),l=[];a.props.table.getAllTableData(r.AREA.bomlist).rows.forEach((function(e){l.push(e.values.cbomid.value)}));var c={pageInfo:i,pagepks:l};(0,n.ajax)({url:"/nccloud/mmbd/bom0202/queryPage.do",data:c,success:function(t){var a=t.success,n=t.data;a&&(n?e.table.setAllTableData(r.AREA.bomlist,n[r.AREA.bomlist]):e.table.setAllTableData(r.AREA.bomlist,{rows:[]}),e.button.setButtonDisabled(["Delete","Copy","Enable","Disable","Default","CancelDefault","Assign","Unassign","Commit","UnCommit","Assistfunction","gylxyzxjc","Print","Output","LinkTree"],!0))}})}}});break;case"Enable":var y=this.props.table.getCheckedRows(r.AREA.bomlist),E=[];y.length>0?y.forEach((function(e){E.push({id:e.data.values.cbomid.value,ts:e.data.values.ts.value})})):this.selectedRowRecord&&E.push({id:this.selectedRowRecord.cbomid.value,ts:this.selectedRowRecord.ts.value}),(0,n.ajax)({url:r.URL.enable,data:{param:E},success:function(e){(0,o.showBatchOprMessage)(null,e.data,a.state.pubjson["10140PUBMESSAGE-000028"]),a.getData({},a.state.isShowOff,!1)}});break;case"Disable":var C=this.props.table.getCheckedRows(r.AREA.bomlist),w=[];C.length>0?C.forEach((function(e){w.push({id:e.data.values.cbomid.value,ts:e.data.values.ts.value})})):this.selectedRowRecord&&w.push({id:this.selectedRowRecord.cbomid.value,ts:this.selectedRowRecord.ts.value}),(0,n.ajax)({url:r.URL.disable,data:{param:w},success:function(e){(0,o.showBatchOprMessage)(null,e.data,a.state.pubjson["10140PUBMESSAGE-000028"]),a.getData({},a.state.isShowOff,!1)}});break;case"UnCommit":if(0==(l=e.table.getCheckedRows(r.AREA.bomlist)).length){(0,n.toast)({content:(0,s.getLangByResId)(this,"110140BOMM3011"),color:"warning"});break}l.map((function(e){return e.index}));var B={};B.pageid=r.PAGECODE.head,B.pkTsParams=l.map((function(e){return{pk:e.data.values.cbomid.value,ts:e.data.values.ts.value}})),(0,n.ajax)({method:"post",url:r.URL.uncommit,data:B,success:function(t){(0,o.showBatchOprMessage)(null,t.data,(0,s.getLangByResId)(a,"10140PUBMESSAGE-000027"));var i=a.props.table.getTablePageInfo(r.AREA.bomlist),l=[];a.props.table.getAllTableData(r.AREA.bomlist).rows.forEach((function(e){l.push(e.values.cbomid.value)}));var c={pageInfo:i,pagepks:l};(0,n.ajax)({url:"/nccloud/mmbd/bom0202/queryPage.do",data:c,success:function(t){var a=t.success,n=t.data;a&&(n?e.table.setAllTableData(r.AREA.bomlist,n[r.AREA.bomlist]):e.table.setAllTableData(r.AREA.bomlist,{rows:[]}),e.button.setButtonDisabled(["Delete","Copy","Enable","Disable","Default","CancelDefault","Assign","Unassign","Commit","UnCommit","Assistfunction","gylxyzxjc","Print","Output","LinkTree"],!0))}})}});break;case"Default":var M=this.props.table.getCheckedRows(r.AREA.bomlist),A={};M.length>0&&M.forEach((function(e){A={id:e.data.values.cbomid.value,ts:e.data.values.ts.value,rowId:e.data.rowId}})),(0,n.ajax)({url:"/nccloud/mmbd/bom0202/default.do",data:A,success:function(e){if(e.data.oriid)(0,n.promptBox)({color:"warning",content:a.state.json["10140BOMM2-000009"],beSureBtnClick:function(){(0,n.ajax)({url:"/nccloud/mmbd/bom0202/suredefault.do",data:{curid:e.data.curid,oriid:e.data.oriid,curts:e.data.curts},success:function(e){e.data[r.AREA.bomlist]&&((0,n.toast)({color:"success",title:a.state.json["10140BOMM2-000010"]}),a.getData({},a.state.isShowOff,!1))}})}});else if(e.data[r.AREA.bomlist]){e.data[r.AREA.bomlist].rows.forEach((function(e){e.values.cbomid.value==A.id&&(e.rowId=A.rowId)})),a.props.table.updateTableData(r.AREA.bomlist,e.data[r.AREA.bomlist]),(0,n.toast)({color:"success",title:a.state.json["10140BOMM2-000010"]}),a.getData({},a.state.isShowOff,!1)}}});break;case"CancelDefault":var k=this.props.table.getCheckedRows(r.AREA.bomlist),O={};k.length>0&&k.forEach((function(e){O={id:e.data.values.cbomid.value,ts:e.data.values.ts.value}})),(0,n.ajax)({url:"/nccloud/mmbd/bom0202/canceldefault.do",data:O,success:function(e){e.data[r.AREA.bomlist]&&(e.data[r.AREA.bomlist].rows.forEach((function(e){e.values.cbomid.value==O.id&&(e.rowId=O.rowId)})),a.props.table.updateTableData(r.AREA.bomlist,e.data[r.AREA.bomlist]),(0,n.toast)({color:"success",title:a.state.json["10140BOMM2-000010"]}),a.getData({},a.state.isShowOff,!1))}});break;case"gylxyzxjc":var R=this.props.table.getCheckedRows(r.AREA.bomlist);(0,n.ajax)({url:r.URL.checkbefore,data:{cbomid:R[0].data.values.cbomid.value},success:function(e){1==R.length&&a.props.openTo("/uapbd/mmbase/datamanage01/main/index.html",{status:"browse",pk_org:R[0].data.values.pk_org.value,pk_org_d:R[0].data.values.pk_org.display,cbomid:R[0].data.values.cbomid.value,appcode:"10140DAMA",pagecode:"10140DAMA_form"})}});break;case"LinkTree":var x=this.props.table.getCheckedRows(r.AREA.bomlist);1==x.length&&this.props.openTo("/uapbd/mmbase/bom0204/main/index.html",{status:"browse",pk_org:x[0].data.values.pk_org.value,pk_org_d:x[0].data.values.pk_org.display,hcmaterialid:x[0].data.values.hcmaterialid.value,hcmaterialid_d:x[0].data.values.hcmaterialid.display,hcmaterialname:x[0].data.values.hcmaterialname.value,hcmaterialvid_d:x[0].data.values["hcmaterialvid.version"]?x[0].data.values["hcmaterialvid.version"].display:"",hcmaterialvid:x[0].data.values.hcmaterialvid.value,hversion:x[0].data.values.hversion.value,fbomtype:x[0].data.values.fbomtype.value,appcode:"10140BOMTM",pagecode:"10140BOMTM_main"});break;case"BatchEdit":if(!(l=e.table.getCheckedRows(r.AREA.bomlist))||0==l.length)return void(0,n.toast)({content:this.state.json["110140BOMM3011"],color:"warning"});for(var S=!0,_=[],D=0;D<l.length;D++){var T=l[D].data.values;if("0"!=T.fbillstatus.value&&"-1"!=T.fbillstatus.value){S=!1;break}_.push(T)}if(0==S)return void(0,n.toast)({content:"仅自由态/审批不通过BOM可修改，选择BOM中存在审批中/审批通过BOM，请重新选择！",color:"warning"});console.log(_),this.batcheditModal.show(l,(function(){a.getData({},a.state.isShowOff,!1)}));break;case"Assign":if(!(l=e.table.getCheckedRows(r.AREA.bomlist))||0===l.length)return void(0,n.toast)({content:this.state.json["110140BOMM3011"],color:"warning"});if(c=[],l.forEach((function(e){c.push(e.data.values.pk_org.value)})),!i(c))break;var L=[];l.forEach((function(e){L.push(e.data.values.cbomid.value)})),this.assignModal.show(L,!1);break;case"Unassign":if(!(l=e.table.getCheckedRows(r.AREA.bomlist))||0===l.length)return void(0,n.toast)({content:this.state.json["110140BOMM3011"],color:"warning"});if(c=[],l.forEach((function(e){c.push(e.data.values.pk_org.value)})),!i(c))break;var j=[];l.forEach((function(e){j.push(e.data.values.cbomid.value)})),this.assignModal.show(j,!0);break;case"Print":var N=!1;if((0,n.ajax)({url:r.URL.checkpermission,async:!1,data:{id:this.props.table.getCheckedRows(r.AREA.bomlist)[0].data.values.cbomid.value,actioncode:"Edit"},success:function(e){N=!0},error:function(e){(0,n.toast)({color:"danger",content:e.message})}}),!N)return;!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=a.props.table.getCheckedRows(r.AREA.bomlist),o=[];t.map((function(e){o.push(e.data.values.cbomid.value)})),console.log(o,"pks"),""!=e&&(0,n.print)("pdf",r.URL.print,{funcode:"10140BOMM",nodekey:"bommprint",oids:o,outputType:e})}("print");break;case"Output":var I=this.props.table.getCheckedRows(r.AREA.bomlist),P=[];I.forEach((function(e){P.push(e.data.values.cbomid.value)})),this.setState({pks:P},(function(){a.refs.printOutput.open()}));break;case"CopyLines":var U=e.cardTable.getCheckedRows(r.AREA.body);if(null==U||0==U.length)return void(0,n.toast)({color:"warning",content:(0,s.getLangByResId)(this,"4004ARRIVAL-000007")});rowCopyPasteUtils.copyRows.call(this,e,r.AREA.body,["CopyLines","DeleteLines","ResetRowno"],["PastToThis","PastToLast","CancelPast"]),this.setState({isCopyLine:!0}),e.button.setButtonDisabled(["PastToThis","PastToLast","CancelPast"],!1);break;case"PastToLast":rowCopyPasteUtils.pasteRowsToTail.call(this,e,r.AREA.body,["CopyLines","DeleteLines","ResetRowno"],["PastToThis","PastToLast","CancelPast"],["crowno","pk_arriveorder_b"]),RownoUtils.setRowNo(e,r.AREA.body,"crowno"),this.setState({isCopyLine:!1});var F=e.cardTable.getCheckedRows(r.AREA.body);null!=F&&0!=F.length||e.button.setButtonVisible(["PastToThis","PastToLast","CancelPast"],!1);break;case"CancelPast":rowCopyPasteUtils.cancel.call(this,e,r.AREA.body,["CopyLines","DeleteLines","ResetRowno"],["PastToThis","PastToLast","CancelPast"]),this.setState({isCopyLine:!1});var q=e.cardTable.getCheckedRows(r.AREA.body);null!=q&&0!=q.length||e.button.setButtonVisible(["PastToThis","PastToLast","CancelPast"],!1);break;case"DeleteLines":var G=this.props.table.getCheckedRows(r.AREA.bomlist),z=[],V=!1;G.length>0?G.forEach((function(e){1==e.data.values.hbdefault.value&&(V=!0),z.push({id:e.data.values.cbomid.value,ts:e.data.values.ts.value})})):this.selectedRowRecord&&(1==selectedRowRecord.hbdefault.value&&(V=!0),z.push({id:this.selectedRowRecord.cbomid.value,ts:this.selectedRowRecord.ts.value})),V?(0,n.promptBox)({color:"warning",content:this.state.json["10140BOMM2-000006"],beSureBtnClick:function(){(0,n.ajax)({url:r.URL.delete,data:{param:z},success:function(t){(0,o.showBatchOprMessage)(null,t.data,a.state.pubjson["10140PUBMESSAGE-000028"]);var n=e.table.deleteCacheId,s=a.props.table.getCheckedRows(r.AREA.bomlist);s.length>0&&s.forEach((function(t){n(r.AREA.bomlist,t.data.values.cbomid.value),e.table.deleteTableRowsByRowId(r.AREA.bomlist,t.data.rowId)}))}})}}):(0,n.ajax)({url:r.URL.delete,data:{param:z},success:function(t){(0,o.showBatchOprMessage)(null,t.data,a.state.pubjson["10140PUBMESSAGE-000028"]);var n=e.table.deleteCacheId,s=a.props.table.getCheckedRows(r.AREA.bomlist);s.length>0&&s.forEach((function(t){n(r.AREA.bomlist,t.data.values.cbomid.value),e.table.deleteTableRowsByRowId(r.AREA.bomlist,t.data.rowId)}))}});break;case"Refresh":this.getData({},this.state.isShowOff,!1,(function(){(0,n.toast)({title:a.state.pubjson["10140PUBMESSAGE-000017"],color:"success"})}))}};var n=a(0),o=a(10),s=a(11),r=(a(12),a(2)),i=(n.base.NCMessage,n.base.NCModal,function(e){return!0})},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showWarningDialog=t.showBatchOprMessage=void 0;var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(0);var s=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.lang=null,this.inlt=null,console.log("LangContainer初始化"),(0,o.getMultiLang)({moduleId:"10140MMPUBMSG",domainName:"uapbd",callback:this.init.bind(this),needInlt:!0})}return n(e,[{key:"init",value:function(e,t,a){t&&(this.lang=e,this.inlt=a)}},{key:"getLangByResId",value:function(e,t){return t?this.inlt.get(e,t)||e:this.lang&&this.lang[e]||e}}]),e}());function r(e,t,a,n,s,r,i,l,c){(0,o.toast)({duration:a,color:n,title:e,content:t,groupOperation:s,TextArr:r,groupOperationMsg:i,onExpand:l,onClose:c})}function i(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3];(0,o.promptBox)({color:n,title:e,content:t,noFooter:a.noFooter,noCancelBtn:a.noCancelBtn,beSureBtnName:a.beSureBtnName,cancelBtnName:a.cancelBtnName,beSureBtnClick:a.beSureBtnClick,cancelBtnClick:a.cancelBtnClick,closeBtnClick:a.closeBtnClick,closeByClickBackDrop:a.closeByClickBackDrop})}t.showBatchOprMessage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.getLangByResId("10140PUBMESSAGE-000003"),t=arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=t.failedNum?t.failedNum:0,l=t.sucessNum;if(0==i)!function(e,t,a){r(e,t,a)}(s.getLangByResId("10140PUBMESSAGE-000018",{0:n}),s.getLangByResId("10140PUBMESSAGE-000022",{0:t.sucessNum}));else if(0==l){e=s.getLangByResId("10140PUBMESSAGE-000019",{0:n});var c=s.getLangByResId("10140PUBMESSAGE-000020",{0:t.failedNum,1:t.failedNum});(0,o.toast)({duration:"infinity",color:"danger",title:e,content:c,groupOperation:!0,TextArr:[s.getLangByResId("10140PUBMESSAGE-000000"),s.getLangByResId("10140PUBMESSAGE-000001"),s.getLangByResId("10140PUBMESSAGE-000002")],groupOperationMsg:t.errorMessages,onExpand:a.onExpand,onClose:a.onClose})}else{e=s.getLangByResId("10140PUBMESSAGE-000019",{0:n});var u=s.getLangByResId("10140PUBMESSAGE-000021",{0:Number(t.sucessNum)+Number(t.failedNum),1:t.sucessNum,2:t.failedNum});(0,o.toast)({duration:"infinity",color:"danger",title:e,content:u,groupOperation:!0,TextArr:[s.getLangByResId("10140PUBMESSAGE-000000"),s.getLangByResId("10140PUBMESSAGE-000001"),s.getLangByResId("10140PUBMESSAGE-000002")],groupOperationMsg:t.errorMessages,onExpand:a.onExpand,onClose:a.onClose})}},t.showWarningDialog=function(e,t){i(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},"warning")}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLangByResId=t.initLang=void 0;var n=a(0);t.initLang=function(e,t,a,o){e.lang=null,e.inlt=null,(0,n.getMultiLang)({moduleId:t,domainName:a,callback:function(t,a,n){a&&(e.lang=t,e.inlt=n),o&&o()},needInlt:!0})},t.getLangByResId=function(e,t,a){return function(e,t){if(!e)throw(0,n.toast)({color:"danger",content:"请检查代码中this是否能够取到！当前为undifined,位置："+t}),new Error("请检查代码中this是否能够取到！当前为undifined,位置："+t)}(e,t),a?e.inlt?e.inlt.get(t,a)||t:"":e.lang?e.lang[t]||t:""}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateCacheDataForList=function(e,t,a,n,o){var s=n.sucessVOs;if(null!=s&&0!=s.length){var r=[];if(null==o){var i={};e.table.getCheckedRows(t).forEach((function(e){var t=e.data.values[a].value;i[t]=e.index})),s[t].rows.forEach((function(e,t){var n=e.values[a].value,o={index:i[n],data:{values:e.values}};r.push(o)}))}else{var l={index:o,data:{values:s[t].rows[0].values}};r.push(l)}e.table.updateDataByIndexs(t,r)}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(1),r=c(s),i=a(0),l=c(a(14));function c(e){return e&&e.__esModule?e:{default:e}}i.base.NCTable,i.base.NCSelect;var u=i.base.NCButton,d=(i.base.NCCol,i.base.NCRow,i.base.NCModal),p=(i.base.NCCollapse,function(){}),f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.show=function(e,t){a.state.modal.show=!0,a.state.materialIDs=e,a.state.isCancelAssign=!!t,a.setState(a.state)},a.onsubmit=function(){var e=a.orgSelect.getData();!e||e.length<1?(0,i.toast)({content:a.props.MultiInit.getLangData("10140BOMM").intl&&a.props.MultiInit.getLangData("10140BOMM").intl.get("110140BOMM3011"),color:"warning"}):(0,i.ajax)({url:"/nccloud/mmbd/bom0202/bomassign.do",data:{ids:a.state.materialIDs,targetIds:e,type:a.state.isCancelAssign?"cancelAssign":"assign"},success:function(e){var t=e.success;e.data;t&&((0,i.toast)({content:a.state.isCancelAssign?a.props.MultiInit.getLangData("10140BOMM").intl&&a.props.MultiInit.getLangData("10140BOMM").intl.get("110140BOMM3016"):a.props.MultiInit.getLangData("10140BOMM").intl&&a.props.MultiInit.getLangData("10140BOMM").intl.get("110140BOMM3013"),color:"success"}),a.state.modal.show=!1,a.setState(a.state,a.onFinish()),e.data&&e.data.bodys&&a.props.cardTable.setTableData("bomcard_useorg",e.data.bodys.bomcard_useorg))}})},a.cancel=function(){a.state.modal.show=!1,a.setState(a.state)},a.state={modal:{show:!1,modalDropup:!0,size:"xlg"},orgValues:[],materialIDs:[],isCancelAssign:!1},a.onFinish=a.props.onFinish||p,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"render",value:function(){var e=this,t=n({},this.state.modal);return r.default.createElement(d,t,r.default.createElement(d.Header,{closeButton:!1},r.default.createElement(d.Title,null,this.state.isCancelAssign?this.props.MultiInit.getLangData("10140BOMM").intl&&this.props.MultiInit.getLangData("10140BOMM").intl.get("110140BOMM3024"):this.props.MultiInit.getLangData("10140BOMM").intl&&this.props.MultiInit.getLangData("10140BOMM").intl.get("110140BOMM3014"))),r.default.createElement(d.Body,null,r.default.createElement("div",null,r.default.createElement(l.default,n({ref:function(t){return e.orgSelect=t}},this.props)))),r.default.createElement(d.Footer,null,r.default.createElement("span",null,r.default.createElement(u,{onClick:this.onsubmit.bind(this)},this.state.isCancelAssign?this.props.MultiInit.getLangData("10140BOMM").intl&&this.props.MultiInit.getLangData("10140BOMM").intl.get("110140BOMM3018"):this.props.MultiInit.getLangData("10140BOMM").intl&&this.props.MultiInit.getLangData("10140BOMM").intl.get("110140BOMM3015"))),r.default.createElement(u,{onClick:this.cancel.bind(this)},this.props.MultiInit.getLangData("10140BOMM").intl&&this.props.MultiInit.getLangData("10140BOMM").intl.get("110140BOMM3017"))))}}]),t}(s.Component);t.default=f},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(1),r=c(s),i=a(0),l=c(a(15));function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a(3),a(18);var d=i.base.NCTable,p=(i.base.NCSelect,i.base.NCTabs,i.base.NCButton),f=i.base.NCCheckbox,m=(i.base.NCCol,i.base.NCRow,i.base.NCModal,i.base.NCCollapse,i.base.NCTree),h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.getChildList=function(e,t){for(var n=a,o=function(a){var o=e[a];if(t?n.state.selectData.datas.push({id:o.id||o.props&&o.props.id||"root",name:o.name||o.props&&o.props.name||"root",code:o.nodeData?o.nodeData.code:o.props?o.props.nodeData.code:"root",orgclazz:o.nodeData?o.nodeData.orgclazz:o.props?o.props.nodeData.orgclazz:"orgtype"}):o.id?n.state.selectData.datas=n.state.selectData.datas.filter((function(e){return e.id!=o.id})):o.props?n.state.selectData.datas=n.state.selectData.datas.filter((function(e){return e.id!=o.props.id})):o.cheked=t,!(o.children instanceof Array&&o.children.length>0||o.props&&o.props.children instanceof Array&&o.props&&o.props.children.length>0))return"continue";n.getChildList(o.children||o.props&&o.props.children,t)},s=0;s<e.length;s++)o(s);n.setState(n.state)},a.state={isChild:!1,tree:{main:a,expandedKeys:["root"],defNodeCfg:{},root:{root:!0,key:"root",title:a.props.MultiInit.getLangData("10140BOMM").intl&&a.props.MultiInit.getLangData("10140BOMM").intl.get("110140BOMM3023"),id:"root",name:a.props.MultiInit.getLangData("10140BOMM").intl&&a.props.MultiInit.getLangData("10140BOMM").intl.get("110140BOMM3023"),nodeData:{code:"root",orgclazz:"root"}},datas:[],renderNode:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments[2];var t=this.main.state.tree.defNodeCfg||{},a=function(e,t,a){return e.title=a?[r.default.createElement("i",{className:"tree-dian"}),r.default.createElement("span",{className:"title-middle"},e.nodeData.code," ",e.title)]:[r.default.createElement("i",{className:t}),r.default.createElement("span",{className:"title-middle"},e.nodeData.code,"  ",e.title)],e},o=function o(s){return s.map((function(s){var i=n({},t,s),c=s.children||[],d=!c.length,p=e.includes(s.refpk)?"icon iconfont  icon-wenjianjiadakai tree-wenjian":"icon iconfont  icon-wenjianjia tree-wenjian";return r.default.createElement(m.NCTreeNode,n(u({className:"node-item",key:s.key},"className",(0,l.default)("node-item",{isexpend:e.includes(s.keys)})),a?a(i,p,d):i,{isLeaf:d}),d?"":o(c))}))};return o([n({},this.root,{children:this.datas})])},config:function(){var e=this;return{checkable:!0,defaultExpandAll:!0,checkStrictly:!0,onExpand:function(t){e.expandedKeys=t,e.main.setState(e.main.state)},onCheck:function(e,t){var a=this,n=t.node.props,o=t.checked,s=this.main.state.selectData.datas,r={id:n.id||"root",name:n.name||"root",code:n.nodeData?n.nodeData.code:"root",orgclazz:n.nodeData?n.nodeData.orgclazz:"orgtype"};"orgtype"===r.orgclazz||"root"===r.id?"root"!==r.id?this.main.state.tree.datas.map((function(e){e.id===n.id&&a.main.getChildList([e],o)})):this.main.getChildList(o?[n]:s,o):this.main.state.isChild?this.main.getChildList([n],o):(s=o?s.concat(r):s.filter((function(e){return e.id!=r.id})),this.main.state.selectData.datas=s,this.main.setState(this.main.state))}.bind(this)}}},table:{main:a,rowKey:"id",bodyStyle:{height:"330px"},columns:[{title:a.props.MultiInit.getLangData("10140BOMM").intl&&a.props.MultiInit.getLangData("10140BOMM").intl.get("110140BOMM3019"),dataIndex:"code",width:"40%"},{title:a.props.MultiInit.getLangData("10140BOMM").intl&&a.props.MultiInit.getLangData("10140BOMM").intl.get("110140BOMM3020"),dataIndex:"name",width:"40%"},{title:a.props.MultiInit.getLangData("10140BOMM").intl&&a.props.MultiInit.getLangData("10140BOMM").intl.get("110140BOMM3002"),dataIndex:"doit",width:"20%",render:function(e,t,a){return r.default.createElement(p,{onClick:function(){var e=this.state.selectData.datas;this.state.selectData.datas=e.filter((function(e){return e.id!=t.id})),this.setState(this.state)}.bind(this)},this.props.MultiInit.getLangData("10140BOMM").intl&&this.props.MultiInit.getLangData("10140BOMM").intl.get("110140BOMM3004"))}.bind(a)}]},selectData:{datas:[]}},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){this.reset()}},{key:"reset",value:function(){var e=this;(0,i.ajax)({url:"/nccloud/mmbd/bompub/assignorgtree.do",data:{orgtypeIDs:["BUSINESSUNIT00000000"],isCludeGlobalAndGroupVO:!1},success:function(t){var a=t.data;e.state.selectData.datas=[],e.state.tree.datas=a,e.setState(e.state)}})}},{key:"getData",value:function(){return this.state.selectData.datas.filter((function(e){return"root"!==e.orgclazz&&"orgtype"!==e.orgclazz})).map((function(e){return e.id}))}},{key:"render",value:function(){var e=this,t=this.state.tree,a=this.state.table,o=this.state.selectData.datas,s=o.map((function(e){return e.id})),i=o.filter((function(e){return"root"!==e.orgclazz&&"orgtype"!==e.orgclazz}));return r.default.createElement("div",{className:"transfer_tree_container",style:{marginTop:10}},r.default.createElement("div",{className:"left-area",style:{height:"400px",padding:"10px",background:"rgb(249,249,249)",width:"calc(50% - 25px)"}},r.default.createElement("div",{className:"left-area-nei"},r.default.createElement("div",{field:"tree-area",className:"syncTreeCom syncTreeComTransferLineStyle",style:{marginLeft:20,height:"calc(100% - 40px)"}},r.default.createElement("div",{className:"synctree-area",fieldname:"树控件"},r.default.createElement(m,n({},t.config(),{checkedKeys:s},{openIcon:r.default.createElement("i",{field:"tree-switcher",className:"icon iconfont icon-shu_zk tree-swich"}),closeIcon:r.default.createElement("i",{field:"tree-switcher",className:"icon iconfont icon-shushouqi tree-swich"})}),t.renderNode(this.state.tree.expandedKeys)))),r.default.createElement("div",{style:{marginTop:10}},r.default.createElement(f,{checked:this.state.isChild,onChange:function(t){e.state.isChild=t,e.setState(e.state)}},this.props.MultiInit.getLangData("10140BOMM").intl&&this.props.MultiInit.getLangData("10140BOMM").intl.get("110140BOMM3021"))))),r.default.createElement("div",{className:"right-area",style:{marginLeft:30,height:"400px",padding:"10px",background:"rgb(249,249,249)",width:"calc(50% - 25px)"}},r.default.createElement(d,n({},a,{data:i},{scroll:{y:360}}))))}}]),t}(s.Component);t.default=h},function(e,t,a){var n;!function(){"use strict";var a={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var s=typeof n;if("string"===s||"number"===s)e.push(n);else if(Array.isArray(n)&&n.length){var r=o.apply(null,n);r&&e.push(r)}else if("object"===s)for(var i in n)a.call(n,i)&&n[i]&&e.push(i)}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},function(e,t,a){(e.exports=a(4)(!1)).push([e.i,'* {\n  padding: 0;\n  margin: 0;\n}\n/*定位容器*/\n.uapbd_style_center_container {\n  position: relative;\n  /*容器 子元素 未定义距离*/\n  /*容器 子元素 距离右边 20px*/\n  /*容器 use 子元素 距离右边 20px*/\n}\n.uapbd_style_center_container .uapbd_style_center_undefined {\n  position: absolute;\n}\n.uapbd_style_center_container .uapbd_style_center_right20 {\n  position: absolute;\n  top: 0;\n  right: 20px;\n  bottom: 0;\n}\n.uapbd_style_center_container .uapbd_style_center_left20 {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 20px;\n}\n/*出现 滚动条的容器*/\n.uapbd_style_scroll_container {\n  overflow: auto;\n}\n/*定义滚动条轨道*/\n.uapbd_style_scroll_container::-webkit-scrollbar-track {\n  border-radius: 8px;\n  background-color: white;\n}\n/*定义滚动条高宽及背景 高宽分别对应横竖滚动条的尺寸*/\n.uapbd_style_scroll_container::-webkit-scrollbar {\n  width: 8px;\n}\n/*定义滑块 内阴影+圆角*/\n.uapbd_style_scroll_container::-webkit-scrollbar-thumb {\n  border-radius: 8px;\n  width: 8px;\n  background-color: #d8d8d8;\n}\n.transfer_tree_container {\n  clear: both;\n  height: 90%;\n  width: 100%;\n  margin-top: 10px;\n}\n.transfer_tree_container .left-area {\n  height: 100%;\n  display: inline-block;\n  vertical-align: top;\n  width: calc(50% - 91px);\n  overflow: auto;\n}\n.transfer_tree_container .button-area {\n  height: 100%;\n  width: 50px;\n  display: inline-block;\n  vertical-align: middle;\n  padding-top: 30px;\n  text-align: center;\n}\n.transfer_tree_container .button-area .opr-botton {\n  padding-top: 25px;\n  display: block;\n  margin: 0 auto;\n}\n.transfer_tree_container .right-area {\n  height: 100%;\n  display: inline-block;\n  vertical-align: top;\n  width: calc(50% - 91px);\n  overflow: auto;\n}\n.transfer_tree_container .transferSwitcherClassSelfNameHidden i {\n  visibility: hidden;\n}\n.transfer_tree_container .left-area-tree .u-tree,\n.transfer_tree_container .right-area-tree .u-tree {\n  height: 360px;\n  overflow: auto;\n}\n.transfer_tree_container .left-area-nei,\n.transfer_tree_container .right-area-nei {\n  height: 100%;\n  border-radius: 3px;\n  border: 1px solid #d0d0d0;\n  background: transparent;\n}\n.transfer_tree_container .opr-botton-trans button {\n  min-width: auto;\n  width: 32px;\n  height: 32px;\n  padding: 0;\n}\n/*\n * 这个是左树的 控制搜索框 宽度的。\n */\n.NC_syncTreeSearch_self_width {\n  width: 240px!important;\n}\n.NC_syncTreeSearch_self_width .u-form-control-wrapper {\n  width: 240px!important;\n}\n/*\n * 这个是左树中加虚线样式。\n */\n.syncTreeComLineStyle .synctree-area .u-tree > li:only-child > ul:before {\n  border-left: none;\n}\n.syncTreeComLineStyle .synctree-area .u-tree > li > ul:last-child::before {\n  border-left: none;\n}\n.syncTreeComLineStyle .synctree-area .u-tree-child-tree-open > li::after {\n  position: absolute;\n  left: 8px;\n  top: -15px;\n  content: "";\n  display: inline-block;\n  width: 1px;\n  height: 28px;\n  border-left: 1px dashed #d0d0d0;\n}\n.syncTreeComLineStyle .synctree-area .node-item .u-tree-switcher {\n  position: relative;\n  z-index: 2;\n}\n.syncTreeComLineStyle .synctree-area li::after {\n  border: none;\n}\n.syncTreeComLineStyle .synctree-area li {\n  position: relative;\n}\n.syncTreeComLineStyle .synctree-area li .u-tree-switcher {\n  position: relative;\n}\n.syncTreeComLineStyle .synctree-area li .u-tree-switcher::before {\n  position: absolute;\n  left: 11px;\n  top: 8px;\n  content: "";\n  display: inline-block;\n  width: 10px;\n  border-top: 1px dashed #d0d0d0;\n}\n.syncTreeComLineStyle .synctree-area li .isLeaf_hiden_point_line > i::before {\n  visibility: hidden;\n}\n/*\n * 穿梭树 线样式修改\n */\n.syncTreeComTransferLineStyle .synctree-area .u-tree > li:only-child > ul:before {\n  border-left: none;\n}\n.syncTreeComTransferLineStyle .synctree-area .u-tree > li > ul:last-child::before {\n  border-left: none;\n}\n.syncTreeComTransferLineStyle .synctree-area .u-tree-child-tree-open > li::after {\n  position: absolute;\n  left: 8px;\n  top: -15px;\n  content: "";\n  display: inline-block;\n  width: 1px;\n  height: 28px;\n  border-left: 1px dashed #d0d0d0;\n}\n.syncTreeComTransferLineStyle .synctree-area .node-item .u-tree-switcher {\n  position: relative;\n  z-index: 2;\n}\n.syncTreeComTransferLineStyle .synctree-area li::after {\n  border: none;\n}\n.syncTreeComTransferLineStyle .synctree-area li {\n  position: relative;\n}\n.syncTreeComTransferLineStyle .synctree-area li .isLeaf_show_point_line::before {\n  position: absolute;\n  left: 11px;\n  top: 8px;\n  content: "";\n  display: inline-block;\n  width: 10px;\n  border-top: 1px dashed #d0d0d0;\n}\n.syncTreeComTransferLineStyle .synctree-area li .isLeaf_hiden_point_line::before {\n  position: absolute;\n  left: 11px;\n  top: 8px;\n  content: "";\n  display: inline-block;\n  width: 10px;\n  border-top: 1px dashed #d0d0d0;\n}\n.syncTreeComTransferLineStyle .synctree-area li .isLeaf_hiden_point_line > i::before {\n  visibility: hidden;\n}\n.node-item-edit-point-style-self {\n  background-color: #ebedf2;\n}\n.node-item-edit-point-style-self > a span {\n  color: #e14c46!important;\n}\n.table-slef-set-long span {\n  margin-right: 0px!important;\n}\n',""])},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var a=t.protocol+"//"+t.host,n=a+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var o,s=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(s)?e:(o=0===s.indexOf("//")?s:0===s.indexOf("/")?a+s:n+s.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")}))}},function(e,t,a){var n=a(19);"string"==typeof n&&(n=[[e.i,n,""]]);var o={transform:void 0};a(5)(n,o);n.locals&&(e.exports=n.locals)},function(e,t,a){(e.exports=a(4)(!1)).push([e.i,".assign-orgselect-tree-div {\n  height: 400px;\n  overflow: scroll;\n}\n.assign-orgselect-tree-div .u-tree-checkbox-checked .u-tree-checkbox-inner {\n  background: #4E5E68;\n  border-color: #A8A8A8;\n}\n.assign-orgselect-tree-div .u-tree-checkbox-indeterminate .u-tree-checkbox-inner {\n  background: #4E5E68;\n  border-color: #A8A8A8;\n}\n",""])},function(e,t,a){"use strict";function n(e){e.sorter=function(t,a){return function(e,t){return e<t?-1:e>t?1:0}(Number(t.values[e.attrcode].value),Number(a.values[e.attrcode].value))}}Object.defineProperty(t,"__esModule",{value:!0});var o={numberSort:function(e,t,a){e[t].items.map((function(e){a instanceof Array?a.includes(e.attrcode)&&n(e):a==e.attrcode&&n(e)}))}};t.columnSortUtils=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=a(1),r=(n=s)&&n.__esModule?n:{default:n},i=a(0);a(3);var l=i.base.NCModal,c=i.base.NCButton,u=i.base.NCSelect,d="/nccloud/mmbd/bom0202/batchEditUpdate.do",p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.show=function(e,t){a.state.modal.show=!0,a.state.component=o({editType:"1"},{}),a.state.selectedrecords=e,a.setState(a.state),a.onfinish=t},a.onsubmit=function(){console.log(a.state.selectedrecords);var e=a.state.selectedrecords.map((function(e){return e.data.values.cbomid.value})),t={editparams:a.state.component,pkparams:e};console.log(t),null!=t&&null!=t.data&&(0,i.ajax)({url:d,data:t,success:function(e){a.state.modal.show=!1,a.setState(a.state),null!=a.onfinish&&a.onfinish()}})},a.cancel=function(){a.state.modal.show=!1,a.state.component=o({editType:"1"},{}),a.state.selectedrecords=[],a.setState(a.state)},a.onBatchEditTypeChange=function(e){a.state.component.editType=e,a.setState(a.state)},a.onBkititemChange=function(e){a.state.component.bkititem=e,a.setState(a.state)},a.onHnassparentnumChange=function(e){console.log("onHnassparentnumChange");var t=a.state.component.hnassparentnum?a.state.component.hnassparentnum:"",n=e.target.value;0==a.checkHnassparentnumInput(n)?a.state.component.hnassparentnum=t:a.state.component.hnassparentnum=n,a.setState(a.state),console.log(a.state.component.hnassparentnum)},a.checkHnassparentnumInput=function(e){for(var t=!0,a=!1,n=0;n<e.length;n++){if("."===e.charAt(n)){if(0!=a){t=!1;break}a=!0}if(0==n){if(1==/[^0-9.-]/g.test(e.charAt(n))){t=!1;break}}else if(1==/[^0-9.]/g.test(e.charAt(n))){t=!1;break}}return 1==t&&1==a&&e.substring(e.indexOf(".")+1).length>8&&(t=!1),t},a.onFitemsourceChange=function(e){a.state.component.fitemsource=e,a.setState(a.state)},a.onFitemtypeChange=function(e){a.state.component.fitemtype=e,a.setState(a.state)},a.onIbasenumChange=function(e){console.log("onIbasenumChange");var t=a.state.component.ibasenum?a.state.component.ibasenum:"",n=e.target.value;0==a.checkIbasenumInput(n)?a.state.component.ibasenum=t:a.state.component.ibasenum=n,a.setState(a.state),console.log(a.state.component.ibasenum)},a.checkIbasenumInput=function(e){for(var t=!0,a=0;a<e.length;a++)if(0==a){if(1==/[^1-9]/g.test(e.charAt(a))){t=!1;break}}else if(1==/[^0-9]/g.test(e.charAt(a))){t=!1;break}return t},a.onBkitmaterialChange=function(e){a.state.component.bkitmaterial=e,a.setState(a.state)},a.onBdeliverChange=function(e){a.state.component.bdeliver=e,a.setState(a.state)},a.onFsupplymodeChange=function(e){a.state.component.fsupplymode=e,a.setState(a.state)},a.onFcontrolChange=function(e){a.state.component.fcontrol=e,a.setState(a.state)},a.onBbunibatchChange=function(e){a.state.component.bbunibatch=e,a.setState(a.state)},a.onBbchkitemforwrChange=function(e){a.state.component.bbchkitemforwr=e,a.setState(a.state)},a.onBcanreplaceChange=function(e){a.state.component.bcanreplace=e,a.setState(a.state)},a.onFreplacetypeChange=function(e){a.state.component.freplacetype=e,a.setState(a.state)},a.onVmatingnoChange=function(e){console.log(e.target.value),a.state.component.vmatingno=e.target.value,a.setState(a.state)},a.onFbackflushtypeChange=function(e){a.state.component.fbackflushtype=e,a.setState(a.state)},a.onFbackflushtimeChange=function(e){a.state.component.fbackflushtime=e,a.setState(a.state)},a.onBcustommaterialChange=function(e){a.state.component.bcustommaterial=e,a.setState(a.state)},a.onBprojectmaterialChange=function(e){a.state.component.bprojectmaterial=e,a.setState(a.state)},a.render=function(){var e=o({},a.state.modal);return r.default.createElement(l,o({},e,{style:{width:"30%"}}),r.default.createElement(l.Header,{closeButton:!1},"批量修改"),r.default.createElement(l.Body,null,r.default.createElement("div",{style:{width:"35%"}},r.default.createElement(u,{defaultValue:"1",onChange:a.onBatchEditTypeChange.bind(a),style:{width:"60%",paddingLeft:"15px"},value:a.state.component.editType},r.default.createElement(u.NCOption,{value:"1"},"产品"),r.default.createElement(u.NCOption,{value:"2"},"材料"))),"1"===a.state.component.editType?r.default.createElement("div",{className:"transfer_tree_container",style:{height:"100px"}},r.default.createElement("div",{className:"left-area",style:{padding:"15px",width:"calc(50% - 30px)"}},r.default.createElement(u,{placeholder:"齐套",onChange:a.onBkititemChange.bind(a),value:a.state.component.bkititem},r.default.createElement(u.NCOption,{value:"1"},"是"),r.default.createElement(u.NCOption,{value:"2"},"否"))),r.default.createElement("div",{className:"right-area",style:{padding:"15px",width:"calc(50% - 30px)"}},r.default.createElement("input",{type:"text",id:"hnassparentnum",value:a.state.component.hnassparentnum,onChange:a.onHnassparentnumChange.bind(a),placeholder:"父项数量",style:{height:"30px",width:"100%",border:"1px solid #d5d6d9",textAlign:"right",paddingRight:"2px"}}))):r.default.createElement("div",{className:"transfer_tree_container",style:{height:"350px"}},r.default.createElement("div",{className:"left-area",style:{padding:"15px",width:"calc(50% - 30px)"}},r.default.createElement("div",{style:{marginBottom:"5px"}},r.default.createElement(u,{placeholder:"备料来源",onChange:a.onFitemsourceChange.bind(a),value:a.state.component.fitemsource},r.default.createElement(u.NCOption,{value:"1"},"备料"),r.default.createElement(u.NCOption,{value:"2"},"领料"),r.default.createElement(u.NCOption,{value:"3"},"传输"))),r.default.createElement("div",{style:{marginBottom:"5px"}},r.default.createElement("input",{type:"text",value:a.state.component.ibasenum,onChange:a.onIbasenumChange.bind(a),placeholder:"底数",style:{height:"30px",width:"100%",border:"1px solid #d5d6d9",textAlign:"right",paddingRight:"2px"}})),r.default.createElement("div",{style:{marginBottom:"5px"}},r.default.createElement(u,{placeholder:"发料",onChange:a.onBdeliverChange.bind(a),value:a.state.component.bdeliver},r.default.createElement(u.NCOption,{value:"1"},"是"),r.default.createElement(u.NCOption,{value:"2"},"否"))),r.default.createElement("div",{style:{marginBottom:"5px"}},r.default.createElement(u,{placeholder:"控制标志",onChange:a.onFcontrolChange.bind(a),value:a.state.component.fcontrol},r.default.createElement(u.NCOption,{value:"1"},"控制"),r.default.createElement(u.NCOption,{value:"2"},"不控制"))),r.default.createElement("div",{style:{marginBottom:"5px"}},r.default.createElement(u,{placeholder:"完工齐套检查",onChange:a.onBbchkitemforwrChange.bind(a),value:a.state.component.bbchkitemforwr},r.default.createElement(u.NCOption,{value:"1"},"是"),r.default.createElement(u.NCOption,{value:"2"},"否"))),r.default.createElement("div",{style:{marginBottom:"5px"}},r.default.createElement(u,{placeholder:"替代类型",onChange:a.onFreplacetypeChange.bind(a),value:a.state.component.freplacetype},r.default.createElement(u.NCOption,{value:"1"},"全部替代"),r.default.createElement(u.NCOption,{value:"2"},"部分替代"),r.default.createElement(u.NCOption,{value:"3"},"清空替代类型"))),r.default.createElement("div",{style:{marginBottom:"5px"}},r.default.createElement(u,{placeholder:"倒冲方式",onChange:a.onFbackflushtypeChange.bind(a),value:a.state.component.fbackflushtype},r.default.createElement(u.NCOption,{value:"1"},"不倒冲"),r.default.createElement(u.NCOption,{value:"2"},"自动倒冲"),r.default.createElement(u.NCOption,{value:"3"},"交互式倒冲"))),r.default.createElement("div",{style:{marginBottom:"5px"}},r.default.createElement(u,{placeholder:"客户专用料",onChange:a.onBcustommaterialChange.bind(a),value:a.state.component.bcustommaterial},r.default.createElement(u.NCOption,{value:"1"},"是"),r.default.createElement(u.NCOption,{value:"2"},"否")))),r.default.createElement("div",{className:"right-area",style:{padding:"15px",width:"calc(50% - 30px)"}},r.default.createElement("div",{style:{marginBottom:"5px"}},r.default.createElement(u,{placeholder:"子项类型",onChange:a.onFitemtypeChange.bind(a),value:a.state.component.fitemtype},r.default.createElement(u.NCOption,{value:"1"},"普通"),r.default.createElement(u.NCOption,{value:"2"},"工具"),r.default.createElement(u.NCOption,{value:"3"},"技术资料"),r.default.createElement(u.NCOption,{value:"4"},"客户手册"))),r.default.createElement("div",{style:{marginBottom:"5px"}},r.default.createElement(u,{placeholder:"齐料",onChange:a.onBkitmaterialChange.bind(a),value:a.state.component.bkitmaterial},r.default.createElement(u.NCOption,{value:"1"},"是"),r.default.createElement(u.NCOption,{value:"2"},"否"))),r.default.createElement("div",{style:{marginBottom:"5px"}},r.default.createElement(u,{placeholder:"供应方式",onChange:a.onFsupplymodeChange.bind(a),value:a.state.component.fsupplymode},r.default.createElement(u.NCOption,{value:"1"},"一般发料"),r.default.createElement(u.NCOption,{value:"2"},"定量发料"))),r.default.createElement("div",{style:{marginBottom:"5px"}},r.default.createElement(u,{placeholder:"不允许混批",onChange:a.onBbunibatchChange.bind(a),value:a.state.component.bbunibatch},r.default.createElement(u.NCOption,{value:"1"},"是"),r.default.createElement(u.NCOption,{value:"2"},"否"))),r.default.createElement("div",{style:{marginBottom:"5px"}},r.default.createElement(u,{placeholder:"可替代",onChange:a.onBcanreplaceChange.bind(a),value:a.state.component.bcanreplace},r.default.createElement(u.NCOption,{value:"1"},"是"),r.default.createElement(u.NCOption,{value:"2"},"否"))),r.default.createElement("div",{style:{marginBottom:"5px"}},r.default.createElement("input",{type:"text",value:a.state.component.vmatingno,onChange:a.onVmatingnoChange.bind(a),placeholder:"配套组号",style:{height:"30px",width:"100%",border:"1px solid #d5d6d9",textAlign:"right",paddingRight:"2px"}})),r.default.createElement("div",{style:{marginBottom:"5px"}},r.default.createElement(u,{placeholder:"倒冲时机",onChange:a.onFbackflushtimeChange.bind(a),value:a.state.component.fbackflushtime},r.default.createElement(u.NCOption,{value:"1"},"产品完工"),r.default.createElement(u.NCOption,{value:"2"},"工序完工"),r.default.createElement(u.NCOption,{value:"3"},"清空倒冲时机"))),r.default.createElement("div",{style:{marginBottom:"5px"}},r.default.createElement(u,{placeholder:"项目专用料",onChange:a.onBprojectmaterialChange.bind(a),value:a.state.component.bprojectmaterial},r.default.createElement(u.NCOption,{value:"1"},"是"),r.default.createElement(u.NCOption,{value:"2"},"否")))))),r.default.createElement(l.Footer,null,r.default.createElement("span",null,r.default.createElement(c,{onClick:a.onsubmit.bind(a)},"确定")),r.default.createElement("span",null,r.default.createElement(c,{onClick:a.cancel.bind(a)},"取消"))))},a.state={modal:{show:!1,modalDropup:!0,size:"xlg"},component:o({editType:"1"},{}),selectedrecords:[]},a.onfinish=null,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(s.Component);t.default=p}])}));
//# sourceMappingURL=index.44d434ba.js.map