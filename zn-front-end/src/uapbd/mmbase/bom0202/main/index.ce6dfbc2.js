/*! @ncctag {"project":"","branch":"","provider":"","date":"2020-5-11 14:50:39"} */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nc-lightapp-front"),require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["nc-lightapp-front","react","react-dom"],t):"object"==typeof exports?exports["uapbd/mmbase/bom0202/main/index"]=t(require("nc-lightapp-front"),require("react"),require("react-dom")):e["uapbd/mmbase/bom0202/main/index"]=t(e["nc-lightapp-front"],e.React,e.ReactDOM)}(window,(function(e,t,a){return function(e){var t={};function a(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,a),s.l=!0,s.exports}return a.m=e,a.c=t,a.d=function(e,t,o){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(o,s,function(t){return e[t]}.bind(null,s));return o},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="../../../../",a(a.s=190)}({1:function(t,a){t.exports=e},137:function(e,t,a){var o=a(140);"string"==typeof o&&(o=[[e.i,o,""]]);var s={transform:void 0};a(6)(o,s);o.locals&&(e.exports=o.locals)},138:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=JSON.stringify(e);return JSON.parse(t)}},139:function(e,t,a){var o;!function(){"use strict";var a={}.hasOwnProperty;function s(){for(var e=[],t=0;t<arguments.length;t++){var o=arguments[t];if(o){var r=typeof o;if("string"===r||"number"===r)e.push(o);else if(Array.isArray(o)&&o.length){var n=s.apply(null,o);n&&e.push(n)}else if("object"===r)for(var l in o)a.call(o,l)&&o[l]&&e.push(l)}}return e.join(" ")}e.exports?(s.default=s,e.exports=s):void 0===(o=function(){return s}.apply(t,[]))||(e.exports=o)}()},140:function(e,t,a){(e.exports=a(5)(!1)).push([e.i,'* {\n  padding: 0;\n  margin: 0;\n}\n/*定位容器*/\n.uapbd_style_center_container {\n  position: relative;\n  /*容器 子元素 未定义距离*/\n  /*容器 子元素 距离右边 20px*/\n  /*容器 use 子元素 距离右边 20px*/\n}\n.uapbd_style_center_container .uapbd_style_center_undefined {\n  position: absolute;\n}\n.uapbd_style_center_container .uapbd_style_center_right20 {\n  position: absolute;\n  top: 0;\n  right: 20px;\n  bottom: 0;\n}\n.uapbd_style_center_container .uapbd_style_center_left20 {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 20px;\n}\n/*出现 滚动条的容器*/\n.uapbd_style_scroll_container {\n  overflow: auto;\n}\n/*定义滚动条轨道*/\n.uapbd_style_scroll_container::-webkit-scrollbar-track {\n  border-radius: 8px;\n  background-color: white;\n}\n/*定义滚动条高宽及背景 高宽分别对应横竖滚动条的尺寸*/\n.uapbd_style_scroll_container::-webkit-scrollbar {\n  width: 8px;\n}\n/*定义滑块 内阴影+圆角*/\n.uapbd_style_scroll_container::-webkit-scrollbar-thumb {\n  border-radius: 8px;\n  width: 8px;\n  background-color: #d8d8d8;\n}\n.transfer_tree_container {\n  clear: both;\n  height: 90%;\n  width: 100%;\n  margin-top: 10px;\n}\n.transfer_tree_container .left-area {\n  height: 100%;\n  display: inline-block;\n  vertical-align: top;\n  width: calc(50% - 91px);\n  overflow: auto;\n}\n.transfer_tree_container .button-area {\n  height: 100%;\n  width: 50px;\n  display: inline-block;\n  vertical-align: middle;\n  padding-top: 30px;\n  text-align: center;\n}\n.transfer_tree_container .button-area .opr-botton {\n  padding-top: 25px;\n  display: block;\n  margin: 0 auto;\n}\n.transfer_tree_container .right-area {\n  height: 100%;\n  display: inline-block;\n  vertical-align: top;\n  width: calc(50% - 91px);\n  overflow: auto;\n}\n.transfer_tree_container .transferSwitcherClassSelfNameHidden i {\n  visibility: hidden;\n}\n.transfer_tree_container .left-area-tree .u-tree,\n.transfer_tree_container .right-area-tree .u-tree {\n  height: 360px;\n  overflow: auto;\n}\n.transfer_tree_container .left-area-nei,\n.transfer_tree_container .right-area-nei {\n  height: 100%;\n  border-radius: 3px;\n  border: 1px solid #d0d0d0;\n  background: transparent;\n}\n.transfer_tree_container .opr-botton-trans button {\n  min-width: auto;\n  width: 32px;\n  height: 32px;\n  padding: 0;\n}\n/*\n * 这个是左树的 控制搜索框 宽度的。\n */\n.NC_syncTreeSearch_self_width {\n  width: 240px!important;\n}\n.NC_syncTreeSearch_self_width .u-form-control-wrapper {\n  width: 240px!important;\n}\n/*\n * 这个是左树中加虚线样式。\n */\n.syncTreeComLineStyle .synctree-area .u-tree > li:only-child > ul:before {\n  border-left: none;\n}\n.syncTreeComLineStyle .synctree-area .u-tree > li > ul:last-child::before {\n  border-left: none;\n}\n.syncTreeComLineStyle .synctree-area .u-tree-child-tree-open > li::after {\n  position: absolute;\n  left: 8px;\n  top: -15px;\n  content: "";\n  display: inline-block;\n  width: 1px;\n  height: 28px;\n  border-left: 1px dashed #d0d0d0;\n}\n.syncTreeComLineStyle .synctree-area .node-item .u-tree-switcher {\n  position: relative;\n  z-index: 2;\n}\n.syncTreeComLineStyle .synctree-area li::after {\n  border: none;\n}\n.syncTreeComLineStyle .synctree-area li {\n  position: relative;\n}\n.syncTreeComLineStyle .synctree-area li .u-tree-switcher {\n  position: relative;\n}\n.syncTreeComLineStyle .synctree-area li .u-tree-switcher::before {\n  position: absolute;\n  left: 11px;\n  top: 8px;\n  content: "";\n  display: inline-block;\n  width: 10px;\n  border-top: 1px dashed #d0d0d0;\n}\n.syncTreeComLineStyle .synctree-area li .isLeaf_hiden_point_line > i::before {\n  visibility: hidden;\n}\n/*\n * 穿梭树 线样式修改\n */\n.syncTreeComTransferLineStyle .synctree-area .u-tree > li:only-child > ul:before {\n  border-left: none;\n}\n.syncTreeComTransferLineStyle .synctree-area .u-tree > li > ul:last-child::before {\n  border-left: none;\n}\n.syncTreeComTransferLineStyle .synctree-area .u-tree-child-tree-open > li::after {\n  position: absolute;\n  left: 8px;\n  top: -15px;\n  content: "";\n  display: inline-block;\n  width: 1px;\n  height: 28px;\n  border-left: 1px dashed #d0d0d0;\n}\n.syncTreeComTransferLineStyle .synctree-area .node-item .u-tree-switcher {\n  position: relative;\n  z-index: 2;\n}\n.syncTreeComTransferLineStyle .synctree-area li::after {\n  border: none;\n}\n.syncTreeComTransferLineStyle .synctree-area li {\n  position: relative;\n}\n.syncTreeComTransferLineStyle .synctree-area li .isLeaf_show_point_line::before {\n  position: absolute;\n  left: 11px;\n  top: 8px;\n  content: "";\n  display: inline-block;\n  width: 10px;\n  border-top: 1px dashed #d0d0d0;\n}\n.syncTreeComTransferLineStyle .synctree-area li .isLeaf_hiden_point_line::before {\n  position: absolute;\n  left: 11px;\n  top: 8px;\n  content: "";\n  display: inline-block;\n  width: 10px;\n  border-top: 1px dashed #d0d0d0;\n}\n.syncTreeComTransferLineStyle .synctree-area li .isLeaf_hiden_point_line > i::before {\n  visibility: hidden;\n}\n.node-item-edit-point-style-self {\n  background-color: #ebedf2;\n}\n.node-item-edit-point-style-self > a span {\n  color: #e14c46!important;\n}\n.table-slef-set-long span {\n  margin-right: 0px!important;\n}\n',""])},141:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLangByResId=t.initLang=void 0;var o=a(1);t.initLang=function(e,t,a,s){e.lang=null,e.inlt=null,(0,o.getMultiLang)({moduleId:t,domainName:a,callback:function(t,a,o){a&&(e.lang=t,e.inlt=o),s&&s()},needInlt:!0})},t.getLangByResId=function(e,t,a){return function(e,t){if(!e)throw(0,o.toast)({color:"danger",content:"请检查代码中this是否能够取到！当前为undifined,位置："+t}),new Error("请检查代码中this是否能够取到！当前为undifined,位置："+t)}(e,t),a?e.inlt?e.inlt.get(t,a)||t:"":e.lang?e.lang[t]||t:""}},157:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),r=a(2),n=d(r),l=a(1),i=d(a(160));function d(e){return e&&e.__esModule?e:{default:e}}l.base.NCTable,l.base.NCSelect;var c=l.base.NCButton,u=(l.base.NCCol,l.base.NCRow,l.base.NCModal),p=(l.base.NCCollapse,function(){}),b=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.show=function(e,t){a.state.modal.show=!0,a.state.materialIDs=e,a.state.isCancelAssign=!!t,a.setState(a.state)},a.onsubmit=function(){var e=a.orgSelect.getData();!e||e.length<1?(0,l.toast)({content:a.props.MultiInit.getLangData("10140BOMM").intl&&a.props.MultiInit.getLangData("10140BOMM").intl.get("110140BOMM3011"),color:"warning"}):(0,l.ajax)({url:"/nccloud/mmbd/bom0202/bomassign.do",data:{ids:a.state.materialIDs,targetIds:e,type:a.state.isCancelAssign?"cancelAssign":"assign"},success:function(e){var t=e.success;e.data;t&&((0,l.toast)({content:a.state.isCancelAssign?a.props.MultiInit.getLangData("10140BOMM").intl&&a.props.MultiInit.getLangData("10140BOMM").intl.get("110140BOMM3016"):a.props.MultiInit.getLangData("10140BOMM").intl&&a.props.MultiInit.getLangData("10140BOMM").intl.get("110140BOMM3013"),color:"success"}),a.state.modal.show=!1,a.setState(a.state,a.onFinish()),e.data&&e.data.bodys&&a.props.cardTable.setTableData("bomcard_useorg",e.data.bodys.bomcard_useorg))}})},a.cancel=function(){a.state.modal.show=!1,a.setState(a.state)},a.state={modal:{show:!1,modalDropup:!0,size:"xlg"},orgValues:[],materialIDs:[],isCancelAssign:!1},a.onFinish=a.props.onFinish||p,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"render",value:function(){var e=this,t=o({},this.state.modal);return n.default.createElement(u,t,n.default.createElement(u.Header,{closeButton:!1},n.default.createElement(u.Title,null,this.state.isCancelAssign?this.props.MultiInit.getLangData("10140BOMM").intl&&this.props.MultiInit.getLangData("10140BOMM").intl.get("110140BOMM3024"):this.props.MultiInit.getLangData("10140BOMM").intl&&this.props.MultiInit.getLangData("10140BOMM").intl.get("110140BOMM3014"))),n.default.createElement(u.Body,null,n.default.createElement("div",null,n.default.createElement(i.default,o({ref:function(t){return e.orgSelect=t}},this.props)))),n.default.createElement(u.Footer,null,n.default.createElement("span",null,n.default.createElement(c,{onClick:this.onsubmit.bind(this)},this.state.isCancelAssign?this.props.MultiInit.getLangData("10140BOMM").intl&&this.props.MultiInit.getLangData("10140BOMM").intl.get("110140BOMM3018"):this.props.MultiInit.getLangData("10140BOMM").intl&&this.props.MultiInit.getLangData("10140BOMM").intl.get("110140BOMM3015"))),n.default.createElement(c,{onClick:this.cancel.bind(this)},this.props.MultiInit.getLangData("10140BOMM").intl&&this.props.MultiInit.getLangData("10140BOMM").intl.get("110140BOMM3017"))))}}]),t}(r.Component);t.default=b},158:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RownoUtils=void 0;var o=a(1),s=0,r=8,n="crowno";function l(e,t,a,n,l){var i=n-l.length-1,d=(e.cardTable.getValByKeyAndIndex(t,i,a)||{}).value;d=d||s;var u=(e.cardTable.getValByKeyAndIndex(t,n,a)||{}).value,p=l.length,b=[];l.forEach((function(e){b.push(e)}));for(var m=r;;){var A={};A[d]=!0,A[u]=!0;for(var f=0;f<p;f++){var h=b[f];if(new Number(d)-new Number(h)>=0||new Number(u)-new Number(h)<=0)break;A[h]=!0}if(Object.getOwnPropertyNames(A).length!==p+2)break;for(var R=0;R<p;R++)l[R]=b[R];if(m<=0)break;--m;for(var v=0;v<p;v++){var g=c((0,o.formatAcuracy)(b[v],m));b[v]="0.00000000"==g?"0.00000001":g}}return l}function i(e,t,a,o){for(var r=e.cardTable.getNumberOfRows(t),n=function(e,t,a,o){if(1===o)return s;for(var r=s,n=null,l=0;l<o;l++)(n=e.cardTable.getValByKeyAndIndex(t,l,a).value)&&Number(r)<Number(n)&&(r=Number(n));return r}(e,t,a,r),l=new Array(o.length),i=0;i<o.length;i++)l[i]=10*(i+1)+Number(n);return l}function d(e,t,a,n,l){var i=function(e,t,a,o){if(1==e.cardTable.getNumberOfRows(t))return s;for(var r=o-1;r>=0;r--){var n=(e.cardTable.getValByKeyAndIndex(t,r,a)||{}).value;if(""!=n&&null!=n)return n}return s}(e,t,a,n),d=e.cardTable.getValByKeyAndIndex(t,n,a).value,u=new Array(l.length);if(i===d)for(var p=0;p<l.length;p++)u[p]=i;else if(null==d||""==d)for(var b=0;b<l.length;b++)u[b]=10*(b+1)+Number(i);else for(var m=(d-i)/(l.length+1),A=i,f=0;f<l.length;f++){A=Number(A)+Number(m);var h=c((0,o.formatAcuracy)(A,r));u[f]="0.00000000"==h?"0.00000001":h}return u}function c(e){return e?e.toString().replace(/\,/gi,""):e}var u={setRowNo:function(e,t,a){null==a&&(a=n);for(var o=e.cardTable.getNumberOfRows(t),s=!0;o>0&&s;){for(var r=[],c=-1,u=0;u<o;u++){if(u==o-1&&(s=!1),(e.cardTable.getValByKeyAndIndex(t,u,a)||{}).value){if(0==r.length)continue;c=u;break}r.push(u),c=-1}var p=null;p=-1!=c?l(e,t,a,c,p=d(e,t,a,c,r)):i(e,t,a,r);for(var b=0;b<r.length;b++){var m=r[b];e.cardTable.setValByKeyAndIndex(t,m,a,{value:p[b].toString(),display:p[b].toString()})}}},resetRowNo:function(e,t,a){null==a&&(a=n);for(var o=e.cardTable.getNumberOfRows(t),s=0;s<o;s++){var r=10*s+10;e.cardTable.setValByKeyAndIndex(t,s,a,{value:r.toString(),display:r.toString()})}}};t.RownoUtils=u},159:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rowCopyPasteUtils=void 0;var o=a(1),s=!0,r=!1;function n(e,t,a,r,n,d){!function(e,t,a,s,r){var n=(0,o.deepClone)(a);if(n)if(n instanceof Array)for(var i=n.length,d=0;d<i;d++){var c=n[d].data;l(c,r),e.cardTable.insertRowsAfterIndex(t,c,s+d)}else l(n,r),e.cardTable.insertRowsAfterIndex(t,n,s)}(e,t,this.state.copyRowDatas,a-1,d),this.setState({copyRowDatas:null}),i(e,r,n,s),e.cardTable.selectAllRows(t,!1),e.cardTable.setAllCheckboxAble(t,!0)}function l(e,t){t&&t instanceof Array&&(e instanceof Array?e.forEach((function(e){t.forEach((function(t){e.values[t]={value:null,display:null,scale:-1}}))})):t.forEach((function(t){e.values[t]={value:null,display:null,scale:-1}})))}function i(e,t,a,o){t&&e.button.setButtonVisible(t,o),a&&e.button.setButtonVisible(a,!o)}var d={copyRow:function(e,t,a,o,s){return this.setState({copyRowDatas:a}),i(e,o,s,r),e.cardTable.setAllCheckboxAble(t,!1),a},copyRows:function(e,t,a,o){var s=e.cardTable.getCheckedRows(t);if(s&&s.length>0)return this.setState({copyRowDatas:s}),i(e,a,o,r),e.cardTable.setAllCheckboxAble(t,!1),s},pasteRowsToIndex:n,pasteRowsToTail:function(e,t,a,o,s){var r=e.cardTable.getNumberOfRows(t);n.call(this,e,t,r,a,o,s)},cancel:function(e,t,a,o){this.setState({copyRowDatas:null}),i(e,a,o,s),e.cardTable.selectAllRows(t,!1),e.cardTable.setAllCheckboxAble(t,!0)}};t.rowCopyPasteUtils=d},160:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),r=a(2),n=d(r),l=a(1),i=d(a(139));function d(e){return e&&e.__esModule?e:{default:e}}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a(137),a(161);var u=l.base.NCTable,p=(l.base.NCSelect,l.base.NCTabs,l.base.NCButton),b=l.base.NCCheckbox,m=(l.base.NCCol,l.base.NCRow,l.base.NCModal,l.base.NCCollapse,l.base.NCTree),A=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.getChildList=function(e,t){for(var o=a,s=function(a){var s=e[a];if(t?o.state.selectData.datas.push({id:s.id||s.props&&s.props.id||"root",name:s.name||s.props&&s.props.name||"root",code:s.nodeData?s.nodeData.code:s.props?s.props.nodeData.code:"root",orgclazz:s.nodeData?s.nodeData.orgclazz:s.props?s.props.nodeData.orgclazz:"orgtype"}):s.id?o.state.selectData.datas=o.state.selectData.datas.filter((function(e){return e.id!=s.id})):s.props?o.state.selectData.datas=o.state.selectData.datas.filter((function(e){return e.id!=s.props.id})):s.cheked=t,!(s.children instanceof Array&&s.children.length>0||s.props&&s.props.children instanceof Array&&s.props&&s.props.children.length>0))return"continue";o.getChildList(s.children||s.props&&s.props.children,t)},r=0;r<e.length;r++)s(r);o.setState(o.state)},a.state={isChild:!1,tree:{main:a,expandedKeys:["root"],defNodeCfg:{},root:{root:!0,key:"root",title:a.props.MultiInit.getLangData("10140BOMM").intl&&a.props.MultiInit.getLangData("10140BOMM").intl.get("110140BOMM3023"),id:"root",name:a.props.MultiInit.getLangData("10140BOMM").intl&&a.props.MultiInit.getLangData("10140BOMM").intl.get("110140BOMM3023"),nodeData:{code:"root",orgclazz:"root"}},datas:[],renderNode:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments[2];var t=this.main.state.tree.defNodeCfg||{},a=function(e,t,a){return e.title=a?[n.default.createElement("i",{className:"tree-dian"}),n.default.createElement("span",{className:"title-middle"},e.nodeData.code," ",e.title)]:[n.default.createElement("i",{className:t}),n.default.createElement("span",{className:"title-middle"},e.nodeData.code,"  ",e.title)],e},s=function s(r){return r.map((function(r){var l=o({},t,r),d=r.children||[],u=!d.length,p=e.includes(r.refpk)?"icon iconfont  icon-wenjianjiadakai tree-wenjian":"icon iconfont  icon-wenjianjia tree-wenjian";return n.default.createElement(m.NCTreeNode,o(c({className:"node-item",key:r.key},"className",(0,i.default)("node-item",{isexpend:e.includes(r.keys)})),a?a(l,p,u):l,{isLeaf:u}),u?"":s(d))}))};return s([o({},this.root,{children:this.datas})])},config:function(){var e=this;return{checkable:!0,defaultExpandAll:!0,checkStrictly:!0,onExpand:function(t){e.expandedKeys=t,e.main.setState(e.main.state)},onCheck:function(e,t){var a=this,o=t.node.props,s=t.checked,r=this.main.state.selectData.datas,n={id:o.id||"root",name:o.name||"root",code:o.nodeData?o.nodeData.code:"root",orgclazz:o.nodeData?o.nodeData.orgclazz:"orgtype"};"orgtype"===n.orgclazz||"root"===n.id?"root"!==n.id?this.main.state.tree.datas.map((function(e){e.id===o.id&&a.main.getChildList([e],s)})):this.main.getChildList(s?[o]:r,s):this.main.state.isChild?this.main.getChildList([o],s):(r=s?r.concat(n):r.filter((function(e){return e.id!=n.id})),this.main.state.selectData.datas=r,this.main.setState(this.main.state))}.bind(this)}}},table:{main:a,rowKey:"id",bodyStyle:{height:"330px"},columns:[{title:a.props.MultiInit.getLangData("10140BOMM").intl&&a.props.MultiInit.getLangData("10140BOMM").intl.get("110140BOMM3019"),dataIndex:"code",width:"40%"},{title:a.props.MultiInit.getLangData("10140BOMM").intl&&a.props.MultiInit.getLangData("10140BOMM").intl.get("110140BOMM3020"),dataIndex:"name",width:"40%"},{title:a.props.MultiInit.getLangData("10140BOMM").intl&&a.props.MultiInit.getLangData("10140BOMM").intl.get("110140BOMM3002"),dataIndex:"doit",width:"20%",render:function(e,t,a){return n.default.createElement(p,{onClick:function(){var e=this.state.selectData.datas;this.state.selectData.datas=e.filter((function(e){return e.id!=t.id})),this.setState(this.state)}.bind(this)},this.props.MultiInit.getLangData("10140BOMM").intl&&this.props.MultiInit.getLangData("10140BOMM").intl.get("110140BOMM3004"))}.bind(a)}]},selectData:{datas:[]}},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"componentDidMount",value:function(){this.reset()}},{key:"reset",value:function(){var e=this;(0,l.ajax)({url:"/nccloud/mmbd/bompub/assignorgtree.do",data:{orgtypeIDs:["BUSINESSUNIT00000000"],isCludeGlobalAndGroupVO:!1},success:function(t){var a=t.data;e.state.selectData.datas=[],e.state.tree.datas=a,e.setState(e.state)}})}},{key:"getData",value:function(){return this.state.selectData.datas.filter((function(e){return"root"!==e.orgclazz&&"orgtype"!==e.orgclazz})).map((function(e){return e.id}))}},{key:"render",value:function(){var e=this,t=this.state.tree,a=this.state.table,s=this.state.selectData.datas,r=s.map((function(e){return e.id})),l=s.filter((function(e){return"root"!==e.orgclazz&&"orgtype"!==e.orgclazz}));return n.default.createElement("div",{className:"transfer_tree_container",style:{marginTop:10}},n.default.createElement("div",{className:"left-area",style:{height:"400px",padding:"10px",background:"rgb(249,249,249)",width:"calc(50% - 25px)"}},n.default.createElement("div",{className:"left-area-nei"},n.default.createElement("div",{field:"tree-area",className:"syncTreeCom syncTreeComTransferLineStyle",style:{marginLeft:20,height:"calc(100% - 40px)"}},n.default.createElement("div",{className:"synctree-area",fieldname:"树控件"},n.default.createElement(m,o({},t.config(),{checkedKeys:r},{openIcon:n.default.createElement("i",{field:"tree-switcher",className:"icon iconfont icon-shu_zk tree-swich"}),closeIcon:n.default.createElement("i",{field:"tree-switcher",className:"icon iconfont icon-shushouqi tree-swich"})}),t.renderNode(this.state.tree.expandedKeys)))),n.default.createElement("div",{style:{marginTop:10}},n.default.createElement(b,{checked:this.state.isChild,onChange:function(t){e.state.isChild=t,e.setState(e.state)}},this.props.MultiInit.getLangData("10140BOMM").intl&&this.props.MultiInit.getLangData("10140BOMM").intl.get("110140BOMM3021"))))),n.default.createElement("div",{className:"right-area",style:{marginLeft:30,height:"400px",padding:"10px",background:"rgb(249,249,249)",width:"calc(50% - 25px)"}},n.default.createElement(u,o({},a,{data:l},{scroll:{y:360}}))))}}]),t}(r.Component);t.default=A},161:function(e,t,a){var o=a(162);"string"==typeof o&&(o=[[e.i,o,""]]);var s={transform:void 0};a(6)(o,s);o.locals&&(e.exports=o.locals)},162:function(e,t,a){(e.exports=a(5)(!1)).push([e.i,".assign-orgselect-tree-div {\n  height: 400px;\n  overflow: scroll;\n}\n.assign-orgselect-tree-div .u-tree-checkbox-checked .u-tree-checkbox-inner {\n  background: #4E5E68;\n  border-color: #A8A8A8;\n}\n.assign-orgselect-tree-div .u-tree-checkbox-indeterminate .u-tree-checkbox-inner {\n  background: #4E5E68;\n  border-color: #A8A8A8;\n}\n",""])},163:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateCacheDataForList=function(e,t,a,o,s){var r=o.sucessVOs;if(null!=r&&0!=r.length){var n=[];if(null==s){var l={};e.table.getCheckedRows(t).forEach((function(e){var t=e.data.values[a].value;l[t]=e.index})),r[t].rows.forEach((function(e,t){var o=e.values[a].value,s={index:l[o],data:{values:e.values}};n.push(s)}))}else{var i={index:s,data:{values:r[t].rows[0].values}};n.push(i)}e.table.updateDataByIndexs(t,n)}}},164:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,s,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},n=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),l=a(2),i=a(1),d=a(8),c=(a(165),a(158)),u=a(159);a(166);var p=i.base.NCModal,b=i.base.NCButton,m=(o=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.call(a),a.state={rows:[],show:!1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"componentDidMount",value:function(){var e=this;this.props.MultiInit.getMultiLang({moduleId:"10140BOMM",domainName:"uapbd",callback:function(t){e.setState({json:t},(function(){e.initTemplate(e.props)}))}});this.props.MultiInit.getMultiLang({moduleId:"10140MMPUBMSG",domainName:"uapbd",callback:function(t,a,o){a&&e.setState({pubjson:r({},t)})}}),this.props.button.setButtonVisible(["WipsAddLine","WipsDelLine","WipsCopyLine","WipsResetRow","WipsDelLine","WipsCopyLine","WipsResetRow"],!1),this.props.button.setButtonVisible(["ReplsAddLine","ReplsDelLine","ReplsCopyLine","ReplsResetRow","ReplsDelLine","ReplsCopyLine"],!1)}},{key:"componentDidUpdate",value:function(){var e=this;this.props.show&&!this.props.cardTable.getClickRowIndex(d.AREA.bomcarditem)&&(console.log(this.props.cardTable.getClickRowIndex(d.AREA.bomcarditem)),this.props.button.setButtonVisible(["WipsAddLine","WipsDelLine","WipsCopyLine","WipsResetRow","WipsDelLine","WipsCopyLine","WipsResetRow"],!1),this.props.button.setButtonVisible(["ReplsAddLine","ReplsDelLine","ReplsCopyLine","ReplsResetRow","ReplsDelLine","ReplsCopyLine"],!1),this.props.button.setButtonVisible(["LossAddLine","LossDelLine","LossCopyLine","LossResetRow","LossDelLine","LossCopyLine","LossResetRow"],!1),this.props.button.setButtonVisible(["PosAddLine","PosDelLine","PosCopyLine","PosResetRow","PosDelLine","PosCopyLine","PosResetRow"],!1),(0,i.ajax)({url:d.URL.lossscale,data:{pk_org:this.props.rows[0].values.pk_org.value},success:function(t){t.data&&(e.props.meta.getMeta()[d.AREA.bomcarditem].items.find((function(e){return"ndissipationum"==e.attrcode})).scale=t.data.lossscale,e.props.meta.getMeta()[d.AREA.bomloss].items.find((function(e){return"nldissipationnum"==e.attrcode})).scale=t.data.lossscale)}}))}},{key:"componentWillReceiveProps",value:function(e){e.rows!==this.props.cardTable.getAllRows(d.AREA.bomcarditem)&&this.props.cardTable.setTableData(d.AREA.bomcarditem,{rows:e.rows},null,!1),this.props.cardTable.setStatus(d.AREA.bomwips,e.grandStatus),this.props.cardTable.setStatus(d.AREA.bomrepls,e.grandStatus),this.props.cardTable.setStatus(d.AREA.bompos,e.grandStatus),this.props.cardTable.setStatus(d.AREA.bomloss,e.grandStatus)}},{key:"toggleStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"browse",t=["WipsAddLine","WipsInsertLine","WipsDelLine","WipsMore","WipsDelLineOpr","WipsCopyLine","WipsPasteLine","WipsPasteLineEnd","WipsPasteLineCancel","WipsResetRow"],a=["PosAddLine","PosInsertLine","PosDelLine","PosMore","PosDelLineOpr","PosCopyLine","PosPasteLine","PosPasteLineEnd","PosPasteLineCancel","PosResetRow"],o=["ReplsAddLine","ReplsInsertLine","ReplsDelLine","ReplsMore","ReplsDelLineOpr","ReplsCopyLine","ReplsPasteLine","ReplsPasteLineEnd","ReplsPasteLineCancel","ReplsResetRow"],s=["LossAddLine","LossInsertLine","LossDelLine","LossMore","LossDelLineOpr","LossCopyLine","LossPasteLine","LossPasteLineEnd","LossPasteLineCancel","LossResetRow"],r=["WipsAddLine","WipsInsertLine","WipsDelLine","WipsMore","WipsDelLineOpr","WipsCopyLine","WipsResetRow"],n=["PosAddLine","PosInsertLine","PosDelLine","PosMore","PosDelLineOpr","PosCopyLine","PosResetRow"],l=["ReplsAddLine","ReplsInsertLine","ReplsDelLine","ReplsMore","ReplsDelLineOpr","ReplsCopyLine","ReplsResetRow"],i=["LossAddLine","LossInsertLine","LossDelLine","LosMore","LossDelLineOpr","LossCopyLine","LossResetRow"];"browse"==e?(this.props.button.setButtonVisible(t,!1),this.props.button.setButtonVisible(a,!1),this.props.button.setButtonVisible(o,!1),this.props.button.setButtonVisible(s,!1)):(this.props.button.setButtonVisible(t,!1),this.props.button.setButtonVisible(a,!1),this.props.button.setButtonVisible(o,!1),this.props.button.setButtonVisible(s,!1),this.props.button.setButtonVisible(r,!0),this.props.button.setButtonVisible(n,!0),this.props.button.setButtonVisible(l,!0),this.props.button.setButtonVisible(i,!0)),this.props.cardTable.setStatus(d.AREA.bomloss,e),this.props.cardTable.setStatus(d.AREA.bomwips,e),this.props.cardTable.setStatus(d.AREA.bomrepls,e),this.props.cardTable.setStatus(d.AREA.bompos,e)}},{key:"onRowClick",value:function(e,t,a,o){var s=a.values.nassitemnum.scale;e.meta.getMeta()[d.AREA.bomwips].items.find((function(e){return"nnum"==e.attrcode})).scale=s,e.meta.getMeta()[d.AREA.bompos].items.find((function(e){return"nnum"==e.attrcode})).scale=s,a.bomwips?e.cardTable.setTableData(d.AREA.bomwips,a.bomwips):e.cardTable.setTableData(d.AREA.bomwips,{rows:[]}),a.bomrepls?e.cardTable.setTableData(d.AREA.bomrepls,a.bomrepls):e.cardTable.setTableData(d.AREA.bomrepls,{rows:[]}),a.bompos?e.cardTable.setTableData(d.AREA.bompos,a.bompos):e.cardTable.setTableData(d.AREA.bompos,{rows:[]}),a.bomloss?e.cardTable.setTableData(d.AREA.bomloss,a.bomloss):e.cardTable.setTableData(d.AREA.bomloss,{rows:[]}),this.toggleChildRow(e,t,a,o)}},{key:"render",value:function(){var e=this.props,t=e.cardTable,a=e.button,o=t.createCardTable;a.createButtonApp;return this.props.rows&&this.props.cardTable.setTableData(d.AREA.bomcarditem,this.props.rows),this.props.parent&&console.log({"render-parent":this.props.parent}),React.createElement(p,{id:"ChanNeng",size:"xlg",show:this.props.show,onHide:this.props.onHide,zIndex:211},React.createElement(p.Header,{closeButton:!0},React.createElement(p.Title,null,this.state.json?this.state.json["110140BOMM4004"]:"110140BOMM4004")),React.createElement(p.Body,null,React.createElement("div",null,React.createElement("div",{className:"nc-bill-table-area noMax"},o(d.AREA.bomcarditem,{showCheck:!1,onRowClick:this.onRowClick.bind(this),showMax:!1,hideSwitch:function(){return!1},showMore:!1})),React.createElement("div",{className:"nc-bill-table-area noMax"},o(d.AREA.bomwips,{tableHead:this.getWipsTableHead.bind(this),hideModelSave:!0,modelAddRow:this.wipsModalAddRow.bind(this),onBeforeEvent:this.onWipCardTableBeforeEvent.bind(this),onAfterEvent:this.onWipCardTableAfterEvent.bind(this),showMax:!1,showCheck:!0,showMore:!1,hideSwitch:function(){return!1},onSelected:this.doAfterSelectWips.bind(this),onSelectedAll:this.doAfterSelectWips.bind(this)})),React.createElement("div",{className:"nc-bill-table-area noMax"},o(d.AREA.bompos,{tableHead:this.getPosTableHead.bind(this),hideModelSave:!0,showMax:!1,modelAddRow:this.posModalAddRow.bind(this),onBeforeEvent:this.onPosCardTableBeforeEvent.bind(this),onAfterEvent:this.onPosCardTableAfterEvent.bind(this),showCheck:!0,showMore:!1,hideSwitch:function(){return!1},onSelected:this.doAfterSelectPos.bind(this),onSelectedAll:this.doAfterSelectPos.bind(this)})),React.createElement("div",{className:"nc-bill-table-area noMax"},o(d.AREA.bomrepls,{tableHead:this.getReplsTableHead.bind(this),hideModelSave:!0,modelAddRow:this.replsModalAddRow.bind(this),onBeforeEvent:this.onReplsCardTableBeforeEvent.bind(this),onAfterEvent:this.onReplsCardTableAfterEvent.bind(this),showCheck:!0,showMax:!1,showMore:!1,hideSwitch:function(){return!1},onSelected:this.doAfterSelectRepls.bind(this),onSelectedAll:this.doAfterSelectRepls.bind(this)})),React.createElement("div",{className:"nc-bill-table-area noMax"},o(d.AREA.bomloss,{tableHead:this.getLossTableHead.bind(this),hideModelSave:!0,modelAddRow:this.lossModalAddRow.bind(this),onBeforeEvent:this.onLossCardTableBeforeEvent.bind(this),onAfterEvent:this.onLossCardTableAfterEvent.bind(this),showCheck:!0,showMax:!1,showMore:!1,hideSwitch:function(){return!1},onSelected:this.doAfterSelectLoss.bind(this),onSelectedAll:this.doAfterSelectLoss.bind(this)})))),React.createElement(p.Footer,null,React.createElement(b,{shape:"border",colors:"primary",onClick:this.props.onConfirm},this.state.pubjson?this.state.pubjson["10140PUBMESSAGE-000029"]:"10140PUBMESSAGE-000029"),React.createElement(b,{shape:"border",colors:"primary",onClick:this.props.onHide},this.state.pubjson?this.state.pubjson["10140PUBMESSAGE-000007"]:"10140PUBMESSAGE-000007")))}}]),t}(l.Component),s=function(){var e=this;this.initTemplate=function(t){(0,i.ajax)({url:"/nccloud/platform/pub/mergerequest.do",data:[{rqUrl:"/platform/templet/querypage.do",rqJson:'{\n  "pagecode": "10140BOMM_grand",\n  "appcode": "10140BOMM"\n}',rqCode:"template"},{rqUrl:"/platform/appregister/queryallbtns.do",rqJson:'{\n  "pagecode": "10140BOMM_grand",\n  "appcode": "10140BOMM"\n}',rqCode:"button"},{rqUrl:"/platform/appregister/queryappcontext.do",rqJson:'{\n  "appcode": "10140BOMM"}',rqCode:"context"}],success:function(a){if(a&&a.data){var o=a.data;if(o.template){var s=o.template;e.modifierMeta(t,s),t.meta.setMeta(s)}if(o.button){var r=o.button;t.button.setButtons(r)}e.toggleStatus(e.props.grandStatus)}}})},this.modifierMeta=function(t,a){var o={itemtype:"customer",attrcode:"opr",label:e.state.pubjson?e.state.pubjson["10140PUBMESSAGE-000034"]:"10140PUBMESSAGE-000034",visible:!0,className:"table-opr",width:200,fixed:"right",render:function(a,o,s){return t.button.createOprationButton(["WipsMore","WipsDelLineOpr","WipsInsertLine","WipsPasteLine"],{area:"wips-opr",buttonLimit:3,onButtonClick:function(t,r){return e.lineButtonClick(t,r,a,o,s)}})}},s={itemtype:"customer",attrcode:"opr",label:e.state.pubjson?e.state.pubjson["10140PUBMESSAGE-000034"]:"10140PUBMESSAGE-000034",visible:!0,className:"table-opr",width:200,fixed:"right",render:function(a,o,s){return t.button.createOprationButton(["ReplsMore","ReplsDelLineOpr","ReplsInsertLine","ReplsPasteLine"],{area:"repls-opr",buttonLimit:3,onButtonClick:function(t,r){return e.lineButtonClick(t,r,a,o,s)}})}},r={itemtype:"customer",attrcode:"opr",label:e.state.pubjson?e.state.pubjson["10140PUBMESSAGE-000034"]:"10140PUBMESSAGE-000034",visible:!0,className:"table-opr",width:200,fixed:"right",render:function(a,o,s){return t.button.createOprationButton(["PosMore","PosDelLineOpr","PosInsertLine","PosPasteLine"],{area:"pos-opr",buttonLimit:3,onButtonClick:function(t,r){return e.lineButtonClick(t,r,a,o,s)}})}},n={itemtype:"customer",attrcode:"opr",label:e.state.pubjson?e.state.pubjson["10140PUBMESSAGE-000034"]:"10140PUBMESSAGE-000034",visible:!0,className:"table-opr",width:200,fixed:"right",render:function(a,o,s){return t.button.createOprationButton(["LossMore","LossDelLineOpr","LossInsertLine","LossPasteLine"],{area:"loss-opr",buttonLimit:3,onButtonClick:function(t,r){return e.lineButtonClick(t,r,a,o,s)}})}};a[d.AREA.bomwips].items.push(o),a[d.AREA.bomrepls].items.push(s),a[d.AREA.bompos].items.push(r),a[d.AREA.bomloss].items.push(n),(0,i.ajax)({url:d.URL.replscale,data:{pk_group:window.parent.GETBUSINESSINFO().groupId},async:!1,success:function(e){e.data&&(a[d.AREA.bomrepls].items.find((function(e){return"vreplaceindex"==e.attrcode})).scale=e.data.scale)}})},this.toggleChildRow=function(e,t,a,o){"edit"==e.grandStatus?(e.button.setButtonVisible(["WipsAddLine","WipsDelLine","WipsMore","WipsCopyLine","WipsResetRow"],!0),e.button.setButtonVisible(["WipsPasteLineEnd","WipsPasteLineCancel","WipsPasteLine"],!1),e.button.setButtonDisabled(["WipsAddLine"],!1),e.button.setButtonDisabled(["WipsDelLine","WipsCopyLine"],!0),e.wipsmaintain||(e.button.setButtonVisible(["ReplsAddLine","ReplsDelLine","ReplsMore","ReplsCopyLine","ReplsResetRow"],!0),e.button.setButtonVisible(["ReplsPasteLineEnd","ReplsPasteLineCancel","ReplsPasteLine"],!1),e.button.setButtonDisabled(["ReplsAddLine"],!1),e.button.setButtonDisabled(["ReplsDelLine","ReplsCopyLine"],!0),e.button.setButtonVisible(["PosAddLine","PosDelLine","PosMore","PosCopyLine","PosResetRow"],!0),e.button.setButtonVisible(["PosPasteLineEnd","PosPasteLineCancel","PosPasteLine"],!1),e.button.setButtonDisabled(["PosAddLine"],!1),e.button.setButtonDisabled(["PosDelLine","PosCopyLine"],!0),e.button.setButtonVisible(["LossAddLine","LossDelLine","LossMore","LossCopyLine","LossResetRow"],!0),e.button.setButtonVisible(["LossPasteLineEnd","LossPasteLineCancel","LossPasteLine"],!1),e.button.setButtonDisabled(["LossAddLine"],!1),e.button.setButtonDisabled(["LossDelLine","LossCopyLine"],!0)),e.cardTable.getNumberOfRows(d.AREA.bomwips)<=0?(e.button.setButtonVisible(["WipsDelLineOpr","WipsInsertLine"],!1),e.button.setButtonDisabled(["WipsResetRow"],!0)):(e.button.setButtonVisible(["WipsDelLineOpr","WipsInsertLine"],!0),e.cardTable.getNumberOfRows(d.AREA.bomwips)>=1?e.button.setButtonDisabled(["WipsResetRow"],!1):e.button.setButtonDisabled(["WipsResetRow"],!0)),e.wipsmaintain||(e.cardTable.getNumberOfRows(d.AREA.bomrepls)<=0?(e.button.setButtonVisible(["ReplsDelLineOpr","ReplsInsertLine"],!1),e.button.setButtonDisabled(["ReplsResetRow"],!0)):(e.button.setButtonVisible(["ReplsDelLineOpr","ReplsInsertLine"],!0),e.cardTable.getNumberOfRows(d.AREA.bomrepls)>=1?e.button.setButtonDisabled(["ReplsResetRow"],!1):e.button.setButtonDisabled(["ReplsResetRow"],!0)),e.cardTable.getNumberOfRows(d.AREA.bompos)<=0?(e.button.setButtonVisible(["PosDelLineOpr","PosInsertLine"],!1),e.button.setButtonDisabled(["PosResetRow"],!0)):(e.button.setButtonVisible(["PosDelLineOpr","PosInsertLine"],!0),e.cardTable.getNumberOfRows(d.AREA.bompos)>=1?e.button.setButtonDisabled(["PosResetRow"],!1):e.button.setButtonDisabled(["PosResetRow"],!0)),e.cardTable.getNumberOfRows(d.AREA.bomloss)<=0?(e.button.setButtonVisible(["LossDelLineOpr","LossInsertLine"],!1),e.button.setButtonDisabled(["LossResetRow"],!0)):(e.button.setButtonVisible(["LossDelLineOpr","LossInsertLine"],!0),e.cardTable.getNumberOfRows(d.AREA.bomloss)>=1?e.button.setButtonDisabled(["LossResetRow"],!1):e.button.setButtonDisabled(["LossResetRow"],!0)))):(e.button.setButtonVisible(["WipsAddLine","WipsDelLine","WipsCopyLine","WipsResetRow"],!1),e.button.setButtonVisible(["WipsMore","WipsDelLineOpr","WipsInsertLine"],!1),e.button.setButtonVisible(["WipsPasteLineEnd","WipsPasteLineCancel","WipsPasteLine"],!1),e.button.setButtonVisible(["ReplsAddLine","ReplsDelLine","ReplsCopyLine","ReplsResetRow"],!1),e.button.setButtonVisible(["ReplsMore","ReplsDelLineOpr","ReplsInsertLine"],!1),e.button.setButtonVisible(["ReplsPasteLineEnd","ReplsPasteLineCancel","ReplsPasteLine"],!1),e.button.setButtonVisible(["PosAddLine","PosDelLine","PosCopyLine","PosResetRow"],!1),e.button.setButtonVisible(["PosMore","PosDelLineOpr","PosInsertLine"],!1),e.button.setButtonVisible(["PosPasteLineEnd","PosPasteLineCancel","PosPasteLine"],!1),e.button.setButtonVisible(["LossAddLine","LossDelLine","LossCopyLine","LossResetRow"],!1),e.button.setButtonVisible(["LossMore","LossDelLineOpr","LossInsertLine"],!1),e.button.setButtonVisible(["LossPasteLineEnd","LossPasteLineCancel","LossPasteLine"],!1))},this.buttonClick=function(t,a){var o=t.cardTable.getClickRowIndex(d.AREA.bomcarditem)?t.cardTable.getClickRowIndex(d.AREA.bomcarditem).index:-1;if(o<0)(0,i.toast)({color:"warning",content:e.state.json["110140BOMM3028"]});else switch(a){case"WipsAddLine":e.doAfterAddWip(t,o);break;case"ReplsAddLine":e.doAfterAddRepl(t,o);break;case"PosAddLine":e.doAfterAddPos(t,o);break;case"LossAddLine":e.doAfterAddLoss(t,o);break;case"WipsDelLine":e.doDeleteWips(t,o);break;case"ReplsDelLine":e.doDeleteRepls(t,o);break;case"PosDelLine":e.doDeletePos(t,o);break;case"LossDelLine":e.doDeleteLoss(t,o);break;case"WipsCopyLine":e.doCopyWips(t,o);break;case"ReplsCopyLine":e.doCopyRepls(t,o);break;case"PosCopyLine":e.doCopyPos(t,o);break;case"LossCopyLine":e.doCopyLoss(t,o);break;case"WipsPasteLineCancel":e.cancelCopyWips(t,o);break;case"ReplsPasteLineCancel":e.cancelCopyRepls(t,o);break;case"PosPasteLineCancel":e.cancelCopyPos(t,o);break;case"LossPasteLineCancel":e.cancelCopyLoss(t,o);break;case"WipsPasteLineEnd":e.pasteToTailWips(t,o);break;case"ReplsPasteLineEnd":e.pasteToTailRepls(t,o);break;case"PosPasteLineEnd":e.pasteToTailPos(t,o);break;case"LossPasteLineEnd":e.pasteToTailLoss(t,o);break;case"WipsResetRow":e.wipsResetRow(t,o)}},this.lineButtonClick=function(t,a,o,s,r){var n=t.cardTable.getClickRowIndex(d.AREA.bomcarditem)?t.cardTable.getClickRowIndex(d.AREA.bomcarditem).index:-1;if(n<0)(0,i.toast)({color:"warning",content:e.state.json["110140BOMM3028"]});else switch(a){case"WipsPasteLine":e.pasteToHereWips(t,r);break;case"ReplsPasteLine":e.pasteToHereRepls(t,r);break;case"PosPasteLine":e.pasteToHerePos(t,r);break;case"LossPasteLine":e.pasteToHereLoss(t,r);break;case"WipsDelLineOpr":e.doDeleteHereWips(t,r);break;case"ReplsDelLineOpr":e.doDeleteHereRepls(t,r);break;case"PosDelLineOpr":e.doDeleteHerePos(t,r);break;case"LossDelLineOpr":e.doDeleteHereLoss(t,r);break;case"WipsInsertLine":e.doInsertWips(t,n,r);break;case"ReplsInsertLine":e.doInsertRepls(t,n,r);break;case"PosInsertLine":e.doInsertPos(t,n,r);break;case"LossInsertLine":e.doInsertLoss(t,n,r);break;case"WipsMore":e.wipsMore(t,s,r);break;case"ReplsMore":e.replsMore(t,s,r);break;case"PosMore":e.posMore(t,s,r);break;case"LossMore":e.lossMore(t,s,r)}},this.doAfterAddWip=function(t,a,o){var s=t.cardTable.getRowsByIndexs(d.AREA.bomcarditem,a);console.log({index:a,selectedChild:s}),console.log({"props.parent":e.props.parent}),null!=o?t.cardTable.addRow(d.AREA.bomwips,o):t.cardTable.addRow(d.AREA.bomwips);d.PAGECODE.bom_grand,d.AREA.bomwips;var r=-1;r=null!=o?o:t.cardTable.getNumberOfRows(d.AREA.bomwips)-1,c.RownoUtils.setRowNo(t,d.AREA.bomwips,"g_irowno"),t.cardTable.setValByKeyAndIndex(d.AREA.bomwips,r,"pk_group",t.parent.rows[0].values.pk_group),t.cardTable.setValByKeyAndIndex(d.AREA.bomwips,r,"g_cmaterialvid",s[0].values.cmaterialvid),t.cardTable.setValByKeyAndIndex(d.AREA.bomwips,r,"g_cmaterialvid.name",s[0].values["cmaterialvid.name"]),t.cardTable.setValByKeyAndIndex(d.AREA.bomwips,r,"g_cmaterialid",s[0].values.cmaterialid),t.cardTable.setValByKeyAndIndex(d.AREA.bomwips,r,"cassmeasureid",s[0].values.cassmeasureid),s[0].bomwips={rows:t.cardTable.getAllRows(d.AREA.bomwips)},t.button.setButtonVisible(["WipsAddLine","WipsDelLine","WipsCopyLine","WipsResetRow","WipsMore","WipsDelLineOpr","WipsInsertLine"],!0),t.button.setButtonVisible(["WipsPasteLine","WipsPasteLineEnd","WipsPasteLineCancel"],!1),t.button.setButtonDisabled(["WipsDelLine","WipsCopyLine","WipsResetRow"],!0),t.button.setButtonDisabled(["WipsAddLine"],!1),t.cardTable.getNumberOfRows(d.AREA.bomwips)>=1&&t.button.setButtonDisabled(["WipsResetRow"],!1)},this.doAfterAddPos=function(t,a,o){var s=t.cardTable.getRowsByIndexs(d.AREA.bomcarditem,a);console.log({index:a,selectedChild:s}),console.log({"props.parent":e.props.parent}),null!=o?t.cardTable.addRow(d.AREA.bompos,o):t.cardTable.addRow(d.AREA.bompos);d.PAGECODE.bom_grand,d.AREA.bompos;var r=-1;r=null!=o?o:t.cardTable.getNumberOfRows(d.AREA.bompos)-1,c.RownoUtils.setRowNo(t,d.AREA.bompos,"g_irowno"),t.cardTable.setValByKeyAndIndex(d.AREA.bompos,r,"pk_group",t.parent.rows[0].values.pk_group),t.cardTable.setValByKeyAndIndex(d.AREA.bompos,r,"pk_org",t.parent.rows[0].values.pk_org),t.cardTable.setValByKeyAndIndex(d.AREA.bompos,r,"pk_org_v",t.parent.rows[0].values.pk_org_v),t.cardTable.setValByKeyAndIndex(d.AREA.bompos,r,"g_cmaterialvid",s[0].values.cmaterialvid),t.cardTable.setValByKeyAndIndex(d.AREA.bompos,r,"g_cmaterialvid.name",s[0].values["cmaterialvid.name"]),t.cardTable.setValByKeyAndIndex(d.AREA.bompos,r,"g_cmaterialid",s[0].values.cmaterialid),t.cardTable.setValByKeyAndIndex(d.AREA.bompos,r,"cassmeasureid",s[0].values.cassmeasureid),s[0].bompos={rows:t.cardTable.getAllRows(d.AREA.bompos)},t.button.setButtonVisible(["PosAddLine","PosDelLine","PosCopyLine","PosResetRow","PosMore","PosDelLineOpr","PosInsertLine"],!0),t.button.setButtonVisible(["PosPasteLine","PosPasteLineEnd","PosPasteLineCancel"],!1),t.button.setButtonDisabled(["PosDelLine","PosCopyLine","PosResetRow"],!0),t.button.setButtonDisabled(["PosAddLine"],!1),t.cardTable.getNumberOfRows(d.AREA.bompos)>=1&&t.button.setButtonDisabled(["PosResetRow"],!1)},this.doAfterAddRepl=function(t,a,o){var s=t.cardTable.getRowsByIndexs(d.AREA.bomcarditem,a);console.log({index:a,selectedChild:s}),console.log({"props.parent":e.props.parent}),null!=o?t.cardTable.addRow(d.AREA.bomrepls,o):t.cardTable.addRow(d.AREA.bomrepls);d.PAGECODE.bom_grand,d.AREA.bomrepls;var r=-1;r=null!=o?o:t.cardTable.getNumberOfRows(d.AREA.bomrepls)-1,c.RownoUtils.setRowNo(t,d.AREA.bomrepls,"vrowno"),t.cardTable.setValByKeyAndIndex(d.AREA.bomrepls,r,"pk_group",t.parent.rows[0].values.pk_group),t.cardTable.setValByKeyAndIndex(d.AREA.bomrepls,r,"pk_org",t.parent.rows[0].values.pk_org),t.cardTable.setValByKeyAndIndex(d.AREA.bomrepls,r,"pk_org_v",t.parent.rows[0].values.pk_org_v),t.cardTable.setValByKeyAndIndex(d.AREA.bomrepls,r,"vreplaceindex",{value:"1/1",display:"1/1"}),t.cardTable.setEditableByIndex(d.AREA.bomrepls,r,["vprodversion","vpackversion"],!0),t.cardTable.setEditableByIndex(d.AREA.bomrepls,r,["ccustomerid","cvendorid","cproductorid","cprojectid"],!1),s[0].bomrepls={rows:t.cardTable.getAllRows(d.AREA.bomrepls)},t.button.setButtonVisible(["ReplsAddLine","ReplsDelLine","ReplsCopyLine","ReplsResetRow","ReplsMore","ReplsDelLineOpr","ReplsInsertLine"],!0),t.button.setButtonVisible(["ReplsPasteLine","ReplsPasteLineEnd","ReplsPasteLineCancel"],!1),t.button.setButtonDisabled(["ReplsDelLine","ReplsCopyLine","ReplsResetRow"],!0),t.button.setButtonDisabled(["ReplsAddLine"],!1),t.cardTable.getNumberOfRows(d.AREA.bomrepls)>=1&&t.button.setButtonDisabled(["ReplsResetRow"],!1)},this.doAfterAddLoss=function(t,a,o){var s=t.cardTable.getRowsByIndexs(d.AREA.bomcarditem,a);console.log({index:a,selectedChild:s}),console.log({"props.parent":e.props.parent}),null!=o?t.cardTable.addRow(d.AREA.bomloss,o):t.cardTable.addRow(d.AREA.bomloss);d.PAGECODE.bom_grand,d.AREA.bomloss;var r=-1;if(r=null!=o?o:t.cardTable.getNumberOfRows(d.AREA.bomloss)-1,c.RownoUtils.setRowNo(t,d.AREA.bomloss,"vlrowno"),t.cardTable.setValByKeyAndIndex(d.AREA.bomloss,r,"pk_group",t.parent.rows[0].values.pk_group),t.cardTable.setValByKeyAndIndex(d.AREA.bomloss,r,"pk_org",t.parent.rows[0].values.pk_org),t.cardTable.setValByKeyAndIndex(d.AREA.bomloss,r,"pk_org_v",t.parent.rows[0].values.pk_org_v),t.cardTable.setValByKeyAndIndex(d.AREA.bomloss,r,"clmaterialid",t.parent.rows[0].values.hcmaterialid),t.cardTable.setValByKeyAndIndex(d.AREA.bomloss,r,"clmaterialvid",t.parent.rows[0].values.hcmaterialvid),t.cardTable.setValByKeyAndIndex(d.AREA.bomloss,r,"clunitid",t.parent.rows[0].values.hcmeasureid),t.cardTable.setValByKeyAndIndex(d.AREA.bomloss,r,"clunitastid",t.parent.rows[0].values.hcassmeasureid),t.cardTable.setValByKeyAndIndex(d.AREA.bomloss,r,"vlchangerate",t.parent.rows[0].values.hvchangerate),0==r)t.cardTable.setValByKeyAndIndex(d.AREA.bomloss,r,"nlfromastnum",{value:0,display:0}),t.cardTable.setValByKeyAndIndex(d.AREA.bomloss,r,"nlfromnum",{value:0,display:0});else{var n=r-1,l=t.cardTable.getValByKeyAndIndex(d.AREA.bomloss,n,"nltoastnum"),i=t.cardTable.getValByKeyAndIndex(d.AREA.bomloss,n,"nltonum");t.cardTable.setValByKeyAndIndex(d.AREA.bomloss,r,"nlfromastnum",l),t.cardTable.setValByKeyAndIndex(d.AREA.bomloss,r,"nlfromnum",i)}s[0].bomloss={rows:t.cardTable.getAllRows(d.AREA.bomloss)},t.button.setButtonVisible(["LossAddLine","LossDelLine","LossCopyLine","LossResetRow","LossMore","LossDelLineOpr","LossInsertLine"],!0),t.button.setButtonVisible(["LossPasteLine","LossPasteLineEnd","LossPasteLineCancel"],!1),t.button.setButtonDisabled(["LossDelLine","LossCopyLine","LossResetRow"],!0),t.button.setButtonDisabled(["LossAddLine"],!1),t.cardTable.getNumberOfRows(d.AREA.bomloss)>=1&&t.button.setButtonDisabled(["LossResetRow"],!1)},this.wipsModalAddRow=function(t){var a=t.cardTable.getClickRowIndex(d.AREA.bomcarditem).record;c.RownoUtils.setRowNo(t,d.AREA.bomwips,"g_irowno");var o=e.props.cardTable.getNumberOfRows(d.AREA.bomwips);t.cardTable.setValByKeyAndIndex(d.AREA.bomwips,o-1,"pk_group",t.parent.rows[0].values.pk_group),t.cardTable.setValByKeyAndIndex(d.AREA.bomwips,o-1,"g_cmaterialvid",a.values.cmaterialvid),t.cardTable.setValByKeyAndIndex(d.AREA.bomwips,o-1,"g_cmaterialvid.name",a.values["cmaterialvid.name"]),t.cardTable.setValByKeyAndIndex(d.AREA.bomwips,o-1,"g_cmaterialid",a.values.cmaterialid),a.bomwips={rows:t.cardTable.getAllRows(d.AREA.bomwips)},t.button.setButtonVisible(["WipsAddLine","WipsDelLine","WipsCopyLine","WipsResetRow","WipsMore","WipsDelLineOpr","WipsInsertLine"],!0),t.button.setButtonVisible(["WipsPasteLine","WipsPasteLineEnd","WipsPasteLineCancel"],!1),t.button.setButtonDisabled(["WipsDelLine","WipsCopyLine","WipsResetRow"],!0),t.button.setButtonDisabled(["WipsAddLine"],!1),t.cardTable.getNumberOfRows(d.AREA.bomwips)>=1&&t.button.setButtonDisabled(["WipsResetRow"],!1)},this.replsModalAddRow=function(t){var a=t.cardTable.getClickRowIndex(d.AREA.bomcarditem).record;c.RownoUtils.setRowNo(t,d.AREA.bomrepls,"vrowno");var o=e.props.cardTable.getNumberOfRows(d.AREA.bomrepls);t.cardTable.setValByKeyAndIndex(d.AREA.bomrepls,o-1,"pk_group",t.parent.rows[0].values.pk_group),t.cardTable.setValByKeyAndIndex(d.AREA.bomrepls,o-1,"pk_org",t.parent.rows[0].values.pk_org),t.cardTable.setValByKeyAndIndex(d.AREA.bomrepls,o-1,"pk_org_v",t.parent.rows[0].values.pk_org_v),t.cardTable.setValByKeyAndIndex(d.AREA.bomrepls,o-1,"vreplaceindex",{value:"1/1",display:"1/1"}),t.cardTable.setEditableByIndex(d.AREA.bomrepls,o-1,["vprodversion","vpackversion"],!0),t.cardTable.setEditableByIndex(d.AREA.bomrepls,o-1,["ccustomerid","cvendorid","cproductorid","cprojectid"],!1),a.bomrepls={rows:t.cardTable.getAllRows(d.AREA.bomrepls)},t.button.setButtonVisible(["ReplsAddLine","ReplsDelLine","ReplsCopyLine","ReplsResetRow","ReplsMore","ReplsDelLineOpr","ReplsInsertLine"],!0),t.button.setButtonVisible(["ReplsPasteLine","ReplsPasteLineEnd","ReplsPasteLineCancel"],!1),t.button.setButtonDisabled(["ReplsDelLine","ReplsCopyLine","ReplsResetRow"],!0),t.button.setButtonDisabled(["ReplsAddLine"],!1),t.cardTable.getNumberOfRows(d.AREA.bomrepls)>=1&&t.button.setButtonDisabled(["ReplsResetRow"],!1)},this.posModalAddRow=function(t){var a=t.cardTable.getClickRowIndex(d.AREA.bomcarditem).record;c.RownoUtils.setRowNo(t,d.AREA.bompos,"g_irowno");var o=e.props.cardTable.getNumberOfRows(d.AREA.bompos);t.cardTable.setValByKeyAndIndex(d.AREA.bompos,o-1,"pk_group",t.parent.rows[0].values.pk_group),t.cardTable.setValByKeyAndIndex(d.AREA.bompos,o-1,"pk_org",t.parent.rows[0].values.pk_org),t.cardTable.setValByKeyAndIndex(d.AREA.bompos,o-1,"pk_org_v",t.parent.rows[0].values.pk_org_v),t.cardTable.setValByKeyAndIndex(d.AREA.bompos,o-1,"g_cmaterialvid",a.values.cmaterialvid),t.cardTable.setValByKeyAndIndex(d.AREA.bompos,o-1,"g_cmaterialvid.name",a.values["cmaterialvid.name"]),t.cardTable.setValByKeyAndIndex(d.AREA.bompos,o-1,"g_cmaterialid",a.values.cmaterialid),t.cardTable.setValByKeyAndIndex(d.AREA.bompos,o-1,"cassmeasureid",a.values.cassmeasureid),t.cardTable.setValByKeyAndIndex(d.AREA.bompos,o-1,"cmeasureid",a.values.cmeasureid),a.bompos={rows:t.cardTable.getAllRows(d.AREA.bompos)},t.button.setButtonVisible(["PosAddLine","PosDelLine","PosCopyLine","PosResetRow","PosMore","PosDelLineOpr","PosInsertLine"],!0),t.button.setButtonVisible(["PosPasteLine","PosPasteLineEnd","PosPasteLineCancel"],!1),t.button.setButtonDisabled(["PosDelLine","PosCopyLine","PosResetRow"],!0),t.button.setButtonDisabled(["PosAddLine"],!1),t.cardTable.getNumberOfRows(d.AREA.bompos)>=1&&t.button.setButtonDisabled(["PosResetRow"],!1)},this.lossModalAddRow=function(t){var a=t.cardTable.getClickRowIndex(d.AREA.bomcarditem).record;c.RownoUtils.setRowNo(t,d.AREA.bomloss,"vlrowno");var o=e.props.cardTable.getNumberOfRows(d.AREA.bomloss);if(t.cardTable.setValByKeyAndIndex(d.AREA.bomloss,o-1,"pk_group",t.parent.rows[0].values.pk_group),t.cardTable.setValByKeyAndIndex(d.AREA.bomloss,o-1,"pk_org",t.parent.rows[0].values.pk_org),t.cardTable.setValByKeyAndIndex(d.AREA.bomloss,o-1,"pk_org_v",t.parent.rows[0].values.pk_org_v),t.cardTable.setValByKeyAndIndex(d.AREA.bomloss,o-1,"clmaterialid",t.parent.rows[0].values.hcmaterialid),t.cardTable.setValByKeyAndIndex(d.AREA.bomloss,o-1,"clmaterialvid",t.parent.rows[0].values.hcmaterialvid),t.cardTable.setValByKeyAndIndex(d.AREA.bomloss,o-1,"clunitid",t.parent.rows[0].values.hcmeasureid),t.cardTable.setValByKeyAndIndex(d.AREA.bomloss,o-1,"clunitastid",t.parent.rows[0].values.hcassmeasureid),t.cardTable.setValByKeyAndIndex(d.AREA.bomloss,o-1,"vlchangerate",t.parent.rows[0].values.hvchangerate),1==o)t.cardTable.setValByKeyAndIndex(d.AREA.bomloss,o-1,"nlfromastnum",{value:0,display:0}),t.cardTable.setValByKeyAndIndex(d.AREA.bomloss,o-1,"nlfromnum",{value:0,display:0});else{var s=o-2,r=t.cardTable.getValByKeyAndIndex(d.AREA.bomloss,s,"nltoastnum"),n=t.cardTable.getValByKeyAndIndex(d.AREA.bomloss,s,"nltonum");t.cardTable.setValByKeyAndIndex(d.AREA.bomloss,o-1,"nlfromastnum",r),t.cardTable.setValByKeyAndIndex(d.AREA.bomloss,o-1,"nlfromnum",n)}a.bomloss={rows:t.cardTable.getAllRows(d.AREA.bomloss)},t.button.setButtonVisible(["LossAddLine","LossDelLine","LossCopyLine","LossResetRow","LossMore","LossDelLineOpr","LossInsertLine"],!0),t.button.setButtonVisible(["LossPasteLine","LossPasteLineEnd","LossPasteLineCancel"],!1),t.button.setButtonDisabled(["LossDelLine","LossCopyLine","LossResetRow"],!0),t.button.setButtonDisabled(["LossAddLine"],!1),t.cardTable.getNumberOfRows(d.AREA.bomloss)>=1&&t.button.setButtonDisabled(["LossResetRow"],!1)},this.doAfterSelectWips=function(){e.props.cardTable.getCheckedRows(d.AREA.bomwips).length>0?e.props.button.setButtonDisabled(["WipsDelLine","WipsCopyLine"],!1):e.props.button.setButtonDisabled(["WipsDelLine","WipsCopyLine"],!0)},this.doAfterSelectRepls=function(){e.props.cardTable.getCheckedRows(d.AREA.bomrepls).length>0?e.props.button.setButtonDisabled(["ReplsDelLine","ReplsCopyLine"],!1):e.props.button.setButtonDisabled(["ReplsDelLine","ReplsCopyLine"],!0)},this.doAfterSelectPos=function(){e.props.cardTable.getCheckedRows(d.AREA.bompos).length>0?e.props.button.setButtonDisabled(["PosDelLine","PosCopyLine"],!1):e.props.button.setButtonDisabled(["PosDelLine","PosCopyLine"],!0)},this.doAfterSelectLoss=function(){e.props.cardTable.getCheckedRows(d.AREA.bomloss).length>0?e.props.button.setButtonDisabled(["LossDelLine","LossCopyLine"],!1):e.props.button.setButtonDisabled(["LossDelLine","LossCopyLine"],!0)},this.doDeleteWips=function(t,a){var o=t.cardTable.getCheckedRows(d.AREA.bomwips),s=[];o.forEach((function(e){s.push(e.index)})),t.cardTable.delRowsByIndex(d.AREA.bomwips,s),e.props.cardTable.selectAllRows(d.AREA.bomwips,!1),t.button.setButtonDisabled(["WipsDelLine","WipsCopyLine"],!0),t.cardTable.getNumberOfRows(d.AREA.bomwips)>=1?t.button.setButtonDisabled(["WipsResetRow"],!1):t.button.setButtonDisabled(["WipsResetRow"],!0)},this.doDeleteRepls=function(t,a){var o=t.cardTable.getCheckedRows(d.AREA.bomrepls),s=[];o.forEach((function(e){s.push(e.index)})),t.cardTable.delRowsByIndex(d.AREA.bomrepls,s),e.props.cardTable.selectAllRows(d.AREA.bomrepls,!1),t.button.setButtonDisabled(["ReplsDelLine","ReplsCopyLine"],!0),t.cardTable.getNumberOfRows(d.AREA.bomrepls)>=1?t.button.setButtonDisabled(["ReplsResetRow"],!1):t.button.setButtonDisabled(["ReplsResetRow"],!0)},this.doDeletePos=function(t,a){var o=t.cardTable.getCheckedRows(d.AREA.bompos),s=[];o.forEach((function(e){s.push(e.index)})),t.cardTable.delRowsByIndex(d.AREA.bompos,s),e.props.cardTable.selectAllRows(d.AREA.bompos,!1),t.button.setButtonDisabled(["PosDelLine","PosCopyLine"],!0),t.cardTable.getNumberOfRows(d.AREA.bompos)>=1?t.button.setButtonDisabled(["PosResetRow"],!1):t.button.setButtonDisabled(["PosResetRow"],!0)},this.doDeleteLoss=function(t,a){var o=t.cardTable.getCheckedRows(d.AREA.bomloss),s=[];o.forEach((function(e){s.push(e.index)})),t.cardTable.delRowsByIndex(d.AREA.bomloss,s),e.props.cardTable.selectAllRows(d.AREA.bomloss,!1),t.button.setButtonDisabled(["LossDelLine","LossCopyLine"],!0),t.cardTable.getNumberOfRows(d.AREA.bomloss)>=1?t.button.setButtonDisabled(["LossResetRow"],!1):t.button.setButtonDisabled(["LossResetRow"],!0)},this.doDeleteHereWips=function(t,a){t.cardTable.delRowsByIndex(d.AREA.bomwips,a),e.props.cardTable.selectAllRows(d.AREA.bomwips,!1),t.button.setButtonDisabled(["WipsDelLine","WipsCopyLine"],!0),t.cardTable.getNumberOfRows(d.AREA.bomwips)>=1?t.button.setButtonDisabled(["WipsResetRow"],!1):t.button.setButtonDisabled(["WipsResetRow"],!0)},this.doDeleteHereRepls=function(t,a){t.cardTable.delRowsByIndex(d.AREA.bomrepls,a),e.props.cardTable.selectAllRows(d.AREA.bomrepls,!1),t.button.setButtonDisabled(["ReplsDelLine","ReplsCopyLine"],!0),t.cardTable.getNumberOfRows(d.AREA.bomrepls)>=1?t.button.setButtonDisabled(["ReplsResetRow"],!1):t.button.setButtonDisabled(["ReplsResetRow"],!0)},this.doDeleteHerePos=function(t,a){t.cardTable.delRowsByIndex(d.AREA.bompos,a),e.props.cardTable.selectAllRows(d.AREA.bompos,!1),t.button.setButtonDisabled(["PosDelLine","PosCopyLine"],!0),t.cardTable.getNumberOfRows(d.AREA.bompos)>=1?t.button.setButtonDisabled(["PosResetRow"],!1):t.button.setButtonDisabled(["PosResetRow"],!0)},this.doDeleteHereLoss=function(t,a){t.cardTable.delRowsByIndex(d.AREA.bomloss,a),e.props.cardTable.selectAllRows(d.AREA.bomloss,!1),t.button.setButtonDisabled(["LossDelLine","LossCopyLine"],!0),t.cardTable.getNumberOfRows(d.AREA.bomloss)>=1?t.button.setButtonDisabled(["LossResetRow"],!1):t.button.setButtonDisabled(["LossResetRow"],!0)},this.wipsMore=function(e,t,a){"browse"==e.cardTable.getStatus(d.AREA.bomwips)?e.cardTable.toggleRowView(d.AREA.bomwips,t):e.cardTable.openModel(d.AREA.bomwips,"edit",t,a)},this.replsMore=function(e,t,a){"browse"==e.cardTable.getStatus(d.AREA.bomrepls)?e.cardTable.toggleRowView(d.AREA.bomrepls,t):e.cardTable.openModel(d.AREA.bomrepls,"edit",t,a)},this.posMore=function(e,t,a){"browse"==e.cardTable.getStatus(d.AREA.bompos)?e.cardTable.toggleRowView(d.AREA.bompos,t):e.cardTable.openModel(d.AREA.bompos,"edit",t,a)},this.lossMore=function(e,t,a){"browse"==e.cardTable.getStatus(d.AREA.bomloss)?e.cardTable.toggleRowView(d.AREA.bomloss,t):e.cardTable.openModel(d.AREA.bomloss,"edit",t,a)},this.doInsertWips=function(t,a,o){e.doAfterAddWip(t,a,o)},this.doInsertRepls=function(t,a,o){e.doAfterAddRepl(t,a,o)},this.doInsertPos=function(t,a,o){e.doAfterAddPos(t,a,o)},this.doInsertLoss=function(t,a,o){e.doAfterAddLoss(a,o)},this.doCopyWips=function(t,a){var o=t.cardTable.getCheckedRows(d.AREA.bomwips);null!=o&&0!=o.length?(e.props.button.setButtonVisible(["WipsAddLine","WipsInsertLine","WipsDelLine","WipsCopyLine","WipsResetRow","WipsDelLineOpr","WipsMore"],!1),e.props.button.setButtonVisible(["WipsPasteLine","WipsPasteLineEnd","WipsPasteLineCancel"],!0),e.props.cardTable.setAllCheckboxAble(d.AREA.bomwips,!1)):(0,i.toast)({color:"warning",content:e.state.json["110140BOMM3010"]})},this.doCopyRepls=function(t,a){var o=t.cardTable.getCheckedRows(d.AREA.bomrepls);null!=o&&0!=o.length?(e.props.button.setButtonVisible(["ReplsAddLine","ReplsInsertLine","ReplsDelLine","ReplsCopyLine","ReplsResetRow","ReplsDelLineOpr","ReplsMore"],!1),e.props.button.setButtonVisible(["ReplsPasteLine","ReplsPasteLineEnd","ReplsPasteLineCancel"],!0),e.props.cardTable.setAllCheckboxAble(d.AREA.bomrepls,!1)):(0,i.toast)({color:"warning",content:e.state.json["110140BOMM3010"]})},this.doCopyPos=function(t,a){var o=t.cardTable.getCheckedRows(d.AREA.bompos);null!=o&&0!=o.length?(e.props.button.setButtonVisible(["PosAddLine","PosInsertLine","PosDelLine","PosCopyLine","PosResetRow","PosDelLineOpr","PosMore"],!1),e.props.button.setButtonVisible(["PosPasteLine","PosPasteLineEnd","PosPasteLineCancel"],!0),e.props.cardTable.setAllCheckboxAble(d.AREA.bompos,!1)):(0,i.toast)({color:"warning",content:e.state.json["110140BOMM3010"]})},this.doCopyLoss=function(t,a){var o=t.cardTable.getCheckedRows(d.AREA.bomloss);null!=o&&0!=o.length?(e.props.button.setButtonVisible(["LossAddLine","LossInsertLine","LossDelLine","LossCopyLine","LossResetRow","LossDelLineOpr","LossMore"],!1),e.props.button.setButtonVisible(["LossPasteLine","LossPasteLineEnd","LossPasteLineCancel"],!0),e.props.cardTable.setAllCheckboxAble(d.AREA.bomloss,!1)):(0,i.toast)({color:"warning",content:e.state.json["110140BOMM3010"]})},this.cancelCopyWips=function(t,a){e.props.button.setButtonVisible(["WipsAddLine","WipsInsertLine","WipsDelLine","WipsCopyLine","WipsResetRow","WipsDelLineOpr","WipsMore"],!0),e.props.button.setButtonVisible(["WipsPasteLine","WipsPasteLineEnd","WipsPasteLineCancel"],!1),e.props.cardTable.setAllCheckboxAble(d.AREA.bomwips,!0),e.props.cardTable.selectAllRows(d.AREA.bomwips,!1),e.props.button.setButtonDisabled(["WipsDelLine","WipsCopyLine"],!0)},this.cancelCopyRepls=function(t,a){e.props.button.setButtonVisible(["ReplsAddLine","ReplsInsertLine","ReplsDelLine","ReplsCopyLine","ReplsResetRow","ReplsDelLineOpr","ReplsMore"],!0),e.props.button.setButtonVisible(["ReplsPasteLine","ReplsPasteLineEnd","ReplsPasteLineCancel"],!1),e.props.cardTable.setAllCheckboxAble(d.AREA.bomrepls,!0),e.props.cardTable.selectAllRows(d.AREA.bomrepls,!1),e.props.button.setButtonDisabled(["ReplsDelLine","ReplsCopyLine"],!0)},this.cancelCopyPos=function(t,a){e.props.button.setButtonVisible(["PosAddLine","PosInsertLine","PosDelLine","PosCopyLine","PosResetRow","PosDelLineOpr","PosMore"],!0),e.props.button.setButtonVisible(["PosPasteLine","PosPasteLineEnd","PosPasteLineCancel"],!1),e.props.cardTable.setAllCheckboxAble(d.AREA.bompos,!0),e.props.cardTable.selectAllRows(d.AREA.bompos,!1),e.props.button.setButtonDisabled(["PosDelLine","PosCopyLine"],!0)},this.cancelCopyLoss=function(t,a){e.props.button.setButtonVisible(["LossAddLine","LossInsertLine","LossDelLine","LossCopyLine","LossResetRow","LossDelLineOpr","LossMore"],!0),e.props.button.setButtonVisible(["LossPasteLine","LossPasteLineEnd","LossPasteLineCancel"],!1),e.props.cardTable.setAllCheckboxAble(d.AREA.bomloss,!0),e.props.cardTable.selectAllRows(d.AREA.bomloss,!1),e.props.button.setButtonDisabled(["LossDelLine","LossCopyLine"],!0)},this.pasteToTailWips=function(t,a){e.setState({copyRowDatas:t.cardTable.getCheckedRows(d.AREA.bomwips)},(function(){u.rowCopyPasteUtils.pasteRowsToTail.call(e,t,d.AREA.bomwips,[],[],["g_irowno","cbom_wipid","ts"]),c.RownoUtils.setRowNo(t,d.AREA.bomwips,"g_irowno"),e.cancelCopyWips(t,a),t.cardTable.getNumberOfRows(d.AREA.bomwips)>=1?t.button.setButtonDisabled(["WipsResetRow"],!1):t.button.setButtonDisabled(["WipsResetRow"],!0)}))},this.pasteToTailRepls=function(t,a){e.setState({copyRowDatas:t.cardTable.getCheckedRows(d.AREA.bomrepls)},(function(){u.rowCopyPasteUtils.pasteRowsToTail.call(e,t,d.AREA.bomrepls,[],[],["vrowno","cbom_replaceid","ts"]),c.RownoUtils.setRowNo(t,d.AREA.bomrepls,"vrowno"),e.cancelCopyRepls(t,a),t.cardTable.getNumberOfRows(d.AREA.bomrepls)>=1?t.button.setButtonDisabled(["ReplsResetRow"],!1):t.button.setButtonDisabled(["ReplsResetRow"],!0)}))},this.pasteToTailPos=function(t,a){e.setState({copyRowDatas:t.cardTable.getCheckedRows(d.AREA.bompos)},(function(){u.rowCopyPasteUtils.pasteRowsToTail.call(e,t,d.AREA.bompos,[],[],["g_irowno","cbom_positionid","ts"]),c.RownoUtils.setRowNo(t,d.AREA.bompos,"g_irowno"),e.cancelCopyPos(t,a),t.cardTable.getNumberOfRows(d.AREA.bompos)>=1?t.button.setButtonDisabled(["PosResetRow"],!1):t.button.setButtonDisabled(["PosResetRow"],!0)}))},this.pasteToTailLoss=function(t,a){e.setState({copyRowDatas:t.cardTable.getCheckedRows(d.AREA.bomloss)},(function(){u.rowCopyPasteUtils.pasteRowsToTail.call(e,t,d.AREA.bomloss,[],[],["vlrowno","cbom_lossid","ts"]),c.RownoUtils.setRowNo(t,d.AREA.bomloss,"vlrowno"),e.cancelCopyLoss(t,a),t.cardTable.getNumberOfRows(d.AREA.bomloss)>=1?t.button.setButtonDisabled(["LossResetRow"],!1):t.button.setButtonDisabled(["LossResetRow"],!0)}))},this.pasteToHereWips=function(t,a){e.setState({copyRowDatas:t.cardTable.getCheckedRows(d.AREA.bomwips)},(function(){u.rowCopyPasteUtils.pasteRowsToIndex.call(e,t,d.AREA.bomwips,a,[],[],["g_irowno","cbom_wipid","ts"]),c.RownoUtils.setRowNo(t,d.AREA.bomwips,"g_irowno"),e.cancelCopyWips(t,a),t.cardTable.getNumberOfRows(d.AREA.bomwips)>=1?t.button.setButtonDisabled(["WipsResetRow"],!1):t.button.setButtonDisabled(["WipsResetRow"],!0)}))},this.pasteToHereRepls=function(t,a){e.setState({copyRowDatas:t.cardTable.getCheckedRows(d.AREA.bomrepls)},(function(){u.rowCopyPasteUtils.pasteRowsToIndex.call(e,t,d.AREA.bomrepls,a,[],[],["vrowno","cbom_replaceid","ts"]),c.RownoUtils.setRowNo(t,d.AREA.bomrepls,"vrowno"),e.cancelCopyRepls(t,a),t.cardTable.getNumberOfRows(d.AREA.bomrepls)>=1?t.button.setButtonDisabled(["ReplsResetRow"],!1):t.button.setButtonDisabled(["ReplsResetRow"],!0)}))},this.pasteToHerePos=function(t,a){e.setState({copyRowDatas:t.cardTable.getCheckedRows(d.AREA.bompos)},(function(){u.rowCopyPasteUtils.pasteRowsToIndex.call(e,t,d.AREA.bompos,a,[],[],["g_irowno","cbom_positionid","ts"]),c.RownoUtils.setRowNo(t,d.AREA.bompos,"g_irowno"),e.cancelCopyPos(t,a),t.cardTable.getNumberOfRows(d.AREA.bompos)>=1?t.button.setButtonDisabled(["PosResetRow"],!1):t.button.setButtonDisabled(["PosResetRow"],!0)}))},this.pasteToHereLoss=function(t,a){e.setState({copyRowDatas:t.cardTable.getCheckedRows(d.AREA.bomloss)},(function(){u.rowCopyPasteUtils.pasteRowsToIndex.call(e,t,d.AREA.bomloss,a,[],[],["vlrowno","cbom_lossid","ts"]),c.RownoUtils.setRowNo(t,d.AREA.bomloss,"vlrowno"),e.cancelCopyLoss(t,a),t.cardTable.getNumberOfRows(d.AREA.bomloss)>=1?t.button.setButtonDisabled(["LossResetRow"],!1):t.button.setButtonDisabled(["LossResetRow"],!0)}))},this.wipsResetRow=function(t,a){c.RownoUtils.resetRowNo(e.props,d.AREA.bomwips,"g_irowno"),t.selectAllRows(d.AREA.bomwips,!1)},this.replsResetRow=function(t,a){c.RownoUtils.resetRowNo(e.props,d.AREA.bomrepls,"vrowno"),t.selectAllRows(d.AREA.bomwips,!1)},this.posResetRow=function(t,a){c.RownoUtils.resetRowNo(e.props,d.AREA.bomwips,"g_irowno"),t.selectAllRows(d.AREA.bomwips,!1)},this.lossResetRow=function(t,a){c.RownoUtils.resetRowNo(e.props,d.AREA.bomwips,"vlrowno"),t.selectAllRows(d.AREA.bomwips,!1)},this.onWipCardTableBeforeEvent=function(e,t,a,o,s,r,n){return"pk_org"==a&&e.meta.getMeta()[d.AREA.bomwips].items.map((function(t){if("pk_org"==t.attrcode){t.isMultiSelectedEnabled=!1;var a="";e.parent.rows[0].values.cbomid&&e.parent.rows[0].values.cbomid.value&&(a=e.parent.rows[0].values.cbomid.value),e.cardTable.setQueryCondition(d.AREA.bomwips,{pk_org:function(){return{pk_org:e.parent.rows[0].values.pk_org.value,cbomid:a,GridRefActionExt:"nccloud.web.mmbd.refer.bom.StockorgQueryFilter"}}})}})),"cwipid"==a&&e.meta.getMeta()[d.AREA.bomwips].items.map((function(t){if("cwipid"==t.attrcode){t.isMultiSelectedEnabled=!1;var a="";r.values.pk_org&&r.values.pk_org.value&&(a=r.values.pk_org.value),e.cardTable.setQueryCondition(d.AREA.bomwips,{cwipid:function(){return{pk_group:e.parent.rows[0].values.pk_group.value,pk_org:a,GridRefActionExt:"nccloud.web.mmbd.refer.bom.StordocQueryFilter"}}})}})),!0},this.onWipCardTableAfterEvent=function(e,t,a,o,s,r,n){"pk_org"==a&&s.map((function(t){t.newvalue.value!=t.oldvalue.value&&(e.cardTable.setValByKeyAndIndex(d.AREA.bomwips,r,"cwipid",{value:null,display:null}),e.cardTable.setValByKeyAndIndex(d.AREA.bomwips,r,"cwipid.name",{value:null,display:null}),e.cardTable.setValByKeyAndIndex(d.AREA.bomwips,r,"nnum",{value:null,display:null}))})),"cwipid"==a&&s.map((function(t){null==t.newvalue.value||""==t.newvalue.value?e.cardTable.setValByKeyAndIndex(d.AREA.bomwips,r,"cwipid.name",{value:null,display:null}):e.cardTable.setValByKeyAndIndex(d.AREA.bomwips,r,"cwipid.name",{value:o.refname,display:o.refname})}));var l=e.cardTable.getClickRowIndex(d.AREA.bomcarditem)?e.cardTable.getClickRowIndex(d.AREA.bomcarditem).index:-1;e.cardTable.getRowsByIndexs(d.AREA.bomcarditem,l)[0].bomwips={rows:e.cardTable.getAllRows(d.AREA.bomwips)}},this.onPosCardTableBeforeEvent=function(e,t,a,o,s,r,n){return!0},this.onPosCardTableAfterEvent=function(e,t,a,o,s,r,n){var l=e.cardTable.getClickRowIndex(d.AREA.bomcarditem)?e.cardTable.getClickRowIndex(d.AREA.bomcarditem).index:-1;e.cardTable.getRowsByIndexs(d.AREA.bomcarditem,l)[0].bompos={rows:e.cardTable.getAllRows(d.AREA.bompos)}},this.onReplsCardTableBeforeEvent=function(e,t,a,o,s,r,n){return"creplmaterialvid"==a&&e.meta.getMeta()[d.AREA.bomrepls].items.map((function(t){"creplmaterialvid"==t.attrcode&&(t.isDataPowerEnable=!1,t.isMultiSelectedEnabled=!0,e.cardTable.setQueryCondition(d.AREA.bomrepls,{creplmaterialvid:function(){return{pk_org:e.parent.rows[0].values.pk_org.value,hbcustomized:e.parent.rows[0].values.hbcustomized.value,fbomtype:e.parent.rows[0].values.fbomtype.value,GridRefActionExt:"nccloud.web.mmbd.refer.query.ReplsMaterialQueryFilter"}}}))})),"vprodversion"==a&&e.meta.getMeta()[d.AREA.bomrepls].items.map((function(t){"vprodversion"==t.attrcode&&(t.isDataPowerEnable=!1,t.isMultiSelectedEnabled=!1,e.cardTable.setQueryCondition(d.AREA.bomrepls,{vprodversion:function(){return{pk_group:e.parent.rows[0].values.pk_group.value,pk_org:e.parent.rows[0].values.pk_org.value,hcmaterialid:e.cardTable.getValByKeyAndIndex(d.AREA.bomrepls,s,"creplmaterialoid").value,hcmaterialvid:e.cardTable.getValByKeyAndIndex(d.AREA.bomrepls,s,"creplmaterialvid").value,fbomtype:"1"}}}))})),"vpackversion"==a&&e.meta.getMeta()[d.AREA.bomrepls].items.map((function(t){"vpackversion"==t.attrcode&&(t.isDataPowerEnable=!1,t.isMultiSelectedEnabled=!1,e.cardTable.setQueryCondition(d.AREA.bomrepls,{vpackversion:function(){return{pk_group:e.parent.rows[0].values.pk_group.value,pk_org:e.parent.rows[0].values.pk_org.value,hcmaterialid:e.cardTable.getValByKeyAndIndex(d.AREA.bomrepls,s,"creplmaterialoid").value,hcmaterialvid:e.cardTable.getValByKeyAndIndex(d.AREA.bomrepls,s,"creplmaterialvid").value,fbomtype:"2"}}}))})),!0},this.onReplsCardTableAfterEvent=function(t,a,o,s,r,n,l){if("creplmaterialvid"==o){var u=0,p=[];if(r.map((function(e){null==e.newvalue.value||""==e.newvalue.value?(t.cardTable.setValByKeyAndIndex(d.AREA.bomrepls,n+u,"creplmaterialoid",{value:null,display:null}),t.cardTable.setValByKeyAndIndex(d.AREA.bomrepls,n+u,"creplmaterialvid.name",{value:null,display:null}),t.cardTable.setValByKeyAndIndex(d.AREA.bomrepls,n+u,"creplmaterialvid.version",{value:null,display:null}),t.cardTable.setValByKeyAndIndex(d.AREA.bomrepls,n+u,"creplmaterialvid.materialspec",{value:null,display:null}),t.cardTable.setValByKeyAndIndex(d.AREA.bomrepls,n+u,"creplmaterialvid.materialtype",{value:null,display:null}),t.cardTable.setValByKeyAndIndex(d.AREA.bomrepls,n+u,"vprodversion",{value:null,display:null}),t.cardTable.setValByKeyAndIndex(d.AREA.bomrepls,n+u,"vpackversion",{value:null,display:null}),t.cardTable.setEditableByIndex(d.AREA.bomrepls,n+u,["vprodversion","vpackversion"],!0),t.cardTable.setEditableByIndex(d.AREA.bomrepls,n+u,["ccustomerid","cvendorid","cproductorid","cprojectid"],!1),u++):p.push(e.newvalue.value)})),p.length>0){if(p.length>=1)for(var b=1;b<p.length;b++){t.cardTable.setValByKeyAndIndex(d.AREA.bomrepls,n,"vrowno",{value:null,display:null});var m=t.cardTable.getRowsByIndexs(d.AREA.bomrepls,n)[0].values;t.cardTable.addRow(d.AREA.bomrepls,n,m)}c.RownoUtils.setRowNo(t,d.AREA.bomrepls,"vrowno");var A={creplmaterialvid:p};(0,i.ajax)({url:"/nccloud/mmbd/bom0202/bomReplsAfterEvent.do",data:A,success:function(t){if(t.data){console.log(t.data);for(var a=0;a<p.length;a++){var o=JSON.parse(t.data[a]),s={};for(var r in o)s[r]="creplmaterialvid"==r?{value:o[r],display:o["creplmaterialvid.code"]}:{value:o[r],display:o[r]};e.props.cardTable.setValByKeysAndIndex(d.AREA.bomrepls,n+a,s),e.props.cardTable.setEditableByIndex(d.AREA.bomrepls,n+u,["vprodversion","vpackversion","ccustomerid","cvendorid","cproductorid","cprojectid"],!0)}}}})}}var f=t.cardTable.getClickRowIndex(d.AREA.bomcarditem)?t.cardTable.getClickRowIndex(d.AREA.bomcarditem).index:-1;t.cardTable.getRowsByIndexs(d.AREA.bomcarditem,f)[0].bomrepls={rows:t.cardTable.getAllRows(d.AREA.bomrepls)}},this.onLossCardTableBeforeEvent=function(e,t,a,o,s,r,n){return!0},this.onLossCardTableAfterEvent=function(t,a,o,s,r,n,l){"nlfromnum"==o&&t.cardTable.getValByKeyAndIndex(d.AREA.bomloss,n,"clunitid").value&&t.cardTable.getValByKeyAndIndex(d.AREA.bomloss,n,"clunitastid").value&&t.cardTable.getValByKeyAndIndex(d.AREA.bomloss,n,"vlchangerate").value&&s&&(0,i.ajax)({url:"/nccloud/mmbd/bom0202/nlfromnumevent.do",data:{nlfromnum:Number(s),clunitid:t.cardTable.getValByKeyAndIndex(d.AREA.bomloss,n,"clunitid").value,clunitastid:t.cardTable.getValByKeyAndIndex(d.AREA.bomloss,n,"clunitastid").value,vlchangerate:t.cardTable.getValByKeyAndIndex(d.AREA.bomloss,n,"vlchangerate").value},success:function(t){t.success&&t.data&&(console.log(t.data),e.props.cardTable.setValByKeyAndIndex(d.AREA.bomloss,n,"nlfromastnum",{value:Number(t.data.nlfromastnum)}))}}),"nlfromastnum"==o&&t.cardTable.getValByKeyAndIndex(d.AREA.bomloss,n,"clunitid").value&&t.cardTable.getValByKeyAndIndex(d.AREA.bomloss,n,"clunitastid").value&&t.cardTable.getValByKeyAndIndex(d.AREA.bomloss,n,"vlchangerate").value&&s&&(0,i.ajax)({url:"/nccloud/mmbd/bom0202/nlfromastnumevent.do",data:{nlfromastnum:Number(s),clunitid:t.cardTable.getValByKeyAndIndex(d.AREA.bomloss,n,"clunitid").value,clunitastid:t.cardTable.getValByKeyAndIndex(d.AREA.bomloss,n,"clunitastid").value,vlchangerate:t.cardTable.getValByKeyAndIndex(d.AREA.bomloss,n,"vlchangerate").value},success:function(t){t.success&&t.data&&(console.log(t.data),e.props.cardTable.setValByKeyAndIndex(d.AREA.bomloss,n,"nlfromnum",{value:Number(t.data.nlfromnum)}))}}),"nltonum"==o&&t.cardTable.getValByKeyAndIndex(d.AREA.bomloss,n,"clunitid").value&&t.cardTable.getValByKeyAndIndex(d.AREA.bomloss,n,"clunitastid").value&&t.cardTable.getValByKeyAndIndex(d.AREA.bomloss,n,"vlchangerate").value&&s&&(0,i.ajax)({url:"/nccloud/mmbd/bom0202/nltonumevent.do",data:{nltonum:Number(s),clunitid:t.cardTable.getValByKeyAndIndex(d.AREA.bomloss,n,"clunitid").value,clunitastid:t.cardTable.getValByKeyAndIndex(d.AREA.bomloss,n,"clunitastid").value,vlchangerate:t.cardTable.getValByKeyAndIndex(d.AREA.bomloss,n,"vlchangerate").value},success:function(t){t.success&&t.data&&(console.log(t.data),e.props.cardTable.setValByKeyAndIndex(d.AREA.bomloss,n,"nltoastnum",{value:Number(t.data.nltoastnum)}))}}),"nltoastnum"==o&&t.cardTable.getValByKeyAndIndex(d.AREA.bomloss,n,"clunitid").value&&t.cardTable.getValByKeyAndIndex(d.AREA.bomloss,n,"clunitastid").value&&t.cardTable.getValByKeyAndIndex(d.AREA.bomloss,n,"vlchangerate").value&&s&&(0,i.ajax)({url:"/nccloud/mmbd/bom0202/nltoastnumevent.do",data:{nltoastnum:Number(s),clunitid:t.cardTable.getValByKeyAndIndex(d.AREA.bomloss,n,"clunitid").value,clunitastid:t.cardTable.getValByKeyAndIndex(d.AREA.bomloss,n,"clunitastid").value,vlchangerate:t.cardTable.getValByKeyAndIndex(d.AREA.bomloss,n,"vlchangerate").value},success:function(t){t.success&&t.data&&(console.log(t.data),e.props.cardTable.setValByKeyAndIndex(d.AREA.bomloss,n,"nltonum",{value:Number(t.data.nltonum)}))}});var c=t.cardTable.getClickRowIndex(d.AREA.bomcarditem)?t.cardTable.getClickRowIndex(d.AREA.bomcarditem).index:-1;t.cardTable.getRowsByIndexs(d.AREA.bomcarditem,c)[0].bomloss={rows:t.cardTable.getAllRows(d.AREA.bomloss)}},this.getWipsTableHead=function(){var t=e.props.button.createButtonApp;e.props.button.getButtons(),e.props.getUrlParam("status");return React.createElement("div",{className:"shoulder-definition-area"},React.createElement("div",{className:"definition-icons",style:{padding:"0px"}}," ",t({area:"wips-action",onButtonClick:e.buttonClick.bind(e)})," ",e.props.cardTable.createBrowseIcons(e.tableId,{iconArr:["close","open","max","setCol"],maxDestAREAId:"nc-bill-card"})," ")," ")},this.getReplsTableHead=function(){var t=e.props.button.createButtonApp;e.props.button.getButtons(),e.props.getUrlParam("status");return React.createElement("div",{className:"shoulder-definition-area"},React.createElement("div",{className:"definition-icons",style:{padding:"0px"}}," ",t({area:"repls-action",onButtonClick:e.buttonClick.bind(e)})," ",e.props.cardTable.createBrowseIcons(e.tableId,{iconArr:["close","open","max","setCol"],maxDestAREAId:"nc-bill-card"})," ")," ")},this.getPosTableHead=function(){var t=e.props.button.createButtonApp;e.props.button.getButtons(),e.props.getUrlParam("status");return React.createElement("div",{className:"shoulder-definition-area"},React.createElement("div",{className:"definition-icons",style:{padding:"0px"}}," ",t({area:"pos-action",onButtonClick:e.buttonClick.bind(e)})," ",e.props.cardTable.createBrowseIcons(e.tableId,{iconArr:["close","open","max","setCol"],maxDestAREAId:"nc-bill-card"})," ")," ")},this.getLossTableHead=function(){var t=e.props.button.createButtonApp;e.props.button.getButtons(),e.props.getUrlParam("status");return React.createElement("div",{className:"shoulder-definition-area"},React.createElement("div",{className:"definition-icons",style:{padding:"0px"}}," ",t({area:"loss-action",onButtonClick:e.buttonClick.bind(e)})," ",e.props.cardTable.createBrowseIcons(e.tableId,{iconArr:["close","open","max","setCol"],maxDestAREAId:"nc-bill-card"})," ")," ")}},o);m=(0,i.createPage)({billinfo:{billtype:"extcard",pagecode:"10140BOMM_grand",headcode:"temp",bodycode:[d.AREA.bomloss,d.AREA.bomwips,d.AREA.bomrepls,d.AREA.bompos]}})(m),t.default=m},165:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.btnClicks=void 0;var o=a(8);t.btnClicks=function(e,t){switch(t){case"Copy":var a=e.editTable.getCheckedRows(o.AREA.power),s=[];a.map((function(e){s.push(e.data.values)})),this.setState({copyedRows:s});break;case"Paste":var r=e.editTable.getNumberOfRows(o.AREA.power);this.state.copyedRows.map((function(t){e.editTable.addRow(o.AREA.power,r,!1,t),r++})),this.setState({copyedRows:[]});break;case"Delete":var n=e.editTable.getCheckedRows(o.AREA.power),l=[];n.map((function(e){l.push(e.index)})),e.editTable.deleteTableRowsByIndex(o.AREA.power,l)}}},166:function(e,t,a){var o=a(167);"string"==typeof o&&(o=[[e.i,o,""]]);var s={transform:void 0};a(6)(o,s);o.locals&&(e.exports=o.locals)},167:function(e,t,a){(e.exports=a(5)(!1)).push([e.i,".noMax .icon-zuidahua {\n  display: none;\n}\n",""])},174:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,s,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},n=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),l=a(2),i=R(l),d=(R(a(3)),a(1)),c=a(8),u=R(a(164)),p=a(158),b=a(159),m=a(7),A=(a(163),a(141)),f=R(a(157)),h=R(a(138));function R(e){return e&&e.__esModule?e:{default:e}}function v(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var g=d.base.NCAffix,y=(d.base.NCPopconfirm,d.base.NCFormControl,d.base.NCBackBtn,d.high.PrintOutput),E=d.high.ApproveDetail,w=d.cardCache.addCache,B=d.cardCache.getCacheById,T=d.cardCache.updateCache,k=d.cardCache.getCurrentLastId,C=d.cardCache.getNextId,I=d.cardCache.deleteCacheById,L=d.cardCache.getDefData,D=d.cardCache.setDefData,x="mmbd.bom.bom0202.data",V="psgcardb",M="search";function _(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=e.getUrlParam("status");null==t&&e.addUrlParam({status:"browse"});var a=[],o=[];if("edit"==t||"add"==t?(e.getUrlParam("reviseEdit")?(o=["Edit","EditGroup","ReviseEdit","Add","Return","Delete","Commit","UnCommit","Assign","Unassign","Default","CancelDefault","Refresh","Enable","Disable","Print","Output","PasteLineEnd","CancelPaste","PasteHere","Copy","SaveCommit","AddLine","DelLine","ResetRow","CopyLine","OutputsPasteHere","OutputsPasteLineEnd","OutputsCancelPaste","Assist","More","InsertLine","DelRow","drop_more","Refresh"],a=["Save","SaveAdd","Cancel","OutputsAddLine","OutputsDelLine","OutputsCopyLine","OutputsResetRow"]):(o=["Edit","ReviseEdit","Add","Return","Delete","Commit","UnCommit","Assign","Unassign","Default","CancelDefault","Refresh","Enable","Disable","Print","Output","PasteLineEnd","CancelPaste","PasteHere","OutputsPasteHere","OutputsPasteLineEnd","OutputsCancelPaste","Copy","Assist","drop_more"],a=["Save","SaveAdd","Cancel","AddLine","DelLine","ResetRow","CopyLine","OutputsAddLine","OutputsDelLine","OutputsCopyLine","OutputsResetRow","SaveCommit","More","InsertLine","DelRow"]),e.button.setButtonVisible(o,!1),e.button.setButtonVisible(a,!0),e.cardPagination.setCardPaginationVisible("cardPaginationBtn",!1)):(o=["Save","Cancel","AddLine","DelLine","SaveAdd","ResetRow","CancelPaste","PasteLineEnd","CopyLine","PasteHere","OutputsAddLine","OutputsDelLine","OutputsCopyLine","OutputsPasteLineEnd","OutputsCancelPaste","OutputsResetRow","InsertLine","OutputsInsertLine","OutputsDelRow","DelRow","SaveAdd","OutputsPasteHere","SaveCommit"],a=["Add","Edit","ReviseEdit","Delete","Return","Commit","UnCommit","Assign","Unassign","Default","CancelDefault","Refresh","Print","Output","Copy","Enable","Disable","Assist","drop_more"],e.button.setButtonVisible(o,!1),e.button.setButtonVisible(a,!0),e.cardPagination.setCardPaginationVisible("cardPaginationBtn",!0)),e.form.getFormStatus("bomcard_h")!==t&&e.form.setFormStatus("bomcard_h",t),e.cardTable.setStatus("bomcard_b","edit"==t||"add"==t?"edit":"browse"),e.cardTable.setStatus("bomcard_outputs","edit"==t||"add"==t?"edit":"browse"),window.onbeforeunload="add"!=t&&"edit"!=t?null:function(){return""},e.getUrlParam("reviseEdit")){var s=e.meta.getMeta()[c.AREA.bomcardh],r={};if(s){var n=!0,l=!1,i=void 0;try{for(var d,u=s.items[Symbol.iterator]();!(n=(d=u.next()).done);n=!0){var p=d.value;p.visible&&(r[p.attrcode]=!0)}}catch(e){l=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(l)throw i}}}r.bkititem=!1,r.hvnote=!1,e.form.setFormItemsDisabled(c.AREA.bomcardh,r);e.cardTable.setColEditableByKey(c.AREA.bomcarditem,["vrowno","cmaterialvid","cassmeasureid","vchangerate","nassitemnum","ibasenum","vitemversion","vpackversion","nbfixshrinkastnum","ndissipationum","fcontrol","bcanreplace","freplacetype","cbeginperiod","cendperiod","bcustommaterial","bprojectmaterial","ccustomerid","cvendorid","cproductorid","cprojectid"]),O(e)}else{e.cardTable.setColEditableByKey(c.AREA.bomcarditem,["vrowno","cmaterialvid","cassmeasureid","vchangerate","nassitemnum","ibasenum","vitemversion","vpackversion","nbfixshrinkastnum","ndissipationum","fcontrol","bcanreplace","freplacetype","cbeginperiod","cendperiod","bcustommaterial","bprojectmaterial","ccustomerid","cvendorid","cproductorid","cprojectid"],!1),"add"==t&&e.form.setFormItemsDisabled(c.AREA.bomcardh,{pk_org:!1}),"browse"!=t&&(e.form.getFormItemsValue(c.AREA.bomcardh,"pk_org")&&e.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").value?(P(e,!0),"edit"==t&&e.form.setFormItemsDisabled(c.AREA.bomcardh,{hcmaterialvid:!0}),O(e)):P(e,!1))}"edit"==t&&e.getUrlParam("id")&&e.form.setFormItemsDisabled(c.AREA.bomcardh,{pk_org:!0,hcmaterialid:!0,hcmaterialvid:!0,hversion:!0,hfversiontype:!0})}function O(e){var t=["DelLine","CopyLine","OutputsDelLine","OutputsCopyLine"];e.cardTable.getNumberOfRows(c.AREA.bomcarditem)<1?t.push("ResetRow"):e.button.setButtonDisabled(["ResetRow"],!1),e.cardTable.getNumberOfRows(c.AREA.bomcardoutputs)<1?t.push("OutputsResetRow"):e.button.setButtonDisabled(["OutputsResetRow"],!1),e.button.setButtonDisabled(t,!0)}function P(e,t){e.form.setFormItemsDisabled(c.AREA.bomcardh,{hvnote:!t,hcmaterialid:!t,hcmaterialvid:!t,fbomtype:!t,hversion:!t,hfversiontype:!0,hbdefault:!t,hcassmeasureid:!t,bkititem:!t,hnassparentnum:!t}),e.button.setButtonDisabled(["AddLine","DeleteLine","CopyLine","ShowGrand","ResetRow"],!t),e.button.setButtonDisabled(["OutputsAddLine","DeleteLine","OutputsCopyLine","OutputsResetRow"],!t)}var S=(o=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.call(a),a.searchId=M,a.tableId=V,a.state={pks:[],pk_org:"",title_code:"",totalcount:0,backVisible:!0,json:{},grandMeta:{},showGrand:!1,wipsmaintain:!1,grandStatus:"browse",context:{},queryG:!1,billid:"",approveDetailShow:!1,buffer:[]},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"addGrandTabsMeta",value:function(e,t){}},{key:"modifierMeta",value:function(e,t){var a=this,o={itemtype:"customer",attrcode:"opr",label:this.state.pubjson?this.state.pubjson["10140PUBMESSAGE-000034"]:"10140PUBMESSAGE-000034",visible:!0,className:"table-opr",width:200,fixed:"right",render:function(t,o,s){return e.button.createOprationButton(["More","InsertLine","DelRow","ShowRowGrand","PasteHere"],{area:"itembody-action",buttonLimit:3,onButtonClick:function(e,r){return a.tableButtonClick(e,r,t,o,s)}})}},s={itemtype:"customer",attrcode:"opr",label:this.state.pubjson?this.state.pubjson["10140PUBMESSAGE-000034"]:"10140PUBMESSAGE-000034",visible:!0,className:"table-opr",width:200,fixed:"right",render:function(t,o,s){return e.button.createOprationButton(["OutputsMore","OutputsInsertLine","OutputsDelRow","OutputsPasteHere"],{area:"outputstable-action",buttonLimit:3,onButtonClick:function(e,r){return a.outputsTableButtonClick(e,r,t,o,s)}})}};return t[c.AREA.bomcarditem].items.push(o),t[c.AREA.bomcardoutputs].items.push(s),t[c.AREA.bomcardh].items.forEach((function(t){switch(t.attrcode){case"pk_org":t.queryCondition=function(){return{GridRefActionExt:"nccloud.web.mmbd.refer.pub.AppPermissionOrgRefFilter"}};break;case"hcmaterialid":t.queryCondition=function(){return{pk_org:e.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").value,GridRefActionExt:"nccloud.web.mmbd.refer.pub.MateiralRefFilter"}};break;case"hcmaterialvid":t.queryCondition=function(){return{pk_org:e.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").value,materialoid:e.form.getFormItemsValue(c.AREA.bomcardh,"hcmaterialid").value,GridRefActionExt:"nccloud.web.mmbd.refer.pub.MaterialvidRefFilter"}};break;case"hcassmeasureid":t.queryCondition=function(){return e.form.getFormItemsValue(c.AREA.bomcardh,"hcmaterialvid").value?{pk_material:e.form.getFormItemsValue(c.AREA.bomcardh,"hcmaterialvid").value,GridRefActionExt:"nccloud.web.mmbd.refer.pub.AssMeasureRefFilter"}:{pk_material:e.form.getFormItemsValue(c.AREA.bomcardh,"hcmaterialid").value,GridRefActionExt:"nccloud.web.mmbd.refer.pub.AssMeasureRefFilter"}};break;case"fbomtype":t.options.length>2&&t.options.splice(2,1)}})),t[c.AREA.bomcarditem].items.forEach((function(t){switch(t.attrcode){case"cmaterialvid":t.isMultiSelectedEnabled=!0;break;case"fitemsource":t.options.length>3&&t.options.splice(3,1);break;case"ccustomerid":case"cvendorid":case"cprojectid":t.queryCondition=function(){return{pk_org:e.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").value}}}})),t.bomcard_b_02.items.forEach((function(e){switch(e.attrcode){case"cmaterialvid":e.isMultiSelectedEnabled=!0;break;case"fitemsource":e.options.length>3&&e.options.splice(3,1)}})),t[c.AREA.bomcardoutputs].items.forEach((function(t){switch(t.attrcode){case"foutputtype":t.options.length>2&&t.options.splice(0,1);break;case"cmaterialvid":t.fieldDisplayed="refcode";break;case"ccustomerid":case"cvendorid":case"cprojectid":t.queryCondition=function(){return{pk_org:e.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").value}}}})),t.bomcard_outputs_01.items.forEach((function(t){switch(t.attrcode){case"foutputtype":t.options.length>2&&t.options.splice(0,1);break;case"cmaterialvid":t.fieldDisplayed="refcode";break;case"ccustomerid":case"cvendorid":case"cprojectid":t.queryCondition=function(){return{pk_org:e.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").value}}}})),t.bomcard_outputs_02.items.forEach((function(t){switch(t.attrcode){case"foutputtype":t.options.length>2&&t.options.splice(0,1);break;case"cmaterialvid":t.fieldDisplayed="refcode";break;case"ccustomerid":case"cvendorid":case"cprojectid":t.queryCondition=function(){return{pk_org:e.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").value}}}})),t}},{key:"componentDidMount",value:function(){var e=this;this.props.MultiInit.getMultiLang({moduleId:"10140BOMM",domainName:"uapbd",callback:function(t){console.log("componentDidMount-callback"),e.setState({json:t},(function(){e.initTemplate(e.props,(function(t){if(t.form.getFormItemsValue(c.AREA.bomcardh,"pk_org")&&t.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").value&&"add"==t.getUrlParam("status")){t.cardTable.addRow(c.AREA.bomcarditem);var a=e.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_group").value,o=e.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").value,s=e.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org_v").value,r=e.props.cardTable.getNumberOfRows(c.AREA.bomcarditem);e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"pk_org",{value:o}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"pk_group",{value:a}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"pk_org_v",{value:s}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"nassitemnum",{value:1}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"nitemnum",{value:1}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"ibasenum",{value:"1"}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"fitemsource",{value:"1",display:e.state.json["10140BOMM2-000000"]}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"fitemtype",{value:"1",display:e.state.json["10140BOMM2-000001"]}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"fbackflushtype",{value:"3",display:e.state.json["10140BOMM2-000002"]}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"fbackflushtime",{value:"1",display:e.state.json["10140BOMM2-000003"]}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"fsupplymode",{value:"1",display:e.state.json["10140BOMM2-000004"]}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"fcontrol",{value:"2",display:e.state.json["10140BOMM2-000005"]}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"bdeliver",{value:!0}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"bbsteploss",{value:!1}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"bbunibatch",{value:!1}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"bbchkitemforwr",{value:!0}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"cendperiod",{value:"2099-12-31 23:59:59"}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"cbeginperiod",{value:(0,d.getBusinessInfo)().businessDate.substr(0,10)+" 00:00:00"}),p.RownoUtils.setRowNo(e.props,c.AREA.bomcarditem,"vrowno"),console.log("line856:componentDidMount-toggle"),_(e.props),e.props.button.setButtonDisabled(["ResetRow"],!1),(0,d.ajax)({url:c.URL.lossscale,data:{pk_org:o},success:function(e){e.data&&(t.meta.getMeta()[c.AREA.bomcarditem].items.find((function(e){return"ndissipationum"==e.attrcode})).scale=e.data.lossscale)}})}e.afterInittemplate()}))}))}});this.props.MultiInit.getMultiLang({moduleId:"10140MMPUBMSG",domainName:"uapbd",callback:function(t,a,o){a&&e.setState({pubjson:r({},t)})}})}},{key:"cancelSureEvent",value:function(){var e=this;if("add"===this.props.getUrlParam("status")){var t=k(x);this.getDataForCache2(t,(function(){e.props.pushTo("/card",{status:"browse",id:e.props.getUrlParam("id")}),e.props.form.setFormStatus(c.AREA.bomcardh,"browse"),e.props.cardTable.setStatus(c.AREA.bomcarditem,"browse"),e.props.cardTable.setStatus(c.AREA.bomcardoutputs,"browse")}))}if("edit"===this.props.getUrlParam("status")&&(this.props.form.cancel(c.AREA.bomcardh),this.props.cardTable.resetTableData(c.AREA.bomcarditem),this.props.cardTable.resetTableData(c.AREA.bomcardoutputs),this.props.pushTo("/card",{status:"browse",id:this.props.getUrlParam("id")}),console.log("line2302:CancelSureEvent-toggle"),_(this.props),this.getdata(this.props.getUrlParam("id"))),this.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!0}),L("lastGrand",x)){var a=L("lastGrand",x);this.props.cardTable.getAllRows(c.AREA.bomcarditem).forEach((function(e){a[e.values.cbom_bid.value]&&a[e.values.cbom_bid.value].bodys&&(e.bomwips=a[e.values.cbom_bid.value].bodys.bomwips,e.bomrepls=a[e.values.cbom_bid.value].bodys.bomrepls,e.bompos=a[e.values.cbom_bid.value].bodys.bompos,e.bomloss=a[e.values.cbom_bid.value].bodys.bomloss)}))}}},{key:"sureChangeOrg",value:function(){var e=this;this.props.form.setFormItemsValue(c.AREA.bomcardh,{hcmaterialid:{value:"",display:""},hcmaterialvid:{value:"",display:""},fbomtype:{value:"1",display:this.state.json["10140BOMM2-000011"]},hfversiontype:{value:"2",display:this.state.json["10140BOMM2-000012"]}}),this.props.cardTable.setTableData(c.AREA.bomcarditem,{rows:[]}),this.props.cardTable.setTableData(c.AREA.bomcardoutputs,{rows:[]}),this.props.cardTable.setTableData(c.AREA.bomcarduseorg,{rows:[]}),this.props.cardTable.getNumberOfRows(c.AREA.bomcarduseorg)>0&&this.props.cardTable.delRowsByIndex(c.AREA.bomcarduseorg,0),this.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").value?((0,d.ajax)({url:c.URL.queryOrgVid,data:{pk_org:this.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").value},success:function(t){if(t.success&&t.data){e.props.form.setFormItemsValue(c.AREA.bomcardh,"pk_org_v",{value:t.data[e.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").value]}),e.props.cardTable.addRow(c.AREA.bomcarditem);var a=e.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_group").value,o=e.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").value,s=e.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org_v").value,r=e.props.cardTable.getNumberOfRows(c.AREA.bomcarditem);e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"pk_org",{value:o}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"pk_group",{value:a}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"pk_org_v",{value:s}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"nassitemnum",{value:1}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"nitemnum",{value:1}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"ibasenum",{value:"1"}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"fitemsource",{value:"1",display:e.state.json["10140BOMM2-000000"]}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"fitemtype",{value:"1",display:e.state.json["10140BOMM2-000001"]}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"fbackflushtype",{value:"3",display:e.state.json["10140BOMM2-000002"]}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"fbackflushtime",{value:"1",display:e.state.json["10140BOMM2-000003"]}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"fsupplymode",{value:"1",display:e.state.json["10140BOMM2-000004"]}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"fcontrol",{value:"2",display:e.state.json["10140BOMM2-000005"]}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"bdeliver",{value:!0}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"bbsteploss",{value:!1}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"bbunibatch",{value:!1}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"bbchkitemforwr",{value:!0}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"cendperiod",{value:"2099-12-31 23:59:59"}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"cbeginperiod",{value:(0,d.getBusinessInfo)().businessDate.substr(0,10)+" 00:00:00"}),p.RownoUtils.setRowNo(e.props,c.AREA.bomcarditem,"vrowno"),console.log("line2424:SureChangeOrg-toggle"),_(e.props),e.props.button.setButtonDisabled(["ResetRow"],!1)}}}),this.props.cardTable.addRow(c.AREA.bomcarduseorg,0,{pk_org:this.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org"),pk_org_v:this.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org_v"),pk_useorg:this.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org"),pk_useorg_v:this.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org_v"),"pk_useorg.name":{value:this.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").display}})):(console.log("line2440:SureChangeOrg-toggle"),_(this.props),this.props.button.setButtonVisible(["InsertLine","","PasteLine","OutputsPasteLine"],!1))}},{key:"afterEvent",value:function(e,t,a,o,s){var n=this;if(o.value!=s.value)switch(a){case"pk_org":s&&s.value?(0,m.showWarningDialog)(this.state.json["110140BOMM3027"],this.state.json["110140BOMM3026"],{beSureBtnClick:this.sureChangeOrg.bind(this)}):o&&o.value&&((0,d.ajax)({url:c.URL.queryOrgVid,data:{pk_org:o.value},success:function(e){if(e.success&&e.data){n.props.form.setFormItemsValue(c.AREA.bomcardh,{pk_org_v:{value:e.data[o.value]}}),n.props.cardTable.addRow(c.AREA.bomcarditem);var t=n.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_group").value,a=n.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").value,s=n.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org_v").value,r=n.props.cardTable.getNumberOfRows(c.AREA.bomcarditem);n.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"pk_org",{value:a}),n.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"pk_group",{value:t}),n.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"pk_org_v",{value:s}),n.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"nassitemnum",{value:1}),n.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"nitemnum",{value:1}),n.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"ibasenum",{value:"1"}),n.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"fitemsource",{value:"1",display:n.state.json["10140BOMM2-000000"]}),n.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"fitemtype",{value:"1",display:n.state.json["10140BOMM2-000001"]}),n.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"fbackflushtype",{value:"3",display:n.state.json["10140BOMM2-000002"]}),n.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"fbackflushtime",{value:"1",display:n.state.json["10140BOMM2-000003"]}),n.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"fsupplymode",{value:"1",display:n.state.json["10140BOMM2-000004"]}),n.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"fcontrol",{value:"2",display:n.state.json["10140BOMM2-000005"]}),n.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"bdeliver",{value:!0}),n.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"bbsteploss",{value:!1}),n.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"bbunibatch",{value:!1}),n.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"bbchkitemforwr",{value:!0}),n.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"cendperiod",{value:"2099-12-31 23:59:59"}),n.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"cbeginperiod",{value:(0,d.getBusinessInfo)().businessDate.substr(0,10)+" 00:00:00"}),p.RownoUtils.setRowNo(n.props,c.AREA.bomcarditem,"vrowno"),console.log("line2526:afterevent-pkorg-toggle"),_(n.props),n.props.button.setButtonDisabled(["ResetRow"],!1)}}}),this.props.cardTable.addRow(c.AREA.bomcarduseorg,0,{pk_org:this.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org"),pk_org_v:this.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org_v"),pk_useorg:this.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org"),pk_useorg_v:this.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org_v"),"pk_useorg.code":{value:o.refcode},"pk_useorg.name":{value:this.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").display}}),console.log("line2546:afterevent-pkorg-toggle"),_(this.props));break;case"hcmaterialid":o&&o.value?(0,d.ajax)({url:c.URL.matoidevent,data:{pk_org:this.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").value,hcmaterialid:o.value,hnassparentnum:1,hnparentnum:1,fbomtype:this.props.form.getFormItemsValue(c.AREA.bomcardh,"fbomtype").value},success:function(e){e.success&&e.data&&(console.log(e.data),n.props.form.setFormItemsValue(c.AREA.bomcardh,{hcmaterialname:{value:"",display:""},hcassmeasureid:{value:"",display:""},hcmeasureid:{value:"",display:""},hbdefault:{value:!1},"hcmaterialvid.graphid":{value:"",display:""},"hcmaterialvid.materialspec":{value:"",display:""},"hcmaterialvid.materialtype":{value:"",display:""},hversion:{value:"",display:""},hiswholesetsend:{value:!1,display:""},hisvirtual:{value:!1,display:""},hcmaterialvid:{value:"",display:""}}),n.props.form.setFormItemsValue(c.AREA.bomcardh,{hcassmeasureid:e.data.form[c.AREA.bomcardh].rows[0].values.hcassmeasureid,hcmeasureid:e.data.form[c.AREA.bomcardh].rows[0].values.hcmeasureid,hbdefault:{value:"true"==e.data.hbdefault},hcmaterialname:{value:e.data.hcmaterialname,display:e.data.hcmaterialname},hisvirtual:{value:"true"==e.data.hisvirtual},hiswholesetsend:{value:"true"==e.data.hiswholesetsend},hvchangerate:{value:e.data.hvchangerate,display:e.data.hvchangerate},hversion:{value:e.data.hversion,display:e.data.hversion},hnassparentnum:r({},e.data.form[c.AREA.bomcardh].rows[0].values.hnassparentnum),hnparentnum:r({},e.data.form[c.AREA.bomcardh].rows[0].values.hnparentnum),"hcmaterialvid.graphid":{value:e.data["hcmaterialvid.graphid"],display:e.data["hcmaterialvid.graphid"]},"hcmaterialvid.materialspec":{value:e.data["hcmaterialvid.materialspec"],display:e.data["hcmaterialvid.materialspec"]},"hcmaterialvid.materialtype":{value:e.data["hcmaterialvid.materialtype"],display:e.data["hcmaterialvid.materialtype"]}}))}}):this.props.form.setFormItemsValue(c.AREA.bomcardh,{hcmaterialname:{value:"",display:""},hcassmeasureid:{value:"",display:""},hcmeasureid:{value:"",display:""},hbdefault:{value:!1},"hcmaterialvid.graphid":{value:"",display:""},"hcmaterialvid.materialspec":{value:"",display:""},"hcmaterialvid.materialtype":{value:"",display:""},hversion:{value:"",display:""},hiswholesetsend:{value:!1,display:""},hisvirtual:{value:!1,display:""},hcmaterialvid:{value:"",display:""}});break;case"hcmaterialvid":o&&o.value?(0,d.ajax)({url:c.URL.matvidevent,data:{pk_org:this.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").value,hcmaterialid:this.props.form.getFormItemsValue(c.AREA.bomcardh,"hcmaterialid").value,hcmaterialvid:o.value,fbomtype:this.props.form.getFormItemsValue(c.AREA.bomcardh,"fbomtype").value},success:function(e){e.success&&e.data&&(console.log(e.data),n.props.form.setFormItemsValue(c.AREA.bomcardh,{hcmaterialvid:{value:"",display:""}}),console.log(n.props.form.getFormItemsValue(c.AREA.bomcardh,"hcmaterialvid")),n.props.form.setFormItemsValue(c.AREA.bomcardh,{hcassmeasureid:e.data.form[c.AREA.bomcardh].rows[0].values.hcassmeasureid,hcmeasureid:e.data.form[c.AREA.bomcardh].rows[0].values.hcmeasureid,hbdefault:{value:"true"==e.data.hbdefault},hcmaterialname:{value:e.data.hcmaterialname,display:e.data.hcmaterialname},hisvirtual:{value:"true"==e.data.hisvirtual},hiswholesetsend:{value:"true"==e.data.hiswholesetsend},hvchangerate:{value:e.data.hvchangerate,display:e.data.hvchangerate},hversion:{value:e.data.hversion,display:e.data.hversion},hcmaterialvid:{value:o.value,display:e.data.matversion}}))}}):(0,d.ajax)({url:c.URL.matoidevent,data:{pk_org:this.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").value,hcmaterialid:this.props.form.getFormItemsValue(c.AREA.bomcardh,"hcmaterialid").value,hnassparentnum:1,hnparentnum:1,fbomtype:this.props.form.getFormItemsValue(c.AREA.bomcardh,"fbomtype").value},success:function(e){e.success&&e.data&&(console.log(e.data),n.props.form.setFormItemsValue(c.AREA.bomcardh,{hcassmeasureid:e.data.form[c.AREA.bomcardh].rows[0].values.hcassmeasureid,hcmeasureid:e.data.form[c.AREA.bomcardh].rows[0].values.hcmeasureid,hbdefault:{value:"true"==e.data.hbdefault},hcmaterialname:{value:e.data.hcmaterialname,display:e.data.hcmaterialname},hisvirtual:{value:"true"==e.data.hisvirtual},hiswholesetsend:{value:"true"==e.data.hiswholesetsend},hvchangerate:{value:e.data.hvchangerate,display:e.data.hvchangerate},hversion:{value:e.data.hversion,display:e.data.hversion},hnassparentnum:r({},e.data.form[c.AREA.bomcardh].rows[0].values.hnassparentnum),hnparentnum:r({},e.data.form[c.AREA.bomcardh].rows[0].values.hnparentnum),"hcmaterialvid.graphid":{value:e.data["hcmaterialvid.graphid"],display:e.data["hcmaterialvid.graphid"]},"hcmaterialvid.materialspec":{value:e.data["hcmaterialvid.materialspec"],display:e.data["hcmaterialvid.materialspec"]},"hcmaterialvid.materialtype":{value:e.data["hcmaterialvid.materialtype"],display:e.data["hcmaterialvid.materialtype"]}}))}});break;case"hfversiontype":"2"==o.value?(this.props.form.setFormItemsValue(c.AREA.bomcardh,{hbdefault:{value:!1}}),this.props.form.setFormItemsDisabled(c.AREA.bomcardh,{hbdefault:!0})):(this.props.form.setFormItemsValue(c.AREA.bomcardh,{hbdefault:{value:!0}}),this.props.form.setFormItemsDisabled(c.AREA.bomcardh,{hbdefault:!1}));break;case"hnassparentnum":o&&o.value&&(0,d.ajax)({url:c.URL.hnassnum,data:{hnassparentnum:Number(o.value),hcmeasureid:this.props.form.getFormItemsValue(c.AREA.bomcardh,"hcmeasureid").value,hcassmeasureid:this.props.form.getFormItemsValue(c.AREA.bomcardh,"hcassmeasureid").value,hvchangerate:this.props.form.getFormItemsValue(c.AREA.bomcardh,"hvchangerate").value},success:function(e){e.success&&e.data&&(console.log(e.data),n.props.form.setFormItemsValue(c.AREA.bomcardh,{hnparentnum:{value:Number(e.data.hnparentnum)}}))}});break;case"hnparentnum":o&&o.value&&(0,d.ajax)({url:c.URL.hnnum,data:{hnparentnum:Number(o.value),hcmeasureid:this.props.form.getFormItemsValue(c.AREA.bomcardh,"hcmeasureid").value,hcassmeasureid:this.props.form.getFormItemsValue(c.AREA.bomcardh,"hcassmeasureid").value,hvchangerate:this.props.form.getFormItemsValue(c.AREA.bomcardh,"hvchangerate").value},success:function(e){e.success&&e.data&&(console.log(e.data),n.props.form.setFormItemsValue(c.AREA.bomcardh,{hnassparentnum:{value:Number(e.data.hnassparentnum)}}))}});break;case"fbomtype":var l=this.props.form.getFormItemsValue(c.AREA.bomcardh,"hcmaterialvid").value?c.URL.matvidevent:c.URL.matoidevent;(0,d.ajax)({url:l,data:{pk_org:this.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").value,hcmaterialid:this.props.form.getFormItemsValue(c.AREA.bomcardh,"hcmaterialid").value,hcmaterialvid:this.props.form.getFormItemsValue(c.AREA.bomcardh,"hcmaterialvid").value,fbomtype:o.value,hnassparentnum:1,hnparentnum:1},success:function(e){e.success&&e.data&&(console.log(e.data),n.props.form.setFormItemsValue(c.AREA.bomcardh,{hversion:{value:e.data.hversion,display:e.data.hversion}}))}})}}},{key:"beforeEvent",value:function(e,t,a){return!0}},{key:"OnHideSun",value:function(){var e=this;return function(){e.setState({showGrand:!1,wipsmaintain:!1}),console.log(e.state.buffer);var t=e.state.buffer;e.props.cardTable.getAllRows(c.AREA.bomcarditem).forEach((function(e){for(var a=0;a<t.length;a++)e.values.cbom_bid.value===t[a][0].values.cbom_bid.value&&(e.bomwips=t[a][0].bomwips,e.bompos=t[a][0].bompos,e.bomrepls=t[a][0].bomrepls,e.bomloss=t[a][0].bomloss)})),console.log(e.props.cardTable.getAllRows(c.AREA.bomcarditem)),e.setState({buffer:[]})}}},{key:"onConfirmSun",value:function(){var e=this;return function(){e.setState({showGrand:!1,wipsmaintain:!1}),console.log(e.refs.itemcontent.cardTable.getAllRows(c.AREA.bomcarditem));e.refs.itemcontent.cardTable.getAllRows(c.AREA.bomcarditem);if("edit"==e.refs.itemcontent.cardTable.getStatus(c.AREA.bomwips)&&"browse"==e.props.getUrlParam("status")){e.props.cardTable.filterEmptyRows(c.AREA.bomcarditem,["cmaterialvid"],"include");var t=e.props.createExtCardData(c.PAGECODE.bom_card,c.AREA.bomcardh,[c.AREA.bomcarditem,c.AREA.bomcardoutputs,c.AREA.bomcarduseorg]);delete t.head[c.AREA.bomcardh].rows[0].values.pk_taxregions,t.bodys[c.AREA.bomcarditem].rows.forEach((function(e){if(e.status="1",e.bomwips){var t={pageid:c.PAGECODE.bom_grand,model:{areaType:"table",pageinfo:null,rows:[],areacode:c.AREA.bomwips}};t.model.rows=e.bomwips.rows,e.values.bomwips={value:JSON.stringify(t)}}if(e.bomloss){var a={pageid:c.PAGECODE.bom_grand,model:{areaType:"table",pageinfo:null,rows:[],areacode:c.AREA.bomloss}};a.model.rows=e.bomloss.rows,e.values.bomloss={value:JSON.stringify(a)}}if(e.bomrepls){var o={pageid:c.PAGECODE.bom_grand,model:{areaType:"table",pageinfo:null,rows:[],areacode:c.AREA.bomrepls}};o.model.rows=e.bomrepls.rows,e.values.bomrepls={value:JSON.stringify(o)}}if(e.bompos){var s={pageid:c.PAGECODE.bom_grand,model:{areaType:"table",pageinfo:null,rows:[],areacode:c.AREA.bompos}};s.model.rows=e.bompos.rows,e.values.bompos={value:JSON.stringify(s)}}}));var a=c.URL.update;(0,d.ajax)({url:a,data:t,success:function(t){t.success&&(t.data&&setTimeout((function(){t.data.head&&(e.props.form.setAllFormValue(v({},c.AREA.bomcardh,t.data.head[c.AREA.bomcardh])),t.data.head[c.AREA.bomcardh].rows[0].values.cbomid.value,console.log("line2982:onConfirmSun-toggle"),_(e.props)),t.data.bodys?(e.props.cardTable.setTableData(c.AREA.bomcarditem,t.data.bodys[c.AREA.bomcarditem]),e.props.cardTable.setTableData(c.AREA.bomcardoutputs,t.data.bodys[c.AREA.bomcardoutputs]?t.data.bodys[c.AREA.bomcardoutputs]:{rows:[]}),e.props.cardTable.setTableData(c.AREA.bomcarduseorg,t.data.bodys[c.AREA.bomcarduseorg])):(e.props.cardTable.setAllTabsData([],tabs),e.setState({tableData:[]}))}),0),e.getdata(e.props.form.getFormItemsValue(c.AREA.bomcardh,"cbomid").value),e.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!0}),(0,d.toast)({content:e.state.json["110140PST0037"],color:"success"}))},error:function(e){(0,d.toast)({color:"danger",content:e.message})}})}}}},{key:"isEmpty",value:function(e){for(var t=arguments.length,a=Array(t>1?t-1:0),o=1;o<t;o++)a[o-1]=arguments[o];return!(null!=e&&!a.find((function(t){return t==e})))}},{key:"setReferValueSimple",value:function(e,t){for(var a in t.rows[0])this.isEmpty(t.rows[0][a].value)||(e.rows[0][a]={value:t.rows[0][a].value,display:t.rows[0][a].display});return e}},{key:"onCardOutputsAfterEvent",value:function(e,t,a,o,s,r,n){if("nbyprodsptnum"==a&&(o&&Number(o),e.cardTable.setValByKeyAndIndex(c.AREA.bomcardoutputs,r,a,{value:0})),"cmaterialvid"==a){o.values&&e.cardTable.setValByKeyAndIndex(c.AREA.bomcardoutputs,r,"cmaterialid",{value:o.values.pk_source.value});var l={pageid:c.PAGECODE.bom_card,model:{areaType:"table",pageinfo:null,rows:[],areacode:c.AREA.bomcardoutputs},userjson:"cmaterialvid"};l.model.rows=e.cardTable.getRowsByIndexs(c.AREA.bomcardoutputs,r),(0,d.ajax)({url:c.URL.afterOutputsEdit,data:l,success:function(t){console.log(t,"111"),console.log(n,"222"),e.cardTable.updateDataByRowId(c.AREA.bomcardoutputs,t.data[c.AREA.bomcardoutputs])}})}if("nastoutputnum"==a){var i={pageid:c.PAGECODE.bom_card,model:{areaType:"table",pageinfo:null,rows:[],areacode:c.AREA.bomcardoutputs},userjson:"nastoutputnum"};i.model.rows=e.cardTable.getRowsByIndexs(c.AREA.bomcardoutputs,r),(0,d.ajax)({url:c.URL.afterOutputsEdit,data:i,success:function(t){console.log(t),e.cardTable.updateDataByRowId(c.AREA.bomcardoutputs,t.data[c.AREA.bomcardoutputs])}})}if("vchangerate"==a){var u={pageid:c.PAGECODE.bom_card,model:{areaType:"table",pageinfo:null,rows:[],areacode:c.AREA.bomcardoutputs},userjson:"vchangerate"};u.model.rows=e.cardTable.getRowsByIndexs(c.AREA.bomcardoutputs,r),(0,d.ajax)({url:c.URL.afterOutputsEdit,data:u,success:function(t){console.log(t),e.cardTable.updateDataByRowId(c.AREA.bomcardoutputs,t.data[c.AREA.bomcardoutputs])}})}if("castunitid"==a){var p={pageid:c.PAGECODE.bom_card,model:{areaType:"table",pageinfo:null,rows:[],areacode:c.AREA.bomcardoutputs},userjson:"castunitid"};p.model.rows=e.cardTable.getRowsByIndexs(c.AREA.bomcardoutputs,r),(0,d.ajax)({url:c.URL.afterOutputsEdit,data:p,success:function(t){console.log(t),e.cardTable.updateDataByRowId(c.AREA.bomcardoutputs,t.data[c.AREA.bomcardoutputs])}})}if("noutputnum"==a){var b={pageid:c.PAGECODE.bom_card,model:{areaType:"table",pageinfo:null,rows:[],areacode:c.AREA.bomcardoutputs},userjson:"noutputnum"};b.model.rows=e.cardTable.getRowsByIndexs(c.AREA.bomcardoutputs,r),(0,d.ajax)({url:c.URL.afterOutputsEdit,data:b,success:function(t){console.log(t),e.cardTable.updateDataByRowId(c.AREA.bomcardoutputs,t.data[c.AREA.bomcardoutputs])}})}}},{key:"onCardItemAfterEvent",value:function(e,t,a,o,s,r,n){var l=this;if("cmaterialvid"==a){console.log(o,"cmaterialvid multi");var i={pageid:c.PAGECODE.bom_card,model:{areaType:"table",pageinfo:null,rows:[],areacode:c.AREA.bomcarditem},userjson:"cmaterialvid"};if(o instanceof Array){var u=0,b=[];o.forEach((function(t){if(!t.values)return u++,void l.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r,"cmaterialvid",{value:t.refpk,display:t.refcode});0!=u&&e.cardTable.addRow(c.AREA.bomcarditem,r+u);var a=l.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_group").value,o=l.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").value,s=l.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org_v").value,n=r+u+1;l.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,n-1,"pk_org",{value:o}),l.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,n-1,"pk_group",{value:a}),l.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,n-1,"pk_org_v",{value:s}),l.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,n-1,"cmaterialid",{value:t.values.pk_source.value}),l.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,n-1,"nassitemnum",{value:1}),l.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,n-1,"nitemnum",{value:1}),l.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,n-1,"ibasenum",{value:"1"}),l.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,n-1,"fitemsource",{value:"1",display:l.state.json["10140BOMM2-000000"]}),l.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,n-1,"fitemtype",{value:"1",display:l.state.json["10140BOMM2-000001"]}),l.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,n-1,"fbackflushtype",{value:"3",display:l.state.json["10140BOMM2-000002"]}),l.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,n-1,"fbackflushtime",{value:"1",display:l.state.json["10140BOMM2-000003"]}),l.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,n-1,"fsupplymode",{value:"1",display:l.state.json["10140BOMM2-000004"]}),l.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,n-1,"fcontrol",{value:"2",display:l.state.json["10140BOMM2-000005"]}),l.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,n-1,"bdeliver",{value:!0}),l.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,n-1,"bbsteploss",{value:!1}),l.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,n-1,"bbunibatch",{value:!1}),l.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,n-1,"bbchkitemforwr",{value:!0}),l.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,n-1,"cendperiod",{value:"2099-12-31 23:59:59"}),l.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,n-1,"cmaterialvid",{value:t.refpk}),l.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,n-1,"cbeginperiod",{value:(0,d.getBusinessInfo)().businessDate.substr(0,10)+" 00:00:00"}),b.push(r+u),u++})),i.model.rows=e.cardTable.getRowsByIndexs(c.AREA.bomcarditem,b),(0,d.ajax)({url:c.URL.afterBodyEdit,data:i,success:function(t){console.log(t),e.cardTable.updateDataByRowId(c.AREA.bomcarditem,t.data[c.AREA.bomcarditem]),p.RownoUtils.setRowNo(e,c.AREA.bomcarditem,"vrowno")}})}else i.model.rows=e.cardTable.getRowsByIndexs(c.AREA.bomcarditem,r),(0,d.ajax)({url:c.URL.afterBodyEdit,data:i,success:function(t){console.log(t),e.cardTable.updateDataByRowId(c.AREA.bomcarditem,t.data[c.AREA.bomcarditem])}})}if("vchangerate"==a){var m={pageid:c.PAGECODE.bom_card,model:{areaType:"table",pageinfo:null,rows:[],areacode:c.AREA.bomcarditem},userjson:"vchangerate"};m.model.rows=e.cardTable.getRowsByIndexs(c.AREA.bomcarditem,r),(0,d.ajax)({url:c.URL.afterBodyEdit,data:m,success:function(t){console.log(t),e.cardTable.updateDataByRowId(c.AREA.bomcarditem,t.data[c.AREA.bomcarditem])}})}if("cassmeasureid"==a){var A={pageid:c.PAGECODE.bom_card,model:{areaType:"table",pageinfo:null,rows:[],areacode:c.AREA.bomcarditem},userjson:"cassmeasureid"};A.model.rows=e.cardTable.getRowsByIndexs(c.AREA.bomcarditem,r),(0,d.ajax)({url:c.URL.afterBodyEdit,data:A,success:function(t){console.log(t),e.cardTable.updateDataByRowId(c.AREA.bomcarditem,t.data[c.AREA.bomcarditem])}})}if("nbfixshrinknum"==a){var f={pageid:c.PAGECODE.bom_card,model:{areaType:"table",pageinfo:null,rows:[],areacode:c.AREA.bomcarditem},userjson:"nbfixshrinknum"};f.model.rows=e.cardTable.getRowsByIndexs(c.AREA.bomcarditem,r),(0,d.ajax)({url:c.URL.afterBodyEdit,data:f,success:function(t){console.log(t),e.cardTable.updateDataByRowId(c.AREA.bomcarditem,t.data[c.AREA.bomcarditem])}})}if("nbfixshrinkastnum"==a){var h={pageid:c.PAGECODE.bom_card,model:{areaType:"table",pageinfo:null,rows:[],areacode:c.AREA.bomcarditem},userjson:"nbfixshrinkastnum"};h.model.rows=e.cardTable.getRowsByIndexs(c.AREA.bomcarditem,r),(0,d.ajax)({url:c.URL.afterBodyEdit,data:h,success:function(t){console.log(t),e.cardTable.updateDataByRowId(c.AREA.bomcarditem,t.data[c.AREA.bomcarditem])}})}if("nitemnum"==a){var R={pageid:c.PAGECODE.bom_card,model:{areaType:"table",pageinfo:null,rows:[],areacode:c.AREA.bomcarditem},userjson:"nitemnum"};R.model.rows=e.cardTable.getRowsByIndexs(c.AREA.bomcarditem,r),(0,d.ajax)({url:c.URL.afterBodyEdit,data:R,success:function(t){console.log(t),e.cardTable.updateDataByRowId(c.AREA.bomcarditem,t.data[c.AREA.bomcarditem])}})}if("nassitemnum"==a){var v={pageid:c.PAGECODE.bom_card,model:{areaType:"table",pageinfo:null,rows:[],areacode:c.AREA.bomcarditem},userjson:"nassitemnum"};v.model.rows=e.cardTable.getRowsByIndexs(c.AREA.bomcarditem,r),(0,d.ajax)({url:c.URL.afterBodyEdit,data:v,success:function(t){console.log(t),e.cardTable.updateDataByRowId(c.AREA.bomcarditem,t.data[c.AREA.bomcarditem])}})}if("ileadtimenum"==a){var g={pageid:c.PAGECODE.bom_card,model:{areaType:"table",pageinfo:null,rows:[],areacode:c.AREA.bomcarditem},userjson:"ileadtimenum",pk_org:e.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").value,hcmaterialid:e.form.getFormItemsValue(c.AREA.bomcardh,"hcmaterialid").value,hcmaterialvid:e.form.getFormItemsValue(c.AREA.bomcardh,"hcmaterialvid").value};g.model.rows=e.cardTable.getRowsByIndexs(c.AREA.bomcarditem,r),(0,d.ajax)({url:c.URL.afterBodyEdit,data:g,success:function(t){console.log(t),e.cardTable.updateDataByRowId(c.AREA.bomcarditem,t.data[c.AREA.bomcarditem])}})}if("fitemtype"==a&&o&&("1"==o?e.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r,"fitemsource",{value:"1",display:this.state.json["10140BOMM2-000000"]}):e.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r,"fitemsource",{value:"",display:""})),"fsupplymode"==a&&o&&"2"==o&&e.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r,"bkitmaterial",{value:!1}),"fitemsource"==a&&o&&"2"==o&&(e.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r,"fbackflushtype",{value:"1",display:this.state.json["10140BOMM2-000013"]}),e.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r,"fbackflushtime",{value:"",display:""})),"bprojectmaterial"==a&&(o?(e.cardTable.setEditableByIndex(c.AREA.bomcarditem,r,"cprojectid",!1),e.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r,"cprojectid",{value:"",display:""})):e.cardTable.setEditableByIndex(c.AREA.bomcarditem,r,"cprojectid",!0)),"bmainmaterial"==a&&o)for(var y=e.cardTable.getNumberOfRows(c.AREA.bomcarditem),E=0;E<y;E++)E!=r&&e.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,E,"bmainmaterial",{value:!1});"bcustommaterial"==a&&(o?(e.cardTable.setEditableByIndex(c.AREA.bomcarditem,r,"ccustomerid",!1),e.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r,"ccustomerid",{value:"",display:""})):e.cardTable.setEditableByIndex(c.AREA.bomcarditem,r,"ccustomerid",!0)),"fbackflushtype"==a&&o&&("1"==o?(e.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r,"fbackflushtime",{value:"",display:""}),e.cardTable.setEditableByIndex(c.AREA.bomcarditem,r,"fbackflushtime",!1)):(e.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r,"fbackflushtime",{value:"1",display:this.state.json["10140BOMM2-000003"]}),e.cardTable.setEditableByIndex(c.AREA.bomcarditem,r,"fbackflushtime",!0)))}},{key:"getDataForCache",value:function(e,t){if(e){var a=B(e,x);a?(this.props.form.setAllFormValue(v({},c.AREA.bomcardh,a.head[c.AREA.bomcardh])),L("permorgs",x).includes(a.head[c.AREA.bomcardh].rows[0].values.pk_org.value)&&(1==a.head[c.AREA.bomcardh].rows[0].values.fbillstatus.value?(this.props.button.setButtonDisabled(["ReviseEdit","Assign","Unassign"],!1),this.props.button.setButtonDisabled(["Edit","Commit","UnCommit"],!0),this.props.button.setButtonVisible(["ReviseEdit","Assign","Unassign"],!0),this.props.button.setButtonVisible(["Edit","Commit","UnCommit"],!1)):2==a.head[c.AREA.bomcardh].rows[0].values.fbillstatus.value?(this.props.button.setButtonDisabled("Commit",!0),this.props.button.setButtonDisabled("UnCommit",!1),this.props.button.setButtonVisible(["Commit"],!1),this.props.button.setButtonVisible(["UnCommit"],!0)):(this.props.button.setButtonDisabled(["ReviseEdit","UnCommit","Assign","Unassign"],!0),this.props.button.setButtonDisabled("Edit",!1),this.props.button.setButtonVisible(["ReviseEdit","UnCommit","Assign","Unassign"],!1),this.props.button.setButtonVisible(["Edit"],!0)),2==a.head[c.AREA.bomcardh].rows[0].values.hfversiontype.value?(this.props.button.setButtonDisabled({Enable:!1,Disable:!0}),this.props.button.setButtonVisible(["Enable"],!0),this.props.button.setButtonVisible(["Disable"],!1)):(this.props.button.setButtonDisabled({Enable:!0,Disable:!1}),this.props.button.setButtonVisible(["Enable"],!1),this.props.button.setButtonVisible(["Disable"],!0)),"1"==a.head[c.AREA.bomcardh].rows[0].values.fbillstatus.value&&"1"==a.head[c.AREA.bomcardh].rows[0].values.hfversiontype.value?1==a.head[c.AREA.bomcardh].rows[0].values.hbdefault.value?(this.props.button.setButtonDisabled({CancelDefault:!1,Default:!0}),this.props.button.setButtonVisible(["CancelDefault"],!0),this.props.button.setButtonVisible(["Default"],!1)):(this.props.button.setButtonDisabled({CancelDefault:!0,Default:!1}),this.props.button.setButtonVisible(["CancelDefault"],!1),this.props.button.setButtonVisible(["Default"],!0)):(this.props.button.setButtonDisabled(["Default","CancelDefault"],!0),this.props.button.setButtonVisible(["Default","CancelDefault"],!1))),a.body&&(a.body[c.AREA.bomcarditem]?this.props.cardTable.setTableData(c.AREA.bomcarditem,a.body[c.AREA.bomcarditem]):this.props.cardTable.setTableData(c.AREA.bomcarditem,{rows:[]}),a.body[c.AREA.bomcardoutputs]?this.props.cardTable.setTableData(c.AREA.bomcardoutputs,a.body[c.AREA.bomcardoutputs]):this.props.cardTable.setTableData(c.AREA.bomcardoutputs,{rows:[]}),a.body[c.AREA.bomcarduseorg]?this.props.cardTable.setTableData(c.AREA.bomcarduseorg,a.body[c.AREA.bomcarduseorg]):this.props.cardTable.setTableData(c.AREA.bomcarduseorg,{rows:[]})),this.props.setUrlParam(e)):(this.getdata(e),this.props.setUrlParam(e)),t&&"function"==typeof t&&t.call(this),a&&(console.log("line5144:getDataForCache-toggle"),_(this.props))}else this.props.pushTo("/list",{})}},{key:"getDataForCache2",value:function(e,t){e?(this.getdata(e),this.props.setUrlParam(e),t&&"function"==typeof t&&t.call(this)):this.props.pushTo("/list",{})}},{key:"updateCardTableBtnStatus",value:function(e){e.cardTable.getCheckedRows(c.AREA.bomcarditem).length>0?e.button.setButtonDisabled(["DelLine","CopyLine",""],!1):e.button.setButtonDisabled(["DelLine","CopyLine"],!0)}},{key:"updateOutputsTableBtnStatus",value:function(e){e.cardTable.getCheckedRows(c.AREA.bomcardoutputs).length>0?e.button.setButtonDisabled(["OutputsDelLine","OutputsCopyLine",""],!1):e.button.setButtonDisabled(["OutputsDelLine","OutputsCopyLine"],!0)}},{key:"changeEnableClick",value:function(){var e=this;(0,d.ajax)({url:changeEnableStatus,data:{id:this.props.getUrlParam("id")},success:function(t){e.getdata(e.props.getUrlParam("id"),(function(){e.enableClick?(0,d.toast)({color:"success",title:e.state.json["10140TAXRE-000020"]}):(0,d.toast)({color:"success",title:e.state.json["10140TAXRE-000021"]})}))}})}},{key:"render",value:function(){var e=this,t=this.props,a=t.cardTable,o=t.form,s=t.button,n=t.modal,l=t.cardPagination,d=t.table,p=(t.editTable,l.createCardPagination),b=this.props.BillHeadInfo.createBillHeadInfo,m=o.createForm,A=(d.createSimpleTable,a.createCardTable),h=(a.createTabsTable,s.createButtonApp),R=n.createModal;this.props.getUrlParam("status");return i.default.createElement("div",{className:"nc-bill-card"},i.default.createElement("div",{className:"nc-bill-top-area"},i.default.createElement(g,null,i.default.createElement("div",{className:"nc-bill-header-area"},i.default.createElement("div",{className:"header-title-search-area"},i.default.createElement("span",null,b({title:this.state.json["110140BOMM3001"],backBtnClick:function(){e.buttonClick.call(e,e.props,"Return")}}))),i.default.createElement("div",{className:"header-button-area"}," ",h({area:"header-action",onButtonClick:this.buttonClick.bind(this)})," ",p({handlePageInfoChange:this.pageInfoClick.bind(this),dataSource:x})," ")," ")," ")," ",i.default.createElement("div",{className:"nc-bill-form-area"}," ",m(c.AREA.bomcardh,{onAfterEvent:this.afterEvent.bind(this),onBeforeEvent:this.beforeEvent.bind(this)})," ")," ")," ",i.default.createElement("div",{className:"nc-bill-bottom-area"},i.default.createElement("div",{className:"nc-bill-table-area"}," ",A(c.AREA.bomcarditem,{tableHead:this.getTableHead.bind(this),onTabChange:this.onTabChange.bind(this),onBeforeEvent:this.onCardItemBeforeEvent.bind(this),onAfterEvent:this.onCardItemAfterEvent.bind(this),modelAddRow:this.modalAddRow.bind(this),hideModelSave:!0,showCheck:!0,addRowCallback:this.addRowEvent.bind(this),onSelected:this.updateCardTableBtnStatus.bind(this),onSelectedAll:this.updateCardTableBtnStatus.bind(this)})," "),i.default.createElement("div",{className:"nc-bill-table-area"}," ",A(c.AREA.bomcardoutputs,{tableHead:this.getOutputsTableHead.bind(this),onTabChange:this.onTabChange.bind(this),onBeforeEvent:this.onCardOutputsBeforeEvent.bind(this),onAfterEvent:this.onCardOutputsAfterEvent.bind(this),modelAddRow:this.outputsModalAddRow.bind(this),hideModelSave:!0,showCheck:!0,addRowCallback:this.addRowEvent.bind(this),onSelected:this.updateOutputsTableBtnStatus.bind(this),onSelectedAll:this.updateOutputsTableBtnStatus.bind(this)})," "),i.default.createElement("div",{className:"nc-bill-table-area"}," ",A(c.AREA.bomcarduseorg,{addRowCallback:this.addRowEvent.bind(this)})," "))," ",R("delete",{title:this.state.json?this.state.json["110140PST0036"]:"110140PST0036",content:this.state.json?this.state.json["110140PST0032"]:"110140PST0032",beSureBtnClick:this.delConfirm.bind(this)}),i.default.createElement(u.default,{ref:"itemcontent",show:this.state.showGrand,parent:this.state.headitems,rows:this.state.items,onHide:this.OnHideSun(),onConfirm:this.onConfirmSun(),grandStatus:this.state.grandStatus,wipsmaintain:this.state.wipsmaintain}),R("sureChangeOrg",{title:this.state.json?this.state.json["110140BOMM3027"]:"110140BOMM3027",content:this.state.json?this.state.json["110140BOMM3026"]:"110140BOMM3026",beSureBtnClick:this.sureChangeOrg.bind(this)}),R("cancel",{title:this.state.json?this.state.json["10140TAXRE-000008"]:"10140TAXRE-000008",content:this.state.json?this.state.json["10140TAXRE-000009"]:"10140TAXRE-000009",beSureBtnClick:this.cancelSureEvent.bind(this)}),i.default.createElement(y,{ref:"printOutput",url:c.URL.print,data:{funcode:"10140BOMM",nodekey:"bommprint",oids:this.state.pks,outputType:"output"}}),i.default.createElement(f.default,r({ref:function(t){return e.assignModal=t}},this.props)),i.default.createElement(E,{show:this.state.approveDetailShow,close:this.closeApprove.bind(this),billtype:"19B1",billid:this.state.billid}))}}]),t}(l.Component),s=function(){var e=this;this.initTemplate=function(t,a){(0,d.ajax)({url:"/nccloud/platform/pub/mergerequest.do",data:[{rqUrl:"/platform/templet/querypage.do",rqJson:'{\n  "pagecode": "10140BOMM_card",\n  "appcode": "10140BOMM"\n}',rqCode:"template"},{rqUrl:"/platform/templet/querypage.do",rqJson:'{\n  "pagecode": "10140BOMM_grand",\n  "appcode": "10140BOMM"\n}',rqCode:"templategrand"},{rqUrl:"/platform/appregister/queryallbtns.do",rqJson:'{\n  "pagecode": "10140BOMM_card",\n  "appcode": "10140BOMM"\n}',rqCode:"button"},{rqUrl:"/mmbd/pub/getcontext.do",rqJson:'{\n  "appcode": "10140BOMM"}',rqCode:"context"}],success:function(o){if(o&&o.data){var s=o.data;if(s.template){var r=s.template;e.modifierMeta(t,r),e.addGrandTabsMeta.call(e,t,r),t.meta.setMeta(r),e.setState({grandMeta:r.templategrand})}if(s.button){var n=s.button;t.button.setButtons(n),console.log("line433:inittemplate-toggle"),_(t)}s.context&&e.setState({context:s.context}),"add"==t.getUrlParam("status")&&e.props.cardTable.addRow(c.AREA.bomcarduseorg,0,{pk_org:{value:s.context.pk_org},pk_org_v:{value:s.context.pk_org_v},pk_useorg:{value:s.context.pk_org,display:s.context.org_Name},pk_useorg_v:{value:s.context.pk_org_v},"pk_useorg.code":{value:s.context.orgcode},"pk_useorg.name":{value:s.context.org_Name}}),a&&a(e.props)}}})},this.info=function(){return window.parent.GETBUSINESSINFO()},this.afterInittemplate=function(){console.log("line888:afterInittemplate-toggle"),_(e.props);var t=e.props.getUrlParam("status");if("add"!=t){var a=e.props.getUrlParam("id");a&&"undefined"!=a&&(L("permorgs",x)&&L("permorgs",x).length>0?(console.log("afterInittemplate-getDefData-getdata"),e.getdata(a)):(0,d.ajax)({url:"/nccloud/mmbd/pub/getpermorgs.do",data:{},success:function(t){D("permorgs",x,t.data.orgs),console.log("componentDidMount-getpermorgs-getdata"),e.getdata(a)}}))}else e.setDefaultValue();if("add"==t||"edit"==t){var o=e.props.getUrlParam("id");console.log(1==e.props.getUrlParam("copyadd"),666),o&&"undefined"!=o&&"add"==t&&1==e.props.getUrlParam("copyadd")&&(0,d.ajax)({url:c.URL.copyAdd,data:{id:o},success:function(t){setTimeout((function(){t.data.card.head&&(e.props.form.setAllFormValue(v({},c.AREA.bomcardh,t.data.card.head[c.AREA.bomcardh])),console.log("line933:componentDidMount-toggle"),_(e.props)),t.data.card.bodys?(e.props.cardTable.setTableData(c.AREA.bomcarditem,t.data.card.bodys[c.AREA.bomcarditem]),e.props.cardTable.setTableData(c.AREA.bomcardoutputs,t.data.card.bodys[c.AREA.bomcardoutputs]),e.props.cardTable.setTableData(c.AREA.bomcarduseorg,t.data.card.bodys[c.AREA.bomcarduseorg]),e.props.cardTable.getAllRows(c.AREA.bomcarditem).forEach((function(e){t.data.grand[e.values.vrowno.value].bodys&&(e.bomwips=t.data.grand[e.values.vrowno.value].bodys.bomwips,e.bomrepls=t.data.grand[e.values.vrowno.value].bodys.bomrepls,e.bompos=t.data.grand[e.values.vrowno.value].bodys.bompos,e.bomloss=t.data.grand[e.values.vrowno.value].bodys.bomloss)}))):(e.props.cardTable.setAllTabsData([],tabs),e.setState({tableData:[]}))}),0)}}),e.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!1})}"edit"==t&&e.props.getUrlParam("id")&&e.props.form.setFormItemsDisabled(c.AREA.bomcardh,{pk_org:!0,hcmaterialid:!0,hcmaterialvid:!0,hversion:!0,hfversiontype:!0})},this.tableButtonClick=function(t,a,o,s,r){switch(a){case"More":"browse"==t.getUrlParam("status")?t.cardTable.toggleRowView(c.AREA.bomcarditem,s):t.cardTable.openModel(c.AREA.bomcarditem,"edit",s,r);break;case"InsertLine":var n=t.form.getFormItemsValue(c.AREA.bomcardh,"pk_group").value,l=t.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").value,i=t.form.getFormItemsValue(c.AREA.bomcardh,"pk_org_v").value,u=r+1;t.cardTable.addRow(c.AREA.bomcarditem,r),t.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,u-1,"pk_org",{value:l}),t.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,u-1,"pk_group",{value:n}),t.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,u-1,"pk_org_v",{value:i}),t.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,u-1,"nassitemnum",{value:1}),t.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,u-1,"nitemnum",{value:1}),t.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,u-1,"ibasenum",{value:"1"}),t.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,u-1,"fitemsource",{value:"1",display:e.state.json["10140BOMM2-000000"]}),t.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,u-1,"fitemtype",{value:"1",display:e.state.json["10140BOMM2-000001"]}),t.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,u-1,"fbackflushtype",{value:"3",display:e.state.json["10140BOMM2-000002"]}),t.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,u-1,"fbackflushtime",{value:"1",display:e.state.json["10140BOMM2-000003"]}),t.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,u-1,"fsupplymode",{value:"1",display:e.state.json["10140BOMM2-000004"]}),t.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,u-1,"fcontrol",{value:"2",display:e.state.json["10140BOMM2-000005"]}),t.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,u-1,"bdeliver",{value:!0}),t.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,u-1,"bbsteploss",{value:!1}),t.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,u-1,"bbunibatch",{value:!1}),t.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,u-1,"bbchkitemforwr",{value:!0}),t.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,u-1,"cendperiod",{value:"2099-12-31 23:59:59"}),t.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,u-1,"cbeginperiod",{value:(0,d.getBusinessInfo)().businessDate.substr(0,10)+" 00:00:00"}),p.RownoUtils.setRowNo(t,c.AREA.bomcarditem,"vrowno"),console.log("line1059:InsertLine-toggle"),_(t),t.button.setButtonDisabled(["ResetRow"],!1);break;case"DelRow":t.cardTable.delRowsByIndex(c.AREA.bomcarditem,r);break;case"ShowRowGrand":for(var m=[],A=0;A<t.cardTable.getAllRows(c.AREA.bomcarditem).length;A++)m.push(JSON.parse(JSON.stringify(t.cardTable.getRowsByIndexs(c.AREA.bomcarditem,A))));e.setState({buffer:m}),console.log(e.state.buffer),e.setState({showGrand:!0,grandStatus:t.cardTable.getStatus(c.AREA.bomcarditem),items:t.cardTable.getRowsByIndexs(c.AREA.bomcarditem,r),headitems:t.form.getAllFormValue(c.AREA.bomcardh)}),e.refs.itemcontent.cardTable.setStatus(c.AREA.bomloss,"edit"),e.refs.itemcontent.cardTable.setStatus(c.AREA.bomwips,"edit"),e.refs.itemcontent.cardTable.setStatus(c.AREA.bompos,"edit"),e.refs.itemcontent.cardTable.setStatus(c.AREA.bomrepls,"edit");break;case"PasteHere":e.setState({copyRowDatas:t.cardTable.getCheckedRows(c.AREA.bomcarditem)},(function(){b.rowCopyPasteUtils.pasteRowsToIndex.call(e,t,c.AREA.bomcarditem,r,[],[],["vrowno","cbom_bid","ts"]),p.RownoUtils.setRowNo(e.props,c.AREA.bomcarditem,"vrowno"),t.button.setButtonVisible(["PasteLineEnd","CancelPaste","PasteHere"],!1),t.button.setButtonVisible(["AddLine","DelLine","CopyLine","ShowGrand","ResetRow","More","InsertLine","DelRow","ShowRowGrand"],!0),t.button.setButtonDisabled(["DelLine","CopyLine"],!0)}))}},this.outputsTableButtonClick=function(t,a,o,s,r){switch(a){case"OutputsMore":"browse"==t.getUrlParam("status")?t.cardTable.toggleRowView(c.AREA.bomcardoutputs,s):t.cardTable.openModel(c.AREA.bomcardoutputs,"edit",s,r);break;case"OutputsInsertLine":t.button.setButtonDisabled(["OutputsResetRow"],!1);var n=t.form.getFormItemsValue(c.AREA.bomcardh,"pk_group").value,l=t.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").value,i=t.form.getFormItemsValue(c.AREA.bomcardh,"pk_org_v").value,d=r+1;t.cardTable.addRow(c.AREA.bomcardoutputs,r),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcardoutputs,d-1,"pk_org",{value:l}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcardoutputs,d-1,"pk_group",{value:n}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcardoutputs,d-1,"pk_org_v",{value:i}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcardoutputs,d-1,"nbyprodsptnum",{value:0}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcardoutputs,d-1,"noutputnum",{value:0}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcardoutputs,d-1,"nastoutputnum",{value:0}),p.RownoUtils.setRowNo(t,c.AREA.bomcardoutputs,"vrowno"),console.log("line1182:OutputsInsertLine-toggle"),_(t),t.button.setButtonDisabled(["OutputsResetRow"],!1);break;case"OutputsDelRow":t.cardTable.delRowsByIndex(c.AREA.bomcardoutputs,r);break;case"OutputsPasteHere":e.setState({copyRowDatas:t.cardTable.getCheckedRows(c.AREA.bomcardoutputs)},(function(){b.rowCopyPasteUtils.pasteRowsToIndex.call(e,t,c.AREA.bomcardoutputs,r,[],[],["vrowno","cbom_outputsid","ts"]),p.RownoUtils.setRowNo(e.props,c.AREA.bomcardoutputs,"vrowno"),t.button.setButtonVisible(["PasteLineEnd","CancelPaste","PasteHere"],!1),t.button.setButtonVisible(["AddLine","DelLine","CopyLine","ShowGrand","ResetRow"],!0),t.button.setButtonDisabled(["OutputsDelLine","OutputsCopyLine"],!0)}))}},this.setDefaultValue=function(){var t=L("context",x);e.props.form.setFormItemsValue(c.AREA.bomcardh,{pk_group:{value:window.parent.GETBUSINESSINFO().groupId,display:window.parent.GETBUSINESSINFO().groupName},pk_org:t.pk_org?{value:t.pk_org,display:t.org_Name}:{},pk_org_v:t.pk_org_v?{value:t.pk_org_v,display:t.org_v_Name}:{},hnassparentnum:{value:1},hnparentnum:{value:1},fbomtype:{value:"1",display:e.state.json["10140BOMM2-000011"]},hfversiontype:{value:"2",display:e.state.json["10140BOMM2-000012"]},fbillstatus:{value:"-1"},hfbomsource:{value:"1"}}),"add"==e.props.getUrlParam("status")&&e.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org")&&e.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").value&&P(e.props,!0)},this.onDelForBrowse=function(){var t=[],a=!1;e.props.form.getFormItemsValue(c.AREA.bomcardh,"hbdefault").value&&(a=!0),t.push({id:e.props.form.getFormItemsValue(c.AREA.bomcardh,"cbomid").value,ts:e.props.form.getFormItemsValue(c.AREA.bomcardh,"ts").value}),a?(0,d.promptBox)({color:"warning",content:e.state.json["10140BOMM2-000006"],beSureBtnClick:function(){(0,d.ajax)({url:c.URL.delete,data:{param:t},success:function(t){if(t.success&&"1"==t.data.sucessNum){var a=e.props.form.getFormItemsValue("bomcard_h","cbomid").value,o=C(a,x);I("cbomid",a,x),e.getDataForCache(o,(function(){(0,d.toast)({color:"success",title:e.state.json["110140BOMM3006"]})}))}else(0,d.toast)({color:"danger",content:t.data.errorMessages[0]})}})}}):(0,d.ajax)({url:c.URL.delete,data:{param:t},success:function(t){if(t.success&&"1"==t.data.sucessNum){var a=e.props.form.getFormItemsValue("bomcard_h","cbomid").value,o=C(a,x);I("cbomid",a,x),e.getDataForCache2(o,(function(){(0,d.toast)({color:"success",title:e.state.json["110140BOMM3006"]})}))}else(0,d.toast)({color:"danger",content:t.data.errorMessages[0]})}})},this.buttonClick=function(t,a){switch(a){case"ApproveDetail":e.setState({billid:t.form.getFormItemsValue(c.AREA.bomcardh,"cbomid").value,approveDetailShow:!0});break;case"WipsMaintain":var o={cbomid:t.form.getFormItemsValue(c.AREA.bomcardh,"cbomid").value};(0,d.ajax)({url:c.URL.queryGrand,data:o,success:function(a){console.log(a),a&&a.data&&(t.cardTable.getAllRows(c.AREA.bomcarditem).forEach((function(e){e.values.cbom_bid.value&&a.data[e.values.cbom_bid.value]&&a.data[e.values.cbom_bid.value].bodys&&(e.bomwips=a.data[e.values.cbom_bid.value].bodys.bomwips,e.bomrepls=a.data[e.values.cbom_bid.value].bodys.bomrepls,e.bompos=a.data[e.values.cbom_bid.value].bodys.bompos,e.bomloss=a.data[e.values.cbom_bid.value].bodys.bomloss)})),e.setState({showGrand:!0,grandStatus:"edit",items:t.cardTable.getAllRows(c.AREA.bomcarditem),headitems:t.form.getAllFormValue(c.AREA.bomcardh),wipsmaintain:!0}),e.refs.itemcontent.cardTable.setStatus(c.AREA.bomloss,"browse"),e.refs.itemcontent.cardTable.setStatus(c.AREA.bomwips,"edit"),e.refs.itemcontent.cardTable.setStatus(c.AREA.bompos,"browse"),e.refs.itemcontent.cardTable.setStatus(c.AREA.bomrepls,"browse"))}});break;case"ShowGrand":if(t.cardTable.getAllRows(c.AREA.bomcarditem).length<=0)return void(0,d.toast)({color:"warning",title:e.state.json["10140BOMM2-000007"]});for(var s=[],r=0;r<t.cardTable.getAllRows(c.AREA.bomcarditem).length;r++)s.push(JSON.parse(JSON.stringify(t.cardTable.getRowsByIndexs(c.AREA.bomcarditem,r))));e.setState({buffer:s}),console.log(e.state.buffer),"add"!=t.form.getFormStatus(c.AREA.bomcardh)?(e.setState({showGrand:!0,grandStatus:t.cardTable.getStatus(c.AREA.bomcarditem),revise:t.getUrlParam("reviseEdit"),items:t.cardTable.getAllRows(c.AREA.bomcarditem),headitems:t.form.getAllFormValue(c.AREA.bomcardh)}),"edit"==t.cardTable.getStatus(c.AREA.bomcarditem)?(e.refs.itemcontent.cardTable.setStatus(c.AREA.bomloss,"edit"),e.refs.itemcontent.cardTable.setStatus(c.AREA.bomwips,"edit"),e.refs.itemcontent.cardTable.setStatus(c.AREA.bompos,"edit"),e.refs.itemcontent.cardTable.setStatus(c.AREA.bomrepls,"edit")):e.refs.itemcontent.cardTable.setTableData(c.AREA.bomcarditem,t.cardTable.getAllRows(c.AREA.bomcarditem))):(t.cardTable.filterEmptyRows(c.AREA.bomcarditem,["cmaterialvid"],"include"),t.cardTable.filterEmptyRows(c.AREA.bomcardoutputs,["cmaterialvid"],"include"),t.cardTable.getAllRows(c.AREA.bomcarditem).length>0&&(e.setState({showGrand:!0,grandStatus:t.cardTable.getStatus(c.AREA.bomcarditem),items:t.cardTable.getAllRows(c.AREA.bomcarditem),headitems:t.form.getAllFormValue(c.AREA.bomcardh)}),e.refs.itemcontent.cardTable.setStatus(c.AREA.bomloss,"edit"),e.refs.itemcontent.cardTable.setStatus(c.AREA.bomwips,"edit"),e.refs.itemcontent.cardTable.setStatus(c.AREA.bompos,"edit"),e.refs.itemcontent.cardTable.setStatus(c.AREA.bomrepls,"edit")));break;case"gylxyzx":(0,d.ajax)({url:c.URL.checkbefore,data:{cbomid:t.form.getFormItemsValue(c.AREA.bomcardh,"cbomid").value},success:function(e){t.openTo("/uapbd/mmbase/datamanage01/main/index.html",{status:"browse",pk_org:t.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").value,pk_org_d:t.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").display,cbomid:t.form.getFormItemsValue(c.AREA.bomcardh,"cbomid").value,appcode:"10140DAMA",pagecode:"10140DAMA_form"})}});break;case"LinkTree":e.props.openTo("/uapbd/mmbase/bom0204/main/index.html",{status:"browse",pk_org:e.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").value,pk_org_d:e.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").display,hcmaterialid:e.props.form.getFormItemsValue(c.AREA.bomcardh,"hcmaterialid").value,hcmaterialid_d:e.props.form.getFormItemsValue(c.AREA.bomcardh,"hcmaterialid").display,hcmaterialvid_d:e.props.form.getFormItemsValue(c.AREA.bomcardh,"hcmaterialvid").display,hcmaterialvid:e.props.form.getFormItemsValue(c.AREA.bomcardh,"hcmaterialvid").value,hversion:e.props.form.getFormItemsValue(c.AREA.bomcardh,"hversion").value,fbomtype:e.props.form.getFormItemsValue(c.AREA.bomcardh,"fbomtype").value,appcode:"10140BOMTM",pagecode:"10140BOMTM_main"});break;case"Add":t.form.EmptyAllFormValue(c.AREA.bomcardh),t.form.setFormItemsDisabled(c.AREA.bomcardh,{hfversiontype:!0}),t.cardTable.setTableData(c.AREA.bomcarditem,{rows:[]}),t.cardTable.setTableData(c.AREA.bomcardoutputs,{rows:[]}),t.cardTable.setTableData(c.AREA.bomcarduseorg,{rows:[]}),t.pushTo("/card",{status:"add"}),e.setDefaultValue(),e.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!1});var n=e.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_group").value,l=e.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").value,i=e.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org_v").value;if(l){t.cardTable.addRow(c.AREA.bomcarditem);var u=e.props.cardTable.getNumberOfRows(c.AREA.bomcarditem);e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,u-1,"pk_org",{value:l}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,u-1,"pk_group",{value:n}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,u-1,"pk_org_v",{value:i}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,u-1,"nassitemnum",{value:1}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,u-1,"nitemnum",{value:1}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,u-1,"ibasenum",{value:"1"}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,u-1,"fitemsource",{value:"1",display:e.state.json["10140BOMM2-000000"]}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,u-1,"fitemtype",{value:"1",display:e.state.json["10140BOMM2-000001"]}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,u-1,"fbackflushtype",{value:"3",display:e.state.json["10140BOMM2-000002"]}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,u-1,"fbackflushtime",{value:"1",display:e.state.json["10140BOMM2-000003"]}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,u-1,"fsupplymode",{value:"1",display:e.state.json["10140BOMM2-000004"]}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,u-1,"fcontrol",{value:"2",display:e.state.json["10140BOMM2-000005"]}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,u-1,"bdeliver",{value:!0}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,u-1,"bbsteploss",{value:!1}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,u-1,"bbunibatch",{value:!1}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,u-1,"bbchkitemforwr",{value:!0}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,u-1,"cendperiod",{value:"2099-12-31 23:59:59"}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,u-1,"cbeginperiod",{value:(0,d.getBusinessInfo)().businessDate.substr(0,10)+" 00:00:00"}),p.RownoUtils.setRowNo(e.props,c.AREA.bomcarditem,"vrowno")}console.log("line1560:Add-toggle"),_(e.props),t.button.setButtonVisible(["InsertLine","PasteLine","OutputsInsertLine","OutputsPasteLine"],!1),t.button.setButtonDisabled(["ResetRow"],!1),t.cardTable.addRow(c.AREA.bomcarduseorg,0,{pk_org:t.form.getFormItemsValue(c.AREA.bomcardh,"pk_org"),pk_org_v:t.form.getFormItemsValue(c.AREA.bomcardh,"pk_org_v"),pk_useorg:t.form.getFormItemsValue(c.AREA.bomcardh,"pk_org"),pk_useorg_v:t.form.getFormItemsValue(c.AREA.bomcardh,"pk_org_v"),"pk_useorg.name":{value:t.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").display}});break;case"Edit":var f=!1;if((0,d.ajax)({url:c.URL.checkpermission,async:!1,data:{id:t.form.getFormItemsValue(c.AREA.bomcardh,"cbomid").value,actioncode:"Edit"},success:function(e){f=!0},error:function(e){(0,d.toast)({color:"danger",content:e.message})}}),!f)return;t.pushTo("/card",{status:"edit",id:t.getUrlParam("id")}),console.log("line1595:Edit-toggle"),_(e.props),t.form.setFormItemsDisabled(c.AREA.bomcardh,{pk_org:!0,hcmaterialid:!0,hcmaterialvid:!0,hversion:!0,hfversiontype:!0}),e.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!1});break;case"ReviseEdit":t.pushTo("/card",{status:"edit",reviseEdit:!0,id:t.getUrlParam("id")}),console.log("line1619:ReviseEdit-toggle"),_(e.props),e.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!1});break;case"Copy":t.form.setFormItemsDisabled(c.AREA.bomcardh,{pk_org:!1}),(0,d.ajax)({url:c.URL.copyAdd,data:{id:t.form.getFormItemsValue(c.AREA.bomcardh,"cbomid").value},success:function(t){setTimeout((function(){t.data.card.head&&(e.props.form.setAllFormValue(v({},c.AREA.bomcardh,t.data.card.head[c.AREA.bomcardh])),console.log("line1640:Copy-toggle"),_(e.props)),t.data.card.bodys?(e.props.cardTable.setTableData(c.AREA.bomcarditem,t.data.card.bodys[c.AREA.bomcarditem]),e.props.cardTable.setTableData(c.AREA.bomcardoutputs,t.data.card.bodys[c.AREA.bomcardoutputs]),e.props.cardTable.setTableData(c.AREA.bomcarduseorg,t.data.card.bodys[c.AREA.bomcarduseorg]),e.props.cardTable.getAllRows(c.AREA.bomcarditem).forEach((function(e){t.data.grand[e.values.vrowno.value].bodys&&(e.bomwips=t.data.grand[e.values.vrowno.value].bodys.bomwips,e.bomrepls=t.data.grand[e.values.vrowno.value].bodys.bomrepls,e.bompos=t.data.grand[e.values.vrowno.value].bodys.bompos,e.bomloss=t.data.grand[e.values.vrowno.value].bodys.bomloss)}))):(e.props.cardTable.setAllTabsData([],tabs),e.setState({tableData:[]}))}),0)}}),t.pushTo("/card",{status:"add",id:t.form.getFormItemsValue(c.AREA.bomcardh,"cbomid").value,copyadd:!0}),console.log("line1681:Copy-toggle"),_(e.props),e.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!1});break;case"Delete":var h=!1;if((0,d.ajax)({url:c.URL.checkpermission,async:!1,data:{id:t.form.getFormItemsValue(c.AREA.bomcardh,"cbomid").value,actioncode:"Delete"},success:function(e){h=!0},error:function(e){(0,d.toast)({color:"danger",content:e.message})}}),!h)return;(0,d.promptBox)({color:"warning",title:e.state.json["110140BOMM3004"],content:e.state.json["110140BOMM3005"],beSureBtnClick:function(){e.onDelForBrowse()}});break;case"Return":var R=!0;null!=e.props.getUrlParam("id")&&(R=!1),t.pushTo("/list",{listRefreshDisable:R});break;case"Save":e.saveClick();break;case"Cancel":(0,d.promptBox)({color:"warning",content:e.state.json["10140BOMM2-000008"],noFooter:!1,noCancelBtn:!1,beSureBtnClick:e.cancelSureEvent.bind(e)});break;case"AddLine":if(!e.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org")||!e.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").value)return void(0,d.toast)({color:"warning",content:e.state.json["110140BOMM3025"]});t.cardTable.addRow(c.AREA.bomcarditem);var g=e.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_group").value,y=e.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").value,E=e.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org_v").value,w=e.props.cardTable.getNumberOfRows(c.AREA.bomcarditem);e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,w-1,"pk_org",{value:y}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,w-1,"pk_group",{value:g}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,w-1,"pk_org_v",{value:E}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,w-1,"nassitemnum",{value:1}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,w-1,"nitemnum",{value:1}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,w-1,"ibasenum",{value:"1"}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,w-1,"fitemsource",{value:"1",display:e.state.json["10140BOMM2-000000"]}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,w-1,"fitemtype",{value:"1",display:e.state.json["10140BOMM2-000001"]}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,w-1,"fbackflushtype",{value:"3",display:e.state.json["10140BOMM2-000002"]}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,w-1,"fbackflushtime",{value:"1",display:e.state.json["10140BOMM2-000003"]}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,w-1,"fsupplymode",{value:"1",display:e.state.json["10140BOMM2-000004"]}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,w-1,"fcontrol",{value:"2",display:e.state.json["10140BOMM2-000005"]}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,w-1,"bdeliver",{value:!0}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,w-1,"bbsteploss",{value:!1}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,w-1,"bbunibatch",{value:!1}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,w-1,"bbchkitemforwr",{value:!0}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,w-1,"cendperiod",{value:"2099-12-31 23:59:59"}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,w-1,"cbeginperiod",{value:(0,d.getBusinessInfo)().businessDate.substr(0,10)+" 00:00:00"}),p.RownoUtils.setRowNo(e.props,c.AREA.bomcarditem,"vrowno"),console.log("line1811:AddLine-toggle"),_(e.props),t.button.setButtonDisabled(["ResetRow"],!1);break;case"OutputsAddLine":if(!e.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org")||!e.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").value)return void(0,d.toast)({color:"warning",content:e.state.json["110140BOMM3025"]});t.cardTable.addRow(c.AREA.bomcardoutputs);var B=e.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_group").value,T=e.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").value,k=e.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org_v").value;console.log(e.props.cardTable.getCurTabKey(),e.props.cardTable.getCurTabKey()==c.AREA.bomcarditem);var C=e.props.cardTable.getNumberOfRows(c.AREA.bomcardoutputs);e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcardoutputs,C-1,"pk_org",{value:T}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcardoutputs,C-1,"pk_group",{value:B}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcardoutputs,C-1,"pk_org_v",{value:k}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcardoutputs,C-1,"nbyprodsptnum",{value:0}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcardoutputs,C-1,"noutputnum",{value:0}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcardoutputs,C-1,"nastoutputnum",{value:0}),p.RownoUtils.setRowNo(e.props,c.AREA.bomcardoutputs,"vrowno"),t.button.setButtonDisabled(["OutputsResetRow"],!1);break;case"OutputsDelLine":var I=t.cardTable.getCheckedRows(c.AREA.bomcardoutputs),L=[];I.forEach((function(e){L.push(e.index)})),t.cardTable.delRowsByIndex(c.AREA.bomcardoutputs,L),e.updateOutputsTableBtnStatus(t);break;case"OutputsCopyLine":t.button.setButtonVisible(["OutputsPasteLineEnd","OutputsCancelPaste","OutputsPasteHere"],!0),t.button.setButtonVisible(["OutputsAddLine","OutputsDelLine","OutputsCopyLine","OutputsResetRow","OutputsMore","OutputsInsertLine","OutputsDelRow"],!1);break;case"OutputsPasteLineEnd":e.setState({copyRowDatas:t.cardTable.getCheckedRows(c.AREA.bomcardoutputs)},(function(){b.rowCopyPasteUtils.pasteRowsToTail.call(e,t,c.AREA.bomcardoutputs,[],[],["vrowno","cbom_outputsid","ts"]),p.RownoUtils.setRowNo(e.props,c.AREA.bomcardoutputs,"vrowno"),t.button.setButtonVisible(["OutputsPasteLineEnd","OutputsCancelPaste","OutputsPasteHere"],!1),t.button.setButtonVisible(["OutputsAddLine","OutputsDelLine","OutputsCopyLine","OutputsResetRow","OutputsMore","OutputsInsertLine","OutputsDelRow"],!0),t.button.setButtonDisabled(["OutputsDelLine","OutputsCopyLine"],!0)}));break;case"OutputsCancelPaste":t.button.setButtonVisible(["OutputsPasteLineEnd","OutputsCancelPaste","OutputsPasteHere"],!1),t.button.setButtonVisible(["OutputsAddLine","OutputsDelLine","OutputsCopyLine","OutputsResetRow","OutputsMore","OutputsInsertLine","OutputsDelRow"],!0);break;case"DelLine":var D=t.cardTable.getCheckedRows(c.AREA.bomcarditem),x=[];D.forEach((function(e){x.push(e.index)})),t.cardTable.delRowsByIndex(c.AREA.bomcarditem,x),e.updateCardTableBtnStatus(t);break;case"Refresh":var V=null;V=t.form.getFormItemsValue(c.AREA.bomcardh,"cbomid")&&t.form.getFormItemsValue(c.AREA.bomcardh,"cbomid").value?t.form.getFormItemsValue(c.AREA.bomcardh,"cbomid").value:e.props.getUrlParam("id"),e.getdata(V,(function(){(0,d.toast)({title:e.state.pubjson["10140PUBMESSAGE-000017"],color:"success"})}));break;case"SaveAdd":e.saveClick(!0);break;case"SaveCommit":e.saveClick(!1,!0);break;case"ResetRow":p.RownoUtils.resetRowNo(e.props,c.AREA.bomcarditem,"vrowno");break;case"CopyLine":t.button.setButtonVisible(["PasteLineEnd","CancelPaste","PasteHere"],!0),t.button.setButtonVisible(["AddLine","DelLine","CopyLine","ShowGrand","ResetRow","More","InsertLine","DelRow","ShowRowGrand"],!1);break;case"CancelPaste":t.button.setButtonVisible(["PasteLineEnd","CancelPaste","PasteHere"],!1),t.button.setButtonVisible(["AddLine","DelLine","CopyLine","ShowGrand","ResetRow","More","InsertLine","DelRow","ShowRowGrand"],!0);break;case"PasteLineEnd":e.setState({copyRowDatas:t.cardTable.getCheckedRows(c.AREA.bomcarditem)},(function(){b.rowCopyPasteUtils.pasteRowsToTail.call(e,t,c.AREA.bomcarditem,[],[],["vrowno","cbom_bid","ts"]),p.RownoUtils.setRowNo(e.props,c.AREA.bomcarditem,"vrowno"),t.button.setButtonVisible(["PasteLineEnd","CancelPaste","PasteHere"],!1),t.button.setButtonVisible(["AddLine","DelLine","CopyLine","ShowGrand","ResetRow","More","InsertLine","DelRow","ShowRowGrand"],!0),t.button.setButtonDisabled(["DelLine","CopyLine"],!0)}));break;case"Commit":e.commit();break;case"UnCommit":var M={pkTsParams:[{pk:e.props.form.getFormItemsValue(c.AREA.bomcardh,"cbomid").value,ts:e.props.form.getFormItemsValue(c.AREA.bomcardh,"ts").value}],pageid:c.PAGECODE.bom_card};(0,d.ajax)({method:"post",url:c.URL.uncommit,data:M,success:function(a){(0,m.showBatchOprMessage)(null,a.data,(0,A.getLangByResId)(e,"10140PUBMESSAGE-000027"));var o=null;o=t.form.getFormItemsValue(c.AREA.bomcardh,"cbomid")&&t.form.getFormItemsValue(c.AREA.bomcardh,"cbomid").value?t.form.getFormItemsValue(c.AREA.bomcardh,"cbomid").value:e.props.getUrlParam("id"),e.getdata(o,(function(){}))}});break;case"Assign":var O=[e.props.form.getFormItemsValue(c.AREA.bomcardh,"cbomid").value];e.assignModal.show(O,!1);break;case"Unassign":var P=[e.props.form.getFormItemsValue(c.AREA.bomcardh,"cbomid").value];e.assignModal.show(P,!0);break;case"Enable":console.log(e.state,"ss");var S={id:e.props.form.getFormItemsValue(c.AREA.bomcardh,"cbomid").value,ts:e.props.form.getFormItemsValue(c.AREA.bomcardh,"ts").value};(0,d.ajax)({url:c.URL.enable,data:{param:[S]},success:function(t){(0,m.showBatchOprMessage)(null,t.data,e.state.pubjson["10140PUBMESSAGE-000031"]),e.props.button.setButtonDisabled({Enable:!0,Disable:!1}),e.props.button.setButtonVisible(["Enable"],!1),e.props.button.setButtonVisible(["Disable"],!0),e.getdata(e.props.form.getFormItemsValue(c.AREA.bomcardh,"cbomid").value)}});break;case"Disable":var j={id:e.props.form.getFormItemsValue(c.AREA.bomcardh,"cbomid").value,ts:e.props.form.getFormItemsValue(c.AREA.bomcardh,"ts").value};(0,d.ajax)({url:c.URL.disable,data:{param:[j]},success:function(t){(0,m.showBatchOprMessage)(null,t.data,e.state.pubjson["10140PUBMESSAGE-000032"]),e.props.button.setButtonDisabled({Enable:!1,Disable:!0}),e.props.button.setButtonVisible(["Enable"],!0),e.props.button.setButtonVisible(["Disable"],!1),e.getdata(e.props.form.getFormItemsValue(c.AREA.bomcardh,"cbomid").value)}});break;case"Default":var K={id:e.props.form.getFormItemsValue(c.AREA.bomcardh,"cbomid").value,ts:e.props.form.getFormItemsValue(c.AREA.bomcardh,"ts").value};(0,d.ajax)({url:c.URL.default,data:K,success:function(t){t.data.oriid?(0,d.promptBox)({color:"warning",content:e.state.json["10140BOMM2-000009"],beSureBtnClick:function(){(0,d.ajax)({url:c.URL.suredefault,data:{curid:t.data.curid,curts:e.props.form.getFormItemsValue(c.AREA.bomcardh,"ts").value,oriid:t.data.oriid},success:function(t){t.data[c.AREA.bomlist]&&(e.props.form.setAllFormValue(v({},c.AREA.bomcardh,t.data[c.AREA.bomlist])),e.props.button.setButtonDisabled({Default:!0,CancelDefault:!1}),e.props.button.setButtonVisible(["Default"],!1),e.props.button.setButtonVisible(["CancelDefault"],!0),(0,d.toast)({color:"success",title:e.state.json["10140BOMM2-000010"]}))}})}}):t.data[c.AREA.bomlist]&&(e.props.form.setAllFormValue(v({},c.AREA.bomcardh,t.data[c.AREA.bomlist])),e.props.button.setButtonDisabled({Default:!0,CancelDefault:!1}),e.props.button.setButtonVisible(["Default"],!1),e.props.button.setButtonVisible(["CancelDefault"],!0),(0,d.toast)({color:"success",title:e.state.json["10140BOMM2-000010"]}))}});break;case"CancelDefault":var U={id:e.props.form.getFormItemsValue(c.AREA.bomcardh,"cbomid").value,ts:e.props.form.getFormItemsValue(c.AREA.bomcardh,"ts").value};(0,d.ajax)({url:c.URL.canceldefault,data:U,success:function(t){t.data[c.AREA.bomlist]&&(e.props.form.setAllFormValue(v({},c.AREA.bomcardh,t.data[c.AREA.bomlist])),e.props.button.setButtonDisabled({Default:!1,CancelDefault:!0}),e.props.button.setButtonVisible(["Default"],!0),e.props.button.setButtonVisible(["CancelDefault"],!1),(0,d.toast)({color:"success",title:e.state.json["10140BOMM2-000010"]}))}});break;case"Print":var N=!1;if((0,d.ajax)({url:c.URL.checkpermission,async:!1,data:{id:e.props.form.getFormItemsValue(c.AREA.bomcardh,"cbomid").value,actioncode:"Edit"},success:function(e){N=!0},error:function(e){(0,d.toast)({color:"danger",content:e.message})}}),!N)return;e.output("print");break;case"Output":var F=e.props.form.getFormItemsValue(c.AREA.bomcardh,"cbomid").value;e.setState({pks:[F]},(function(){e.refs.printOutput.open()}))}},this.pageInfoClick=function(t,a){e.getDataForCache2(a),e.props.setUrlParam(a)},this.getdata=function(t,a){var o={pk:t};(0,d.ajax)({url:c.URL.queryCard,data:o,success:function(t){setTimeout((function(){if(t.data.head&&(e.props.form.setAllFormValue(v({},c.AREA.bomcardh,t.data.head[c.AREA.bomcardh])),console.log("line3057:getData-toggle"),_(e.props),e.props.button.setButtonVisible(["PasteLine","OutputsPasteLine"],!1),L("permorgs",x).includes(t.data.head[c.AREA.bomcardh].rows[0].values.pk_org.value)?(console.log(e.props.getUrlParam("status")),"browse"==e.props.getUrlParam("status")&&(e.props.button.setButtonDisabled(["WipsMaintain"],!0),1==t.data.head[c.AREA.bomcardh].rows[0].values.fbillstatus.value?(e.props.button.setButtonDisabled(["ReviseEdit","Assign","Unassign"],!1),e.props.button.setButtonDisabled(["Edit"],!0),e.props.button.setButtonVisible(["ReviseEdit","Assign","Unassign"],!0),e.props.button.setButtonVisible(["Edit"],!1)):2==t.data.head[c.AREA.bomcardh].rows[0].values.fbillstatus.value?(e.props.button.setButtonDisabled(["ReviseEdit","Edit","Assign","Unassign"],!0),e.props.button.setButtonDisabled("UnCommit",!1),e.props.button.setButtonVisible(["ReviseEdit","Edit","Assign","Unassign"],!1),e.props.button.setButtonVisible("UnCommit",!0)):(e.props.button.setButtonDisabled(["ReviseEdit","Assign"],!0),e.props.button.setButtonDisabled(["Edit","Unassign"],!1),e.props.button.setButtonVisible(["ReviseEdit","Assign"],!1),e.props.button.setButtonVisible(["Edit","Unassign"],!0)),2==t.data.head[c.AREA.bomcardh].rows[0].values.hfversiontype.value?(e.props.button.setButtonDisabled({Enable:!1,Disable:!0}),e.props.button.setButtonVisible(["Enable"],!0),e.props.button.setButtonVisible(["Disable"],!1)):(e.props.button.setButtonDisabled({Enable:!0,Disable:!1}),e.props.button.setButtonVisible(["Enable"],!1),e.props.button.setButtonVisible(["Disable"],!0)),"1"==t.data.head[c.AREA.bomcardh].rows[0].values.fbillstatus.value?"1"==t.data.head[c.AREA.bomcardh].rows[0].values.hfversiontype.value?1==t.data.head[c.AREA.bomcardh].rows[0].values.hbdefault.value?(e.props.button.setButtonDisabled({CancelDefault:!1,Default:!0}),e.props.button.setButtonVisible(["Default"],!1),e.props.button.setButtonVisible(["CancelDefault"],!0)):(e.props.button.setButtonDisabled({CancelDefault:!0,Default:!1}),e.props.button.setButtonVisible(["Default"],!0),e.props.button.setButtonVisible(["CancelDefault"],!1)):(e.props.button.setButtonDisabled(["Default","CancelDefault"],!0),e.props.button.setButtonVisible(["Default","CancelDefault"],!1)):(e.props.button.setButtonDisabled(["Default","CancelDefault","Enable","Disable"],!0),e.props.button.setButtonVisible(["Default","CancelDefault","Enable","Disable"],!1)),"-1"!=t.data.head[c.AREA.bomcardh].rows[0].values.fbillstatus.value?(e.props.button.setButtonDisabled(["Delete"],!0),e.props.button.setButtonVisible(["Delete"],!1)):(e.props.button.setButtonDisabled(["Delete"],!1),e.props.button.setButtonVisible(["Delete"],!0)),"-1"!=t.data.head[c.AREA.bomcardh].rows[0].values.fbillstatus.value?(e.props.button.setButtonDisabled(["Commit"],!0),e.props.button.setButtonDisabled(["UnCommit"],!1),e.props.button.setButtonVisible(["Commit"],!1),e.props.button.setButtonVisible(["UnCommit"],!0)):(e.props.button.setButtonDisabled(["Commit"],!1),e.props.button.setButtonDisabled(["UnCommit"],!0),e.props.button.setButtonVisible(["Commit"],!0),e.props.button.setButtonVisible(["UnCommit"],!1)))):(e.props.button.setButtonDisabled(["Default","CancelDefault","Assign","Unassign","Commit","UnCommit","Enable","Disable","Copy","Edit","ReviseEdit","Delete","gylxyzx"],!0),e.props.button.setButtonVisible(["Default","CancelDefault","Assign","Unassign","Commit","UnCommit","Enable","Disable","Copy","Edit","ReviseEdit","Delete","gylxyzx"],!1),1==t.data.head[c.AREA.bomcardh].rows[0].values.fbillstatus.value?e.props.button.setButtonDisabled(["WipsMaintain"],!1):e.props.button.setButtonDisabled(["WipsMaintain"],!0)),console.log(e.props.button.getButtons()),T("cbomid",t.data.head[c.AREA.bomcardh].rows[0].values.cbomid.value,t.data,c.AREA.bomcardh,x)),t.data.bodys){if(e.props.cardTable.setTableData(c.AREA.bomcarditem,t.data.bodys[c.AREA.bomcarditem]),e.props.cardTable.setTableData(c.AREA.bomcardoutputs,t.data.bodys[c.AREA.bomcardoutputs]?t.data.bodys[c.AREA.bomcardoutputs]:{rows:[]}),e.props.cardTable.setTableData(c.AREA.bomcarduseorg,t.data.bodys[c.AREA.bomcarduseorg]),e.props.getUrlParam("reviseEdit")){e.props.cardTable.setColEditableByKey(c.AREA.bomcarditem,["vrowno","cmaterialvid","cassmeasureid","vchangerate","nassitemnum","ibasenum","vitemversion","vpackversion","nbfixshrinkastnum","ndissipationum","fcontrol","bcanreplace","freplacetype","cbeginperiod","cendperiod","bcustommaterial","bprojectmaterial","ccustomerid","cvendorid","cproductorid","cprojectid"])}var a={cbomid:e.props.form.getFormItemsValue(c.AREA.bomcardh,"cbomid").value};(0,d.ajax)({url:c.URL.queryGrand,data:a,loading:!1,success:function(t){console.log(t),t&&t.data&&(e.props.cardTable.getAllRows(c.AREA.bomcarditem).forEach((function(e){t.data[e.values.cbom_bid.value]&&t.data[e.values.cbom_bid.value].bodys&&(e.bomwips=t.data[e.values.cbom_bid.value].bodys.bomwips,e.bomrepls=t.data[e.values.cbom_bid.value].bodys.bomrepls,e.bompos=t.data[e.values.cbom_bid.value].bodys.bompos,e.bomloss=t.data[e.values.cbom_bid.value].bodys.bomloss)})),D("lastGrand",x,(0,h.default)(t.data)))}})}else e.props.cardTable.setAllTabsData([],tabs),e.setState({tableData:[]})}),0),a&&"function"==typeof a&&a.call(e)}})},this.onCardOutputsBeforeEvent=function(e,t,a,o,s,r,n){var l=!0;if(a instanceof Object)switch(a.key){case"cmaterialvid":e.cardTable.setQueryCondition(c.AREA.bomcardoutputs,{cmaterialvid:function(){return{isShowVerison:!0,pk_org:e.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").value,GridRefActionExt:"nccloud.web.mmbd.bom0202.filter.body.CmaterialvidFilter"}}});break;case"castunitid":e.cardTable.setQueryCondition(c.AREA.bomcardoutputs,{castunitid:function(){return{isShowVerison:!0,cmaterialvid:e.cardTable.getValByKeyAndIndex(c.AREA.bomcardoutputs,o,"cmaterialvid").value,GridRefActionExt:"nccloud.web.mmbd.bom0202.filter.body.AstMeasureFilter"}}});break;case"vchangerate":var i={key:a,cmaterialvid:e.cardTable.getValByKeyAndIndex(c.AREA.bomcardoutputs,s,"cmaterialvid").value,cmeasureid:e.cardTable.getValByKeyAndIndex(c.AREA.bomcardoutputs,s,"cunitid").value,cassmeasureid:e.cardTable.getValByKeyAndIndex(c.AREA.bomcardoutputs,s,"castunitid").value,model:{}};i.model.rows=e.cardTable.getRowsByIndexs(c.AREA.bomcardoutputs,s),(0,d.ajax)({url:c.URL.beforeBodyEdit,async:!1,data:i,success:function(e){l=e[a]}})}else switch(a){case"cmaterialvid":e.cardTable.setQueryCondition(c.AREA.bomcardoutputs,{cmaterialvid:function(){return{isShowVerison:!0,pk_org:e.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").value,GridRefActionExt:"nccloud.web.mmbd.bom0202.filter.body.CmaterialvidFilter"}}});break;case"castunitid":e.cardTable.setQueryCondition(c.AREA.bomcardoutputs,{castunitid:function(){return{isShowVerison:!0,cmaterialvid:e.cardTable.getValByKeyAndIndex(c.AREA.bomcardoutputs,s,"cmaterialvid").value,GridRefActionExt:"nccloud.web.mmbd.bom0202.filter.body.AstMeasureFilter"}}});break;case"vchangerate":var u={key:a,cmaterialvid:e.cardTable.getValByKeyAndIndex(c.AREA.bomcardoutputs,s,"cmaterialvid").value,cmeasureid:e.cardTable.getValByKeyAndIndex(c.AREA.bomcardoutputs,s,"cunitid").value,cassmeasureid:e.cardTable.getValByKeyAndIndex(c.AREA.bomcardoutputs,s,"castunitid").value,model:{}};u.model.rows=e.cardTable.getRowsByIndexs(c.AREA.bomcardoutputs,s),(0,d.ajax)({url:c.URL.beforeBodyEdit,async:!1,data:u,success:function(e){l=e[a]}})}return l},this.onCardItemBeforeEvent=function(e,t,a,o,s,r,n){var l=!0;if(a instanceof Object)switch(a.key){case"cmaterialvid":e.cardTable.setQueryCondition(c.AREA.bomcarditem,{cmaterialvid:function(){return{isShowVerison:!0,pk_org:e.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").value,GridRefActionExt:"nccloud.web.mmbd.bom0202.filter.body.CmaterialvidFilter"}}});break;case"cassmeasureid":e.meta.getMeta()[c.AREA.bomcarditem].items.find((function(e){return"cassmeasureid"==e.attrcode})).queryCondition=function(){return{isShowVerison:!0,cmaterialvid:e.cardTable.getValByKeyAndIndex(c.AREA.bomcarditem,o,"cmaterialvid").value,GridRefActionExt:"nccloud.web.mmbd.bom0202.filter.body.AstMeasureFilter"}};break;case"vchangerate":var i={key:a.key,cmaterialvid:e.cardTable.getValByKeyAndIndex(c.AREA.bomcarditem,o,"cmaterialvid").value,cmeasureid:e.cardTable.getValByKeyAndIndex(c.AREA.bomcarditem,o,"cmeasureid").value,cassmeasureid:e.cardTable.getValByKeyAndIndex(c.AREA.bomcarditem,o,"cassmeasureid").value,model:{}};i.model.rows=e.cardTable.getRowsByIndexs(c.AREA.bomcarditem,o),(0,d.ajax)({url:c.URL.beforeBodyEdit,async:!1,data:i,success:function(e){l=e[a.key]}});break;case"fbackflushtime":1==e.cardTable.getValByKeyAndIndex(c.AREA.bomcarditem,o,"fbackflushtype").value&&(l=!1);break;case"bkitmaterial":2==e.cardTable.getValByKeyAndIndex(c.AREA.bomcarditem,o,"fsupplymode").value&&(l=!1);break;case"fitemsource":l=1==e.cardTable.getValByKeyAndIndex(c.AREA.bomcarditem,o,"fitemtype").value;break;case"ccustomerid":l=!e.cardTable.getValByKeyAndIndex(c.AREA.bomcarditem,o,"bcustommaterial").value;break;case"cprojectid":l=!e.cardTable.getValByKeyAndIndex(c.AREA.bomcarditem,o,"bprojectmaterial").value;break;case"bmainmaterial":2==e.form.getFormItemsValue(c.AREA.bomcardh,"fbomtype").value&&(l=!1);break;case"vitemversion":e.meta.getMeta()[c.AREA.bomcarditem].items.find((function(e){return"vitemversion"==e.attrcode})).queryCondition=function(){return{pk_group:e.form.getFormItemsValue(c.AREA.bomcardh,"pk_group").value,pk_org:e.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").value,hcmaterialid:e.cardTable.getValByKeyAndIndex(c.AREA.bomcarditem,o,"cmaterialid").value,hcmaterialvid:e.cardTable.getValByKeyAndIndex(c.AREA.bomcarditem,o,"cmaterialvid").value,fbomtype:"1"}};break;case"vpackversion":e.meta.getMeta()[c.AREA.bomcarditem].items.find((function(e){return"vpackversion"==e.attrcode})).queryCondition=function(){return{pk_group:e.form.getFormItemsValue(c.AREA.bomcardh,"pk_group").value,pk_org:e.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").value,hcmaterialid:e.cardTable.getValByKeyAndIndex(c.AREA.bomcarditem,o,"cmaterialid").value,hcmaterialvid:e.cardTable.getValByKeyAndIndex(c.AREA.bomcarditem,o,"cmaterialvid").value,fbomtype:"2"}};break;case"bbsteploss":case"bupint":case"nbfixshrinknum":case"ndissipationum":case"ileadtimenum":case"nbfixshrinkastnum":var u={key:a.key,pk_org:e.cardTable.getValByKeyAndIndex(c.AREA.bomcarditem,o,"pk_org").value,cmaterialoid:e.cardTable.getValByKeyAndIndex(c.AREA.bomcarditem,o,"cmaterialid").value,cmaterialvid:e.cardTable.getValByKeyAndIndex(c.AREA.bomcarditem,o,"cmaterialvid").value,model:{}};u.model.rows=e.cardTable.getRowsByIndexs(c.AREA.bomcarditem,o),(0,d.ajax)({url:c.URL.beforeBodyEdit,async:!1,data:u,success:function(e){l=e.data[a.key]}})}else switch(a){case"cmaterialvid":e.cardTable.setQueryCondition(c.AREA.bomcarditem,{cmaterialvid:function(){return{isShowVerison:!0,pk_org:e.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").value,GridRefActionExt:"nccloud.web.mmbd.bom0202.filter.body.CmaterialvidFilter"}}});break;case"cassmeasureid":e.meta.getMeta()[c.AREA.bomcarditem].items.find((function(e){return"cassmeasureid"==e.attrcode})).queryCondition=function(){return{isShowVerison:!0,cmaterialvid:e.cardTable.getValByKeyAndIndex(c.AREA.bomcarditem,s,"cmaterialvid").value,GridRefActionExt:"nccloud.web.mmbd.bom0202.filter.body.AstMeasureFilter"}};break;case"vchangerate":var p={key:a,cmaterialvid:e.cardTable.getValByKeyAndIndex(c.AREA.bomcarditem,s,"cmaterialvid").value,cmeasureid:e.cardTable.getValByKeyAndIndex(c.AREA.bomcarditem,s,"cmeasureid").value,cassmeasureid:e.cardTable.getValByKeyAndIndex(c.AREA.bomcarditem,s,"cassmeasureid").value,model:{}};p.model.rows=e.cardTable.getRowsByIndexs(c.AREA.bomcarditem,s),(0,d.ajax)({url:c.URL.beforeBodyEdit,async:!1,data:p,success:function(e){l=e[a]}});break;case"fbackflushtime":1==e.cardTable.getValByKeyAndIndex(c.AREA.bomcarditem,s,"fbackflushtype").value&&(l=!1);break;case"bkitmaterial":2==e.cardTable.getValByKeyAndIndex(c.AREA.bomcarditem,s,"fsupplymode").value&&(l=!1);break;case"fitemsource":l=1==e.cardTable.getValByKeyAndIndex(c.AREA.bomcarditem,s,"fitemtype").value;break;case"ccustomerid":l=!e.cardTable.getValByKeyAndIndex(c.AREA.bomcarditem,s,"bcustommaterial").value;break;case"cprojectid":l=!e.cardTable.getValByKeyAndIndex(c.AREA.bomcarditem,s,"bprojectmaterial").value;break;case"bmainmaterial":2==e.form.getFormItemsValue(c.AREA.bomcardh,"fbomtype").value&&(l=!1);break;case"vitemversion":e.meta.getMeta()[c.AREA.bomcarditem].items.find((function(e){return"vitemversion"==e.attrcode})).queryCondition=function(){return{pk_group:e.form.getFormItemsValue(c.AREA.bomcardh,"pk_group").value,pk_org:e.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").value,hcmaterialid:e.cardTable.getValByKeyAndIndex(c.AREA.bomcarditem,s,"cmaterialid").value,hcmaterialvid:e.cardTable.getValByKeyAndIndex(c.AREA.bomcarditem,s,"cmaterialvid").value,fbomtype:"1"}};break;case"vpackversion":e.meta.getMeta()[c.AREA.bomcarditem].items.find((function(e){return"vpackversion"==e.attrcode})).queryCondition=function(){return{pk_group:e.form.getFormItemsValue(c.AREA.bomcardh,"pk_group").value,pk_org:e.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").value,hcmaterialid:e.cardTable.getValByKeyAndIndex(c.AREA.bomcarditem,s,"cmaterialid").value,hcmaterialvid:e.cardTable.getValByKeyAndIndex(c.AREA.bomcarditem,s,"cmaterialvid").value,fbomtype:"2"}};break;case"bbsteploss":case"bupint":case"nbfixshrinknum":case"ndissipationum":case"ileadtimenum":case"nbfixshrinkastnum":var b={key:a,pk_org:e.cardTable.getValByKeyAndIndex(c.AREA.bomcarditem,s,"pk_org").value,cmaterialoid:e.cardTable.getValByKeyAndIndex(c.AREA.bomcarditem,s,"cmaterialid").value,cmaterialvid:e.cardTable.getValByKeyAndIndex(c.AREA.bomcarditem,s,"cmaterialvid").value,model:{}};b.model.rows=e.cardTable.getRowsByIndexs(c.AREA.bomcarditem,s),(0,d.ajax)({url:c.URL.beforeBodyEdit,async:!1,data:b,success:function(e){l=e.data[a]}});break;case"vfree1":case"vfree2":case"vfree3":case"vfree4":case"vfree5":case"vfree6":case"vfree7":case"vfree8":case"vfree9":case"vfree10":case"cprojectid":case"cvendorid":case"cproductorid":case"ccustomerid":var m={key:a,pk_org:e.cardTable.getValByKeyAndIndex(c.AREA.bomcarditem,s,"pk_org").value,prefix:"vfree",cmaterialvid:e.cardTable.getValByKeyAndIndex(c.AREA.bomcarditem,s,"cmaterialvid").value,model:{}};m.model.rows=e.cardTable.getRowsByIndexs(c.AREA.bomcarditem,s),(0,d.ajax)({url:c.URL.beforeBodyEdit,async:!1,data:m,success:function(e){l=e.data[a]}})}return l},this.commit=function(){var t={pkTsParams:[{pk:e.props.form.getFormItemsValue(c.AREA.bomcardh,"cbomid").value,ts:e.props.form.getFormItemsValue(c.AREA.bomcardh,"ts").value}],pageid:c.PAGECODE.bom_card};(0,d.ajax)({url:c.URL.commit,data:t,success:function(t){if(t.data&&t.data.workflow&&("approveflow"==t.data.workflow||"workflow"==t.data.workflow))return e.commitInfo={index:index,record:record},void e.setState({compositedata:t.data,compositedisplay:!0});if(t.success){(0,m.showBatchOprMessage)(null,t.data,(0,A.getLangByResId)(e,"10140PUBMESSAGE-000025"));var a=null;a=e.props.form.getFormItemsValue(c.AREA.bomcardh,"cbomid")&&e.props.form.getFormItemsValue(c.AREA.bomcardh,"cbomid").value?e.props.form.getFormItemsValue(c.AREA.bomcardh,"cbomid").value:e.props.getUrlParam("id"),e.getdata(a,(function(){}))}}})},this.filterEmpty=function(e,t){var a=[];return"wips"==t&&e.forEach((function(e){e.values.cwipid.value&&a.push(e)})),"loss"==t&&e.forEach((function(e){Number.isInteger(Number.parseInt(e.values.nlfromnum.value))&&Number.parseInt(e.values.nlfromnum.value)>=0&&a.push(e)})),"repls"==t&&e.forEach((function(e){e.values.creplmaterialvid.value&&a.push(e)})),"pos"==t&&e.forEach((function(e){e.values.vposition.value&&a.push(e)})),a},this.sureSaveClick=function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.props.cardTable.filterEmptyRows(c.AREA.bomcarditem,["cmaterialvid"],"include"),e.props.cardTable.filterEmptyRows(c.AREA.bomcardoutputs,["cmaterialvid"],"include");var s=t.bodys[c.AREA.bomcarditem].rows;s.forEach((function(t){if(t.bomwips){var a={pageid:c.PAGECODE.bom_grand,model:{areaType:"table",pageinfo:null,rows:[],areacode:c.AREA.bomwips}};a.model.rows=e.filterEmpty(t.bomwips.rows,"wips"),t.values.bomwips={value:JSON.stringify(a)}}if(t.bomloss){var o={pageid:c.PAGECODE.bom_grand,model:{areaType:"table",pageinfo:null,rows:[],areacode:c.AREA.bomloss}};o.model.rows=e.filterEmpty(t.bomloss.rows,"loss"),t.values.bomloss={value:JSON.stringify(o)}}if(t.bomrepls){var s={pageid:c.PAGECODE.bom_grand,model:{areaType:"table",pageinfo:null,rows:[],areacode:c.AREA.bomrepls}};s.model.rows=e.filterEmpty(t.bomrepls.rows,"repls"),t.values.bomrepls={value:JSON.stringify(s)}}if(t.bompos){var r={pageid:c.PAGECODE.bom_grand,model:{areaType:"table",pageinfo:null,rows:[],areacode:c.AREA.bompos}};r.model.rows=e.filterEmpty(t.bompos.rows,"pos"),t.values.bompos={value:JSON.stringify(r)}}}));var r=c.URL.insert;"edit"===e.props.getUrlParam("status")&&(r=c.URL.update),(0,d.ajax)({url:r,data:t,success:function(t){var s=null;if(t.success){if(t.data&&!a&&(t.data.head&&(s=t.data.head[c.AREA.bomcardh].rows[0].values.cbomid.value),setTimeout((function(){if(t.data.head&&(e.props.form.setAllFormValue(v({},c.AREA.bomcardh,t.data.head[c.AREA.bomcardh])),s=t.data.head[c.AREA.bomcardh].rows[0].values.cbomid.value,console.log("line24468:sureSaveClick-toggle"),_(e.props),e.props.button.setButtonVisible(["PasteLine","OutputsPasteLine"],!1),L("permorgs",x).includes(t.data.head[c.AREA.bomcardh].rows[0].values.pk_org.value)?(e.props.button.setButtonDisabled(["WipsMaintain"],!0),1==t.data.head[c.AREA.bomcardh].rows[0].values.fbillstatus.value?(e.props.button.setButtonDisabled(["ReviseEdit","Assign","Unassign"],!1),e.props.button.setButtonDisabled(["Edit","Commit","UnCommit"],!0),e.props.button.setButtonVisible(["ReviseEdit","Assign","Unassign"],!0),e.props.button.setButtonVisible(["Edit","Commit","UnCommit"],!1)):2==t.data.head[c.AREA.bomcardh].rows[0].values.fbillstatus.value?(e.props.button.setButtonDisabled(["Commit","ReviseEdit","Edit","Assign","Unassign"],!0),e.props.button.setButtonDisabled("UnCommit",!1),e.props.button.setButtonVisible(["Commit","ReviseEdit","Edit","Assign","Unassign"],!1),e.props.button.setButtonVisible("UnCommit",!0)):(e.props.button.setButtonDisabled(["ReviseEdit","UnCommit","Assign"],!0),e.props.button.setButtonDisabled(["Edit","Unassign"],!1),e.props.button.setButtonVisible(["ReviseEdit","UnCommit","Assign"],!1),e.props.button.setButtonVisible(["Edit","Unassign"],!0)),2==t.data.head[c.AREA.bomcardh].rows[0].values.hfversiontype.value?(e.props.button.setButtonDisabled({Enable:!1,Disable:!0}),e.props.button.setButtonVisible(["Enable"],!0),e.props.button.setButtonVisible(["Disable"],!1)):(e.props.button.setButtonDisabled({Enable:!0,Disable:!1}),e.props.button.setButtonVisible(["Enable"],!1),e.props.button.setButtonVisible(["Disable"],!0)),"1"==t.data.head[c.AREA.bomcardh].rows[0].values.fbillstatus.value?"1"==t.data.head[c.AREA.bomcardh].rows[0].values.hfversiontype.value?1==t.data.head[c.AREA.bomcardh].rows[0].values.hbdefault.value?(e.props.button.setButtonDisabled({CancelDefault:!1,Default:!0}),e.props.button.setButtonVisible(["CancelDefault"],!0),e.props.button.setButtonVisible(["Default"],!1)):(e.props.button.setButtonDisabled({CancelDefault:!0,Default:!1}),e.props.button.setButtonVisible(["Default"],!0),e.props.button.setButtonVisible(["CancelDefault"],!1)):(e.props.button.setButtonDisabled(["Default","CancelDefault"],!0),e.props.button.setButtonVisible(["Default","CancelDefault"],!1)):(e.props.button.setButtonDisabled(["Default","CancelDefault","Enable","Disable"],!0),e.props.button.setButtonVisible(["Default","CancelDefault","Enable","Disable"],!1))):(e.props.button.setButtonDisabled(["Default","CancelDefault","Assign","Unassign","Commit","UnCommit","Enable","Disable","Copy","Edit","ReviseEdit","Delete","gylxyzx"],!0),e.props.button.setButtonVisible(["Default","CancelDefault","Assign","Unassign","Commit","UnCommit","Enable","Disable","Copy","Edit","ReviseEdit","Delete","gylxyzx"],!1),1==t.data.head[c.AREA.bomcardh].rows[0].values.fbillstatus.value?e.props.button.setButtonDisabled(["WipsMaintain"],!1):e.props.button.setButtonDisabled(["WipsMaintain"],!0))),t.data.bodys){e.props.cardTable.setTableData(c.AREA.bomcarditem,t.data.bodys[c.AREA.bomcarditem]),e.props.cardTable.setTableData(c.AREA.bomcardoutputs,t.data.bodys[c.AREA.bomcardoutputs]?t.data.bodys[c.AREA.bomcardoutputs]:{rows:[]}),e.props.cardTable.setTableData(c.AREA.bomcarduseorg,t.data.bodys[c.AREA.bomcarduseorg]);var a={cbomid:t.data.head[c.AREA.bomcardh].rows[0].values.cbomid.value};(0,d.ajax)({url:c.URL.queryGrand,data:a,loading:!1,success:function(t){console.log(t),t&&t.data&&e.props.cardTable.getAllRows(c.AREA.bomcarditem).forEach((function(e){t.data[e.values.cbom_bid.value]&&t.data[e.values.cbom_bid.value].bodys&&(e.bomwips=t.data[e.values.cbom_bid.value].bodys.bomwips,e.bomrepls=t.data[e.values.cbom_bid.value].bodys.bomrepls,e.bompos=t.data[e.values.cbom_bid.value].bodys.bompos,e.bomloss=t.data[e.values.cbom_bid.value].bodys.bomloss)}))}})}else e.props.cardTable.setAllTabsData([],tabs),e.setState({tableData:[]})}),0)),a){var n=e.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org"),l=e.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org_v");e.props.form.EmptyAllFormValue(c.AREA.bomcardh),e.props.cardTable.setTableData(c.AREA.bomcarditem,{rows:[]}),e.props.cardTable.setTableData(c.AREA.bomcardoutputs,{rows:[]}),e.setDefaultValue(),e.props.form.setFormItemsValue(c.AREA.bomcardh,{pk_org:n,pk_org_v:l}),e.props.form.setFormItemsDisabled(c.AREA.bomcardh,{pk_org:!1}),e.props.button.setButtonVisible("SaveCommit",!0),e.props.cardTable.addRow(c.AREA.bomcarditem);var i=e.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_group").value,u=e.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").value,b=e.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org_v").value,m=e.props.cardTable.getNumberOfRows(c.AREA.bomcarditem);if(e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,m-1,"pk_org",{value:u}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,m-1,"pk_group",{value:i}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,m-1,"pk_org_v",{value:b}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,m-1,"nassitemnum",{value:1}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,m-1,"nitemnum",{value:1}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,m-1,"ibasenum",{value:"1"}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,m-1,"fitemsource",{value:"1",display:e.state.json["10140BOMM2-000000"]}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,m-1,"fitemtype",{value:"1",display:e.state.json["10140BOMM2-000001"]}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,m-1,"fbackflushtype",{value:"3",display:e.state.json["10140BOMM2-000002"]}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,m-1,"fbackflushtime",{value:"1",display:e.state.json["10140BOMM2-000003"]}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,m-1,"fsupplymode",{value:"1",display:e.state.json["10140BOMM2-000004"]}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,m-1,"fcontrol",{value:"2",display:e.state.json["10140BOMM2-000005"]}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,m-1,"bdeliver",{value:!0}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,m-1,"bbsteploss",{value:!1}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,m-1,"bbunibatch",{value:!1}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,m-1,"bbchkitemforwr",{value:!0}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,m-1,"cendperiod",{value:"2099-12-31 23:59:59"}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,m-1,"cbeginperiod",{value:(0,d.getBusinessInfo)().businessDate.substr(0,10)+" 00:00:00"}),p.RownoUtils.setRowNo(e.props,c.AREA.bomcarditem,"vrowno"),e.props.button.setButtonDisabled(["ResetRow"],!1),e.props.pushTo("/card",{status:"add",id:s}),console.log("line4847:sureSaveClick-toggle"),_(e.props),e.props.getUrlParam("reviseEdit")){e.props.cardTable.setColEditableByKey(c.AREA.bomcarditem,["vrowno","cmaterialvid","cassmeasureid","vchangerate","nassitemnum","ibasenum","vitemversion","vpackversion","nbfixshrinkastnum","ndissipationum","fcontrol","bcanreplace","freplacetype","cbeginperiod","cendperiod","bcustommaterial","bprojectmaterial","ccustomerid","cvendorid","cproductorid","cprojectid"])}e.props.pushTo("/card",{status:"add",id:s}),console.log("line4881:sureSaveClick-toggle"),_(e.props)}else e.props.pushTo("/card",{status:"browse",id:s}),_(e.props),L("permorgs",x).includes(t.data.head[c.AREA.bomcardh].rows[0].values.pk_org.value)?(e.props.button.setButtonDisabled(["WipsMaintain"],!0),1==t.data.head[c.AREA.bomcardh].rows[0].values.fbillstatus.value?(e.props.button.setButtonDisabled(["ReviseEdit","Assign","Unassign"],!1),e.props.button.setButtonDisabled(["Edit"],!0),e.props.button.setButtonVisible(["ReviseEdit","Assign","Unassign"],!0),e.props.button.setButtonVisible(["Edit"],!1)):2==t.data.head[c.AREA.bomcardh].rows[0].values.fbillstatus.value?(e.props.button.setButtonDisabled(["ReviseEdit","Edit","Assign","Unassign"],!0),e.props.button.setButtonDisabled("UnCommit",!1),e.props.button.setButtonVisible(["ReviseEdit","Edit","Assign","Unassign"],!1),e.props.button.setButtonVisible("UnCommit",!0)):(e.props.button.setButtonDisabled(["ReviseEdit","Assign"],!0),e.props.button.setButtonDisabled(["Edit","Unassign"],!1),e.props.button.setButtonVisible(["ReviseEdit","Assign"],!1),e.props.button.setButtonVisible(["Edit","Unassign"],!0)),2==t.data.head[c.AREA.bomcardh].rows[0].values.hfversiontype.value?(e.props.button.setButtonDisabled({Enable:!1,Disable:!0}),e.props.button.setButtonVisible(["Disable"],!1),e.props.button.setButtonVisible(["Enable"],!0)):(e.props.button.setButtonDisabled({Enable:!0,Disable:!1}),e.props.button.setButtonVisible(["Disable"],!0),e.props.button.setButtonVisible(["Enable"],!1)),"1"==t.data.head[c.AREA.bomcardh].rows[0].values.fbillstatus.value?"1"==t.data.head[c.AREA.bomcardh].rows[0].values.hfversiontype.value?1==t.data.head[c.AREA.bomcardh].rows[0].values.hbdefault.value?(e.props.button.setButtonDisabled({CancelDefault:!1,Default:!0}),e.props.button.setButtonVisible(["Default"],!1),e.props.button.setButtonVisible(["CancelDefault"],!0)):(e.props.button.setButtonDisabled({CancelDefault:!0,Default:!1}),e.props.button.setButtonVisible(["Default"],!0),e.props.button.setButtonVisible(["CancelDefault"],!1)):(e.props.button.setButtonDisabled(["Default","CancelDefault"],!0),e.props.button.setButtonVisible(["Default","CancelDefault"],!1)):(e.props.button.setButtonDisabled(["Default","CancelDefault","Enable","Disable"],!0),e.props.button.setButtonVisible(["Default","CancelDefault","Enable","Disable"],!1)),"-1"!=t.data.head[c.AREA.bomcardh].rows[0].values.fbillstatus.value?(e.props.button.setButtonDisabled(["Delete"],!0),e.props.button.setButtonVisible(["Delete"],!1)):(e.props.button.setButtonDisabled(["Delete"],!1),e.props.button.setButtonVisible(["Delete"],!0)),"-1"!=t.data.head[c.AREA.bomcardh].rows[0].values.fbillstatus.value?(e.props.button.setButtonDisabled(["Commit"],!0),e.props.button.setButtonDisabled(["UnCommit"],!1),e.props.button.setButtonVisible(["Commit"],!1),e.props.button.setButtonVisible(["UnCommit"],!0)):(e.props.button.setButtonDisabled(["Commit"],!1),e.props.button.setButtonDisabled(["UnCommit"],!0),e.props.button.setButtonVisible(["Commit"],!0),e.props.button.setButtonVisible(["UnCommit"],!1))):(e.props.button.setButtonDisabled(["Default","CancelDefault","Assign","Unassign","Commit","UnCommit","Enable","Disable","Copy","Edit","ReviseEdit","Delete","gylxyzx"],!0),e.props.button.setButtonVisible(["Default","CancelDefault","Assign","Unassign","Commit","UnCommit","Enable","Disable","Copy","Edit","ReviseEdit","Delete","gylxyzx"],!1),1==t.data.head[c.AREA.bomcardh].rows[0].values.fbillstatus.value?e.props.button.setButtonDisabled(["WipsMaintain"],!1):e.props.button.setButtonDisabled(["WipsMaintain"],!0)),e.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!0});if(r==c.URL.insert?w(s,t.data,c.AREA.bomcardh,x):T("cbomid",t.data.head[c.AREA.bomcardh].rows[0].values.cbomid.value,t.data,c.AREA.bomcardh,x),(0,d.toast)({content:e.state.json["110140PST0037"],color:"success"}),o){var A={pkTsParams:[{pk:t.data.head[c.AREA.bomcardh].rows[0].values.cbomid.value,ts:t.data.head[c.AREA.bomcardh].rows[0].values.ts.value}],pageid:c.PAGECODE.bom_list};(0,d.ajax)({url:c.URL.commit,data:A,success:function(t){if(t.success&&1==t.data.sucessNum&&t.data.sucessVOs){(0,d.toast)({color:"success",content:e.state.pubjson["10140PUBMESSAGE-000024"]});var a=null;a=e.props.form.getFormItemsValue(c.AREA.bomcardh,"cbomid")&&e.props.form.getFormItemsValue(c.AREA.bomcardh,"cbomid").value?e.props.form.getFormItemsValue(c.AREA.bomcardh,"cbomid").value:e.props.getUrlParam("id"),e.getdata(a,(function(){}))}}})}}}})},this.saveClick=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.props.form.isCheckNow(c.AREA.bomcardh,"warning"))if(e.props.cardTable.filterEmptyRows(c.AREA.bomcarditem,["cmaterialvid"],"include"),e.props.cardTable.filterEmptyRows(c.AREA.bomcardoutputs,["cmaterialvid"],"include"),2==e.props.form.getFormItemsValue(c.AREA.bomcardh,"fbomtype").value&&e.props.cardTable.getAllRows(c.AREA.bomcardoutputs).length>0)(0,d.promptBox)({color:"warning",content:e.state.json["110140BOMM4002"],beSureBtnClick:function(){"edit"===e.props.getUrlParam("status")?e.props.cardTable.getAllRows(c.AREA.bomcardoutputs).forEach((function(e){e.status=3})):e.props.cardTable.setTableData(c.AREA.bomcardoutputs,{rows:[]});var o=e.props.createExtCardData(c.PAGECODE.bom_card,c.AREA.bomcardh,[c.AREA.bomcarditem,c.AREA.bomcardoutputs,c.AREA.bomcarduseorg]);delete o.head[c.AREA.bomcardh].rows[0].values.pk_taxregions,console.log({CardData:o}),0==o.head[c.AREA.bomcardh].rows[0].values.hbdefault.value?e.sureSaveClick(o,t,a):(0,d.ajax)({url:c.URL.checkdefaultversion,data:o,success:function(s){s.data&&("false"==s.data.hasDefaultVersion?e.sureSaveClick(o,t,a):(0,d.promptBox)({color:"warning",content:e.state.json["10140BOMM2-000009"],beSureBtnClick:function(){console.log("beSureBtnClick"),e.sureSaveClick(o,t,a)}}))}})}});else{var o=e.props.createExtCardData(c.PAGECODE.bom_card,c.AREA.bomcardh,[c.AREA.bomcarditem,c.AREA.bomcardoutputs,c.AREA.bomcarduseorg]);delete o.head[c.AREA.bomcardh].rows[0].values.pk_taxregions,console.log({CardData:o});var s=o.head[c.AREA.bomcardh].rows[0].values.hbdefault;0==s.value?e.sureSaveClick(o,t,a):(0,d.ajax)({url:c.URL.checkdefaultversion,data:o,success:function(s){s.data&&("false"==s.data.hasDefaultVersion?e.sureSaveClick(o,t,a):(0,d.promptBox)({color:"warning",content:e.state.json["10140BOMM2-000009"],beSureBtnClick:function(){console.log("beSureBtnClick"),e.sureSaveClick(o,t,a)}}))}})}},this.delConfirm=function(){(0,d.ajax)({url:"/nccloud/mmbd/psg/delete.do",data:{id:e.props.getUrlParam("id"),ts:e.props.form.getFormItemsValue(c.AREA.bomcardh,"ts").value},success:function(t){if(t){var a=e.props.getUrlParam("id"),o=C(a,x);I("cbomid",a,x),e.getDataForCache(o,(function(){(0,d.toast)({color:"success",title:e.state.json["110140PST0033"]})}))}}})},this.modelSave=function(t){t.cardTable.closeModel(e.tableId),e.saveClick()},this.getButtonNames=function(e){return"edit"===e||"add"===e||"save"===e?"main-button":"secondary - button"},this.onTabChange=function(t){"add"!=e.props.getUrlParam("status")&&"edit"!=e.props.getUrlParam("status")||(t==c.AREA.bomcarditem?e.props.button.setButtonVisible(["AddLine","DelLine","ShowGrand"],!0):t==c.AREA.bomcardoutputs?(e.props.button.setButtonVisible(["ShowGrand"],!1),e.props.button.setButtonVisible(["AddLine","DelLine"],!0)):e.props.button.setButtonVisible(["AddLine","DelLine","ShowGrand"],!1))},this.modalAddRow=function(t){var a=t.form.getFormItemsValue(c.AREA.bomcardh,"pk_group").value,o=t.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").value,s=t.form.getFormItemsValue(c.AREA.bomcardh,"pk_org_v").value,r=t.cardTable.getNumberOfRows(c.AREA.bomcarditem);t.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"pk_org",{value:o}),t.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"pk_group",{value:a}),t.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"pk_org_v",{value:s}),t.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"nassitemnum",{value:1}),t.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"nitemnum",{value:1}),t.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"ibasenum",{value:"1"}),t.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"fitemsource",{value:"1",display:e.state.json["10140BOMM2-000000"]}),t.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"fitemtype",{value:"1",display:e.state.json["10140BOMM2-000001"]}),t.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"fbackflushtype",{value:"3",display:e.state.json["10140BOMM2-000002"]}),t.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"fbackflushtime",{value:"1",display:e.state.json["10140BOMM2-000003"]}),t.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"fsupplymode",{value:"1",display:e.state.json["10140BOMM2-000004"]}),t.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"fcontrol",{value:"2",display:e.state.json["10140BOMM2-000005"]}),t.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"bdeliver",{value:!0}),t.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"bbsteploss",{value:!1}),t.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"bbunibatch",{value:!1}),t.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"bbchkitemforwr",{value:!0}),t.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"cendperiod",{value:"2099-12-31 23:59:59"}),t.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"cbeginperiod",{value:(0,d.getBusinessInfo)().businessDate.substr(0,10)+" 00:00:00"}),p.RownoUtils.setRowNo(t,c.AREA.bomcarditem,"vrowno"),console.log("line5290:modalAddRow-toggle"),_(t),t.button.setButtonDisabled(["ResetRow"],!1)},this.outputsModalAddRow=function(t){var a=e.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_group").value,o=e.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").value,s=e.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org_v").value,r=e.props.cardTable.getNumberOfRows(c.AREA.bomcardoutputs);e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcardoutputs,r-1,"pk_org",{value:o}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcardoutputs,r-1,"pk_group",{value:a}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcardoutputs,r-1,"pk_org_v",{value:s}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcardoutputs,r-1,"nbyprodsptnum",{value:0}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcardoutputs,r-1,"noutputnum",{value:0}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcardoutputs,r-1,"nastoutputnum",{value:0}),p.RownoUtils.setRowNo(e.props,c.AREA.bomcardoutputs,"vrowno"),t.button.setButtonDisabled(["OutputsResetRow"],!1)},this.addRowEvent=function(){p.RownoUtils.setRowNo(e.props,e.props.cardTable.getCurTabKey(),"vrowno");var t=e.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_group").value,a=e.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org").value,o=e.props.form.getFormItemsValue(c.AREA.bomcardh,"pk_org_v").value;if(e.props.cardTable.getCurTabKey()==c.AREA.bomcarditem){var s=e.props.cardTable.getNumberOfRows(c.AREA.bomcarditem);e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,s-1,"pk_org",{value:a}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,s-1,"pk_group",{value:t}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,s-1,"pk_org_v",{value:o}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,s-1,"nassitemnum",{value:1})}else if(e.props.cardTable.getCurTabKey()==c.AREA.bomcardoutputs){var r=e.props.cardTable.getNumberOfRows(c.AREA.bomcardoutputs);e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"pk_org",{value:a}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"pk_group",{value:t}),e.props.cardTable.setValByKeyAndIndex(c.AREA.bomcarditem,r-1,"pk_org_v",{value:o})}},this.getTableHead=function(){var t=e.props.button.createButtonApp;e.props.button.getButtons(),e.props.getUrlParam("status");return i.default.createElement("div",{className:"shoulder-definition-area"},i.default.createElement("div",{className:"definition-icons",style:{padding:"0px"}}," ",t({area:"body-action",onButtonClick:e.buttonClick.bind(e)})," ",e.props.cardTable.createBrowseIcons(c.AREA.bomcarditem,{iconArr:["close","open","max","setCol"],maxDestAREAId:"nc-bill-card"})," ")," ")},this.getOutputsTableHead=function(){var t=e.props.button.createButtonApp;e.props.button.getButtons(),e.props.getUrlParam("status");return i.default.createElement("div",{className:"shoulder-definition-area"},i.default.createElement("div",{className:"definition-icons",style:{padding:"0px"}}," ",t({area:"outputs-action",onButtonClick:e.buttonClick.bind(e)})," ",e.props.cardTable.createBrowseIcons(c.AREA.bomcardoutputs,{iconArr:["close","open","max","setCol"],maxDestAREAId:"nc-bill-card"})," ")," ")},this.output=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=e.props.form.getFormItemsValue(c.AREA.bomcardh,"cbomid").value;""!=t&&(0,d.print)("pdf",c.URL.print,{funcode:"10140BOMM",nodekey:"bommprint",oids:[a],outputType:t})},this.closeApprove=function(){e.setState({approveDetailShow:!1})}},o);S=(0,d.createPage)({initTemplate:[],billinfo:{billtype:"extcard",pagecode:"10140BOMM_card",headcode:c.AREA.bomcardh,bodycode:[c.AREA.bomcarditem,c.AREA.bomcardoutputs,c.AREA.bomcarduseorg]}})(S),t.default=S},175:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,s,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},n=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),l=a(2),i=m(l),d=(m(a(3)),a(1)),c=a(176),u=m(a(157)),p=a(8),b=(a(178),m(a(179)));function m(e){return e&&e.__esModule?e:{default:e}}d.base.NCPopconfirm,d.base.NCCheckbox,d.base.NCIcon,d.base.NCTabs.NCTabPane;var A=d.high.PrintOutput,f=d.high.ApproveDetail,h=d.cardCache.getDefData,R=d.cardCache.setDefData,v="mmbd.bom.bom0202.data",g="10140BOMM_list",y="bomwh_query",E="bomwh_head",w="/nccloud/mmbd/psg/print.do",B=(o=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.call(a),a.searchId=y,a.tableId=E,a.selectedRowRecord=null,a.searchVal=null,a.state={json:{},inlt:null,pks:[],billid:"",approveDetailShow:!1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"modifierMeta",value:function(e,t){var a=this;return t[y].items.forEach((function(t){switch(t.attrcode){case"useorgs.pk_useorg":t.queryCondition=function(){return{GridRefActionExt:"nccloud.web.mmbd.refer.pub.AppPermissionOrgRefFilter"}};break;case"hcmaterialid":t.isHasDisabledData=!0,t.isShowDisabledData=!0,t.queryCondition=function(){return{pk_org:e.search.getSearchValByField(y,"useorgs.pk_useorg").value.firstvalue,GridRefActionExt:"nccloud.web.mmbd.refer.query.MaterialQueryFilter"}};break;case"hcmaterialvid":t.fieldDisplayed="refcode",t.queryCondition=function(){return{pk_org:e.search.getSearchValByField(y,"useorgs.pk_useorg").value.firstvalue,materialoid:e.search.getSearchValByField(y,"hcmaterialid").value.firstvalue,GridRefActionExt:"nccloud.web.mmbd.refer.pub.MaterialvidRefFilter"}};break;case"hfbomsource":t.options.length>2&&t.options.splice(2,1);break;case"bomitems.vitemversion":t.queryCondition=function(){var t={pk_group:window.parent.GETBUSINESSINFO().groupId,pk_org:e.search.getSearchValByField(y,"useorgs.pk_useorg").value.firstvalue,fbomtype:1};return e.search.getSearchValByField(y,"bomitems.cmaterialid").value&&e.search.getSearchValByField(y,"bomitems.cmaterialid").value.firstvalue&&(t.hcmaterialid=e.search.getSearchValByField(y,"bomitems.cmaterialid").value.firstvalue),e.search.getSearchValByField(y,"bomitems.cmaterialvid").value&&e.search.getSearchValByField(y,"bomitems.cmaterialvid").value.firstvalue&&(t.hcmaterialvid=e.search.getSearchValByField(y,"bomitems.cmaterialvid").value.firstvalue),t};break;case"bomitems.vpackversion":t.queryCondition=function(){var t={pk_group:window.parent.GETBUSINESSINFO().groupId,pk_org:e.search.getSearchValByField(y,"useorgs.pk_useorg").value.firstvalue,fbomtype:2};return e.search.getSearchValByField(y,"bomitems.cmaterialid").value&&e.search.getSearchValByField(y,"bomitems.cmaterialid").value.firstvalue&&(t.hcmaterialid=e.search.getSearchValByField(y,"bomitems.cmaterialid").value.firstvalue),e.search.getSearchValByField(y,"bomitems.cmaterialvid").value&&e.search.getSearchValByField(y,"bomitems.cmaterialvid").value.firstvalue&&(t.hcmaterialvid=e.search.getSearchValByField(y,"bomitems.cmaterialvid").value.firstvalue),t};break;case"bomitems.cvendorid":case"bomitems.cprojectid":case"bomitems.cproductorid":case"bomitems.ccustomerid":t.queryCondition=function(){return{pk_org:e.search.getSearchValByField(y,"useorgs.pk_useorg").value.firstvalue}}}})),t[E].pagination=!0,t[E].items.push({attrcode:"opr",label:this.state.json?this.state.json["110140BOMM3002"]:"110140BOMM3002",width:220,fixed:"right",className:"table-opr",visible:!0,render:function(t,o,s){var r=[];return h("permorgs",v).includes(o.pk_org.value)&&1==o.fbillstatus.value&&r.push("Revise"),h("permorgs",v).includes(o.pk_org.value)&&-1==o.fbillstatus.value&&(r.push("EditLine"),r.push("DelLine")),h("permorgs",v).includes(o.pk_org.value)&&r.push("CopyLine"),e.button.createOprationButton(r,{area:"list-inner",buttonLimit:4,onButtonClick:function(e,r){a.onTableButtonClick.bind(a)(e,r,t,o,s)}})}}),t}},{key:"componentDidMount",value:function(){var e=this;this.props.MultiInit.getMultiLang({moduleId:"10140BOMM",domainName:"uapbd",callback:function(t,a,o){a&&e.setState({json:t,inlt:o},(function(){e.initTemplate(e.props)}))}});this.props.MultiInit.getMultiLang({moduleId:"10140MMPUBMSG",domainName:"uapbd",callback:function(t,a,o){a&&e.setState({pubjson:r({},t)})}}),!h("searchParam",v)||this.props.search.setSearchValue(y,h("searchParam",v)),this.setBtnStatus(),this.getPermissionOrgs()}},{key:"getPermissionOrgs",value:function(){(0,d.ajax)({url:"/nccloud/mmbd/pub/getpermorgs.do",data:{},success:function(e){R("permorgs",v,e.data.orgs)}})}},{key:"setBtnStatus",value:function(){var e=this.props.table.getCheckedRows(p.AREA.bomlist);e.length>0?(this.props.button.setButtonDisabled(["Delete","Copy","Enable","Disable","Assign","Unassign","Commit","UnCommit","Print","Assistfunction","gylxyzxjc","Output","BatchEdit"],!1),1==e.length?h("permorgs",v).includes(e[0].data.values.pk_org.value)&&("1"==e[0].data.values.fbillstatus.value?("1"==e[0].data.values.hfversiontype.value&&"1"==e[0].data.values.fbillstatus.value&&0==e[0].data.values.hbdefault.value&&(this.props.button.setButtonDisabled(["CancelDefault"],!0),this.props.button.setButtonDisabled(["Default"],!1)),"1"==e[0].data.values.hfversiontype.value&&"1"==e[0].data.values.fbillstatus.value&&1==e[0].data.values.hbdefault.value&&(this.props.button.setButtonDisabled(["CancelDefault"],!1),this.props.button.setButtonDisabled(["Default"],!0))):this.props.button.setButtonDisabled(["Default","CancelDefault"],!0),"1"==e[0].data.values.fbillstatus.value?(this.props.button.setButtonDisabled(["Commit","UnCommit","BatchEdit"],!0),this.props.button.setButtonDisabled(["Assign","Unassign"],!1)):"2"==e[0].data.values.fbillstatus.value?(this.props.button.setButtonDisabled({Commit:!0,UnCommit:!1,BatchEdit:!0}),this.props.button.setButtonDisabled({Assign:!0,Unassign:!0})):(this.props.button.setButtonDisabled(["BatchEdit"],!1),this.props.button.setButtonDisabled(["UnCommit","Assign"],!0)),"1"==e[0].data.values.fbillstatus.value?2==e[0].data.values.hfversiontype.value?this.props.button.setButtonDisabled({Enable:!1,Disable:!0}):this.props.button.setButtonDisabled({Enable:!0,Disable:!1}):this.props.button.setButtonDisabled({Enable:!0,Disable:!0}),"-1"!=e[0].data.values.fbillstatus.value&&this.props.button.setButtonDisabled(["UnCommit"],!1),this.props.button.setButtonDisabled(["LinkTree"],!1)):this.props.button.setButtonDisabled(["Default","CancelDefault","Assistfunction","gylxyzxjc","LinkTree"],!0)):this.props.button.setButtonDisabled(["Delete","Copy","Enable","Disable","Default","CancelDefault","Assign","Unassign","Commit","UnCommit","Assistfunction","gylxyzxjc","Print","Output","LinkTree","BatchEdit"],!0)}},{key:"output",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.props.table.getAllTableData(E),a=[];t.rows.forEach((function(e){a.push(e.values.cbomid.value)})),""!=e&&(0,d.print)("pdf",w,{funcode:"10140PSG",nodekey:"10140PSG",oids:a,outputType:e})}},{key:"getData",value:function(e,t){var a=this,o=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments[3]),s=this.props.search.getQueryInfo("bomwh_query");console.log(s,"qryinf");var n=this.props.table.getTablePageInfo(this.tableId),l=s.oid;if(s&&s.querycondition&&s.querycondition.conditions){s.querycondition.conditions.push({field:"hfbomcategory",value:{firstvalue:"1",secondvalue:""},oprtype:"=",datatype:"203",isIncludeSub:!1}),s.querycondition.conditions.push({field:"hbcustomized",value:{firstvalue:!1,secondvalue:""},oprtype:"=",datatype:"32",isIncludeSub:!1});var i=r({},s,{pageInfo:n,pagecode:g,queryAreaCode:y,oid:l,queryType:"simple"});(0,d.ajax)({url:"/nccloud/mmbd/bom0202/queryList.do",data:i,success:function(e){if(e.data){var t=[];e.data[E].allpks.forEach((function(e){t.push(e)})),e.data[E].allpks=t,d.cacheTools.set("allpks",t),a.props.table.setAllTableData(E,e.data[E]);var s=a.state.inlt,r=t.length;(0,d.toast)({title:"",content:s.get("110140BOMM4001",{count:r}),color:"success"}),o&&o()}else{a.props.table.setAllTableData(E,{allpks:[],rows:[]}),(0,d.toast)({content:a.state.json?a.state.json["110140BOMM3007"]:"110140BOMM3007",color:"warning"})}a.props.table.selectAllRows(p.AREA.bomlist,!1),a.setBtnStatus()}})}}},{key:"afterSearchEvent",value:function(e,t){if(console.log(e,t),"useorgs.pk_useorg"===e){var a=this.props.meta.getMeta()[y].items;if(t.length>1||0==t.length){var o=!0,s=!1,r=void 0;try{for(var n,l=a[Symbol.iterator]();!(o=(n=l.next()).done);o=!0){var i=n.value;"hcmaterialid"!=i.attrcode&&"hcmaterialvid"!=i.attrcode&&"bomitems.cvendorid"!=i.attrcode&&"bomitems.ccustomerid"!=i.attrcode&&"bomitems.cproductorid"!=i.attrcode&&"bomitems.cprojectid"!=i.attrcode||(i.isShowUnit=!0)}}catch(e){s=!0,r=e}finally{try{!o&&l.return&&l.return()}finally{if(s)throw r}}}else{var d=!0,c=!1,u=void 0;try{for(var p,b=a[Symbol.iterator]();!(d=(p=b.next()).done);d=!0){var m=p.value;"hcmaterialid"!=m.attrcode&&"hcmaterialvid"!=m.attrcode&&"bomitems.cvendorid"!=m.attrcode&&"bomitems.ccustomerid"!=m.attrcode&&"bomitems.cproductorid"!=m.attrcode&&"bomitems.cprojectid"!=m.attrcode||(m.isShowUnit=!1)}}catch(e){c=!0,u=e}finally{try{!d&&b.return&&b.return()}finally{if(c)throw u}}}}"hbcustomized"==e&&this.props.search.setSearchValByField(y,"hbcustomized",{value:"false"}),"hcmaterialid"==e&&t.length>0&&this.props.search.setSearchValByField(y,"hcmaterialvid",{value:"",display:""}),"hcmaterialvid"==e&&t.values&&(console.log(this.props.search.getAllSearchData(y)),this.props.search.setSearchValue(y,[{field:"hcmaterialvid",value:{firstvalue:t.refpk,secondvalue:""},display:t.refcode,oprtype:"="}]))}},{key:"render",value:function(){var e=this,t=this.props,a=t.table,o=t.button,s=t.search,n=(t.base,t.modal),l=this.props.button.getButtons();l=l.sort((function(e,t){return t.btnorder-e.btnorder}));var d=a.createSimpleTable,m=s.NCCreateSearch,h=(n.createModal,o.createButtonApp);o.getButtons;return i.default.createElement("div",{className:"nc-bill-list"},i.default.createElement("div",{className:"nc-bill-header-area"},i.default.createElement("div",{className:"header-title-search-area"},i.default.createElement("h2",{className:"title-search-detail"},this.state.json?this.state.json["110140BOMM3001"]:"110140BOMM3001")),i.default.createElement("div",{className:"header-button-area"},h({area:"header",buttonLimit:3,onButtonClick:c.buttonClicks.bind(this),popContainer:document.querySelector(".header-button-area")}))),i.default.createElement("div",{className:"nc-bill-search-area"},m(this.searchId,{clickSearchBtn:this.clickSearchBtn.bind(this),onAfterEvent:this.afterSearchEvent.bind(this)})),i.default.createElement("div",{className:"nc-bill-table-area"},d(this.tableId,{dataSource:v,pkname:"cbomid",tableModelConfirm:this.tableModelConfirm,showIndex:!1,showCheck:!0,handlePageInfoChange:this.pageInfoClick.bind(this),onRowDoubleClick:this.doubleClick.bind(this),onSelected:this.setBtnStatus.bind(this),onSelectedAll:this.setBtnStatus.bind(this)})),i.default.createElement(A,{ref:"printOutput",url:p.URL.print,data:{funcode:"10140BOMM",nodekey:"bommprint",oids:this.state.pks,outputType:"output"}}),i.default.createElement(u.default,r({ref:function(t){return e.assignModal=t}},this.props)),i.default.createElement(b.default,r({ref:function(t){return e.batcheditModal=t}},this.props)),i.default.createElement(f,{show:this.state.approveDetailShow,close:this.closeApprove.bind(this),billtype:"19B1",billid:this.state.billid}))}}]),t}(l.Component),s=function(){var e=this;this.initTemplate=function(t){var a=t.createUIDom({pagecode:g,appcode:"10140BOMM"},(function(a){if(a){if(a.template){var o=a.template;o=e.modifierMeta(t,o),t.meta.setMeta(o),!h("searchParam",v)||e.props.search.setSearchValue(y,h("searchParam",v))}if(a.button){var s=a.button;t.button.setButtons(s)}a.context&&R("context",v,a.context)}}));console.log(a);var o=t.getUrlParam("crtids");"string"==typeof o&&(o=[o]),o&&o.length>0&&((0,d.ajax)({url:"/nccloud/mmbd/bom0202/queryRt.do",data:{crtids:o},success:function(t){if(t.data){var a=[];t.data[E].allpks.forEach((function(e){a.push(e)})),t.data[E].allpks=a,d.cacheTools.set("allpks",a),e.props.table.setAllTableData(E,t.data[E]);var o=e.state.inlt,s=a.length;if(t.data.userjson)JSON.parse(t.data.userjson).hidden?(0,d.toast)({title:"",content:"用户无BOM使用组织权限，部分结果未显示。"}):(0,d.toast)({title:"",content:o.get("110140BOMM4001",{count:s}),color:"success"});else(0,d.toast)({title:"",content:o.get("110140BOMM4001",{count:s}),color:"success"})}else{e.props.table.setAllTableData(E,{allpks:[],rows:[]}),(0,d.toast)({content:e.state.json?e.state.json["110140BOMM3007"]:"110140BOMM3007",color:"warning"})}e.props.table.selectAllRows(p.AREA.bomlist,!1),e.setBtnStatus()}}),e.props.button.setButtonDisabled({Refresh:!1}))},this.onTableButtonClick=function(t,a,o,s,r){if("Revise"===a&&(t.table.selectAllRows(p.AREA.bomlist,!1),t.pushTo("/card",{status:"edit",reviseEdit:!0,id:s.cbomid.value})),"EditLine"===a){var n=!1;if((0,d.ajax)({url:p.URL.checkpermission,async:!1,data:{id:s.cbomid.value,actioncode:"Edit"},success:function(e){n=!0},error:function(e){(0,d.toast)({color:"danger",content:e.message})}}),!n)return;e.props.table.selectAllRows(p.AREA.bomlist,!1),t.pushTo("/card",{status:"edit",id:s.cbomid.value})}if("DelLine"===a){var l=!1;if((0,d.ajax)({url:p.URL.checkpermission,async:!1,data:{id:s.cbomid.value,actioncode:"Edit"},success:function(e){l=!0},error:function(e){(0,d.toast)({color:"danger",content:e.message})}}),!l)return;var i=s.cbomid.value;1==s.hbdefault.value&&!0,(0,d.promptBox)({color:"warning",content:e.state.json["10140BOMM2-000006"],beSureBtnClick:function(){(0,d.ajax)({url:"/nccloud/mmbd/bom0202/delete.do",data:{param:[{id:i,ts:s.ts.value}]},success:function(a){a.success&&"1"==a.data.sucessNum?((0,d.toast)({color:"success",content:e.state.json["110140BOMM3006"]}),(0,t.table.deleteCacheId)(E,i),t.table.deleteTableRowsByIndex(E,r)):(0,d.toast)({color:"danger",content:a.data.errorMessages[0]})}})}})}"CopyLine"===a&&(t.table.selectAllRows(p.AREA.bomlist,!1),t.pushTo("/card",{status:"add",id:s.cbomid.value,copyadd:!0}))},this.closeApprove=function(){e.setState({approveDetailShow:!1})},this.doubleClick=function(t,a,o,s){var r=e.props.search.getAllSearchData(y);d.cacheTools.set("searchParams",r),e.props.table.selectAllRows(p.AREA.bomlist,!1),e.props.pushTo("/card",{status:"browse",id:t.cbomid.value,appcode:"10140BOMM"})},this.deleteAction=function(t){var a={id:e.selectedRowRecord.cbomid.value,ts:e.selectedRowRecord.ts.value};(0,d.ajax)({url:"/nccloud/mmbd/psg/delete.do",data:a,success:function(a){(0,d.toast)({color:"success",title:e.state.json["10140TAXRE-000019"]}),e.refreshAction(t)}})},this.refreshAction=function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.getData({},e.state.isShowOff,!1,(function(){a&&(0,d.toast)({title:e.state.json["10140TAXRE-000013"],color:"success"})}))},this.pageInfoClick=function(e,t,a){var o=e.table.getTablePageInfo(p.AREA.bomlist);if(0==a.length)for(var s=d.cacheTools.get("allpks"),r=Number(o.pageIndex),n=Number(o.pageSize),l=(r-1)*n,i=l;i<l+n&&s[i];i++)a.push(s[i]);var c={pageInfo:o,pagepks:a};(0,d.ajax)({url:"/nccloud/mmbd/bom0202/queryPage.do",data:c,success:function(t){var a=t.success,o=t.data;a&&(o?e.table.setAllTableData(E,o[E]):e.table.setAllTableData(E,{rows:[]}))}})},this.clickSearchBtn=function(t,a){console.log(a),a&&a.conditions&&a.conditions.push({field:"hfbomcategory",value:{firstvalue:"1",secondvalue:""},oprtype:"=",datatype:"203",isIncludeSub:!1}),e.searchVal=a,d.cacheTools.set("searchParams",a),e.getData(a,e.state.isShowOff,!0,(function(){e.props.button.setButtonDisabled({Refresh:!1})}))}},o);B=(0,d.createPage)({initTemplate:[]})(B),t.default=B},176:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buttonClicks=void 0;var o,s=a(177),r=(o=s)&&o.__esModule?o:{default:o};t.buttonClicks=r.default},177:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=this,i=void 0,d=void 0;switch(t){case"Add":var c=e.search.getAllSearchData(n.AREA.bomquery);o.cacheTools.set("searchParams",c),e.table.selectAllRows(n.AREA.bomlist,!1),e.pushTo("/card",{status:"add"});break;case"Edit":var u=!1;if((0,o.ajax)({url:n.URL.checkpermission,async:!1,data:{id:this.props.table.getCheckedRows(n.AREA.bomlist)[0].data.values.cbomid.value,actioncode:"Edit"},success:function(e){u=!0},error:function(e){(0,o.toast)({color:"danger",content:e.message})}}),!u)return;var p;if(p=e.search.getAllSearchData(n.AREA.bomquery),o.cacheTools.set("searchParams",p),1!=this.props.table.getCheckedRows(n.AREA.bomlist).length)return void(0,o.toast)({content:this.state.json["110140BOMM3010"],color:"warning"});e.table.selectAllRows(n.AREA.bomlist,!1),e.pushTo("/card",{status:"edit",id:this.props.table.getCheckedRows(n.AREA.bomlist)[0].data.values.cbomid.value});break;case"ReviseEdit":var b;b=e.search.getAllSearchData(n.AREA.bomquery),o.cacheTools.set("searchParams",b),e.table.selectAllRows(n.AREA.bomlist,!1),e.pushTo("/card",{status:"edit",reviseEdit:!0,id:this.props.table.getCheckedRows(n.AREA.bomlist)[0].data.values.cbomid.value});break;case"Delete":var m=!1;if((0,o.ajax)({url:n.URL.checkpermission,async:!1,data:{id:this.props.table.getCheckedRows(n.AREA.bomlist)[0].data.values.cbomid.value,actioncode:"Edit"},success:function(e){m=!0},error:function(e){(0,o.toast)({color:"danger",content:e.message})}}),!m)return;(0,o.promptBox)({color:"warning",title:this.state.json["110140BOMM3004"],content:this.state.json["110140BOMM3005"],beSureBtnClick:function(){!function(){var t=a.props.table.getCheckedRows(n.AREA.bomlist),r=[],l=!1;t.length>0?t.forEach((function(e){1==e.data.values.hbdefault.value&&(l=!0),r.push({id:e.data.values.cbomid.value,ts:e.data.values.ts.value})})):a.selectedRowRecord&&(1==selectedRowRecord.hbdefault.value&&(l=!0),r.push({id:a.selectedRowRecord.cbomid.value,ts:a.selectedRowRecord.ts.value})),l?(0,o.promptBox)({color:"warning",content:a.state.json["10140BOMM2-000006"],beSureBtnClick:function(){(0,o.ajax)({url:n.URL.delete,data:{param:r},success:function(t){(0,s.showBatchOprMessage)(null,t.data,a.state.pubjson["10140PUBMESSAGE-000028"]);var o=e.table.deleteCacheId,r=a.props.table.getCheckedRows(n.AREA.bomlist);r.length>0&&r.forEach((function(t){o(n.AREA.bomlist,t.data.values.cbomid.value),e.table.deleteTableRowsByRowId(n.AREA.bomlist,t.data.rowId)}))}})}}):(0,o.ajax)({url:n.URL.delete,data:{param:r},success:function(t){(0,s.showBatchOprMessage)(null,t.data,a.state.pubjson["10140PUBMESSAGE-000028"]);var o=e.table.deleteCacheId,r=a.props.table.getCheckedRows(n.AREA.bomlist);r.length>0&&r.forEach((function(t){o(n.AREA.bomlist,t.data.values.cbomid.value),e.table.deleteTableRowsByRowId(n.AREA.bomlist,t.data.rowId)}))}})}()}});break;case"Commit":var A=[],f=[],h=e.table.getCheckedRows(n.AREA.bomlist);if(h.length<=0)return void(0,o.toast)({color:"warning",content:(0,r.getLangByResId)(this,"10140PUBMESSAGE-000026")});h.map((function(e){var t={pk:e.data.values.cbomid.value,ts:e.data.values.ts.value};A.push(t),f.push(e.index)}));var R={pkTsParams:A,pageid:n.PAGECODE.bom_list};(0,o.ajax)({url:n.URL.commit,data:R,success:function(t){if(t.data&&t.data.workflow&&("approveflow"==t.data.workflow||"workflow"==t.data.workflow))return a.commitInfo={index:index,record:record},void a.setState({compositedata:t.data,compositedisplay:!0});if(t.success){(0,s.showBatchOprMessage)(null,t.data,(0,r.getLangByResId)(a,"10140PUBMESSAGE-000025"));var l=a.props.table.getTablePageInfo(n.AREA.bomlist),i=[];a.props.table.getAllTableData(n.AREA.bomlist).rows.forEach((function(e){i.push(e.values.cbomid.value)}));var d={pageInfo:l,pagepks:i};(0,o.ajax)({url:"/nccloud/mmbd/bom0202/queryPage.do",data:d,success:function(t){var a=t.success,o=t.data;a&&(o?e.table.setAllTableData(n.AREA.bomlist,o[n.AREA.bomlist]):e.table.setAllTableData(n.AREA.bomlist,{rows:[]}),e.button.setButtonDisabled(["Delete","Copy","Enable","Disable","Default","CancelDefault","Assign","Unassign","Commit","UnCommit","Assistfunction","gylxyzxjc","Print","Output","LinkTree"],!0))}})}}});break;case"Enable":var v=this.props.table.getCheckedRows(n.AREA.bomlist),g=[];v.length>0?v.forEach((function(e){g.push({id:e.data.values.cbomid.value,ts:e.data.values.ts.value})})):this.selectedRowRecord&&g.push({id:this.selectedRowRecord.cbomid.value,ts:this.selectedRowRecord.ts.value}),(0,o.ajax)({url:n.URL.enable,data:{param:g},success:function(e){(0,s.showBatchOprMessage)(null,e.data,a.state.pubjson["10140PUBMESSAGE-000028"]),a.getData({},a.state.isShowOff,!1)}});break;case"Disable":var y=this.props.table.getCheckedRows(n.AREA.bomlist),E=[];y.length>0?y.forEach((function(e){E.push({id:e.data.values.cbomid.value,ts:e.data.values.ts.value})})):this.selectedRowRecord&&E.push({id:this.selectedRowRecord.cbomid.value,ts:this.selectedRowRecord.ts.value}),(0,o.ajax)({url:n.URL.disable,data:{param:E},success:function(e){(0,s.showBatchOprMessage)(null,e.data,a.state.pubjson["10140PUBMESSAGE-000028"]),a.getData({},a.state.isShowOff,!1)}});break;case"UnCommit":if(0==(i=e.table.getCheckedRows(n.AREA.bomlist)).length){(0,o.toast)({content:(0,r.getLangByResId)(this,"110140BOMM3011"),color:"warning"});break}i.map((function(e){return e.index}));var w={};w.pageid=n.PAGECODE.head,w.pkTsParams=i.map((function(e){return{pk:e.data.values.cbomid.value,ts:e.data.values.ts.value}})),(0,o.ajax)({method:"post",url:n.URL.uncommit,data:w,success:function(t){(0,s.showBatchOprMessage)(null,t.data,(0,r.getLangByResId)(a,"10140PUBMESSAGE-000027"));var l=a.props.table.getTablePageInfo(n.AREA.bomlist),i=[];a.props.table.getAllTableData(n.AREA.bomlist).rows.forEach((function(e){i.push(e.values.cbomid.value)}));var d={pageInfo:l,pagepks:i};(0,o.ajax)({url:"/nccloud/mmbd/bom0202/queryPage.do",data:d,success:function(t){var a=t.success,o=t.data;a&&(o?e.table.setAllTableData(n.AREA.bomlist,o[n.AREA.bomlist]):e.table.setAllTableData(n.AREA.bomlist,{rows:[]}),e.button.setButtonDisabled(["Delete","Copy","Enable","Disable","Default","CancelDefault","Assign","Unassign","Commit","UnCommit","Assistfunction","gylxyzxjc","Print","Output","LinkTree"],!0))}})}});break;case"Default":var B=this.props.table.getCheckedRows(n.AREA.bomlist),T={};B.length>0&&B.forEach((function(e){T={id:e.data.values.cbomid.value,ts:e.data.values.ts.value,rowId:e.data.rowId}})),(0,o.ajax)({url:"/nccloud/mmbd/bom0202/default.do",data:T,success:function(e){if(e.data.oriid)(0,o.promptBox)({color:"warning",content:a.state.json["10140BOMM2-000009"],beSureBtnClick:function(){(0,o.ajax)({url:"/nccloud/mmbd/bom0202/suredefault.do",data:{curid:e.data.curid,oriid:e.data.oriid},success:function(e){e.data[n.AREA.bomlist]&&((0,o.toast)({color:"success",title:a.state.json["10140BOMM2-000010"]}),a.getData({},a.state.isShowOff,!1))}})}});else if(e.data[n.AREA.bomlist]){e.data[n.AREA.bomlist].rows.forEach((function(e){e.values.cbomid.value==T.id&&(e.rowId=T.rowId)})),a.props.table.updateTableData(n.AREA.bomlist,e.data[n.AREA.bomlist]),(0,o.toast)({color:"success",title:a.state.json["10140BOMM2-000010"]}),a.getData({},a.state.isShowOff,!1)}}});break;case"CancelDefault":var k=this.props.table.getCheckedRows(n.AREA.bomlist),C={};k.length>0&&k.forEach((function(e){C={id:e.data.values.cbomid.value,ts:e.data.values.ts.value}})),(0,o.ajax)({url:"/nccloud/mmbd/bom0202/canceldefault.do",data:C,success:function(e){e.data[n.AREA.bomlist]&&(e.data[n.AREA.bomlist].rows.forEach((function(e){e.values.cbomid.value==C.id&&(e.rowId=C.rowId)})),a.props.table.updateTableData(n.AREA.bomlist,e.data[n.AREA.bomlist]),(0,o.toast)({color:"success",title:a.state.json["10140BOMM2-000010"]}),a.getData({},a.state.isShowOff,!1))}});break;case"gylxyzxjc":var I=this.props.table.getCheckedRows(n.AREA.bomlist);(0,o.ajax)({url:n.URL.checkbefore,data:{cbomid:I[0].data.values.cbomid.value},success:function(e){1==I.length&&a.props.openTo("/uapbd/mmbase/datamanage01/main/index.html",{status:"browse",pk_org:I[0].data.values.pk_org.value,pk_org_d:I[0].data.values.pk_org.display,cbomid:I[0].data.values.cbomid.value,appcode:"10140DAMA",pagecode:"10140DAMA_form"})}});break;case"LinkTree":var L=this.props.table.getCheckedRows(n.AREA.bomlist);1==L.length&&this.props.openTo("/uapbd/mmbase/bom0204/main/index.html",{status:"browse",pk_org:L[0].data.values.pk_org.value,pk_org_d:L[0].data.values.pk_org.display,hcmaterialid:L[0].data.values.hcmaterialid.value,hcmaterialid_d:L[0].data.values.hcmaterialid.display,hcmaterialname:L[0].data.values.hcmaterialname.value,hcmaterialvid_d:L[0].data.values["hcmaterialvid.version"]?L[0].data.values["hcmaterialvid.version"].display:"",hcmaterialvid:L[0].data.values.hcmaterialvid.value,hversion:L[0].data.values.hversion.value,fbomtype:L[0].data.values.fbomtype.value,appcode:"10140BOMTM",pagecode:"10140BOMTM_main"});break;case"BatchEdit":if(!(i=e.table.getCheckedRows(n.AREA.bomlist))||0==i.length)return void(0,o.toast)({content:this.state.json["110140BOMM3011"],color:"warning"});for(var D=!0,x=[],V=0;V<i.length;V++){var M=i[V].data.values;if("0"!=M.fbillstatus.value&&"-1"!=M.fbillstatus.value){D=!1;break}x.push(M)}if(0==D)return void(0,o.toast)({content:"仅自由态/审批不通过BOM可修改，选择BOM中存在审批中/审批通过BOM，请重新选择！",color:"warning"});console.log(x),this.batcheditModal.show(i,(function(){a.getData({},a.state.isShowOff,!1)}));break;case"Assign":if(!(i=e.table.getCheckedRows(n.AREA.bomlist))||0===i.length)return void(0,o.toast)({content:this.state.json["110140BOMM3011"],color:"warning"});if(d=[],i.forEach((function(e){d.push(e.data.values.pk_org.value)})),!l(d))break;var _=[];i.forEach((function(e){_.push(e.data.values.cbomid.value)})),this.assignModal.show(_,!1);break;case"Unassign":if(!(i=e.table.getCheckedRows(n.AREA.bomlist))||0===i.length)return void(0,o.toast)({content:this.state.json["110140BOMM3011"],color:"warning"});if(d=[],i.forEach((function(e){d.push(e.data.values.pk_org.value)})),!l(d))break;var O=[];i.forEach((function(e){O.push(e.data.values.cbomid.value)})),this.assignModal.show(O,!0);break;case"Print":var P=!1;if((0,o.ajax)({url:n.URL.checkpermission,async:!1,data:{id:this.props.table.getCheckedRows(n.AREA.bomlist)[0].data.values.cbomid.value,actioncode:"Edit"},success:function(e){P=!0},error:function(e){(0,o.toast)({color:"danger",content:e.message})}}),!P)return;!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=a.props.table.getCheckedRows(n.AREA.bomlist),s=[];t.map((function(e){s.push(e.data.values.cbomid.value)})),console.log(s,"pks"),""!=e&&(0,o.print)("pdf",n.URL.print,{funcode:"10140BOMM",nodekey:"bommprint",oids:s,outputType:e})}("print");break;case"Output":var S=this.props.table.getCheckedRows(n.AREA.bomlist),j=[];S.forEach((function(e){j.push(e.data.values.cbomid.value)})),this.setState({pks:j},(function(){a.refs.printOutput.open()}));break;case"CopyLines":var K=e.cardTable.getCheckedRows(n.AREA.body);if(null==K||0==K.length)return void(0,o.toast)({color:"warning",content:(0,r.getLangByResId)(this,"4004ARRIVAL-000007")});rowCopyPasteUtils.copyRows.call(this,e,n.AREA.body,["CopyLines","DeleteLines","ResetRowno"],["PastToThis","PastToLast","CancelPast"]),this.setState({isCopyLine:!0}),e.button.setButtonDisabled(["PastToThis","PastToLast","CancelPast"],!1);break;case"PastToLast":rowCopyPasteUtils.pasteRowsToTail.call(this,e,n.AREA.body,["CopyLines","DeleteLines","ResetRowno"],["PastToThis","PastToLast","CancelPast"],["crowno","pk_arriveorder_b"]),RownoUtils.setRowNo(e,n.AREA.body,"crowno"),this.setState({isCopyLine:!1});var U=e.cardTable.getCheckedRows(n.AREA.body);null!=U&&0!=U.length||e.button.setButtonVisible(["PastToThis","PastToLast","CancelPast"],!1);break;case"CancelPast":rowCopyPasteUtils.cancel.call(this,e,n.AREA.body,["CopyLines","DeleteLines","ResetRowno"],["PastToThis","PastToLast","CancelPast"]),this.setState({isCopyLine:!1});var N=e.cardTable.getCheckedRows(n.AREA.body);null!=N&&0!=N.length||e.button.setButtonVisible(["PastToThis","PastToLast","CancelPast"],!1);break;case"DeleteLines":var F=this.props.table.getCheckedRows(n.AREA.bomlist),W=[],G=!1;F.length>0?F.forEach((function(e){1==e.data.values.hbdefault.value&&(G=!0),W.push({id:e.data.values.cbomid.value,ts:e.data.values.ts.value})})):this.selectedRowRecord&&(1==selectedRowRecord.hbdefault.value&&(G=!0),W.push({id:this.selectedRowRecord.cbomid.value,ts:this.selectedRowRecord.ts.value})),G?(0,o.promptBox)({color:"warning",content:this.state.json["10140BOMM2-000006"],beSureBtnClick:function(){(0,o.ajax)({url:n.URL.delete,data:{param:W},success:function(t){(0,s.showBatchOprMessage)(null,t.data,a.state.pubjson["10140PUBMESSAGE-000028"]);var o=e.table.deleteCacheId,r=a.props.table.getCheckedRows(n.AREA.bomlist);r.length>0&&r.forEach((function(t){o(n.AREA.bomlist,t.data.values.cbomid.value),e.table.deleteTableRowsByRowId(n.AREA.bomlist,t.data.rowId)}))}})}}):(0,o.ajax)({url:n.URL.delete,data:{param:W},success:function(t){(0,s.showBatchOprMessage)(null,t.data,a.state.pubjson["10140PUBMESSAGE-000028"]);var o=e.table.deleteCacheId,r=a.props.table.getCheckedRows(n.AREA.bomlist);r.length>0&&r.forEach((function(t){o(n.AREA.bomlist,t.data.values.cbomid.value),e.table.deleteTableRowsByRowId(n.AREA.bomlist,t.data.rowId)}))}});break;case"Refresh":this.getData({},this.state.isShowOff,!1,(function(){(0,o.toast)({title:a.state.pubjson["10140PUBMESSAGE-000017"],color:"success"})}))}};var o=a(1),s=a(7),r=a(141),n=(a(163),a(8)),l=(o.base.NCMessage,o.base.NCModal,function(e){return!0})},178:function(e,t,a){"use strict";function o(e){e.sorter=function(t,a){return function(e,t){return e<t?-1:e>t?1:0}(Number(t.values[e.attrcode].value),Number(a.values[e.attrcode].value))}}Object.defineProperty(t,"__esModule",{value:!0});var s={numberSort:function(e,t,a){e[t].items.map((function(e){a instanceof Array?a.includes(e.attrcode)&&o(e):a==e.attrcode&&o(e)}))}};t.columnSortUtils=s},179:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},r=a(2),n=(o=r)&&o.__esModule?o:{default:o},l=a(1);a(137);var i=l.base.NCModal,d=l.base.NCButton,c=l.base.NCSelect,u="/nccloud/mmbd/bom0202/batchEditUpdate.do",p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.show=function(e,t){a.state.modal.show=!0,a.state.component=s({editType:"1"},{}),a.state.selectedrecords=e,a.setState(a.state),a.onfinish=t},a.onsubmit=function(){console.log(a.state.selectedrecords);var e=a.state.selectedrecords.map((function(e){return e.data.values.cbomid.value})),t={editparams:a.state.component,pkparams:e};console.log(t),null!=t&&null!=t.data&&(0,l.ajax)({url:u,data:t,success:function(e){a.state.modal.show=!1,a.setState(a.state),null!=a.onfinish&&a.onfinish()}})},a.cancel=function(){a.state.modal.show=!1,a.state.component=s({editType:"1"},{}),a.state.selectedrecords=[],a.setState(a.state)},a.onBatchEditTypeChange=function(e){a.state.component.editType=e,a.setState(a.state)},a.onBkititemChange=function(e){a.state.component.bkititem=e,a.setState(a.state)},a.onHnassparentnumChange=function(e){console.log("onHnassparentnumChange");var t=a.state.component.hnassparentnum?a.state.component.hnassparentnum:"",o=e.target.value;0==a.checkHnassparentnumInput(o)?a.state.component.hnassparentnum=t:a.state.component.hnassparentnum=o,a.setState(a.state),console.log(a.state.component.hnassparentnum)},a.checkHnassparentnumInput=function(e){for(var t=!0,a=!1,o=0;o<e.length;o++){if("."===e.charAt(o)){if(0!=a){t=!1;break}a=!0}if(0==o){if(1==/[^0-9.-]/g.test(e.charAt(o))){t=!1;break}}else if(1==/[^0-9.]/g.test(e.charAt(o))){t=!1;break}}return 1==t&&1==a&&e.substring(e.indexOf(".")+1).length>8&&(t=!1),t},a.onFitemsourceChange=function(e){a.state.component.fitemsource=e,a.setState(a.state)},a.onFitemtypeChange=function(e){a.state.component.fitemtype=e,a.setState(a.state)},a.onIbasenumChange=function(e){console.log("onIbasenumChange");var t=a.state.component.ibasenum?a.state.component.ibasenum:"",o=e.target.value;0==a.checkIbasenumInput(o)?a.state.component.ibasenum=t:a.state.component.ibasenum=o,a.setState(a.state),console.log(a.state.component.ibasenum)},a.checkIbasenumInput=function(e){for(var t=!0,a=0;a<e.length;a++)if(0==a){if(1==/[^1-9]/g.test(e.charAt(a))){t=!1;break}}else if(1==/[^0-9]/g.test(e.charAt(a))){t=!1;break}return t},a.onBkitmaterialChange=function(e){a.state.component.bkitmaterial=e,a.setState(a.state)},a.onBdeliverChange=function(e){a.state.component.bdeliver=e,a.setState(a.state)},a.onFsupplymodeChange=function(e){a.state.component.fsupplymode=e,a.setState(a.state)},a.onFcontrolChange=function(e){a.state.component.fcontrol=e,a.setState(a.state)},a.onBbunibatchChange=function(e){a.state.component.bbunibatch=e,a.setState(a.state)},a.onBbchkitemforwrChange=function(e){a.state.component.bbchkitemforwr=e,a.setState(a.state)},a.onBcanreplaceChange=function(e){a.state.component.bcanreplace=e,a.setState(a.state)},a.onFreplacetypeChange=function(e){a.state.component.freplacetype=e,a.setState(a.state)},a.onVmatingnoChange=function(e){console.log(e.target.value),a.state.component.vmatingno=e.target.value,a.setState(a.state)},a.onFbackflushtypeChange=function(e){a.state.component.fbackflushtype=e,a.setState(a.state)},a.onFbackflushtimeChange=function(e){a.state.component.fbackflushtime=e,a.setState(a.state)},a.onBcustommaterialChange=function(e){a.state.component.bcustommaterial=e,a.setState(a.state)},a.onBprojectmaterialChange=function(e){a.state.component.bprojectmaterial=e,a.setState(a.state)},a.render=function(){var e=s({},a.state.modal);return n.default.createElement(i,s({},e,{style:{width:"30%"}}),n.default.createElement(i.Header,{closeButton:!1},"批量修改"),n.default.createElement(i.Body,null,n.default.createElement("div",{style:{width:"35%"}},n.default.createElement(c,{defaultValue:"1",onChange:a.onBatchEditTypeChange.bind(a),style:{width:"60%",paddingLeft:"15px"},value:a.state.component.editType},n.default.createElement(c.NCOption,{value:"1"},"产品"),n.default.createElement(c.NCOption,{value:"2"},"材料"))),"1"===a.state.component.editType?n.default.createElement("div",{className:"transfer_tree_container",style:{height:"100px"}},n.default.createElement("div",{className:"left-area",style:{padding:"15px",width:"calc(50% - 30px)"}},n.default.createElement(c,{placeholder:"齐套",onChange:a.onBkititemChange.bind(a),value:a.state.component.bkititem},n.default.createElement(c.NCOption,{value:"1"},"是"),n.default.createElement(c.NCOption,{value:"2"},"否"))),n.default.createElement("div",{className:"right-area",style:{padding:"15px",width:"calc(50% - 30px)"}},n.default.createElement("input",{type:"text",id:"hnassparentnum",value:a.state.component.hnassparentnum,onChange:a.onHnassparentnumChange.bind(a),placeholder:"父项数量",style:{height:"30px",width:"100%",border:"1px solid #d5d6d9",textAlign:"right",paddingRight:"2px"}}))):n.default.createElement("div",{className:"transfer_tree_container",style:{height:"350px"}},n.default.createElement("div",{className:"left-area",style:{padding:"15px",width:"calc(50% - 30px)"}},n.default.createElement("div",{style:{marginBottom:"5px"}},n.default.createElement(c,{placeholder:"备料来源",onChange:a.onFitemsourceChange.bind(a),value:a.state.component.fitemsource},n.default.createElement(c.NCOption,{value:"1"},"备料"),n.default.createElement(c.NCOption,{value:"2"},"领料"),n.default.createElement(c.NCOption,{value:"3"},"传输"))),n.default.createElement("div",{style:{marginBottom:"5px"}},n.default.createElement("input",{type:"text",value:a.state.component.ibasenum,onChange:a.onIbasenumChange.bind(a),placeholder:"底数",style:{height:"30px",width:"100%",border:"1px solid #d5d6d9",textAlign:"right",paddingRight:"2px"}})),n.default.createElement("div",{style:{marginBottom:"5px"}},n.default.createElement(c,{placeholder:"发料",onChange:a.onBdeliverChange.bind(a),value:a.state.component.bdeliver},n.default.createElement(c.NCOption,{value:"1"},"是"),n.default.createElement(c.NCOption,{value:"2"},"否"))),n.default.createElement("div",{style:{marginBottom:"5px"}},n.default.createElement(c,{placeholder:"控制标志",onChange:a.onFcontrolChange.bind(a),value:a.state.component.fcontrol},n.default.createElement(c.NCOption,{value:"1"},"控制"),n.default.createElement(c.NCOption,{value:"2"},"不控制"))),n.default.createElement("div",{style:{marginBottom:"5px"}},n.default.createElement(c,{placeholder:"完工齐套检查",onChange:a.onBbchkitemforwrChange.bind(a),value:a.state.component.bbchkitemforwr},n.default.createElement(c.NCOption,{value:"1"},"是"),n.default.createElement(c.NCOption,{value:"2"},"否"))),n.default.createElement("div",{style:{marginBottom:"5px"}},n.default.createElement(c,{placeholder:"替代类型",onChange:a.onFreplacetypeChange.bind(a),value:a.state.component.freplacetype},n.default.createElement(c.NCOption,{value:"1"},"全部替代"),n.default.createElement(c.NCOption,{value:"2"},"部分替代"),n.default.createElement(c.NCOption,{value:"3"},"清空替代类型"))),n.default.createElement("div",{style:{marginBottom:"5px"}},n.default.createElement(c,{placeholder:"倒冲方式",onChange:a.onFbackflushtypeChange.bind(a),value:a.state.component.fbackflushtype},n.default.createElement(c.NCOption,{value:"1"},"不倒冲"),n.default.createElement(c.NCOption,{value:"2"},"自动倒冲"),n.default.createElement(c.NCOption,{value:"3"},"交互式倒冲"))),n.default.createElement("div",{style:{marginBottom:"5px"}},n.default.createElement(c,{placeholder:"客户专用料",onChange:a.onBcustommaterialChange.bind(a),value:a.state.component.bcustommaterial},n.default.createElement(c.NCOption,{value:"1"},"是"),n.default.createElement(c.NCOption,{value:"2"},"否")))),n.default.createElement("div",{className:"right-area",style:{padding:"15px",width:"calc(50% - 30px)"}},n.default.createElement("div",{style:{marginBottom:"5px"}},n.default.createElement(c,{placeholder:"子项类型",onChange:a.onFitemtypeChange.bind(a),value:a.state.component.fitemtype},n.default.createElement(c.NCOption,{value:"1"},"普通"),n.default.createElement(c.NCOption,{value:"2"},"工具"),n.default.createElement(c.NCOption,{value:"3"},"技术资料"),n.default.createElement(c.NCOption,{value:"4"},"客户手册"))),n.default.createElement("div",{style:{marginBottom:"5px"}},n.default.createElement(c,{placeholder:"齐料",onChange:a.onBkitmaterialChange.bind(a),value:a.state.component.bkitmaterial},n.default.createElement(c.NCOption,{value:"1"},"是"),n.default.createElement(c.NCOption,{value:"2"},"否"))),n.default.createElement("div",{style:{marginBottom:"5px"}},n.default.createElement(c,{placeholder:"供应方式",onChange:a.onFsupplymodeChange.bind(a),value:a.state.component.fsupplymode},n.default.createElement(c.NCOption,{value:"1"},"一般发料"),n.default.createElement(c.NCOption,{value:"2"},"定量发料"))),n.default.createElement("div",{style:{marginBottom:"5px"}},n.default.createElement(c,{placeholder:"不允许混批",onChange:a.onBbunibatchChange.bind(a),value:a.state.component.bbunibatch},n.default.createElement(c.NCOption,{value:"1"},"是"),n.default.createElement(c.NCOption,{value:"2"},"否"))),n.default.createElement("div",{style:{marginBottom:"5px"}},n.default.createElement(c,{placeholder:"可替代",onChange:a.onBcanreplaceChange.bind(a),value:a.state.component.bcanreplace},n.default.createElement(c.NCOption,{value:"1"},"是"),n.default.createElement(c.NCOption,{value:"2"},"否"))),n.default.createElement("div",{style:{marginBottom:"5px"}},n.default.createElement("input",{type:"text",value:a.state.component.vmatingno,onChange:a.onVmatingnoChange.bind(a),placeholder:"配套组号",style:{height:"30px",width:"100%",border:"1px solid #d5d6d9",textAlign:"right",paddingRight:"2px"}})),n.default.createElement("div",{style:{marginBottom:"5px"}},n.default.createElement(c,{placeholder:"倒冲时机",onChange:a.onFbackflushtimeChange.bind(a),value:a.state.component.fbackflushtime},n.default.createElement(c.NCOption,{value:"1"},"产品完工"),n.default.createElement(c.NCOption,{value:"2"},"工序完工"),n.default.createElement(c.NCOption,{value:"3"},"清空倒冲时机"))),n.default.createElement("div",{style:{marginBottom:"5px"}},n.default.createElement(c,{placeholder:"项目专用料",onChange:a.onBprojectmaterialChange.bind(a),value:a.state.component.bprojectmaterial},n.default.createElement(c.NCOption,{value:"1"},"是"),n.default.createElement(c.NCOption,{value:"2"},"否")))))),n.default.createElement(i.Footer,null,n.default.createElement("span",null,n.default.createElement(d,{onClick:a.onsubmit.bind(a)},"确定")),n.default.createElement("span",null,n.default.createElement(d,{onClick:a.cancel.bind(a)},"取消"))))},a.state={modal:{show:!1,modalDropup:!0,size:"xlg"},component:s({editType:"1"},{}),selectedrecords:[]},a.onfinish=null,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(r.Component);t.default=p},190:function(e,t,a){"use strict";var o,s,r,n=a(1),l=a(191),i=(o=l)&&o.__esModule?o:{default:o};s=i.default,r="app",(0,n.RenderRouter)(s,r)},191:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,s=a(1),r=a(175),n=(o=r)&&o.__esModule?o:{default:o};var l=(0,s.asyncComponent)((function(){return Promise.resolve().then(a.t.bind(null,174,7))})),i=[{path:"/",component:n.default,exact:!0},{path:"/list",component:n.default},{path:"/card",component:l}];t.default=i},2:function(e,a){e.exports=t},3:function(e,t){e.exports=a},5:function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=function(e,t){var a=e[1]||"",o=e[3];if(!o)return a;if(t&&"function"==typeof btoa){var s=(n=o,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),r=o.sources.map((function(e){return"/*# sourceURL="+o.sourceRoot+e+" */"}));return[a].concat(r).concat([s]).join("\n")}var n;return[a].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+a+"}":a})).join("")},t.i=function(e,a){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},s=0;s<this.length;s++){var r=this[s][0];"number"==typeof r&&(o[r]=!0)}for(s=0;s<e.length;s++){var n=e[s];"number"==typeof n[0]&&o[n[0]]||(a&&!n[2]?n[2]=a:a&&(n[2]="("+n[2]+") and ("+a+")"),t.push(n))}},t}},6:function(e,t,a){var o,s,r={},n=(o=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===s&&(s=o.apply(this,arguments)),s}),l=function(e){var t={};return function(a){return void 0===t[a]&&(t[a]=e.call(this,a)),t[a]}}((function(e){return document.querySelector(e)})),i=null,d=0,c=[],u=a(9);function p(e,t){for(var a=0;a<e.length;a++){var o=e[a],s=r[o.id];if(s){s.refs++;for(var n=0;n<s.parts.length;n++)s.parts[n](o.parts[n]);for(;n<o.parts.length;n++)s.parts.push(R(o.parts[n],t))}else{var l=[];for(n=0;n<o.parts.length;n++)l.push(R(o.parts[n],t));r[o.id]={id:o.id,refs:1,parts:l}}}}function b(e,t){for(var a=[],o={},s=0;s<e.length;s++){var r=e[s],n=t.base?r[0]+t.base:r[0],l={css:r[1],media:r[2],sourceMap:r[3]};o[n]?o[n].parts.push(l):a.push(o[n]={id:n,parts:[l]})}return a}function m(e,t){var a=l(e.insertInto);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var o=c[c.length-1];if("top"===e.insertAt)o?o.nextSibling?a.insertBefore(t,o.nextSibling):a.appendChild(t):a.insertBefore(t,a.firstChild),c.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");a.appendChild(t)}}function A(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=c.indexOf(e);t>=0&&c.splice(t,1)}function f(e){var t=document.createElement("style");return e.attrs.type="text/css",h(t,e.attrs),m(e,t),t}function h(e,t){Object.keys(t).forEach((function(a){e.setAttribute(a,t[a])}))}function R(e,t){var a,o,s,r;if(t.transform&&e.css){if(!(r=t.transform(e.css)))return function(){};e.css=r}if(t.singleton){var n=d++;a=i||(i=f(t)),o=y.bind(null,a,n,!1),s=y.bind(null,a,n,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(a=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",h(t,e.attrs),m(e,t),t}(t),o=w.bind(null,a,t),s=function(){A(a),a.href&&URL.revokeObjectURL(a.href)}):(a=f(t),o=E.bind(null,a),s=function(){A(a)});return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else s()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=n()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var a=b(e,t);return p(a,t),function(e){for(var o=[],s=0;s<a.length;s++){var n=a[s];(l=r[n.id]).refs--,o.push(l)}e&&p(b(e,t),t);for(s=0;s<o.length;s++){var l;if(0===(l=o[s]).refs){for(var i=0;i<l.parts.length;i++)l.parts[i]();delete r[l.id]}}}};var v,g=(v=[],function(e,t){return v[e]=t,v.filter(Boolean).join("\n")});function y(e,t,a,o){var s=a?"":o.css;if(e.styleSheet)e.styleSheet.cssText=g(t,s);else{var r=document.createTextNode(s),n=e.childNodes;n[t]&&e.removeChild(n[t]),n.length?e.insertBefore(r,n[t]):e.appendChild(r)}}function E(e,t){var a=t.css,o=t.media;if(o&&e.setAttribute("media",o),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}function w(e,t,a){var o=a.css,s=a.sourceMap,r=void 0===t.convertToAbsoluteUrls&&s;(t.convertToAbsoluteUrls||r)&&(o=u(o)),s&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */");var n=new Blob([o],{type:"text/css"}),l=e.href;e.href=URL.createObjectURL(n),l&&URL.revokeObjectURL(l)}},7:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showWarningDialog=t.showBatchOprMessage=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),s=a(1);var r=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.lang=null,this.inlt=null,console.log("LangContainer初始化"),(0,s.getMultiLang)({moduleId:"10140MMPUBMSG",domainName:"uapbd",callback:this.init.bind(this),needInlt:!0})}return o(e,[{key:"init",value:function(e,t,a){t&&(this.lang=e,this.inlt=a)}},{key:"getLangByResId",value:function(e,t){return t?this.inlt.get(e,t)||e:this.lang&&this.lang[e]||e}}]),e}());function n(e,t,a,o,r,n,l,i,d){(0,s.toast)({duration:a,color:o,title:e,content:t,groupOperation:r,TextArr:n,groupOperationMsg:l,onExpand:i,onClose:d})}function l(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments[3];(0,s.promptBox)({color:o,title:e,content:t,noFooter:a.noFooter,noCancelBtn:a.noCancelBtn,beSureBtnName:a.beSureBtnName,cancelBtnName:a.cancelBtnName,beSureBtnClick:a.beSureBtnClick,cancelBtnClick:a.cancelBtnClick,closeBtnClick:a.closeBtnClick,closeByClickBackDrop:a.closeByClickBackDrop})}t.showBatchOprMessage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.getLangByResId("10140PUBMESSAGE-000003"),t=arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",l=t.failedNum?t.failedNum:0,i=t.sucessNum;if(0==l)!function(e,t,a){n(e,t,a)}(r.getLangByResId("10140PUBMESSAGE-000018",{0:o}),r.getLangByResId("10140PUBMESSAGE-000022",{0:t.sucessNum}));else if(0==i){e=r.getLangByResId("10140PUBMESSAGE-000019",{0:o});var d=r.getLangByResId("10140PUBMESSAGE-000020",{0:t.failedNum,1:t.failedNum});(0,s.toast)({duration:"infinity",color:"danger",title:e,content:d,groupOperation:!0,TextArr:[r.getLangByResId("10140PUBMESSAGE-000000"),r.getLangByResId("10140PUBMESSAGE-000001"),r.getLangByResId("10140PUBMESSAGE-000002")],groupOperationMsg:t.errorMessages,onExpand:a.onExpand,onClose:a.onClose})}else{e=r.getLangByResId("10140PUBMESSAGE-000019",{0:o});var c=r.getLangByResId("10140PUBMESSAGE-000021",{0:Number(t.sucessNum)+Number(t.failedNum),1:t.sucessNum,2:t.failedNum});(0,s.toast)({duration:"infinity",color:"danger",title:e,content:c,groupOperation:!0,TextArr:[r.getLangByResId("10140PUBMESSAGE-000000"),r.getLangByResId("10140PUBMESSAGE-000001"),r.getLangByResId("10140PUBMESSAGE-000002")],groupOperationMsg:t.errorMessages,onExpand:a.onExpand,onClose:a.onClose})}},t.showWarningDialog=function(e,t){l(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},"warning")}},8:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.URL={update:"/nccloud/mmbd/bom0202/update.do",insert:"/nccloud/mmbd/bom0202/insert.do",delete:"/nccloud/mmbd/bom0202/delete.do",queryGrand:"/nccloud/mmbd/bom0202/queryGrand.do",queryCard:"/nccloud/mmbd/bom0202/queryCard.do",commit:"/nccloud/mmbd/bom0202/commit.do",uncommit:"/nccloud/mmbd/bom0202/uncommit.do",queryOrgVid:"/nccloud/mmbd/pub/queryOrgVid.do",matoidevent:"/nccloud/mmbd/bom0202/matoidevent.do",matvidevent:"/nccloud/mmbd/bom0202/matvidevent.do",hnnum:"/nccloud/mmbd/bom0202/hnumevent.do",hnassnum:"/nccloud/mmbd/bom0202/hassnumevent.do",copyAdd:"/nccloud/mmbd/bom0202/copyAdd.do",enable:"/nccloud/mmbd/bom0202/enable.do",disable:"/nccloud/mmbd/bom0202/disable.do",default:"/nccloud/mmbd/bom0202/default.do",suredefault:"/nccloud/mmbd/bom0202/suredefault.do",canceldefault:"/nccloud/mmbd/bom0202/canceldefault.do",checkbefore:"/nccloud/mmbd/bom0202/beforedetect.do",print:"/nccloud/mmbd/bom0202/print.do",checkdefaultversion:"/nccloud/mmbd/bom0202/checkdefaultversion.do",card:"/card",list:"/list",beforeEditHead:"/nccloud/mmbd/bom0202/bodyBeforeEvent.do",afterBodyEdit:"/nccloud/mmbd/bom0202/bodyEvent.do",afterOutputsEdit:"/nccloud/mmbd/bom0202/bodyOutEvent.do",beforeBodyEdit:"/nccloud/mmbd/bom0202/bodyBeforeEvent.do",lossscale:"/nccloud/mmbd/bom0202/lossscale.do",checkpermission:"/nccloud/mmbd/pub/checkpermission.do",replscale:"/nccloud/mmbd/bom0202/replscale.do"},t.AREA={bomlist:"bomwh_head",bomcardh:"bomcard_h",bomcarditem:"bomcard_b",bomcarditem2:"bomcard_b2",bomcardoutputs:"bomcard_outputs",bomcarduseorg:"bomcard_useorg",bomwips:"bomwips",bomrepls:"bomrepls",bomloss:"bomloss",bompos:"bompos",bomquery:"bomwh_query"},t.PAGECODE={bom_list:"10140BOMM_list",bom_card:"10140BOMM_card",bom_grand:"10140BOMM_grand"}},9:function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var a=t.protocol+"//"+t.host,o=a+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var s,r=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(r)?e:(s=0===r.indexOf("//")?r:0===r.indexOf("/")?a+r:o+r.replace(/^\.\//,""),"url("+JSON.stringify(s)+")")}))}}})}));
//# sourceMappingURL=index.ce6dfbc2.js.map