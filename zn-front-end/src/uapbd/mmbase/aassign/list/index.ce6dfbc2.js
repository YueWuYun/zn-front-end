/*! @ncctag {"project":"","branch":"","provider":"","date":"2020-5-11 14:50:39"} */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nc-lightapp-front"),require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["nc-lightapp-front","react","react-dom"],t):"object"==typeof exports?exports["uapbd/mmbase/aassign/list/index"]=t(require("nc-lightapp-front"),require("react"),require("react-dom")):e["uapbd/mmbase/aassign/list/index"]=t(e["nc-lightapp-front"],e.React,e.ReactDOM)}(window,(function(e,t,n){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="../../../../",n(n.s=169)}({1:function(t,n){t.exports=e},137:function(e,t,n){var r=n(140);"string"==typeof r&&(r=[[e.i,r,""]]);var a={transform:void 0};n(6)(r,a);r.locals&&(e.exports=r.locals)},139:function(e,t,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r)&&r.length){var i=a.apply(null,r);i&&e.push(i)}else if("object"===o)for(var s in r)n.call(r,s)&&r[s]&&e.push(s)}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()},140:function(e,t,n){(e.exports=n(5)(!1)).push([e.i,'* {\n  padding: 0;\n  margin: 0;\n}\n/*定位容器*/\n.uapbd_style_center_container {\n  position: relative;\n  /*容器 子元素 未定义距离*/\n  /*容器 子元素 距离右边 20px*/\n  /*容器 use 子元素 距离右边 20px*/\n}\n.uapbd_style_center_container .uapbd_style_center_undefined {\n  position: absolute;\n}\n.uapbd_style_center_container .uapbd_style_center_right20 {\n  position: absolute;\n  top: 0;\n  right: 20px;\n  bottom: 0;\n}\n.uapbd_style_center_container .uapbd_style_center_left20 {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 20px;\n}\n/*出现 滚动条的容器*/\n.uapbd_style_scroll_container {\n  overflow: auto;\n}\n/*定义滚动条轨道*/\n.uapbd_style_scroll_container::-webkit-scrollbar-track {\n  border-radius: 8px;\n  background-color: white;\n}\n/*定义滚动条高宽及背景 高宽分别对应横竖滚动条的尺寸*/\n.uapbd_style_scroll_container::-webkit-scrollbar {\n  width: 8px;\n}\n/*定义滑块 内阴影+圆角*/\n.uapbd_style_scroll_container::-webkit-scrollbar-thumb {\n  border-radius: 8px;\n  width: 8px;\n  background-color: #d8d8d8;\n}\n.transfer_tree_container {\n  clear: both;\n  height: 90%;\n  width: 100%;\n  margin-top: 10px;\n}\n.transfer_tree_container .left-area {\n  height: 100%;\n  display: inline-block;\n  vertical-align: top;\n  width: calc(50% - 91px);\n  overflow: auto;\n}\n.transfer_tree_container .button-area {\n  height: 100%;\n  width: 50px;\n  display: inline-block;\n  vertical-align: middle;\n  padding-top: 30px;\n  text-align: center;\n}\n.transfer_tree_container .button-area .opr-botton {\n  padding-top: 25px;\n  display: block;\n  margin: 0 auto;\n}\n.transfer_tree_container .right-area {\n  height: 100%;\n  display: inline-block;\n  vertical-align: top;\n  width: calc(50% - 91px);\n  overflow: auto;\n}\n.transfer_tree_container .transferSwitcherClassSelfNameHidden i {\n  visibility: hidden;\n}\n.transfer_tree_container .left-area-tree .u-tree,\n.transfer_tree_container .right-area-tree .u-tree {\n  height: 360px;\n  overflow: auto;\n}\n.transfer_tree_container .left-area-nei,\n.transfer_tree_container .right-area-nei {\n  height: 100%;\n  border-radius: 3px;\n  border: 1px solid #d0d0d0;\n  background: transparent;\n}\n.transfer_tree_container .opr-botton-trans button {\n  min-width: auto;\n  width: 32px;\n  height: 32px;\n  padding: 0;\n}\n/*\n * 这个是左树的 控制搜索框 宽度的。\n */\n.NC_syncTreeSearch_self_width {\n  width: 240px!important;\n}\n.NC_syncTreeSearch_self_width .u-form-control-wrapper {\n  width: 240px!important;\n}\n/*\n * 这个是左树中加虚线样式。\n */\n.syncTreeComLineStyle .synctree-area .u-tree > li:only-child > ul:before {\n  border-left: none;\n}\n.syncTreeComLineStyle .synctree-area .u-tree > li > ul:last-child::before {\n  border-left: none;\n}\n.syncTreeComLineStyle .synctree-area .u-tree-child-tree-open > li::after {\n  position: absolute;\n  left: 8px;\n  top: -15px;\n  content: "";\n  display: inline-block;\n  width: 1px;\n  height: 28px;\n  border-left: 1px dashed #d0d0d0;\n}\n.syncTreeComLineStyle .synctree-area .node-item .u-tree-switcher {\n  position: relative;\n  z-index: 2;\n}\n.syncTreeComLineStyle .synctree-area li::after {\n  border: none;\n}\n.syncTreeComLineStyle .synctree-area li {\n  position: relative;\n}\n.syncTreeComLineStyle .synctree-area li .u-tree-switcher {\n  position: relative;\n}\n.syncTreeComLineStyle .synctree-area li .u-tree-switcher::before {\n  position: absolute;\n  left: 11px;\n  top: 8px;\n  content: "";\n  display: inline-block;\n  width: 10px;\n  border-top: 1px dashed #d0d0d0;\n}\n.syncTreeComLineStyle .synctree-area li .isLeaf_hiden_point_line > i::before {\n  visibility: hidden;\n}\n/*\n * 穿梭树 线样式修改\n */\n.syncTreeComTransferLineStyle .synctree-area .u-tree > li:only-child > ul:before {\n  border-left: none;\n}\n.syncTreeComTransferLineStyle .synctree-area .u-tree > li > ul:last-child::before {\n  border-left: none;\n}\n.syncTreeComTransferLineStyle .synctree-area .u-tree-child-tree-open > li::after {\n  position: absolute;\n  left: 8px;\n  top: -15px;\n  content: "";\n  display: inline-block;\n  width: 1px;\n  height: 28px;\n  border-left: 1px dashed #d0d0d0;\n}\n.syncTreeComTransferLineStyle .synctree-area .node-item .u-tree-switcher {\n  position: relative;\n  z-index: 2;\n}\n.syncTreeComTransferLineStyle .synctree-area li::after {\n  border: none;\n}\n.syncTreeComTransferLineStyle .synctree-area li {\n  position: relative;\n}\n.syncTreeComTransferLineStyle .synctree-area li .isLeaf_show_point_line::before {\n  position: absolute;\n  left: 11px;\n  top: 8px;\n  content: "";\n  display: inline-block;\n  width: 10px;\n  border-top: 1px dashed #d0d0d0;\n}\n.syncTreeComTransferLineStyle .synctree-area li .isLeaf_hiden_point_line::before {\n  position: absolute;\n  left: 11px;\n  top: 8px;\n  content: "";\n  display: inline-block;\n  width: 10px;\n  border-top: 1px dashed #d0d0d0;\n}\n.syncTreeComTransferLineStyle .synctree-area li .isLeaf_hiden_point_line > i::before {\n  visibility: hidden;\n}\n.node-item-edit-point-style-self {\n  background-color: #ebedf2;\n}\n.node-item-edit-point-style-self > a span {\n  color: #e14c46!important;\n}\n.table-slef-set-long span {\n  margin-right: 0px!important;\n}\n',""])},143:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.conf=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return React.createElement(i,r({},s,e))};var a=n(1),o=n(4),i=a.high.Refer,s=t.conf={multiLang:{domainName:"uapbd",currentLocale:"zh-CN",moduleId:"refer_uapbd"},refType:"grid",refName:"refer-000218",placeholder:"refer-000218",refCode:"uapbd.refer.org.FactoryGridRef",queryGridUrl:"/nccloud/uapbd/org/FactoryGridRef.do",isMultiSelectedEnabled:!1,columnConfig:[{name:["refer-000002","refer-000003"],code:["refcode","refname"]}],unitProps:o.conf,isShowUnit:!1}},169:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2),c=p(s),l=(p(n(3)),n(1)),u=p(n(143)),d=p(n(170));function p(e){return e&&e.__esModule?e:{default:e}}var f="actlist",h="wclist",b="10140AASSIGN_list",v="/nccloud/mmbd/aassign/queryactivity.do",g=(r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.call(n),n.tableId1=f,n.tableId2=h,n.selectedActivityRowRecord=null,n.selectedWkRowRecords=[],n.state={json:{},inlt:null,pk_org:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){var e=this;this.props.MultiInit.getMultiLang({moduleId:"10140AASSIGN",domainName:"uapbd",callback:function(t,n,r){n&&e.setState({json:t,inlt:r},(function(){e.initTemplate(e.props)}))}}),this.props.MultiInit.getMultiLang({moduleId:"10140mmpubmsg",domainName:"uapbd",callback:function(t,n,r){n&&e.setState({pubjson:o({},t)})}});var t=this.props.getUrlParam("pk_org");if(t&&t.refpk){var n={allpks:[],rows:[]};this.props.setAllTableData(f,n),this.props.setAllTableData(h,n),this.setState({pk_org:t}),this.getData(t.refpk)}this.setBtnStatus()}},{key:"modifierMeta",value:function(e,t){var n=this;return t[h].items.push({itemtype:"customer",attrcode:"opr",label:"操作",width:200,className:"table-opr",visible:!0,render:function(t,r,a){return c.default.createElement("span",null,c.default.createElement("span",{style:{cursor:"pointer"},onClick:function(t){e.cardTable.selectAllRows(h,!1),e.cardTable.selectRowsByIndex(h,a),n.selectedWkRowRecords=[],n.selectedWkRowRecords.push(r);var o=[];n.selectedWkRowRecords.forEach((function(e){var t={cwkid:e.values["cwkid.cwkid"],pk_group:e.values["cwkid.pk_group"],pk_org:e.values["cwkid.pk_org"],pk_org_v:e.values["cwkid.pk_org_v"],cactivityid:n.selectedActivityRowRecord.cactivityid.value};o.push(t)})),console.log(o);var i={pk_org:n.state.pk_org.value,cactivityid:n.selectedActivityRowRecord.cactivityid.value,aassignedvos:o};(0,l.ajax)({url:"/nccloud/mmbd/aassign/saveUnAassignVOs.do",data:i,success:function(t){n.queryAassignvoByActivity(e,i,!1,null)}})}},"取消分配"),c.default.createElement("span",null,"  "))}}),t}},{key:"getData",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments[2],a={pageInfo:{pageIndex:0,pageSize:10,total:0,totalPage:0},pagecode:b,pk_org:e};(0,l.ajax)({url:v,data:a,success:function(e){console.log(e);var a=[];if(e.data){e.data[f].rows.forEach((function(e){a.push(e.values.cactivityid.value)})),e.data[f].allpks=a,t.props.cardTable.setTableData(f,e.data[f]),t.selectedActivityRowRecord=null,t.selectedWkRowRecords=[],t.setBtnStatus();var o=a.length,i=t.state.inlt;n&&(0,l.toast)({title:"已成功!",content:i.get("查询成功，共{count}条。",{count:o}),color:"success"})}else{t.props.cardTable.setTableData(f,{allpks:[],rows:[]}),t.selectedActivityRowRecord=null,t.selectedWkRowRecords=[],t.setBtnStatus(),n&&(0,l.toast)({title:"请注意!",content:"未查询出符合条件的数据！",color:"warning"})}r&&"function"==typeof r&&r()}})}},{key:"setBtnStatus",value:function(){var e=this.props.cardTable.getAllData(f).rows;e&&e.length>0?(this.props.button.setButtonDisabled(["Refresh"],!1),this.selectedActivityRowRecord?this.props.button.setButtonDisabled(["Assign","UnAssign"],!1):this.props.button.setButtonDisabled(["Assign","UnAssign"],!0)):this.props.button.setButtonDisabled(["Refresh"],!0)}},{key:"render",value:function(){var e=this,t=this.props,n=t.cardTable,r=t.button,a=(t.search,t.base,t.modal),i=this.props.button.getButtons();i=i.sort((function(e,t){return t.btnorder-e.btnorder}));var s=n.createCardTable,p=(a.createModal,r.createButtonApp);r.getButtons;return c.default.createElement("div",{className:"nc-bill-list"},c.default.createElement("div",{className:"nc-bill-header-area"},c.default.createElement("div",{className:"header-title-search-area"},(0,l.createPageIcon)(),c.default.createElement("h2",{className:"title-search-detail"},"作业分配")),c.default.createElement("div",{className:"search-box",style:{position:"relative"}},(0,u.default)({onChange:this.onUnitChange.bind(this),foolValue:this.state.pk_org,value:[this.state.pk_org],isDataPowerEnable:!1,queryCondition:{GridRefActionExt:"nccloud.web.mmbd.refer.pub.AppPermissionOrgRefFilter"}})),c.default.createElement("div",{className:"header-button-area"},p({area:"header",buttonLimit:3,onButtonClick:this.buttonClick.bind(this),popContainer:document.querySelector(".header-button-area")}))),c.default.createElement("div",{className:"nc-bill-table-area"},s(f,{dataSource:"mmbd.aassign.aassign.data",pkname:"cactivityid",tableModelConfirm:this.tableModelConfirm,showIndex:!1,showCheck:!1,onRowClick:this.onActivityClick.bind(this),height:300})),c.default.createElement("div",{className:"nc-bill-table-area"},s(h,{dataSource:"mmbd.aassign.aassign.data",pkname:"cassignid",tableModelConfirm:this.tableModelConfirm,showIndex:!1,showCheck:!0,onSelected:this.onWkSelected.bind(this),onSelectedAll:this.onWkSelected.bind(this),height:300})),c.default.createElement(d.default,o({ref:function(t){return e.assignModal=t}},this.props)))}}]),t}(s.Component),a=function(){var e=this;this.initTemplate=function(t){t.createUIDom({pagecode:b,appcode:"10140AASSIGN"},(function(n){if(n){if(n.template){var r=n.template;r=e.modifierMeta(t,r),t.meta.setMeta(r)}if(n.button){var a=n.button;t.button.setButtons(a)}n.context&&n.context.pk_org&&e.setState({pk_org:{value:n.context.pk_org,display:n.context.org_Name,refpk:n.context.pk_org,refname:n.context.org_Name}},(function(){e.getData(n.context.pk_org,!1)}))}}))},this.refreshAction=function(t,n){var r=t.getUrlParam("pk_org");if(null==r||""==r){if(null==e.state.pk_org||""==e.state.pk_org.value)return;r=e.state.pk_org.value}e.getData(r,!1,(function(){n&&(0,l.toast)({title:"刷新成功！",color:"success"})}))},this.onUnitChange=function(t){e.setState({pk_org:{value:t.refpk,display:t.refname,refpk:t.refpk,refname:t.refname}}),t.refpk?e.getData(t.refpk,!1,(function(){})):(e.props.cardTable.setTableData(f,{rows:[]}),e.props.cardTable.setTableData(h,{rows:[]}),e.selectedActivityRowRecord=null,e.selectedWkRowRecords=[])},this.buttonClick=function(t,n){switch(n){case"Refresh":e.refreshAction(t,!0);break;case"Assign":e.onAssignClick(t,n);break;case"UnAssign":e.onUnAssignClick(t,n)}},this.onAssignClick=function(t,n){if(null!=e.selectedActivityRowRecord){var r={cactivityid:e.selectedActivityRowRecord.cactivityid.value,pk_org:e.state.pk_org.value};e.assignModal.show(r,!1,(function(){console.log("assignModal close"),e.queryAassignvoByActivity(t,r,!1,null)}))}else(0,l.toast)({content:"请先选择一个作业档案！",color:"warning"})},this.onUnAssignClick=function(t,n){if(null!=e.selectedActivityRowRecord)if(null!=e.props.cardTable.getAllData(h).rows&&0!=e.props.cardTable.getAllData(h).rows.length)if(null==e.selectedWkRowRecords||0==e.selectedWkRowRecords.length){var r={cactivityid:e.selectedActivityRowRecord.cactivityid.value,pk_org:e.state.pk_org.value};e.assignModal.show(r,!0,(function(){console.log("assignModal close"),e.queryAassignvoByActivity(t,r,!1,null)}))}else{var a=[];e.selectedWkRowRecords.forEach((function(t){var n={cwkid:t.data.values["cwkid.cwkid"],pk_group:t.data.values["cwkid.pk_group"],pk_org:t.data.values["cwkid.pk_org"],pk_org_v:t.data.values["cwkid.pk_org_v"],cactivityid:e.selectedActivityRowRecord.cactivityid.value};a.push(n)})),console.log(a);var o={pk_org:e.state.pk_org.value,cactivityid:e.selectedActivityRowRecord.cactivityid.value,aassignedvos:a};(0,l.ajax)({url:"/nccloud/mmbd/aassign/saveUnAassignVOs.do",data:o,success:function(n){e.queryAassignvoByActivity(t,o,!1,null)}})}else(0,l.toast)({content:"该作业档案没有已分配的工作中心！",color:"warning"});else(0,l.toast)({content:"请先选择一个作业档案！",color:"warning"})},this.onActivityClick=function(t,n,r,a,o){var i=e.selectedActivityRowRecord;e.selectedActivityRowRecord=r.values,console.log(e.selectedActivityRowRecord),e.selectedWkRowRecords=[],e.selectedActivityRowRecord&&(null!=i&&i.cactivityid.value==e.selectedActivityRowRecord.cactivityid.value||t.cardTable.setTableData(h,{rows:[]}));var s={cactivityid:e.selectedActivityRowRecord.cactivityid.value,pk_org:e.state.pk_org.value};e.queryAassignvoByActivity(t,s,!1,null)},this.queryAassignvoByActivity=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments[3];(0,l.ajax)({url:"/nccloud/mmbd/aassign/queryaassignvobyactivity.do",data:n,success:function(n){if(n.data){var o={rows:[],areacode:"wclist"};n.data.map((function(e){var t=JSON.parse(e);if(1==t.assigned||"true"==t.assigned){var n={};n["cwkid.cwkid"]=t.cwkid,n["cwkid.pk_group"]=t.pk_group,n["cwkid.pk_org"]=t.pk_org,n["cwkid.pk_org_v"]=t.pk_org_v,n["cwkid.vwkcode"]={value:t.code,display:t.code},n["cwkid.vwkname"]={value:t.name,display:t.name},o.rows.push({values:n})}})),console.log(o),t.cardTable.setTableData(h,o),console.log(t.cardTable.getAllData(h)),e.setBtnStatus();var i=o.length;e.state.inlt;r&&(0,l.toast)({title:"",content:"查询成功，共"+i+"条。",color:"success"})}else{var s={cactivityid:e.selectedActivityRowRecord.pk_org.value,rows:[]};t.cardTable.setTableData(h,s),e.setBtnStatus(),r&&(0,l.toast)({title:"",content:"当前作业档案没有分配工作中心！",color:"warning"})}a&&"function"==typeof a&&a()}})},this.onWkSelected=function(t,n,r,a,o){e.selectedWkRowRecords=t.cardTable.getCheckedRows(h)}},r);g=(0,l.createPage)({initTemplate:[],mutiLangCode:"10140AASSIGN"})(g),t.default=g},170:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(2),o=c(a),i=n(1),s=c(n(171));function c(e){return e&&e.__esModule?e:{default:e}}var l=i.base.NCModal,u=i.base.NCButton,d="/nccloud/mmbd/aassign/saveAassignVOs.do",p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.show=function(e,t,r){n.state.modal.show=!0,n.state.cactivityid=e.cactivityid,n.state.pk_org=e.pk_org,n.props.setUrlParam({currentorg:e.pk_org}),n.state.isCancelAssign=!!t,n.onfinish=r,n.setState(n.state)},n.onSubmit=function(){console.log(n.wkSelect.state);var e={pk_org:n.wkSelect.state.currentorg,cactivityid:n.wkSelect.state.cactivityid,aassignedvos:n.wkSelect.state.selectedData};(0,i.ajax)({url:d,data:e,success:function(e){n.state.modal.show=!1,n.setState(n.state),n.onfinish()}})},n.onCancel=function(){n.state.modal.show=!1,n.setState(n.state)},n.render=function(){var e=r({},n.state.modal);return o.default.createElement(l,e,o.default.createElement(l.Header,{closeButton:!1},o.default.createElement(l.Title,null,(n.state.isCancelAssign,"作业分配"))),o.default.createElement(l.Body,null,o.default.createElement("div",null,o.default.createElement(s.default,r({ref:function(e){return n.wkSelect=e}},n.props)))),o.default.createElement(l.Footer,null,o.default.createElement("span",null,o.default.createElement(u,{onClick:n.onSubmit.bind(n)},(n.state.isCancelAssign,"确定"))),o.default.createElement(u,{onClick:n.onCancel.bind(n)},"取消")))},n.state={modal:{show:!1,modalDropup:!0,size:"xlg"},isCancelAssign:!1,cactivityid:null,pk_org:null},n.onfinish=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(a.Component);t.default=p},171:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(2),i=c(o),s=n(1);c(n(139));function c(e){return e&&e.__esModule?e:{default:e}}n(137),n(172);var l=s.base.NCTable,u=s.base.NCCheckbox,d=s.base.NCButton,p="actlist",f="/nccloud/mmbd/aassign/queryaassignvobyactivity.do",h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getAllTableColumns=function(){var e=[{title:"工作中心编码",dataIndex:"code",width:"30%"},{title:"工作中心名称",dataIndex:"name",width:"30%"}];return e=[{title:i.default.createElement(u,{className:"table-checkbox",checked:n.state.checkedAll,onChange:n.onAllCheckChange.bind(n)}),key:"checkbox",dataIndex:"checkbox",width:"10%",render:function(e,t,r){return i.default.createElement(u,{className:"table-checkbox",checked:n.state.checkboxStatus[r],onChange:n.onCheckboxChange.bind(n,e,t,r)})}}].concat(e)},n.getSelectedTableColumns=function(){return[{title:"工作中心编码",dataIndex:"code",width:"30%"},{title:"工作中心名称",dataIndex:"name",width:"30%"},{title:"操作",dataIndex:"cancel",width:"20%",render:function(e,t,n){var r=this;return i.default.createElement(d,{onClick:function(){var e=r.state.selectedData;r.state.selectedData=e.filter((function(e){return e.cwkid!=t.cwkid}));for(var n=0;n<r.state.allData.length;n++)r.state.allData[n].cwkid==t.cwkid&&(r.state.checkboxStatus[n]=!1);r.setState(r.state)}.bind(this)},"取消选择")}.bind(n)}]},n.onAllCheckChange=function(){n.state.checkedAll=!n.state.checkedAll,n.state.selectedData=1==n.state.checkedAll?n.state.allData:[],n.state.checkboxStatus=n.state.checkboxStatus.map((function(e){return n.state.checkedAll})),n.setState(n.state)},n.onCheckboxChange=function(e,t,r){1==n.state.checkboxStatus[r]?(n.state.checkboxStatus[r]=!1,n.state.selectedData=n.state.selectedData.filter((function(e){return e.cwkid!=t.cwkid}))):(n.state.checkboxStatus[r]=!0,n.state.selectedData.push(t));var a=!0;n.state.checkboxStatus.map((function(e){0==e&&(a=!1)})),n.state.checkedAll=a,n.setState(n.state)},n.reset=function(){console.log(n.state);var e={pk_org:n.state.currentorg,cactivityid:n.state.cactivityid};(0,s.ajax)({url:f,data:e,success:function(e){e.data&&(n.state.allData=[],n.state.selectedData=[],n.state.checkboxStatus=[],e.data.map((function(e){var t=JSON.parse(e);n.state.allData.push(t),1==t.assigned||"true"==t.assigned?(n.state.selectedData.push(t),n.state.checkboxStatus.push(!0)):n.state.checkboxStatus.push(!1)})),n.setState(n.state))}})},n.render=function(){var e={main:n,rowKey:"id",bodyStyle:{height:"330px"},columns:n.getAllTableColumns()},t={main:n,rowKey:"id",bodyStyle:{height:"330px"},columns:n.getSelectedTableColumns()},a=n.state.allData,o=n.state.selectedData;return i.default.createElement("div",{className:"transfer_tree_container",style:{marginTop:"5px"}},i.default.createElement("div",{className:"left-area",style:{height:"400px",padding:"10px",backgroud:"rgb(249,249,249)",width:"calc(50%-10px)"}},i.default.createElement("div",{style:{marginBottom:"10px"}},"可选工作中心"),i.default.createElement(l,r({},e,{data:a},{scroll:{y:"390px"}}))),i.default.createElement("div",{className:"right-area",style:{marginLeft:15,height:"400px",padding:"10px",backgroud:"rgb(249,249,249)",width:"calc(50%-10px)"}},i.default.createElement("div",{style:{marginBottom:"10px"}},"已选工作中心"),i.default.createElement(l,r({},t,{data:o},{scroll:{y:"390px"}}))))},n.state={allData:[],selectedData:[],checkedAll:!1,checkboxStatus:[],currentorg:e.getUrlParam("currentorg"),cactivityid:e.cardTable.getClickRowIndex(p)?e.cardTable.getClickRowIndex(p).record.values.cactivityid.value:null},console.log(n.state),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){null!=this.state.currentorg&&this.reset()}}]),t}(o.Component);t.default=h},172:function(e,t,n){var r=n(173);"string"==typeof r&&(r=[[e.i,r,""]]);var a={transform:void 0};n(6)(r,a);r.locals&&(e.exports=r.locals)},173:function(e,t,n){(e.exports=n(5)(!1)).push([e.i,".assign-orgselect-tree-div {\n  height: 400px;\n  overflow: scroll;\n}\n.assign-orgselect-tree-div .u-tree-checkbox-checked .u-tree-checkbox-inner {\n  background: #4E5E68;\n  border-color: #A8A8A8;\n}\n.assign-orgselect-tree-div .u-tree-checkbox-indeterminate .u-tree-checkbox-inner {\n  background: #4E5E68;\n  border-color: #A8A8A8;\n}\n",""])},2:function(e,n){e.exports=t},3:function(e,t){e.exports=n},4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.conf=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return React.createElement(a,r({},o,e))};var a=n(1).high.Refer,o=t.conf={multiLang:{domainName:"uap",currentLocale:"zh-CN",moduleId:"uapRefer"},queryTreeUrl:"/nccloud/riart/ref/groupRefTreeAction.do",refType:"tree",placeholder:"1880000025-000061",refName:"1880000025-000061",rootNode:{refname:"1880000025-000061",refpk:"root"}}},5:function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var a=(i=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),o=r.sources.map((function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"}));return[n].concat(o).concat([a]).join("\n")}var i;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},a=0;a<this.length;a++){var o=this[a][0];"number"==typeof o&&(r[o]=!0)}for(a=0;a<e.length;a++){var i=e[a];"number"==typeof i[0]&&r[i[0]]||(n&&!i[2]?i[2]=n:n&&(i[2]="("+i[2]+") and ("+n+")"),t.push(i))}},t}},6:function(e,t,n){var r,a,o={},i=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===a&&(a=r.apply(this,arguments)),a}),s=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e.call(this,n)),t[n]}}((function(e){return document.querySelector(e)})),c=null,l=0,u=[],d=n(9);function p(e,t){for(var n=0;n<e.length;n++){var r=e[n],a=o[r.id];if(a){a.refs++;for(var i=0;i<a.parts.length;i++)a.parts[i](r.parts[i]);for(;i<r.parts.length;i++)a.parts.push(y(r.parts[i],t))}else{var s=[];for(i=0;i<r.parts.length;i++)s.push(y(r.parts[i],t));o[r.id]={id:r.id,refs:1,parts:s}}}}function f(e,t){for(var n=[],r={},a=0;a<e.length;a++){var o=e[a],i=t.base?o[0]+t.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};r[i]?r[i].parts.push(s):n.push(r[i]={id:i,parts:[s]})}return n}function h(e,t){var n=s(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=u[u.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),u.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function b(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=u.indexOf(e);t>=0&&u.splice(t,1)}function v(e){var t=document.createElement("style");return e.attrs.type="text/css",g(t,e.attrs),h(e,t),t}function g(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function y(e,t){var n,r,a,o;if(t.transform&&e.css){if(!(o=t.transform(e.css)))return function(){};e.css=o}if(t.singleton){var i=l++;n=c||(c=v(t)),r=w.bind(null,n,i,!1),a=w.bind(null,n,i,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",g(t,e.attrs),h(e,t),t}(t),r=x.bind(null,n,t),a=function(){b(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(t),r=_.bind(null,n),a=function(){b(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else a()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=i()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=f(e,t);return p(n,t),function(e){for(var r=[],a=0;a<n.length;a++){var i=n[a];(s=o[i.id]).refs--,r.push(s)}e&&p(f(e,t),t);for(a=0;a<r.length;a++){var s;if(0===(s=r[a]).refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete o[s.id]}}}};var m,k=(m=[],function(e,t){return m[e]=t,m.filter(Boolean).join("\n")});function w(e,t,n,r){var a=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=k(t,a);else{var o=document.createTextNode(a),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(o,i[t]):e.appendChild(o)}}function _(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function x(e,t,n){var r=n.css,a=n.sourceMap,o=void 0===t.convertToAbsoluteUrls&&a;(t.convertToAbsoluteUrls||o)&&(r=d(r)),a&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */");var i=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(i),s&&URL.revokeObjectURL(s)}},9:function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var a,o=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(o)?e:(a=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(a)+")")}))}}})}));
//# sourceMappingURL=index.ce6dfbc2.js.map