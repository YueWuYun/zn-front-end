/*! @ncctag {"project":"","branch":"","provider":"","date":"2020-5-11 15:07:37"} */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("nc-lightapp-front"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","nc-lightapp-front","react-dom"],t):"object"==typeof exports?exports["uapbd/supplier/supability/main/index"]=t(require("react"),require("nc-lightapp-front"),require("react-dom")):e["uapbd/supplier/supability/main/index"]=t(e.React,e["nc-lightapp-front"],e.ReactDOM)}(window,(function(e,t,a){return function(e){var t={};function a(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,a),r.l=!0,r.exports}return a.m=e,a.c=t,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(s,r,function(t){return e[t]}.bind(null,r));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="../../../../",a(a.s=695)}({1:function(t,a){t.exports=e},3:function(e,a){e.exports=t},4:function(e,t){e.exports=a},583:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,r,o=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}(),n=a(1),l=u(n),i=(u(a(4)),a(3));a(584);function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var d=i.high.PrintOutput,p=i.base.NCAffix,S=(i.base.NCPopconfirm,i.base.NCFormControl,i.base.NCBackBtn),f=i.cardCache.addCache,b=i.cardCache.getCacheById,h=i.cardCache.updateCache,_=i.cardCache.getCurrentLastId,m=i.cardCache.getNextId,E=i.cardCache.deleteCacheById,O="upabd.supplier.supability.data",g="supplyabilityset",v="pk_mategrade",C="10140SACLSO_card",I="search",y="/nccloud/uapbd/supability/insertSupability.do",T="/nccloud/uapbd/supability/printSupability.do",N="pk_supabilityset",P=0,A=(s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.call(a),a.formId=g,a.searchId=I,a.tableId=v,a.state={pk_org:"",title_code:"",totalcount:0,applycount:0,pks:[],backVisible:!0,json:{}},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"modifierMeta",value:function(e,t,a){var s=this,r=e.getUrlParam("status");t[g].status=r,t[v].status=r,t[g].items.find((function(e){return"pk_org"==e.attrcode})).queryCondition=function(){return{TreeRefActionExt:"nccloud.web.refer.sqlbuilder.PrimaryOrgSQLBuilder"}},t[g].items.find((function(e){return"pk_supgradesys"==e.attrcode})).isMultiSelectedEnabled=!1,t[v].items.find((function(e){return"pk_supgadesys"==e.attrcode})).isMultiSelectedEnabled=!1;var o={itemtype:"customer",attrcode:"opr",label:this.state.json["10140SACLSO-000000"],visible:!0,className:"table-opr",width:200,fixed:"right",render:function(t,a,r){return"browse"===e.cardTable.getStatus(v)?l.default.createElement("span",{onClick:function(){e.cardTable.toggleRowView(v,a)}}," ",s.state.json["10140SACLSO-000013"]):l.default.createElement("div",{className:"currency-opr-col"},l.default.createElement("span",{className:"currency-opr-del",onClick:function(t){e.cardTable.openModel(v,"edit",a,r),t.stopPropagation()}},s.state.json["10140SACLSO-000014"]),"  ",l.default.createElement("span",{className:"currency-opr-del",onClick:function(t){e.cardTable.delRowsByIndex(v,r),t.stopPropagation()}},s.state.json["10140SACLSO-000015"]))}};return t[v].items.push(o),t}},{key:"componentDidMount",value:function(){var e=this;(0,i.getMultiLang)({moduleId:"10140SACLSO",domainName:"uapbd",callback:function(t){e.setState({json:t},(function(){e.initTemplate(e.props)}))}}),this.toggleShow(),this.props.cardPagination.setCardPaginationId({id:this.props.getUrlParam("id"),status:0});var t=this.props.getUrlParam("status");if("add"!=t){var a=this.props.getUrlParam("id");a&&"undefined"!=a&&this.getdata(a)}else{if(P>0){var s=this.props.meta.getMeta();s[g].items.find((function(e){return"pk_supgradesys"==e.attrcode})).queryCondition=function(){return{pk_suppliergrade:"null"}},s[v].items.find((function(e){return"pk_supgadesys"==e.attrcode})).queryCondition=function(){return{pk_suppliergrade:"null"}},this.props.meta.setMeta(s)}else P++;this.setDefaultValue()}"add"!=t&&"edit"!=t||this.setState({backVisible:!1})}},{key:"componentWillUnmount",value:function(){P=0}},{key:"toggleShow",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=this.props.getUrlParam("status"),t=this.props.getUrlParam("id"),a=[],s=[];"browse"==e&&"null"==t?(a=["Add"],s=["Edit","back","Delete","Refresh","Print","Output","Save","Cancel","AddLine","DelLine"]):"edit"==e||"add"==e?(a=["Save","Cancel","AddLine","DelLine"],s=["Edit","Add","back","Delete","Refresh","Print","Output"],this.props.cardPagination.setCardPaginationVisible("cardPaginationBtn",!1)):(a=["Add","Edit","Delete","back","Refresh","Print","Output"],s=["Save","Cancel","AddLine","DelLine"],this.props.cardPagination.setCardPaginationVisible("cardPaginationBtn",!0)),this.props.button.setButtonVisible(a,!0),this.props.button.setButtonVisible(s,!1),this.props.form.setFormStatus(g,e),this.props.cardTable.setStatus(v,"edit"==e||"add"==e?"edit":"browse"),this.updateCardTableBtnStatus(),window.onbeforeunload="add"!=e&&"edit"!=e?null:function(){return""},this.setState({backVisible:"browse"==e})}},{key:"updateButtonStatus",value:function(){"browse"===this.props.form.getFormStatus(this.formId)?this.props.button.setButtonsVisible({Save:!1,Print:!0,Output:!0}):this.props.button.setButtonsVisible({Save:!0,Print:!1,Output:!1})}},{key:"output",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=[];t.push(this.props.getUrlParam("id")),""!=e&&(0,i.print)("pdf",T,{funcode:"10140SACLSO",nodekey:"supplyset-card",oids:t,outputType:e})}},{key:"updateCardTableBtnStatus",value:function(){var e=this.props.cardTable.getCheckedRows(this.tableId),t=this.props.getUrlParam("status");t="add"==t||"edit"==t?"edit":"browse",e.length>0&&"edit"==t?this.props.button.setButtonDisabled(["DelLine"],!1):this.props.button.setButtonDisabled(["DelLine"],!0)}},{key:"onCardTableAfterEvent",value:function(e,t,a,s,r,o,n){if("pk_material"==a){if(r[0].newvalue.value!=r[0].oldvalue.value){var l={};l.value=n.values.pk_material.value,l.display=s.refname,e.cardTable.setValByKeyAndIndex(this.tableId,o,"pk_material.name",l),n.values.pk_material.display=s.refcode}}else if("pk_supgadesys"==a&&r[0].newvalue.value!=r[0].oldvalue.value){var i;i={value:s.refcode,display:s.refcode},e.cardTable.setValByKeyAndIndex(this.tableId,o,"pk_supgadesys.supstatus",i)}}},{key:"getDataForCache",value:function(e,t){if(!e)return this.props.form.EmptyAllFormValue(this.formId),this.props.cardTable.setTableData(this.tableId,{rows:[]}),this.props.setUrlParam({id:"null",status:"browse"}),void this.toggleShow(!0);var a=b(e,O);a?(this.props.form.setAllFormValue(c({},g,a.head[g])),a.body&&a.body[v]?this.props.cardTable.setTableData(v,a.body[v]):this.props.cardTable.setTableData(v,{rows:[]}),this.props.setUrlParam(e)):(this.getdata(e),this.props.setUrlParam(e)),t&&"function"==typeof t&&t.call(this)}},{key:"onCancelSureEvent",value:function(){var e=this;if("add"===this.props.getUrlParam("status")){var t=_(O);if(!t)return this.props.setUrlParam({id:"null",status:"browse"}),void this.toggleShow();this.getDataForCache(t,(function(){e.props.pushTo("/card",{pagecode:C,status:"browse",id:e.props.getUrlParam("id")}),e.props.form.setFormStatus(e.formId,"browse"),e.props.cardTable.setStatus(e.tableId,"browse"),e.updateButtonStatus()}))}"edit"===this.props.getUrlParam("status")&&(this.props.form.cancel(this.formId),this.props.editTable.cancelEdit(this.tableId),this.props.pushTo("/card",{pagecode:C,status:"browse",id:this.props.getUrlParam("id")})),this.toggleShow(),this.setState({backVisible:!0})}},{key:"render",value:function(){var e=this.props,t=e.cardTable,a=e.form,s=e.button,r=e.modal,o=e.cardPagination.createCardPagination,n=this.props.button.getButtons();n=n.sort((function(e,t){return t.btnorder-e.btnorder}));var u=a.createForm,c=t.createCardTable,f=s.createButtonApp,b=r.createModal,h=this.props.getUrlParam("status");return l.default.createElement("div",{className:"nc-bill-card"},l.default.createElement("div",{className:"nc-bill-top-area"},l.default.createElement(p,null,l.default.createElement("div",{className:"nc-bill-header-area"},l.default.createElement(S,{className:"title-search-detail",style:{display:this.state.backVisible?"inline":"none"},onClick:this.buttonClick.bind(this,this.props,"Back")}),l.default.createElement("div",{className:"header-title-search-area"},(0,i.createPageIcon)(),l.default.createElement("h2",{className:"title-search-detail"},this.state.json["10140SACLSO-000021"],"browse"==h?"："+this.state.title_code:"")),l.default.createElement("div",{className:"header-button-area"},f({area:"header-action",onButtonClick:this.buttonClick.bind(this)}),o({handlePageInfoChange:this.pageInfoClick.bind(this),dataSource:O})))),l.default.createElement("div",{className:"nc-bill-form-area"},u(this.formId,{onAfterEvent:this.afterEvent.bind(this)}))),l.default.createElement("div",{className:"nc-bill-bottom-area"},l.default.createElement("div",{className:"nc-bill-table-area"},c(this.tableId,{tableHead:this.getTableHead.bind(this),modelSave:this.modelSave.bind(this),onAfterEvent:this.onCardTableAfterEvent.bind(this),showIndex:!0,showCheck:!0,onSelected:this.updateCardTableBtnStatus.bind(this),onSelectedAll:this.updateCardTableBtnStatus.bind(this)}))),b("delete",{title:this.state.json["10140SACLSO-000003"],content:this.state.json["10140SACLSO-000004"],beSureBtnClick:this.delConfirm}),b("cancel",{title:this.state.json["10140SACLSO-000007"],content:this.state.json["10140SACLSO-000008"],beSureBtnClick:this.onCancelSureEvent.bind(this)}),l.default.createElement(d,{ref:"printOutput",url:T,data:{funcode:"10140SACLSO",oids:this.state.pks,nodekey:"supplyset-card",outputType:"output"}}))}}]),t}(n.Component),r=function(){var e=this;this.initTemplate=function(t){t.createUIDom({pagecode:C},(function(a){if(a){if(a.template){var s=a.template,r=a.context.pk_org;e.modifierMeta(t,s,r),t.meta.setMeta(s,(function(){if(P>0){var r=t.form.getFormItemsValue(g,"pk_supabclass.gradesys");s[g].items.find((function(e){return"pk_supgradesys"==e.attrcode})).queryCondition=function(){return{pk_suppliergrade:r&&r.value?r.value:"null"}},s[v].items.find((function(e){return"pk_supgadesys"==e.attrcode})).queryCondition=function(){return{pk_suppliergrade:r&&r.value?r.value:"null"}}}else P++;a.context&&a.context.pk_org&&a.context.org_Name&&(e.defaultOrg=a.context.pk_org,e.defaultOrgName=a.context.org_Name,"add"==t.getUrlParam("status")&&(e.props.form.setFormItemsValue(g,{pk_org:{value:e.defaultOrg,display:e.defaultOrgName}}),e.afterEvent(e.props,g,"pk_org",{value:e.defaultOrg})))}))}if(a.button){var o=a.button;t.button.setButtons(o),e.toggleShow()}}}))},this.setDefaultValue=function(){e.props.form.setFormItemsValue(e.formId,{bill_status:{value:"0",display:e.state.json["10140SACLSO-000001"]}}),e.props.form.setFormItemsValue(e.formId,{modifiedtype:{value:"2",display:e.state.json["10140SACLSO-000002"]}})},this.buttonClick=function(t,a){switch(a){case"Add":t.form.EmptyAllFormValue(e.formId),t.form.setFormStatus(e.formId,"add"),e.setState({backVisible:!1},(function(){t.cardTable.setTableData(e.tableId,{rows:[]}),t.pushTo("/card",{pagecode:C,status:"add"}),e.toggleShow(),e.props.form.setFormItemsValue(g,{pk_org:{value:e.defaultOrg,display:e.defaultOrgName}}),e.afterEvent(e.props,g,"pk_org",{value:e.defaultOrg})}));break;case"Edit":t.pushTo("/card",{pagecode:C,status:"edit",id:t.getUrlParam("id")}),e.toggleShow(),e.setState({backVisible:!1});break;case"Delete":(0,i.promptBox)({color:"warning",title:e.state.json["10140SACLSO-000003"],content:e.state.json["10140SACLSO-000004"],noFooter:!1,noCancelBtn:!1,beSureBtnName:e.state.json["10140SACLSO-000005"],cancelBtnName:e.state.json["10140SACLSO-000006"],beSureBtnClick:e.delConfirm.bind(e)});break;case"Back":t.pushTo("/list",{pagecode:"10140SACLSO_list"});break;case"Save":e.saveClick();break;case"Print":e.output("print");break;case"Output":var s=[];s.push(e.props.getUrlParam("id")),e.setState({pks:s},(function(){e.refs.printOutput.open()}));break;case"Cancel":(0,i.promptBox)({color:"warning",title:e.state.json["10140SACLSO-000007"],content:e.state.json["10140SACLSO-000008"],noFooter:!1,noCancelBtn:!1,beSureBtnName:e.state.json["10140SACLSO-000005"],cancelBtnName:e.state.json["10140SACLSO-000006"],beSureBtnClick:e.onCancelSureEvent.bind(e)});break;case"AddLine":t.cardTable.addRow(e.tableId);break;case"DelLine":var r=t.cardTable.getCheckedRows(e.tableId),o=[];r.forEach((function(e){o.push(e.index)})),t.cardTable.delRowsByIndex(e.tableId,o),e.updateCardTableBtnStatus();break;case"Refresh":e.getdata(e.props.getUrlParam("id"),(function(){(0,i.toast)({title:e.state.json["10140SACLSO-000009"],color:"success"})}))}},this.pageInfoClick=function(t,a){e.getDataForCache(a)},this.afterEvent=function(t,a,s,r,o,n){if(r!=o&&(null==r||null==o||o.value!=r.value))if("pk_supplyname"==s){var l={};["name","mnecode","shortname"].forEach((function(e){l["pk_supplyname."+e]={value:n&&n.values&&n.values[e]?n.values[e].value:null,display:n&&n.values&&n.values[e]?n.values[e].value:null}})),e.props.form.setFormItemsValue(e.formId,l)}else if("pk_supabclass"==s){var i=n.values&&n.values.gradesys?n.values.gradesys:null,u={};(u=i&&"null"!=i?{"pk_supabclass.gradesys":{value:n.values.gradesys.value,display:n.values.gradesysname.value}}:{"pk_supabclass.gradesys":{value:null,display:null}}).pk_supgradesys={value:null,display:null},u["pk_supgradesys.supstatus"]={value:null,display:null},e.props.form.setFormItemsValue(e.formId,u);var c=e.props.cardTable.getAllRows(e.tableId);c.forEach((function(e){})),e.props.cardTable.setTableData(e.tableId,c);var d=e.props.meta.getMeta();d[e.formId].items.find((function(e){return"pk_supgradesys"==e.attrcode})).queryCondition=function(){return{pk_suppliergrade:i&&i.value?i.value:"null"}},d[e.tableId].items.find((function(e){return"pk_supgadesys"==e.attrcode})).queryCondition=function(){return{pk_suppliergrade:i&&i.value?i.value:"null"}},e.props.meta.setMeta(d)}else if("pk_org"==s){var p=e.props.meta.getMeta();p[e.formId].items.find((function(e){return"pk_supplyname"==e.attrcode})).queryCondition=function(){return{pk_org:r.value}},e.props.meta.setMeta(p)}else if("pk_supgradesys"==s){var S=r.values&&r.values.supstatus?r.values.supstatus:null,f={};S&&S.value?f["pk_supgradesys.supstatus"]={value:S.value,display:S.value}:f["pk_supgradesys.supstatus"]={value:null,display:null},e.props.form.setFormItemsValue(e.formId,f)}},this.getdata=function(t,a){var s={pk:t};(0,i.ajax)({url:"/nccloud/uapbd/supability/querySupabilityCard.do",data:s,success:function(t){var s,r=null;if(t.data.head){e.props.form.setAllFormValue(c({},e.formId,t.data.head[e.formId]));var o=t.data.head[e.formId].rows[0].values.pk_supplyname.display;e.setState({title_code:o}),r=t.data.head[e.formId].rows[0].values["pk_supabclass.gradesys"],h(N,t.data.head[g].rows[0].values[N].value,t.data,g,O)}if(t.data.body){e.props.cardTable.setTableData(e.tableId,t.data.body[e.tableId]);var n=e.props.cardTable.getNumberOfRows(e.tableId);e.props.cardTable.getAllRows(e.tableId);e.setState({applycount:0}),e.setState({totalcount:n})}else e.props.cardTable.setTableData(e.tableId,{rows:[]});if(e.updateButtonStatus(),P>0){var l=e.props.meta.getMeta();l[g].items.find((function(e){return"pk_supgradesys"==e.attrcode})).queryCondition=function(){return{pk_suppliergrade:r&&r.value?r.value:"null"}},l[v].items.find((function(e){return"pk_supgadesys"==e.attrcode})).queryCondition=function(){return{pk_suppliergrade:r&&r.value?r.value:"null"}},e.props.meta.setMeta(l)}else P++;t.formulamsg&&t.formulamsg instanceof Array&&t.formulamsg.length>0&&e.props.dealFormulamsg(t.formulamsg,(c(s={},g,"form"),c(s,v,"cardTable"),s));a&&"function"==typeof a&&a.call(e)}})},this.saveClick=function(){if(e.props.cardTable.checkTableRequired(e.tableId)){var t=e.props.createMasterChildData(C,e.formId,e.tableId);delete t.head[g].rows[0].values.pk_mategrade;var a=y;"edit"===e.props.getUrlParam("status")&&(a="/nccloud/uapbd/supability/updateSupability.do"),e.props.validateToSave(t,(function(){(0,i.ajax)({url:a,data:t,success:function(t){var s=null;t.success&&(t.data&&(t.data.head&&t.data.head[e.formId]&&(e.props.form.setAllFormValue(c({},e.formId,t.data.head[e.formId])),s=t.data.head[e.formId].rows[0].values[N].value,a==y?f(s,t.data,e.formId,O):h(N,t.data.head[g].rows[0].values[N].value,t.data,g,O)),t.data.body&&t.data.body[e.tableId]&&e.props.cardTable.setTableData(e.tableId,t.data.body[e.tableId])),(0,i.toast)({title:e.state.json["10140SACLSO-000010"],color:"success"}),e.props.pushTo("/card",{pagecode:C,status:"browse",id:s}),e.toggleShow(),e.setState({backVisible:!0}))}})}),c({head:g},v,"cardTable"))}},this.delConfirm=function(){(0,i.ajax)({url:"/nccloud/uapbd/supability/deleteSupability.do",data:{deleteInfo:[{id:e.props.getUrlParam("id"),ts:e.props.form.getFormItemsValue(e.formId,"ts").value}]},success:function(t){if(t){var a=e.props.getUrlParam("id"),s=m(a,O);E(N,a,O),e.getDataForCache(s,(function(){(0,i.toast)({color:"success",title:e.state.json["10140SACLSO-000011"]})}))}}})},this.modelSave=function(t){t.cardTable.closeModel(e.tableId),e.saveClick()},this.getButtonNames=function(e){return"edit"===e||"add"===e||"save"===e?"main-button":"secondary - button"},this.getTableHead=function(){var t=e.props.button.createButtonApp,a=(e.props.button.getButtons(),e.props.getUrlParam("status"));return l.default.createElement("div",{className:"shoulder-definition-area"},l.default.createElement("div",{className:"definition-search"},"browse"==a?l.default.createElement("div",null,l.default.createElement("span",{className:"definition-search-title"},e.state.json["10140SACLSO-000016"]," | ",e.state.json["10140SACLSO-000017"],"："),l.default.createElement("span",{className:"count"},e.state.totalcount),l.default.createElement("span",null,e.state.json["10140SACLSO-000018"]),l.default.createElement("span",null,"  ",e.state.json["10140SACLSO-000019"]," ："),l.default.createElement("span",{className:"count"},e.state.applycount),l.default.createElement("span",null,e.state.json["10140SACLSO-000020"])):l.default.createElement("span",{className:"definition-search-title"})),l.default.createElement("div",{className:"definition-icons",style:{padding:"0px"}},t({area:"body-action",onButtonClick:e.buttonClick.bind(e)}),e.props.cardTable.createBrowseIcons(e.tableId,{iconArr:["close","open","max","setCol"],maxDestAreaId:"nc-bill-card"})))}},s);A=(0,i.createPage)({billinfo:{billtype:"card",pagecode:C,headcode:g,bodycode:v},initTemplate:[]})(A),t.default=A},584:function(e){e.exports=JSON.parse('{"O_RDONLY":0,"O_WRONLY":1,"O_RDWR":2,"S_IFMT":61440,"S_IFREG":32768,"S_IFDIR":16384,"S_IFCHR":8192,"S_IFBLK":24576,"S_IFIFO":4096,"S_IFLNK":40960,"S_IFSOCK":49152,"O_CREAT":512,"O_EXCL":2048,"O_NOCTTY":131072,"O_TRUNC":1024,"O_APPEND":8,"O_DIRECTORY":1048576,"O_NOFOLLOW":256,"O_SYNC":128,"O_SYMLINK":2097152,"O_NONBLOCK":4,"S_IRWXU":448,"S_IRUSR":256,"S_IWUSR":128,"S_IXUSR":64,"S_IRWXG":56,"S_IRGRP":32,"S_IWGRP":16,"S_IXGRP":8,"S_IRWXO":7,"S_IROTH":4,"S_IWOTH":2,"S_IXOTH":1,"E2BIG":7,"EACCES":13,"EADDRINUSE":48,"EADDRNOTAVAIL":49,"EAFNOSUPPORT":47,"EAGAIN":35,"EALREADY":37,"EBADF":9,"EBADMSG":94,"EBUSY":16,"ECANCELED":89,"ECHILD":10,"ECONNABORTED":53,"ECONNREFUSED":61,"ECONNRESET":54,"EDEADLK":11,"EDESTADDRREQ":39,"EDOM":33,"EDQUOT":69,"EEXIST":17,"EFAULT":14,"EFBIG":27,"EHOSTUNREACH":65,"EIDRM":90,"EILSEQ":92,"EINPROGRESS":36,"EINTR":4,"EINVAL":22,"EIO":5,"EISCONN":56,"EISDIR":21,"ELOOP":62,"EMFILE":24,"EMLINK":31,"EMSGSIZE":40,"EMULTIHOP":95,"ENAMETOOLONG":63,"ENETDOWN":50,"ENETRESET":52,"ENETUNREACH":51,"ENFILE":23,"ENOBUFS":55,"ENODATA":96,"ENODEV":19,"ENOENT":2,"ENOEXEC":8,"ENOLCK":77,"ENOLINK":97,"ENOMEM":12,"ENOMSG":91,"ENOPROTOOPT":42,"ENOSPC":28,"ENOSR":98,"ENOSTR":99,"ENOSYS":78,"ENOTCONN":57,"ENOTDIR":20,"ENOTEMPTY":66,"ENOTSOCK":38,"ENOTSUP":45,"ENOTTY":25,"ENXIO":6,"EOPNOTSUPP":102,"EOVERFLOW":84,"EPERM":1,"EPIPE":32,"EPROTO":100,"EPROTONOSUPPORT":43,"EPROTOTYPE":41,"ERANGE":34,"EROFS":30,"ESPIPE":29,"ESRCH":3,"ESTALE":70,"ETIME":101,"ETIMEDOUT":60,"ETXTBSY":26,"EWOULDBLOCK":35,"EXDEV":18,"SIGHUP":1,"SIGINT":2,"SIGQUIT":3,"SIGILL":4,"SIGTRAP":5,"SIGABRT":6,"SIGIOT":6,"SIGBUS":10,"SIGFPE":8,"SIGKILL":9,"SIGUSR1":30,"SIGSEGV":11,"SIGUSR2":31,"SIGPIPE":13,"SIGALRM":14,"SIGTERM":15,"SIGCHLD":20,"SIGCONT":19,"SIGSTOP":17,"SIGTSTP":18,"SIGTTIN":21,"SIGTTOU":22,"SIGURG":16,"SIGXCPU":24,"SIGXFSZ":25,"SIGVTALRM":26,"SIGPROF":27,"SIGWINCH":28,"SIGIO":23,"SIGSYS":12,"SSL_OP_ALL":2147486719,"SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION":262144,"SSL_OP_CIPHER_SERVER_PREFERENCE":4194304,"SSL_OP_CISCO_ANYCONNECT":32768,"SSL_OP_COOKIE_EXCHANGE":8192,"SSL_OP_CRYPTOPRO_TLSEXT_BUG":2147483648,"SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS":2048,"SSL_OP_EPHEMERAL_RSA":0,"SSL_OP_LEGACY_SERVER_CONNECT":4,"SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER":32,"SSL_OP_MICROSOFT_SESS_ID_BUG":1,"SSL_OP_MSIE_SSLV2_RSA_PADDING":0,"SSL_OP_NETSCAPE_CA_DN_BUG":536870912,"SSL_OP_NETSCAPE_CHALLENGE_BUG":2,"SSL_OP_NETSCAPE_DEMO_CIPHER_CHANGE_BUG":1073741824,"SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG":8,"SSL_OP_NO_COMPRESSION":131072,"SSL_OP_NO_QUERY_MTU":4096,"SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION":65536,"SSL_OP_NO_SSLv2":16777216,"SSL_OP_NO_SSLv3":33554432,"SSL_OP_NO_TICKET":16384,"SSL_OP_NO_TLSv1":67108864,"SSL_OP_NO_TLSv1_1":268435456,"SSL_OP_NO_TLSv1_2":134217728,"SSL_OP_PKCS1_CHECK_1":0,"SSL_OP_PKCS1_CHECK_2":0,"SSL_OP_SINGLE_DH_USE":1048576,"SSL_OP_SINGLE_ECDH_USE":524288,"SSL_OP_SSLEAY_080_CLIENT_DH_BUG":128,"SSL_OP_SSLREF2_REUSE_CERT_TYPE_BUG":0,"SSL_OP_TLS_BLOCK_PADDING_BUG":512,"SSL_OP_TLS_D5_BUG":256,"SSL_OP_TLS_ROLLBACK_BUG":8388608,"ENGINE_METHOD_DSA":2,"ENGINE_METHOD_DH":4,"ENGINE_METHOD_RAND":8,"ENGINE_METHOD_ECDH":16,"ENGINE_METHOD_ECDSA":32,"ENGINE_METHOD_CIPHERS":64,"ENGINE_METHOD_DIGESTS":128,"ENGINE_METHOD_STORE":256,"ENGINE_METHOD_PKEY_METHS":512,"ENGINE_METHOD_PKEY_ASN1_METHS":1024,"ENGINE_METHOD_ALL":65535,"ENGINE_METHOD_NONE":0,"DH_CHECK_P_NOT_SAFE_PRIME":2,"DH_CHECK_P_NOT_PRIME":1,"DH_UNABLE_TO_CHECK_GENERATOR":4,"DH_NOT_SUITABLE_GENERATOR":8,"NPN_ENABLED":1,"RSA_PKCS1_PADDING":1,"RSA_SSLV23_PADDING":2,"RSA_NO_PADDING":3,"RSA_PKCS1_OAEP_PADDING":4,"RSA_X931_PADDING":5,"RSA_PKCS1_PSS_PADDING":6,"POINT_CONVERSION_COMPRESSED":2,"POINT_CONVERSION_UNCOMPRESSED":4,"POINT_CONVERSION_HYBRID":6,"F_OK":0,"R_OK":4,"W_OK":2,"X_OK":1,"UV_UDP_REUSEADDR":4}')},585:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},n=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}(),l=a(1),i=c(l),u=(c(a(4)),a(3));function c(e){return e&&e.__esModule?e:{default:e}}var d=u.high.PrintOutput,p=u.base.NCPopconfirm,S=(u.base.NCIcon,u.base.NCTabs.NCTabPane,"10140SACLSO_list"),f="search",b="supplyabilityset",h="pk_supabilityset",_="/nccloud/uapbd/supability/querySupabilityList.do",m="/nccloud/uapbd/supability/deleteSupability.do",E="/nccloud/uapbd/supability/printSupability.do",O=(s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.call(a),a.searchId=f,a.tableId=b,a.selectedRowRecord=null,a.state={pks:[],json:{}},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"modifierMeta",value:function(e,t){var a=this,s=["pk_org","pk_supabclass","pk_mategrade.pk_material"];t[f].items=t[f].items.map((function(e,t){return e.col="3",s.indexOf(e.attrcode)>=0&&(e.isShowDisabledData=!0),e}));var r=["pk_org","pk_supabclass","pk_supplyname","pk_supgradesys","pk_mategrade.pk_material"];return t[f].items.forEach((function(e){r.indexOf(e.attrcode)>=0&&(e.isMultiSelectedEnabled=!0)})),t[f].items.find((function(e){return"pk_org"==e.attrcode})).queryCondition=function(){return{TreeRefActionExt:"nccloud.web.refer.sqlbuilder.PrimaryOrgSQLBuilder"}},t[b].items=t[b].items.map((function(t,a){return"project_code"==t.attrcode&&(t.render=function(t,a,s){return i.default.createElement("span",{style:{color:"#007ace",cursor:"pointer"},onClick:function(){var t=e.search.getAllSearchData(f);u.cacheTools.set("searchParams",t),e.pushTo("/card",{status:"browse",pagecode:"10140SACLSO_card",id:a[h].value})}},a&&a.project_code&&a.project_code.value)}),t})),t[b].items.push({itemtype:"customer",attrcode:"opr",label:this.state.json["10140SACLSO-000000"],width:200,fixed:"right",className:"table-opr",visible:!0,render:function(t,s,r){return i.default.createElement("span",null,i.default.createElement("span",{style:{cursor:"pointer"},onClick:function(){e.pushTo("/card",{status:"edit",pagecode:"10140SACLSO_card",id:s[h].value})}},a.state.json["10140SACLSO-000034"]),i.default.createElement("span",null,"   "),i.default.createElement(p,{trigger:"click",placement:"top",content:a.state.json["10140SACLSO-000023"],onClose:function(){var t=s[h].value,o={deleteInfo:[]};o.deleteInfo.push({id:s[h].value,ts:s.ts.value}),(0,u.ajax)({url:m,data:o,success:function(s){s.success&&((0,e.table.deleteCacheId)(b,t),(0,u.toast)({color:"success",content:a.state.json["10140SACLSO-000011"]}),e.table.deleteTableRowsByIndex(b,r))}})}},i.default.createElement("span",{style:{cursor:"pointer"}},a.state.json["10140SACLSO-000015"])))}}),t}},{key:"componentDidMount",value:function(){var e=this;this.props.MultiInit.getMultiLang({moduleId:"10140SACLSO",domainName:"uapbd",callback:function(t,a,s){a&&e.setState({json:t,inlt:s},(function(){e.initTemplate(e.props)}))}});var t={Delete:!0};0==this.props.table.getAllTableData(this.tableId).rows.length&&(t.Print=!0,t.Output=!0),this.props.button.setButtonDisabled(t)}},{key:"buttonClick",value:function(e,t){var a=this;switch(t){case"Add":var s=e.search.getAllSearchData(f);u.cacheTools.set("searchParams",s),e.pushTo("/card",{pagecode:"10140SACLSO_card",status:"add"});break;case"Edit":s=e.search.getAllSearchData(f),u.cacheTools.set("searchParams",s);var r=this.props.table.getCheckedRows(this.tableId),o=null;if(!(r.length>0))return void(0,u.toast)({content:this.state.json["10140SACLSO-000024"],color:"warning"});o=r[0].data.values[h].value,e.pushTo("/card",{status:"edit",pagecode:"10140SACLSO_card",id:o});break;case"Refresh":this.refreshAction(e,!0),this.props.button.setButtonDisabled({Delete:!0});break;case"Delete":(0,u.promptBox)({color:"warning",title:this.state.json["10140SACLSO-000025"],content:this.state.json["10140SACLSO-000026"],noFooter:!1,noCancelBtn:!1,beSureBtnName:this.state.json["10140SACLSO-000005"],cancelBtnName:this.state.json["10140SACLSO-000006"],beSureBtnClick:this.deleteAction.bind(this)});break;case"Print":this.output("print");break;case"Output":var n=this.props.table.getAllTableData(b),l=[];n.rows.forEach((function(e){l.push(e.values[h].value)})),this.setState({pks:l},(function(){a.refs.printOutput.open()}))}}},{key:"output",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.props.table.getAllTableData(b),a=[];t.rows.forEach((function(e){a.push(e.values[h].value)})),""!=e&&(0,u.print)("pdf",E,{funcode:"10140SACLSO",nodekey:"supplyset-list",oids:a,outputType:e})}},{key:"deleteAction",value:function(){var e=this,t=this.props.table.getCheckedRows(b),a=[];t&&0!=t.length?(t.forEach((function(e){a.push({id:e.data.values[h].value,ts:e.data.values.ts.value})})),(0,u.ajax)({url:m,data:{deleteInfo:a},success:function(t){(0,u.toast)({color:"success",title:e.state.json["10140SACLSO-000011"]}),e.refreshAction(e.props),e.props.button.setButtonDisabled({Delete:!0})}})):taost({color:"warning",content:this.state.json["10140SACLSO-000027"]})}},{key:"onRowClick",value:function(e,t,a,s){this.selectedRowRecord=a}},{key:"onSelectChange",value:function(){this.props.table.getCheckedRows(this.tableId).length>0?this.props.button.setButtonDisabled(["Delete"],!1):this.props.button.setButtonDisabled(["Delete"],!0)}},{key:"getData",value:function(e,t,a){var s=this,r=this.props.search.getQueryInfo("search"),n=r.oid,l=o({},r,{pageInfo:{pageIndex:0,pageSize:10,total:0,totalPage:0},pagecode:S,queryAreaCode:f,oid:n,queryType:"tree"});(0,u.ajax)({url:_,data:l,success:function(e){if(console.log(e),e.data){var r=[];e.data[b].rows.forEach((function(e){r.push(e.values[h].value)})),e.data[b].allpks=r,s.props.button.setButtonDisabled({Print:!1,Output:!1}),s.props.table.setAllTableData(s.tableId,e.data[b]);var o=r.length,n=s.state.inlt;t&&(0,u.toast)({title:s.state.json["10140SACLSO-000028"],content:n&&n.get("10140SACLSO-000035",{count:o}),color:"success"})}else{s.props.button.setButtonDisabled({Print:!0,Output:!0}),s.props.table.setAllTableData(b,{allpks:[],rows:[]}),t&&(0,u.toast)({content:s.state.json["10140SACLSO-000031"],color:"warning",title:s.state.json["10140SACLSO-000032"]})}var l,i,c;e.formulamsg&&e.formulamsg instanceof Array&&e.formulamsg.length>0&&s.props.dealFormulamsg(e.formulamsg,(c="table",(i=b)in(l={})?Object.defineProperty(l,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):l[i]=c,l)),a&&"function"==typeof a&&a()},error:function(e){console.log(e.message)}})}},{key:"render",value:function(){var e=this.props,t=e.table,a=e.button,s=e.search,r=e.modal,o=this.props.button.getButtons();o=o.sort((function(e,t){return t.btnorder-e.btnorder}));var n=t.createSimpleTable,l=s.NCCreateSearch,c=r.createModal,p=a.createButtonApp;a.getButtons;return i.default.createElement("div",{className:"nc-bill-list"},i.default.createElement("div",{className:"nc-bill-header-area"},i.default.createElement("div",{className:"header-title-search-area"},(0,u.createPageIcon)(),i.default.createElement("h2",{className:"title-search-detail"},this.state.json["10140SACLSO-000021"])),i.default.createElement("div",{className:"header-button-area"},p({area:"header-action",buttonLimit:3,onButtonClick:this.buttonClick.bind(this),popContainer:document.querySelector(".header-button-area")}))),i.default.createElement("div",{className:"nc-bill-search-area"},l(this.searchId,{clickSearchBtn:this.clickSearchBtn.bind(this)})),i.default.createElement("div",{className:"nc-bill-table-area"},n(this.tableId,{dataSource:"upabd.supplier.supability.data",pkname:h,handlePageInfoChange:this.pageInfoClick,tableModelConfirm:this.tableModelConfirm,showIndex:!0,onRowClick:this.onRowClick.bind(this),showCheck:!0,onRowDoubleClick:this.doubleClick.bind(this),onSelected:this.onSelectChange.bind(this),onSelectedAll:this.onSelectChange.bind(this)})),i.default.createElement(d,{ref:"printOutput",url:E,data:{funcode:"10140SACLSO",oids:this.state.pks,nodekey:"supplyset-list",outputType:"output"}}),c("delete",{title:this.state.json["10140SACLSO-000025"],content:this.state.json["10140SACLSO-000033"],beSureBtnClick:this.deleteAction.bind(this)}))}}]),t}(l.Component),r=function(){var e=this;this.initTemplate=function(t){t.createUIDom({pagecode:S},(function(a){if(a){if(a.template){var s=a.template;s=e.modifierMeta(t,s),t.meta.setMeta(s,(function(){a.context&&a.context.pk_org&&a.context.org_Name&&t.search.setSearchValByField(f,"pk_org",{value:a.context.pk_org?a.context.pk_org:null,display:a.context.org_Name?a.context.org_Name:null})}));var r=u.cacheTools.get("searchParams");if(r&&0!=r){t.search.setSearchValue(f,r);var n=t.search.getQueryInfo(f),l=n.oid,i=o({},n,{pageInfo:{pageIndex:0,pageSize:10,total:0,totalPage:0},pagecode:S,queryAreaCode:f,oid:l,queryType:"tree"});(0,u.ajax)({url:_,data:i,success:function(a){if(a.data){var s=[];a.data[b].rows.forEach((function(e){s.push(e.values[h].value)})),u.cacheTools.set("allpks",s),a.data[b].allpks=s,t.button.setButtonDisabled({Print:!1,Output:!1}),t.table.setAllTableData(b,a.data[b])}else{t.button.setButtonDisabled({Print:!0,Output:!0}),t.table.setAllTableData(b,{allpks:[],rows:[]}),(0,u.toast)({content:e.state.json["10140SACLSO-000022"],color:"warning"})}},error:function(e){console.log(e.message)}})}}if(a.button){var c=a.button;t.button.setButtons(c)}}}))},this.getButtonNames=function(e){return"edit"===e||"add"===e||"save"===e?"main-button":"secondary - button"},this.doubleClick=function(t,a,s,r){var o=e.props.search.getAllSearchData(f);u.cacheTools.set("searchParams",o),e.props.pushTo("/card",{status:"browse",pagecode:"10140SACLSO_card",id:t[h].value})},this.refreshAction=function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=t.search.getAllSearchData(f);s&&e.getData(s,!1,(function(){a&&(0,u.toast)({title:e.state.json["10140SACLSO-000009"],color:"success"})}))},this.pageInfoClick=function(t,a,s){t.table.getTablePageInfo(e.tableId),t.search.getAllSearchData(f);var r={allpks:s,pageid:S};(0,u.ajax)({url:"/nccloud/uapbd/taxregion/ProjectQueryPageGridByPks.do",data:r,success:function(e){var a=e.success,s=e.data;a&&(s?t.table.setAllTableData(b,s[b]):t.table.setAllTableData(b,{rows:[]}))}})},this.clickSearchBtn=function(t,a){a&&(u.cacheTools.set("searchParams",a),e.searchVal=a,e.getData(a,!0))}},s);O=(0,u.createPage)({initTemplate:[],mutiLangCode:"10140SACLSO"})(O),t.default=O},695:function(e,t,a){"use strict";var s,r,o,n=a(3),l=a(696),i=(s=l)&&s.__esModule?s:{default:s};r=i.default,o="app",(0,n.RenderRouter)(r,o)},696:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,r=a(3),o=a(585),n=(s=o)&&s.__esModule?s:{default:s};var l=(0,r.asyncComponent)((function(){return Promise.resolve().then(a.t.bind(null,583,7))})),i=[{path:"/",component:n.default,exact:!0},{path:"/list",component:n.default},{path:"/card",component:l}];t.default=i}})}));
//# sourceMappingURL=index.7b7dcd06.js.map