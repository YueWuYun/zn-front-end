!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nc-lightapp-front")):"function"==typeof define&&define.amd?define(["nc-lightapp-front"],t):"object"==typeof exports?exports["uapbd/pricetemplet/list/common/index"]=t(require("nc-lightapp-front")):e["uapbd/pricetemplet/list/common/index"]=t(e["nc-lightapp-front"])}(window,(function(e){return function(e){var t={};function a(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="../../../../",a(a.s=5)}([function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.AREA={table_head:"table_head",table_body:"table_body",table_head_inline:"table_head_inline",table_body_inline:"table_body_inline"},t.APPCODE="400400600",t.PAGECODE="400400600_list",t.ACTION_URL={initData:"/nccloud/ct/pricetemplate/query.do",save:"/nccloud/ct/pricetemplate/save.do",update:"/nccloud/ct/pricetemplate/update.do",delete:"/nccloud/ct/pricetemplate/delete.do",bodyAfterEdit:"/nccloud/ct/pricetemplate/bodyAfterEdit.do"},t.BUTTON={Add:"Add",Edit_inline_head:"Edit_inline_head",Delete:"Delete",Refresh:"Refresh",Save:"Save",Cancel:"Cancel",Delete_inline_head:"Delete_inline_head",AddLine_inline_body:"AddLine_inline_body",DeleteLine_inline_body:"DeleteLine_inline_body"},t.BUTTON_BROWSE=["listButtonGroup","Add","Delete","Refresh","Edit_inline_head","Delete_inline_head"],t.BUTTON_EDIT=["Save","Cancel","AddLine_inline_body","DeleteLine_inline_body"],t.STATUS={edit:"edit",browse:"browse"},t.SAVE_TYPE={add:"add",edit:"edit"},t.FIELD={cpriceitem:"cpriceitem"}},function(t,a){t.exports=e},,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setBodyData2Cache=t.getBillGridData=t.getQueryData=void 0;var n=r(a(8)),o=r(a(9)),i=a(6);function r(e){return e&&e.__esModule?e:{default:e}}t.getQueryData=o.default,t.getBillGridData=n.default,t.setBodyData2Cache=i.setBodyData2Cache},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setBodyData2Cache=void 0;var n=a(1).cardCache.setDefData;t.setBodyData2Cache=function e(t){if(console.log(t),t instanceof Array){var a=new Map;t.map((function(e){var t=e.values.pk_pricetemplet.value,n=a.get(t);n?n.push(e):(n=[e],a.set(t,n))})),a.forEach((function(e,t){n(t,"scm.ct.priceTemplate.bodyData",e)}))}else e(t.rows)}},,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,n,i){var r={pageid:t,head:{},body:{}},l=e.meta.getMeta();r.templetid=l.pageid&&l.pageid;var d=[],c=[],u=e.editTable.filterEmptyRows;u(a),u(n);var s;if(!(s=o.call(this,e,a,n,d,c)))return;d=s.headData,c=s.bodyData,l[a]&&l[a].moduletype&&"table"===l[a].moduletype&&(r.head[a]={},r.head[a].rows=d,r.head[a].areacode=a,r.head[a].areaType="form");l[n]&&l[n].moduletype&&"table"===l[n].moduletype&&(r.body[n]={},r.body[n].rows=c,r.body[n].areacode=n,r.body[n].areaType="table");return r};var n=a(0);function o(e,t,a){var o=e.editTable,r=o.getAllRows,l=o.checkRequired,d=i.call(this,e,t);if(l(t,e.editTable.getAllRows(n.AREA.table_head))){var c=r(a);if(l(a,e.editTable.getAllRows(n.AREA.table_body))){var u=d,s=c.filter((function(e){return"3"!=e.status}));return function(e,t){var a=e[0].values.pk_pricetemplet;t.forEach((function(e){e.values.pk_pricetemplet&&e.values.pk_pricetemplet.value||(e.values.pk_pricetemplet=a)}))}(u,s),function(e,t,a,n,o){var i=e.editTable.getAllRows,r=i(t),l=i(a),d=new Map,c=0;r.forEach((function(e){d.set(e.rowid,c),c++}));var u=new Map,s=0;return l.forEach((function(e){u.set(e.rowid,s),s++})),n.forEach((function(e){e.values.pseudocolumn={value:d.get(e.rowid).toString()}})),o.forEach((function(e){e.values.pseudocolumn={value:u.get(e.rowid).toString()}})),{headData:n,bodyData:o}}(e,t,a,u,s)}}}function i(e,t){var a=this,n=e.editTable,o=n.getAllRows;n.checkRequired;return[o(t).find((function(e,t){return a.updateIndex==t}))]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return new Promise((function(t,a){(0,n.ajax)({url:o.ACTION_URL.initData,data:{},success:function(a){console.log(a);var n=a.success,l=a.data;n&&(!function(e,t,a,n){var o={rows:[]},l={rows:[]};t&&t.forEach((function(e){o.rows=o.rows.concat(e.head.table_head.rows),l.rows=l.rows.concat(e.body.table_body.rows)}));if(function(e,t,a){e.editTable.setTableData(a,t)}(e,o,a),o.rows&&o.rows.length>0){var d=o.rows[0].values.pk_pricetemplet.value;!function(e,t,a,n){if((0,i.setBodyData2Cache)(a),t){var o=r(t,"scm.ct.priceTemplate.bodyData"),l=JSON.parse(JSON.stringify(o));e.editTable.setTableData(n,{rows:l})}}(e,d,l,n)}}(e,l,o.AREA.table_head,o.AREA.table_body),t(n))}})}))};var n=a(1),o=a(0),i=a(6),r=n.cardCache.getDefData}])}));
//# sourceMappingURL=index.73fcfc79.js.map