/*! @ncctag {"project":"","branch":"","provider":"","date":"2020-5-11 15:03:01"} */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("nc-lightapp-front"),require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["nc-lightapp-front","react","react-dom"],e):"object"==typeof exports?exports["uapbd/pubinfo/periodmapping/list/index"]=e(require("nc-lightapp-front"),require("react"),require("react-dom")):t["uapbd/pubinfo/periodmapping/list/index"]=e(t["nc-lightapp-front"],t.React,t.ReactDOM)}(window,(function(t,e,n){return function(t){var e={};function n(a){if(e[a])return e[a].exports;var o=e[a]={i:a,l:!1,exports:{}};return t[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(a,o,function(e){return t[e]}.bind(null,o));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="../../../../",n(n.s=174)}({1:function(e,n){e.exports=t},174:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,o,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),i=n(2),s=u(i),l=(u(n(3)),n(1));function u(t){return t&&t.__esModule?t:{default:t}}var c="periodmapping",d="pk_peiodmapping",p="/nccloud/uapbd/periodmapping/queryPeriodMappingList.do",f="/nccloud/uapbd/periodmapping/delete.do",b=(a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return o.call(n),n.tableId=c,n.selectedRowRecord=null,n.state={json:{}},n.changeEnableInfo={title:"",content:""},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"modifierMeta",value:function(t,e){var n=this;return e[c].items=e[c].items.map((function(e,n){return"code"==e.attrcode&&(e.render=function(e,n,a){return s.default.createElement("span",{style:{color:"#007ace",cursor:"pointer"},onClick:function(){t.pushTo("/card",{pagecode:"10140ACMAP_card",status:"browse",id:n[d].value})}},n&&n.code&&n.code.value)}),e})),e[c].items.push({itemtype:"customer",attrcode:"opr",label:this.state.json?this.state.json["10140ACMAP-000000"]:"10140ACMAP-000000",width:200,fixed:"right",className:"table-opr",visible:!0,render:function(e,a,o){var r;a&&a.vbillstatus&&a.vbillstatus.value;return r=["RowEdit","RowDel"],t.button.createOprationButton(r,{area:"row-action",buttonLimit:3,onButtonClick:function(t,r){return n.tableButtonClick(t,r,e,a,o)}})}}),e}},{key:"componentDidMount",value:function(){var t=this;this.props.MultiInit.getMultiLang({moduleId:"10140ACMAP",domainName:"uapbd",callback:function(e,n,a){n&&t.setState({json:e,inlt:a},(function(){t.initTemplate(t.props)}))}});var e={Enable:!0,Disable:!0};0==this.props.table.getAllTableData(this.tableId).rows.length&&(e.Print=!0,e.Output=!0),this.props.button.setButtonDisabled(e)}},{key:"tableButtonClick",value:function(t,e,n,a,o){var r=this;switch(e){case"RowEdit":var i=a[d].value;t.pushTo("/card",{status:"edit",pagecode:"10140ACMAP_card",id:i});break;case"RowDel":var s=[{id:a[d].value,ts:a.ts.value}];(0,l.ajax)({url:f,data:{deleteInfo:s},success:function(e){e.success&&((0,l.toast)({color:"success",content:r.state.json["10140SPF-000046"]}),t.table.deleteTableRowsByIndex(c,o))}})}}},{key:"buttonClick",value:function(t,e){switch(e){case"Add":t.pushTo("/card",{pagecode:"10140ACMAP_card",status:"add"});break;case"Refresh":this.refreshAction(t,!0);break;case"Delete":(0,l.promptBox)({color:"warning",title:this.state.json["10140ACMAP-000004"],content:this.state.json["10140ACMAP-000005"],noFooter:!1,noCancelBtn:!1,beSureBtnName:this.state.json["10140ACMAP-000006"],cancelBtnName:this.state.json["10140ACMAP-000007"],beSureBtnClick:this.deleteAction.bind(this)})}}},{key:"onRowClick",value:function(t,e,n,a){}},{key:"updateButtonStatus",value:function(){var t=this.props.table.getCheckedRows(this.tableId);null==t||0==t.length?this.props.button.setButtonDisabled({Delete:!0}):this.props.button.setButtonDisabled({Delete:!1})}},{key:"getData",value:function(t,e){var n=this,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments[3];(0,l.ajax)({url:p,data:{},success:function(t){if(n.props.button.setButtonDisabled({Enable:!0,Disable:!0}),t.data){var e=[];t.data[c].rows.forEach((function(t){e.push(t.values[d].value)})),n.props.button.setButtonDisabled({Print:!1,Output:!1}),t.data[c].allpks=e,n.props.table.setAllTableData(n.tableId,t.data[c]);var r=e.length,i=n.state.inlt;a&&(0,l.toast)({title:n.state.json["10140ACMAP-000035"],content:i.get("10140ACMAP-000042",{count:r}),color:"success"})}else{n.props.button.setButtonDisabled({Print:!0,Output:!0}),n.props.table.setAllTableData(c,{allpks:[],rows:[]}),a&&(0,l.toast)({content:n.state.json["10140ACMAP-000036"],color:"warning",title:n.state.json["10140ACMAP-000037"]})}o&&"function"==typeof o&&o()}})}},{key:"render",value:function(){var t=this.props,e=t.table,n=t.button,a=t.search,o=t.modal,r=t.BillHeadInfo,i=l.base.NCDiv,u=this.props.button.getButtons();u=u.sort((function(t,e){return e.btnorder-t.btnorder}));var c=r.createBillHeadInfo,p=e.createSimpleTable,f=(a.NCCreateSearch,o.createModal),b=n.createButtonApp;n.getButtons;return s.default.createElement("div",{className:"nc-bill-list"},s.default.createElement(i,{areaCode:i.config.HEADER,className:"nc-bill-header-area"},s.default.createElement("div",{className:"header-title-search-area"},c({title:this.state.json?this.state.json["10140ACMAP-000029"]:"10140ACMAP-000029",initShowBackBtn:!1})),s.default.createElement("div",{className:"header-button-area"},b({area:"header-action",buttonLimit:3,onButtonClick:this.buttonClick.bind(this),popContainer:document.querySelector(".header-button-area")}))),s.default.createElement("div",{className:"nc-bill-table-area"},p(this.tableId,{dataSource:"upabd.pubinfo.periodmapping.data",pkname:d,tableModelConfirm:this.tableModelConfirm,showIndex:!1,showCheck:!0,onRowDoubleClick:this.doubleClick.bind(this),onSelected:this.updateButtonStatus.bind(this),onSelectedAll:this.updateButtonStatus.bind(this),adaptionHeight:!0})),f("delete",{title:this.state.json?this.state.json["10140ACMAP-000004"]:"10140ACMAP-000004",content:this.state.json?this.state.json["10140ACMAP-000005"]:"10140ACMAP-000005",beSureBtnClick:this.deleteAction.bind(this)}))}}]),e}(i.Component),o=function(){var t=this;this.initTemplate=function(e){e.createUIDom({pagecode:"10140ACMAP_list"},(function(n){if(n){if(n.template){var a=n.template;a=t.modifierMeta(e,a),e.meta.setMeta(a),(0,l.ajax)({url:p,data:{},success:function(n){if(n.data)e.table.setAllTableData(c,n.data[c]);else{e.table.setAllTableData(c,{allpks:[],rows:[]})}var a,o,r;n.formulamsg&&n.formulamsg instanceof Array&&n.formulamsg.length>0&&t.props.dealFormulamsg(n.formulamsg,(r="editTable",(o=c)in(a={})?Object.defineProperty(a,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[o]=r,a))}})}if(n.button){var o=n.button;e.button.setButtons(o,(function(){t.updateButtonStatus()})),e.button.setPopContent("RowDel",t.state.json["10140ACMAP-000043"])}}}))},this.doubleClick=function(e,n,a,o){t.props.pushTo("/card",{pagecode:"10140ACMAP_card",status:"browse",id:e[d].value})},this.deleteAction=function(e){var n=t.props.table.getCheckedRows(c),a=[];n&&0!=n.length?(n.forEach((function(t){a.push({id:t.data.values[d].value,ts:t.data.values.ts.value})})),(0,l.ajax)({url:f,data:{deleteInfo:a},success:function(n){(0,l.toast)({color:"success",title:t.state.json["10140ACMAP-000019"]}),t.refreshAction(e)}})):taost({color:"warning",content:t.state.json["10140SACLSO-000027"]})},this.refreshAction=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.getData({},t.state.isShowOff,!1,(function(){n&&(0,l.toast)({title:t.state.json["10140ACMAP-000013"],color:"success"})}))},this.clickSearchBtn=function(e,n){t.searchVal=n,l.cacheTools.set("searchParams",n),t.getData(n,t.state.isShowOff,!0)}},a);b=(0,l.createPage)({initTemplate:[],mutiLangCode:"10140ACMAP"})(b),e.default=b},2:function(t,n){t.exports=e},3:function(t,e){t.exports=n}})}));
//# sourceMappingURL=index.3b9aaf25.js.map