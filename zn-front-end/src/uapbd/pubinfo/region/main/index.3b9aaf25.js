/*! @ncctag {"project":"","branch":"","provider":"","date":"2020-5-11 15:03:01"} */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nc-lightapp-front"),require("react")):"function"==typeof define&&define.amd?define(["nc-lightapp-front","react"],t):"object"==typeof exports?exports["uapbd/pubinfo/region/main/index"]=t(require("nc-lightapp-front"),require("react")):e["uapbd/pubinfo/region/main/index"]=t(e["nc-lightapp-front"],e.React)}(window,(function(e,t){return function(e){var t={};function o(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="../../../../",o(o.s=213)}({1:function(t,o){t.exports=e},131:function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var o=function(e,t){var o=e[1]||"",r=e[3];if(!r)return o;if(t&&"function"==typeof btoa){var n=(s=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),a=r.sources.map((function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"}));return[o].concat(a).concat([n]).join("\n")}var s;return[o].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+o+"}":o})).join("")},t.i=function(e,o){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},n=0;n<this.length;n++){var a=this[n][0];"number"==typeof a&&(r[a]=!0)}for(n=0;n<e.length;n++){var s=e[n];"number"==typeof s[0]&&r[s[0]]||(o&&!s[2]?s[2]=o:o&&(s[2]="("+s[2]+") and ("+o+")"),t.push(s))}},t}},132:function(e,t,o){var r,n,a={},s=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===n&&(n=r.apply(this,arguments)),n}),i=function(e){var t={};return function(o){return void 0===t[o]&&(t[o]=e.call(this,o)),t[o]}}((function(e){return document.querySelector(e)})),l=null,c=0,u=[],d=o(135);function p(e,t){for(var o=0;o<e.length;o++){var r=e[o],n=a[r.id];if(n){n.refs++;for(var s=0;s<n.parts.length;s++)n.parts[s](r.parts[s]);for(;s<r.parts.length;s++)n.parts.push(b(r.parts[s],t))}else{var i=[];for(s=0;s<r.parts.length;s++)i.push(b(r.parts[s],t));a[r.id]={id:r.id,refs:1,parts:i}}}}function f(e,t){for(var o=[],r={},n=0;n<e.length;n++){var a=e[n],s=t.base?a[0]+t.base:a[0],i={css:a[1],media:a[2],sourceMap:a[3]};r[s]?r[s].parts.push(i):o.push(r[s]={id:s,parts:[i]})}return o}function h(e,t){var o=i(e.insertInto);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=u[u.length-1];if("top"===e.insertAt)r?r.nextSibling?o.insertBefore(t,r.nextSibling):o.appendChild(t):o.insertBefore(t,o.firstChild),u.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");o.appendChild(t)}}function g(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=u.indexOf(e);t>=0&&u.splice(t,1)}function m(e){var t=document.createElement("style");return e.attrs.type="text/css",A(t,e.attrs),h(e,t),t}function A(e,t){Object.keys(t).forEach((function(o){e.setAttribute(o,t[o])}))}function b(e,t){var o,r,n,a;if(t.transform&&e.css){if(!(a=t.transform(e.css)))return function(){};e.css=a}if(t.singleton){var s=c++;o=l||(l=m(t)),r=E.bind(null,o,s,!1),n=E.bind(null,o,s,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(o=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",A(t,e.attrs),h(e,t),t}(t),r=k.bind(null,o,t),n=function(){g(o),o.href&&URL.revokeObjectURL(o.href)}):(o=m(t),r=I.bind(null,o),n=function(){g(o)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else n()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=s()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var o=f(e,t);return p(o,t),function(e){for(var r=[],n=0;n<o.length;n++){var s=o[n];(i=a[s.id]).refs--,r.push(i)}e&&p(f(e,t),t);for(n=0;n<r.length;n++){var i;if(0===(i=r[n]).refs){for(var l=0;l<i.parts.length;l++)i.parts[l]();delete a[i.id]}}}};var v,y=(v=[],function(e,t){return v[e]=t,v.filter(Boolean).join("\n")});function E(e,t,o,r){var n=o?"":r.css;if(e.styleSheet)e.styleSheet.cssText=y(t,n);else{var a=document.createTextNode(n),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(a,s[t]):e.appendChild(a)}}function I(e,t){var o=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}function k(e,t,o){var r=o.css,n=o.sourceMap,a=void 0===t.convertToAbsoluteUrls&&n;(t.convertToAbsoluteUrls||a)&&(r=d(r)),n&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");var s=new Blob([r],{type:"text/css"}),i=e.href;e.href=URL.createObjectURL(s),i&&URL.revokeObjectURL(i)}},135:function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var o=t.protocol+"//"+t.host,r=o+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var n,a=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(a)?e:(n=0===a.indexOf("//")?a:0===a.indexOf("/")?o+a:r+a.replace(/^\.\//,""),"url("+JSON.stringify(n)+")")}))}},150:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e};t.default=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments[2],s=0,i={},l=function(){2==s&&a&&a(i.templateData||{},i.langData||{},i.inlt||{})};o.callback&&console.log("咱们自己createUIDom会同时获取多语和单据模板,并通过一个回调函数返回, langCfg中的回调函数将被忽略");var c=r({},o,{callback:function(e,t,o){s+=1,t||(0,n.toast)({content:"load muti lang error",color:"warning"}),i.langData=e||{},i.inlt=o||{},l()}});e.MultiInit.getMultiLang(c),e.createUIDom(t,(function(e){s+=1,i.templateData=e||{},l()}))}};var n=o(1)},175:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),a=o(2),s=(r=a)&&r.__esModule?r:{default:r},i=o(1);o(176);i.base.NCButton;var l=i.base.NCProgressBar,c=(i.base.NCIcon,i.base.NCNotification,i.base.NCAffix,function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={dealPro:0,hideNofication:!1,errMsg:""},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"componentWillReceiveProps",value:function(e){e.paramObj.importSign&&this.begDealingProgress()}},{key:"begDealingProgress",value:function(){var e=this.props,t=e.url,o=e.paramObj,r=e.regionProps,n=(this.state.hideNofication,this);(0,i.ajax)({data:o,url:t,loading:!1,success:function(e){e.Success;var t=e.data;n.setState({dealPro:t},(function(){100==t?r.modal.close("importModal"):n.begDealingProgress()}))},error:function(e){n.setState({errMsg:e.data})}})}},{key:"closeNotification",value:function(){this.setState({hideNofication:!0})}},{key:"goNotificationList",value:function(){this.props.openTo("/uap/excelimport/excelImport/importListTable/main/index.html",{appcode:"10160501"})}},{key:"render",value:function(){var e=this.props.importOtherParams.not_show_conflict,t=this.state,o=t.dealPro,r=t.hideNofication,n=null;return 1==o?n=s.default.createElement("p",{className:"tips-txt"}):o>1&&o<100?n=0==e?s.default.createElement(a.Fragment,null,s.default.createElement("p",{className:"tips-txt"},"冲突校验中……"),s.default.createElement(l,{active:!0,now:o,label:o+"%"})):s.default.createElement(a.Fragment,null,s.default.createElement("p",{className:"tips-txt"},"数据导入中……"),s.default.createElement(l,{active:!0,now:o,label:o+"%"})):100==o&&(n=s.default.createElement(a.Fragment,null,s.default.createElement("h4",{className:"tips-txt"},(this.state.errMsg,"后台处理已完成")),s.default.createElement("span",{className:"tips-txt go-import-detail",onClick:this.goNotificationList.bind(this)},"查看导入日志"))),s.default.createElement(a.Fragment,null,"0"==o||r?null:s.default.createElement("section",{class:"item-contain"},n))}}]),t}(a.Component));c.defaultProps={url:"",paramObj:{},listUrl:"",toastArr:[1]},c=(0,i.createPage)({})(c),t.default=c},176:function(e,t,o){var r=o(177);"string"==typeof r&&(r=[[e.i,r,""]]);var n={transform:void 0};o(132)(r,n);r.locals&&(e.exports=r.locals)},177:function(e,t,o){(e.exports=o(131)(!1)).push([e.i,'/* 公共样式文件 created by:liyaoh 2018/06/07 */\n/* common */\n.left {\n  float: left;\n}\n.right {\n  float: right;\n}\n.hide {\n  display: none;\n}\n.clearfix:after {\n  display: block;\n  clear: both;\n  content: "";\n  visibility: hidden;\n  height: 0;\n}\n',""])},2:function(e,o){e.exports=t},213:function(e,t,o){"use strict";var r,n,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},s=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),i=o(2),l=f(i),c=o(1),u=f(o(214)),d=f(o(150)),p=o(215);function f(e){return e&&e.__esModule?e:{default:e}}function h(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var g=c.base.NCMenu,m=(c.base.NCDropdown,c.base.NCCheckbox),A=(c.base.NCPopconfirm,c.base.NCMessage,c.base.NCCol,c.base.NCRow,c.base.NCButton,c.base.NCTooltip,c.base.NCDiv),b=c.base.EmptyAreaTip,v=(g.NCMenuGroup,g.Item),y=c.high.PrintOutput,E=c.high.ExcelImport;o(217);var I="head",k={loadTreeDataUrl:"/nccloud/uapbd/region/loadtreedata.do",queryTemplet:"/nccloud/platform/templet/querypage.do",addCardUrl:"/nccloud/uapbd/region/addcard.do",queryCardUrl:"/nccloud/uapbd/region/querycard.do",enablestateUrl:"/nccloud/uapbd/region/enablestate.do",deleteUrl:"/nccloud/uapbd/region/deltreenode.do",printUrl:"/nccloud/uapbd/region/print.do",checkUrl:"/nccloud/uapbd/region/regioncheck.do",saveUrl:"/nccloud/uapbd/region/savenode.do"},C=void 0,S=(r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.call(o),o.config=Object.assign({title:"10140REG-000000",treeId:"regionTree",formId:I,pageCode:"10140REG_region",nodeType:"GROUP_NODE",isGlbGrp:"0",urls:k},e.config),o.root={isleaf:!1,key:"~",title:o.config.title,id:"~",innercode:"~",pid:"",refname:o.config.title,refpk:"~"},o.initButtonStatus=o.initButtonStatus.bind(o),o.changeButtonStatus=o.changeButtonStatus.bind(o),o.onStartRegion=o.onStartRegion.bind(o),o.onStopRegion=o.onStopRegion.bind(o),o.dealTreeData=o.dealTreeData.bind(o),o.state={cardEmpty:!0,disabledSearch:!1,checked:!1,ids:[],json:{},disabledShowOff:!1,curCountry:"",curSelectedNode:null,conflictDataList:[]},o.initTemplate(e,(function(){o.getTreeData()})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"dealTreeData",value:function(e){return e.forEach((function(e){e.iconBox={delIcon:!0,editIcon:!0,addIcon:!0},function e(t){t.iconBox={delIcon:!0,editIcon:!0,addIcon:!0},t.children&&0!=t.children.length?(t.isLeaf=!1,t.children.forEach((function(t){e(t)}))):delete t.children}(e)})),e}},{key:"componentWillMount",value:function(){}},{key:"componentDidUpdate",value:function(){var e=this.props.form.getFormStatus(this.config.formId);window.onbeforeunload="add"!=e&&"edit"!=e?null:function(){return""}}},{key:"initButtonStatus",value:function(){this.props.button.setButtonVisible("save",!1),this.props.button.setButtonVisible("saveAdd",!1),this.props.button.setButtonVisible("cancel",!1),this.props.button.setButtonVisible("print",!0),this.props.button.setButtonVisible("output",!0),this.props.button.setButtonVisible("refresh",!0)}},{key:"onSelectTree",value:function(e){var t=this;if("edit"!=this.props.form.getFormStatus(this.config.formId))return e==this.root.refpk?(this.props.form.EmptyAllFormValue(this.config.formId),void this.props.form.setFormItemsDisabled(this.config.formId,{enablestate:!0})):void(0,c.ajax)({url:this.config.urls.queryCardUrl,data:{pk_region:e,isGlbGrp:this.config.isGlbGrp},success:function(e){if(e.success){e.formulamsg&&e.formulamsg instanceof Array&&e.formulamsg.length>0&&props.dealFormulamsg(e.formulamsg,h({},t.config.formId,"form"));var o=e.data.head.rows[0].values;if(o.hasOwnProperty("enablestate")){var r=o.enablestate.value;e.data.head.rows[0].values.enablestate.value="2"==r}o.pk_father.value==t.root.refpk&&(e.data.head.rows[0].values.pk_father.display="",e.data.head.rows[0].values.pk_father.value=""),t.props.form.EmptyAllFormValue(t.config.formId),t.props.form.setAllFormValue({head:e.data.head}),t.props.form.setFormItemsDisabled(t.config.formId,{enablestate:!1})}}})}},{key:"onBeforerFormEvent",value:function(e,t,o,r,n){switch(o){case"pk_father":var a=e.meta.getMeta();return a.head.items.map((function(e){"pk_father"==e.attrcode&&(e.queryCondition=function(){return{pk_country:n.pk_country.value}})})),e.meta.setMeta(a),!0;default:return!0}}},{key:"onAfterFormEvent",value:function(e,t,o,r,n){var a=this;switch(o){case"enablestate":var s=this.props.syncTree.getSelectNode(this.config.treeId);if(!s){var i=r.value?this.state.json["10140REG-000001"]:this.state.json["10140REG-000002"];return void(0,c.toast)({content:i,color:"warning"})}var l={pk_region:s.refpk,enablestate:r.value?"2":"1"};(0,c.ajax)({data:l,url:"/nccloud/uapbd/region/regionenablecheck.do",success:function(t){(0,c.promptBox)({color:"warning",title:r.value?a.state.json["10140REG-000027"]:a.state.json["10140REG-000028"],content:r.value?a.state.json["10140REG-000004"]:a.state.json["10140REG-000005"],beSureBtnClick:function(){(0,c.ajax)({url:a.config.urls.enablestateUrl,data:l,success:function(e){(0,c.toast)({title:r.value?a.state.json["10140REG-000006"]:a.state.json["10140REG-000007"],color:"success"})}})},cancelBtnClick:function(){e.form.setFormItemsValue(a.config.formId,{enablestate:{value:!r.value,display:!r.value}})}})}})}}},{key:"onAddRegion",value:function(e){var t=this;if(this.state.curCountry.refpk){this.setState({curSelectedNode:e});var o={pk_country:this.state.curCountry.refpk,pk_father:e?e.refpk:this.root.refpk};(0,c.ajax)({url:this.config.urls.addCardUrl,data:o,success:function(o){o.success&&(t.props.form.EmptyAllFormValue(t.config.formId),o.formulamsg&&o.formulamsg instanceof Array&&o.formulamsg.length>0&&props.dealFormulamsg(o.formulamsg,h({},t.config.formId,"form")),t.props.form.setFormStatus(t.config.formId,"edit"),o.data.head.rows[0].values.pk_father.value==t.root.refpk&&(o.data.head.rows[0].values.pk_father.display="",o.data.head.rows[0].values.pk_father.value=""),t.props.form.setAllFormValue({head:o.data.head}),t.props.form.setFormItemsDisabled(t.config.formId,{enablestate:!0}),t.props.syncTree.setNodeDisable(t.config.treeId,!0),t.setState({disabledSearch:!0,disabledShowOff:!0}),t.changeButtonStatus(e,"add"))}}),this.appendInputTip()}else(0,c.toast)({content:this.state.json["10140REG-000008"],color:"warning"})}},{key:"onEditRegion",value:function(e){var t=this;this.setState({curSelectedNode:e}),e?((0,c.ajax)({url:this.config.urls.checkUrl,data:{pk_region:e.refpk,isGlbGrp:this.config.isGlbGrp},success:function(o){o.success&&(o.formulamsg&&o.formulamsg instanceof Array&&o.formulamsg.length>0&&props.dealFormulamsg(o.formulamsg,h({},t.config.formId,"form")),t.props.syncTree.setNodeDisable(t.config.treeId,!0),o.data.head.rows[0].values.pk_father.value==t.root.refpk&&(o.data.head.rows[0].values.pk_father.display="",o.data.head.rows[0].values.pk_father.value=""),t.props.form.setAllFormValue({head:o.data.head}),t.props.form.setFormItemsDisabled(t.config.formId,{enablestate:!0}),t.props.form.setFormStatus(t.config.formId,"edit"),t.changeButtonStatus(e,"edit"),t.setState({disabledSearch:!0,disabledShowOff:!0}))}}),this.appendInputTip()):(0,c.toast)({content:this.state.json["10140REG-000009"],color:"warning"})}},{key:"onSaveRegion",value:function(){var e=this,t=this.props.syncTree.getSelectNode(this.config.treeId);t||(t=this.state.curSelectedNode);var o,r=this.props.form.getAllFormValue(this.config.formId);r.areacode=this.config.formId,r.rows.status="2",o={model:r,pageid:this.config.pageCode};var n=null;r.rows[0].values.hasOwnProperty("pk_region")&&(n=r.rows[0].values.pk_region.value);var a=!1;null!=n&&""!=n||(a=!0),this.props.validateToSave(o,(function(){(0,c.ajax)({url:e.config.urls.saveUrl,data:o,success:function(o){if(o.success){if(console.log(o),o.data.message)return void(0,c.toast)({title:o.data.message,color:"error"});e.props.form.setFormStatus(e.config.formId,"browse"),e.props.syncTree.setNodeDisable(e.config.treeId,!1),o.data.tree[0].children&&0!=o.data.tree[0].children.length||delete o.data.tree[0].children,a?e.props.syncTree.addNodeSuccess(e.config.treeId,o.data.tree[0]):e.props.syncTree.editNodeSuccess(e.config.treeId,o.data.tree[0]),e.props.syncTree.openNodeByPk(e.config.treeId,o.data.tree[0].pid),e.props.syncTree.setNodeSelected(e.config.treeId,o.data.tree[0].refpk),e.props.form.setFormStatus(e.config.formId,"browse"),e.props.form.EmptyAllFormValue(e.config.formId),o.data.form[e.config.formId].rows[0].values.pk_father.value==e.root.refpk&&(o.data.head.rows[0].values.pk_father.display="",o.data.head.rows[0].values.pk_father.value=""),e.props.form.setAllFormValue(h({},e.config.formId,o.data.form[e.config.formId])),e.props.form.setFormItemsDisabled(e.config.formId,{enablestate:!1}),e.setState({curSelectedNode:null,disabledSearch:!1,disabledShowOff:!1}),(0,c.toast)({title:e.state.json["10140REG-000010"],color:"success"}),e.changeButtonStatus(t,"save"),e.removeInputTip()}}})}),h({},this.config.formId,"form"),"form")}},{key:"onSaveAddRegion",value:function(){var e=this,t=this.props.syncTree.getSelectNode(this.config.treeId),o={},r=this.props.form.getAllFormValue(this.config.formId);r.areacode=this.config.formId,r.rows.status="2",o={model:r,pageid:"10140REG_region"};var n=null;r.rows[0].values.hasOwnProperty("pk_region")&&(n=r.rows[0].values.pk_region.value);this.props.validateToSave(o,(function(){(0,c.ajax)({url:e.config.urls.saveUrl,data:o,success:function(r){r.success&&(e.props.form.setFormStatus(e.config.formId,"browse"),r.data.tree[0].children&&0!=r.data.tree[0].children.length||delete r.data.tree[0].children,e.props.syncTree.addNodeSuccess(e.config.treeId,r.data.tree[0]),e.props.syncTree.openNodeByPk(e.config.treeId,r.data.tree[0].pid),t||(e.props.syncTree.setNodeSelected(e.config.treeId,r.data.tree[0].pid),t=e.props.syncTree.getSelectNode(e.config.treeId)),e.props.syncTree.setNodeDisable(e.config.treeId,!0),o=t?{pk_country:e.state.curCountry.refpk,pk_father:t.refpk}:{pk_country:e.state.curCountry.refpk,pk_father:e.root.refpk},(0,c.ajax)({url:e.config.urls.addCardUrl,data:o,success:function(o){o.success&&(e.props.form.EmptyAllFormValue(e.config.formId),o.data.head.rows[0].values.pk_father.value==e.root.refpk&&(o.data.head.rows[0].values.pk_father.display="",o.data.head.rows[0].values.pk_father.value=""),e.props.form.setAllFormValue({head:o.data.head}),e.props.form.setFormStatus(e.config.formId,"edit"),(0,c.toast)({title:e.state.json["10140REG-000010"],color:"success"}),e.changeButtonStatus(t,"saveAdd"),e.removeInputTip())}})),e.setState({disabledSearch:!0,disabledShowOff:!0})}})}),h({},this.config.formId,"form"),"form")}},{key:"onDeleteRegion",value:function(e){var t=this,o={};if(e)if(e.refpk!=this.root.refpk){var r=this.state.json["10140REG-000013"];e.hasOwnProperty("children")&&null!=e.children&&e.children.length>0?(0,c.toast)({content:this.state.json["10140REG-000014"],color:"warning"}):(0,c.promptBox)({color:"warning",title:this.state.json["10140REG-000015"],content:r,beSureBtnClick:function(){o={pk_region:e.refpk};e.pid;(0,c.ajax)({url:t.config.urls.deleteUrl,data:o,success:function(o){o.success&&(t.props.form.EmptyAllFormValue(t.config.formId),t.props.syncTree.delNodeSuceess(t.config.treeId,e.refpk),(0,c.toast)({title:t.state.json["10140REG-000016"],color:"success"}),t.changeButtonStatus(e,"del"))}})}})}else(0,c.toast)({content:this.state.json["10140REG-000012"],color:"warning"});else(0,c.toast)({content:this.state.json["10140REG-000011"],color:"warning"})}},{key:"onCancelRegion",value:function(){var e=this,t=this.props.syncTree.getSelectNode(this.config.treeId);this.props.form.EmptyAllFormValue(this.config.formId),this.props.form.setFormItemsDisabled(this.config.formId,{enablestate:!0}),t&&"~"!=t.refpk?(0,c.ajax)({url:this.config.urls.queryCardUrl,data:{pk_region:t.refpk,isGlbGrp:this.config.isGlbGrp},success:function(t){t.success&&e.props.form.setAllFormValue({head:t.data.head})}}):this.props.form.EmptyAllFormValue(this.config.formId),this.props.form.setFormStatus(this.config.formId,"browse"),this.props.syncTree.setNodeDisable(this.config.treeId,!1),this.props.form.setFormItemsDisabled(this.config.formId,{enablestate:!0}),this.changeButtonStatus(t,"cancel"),this.setState({disabledSearch:!1,disabledShowOff:!1}),this.removeInputTip()}},{key:"onStartRegion",value:function(){var e,t=this,o=this.props.form.getAllFormValue(this.config.formId),r=this.props.asyncTree.getSelectNodeAsync(this.config.treeId);if(r){if("2"==o.rows[0].values.enablestate.value)return void(0,c.toast)({content:this.state.json["10140REG-000017"],color:"warning"})}else(0,c.toast)({content:this.state.json["10140REG-000001"],color:"warning"});e={pk_region:o.rows[0].values.pk_region.value,enablestate:"2"},(0,c.ajax)({url:this.config.urls.enablestateUrl,data:e,success:function(e){t.props.form.setAllFormValue({head:e.data.head}),t.refreshTreeNode(t.config.treeId,r.pid),t.changeButtonStatus("start")}})}},{key:"onStopRegion",value:function(){var e,t=this,o=this.props.form.getAllFormValue(this.config.formId),r=this.props.asyncTree.getSelectNodeAsync(this.config.treeId);if(r){if("1"==o.rows[0].values.enablestate.value)return void(0,c.toast)({content:this.state.json["10140REG-000018"],color:"warning"})}else(0,c.toast)({content:this.state.json["10140REG-000002"],color:"warning"});e={pk_region:o.rows[0].values.pk_region.value,enablestate:"1"},(0,c.ajax)({url:this.config.urls.enablestateUrl,data:e,success:function(e){e.success&&(t.props.form.EmptyAllFormValue(t.config.formId),t.refreshTreeNode(t.config.treeId,r.pid),t.changeButtonStatus("stop"))}})}},{key:"onMoreSelect",value:function(e){var t=e.key;"start"==t?this.onStartRegion():"stop"==t&&this.onStopRegion()}},{key:"onVisibleChange",value:function(e){}},{key:"onMore",value:function(){}},{key:"changeButtonStatus",value:function(e,t){var o=this.props.syncTree.getSyncTreeValue(this.config.treeId);if(o){var r=this.getTreeAllPks(o);r&&0!==r.length?this.props.button.setDisabled({print:!1,output:!1}):this.props.button.setDisabled({print:!0,output:!0})}switch(t){case"add":case"saveAdd":this.props.button.setButtonVisible("save",!0),this.props.button.setButtonVisible("saveAdd",!0),this.props.button.setButtonVisible("cancel",!0),this.props.button.setButtonVisible("print",!1),this.props.button.setButtonVisible("import_group",!1),this.props.button.setButtonVisible("output",!1),this.props.button.setButtonVisible("refresh",!1),this.props.button.setDisabled({save:!1,saveAdd:!1,cancel:!1});break;case"edit":this.props.button.setButtonVisible("save",!0),this.props.button.setButtonVisible("saveAdd",!1),this.props.button.setButtonVisible("cancel",!0),this.props.button.setButtonVisible("print",!1),this.props.button.setButtonVisible("import_group",!1),this.props.button.setButtonVisible("output",!1),this.props.button.setButtonVisible("refresh",!1),this.props.button.setDisabled({save:!1,cancel:!1});break;case"del":this.props.button.setButtonVisible("save",!1),this.props.button.setButtonVisible("saveAdd",!1),this.props.button.setButtonVisible("cancel",!1);break;case"save":case"cancel":this.props.button.setButtonVisible("save",!1),this.props.button.setButtonVisible("saveAdd",!1),this.props.button.setButtonVisible("print",!0),this.props.button.setButtonVisible("output",!0),this.props.button.setButtonVisible("refresh",!0),this.props.button.setButtonVisible("cancel",!1),"0001Z010000000079UJJ"==this.state.curCountry.refpk?this.props.button.setButtonVisible("import_group",!0):this.props.button.setButtonVisible("import_group",!1)}}},{key:"onAddNodeCallBack",value:function(e,t,o){var r=this,n=this.props.syncTree.getSelectNode(this.config.treeId),a={};a.pid=n?n.refpk:this.root.refpk,(0,c.ajax)({url:this.config.urls.addCardUrl,data:a,success:function(e){e.success&&(r.props.form.EmptyAllFormValue(r.config.formId),r.props.form.setAllFormValue(e.data),r.props.form.setFormStatus(r.config.formId,"edit"),r.props.syncTree.setNodeDisable(r.config.treeId,!0))}})}},{key:"onEditNodeCallBack",value:function(e,t,o){var r=this,n=this.props.syncTree.getSelectNode(this.config.treeId),a={};n?(a.pk_region=n.refpk,(0,c.ajax)({url:this.config.urls.queryCardUrl,data:a,success:function(e){r.props.form.EmptyAllFormValue(r.config.formId),r.props.form.setAllFormValue(e.data),r.props.form.setFormStatus(r.config.formId,"edit"),r.props.syncTree.setNodeDisable(r.config.treeId,!0)}})):(0,c.toast)({content:this.state.json["10140REG-000009"],color:"warning"})}},{key:"onDelNodeCallBack",value:function(e,t,o){var r=this,n=this.props.syncTree.getSelectNode(this.config.treeId),a={};n?(a.pk_region=n.refpk,(0,c.ajax)({url:this.config.urls.deleteUrl,data:a,success:function(e){e.success&&r.props.syncTree.delNodeSuceess(r.config.treeId,n.refpk)}})):(0,c.toast)({content:this.state.json["10140REG-000011"],color:"warning"})}},{key:"onMouseEnterEve",value:function(e){}},{key:"onRefresh",value:function(){var e=this,t={checked:this.state.checked,pk_country:this.state.curCountry.refpk};(0,c.ajax)({url:this.config.urls.loadTreeDataUrl,data:t,success:function(t){if(t.success){var o=[Object.assign(a({},e.root),{title:e.state.json[e.root.title],refname:e.state.json[e.root.refname]},{children:t.data})];e.props.syncTree.setSyncTreeData(e.config.treeId,e.dealTreeData(o)),e.props.syncTree.openNodeByPk(e.config.treeId,e.root.refpk),(0,c.toast)({title:e.state.json["10140REG-000019"],color:"success"}),e.props.syncTree.setIconVisible(e.config.treeId,e.dealTreeDataAboutShowOrHide(o))}}})}},{key:"onChange",value:function(e){var t=this,o=this.props.syncTree.getSelectNode(this.config.treeId),r={};o||(0,c.toast)({content:this.state.json["10140REG-000020"],color:"warning"}),r.pk_region=o.refpk,r.enablestate=e?"2":"1",(0,c.ajax)({url:this.config.urls.enablestateUrl,data:r,success:function(r){r.success&&(e?t.props.form.setAllFormValue({head:r.data.head}):(t.props.form.EmptyAllFormValue(t.config.formId),t.props.syncTree.delNodeSuceess(t.config.treeId,o.refpk))),t.refreshTreeNode(t.config.treeId,o.pid)}})}},{key:"onCheckBoxChange",value:function(){var e=this;if(!this.state.disabledShowOff){this.state.checked=!this.state.checked;var t={checked:this.state.checked,pk_country:this.state.curCountry.refpk};(0,c.ajax)({url:this.config.urls.loadTreeDataUrl,data:t,success:function(t){if(t.success){var o=[Object.assign(a({},e.root),{title:e.state.json[e.root.title],refname:e.state.json[e.root.refname]},{children:t.data})];o.forEach((function(e){!function e(t){t.children&&0!=t.children.length?(t.isLeaf=!1,t.children.forEach((function(t){e(t)}))):delete t.children}(e)})),e.props.syncTree.setSyncTreeData(e.config.treeId,o),e.props.syncTree.openNodeByPk(e.config.treeId,e.root.refpk),e.props.syncTree.setIconVisible(e.config.treeId,e.dealTreeDataAboutShowOrHide(o))}}})}}},{key:"onCheckBoxClick",value:function(){this.setState({checked:!this.state.checked}),this.props.form.EmptyAllFormValue(this.config.formId)}},{key:"onButtonClick",value:function(e,t){var o=this;switch(t){case"refresh":this.onRefresh.call(this);break;case"save":this.onSaveRegion.call(this);break;case"saveAdd":this.onSaveAddRegion.call(this);break;case"cancel":(0,c.promptBox)({color:"warning",title:this.state.json["10140REG-000021"],content:this.state.json["10140REG-000022"],beSureBtnClick:function(){o.onCancelRegion()}});break;case"print":var r=this.props.syncTree.getSyncTreeValue(this.config.treeId);if(r){var n=this.getTreeAllPks(r);(0,c.print)("pdf",k.printUrl,{funcode:"10140REG",oids:n})}break;case"output":this.onOutput();break;case"export":this.getExportTemplete();break;case"export2":this.getExportTemplete("2");break;case"export1":this.getExportTemplete("1");break;case"export0":this.getExportTemplete("0");break;case"import":console.log(5555)}}},{key:"onCountryChange",value:function(e){var t=this;e&&e.refpk?this.setState({cardEmpty:!1}):this.setState({cardEmpty:!0});var o=this.props.meta.getMeta();o[I].items.map((function(t){"pk_father"==t.attrcode&&(t.queryCondition=function(){return{pk_country:e.refpk}})})),this.props.meta.setMeta(o),this.setState({curCountry:e}),setTimeout((function(){t.loadRegionTreeData(),t.props.form.EmptyAllFormValue(t.config.formId),t.props.form.setFormItemsDisabled(t.config.formId,{enablestate:!0})}),10),"0001Z010000000079UJJ"==e.refpk?this.props.button.setButtonVisible("import_group",!0):this.props.button.setButtonVisible("import_group",!1)}},{key:"loadRegionTreeData",value:function(){var e=this;(0,c.ajax)({loading:!0,url:this.config.urls.loadTreeDataUrl,data:{checked:this.state.checked,pk_country:this.state.curCountry.refpk},success:function(t){if(t.success){t.data?e.props.button.setDisabled({print:!1,output:!1}):e.props.button.setDisabled({print:!0,output:!0});var o=[Object.assign(a({},e.root),{title:e.state.json[e.root.title],refname:e.state.json[e.root.refname]},{children:t.data})];e.props.syncTree.setSyncTreeData(e.config.treeId,e.dealTreeData(o)),e.props.syncTree.openNodeByPk(e.config.treeId,e.root.refpk),e.props.syncTree.setIconVisible(e.config.treeId,e.dealTreeDataAboutShowOrHide(o))}}})}},{key:"modalContent",value:function(){var e=[];console.log(333),console.log(this.state.conflictDataList);var t=[];return t.push(l.default.createElement("li",null,"待导入的数据与当前系统的行政区划，出现编码相同名称不同的情况，请检查是否需要修改！")),t.push(l.default.createElement("li",null,"执行【直接导入】后将进行更新任务，这部分数据会被覆盖。")),t.push(this.state.conflictDataList.map((function(e,t){return l.default.createElement("li",null,e)}))),e.push(l.default.createElement("ul",{class:"groupOperationMsg"},[].concat(t))),e}},{key:"render",value:function(){var e=this.props,t=e.asyncTree,o=e.button,r=e.syncTree,n=e.modal,s=e.DragWidthCom,i=e.treeTable,c=e.form,d=e.BillHeadInfo,p=(i.createTreeTable,d.createBillHeadInfo),f=this.state.cardEmpty,h=o.createButtonApp,I=c.createForm,C=r.createSyncTree,S=n.createModal;t.createAsyncTree;this.conflictDataList=[];l.default.createElement(g,{onSelect:this.onMoreSelect.bind(this)},l.default.createElement(v,{key:"start"},this.state.json["10140REG-000027"]),l.default.createElement(v,{key:"stop"},this.state.json["10140REG-000028"]));return l.default.createElement("div",null,S("modal",{noFooter:!1}),S("importModal",{noFooter:!1,rightBtnName:"",leftBtnName:"确定"}),S("showConflictData",{title:"冲突数据提示",noFooter:!1,rightBtnName:"查看导入日志",cancelBtnClick:this.lookImportLogBtnClick,leftBtnName:"确定",content:this.modalContent()}),l.default.createElement("div",{className:"nc-bill-tree-card"},l.default.createElement(A,{className:"header",areaCode:A.config.HEADER},l.default.createElement("div",{className:"title"},p({title:this.state.json["10140REG-000000"],backBtnClick:function(){},initShowBackBtn:!1})),l.default.createElement("div",{className:"search-box",style:{width:200}},l.default.createElement("span",{style:{marginTop:9,zIndex:1e3,float:"left",position:"relative",color:"red"}},l.default.createElement("span",{style:{position:"absolute",left:3}},"*")),(0,u.default)({fieldid:"countryexgrid",onChange:this.onCountryChange.bind(this),value:this.state.curCountry,disabled:this.state.disabledSearch})),l.default.createElement("span",{className:"showOff"},l.default.createElement(m,{defaultChecked:!1,checked:this.state.checked,onChange:this.onCheckBoxChange.bind(this),disabled:this.state.disabledShowOff,size:"lg"},this.state.json["10140REG-000029"])),l.default.createElement("div",{className:"btn-group"},h({area:"head",buttonLimit:3,onButtonClick:this.onButtonClick.bind(this),popContainer:document.querySelector(".btn-group")})))),l.default.createElement("div",{className:"tree-card"},l.default.createElement(s,{leftDom:l.default.createElement("div",{className:"tree-area"},C({treeId:this.config.treeId,disabledSearch:this.state.disabledSearch,needEdit:!0,showLine:!1,needSearch:!0,onSelectEve:this.onSelectTree.bind(this),onMouseEnterEve:this.onMouseEnterEve.bind(this),clickEditIconEve:this.onEditRegion.bind(this),clickAddIconEve:this.onAddRegion.bind(this),clickDelIconEve:this.onDeleteRegion.bind(this),showModal:!1})),rightDom:l.default.createElement("div",{style:{height:"100%"}},l.default.createElement(b,{desc:this.state.json["10140REG-000030"],show:f}),l.default.createElement("div",{className:"card-area",style:{display:f?"none":"block"}},I(this.config.formId,{cancelPSwitch:!0,onBeforeEvent:this.onBeforerFormEvent.bind(this),onAfterEvent:this.onAfterFormEvent.bind(this)}))),defLeftWid:"20%"}),l.default.createElement(y,{ref:"printOutput",url:k.printUrl,data:{funcode:"10140REG",oids:this.state.ids,outputType:"output"}}),l.default.createElement("div",null,l.default.createElement(E,a({},Object.assign(this.props),{moduleName:"uapbd",billType:"region",appcode:"10140REG",pagecode:"10140REG_region"})))))}}]),t}(i.Component),n=function(){var e=this;this.initTemplate=function(t,o){(0,d.default)(t)({pagecode:"10140REG_region"},{moduleId:"10140REG",domainName:"uapbd"},(function(r,n){var a=e;if(n&&(e.state.json=n),r){console.log(r),t.button.setButtonVisible("import_group",!1);var s=(0,p.excelImportconfig)(t,"uapbd","region",!0,"",{appcode:"10140REG",pagecode:"10140REG_region",pk_country:"0001Z010000000079UJJ",not_show_conflict:"0"},(function(t,o){console.log("成功上传，校验冲突"),a.state.conflictDataList=o,console.log(2222),console.log(a.state.conflictDataList),setTimeout((function(){e.props.modal.show("showConflictData")}),200)}));t.button.setUploadConfig("import",s);var i=(0,p.excelImportconfig)(t,"uapbd","region",!0,"",{appcode:"10140REG",pagecode:"10140REG_region",pk_country:"0001Z010000000079UJJ",not_show_conflict:"1"},(function(t,o){console.log("成功上传,直接导入"),e.onRefresh()}));t.button.setUploadConfig("import_direct",i),C=r.template,C=e.modifierMeta(C,t),t.meta.setMeta(C),r.button&&t.button.setButtons(r.button),t.button.setDisabled({print:!0,output:!0}),o&&o()}}))},this.modifierMeta=function(e,t){return e},this.dealTreeDataAboutShowOrHide=function(t){var o=[],r=e,n=function(e){var t=!0,n=!0;e.isvisible&&5==e.isvisible||e.refpk==r.root.refpk?(t=!1,n=!1):(t=!0,n=!0);var a={key:e.refpk,value:{delIcon:t,editIcon:n,addIcon:!0}};o.push(a)};return t.forEach((function(e){n(e),function e(t){n(t),t.children&&0!=t.children.length&&t.children.forEach((function(t){e(t)}))}(e)})),o},this.getTreeData=function(){var t={checked:e.state.checked,pk_country:e.state.curCountry.refpk};(0,c.ajax)({url:e.config.urls.loadTreeDataUrl,data:t,success:function(t){if(t.success){var o=[Object.assign(a({},e.root),{title:e.state.json[e.root.title],refname:e.state.json[e.root.refname]},{children:t.data})];e.props.syncTree.setSyncTreeData(e.config.treeId,e.dealTreeData(o)),e.props.syncTree.openNodeByPk(e.config.treeId,e.root.refpk),e.props.syncTree.setIconVisible(e.config.treeId,e.dealTreeDataAboutShowOrHide(o))}}}),e.initButtonStatus()},this.getExportTemplete=function(t){var o=e.props,r=o.exportTreeUrl,n=(o.appcode,o.pagecode,o.referVO),a=void 0===n?{}:n;(0,c.ajax)({url:r||"/nccloud/uapdr/trade/schemeTreeToTreeQuery.do",data:{moduleName:"uapbd",billType:"region",appcode:"10140REG",pagecode:"10140REG_region",params:a,ignoreTemplate:a.referVO||!1},success:function(o){o.data&&(e.setState({leftTreeData:o.data.leftdata||[],rightTreeData:o.data.rightdata||[],treeValue:o.data,fileTypeArr:o.data.billType||[]}),e.downloadTempleteExcel(t))}})},this.appendInputTip=function(){setTimeout((function(){console.log("appendInputTip");var t=document.getElementsByClassName("lightapp-component-form")[0].childNodes[0].childNodes[1];t.style="width: 33.33333%;position: relative;";var o=document.createElement("img");o.setAttribute("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAHmSURBVEhL5ZVPq0FRFMXf1/QhTIwYSJGUIpkpJVGMJBJKSUkGklKKgYQQA4T8zXqt887Fffe6T69n9H6l7ln3OuvsffY+5wNv5p8Y7Pd7bDYb8Tufz1J9jacGnKxYLMLhcMDlciEcDiMYDMJut8Pr9aLVauF0Osmvn6MxuF6v4s9utxvNZhPH41G+ubNer5HNZuHz+TCdTqWqj8qAk1erVUSjUZGWnxiNRvD7/RiPx1LRojLodDqIxWI4HA5SgXiu1+tIpVLIZDLo9XpiIQqcPBQKYbVaSUXNzWC73SISiWA+n0vlKxXMu8lkgs1mg8ViEc/5fF5l0mg0UCgUVJrCzaDdbiOXy6k+qtVqMJvNIjJyuVxEJNwfmitwcUzrcrmUyh1hwEkZfr/fF6LCbrfDcDhUmZZKJXg8HlFljzCqbrcrR3eEASslmUxisVgIUQ+WJAuAaYrH45oSZZr4/js3A4b+fVUKnCyRSIj8c0Mf06PA1RsaGEUwmUxgtVpRqVR0N5IYRvBsDxRmsxmcTicGg4FUtBjuAdGrokfYD6wiPX6sIqLXBwpMHc+kdDotFTUv9QHR62TCcblc1k3hy51MuIK3nkWEJq+epoFAwLB3iMZA4dl9wDGP6V/fB3q85Ub7K95sAHwCfjmMikSgJvcAAAAASUVORK5CYII="),o.setAttribute("id","regionWenHao"),o.setAttribute("style","width: 20px;height: 20px;position: absolute;top: 5px;right: -14px;z-index: 101;");var r=document.createElement("img");r.setAttribute("src","data:image/png;base64,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"),r.setAttribute("id","helpImg"),r.setAttribute("style","width: 220px;height: 55px;position: absolute;top: -38px;right: -36px;display:none;");var n=document.createElement("div");n.setAttribute("style","color:#555555;width: 180px;height: 55px;position: absolute;top: -30px;right: -20px;font-size:10px;display:none;"),n.setAttribute("id","helpText"),n.innerText=e.state.json["10140REG-000031"];var a=document.createElement("div");a.setAttribute("style","color: red;position: absolute;top: 0;right: 0;z-index: 100;"),a.setAttribute("id","parentDiv"),a.appendChild(o),a.appendChild(r),a.appendChild(n),t.appendChild(a),document.getElementById("regionWenHao").addEventListener("click",(function(){})),document.getElementById("regionWenHao").addEventListener("mouseenter",(function(){document.getElementById("helpImg").setAttribute("style","width: 220px;height: 55px;position: absolute;top: -38px;right: -36px;"),document.getElementById("helpText").setAttribute("style","color:#555555;width: 180px;height: 55px;position: absolute;top: -30px;right: -20px;font-size:10px;")})),document.getElementById("regionWenHao").addEventListener("mouseleave",(function(){document.getElementById("helpImg").setAttribute("style","width: 220px;height: 55px;position: absolute;top: -38px;right: -36px;display:none;"),document.getElementById("helpText").setAttribute("style","color:#555555;width: 180px;height: 55px;position: absolute;top: -30px;right: -20px;font-size:10px;display:none;")}))}),100)},this.removeInputTip=function(){var e=document.getElementsByClassName("lightapp-component-form")[0].childNodes[0].childNodes[1],t=document.getElementById("parentDiv");t&&e.removeChild(t)},this.downloadTempleteExcel=function(t){var o=e.props,r=(o.exportTreeUrl,o.appcode,o.pagecode,o.referVO),n=void 0===r?{}:r,a="";e.props.selectedPKS&&e.props.selectedPKS.length>0&&e.props.selectedPKS.map((function(e,t){a=a+e+";"}));var s={moduleName:"uapbd",billType:"region",appcode:"10140REG",pagecode:"10140REG_region",rightdata:e.getrecusionUtil(e.state.rightTreeData),exportDatas:a,ignoreTemplate:n.ignoreTemplate||!1,fileTyp:t};(0,c.formDownload)({params:s,url:"/nccloud/uapdr/trade/excelexport.do",enctype:2}),e.props.modal.close(e.props.moduleId||"exportFileModal")},this.getrecusionUtil=function(e){var t="";return e&&e.length>0&&e.map((function(e,o){t+=e.id+"<>"+e.name+",[[";var r="";e.children&&e.children&&e.children.length>0&&e.children.map((function(e,t){r=r+e.id+"<>"+e.name+"$$"})),t+=r+";"})),t},this.onOutput=function(){var t=e.props.syncTree.getSyncTreeValue(e.config.treeId);if(0!==t.length){var o=e.getTreeAllPks(t);e.setState({ids:o},e.refs.printOutput.open())}else(0,c.toast)({content:e.state.json["10140REG-000023"],color:"warning"})},this.getTreeAllPks=function(e){var t=new Array;return function e(o){o.forEach((function(o){"~"!=o.refpk&&t.push(o.refpk),o.hasOwnProperty("children")&&o.children&&o.children.length>0&&e(o.children)}))}(e),t},this.lookImportLogBtnClick=function(){console.log("lookImportLogBtnClick"),e.props.openTo("/uap/excelimport/importListTable/main/index.html",{appcode:"10140IMPLOG",pagecode:"10140IMPLOG_LOG"})}},r);S=(0,c.createPage)({billinfo:{billtype:"form",pagecode:"10140REG_region",headcode:I}})(S),ReactDOM.render(l.default.createElement(S,null),document.querySelector("#app"))},214:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={multiLang:{domainName:"uapbd",currentLocale:"zh-CN",moduleId:"refer_uapbd"},refType:"grid",refName:"refer-000444",placeholder:"refer-000444",refCode:"uapbd.refer.pubinfo.CountryExDefaultGridRef",queryGridUrl:"/nccloud/uapbd/pub/CountryExDefaultGridRef.do",isMultiSelectedEnabled:!1,columnConfig:[{name:["refer-000002","refer-000441","refer-000003","refer-000422","refer-000442","refer-000443","refer-000445"],code:["refcode","codeth","refname","description","timezonename","formatname","iseucountry"],checked:{description:!1,timezonename:!1,formatname:!1,iseucountry:!1}}]};return React.createElement(n,r({},t,e))};var n=o(1).high.Refer},215:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.excelImportconfig=t.getErrorList=t.ProcessArr=t.getImportConfig=void 0;var r,n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},a=o(175),s=(r=a)&&r.__esModule?r:{default:r},i=o(1),l=o(216);var c=function(e,t,o,r,a,s){var i=void 0,l={name:"file",showUploadList:!1,action:r||"/nccloud/uapdr/trade/excelimport.do",headers:{authorization:"authorization-text"}},c={moduleName:e,billType:t,importSign:(new Date).getTime()};return l.data=a&&Object.keys(a).length?n({},c,a):n({},c),l.NcUploadOnChange=function(e,t){var o=e.file.response;if("uploading"==e.file.status&&e.file.status!=i&&(i="uploading",s({upStaus:"beginUpload",sysTs:t.sendChildDate})),"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status){var r=o.data||o;r.success&&s(r.success,!0),r.error&&s(r.error,!1),console.log(e.file.name+" file uploaded successfully"),i=null}else"error"===e.file.status&&(console.log(e.file.name+" file upload failed."),i=null)},n({},l)},u=function(e){var t=e.upParams,o=e.sysTs,r=e.regionProps,a=e.importOtherParams;return React.createElement("div",{key:o},React.createElement(s.default,{initProNum:1,listUrl:"",url:"/nccloud/uapdr/trade/excelimportproduce.do",paramObj:n({},t,{importSign:o.toString()}),regionProps:r,importOtherParams:a}))},d=function(e){return"Array"===Object.prototype.toString.call(e).slice(8,-1)?e.map((function(e){return e.linelog})):[e.message]};t.getImportConfig=c,t.ProcessArr=u,t.getErrorList=d,t.excelImportconfig=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"uapbd",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"customer",r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=arguments[6];if(r)return c(t,o,l.toastArr.length,n,a,(function(r,n){if(console.log("resultinfo",r),"beginUpload"==r.upStaus)e.modal.close("importModal"),e.modal.show("importModal",{content:React.createElement(u,{sysTs:r.sysTs,upParams:{moduleName:t,billType:o},regionProps:e,importOtherParams:a})});else{var l=void 0;"[object Array]"===Object.prototype.toString.call(r)&&r.length||"[object Object]"===Object.prototype.toString.call(r)?l=d(r):"success"==r||!0===r?(0,i.toast)({duration:500,content:"导入成功，请刷新界面!",color:"success"}):"[object String]"===Object.prototype.toString.call(r)&&(0,i.toast)({duration:500,content:r,color:"info"}),s&&"function"==typeof s&&s("importDone",l)}}))}},216:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.toastArr=[]},217:function(e,t,o){var r=o(218);"string"==typeof r&&(r=[[e.i,r,""]]);var n={transform:void 0};o(132)(r,n);r.locals&&(e.exports=r.locals)},218:function(e,t,o){(e.exports=o(131)(!1)).push([e.i,".tree-card .dragWidthCom .dragWidthCom_right .card-area {\n  padding: 35px 20px;\n}\n",""])}})}));
//# sourceMappingURL=index.3b9aaf25.js.map