/*! @ncctag {"project":"","branch":"","provider":"","date":"2020-5-11 14:48:12"} */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nc-lightapp-front")):"function"==typeof define&&define.amd?define(["nc-lightapp-front"],t):"object"==typeof exports?exports["uapbd/material/custmaterial/util/index"]=t(require("nc-lightapp-front")):e["uapbd/material/custmaterial/util/index"]=t(e["nc-lightapp-front"])}(window,(function(e){return function(e){var t={};function o(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=e,o.c=t,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="../../../../",o(o.s=234)}({1:function(t,o){t.exports=e},200:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.config={queryarea:"10140CMG",tablemater:"custmater",tablesub:"subcustom",urls:{savemater:"/nccloud/uapbd/custmateria/savemater.do",querymater:"/nccloud/uapbd/custmateria/querymater.do",savesub:"/nccloud/uapbd/custmateria/savesub.do",custexist:"/nccloud/uapbd/custmateria/custexist.do",vfreedisable:"/nccloud/uapbd/custmateria/vfreedisable.do",print:"/nccloud/uapbd/custmateria/print.do"}}},234:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setStatus=t.rowDisable=t.initTemplate=void 0;var a=o(200),n=o(1),r=a.config.queryarea,u=a.config.tablemater,i=a.config.tablesub,s=a.config.urls;t.initTemplate=function(e,t,o,a){e.createUIDom({pagecode:e.config.pageCode},(function(o){var b=o.template;b=function(e,t,o){t[u].showindex=!0,t[u].status="browse",t[u].items.forEach((function(e){"materialid"===e.attrcode&&(e.isMultiSelectedEnabled=!0)})),t[i].items.forEach((function(e){"subcustom"===e.attrcode&&(e.isMultiSelectedEnabled=!0,e.isShowDisabledData=!1,e.queryCondition={enablestate:"2",isShowDisabledData:!1})})),t[r].items.forEach((function(e){"materialid.pk_marbasclass"===e.attrcode&&(e.isMultiSelectedEnabled=!0,e.isShowDisabledData=!0),"materialid"===e.attrcode&&(e.isShowDisabledData=!0)}));var a=function(e,t,a,r,l){r.values;switch(t){case"oprextend":case"opredit":d(e,u,"edit"),e.editTable.openModel(u,"edit",r,l,!1);break;case"oprdel":if(c(e,r))return;e.editTable.deleteTableRowsByIndex(u,l);break;case"oprdelbro":if(c(e,r))return;var b={rowId:l,status:"3"};b.values=r.values;var p={pageid:e.config.pageCode,model:{areaType:"table",pageinfo:null,rows:[b]}};(0,n.ajax)({url:s.savemater,data:p,success:function(t){if(t.success){e.editTable.deleteTableRowsByIndex(u,[l]);var a=e.editTable.getAllData(u);a.rows=a.rows.filter((function(e){return"3"!=e.status})),e.editTable.setTableData(u,a),(0,n.toast)({title:o["10140CMG-000012"],color:"success"})}}});break;case"oprdelsub":if(c(e,r))return;e.editTable.deleteTableRowsByIndex(i,l);break;case"oprdelsubbro":if(c(e,r))return;var f={rowId:r.rowid,status:"3",values:{ts:{value:r.values.ts.value},pk_custom:{value:r.values.pk_custom.value}}},m={pageid:e.config.pageCode,model:{areaType:"table",pageinfo:null,rows:[f]}};(0,n.ajax)({url:s.savesub,data:m,success:function(t){if(t.success){e.editTable.deleteTableRowsByIndex(i,[l]);var a=e.editTable.getAllData(i);a.rows=a.rows.filter((function(e){return"3"!=e.status})),e.editTable.setTableData(i,a),(0,n.toast)({title:o["10140CMG-000012"],color:"success"})}}})}};return t[u].items.push({attrcode:"opr",label:o["10140CMG-000026"],itemtype:"customer",width:120,fixed:"right",className:"table-opr",visible:!0,render:function(t,o,n){var r=[];return l(e,o)||(r="browse"===e.editTable.getStatus(u)?["oprdelbro"]:["oprdel"]),e.button.createOprationButton(r,{area:"opractions",buttonLimit:2,onButtonClick:function(e,r){return a(e,r,t,o,n)}})}}),t[i].showindex=!0,t[i].status="browse",t[i].items.push({attrcode:"opr",label:o["10140CMG-000026"],itemtype:"customer",width:150,className:"table-opr",visible:!0,render:function(t,o,n){var r="browse"===e.editTable.getStatus(i)?["oprdelsubbro"]:["oprdelsub"];return e.button.createOprationButton(r,{area:"oprsubactions",buttonLimit:2,onButtonClick:function(e,r){return a(e,r,t,o,n)}})}}),t}(e,b,t),e.meta.setMeta(b);var p=(0,n.excelImportconfig)(e,"uapbd",e.config.billType,!0,"",{appcode:e.config.funcode,pagecode:e.config.pageCode},(function(){a&&a()}));e.button.setUploadConfig("import",p),o.button&&e.button.setButtons(o.button),o.button&&(e.button.setButtons(o.button),e.button.setPopContent("oprdelbro",t["10140CMG-000024"]),e.button.setPopContent("oprdelsubbro",t["10140CMG-000024"])),function(e){"browse"===e.editTable.getStatus(u)?e.button.setButtonsVisible({btnSave:!1,btnCancel:!1,btnAdd:!0,btnEdit:!0}):e.button.setButtonsVisible({btnAdd:!0,btnEdit:!1,btnSave:!0,btnCancel:!0})}(e)}))};var l=t.rowDisable=function(e,t){return t.values.pk_group.value==t.values.pk_org.value&&"ORG_NODE"==e.config.nodeType||t.values.pk_group.value!=t.values.pk_org.value&&"GROUP_NODE"==e.config.nodeType};function c(e,t){if(l(e,t)){if("ORG_NODE"==e.config.nodeType)return(0,n.toast)({content:json["10140CMG-000006"],color:"warning"}),!0;if("GROUP_NODE"==e.config.nodeType)return!1}}var d=t.setStatus=function(e,t,o){e.editTable.setStatus(t,o),window.onbeforeunload="edit"==o?function(){return""}:null}}})}));
//# sourceMappingURL=index.252a21fd.js.map