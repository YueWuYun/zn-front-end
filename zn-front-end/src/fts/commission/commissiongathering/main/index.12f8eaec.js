/*! @ncctag {"provider":"test","date":"2020-5-11 22:19:54"} */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nc-lightapp-front"),require("react"),require("react-dom"),require("axios")):"function"==typeof define&&define.amd?define(["nc-lightapp-front","react","react-dom","axios"],t):"object"==typeof exports?exports["fts/commission/commissiongathering/main/index"]=t(require("nc-lightapp-front"),require("react"),require("react-dom"),require("axios")):e["fts/commission/commissiongathering/main/index"]=t(e["nc-lightapp-front"],e.React,e.ReactDOM,e.axios)}(window,(function(e,t,a,r){return function(e){var t={};function a(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(r,o,function(t){return e[t]}.bind(null,o));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="../../../../",a(a.s=212)}([function(t,a){t.exports=e},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.go2CardCheck=t.tbbWarnDialog=t.showTBBMsg=t.getTBBMsg=t.saveCommit=t.frozenBtnCtrl=t.showErrBtn=t.createCardWebSocket=t.createListWebSocket=t.setRate2NewRow=t.getCacheRateValue=t.bodyRateEditOnAfterEdit=t.addDefReferFilter=t.elecSignCardPrint=t.elecSignListPrint=t.createSimpleBillData=t.buildLightBodyAfterEditData=t.loadMultiLang=t.getMultiLangRes=t.appendMultiLangRes=t.saveMultiLangRes=t.getPropCache=t.setPropCache=t.showPagination=t.setDefOrg2AdvanceSrchArea=t.setDefOrg2ListSrchArea=t.setDefOrg2Form=t.hasDefaultOrg=t.isLinkScene=void 0;var r=a(0),o=a(2);function n(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,a){return function r(o,n){try{var l=t[o](n),i=l.value}catch(e){return void a(e)}if(!l.done)return Promise.resolve(i).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(i)}("next")}))}}var l,i,s=t.isLinkScene=function(e){var t=e.getUrlParam(o.URL_PARAM.SCENE);return!(!!!e.getUrlParam(o.URL_PARAM.TBB_LINK)&&t!=o.SCENE.LINK&&t!=o.SCENE.FIP)},u=t.hasDefaultOrg=function(e){return e&&e.context&&e.context&&e.context.pk_org},d=function(e,t,a){if(!(e&&e.search&&t&&a))return!1;try{var r=e.search.getSearchValByField(t,a);return!(!r||!r.value||!r.value.firstvalue&&!r.value.secondvalue)}catch(e){return!0}},c=(t.setDefOrg2Form=function(e,t,a){if(e&&t&&u(a)){var r=a.context,o=r.pk_org,n=r.org_Name,l=r.pk_org_v,i=r.org_v_Name;e.form.setFormItemsValue(t,{pk_org:{value:o,display:n},pk_org_v:{value:l,display:i}})}},t.setDefOrg2ListSrchArea=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pk_org";if(e&&e.search&&t&&u(a)&&!s(e)&&!d(e,t,r)){var o=a.context,n=o.pk_org,l=o.org_Name,i={display:l,value:n};e.search.setSearchValByField(t,r,i)}},t.setDefOrg2AdvanceSrchArea=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pk_org";if(e&&e.search&&t&&u(a)&&a.template&&!s(e)){var o=a.template,n=a.context,l=n.pk_org,i=n.org_Name;o[t].items.map((function(e){e.attrcode==r&&(e.initialvalue={display:i,value:l})}))}},t.showPagination=function(e,t,a){e&&t&&a&&!a.template&&(a.template[t].pagination=!s(e))},function(e){return e+"_extObj"}),p=(t.setPropCache=function(e,t,a,r){if(e&&t&&a){var o=c(t),n=e.ViewModel.getData(o);n||(n={}),n[a]=r,e.ViewModel.setData(o,n)}},t.getPropCache=function(e,t,a){if(!e||!t||!a)return null;var r=c(t),o=e.ViewModel.getData(r);return o&&o.hasOwnProperty(a)?o[a]:null},t.saveMultiLangRes=function(e,t){if(e&&t){e.ViewModel.setData("multiLang",t)}}),f=(t.appendMultiLangRes=function(e,t){if(e&&t){var a=f(e);a?Object.assign(a,t):p(e,t)}},t.getMultiLangRes=function(e){if(e){return e.ViewModel.getData("multiLang")}}),b=t.loadMultiLang=function(e,t){var a=f(e);return a&&a[t]||""},m=function(e,t){var a={},r=e.form.getAllFormValue(t);return r.areacode=t,a[t]=r,a},g=function(e,t){var a={rows:e.cardTable.getChangedRows(t),areaType:"table",areacode:t},r={};return r[t]=a,r},_=function(e,t,a,r,o,n,l,i){var s={head:m(e,a),pageid:t};return i?s.body=g(e,r):s.bodys=g(e,r),{areacode:r,attrcode:o,card:s,changedrows:n,index:l}},h=(t.buildLightBodyAfterEditData=function(e,t,a,r,o,n,l){var i=arguments.length>7&&void 0!==arguments[7]&&arguments[7];try{if(!(e&&t&&a&&r&&o&&n))throw new Error("参数缺失！");var s=_(e,t,a,r,o,n,l,i),u=s.card,d=u.body,c=u.bodys;if(i&&1==d[r].rows.length||!i&&1==c[r].rows.length)return s;var p=[],f=n[0].rowid;if(!(d=i?d[r]:c[r]))throw new Error("未获取到指定的表体["+r+"]!");var b=d,m=b.rows,g=!0,h=!1,v=void 0;try{for(var y,k=m[Symbol.iterator]();!(g=(y=k.next()).done);g=!0){var w=y.value,I=w.rowid;if(I&&I==f){p.push(w);break}}}catch(e){h=!0,v=e}finally{try{!g&&k.return&&k.return()}finally{if(h)throw v}}if(0==p.length)throw new Error("未找到修改的行!");return d.rows=p,s}catch(e){throw e}},function(e){if(!e||0==e.length)return null;var t=!0,a=!1,r=void 0;try{for(var o,n=e[Symbol.iterator]();!(t=(o=n.next()).done);t=!0){var l=o.value;if(l&&l.values&&0!=Object.keys(l.values).length){var i=l.values,s=Object.keys(i),u=!0,d=!1,c=void 0;try{for(var p,f=s[Symbol.iterator]();!(u=(p=f.next()).done);u=!0){var b=p.value,m=i[b];m&&0!=Object.keys(m).length&&m.value||delete i[b]}}catch(e){d=!0,c=e}finally{try{!u&&f.return&&f.return()}finally{if(d)throw c}}}}}catch(e){a=!0,r=e}finally{try{!t&&n.return&&n.return()}finally{if(a)throw r}}}),v=function(e,t,a,r,o){var n=e.createMasterChildDataSimple(t,a,r),l=n.head,i=n.body;return o&&(h(l[a].rows),h(i[r].rows)),n},y=function(e,t,a,r,o){var n=e.createExtCardDataSimple(t,a,r),l=n.head,i=n.bodys;if(o){h(l[a].rows);var s=!0,u=!1,d=void 0;try{for(var c,p=r[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){var f=c.value;h(i[f].rows)}}catch(e){u=!0,d=e}finally{try{!s&&p.return&&p.return()}finally{if(u)throw d}}}return n},k=t.createSimpleBillData=function(e,t,a,r){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!(e&&t&&a&&r))return null;var n=!!Array.isArray(r)&&r.length>1,l=Array.isArray(r)?r:[r];return n?y(e,t,a,l,o):v(e,t,a,l[0],o)},w=(t.elecSignListPrint=function(e,t){var a=t.url,o=t.offical,n=void 0!==o&&o,l=t.appCode,i=t.nodeKey,s=t.tableCode,u=t.field_id,d=t.field_billno,c=void 0===d?"vbillno":d,p=t.getOrgFunc,f=t.validateFunc;if(!(a&&l&&s&&u&&c))throw new Error("参数缺失！");var m=e.table.getCheckedRows(s);if(null!=m&&0!=m.length){var g=[],_=[],h=!0,v=!1,y=void 0;try{for(var k,w=m[Symbol.iterator]();!(h=(k=w.next()).done);h=!0){var T=k.value,S=T&&T.data&&T.data.values&&T.data.values[u]&&T.data.values[u].value;if(S){var B=T&&T.data&&T.data.values&&T.data.values[c]&&T.data.values[c].value,P=T&&T.data&&T.data.values&&T.data.values.pk_org&&T.data.values.pk_org.value,A=T.index;p&&"function"==typeof p&&(P=p(T));var D=!0;if(f&&"function"==typeof f){var O=f(T);O&&(_.push(C(e,O,B,A)),D=!1)}D&&g.push({id:S,vbillno:B,pk_org:P,index:A})}}}catch(e){v=!0,y=e}finally{try{!h&&w.return&&w.return()}finally{if(v)throw y}}I(e,{url:a,offical:n,appCode:l,nodeKey:i,detail:g,errMessArr:_})}else(0,r.toast)({color:"warning",content:b(e,"3601-000010")})},t.elecSignCardPrint=function(e,t){var a=t.url,r=t.offical,o=void 0!==r&&r,n=t.appCode,l=t.nodeKey,i=t.headCode,s=t.field_id,u=t.field_billno,d=void 0===u?"vbillno":u,c=t.getOrgFunc,p=t.validateFunc;if(!(a&&n&&i&&s&&d))throw new Error("参数缺失！");var f=e.form.getFormItemsValue(i,s).value,b=e.form.getFormItemsValue(i,d).value,m=e.form.getFormItemsValue(i,"pk_org").value;c&&"function"==typeof c&&(m=c());var g=[],_=!0;if(p&&"function"==typeof p){var h=p();h&&(g.push(C(e,h,b,0)),_=!1)}I(e,{url:a,offical:o,appCode:n,nodeKey:l,detail:_?[{id:f,vbillno:b,pk_org:m}]:null,errMessArr:g})},function(e,t){t&&0!=t.length&&(1==t.length?(0,r.toast)({duration:"infinity",color:"danger",content:t[0],hasCloseBtn:!0}):(0,r.toast)({duration:"infinity",color:"danger",TextArr:[b(e,"3601-000000"),b(e,"3601-000001"),b(e,"3601-000021")],groupOperation:!0,groupOperationMsg:t}))}),I=function(e,t){var a=t.url,n=t.offical,l=t.appCode,i=t.nodeKey,s=t.detail,u=t.errMessArr,d=void 0===u?[]:u;if(!(d&&d.length>0)||s&&0!=s.length){var c={offical:n,detail:s};(0,r.ajax)({url:o.COMMON_URL.ELECSIGNPRINTCHECK,data:c,success:function(t){var o=t.data,s=o.passPKs,u=o.passInfos,c=o.unPassInfos;if(d.length>0||c&&c.length>0){var p=!0,f=!1,b=void 0;try{for(var m,g=c[Symbol.iterator]();!(p=(m=g.next()).done);p=!0){var _=m.value,h=_.vbillno,v=_.mess,y=_.index,k=C(e,v,h,y);d.push(k)}}catch(e){f=!0,b=e}finally{try{!p&&g.return&&g.return()}finally{if(f)throw b}}w(e,d)}if(s&&s.length>0&&u&&u.length>0){var I={offical:n,detail:u};(0,r.print)("pdf",a,{nodekey:i,appcode:l,oids:s,userjson:JSON.stringify(I)})}}})}else w(e,d)},C=function(e,t,a,r){return b(e,"3601-000008")+a+b(e,"3601-000009")+t||""},T=(t.addDefReferFilter=function(e,t){var a=t.headCode,r=t.areaCode,o=t.meta,n=t.orgField,l=t.getOrgFunc;if(r&&o&&(a||n||l)){var i=Array.isArray(r)?r:[r],s=!0,u=!1,d=void 0;try{for(var c,p=i[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){o[c.value].items.map((function(t){(t.attrcode.startsWith("vdef")||t.attrcode.startsWith("vuserdef"))&&(t.queryCondition=function(){return{pk_org:l&&"function"==typeof l?l():(e.form.getFormItemsValue(a,n)||{}).value}})}))}}catch(e){u=!0,d=e}finally{try{!s&&p.return&&p.return()}finally{if(u)throw d}}}},t.bodyRateEditOnAfterEdit=function(e){var t=e.props,a=e.bodyCodes,n=e.rateInfo,l=e.datasource,i=e.olcRates,s=e.glcRates,u=e.gllcRates;if(t&&n&&l&&a){!function(e){var t=e.rateInfo,a=e.datasource;if(t&&a){r.cardCache.setDefData(o.cache.rateinfo,a,t);r.cardCache.getDefData(o.cache.rateinfo,a)}}({rateInfo:n,datasource:l}),Array.isArray(a)||(a=[a]);var d=n.olcRateEditable,c=n.glcRateEditable,p=n.gllcRateEditable,f=!0,b=!1,m=void 0;try{for(var g,_=a[Symbol.iterator]();!(f=(g=_.next()).done);f=!0){var h=g.value;i&&(Array.isArray(i)||(i=[i]),t.cardTable.setColEditableByKey(h,i,!d)),s&&(Array.isArray(s)||(s=[s]),t.cardTable.setColEditableByKey(h,s,!c)),u&&(Array.isArray(u)||(u=[u]),t.cardTable.setColEditableByKey(h,u,!p))}}catch(e){b=!0,m=e}finally{try{!f&&_.return&&_.return()}finally{if(b)throw m}}}},t.getCacheRateValue=function(e){var t=e.datasource;if(t){var a=r.cardCache.getDefData(o.cache.rateinfo,t);return a?{olcRate:a.olcRate,glcRate:a.glcRate,gllcRate:a.gllcRate}:null}}),S=(t.setRate2NewRow=function(e){var t=e.olcRates,a=e.glcRates,r=e.gllcRates,o=e.datasource,n=e.row;if(o){var l=T({datasource:o});if(l){var i=l.olcRate,s=l.glcRate,u=l.gllcRate;if(t){Array.isArray(t)||(t=[t]);var d=!0,c=!1,p=void 0;try{for(var f,b=t[Symbol.iterator]();!(d=(f=b.next()).done);d=!0){n[f.value]={value:i}}}catch(e){c=!0,p=e}finally{try{!d&&b.return&&b.return()}finally{if(c)throw p}}}if(a){Array.isArray(a)||(a=[a]);var m=!0,g=!1,_=void 0;try{for(var h,v=a[Symbol.iterator]();!(m=(h=v.next()).done);m=!0){n[h.value]={value:s}}}catch(e){g=!0,_=e}finally{try{!m&&v.return&&v.return()}finally{if(g)throw _}}}if(r){Array.isArray(r)||(r=[r]);var y=!0,k=!1,w=void 0;try{for(var I,C=r[Symbol.iterator]();!(y=(I=C.next()).done);y=!0){n[I.value]={value:u}}}catch(e){k=!0,w=e}finally{try{!y&&C.return&&C.return()}finally{if(k)throw w}}}}}},t.createListWebSocket=function(e,t){var a=t.tableAreaCode,r=t.tablePkName,o=t.billtype,n=t.dataSource,l=t.serverLocation;if(e&&a&&r&&o){var i=e.socket,s={tableAreaCode:a,billpkname:r,billtype:o,dataSource:n};return l&&(s.serverLocation=l),React.createElement("div",null,i.connectMesg(s))}},t.createCardWebSocket=function(e,t){var a=t.headBtnAreaCode,r=t.formAreaCode,o=t.billpkname,n=t.billtype,l=t.dataSource,i=t.serverLocation;if(e&&a&&r&&o&&n){var s=e.socket,u={headBtnAreaCode:a,formAreaCode:r,billtype:n,billpkname:o,dataSource:l};return i&&(u.serverLocation=i),React.createElement("div",null,s.connectMesg(u))}},t.showErrBtn=function(e,t){var a=t.headBtnCode,r=t.headAreaCode,n=t.fieldPK;t.datasource;if(e&&a&&r){var l=e.getUrlParam(o.URL_PARAM.STATE),i="0";try{i=e.form.getFormItemsValue(r,o.sagaField.status).value}catch(e){i="0"}var s="1"===i&&"browse"==l;e.button.toggleErrorStatus(a,{isError:s}),s&&S(e,{headAreaCode:r,fieldPK:n})}},function(e,t){var a=t.headAreaCode,r=t.fieldPK;if(a&&r){var n=e.getUrlParam("status"),l=e.form.getFormItemsValue(a,o.sagaField.gtxid),i=e.form.getFormItemsValue(a,r);"browse"==n&&l&&l.value&&i&&i.value&&e.socket.showToast({gtxid:l.value,billpk:i.value})}}),B=(t.frozenBtnCtrl=function(e,t){var a=t.btnCodes;if(e&&a){var r=Array.isArray(a)?a:[a];if("browse"==e.getUrlParam(o.URL_PARAM.STATE)){var n="1";try{n=e.form.getFormItemsValue(headAreaCode,o.sagaField.frozen).value}catch(e){n="1"}e.button.setButtonDisabled(r,"1"==n)}}},function(e,t){var a=t.pageCode,r=t.headCode,o=t.bodyCodeArr,n=t.saveFunc,l={},i={};if(0==o.length)l={pageid:a,model:{areacode:r,rows:e.form.getAllFormValue(r).rows,areaType:"form"}},i[r]="form";else{l=o.length>1?e.createExtCardData(a,r,o):e.createMasterChildData(a,r,o[0]);var s=!0,u=!1,d=void 0;try{for(var c,p=o[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){i[c.value]="cardTable"}}catch(e){u=!0,d=e}finally{try{!s&&p.return&&p.return()}finally{if(u)throw d}}}e.validateToSave(l,n,i,"")}),P=(l=n(regeneratorRuntime.mark((function e(t,a){var r,o=a.pageCode,n=a.headCode,l=a.bodyCodeArr,i=a.saveValidate,s=a.processSaveData;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.form.isCheckNow(n)){e.next=2;break}return e.abrupt("return",null);case 2:if(!(l&&l.length>0)||t.cardTable.checkTableRequired()){e.next=4;break}return e.abrupt("return",null);case 4:if(!i||"function"!=typeof i){e.next=7;break}if(i()){e.next=7;break}return e.abrupt("return",null);case 7:if(r=k(t,o,n,l),!s||"function"!=typeof s){e.next=12;break}return e.next=11,s(r);case 11:r=e.sent;case 12:return e.abrupt("return",{data:JSON.stringify(r),pageCode:o});case 13:case"end":return e.stop()}}),e,this)}))),function(e,t){return l.apply(this,arguments)}),A=(t.saveCommit=(i=n(regeneratorRuntime.mark((function e(t,a){var o,n,l=a.pageCode,i=a.headCode,s=a.bodyCode,u=a.url,d=a.assign,c=a.showAssignFunc,p=a.updateViewFunc,f=a.saveValidate,b=a.processSaveData,m=a.extParam;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l&&i&&u&&c&&p){e.next=2;break}return e.abrupt("return");case 2:return m||(m={}),o=(a=s)?Array.isArray(a)?a:[a]:[],e.next=6,P(t,{pageCode:l,headCode:i,bodyCodeArr:o,saveValidate:f,processSaveData:b});case 6:if(n=e.sent){e.next=9;break}return e.abrupt("return");case 9:d&&(m.content=JSON.stringify(d)),n.extParam=m,B(t,{pageCode:l,headCode:i,bodyCodeArr:o,saveFunc:function(){(0,r.ajax)({url:u,data:n,success:function(e){var t=e.data.workflow;t&&"approveflow"==t||"workflow"==t?c(e):p(e)}})}});case 12:case"end":return e.stop()}var a}),e,this)}))),function(e,t){return i.apply(this,arguments)}),t.getTBBMsg=function(e){var t=e.row,a=e.msgfield;a||(a="ntbinfo");var r=(t&&t.values&&t.values[a]||{}).value;return r&&(t.values[a]={value:null,display:null}),r});t.showTBBMsg=function(e){var t=e.head,a=e.headCode,o=e.msgfield;if(!(t&&a&&t[a]&&t[a].rows&&0!=t[a].rows.length))return!1;var n=!1,l=t[a].rows[0],i=A({row:l,msgfield:o});return i&&((0,r.toast)({color:"warning",content:i}),n=!0),n},t.tbbWarnDialog=function(e,t){var a=t.ntbinfos,o=t.onConfirm;if(a&&0!=a.length){var n=[],l=a.length>1,i=1,s=l?[b(e,"3601-000019")+"["+a.length+"]"+b(e,"3601-000020")]:[],u=!0,d=!1,c=void 0;try{for(var p,f=a[Symbol.iterator]();!(u=(p=f.next()).done);u=!0){var m=p.value;if(null!=m){var g=m.pk,_=m.msg,h=m.vbillno;if(g&&h){n.push(g);var v="";l&&(v=i+". "+b(e,"3601-000018")+"["+h+"] "),s.push(React.createElement("li",null,v+_)),i++}}}}catch(e){d=!0,c=e}finally{try{!u&&f.return&&f.return()}finally{if(d)throw c}}0!=s.length&&(0,r.promptBox)({color:"warning",title:b(e,"3601-000017"),content:React.createElement("ul",null,s),beSureBtnClick:function(){o(n)}})}},t.go2CardCheck=function(e){var t=e.props,a=e.url,o=e.pk,n=e.ts,l=e.fieldPK,i=e.actionCode,s=e.permissionCode,u=e.checkSaga,d=void 0===u||u,c=e.checkTS,p=void 0===c||c,f=e.go2CardFunc;f&&"function"==typeof f&&(t&&a&&o&&n&&l||f(),(0,r.ajax)({url:a,data:{pk:o,ts:n,actionCode:i,permissionCode:s,fieldPK:l,checkSaga:d,checkTS:p},success:function(e){f()}}))}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.URL_PARAM={ID:"id",STATE:"status",SCENE:"scene",TBB_LINK:"pk_ntbparadimvo",LINK_ID:"linkId",PK_SRC:"pk_src"},t.sagaField={frozen:"saga_frozen",gtxid:"saga_gtxid",btxid:"saga_btxid",status:"saga_status"},t.sagaFrozenEnum={frozen:1,unfrozen:0},t.sagaStateEnum={success:0,fail:1},t.SCENE={DEFAULT:"defaultsce",APPROVE:"approvesce",LINK:"linksce",FIP:"fip",OTHER:"othersce"},t.LINKTYPE={NORMAL:"NORMAL",BILL_REVIEW:"BILL_REVIEW"},t.LINK_PARAM={ARAP:{FLAG:"flag",FLAG_VALUE:"ftsLinkArap"}},t.MODULE_INFO={TMPUB:"tmpub",TMPUB_NUM:"3601"},t.COMMON_URL={ELECSIGNPRINTCHECK:"/nccloud/tmpub/pub/elecsignprintcheck.do"},t.cache={rateinfo:"rateinfo",iserrtoast:"iserrtoast"},t.SPLIT_TBBCTRLTYPE="_ctrltype_",t.tbbwarntype={flexibility:"0",inflexibility:"1",warning:"2"}},function(e,a){e.exports=t},function(e,t){e.exports=a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.linkSucessPro=t.cardOperator=t.cardOperatorForCash=t.showTBBMsg=t.listSingleOperator=t.listSingleOperatorNoRecord=t.listMultiOperator=t.CopyLine=t.BatchCopy=t.Open=t.DelLine=t.BatchDelLine=t.InsertLine=t.AddLine=void 0,t.BatchCopyForCash=function(e,t,a,o){var l=e.cardTable.getCheckedRows(t);if(null==l||0==l.length)return(0,r.toast)({color:"warning",content:(0,n.loadMultiLang)(e,"36300-000002")}),!1;var i=[],s=JSON.parse(JSON.stringify(l)),u=!0,d=!1,c=void 0;try{for(var p,f=s[Symbol.iterator]();!(u=(p=f.next()).done);u=!0){var b=p.value;b.data.selected=!1,b.data.values[o]&&b.data.values[o].value&&(b.data.values[o].value=null),b.data.values.rowno&&b.data.values.rowno.value&&(b.data.values.rowno.value=null),i.push(b.data)}}catch(e){d=!0,c=e}finally{try{!u&&f.return&&f.return()}finally{if(d)throw c}}null!=a&&null!=a||(a=e.cardTable.getNumberOfRows(t,!1));return e.cardTable.insertRowsAfterIndex(t,i,a),!0};var r=a(0),o=a(2),n=a(1);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}r.cardCache.getNextId,r.cardCache.deleteCacheById,t.AddLine=function(e,t,a,r){if(a){var o=e.cardTable.getNumberOfRows(t);e.cardTable.addRow(t,o,a)}else e.cardTable.addRow(t);r&&"function"==typeof r&&afterFunc(e,t)},t.InsertLine=function(e,t,a,r){e.cardTable.addRow(t,a+1,r)},t.BatchDelLine=function(e,t,a){var o=e.cardTable.getCheckedRows(t);if(null==o||0==o.length)return(0,r.toast)({color:"warning",content:(0,n.loadMultiLang)(e,"36300-000001")}),!1;var l=[],i=!0,s=!1,u=void 0;try{for(var d,c=o[Symbol.iterator]();!(i=(d=c.next()).done);i=!0){var p=d.value;l.push(p.index)}}catch(e){s=!0,u=e}finally{try{!i&&c.return&&c.return()}finally{if(s)throw u}}return a&&"function"==typeof a?e.cardTable.delRowsByIndex(t,l,a):e.cardTable.delRowsByIndex(t,l),!0},t.DelLine=function(e,t,a,r){r&&"function"==typeof r?e.cardTable.delRowsByIndex(t,a,r):e.cardTable.delRowsByIndex(t,a)},t.Open=function(e,t,a,r,o){e.cardTable.openModel(t,o,r,a)};t.BatchCopy=function(e,t,a){var o=e.cardTable.getCheckedRows(t);if(null==o||0==o.length)return(0,r.toast)({color:"warning",content:(0,n.loadMultiLang)(e,"36300-000002")}),!1;var l=[],i=JSON.parse(JSON.stringify(o)),s=!0,u=!1,d=void 0;try{for(var c,p=i[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){var f=c.value;f.data.selected=!1,l.push(f.data)}}catch(e){u=!0,d=e}finally{try{!s&&p.return&&p.return()}finally{if(u)throw d}}return null==a&&(a=e.cardTable.getNumberOfRows(t,!1)),e.cardTable.insertRowsAfterIndex(t,l,a),!0},t.CopyLine=function(e,t,a){e.cardTable.pasteRow(t,a)};var i=function(e,t,a){e.errContent=e.errContent+t,e.failCount=Number(e.failCount)+1,e.errMsgArr.push(a||"")},s=function(e,t){e.succContent=e.succContent+t,e.succCount=Number(e.succCount)+1},u=(t.listMultiOperator=function(e,t,a,o,l,u,p,f,b,m){var g=e.table.getCheckedRows(a);if(null!=g&&0!=g.length){if(1==g.length){var _={};return _[o]=g[0]&&g[0].data&&g[0].data.values&&g[0].data.values[o],_.ts=g[0]&&g[0].data&&g[0].data.values&&g[0].data.values.ts,void d(e,t,a,l,_,o,g[0].index,u,p,f,b,m)}var h={},v={},y={},k=0,w=void 0,I=void 0,C=void 0;b||(b={});for(;k<g.length;)w=g[k]&&g[k].data&&g[k].data.values&&g[k].data.values[o]&&g[k].data.values[o].value,I=g[k]&&g[k].data&&g[k].data.values&&g[k].data.values.ts&&g[k].data.values.ts.value,C=g[k]&&g[k].data&&g[k].data.values&&g[k].data.values.vbillno&&g[k].data.values.vbillno.value,y[w]=g[k].index,w&&I&&(h[w]=I),w&&C&&(v[w]=C),k++;Object.keys(h).length>0&&(0,r.ajax)({url:l,data:{pkMapRowIndex:y,pkMapTs:h,pkMapVbillno:v,pageCode:t,extParam:b},success:function(t){var o=t.data.data,l=[],d=[],p={errMsgArr:[],succContent:"",errContent:"",succCount:0,failCount:0};if(o&&o.length>0){var b=!0,g=!1,_=void 0;try{for(var h,v=o[Symbol.iterator]();!(b=(h=v.next()).done);b=!0){var y=h.value,k=y.state,w=y.msg,I=y.result,C=y.pk,T=(y.vbillno,y.rowIndex),S=Number(T)+1;if(0==k)if(I){if(I&&I.head&&I.head[a]&&I.head[a].rows&&I.head[a].rows.length>0){var B=I.head[a].rows[0];if(f){var P=c(B);P?i(p,S,P=S+"."+P):s(p,S)}else s(p,S);var A={index:T,data:{values:B.values}};l.push(A)}}else s(p,S),e.table.deleteCacheId(a,C),d.push(T);else 1==k&&i(p,S,w)}}catch(e){g=!0,_=e}finally{try{!b&&v.return&&v.return()}finally{if(g)throw _}}l.length>0&&e.table.updateDataByIndexs(a,l),d.length>0&&e.table.deleteTableRowsByIndex(a,d)}var D=t.data,O=D.status,x=(D.msg,p.succContent),j=p.errContent,L=p.succCount,F=p.failCount,R=p.errMsgArr,M=(""==(x=L>0?x+(0,n.loadMultiLang)(e,"36300-000004")+u+(0,n.loadMultiLang)(e,"36300-000005"):"")?"":x+"，")+(F>0?j+(0,n.loadMultiLang)(e,"36300-000004")+u+(0,n.loadMultiLang)(e,"36300-000006"):"");if(0==O&&0==R.length){(0,n.loadMultiLang)(e,"36300-000007"),(0,n.loadMultiLang)(e,"36300-000008");(0,r.toast)({color:"success",content:u+(0,n.loadMultiLang)(e,"36300-000007")+L+(0,n.loadMultiLang)(e,"36300-000008")})}else(1==O||2==O||R.length>0)&&(0,r.toast)({duration:"infinity",color:"danger",content:M,TextArr:[(0,n.loadMultiLang)(e,"36300-000009"),(0,n.loadMultiLang)(e,"36300-000010"),(0,n.loadMultiLang)(e,"36300-000011")],groupOperation:!0,groupOperationMsg:R});m&&"function"==typeof m&&m(e,o)}})}else(0,r.toast)({color:"warning",content:(0,n.loadMultiLang)(e,"36300-000003")})},t.listSingleOperatorNoRecord=function(e,t,a,o,l,i,s,u,d,c,f,b){var m={};m[l]=i,f||(f={}),(0,r.ajax)({url:o,data:{pkMapTs:m,pageCode:t,extParam:f},success:function(t){var o=t.data,i=!1;if(o){if(o&&o.head&&o.head[a]&&o.head[a].rows&&1==o.head[a].rows.length){c&&(i=p(o.head,a));var d=o.head[a].rows[0],f=[{index:s,data:{values:d.values}}];e.table.updateDataByIndexs(a,f),i||(0,r.toast)({color:"success",content:u+(0,n.loadMultiLang)(e,"36300-000005")})}}else e.table.deleteCacheId(a,l),e.table.deleteTableRowsByIndex(a,s),(0,r.toast)({color:"success",content:u+(0,n.loadMultiLang)(e,"36300-000005")});b&&"function"==typeof b&&b(e,o)}})}),d=t.listSingleOperator=function(e,t,a,r,o,n,l,i,s,d,c,p){var f=o[n].value,b=o.ts.value;u(e,t,a,r,f,b,l,i,s,d,c,p)},c=function(e){var t=(e&&e.values&&e.values.ntbinfo||{}).value;return t&&(e.values.ntbinfo={value:null,display:null}),t},p=t.showTBBMsg=function(e,t){if(!(e&&t&&e[t]&&e[t].rows&&0!=e[t].rows.length))return!1;var a=!1,o=e[t].rows[0],n=c(o);return n&&((0,r.toast)({color:"warning",content:n}),a=!0),a},f=function(e,t,a){var r={},o="array"==typeof a?a:Object.keys(a);if(!o||0==o.length)return null;var n={},l=!0,i=!1,s=void 0;try{for(var u,d=o[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var c=u.value,p="array"==typeof a?null:a[c];if(p){var f=e.cardTable.getAllRows(c);if(f&&0!=f.length){var b=!0,m=!1,g=void 0;try{for(var _,h=f[Symbol.iterator]();!(b=(_=h.next()).done);b=!0){var v=_.value;if(v&&v.values&&0!=v.values.length){var y=v.rowid;n[v.values[p].value]=y}}}catch(e){m=!0,g=e}finally{try{!b&&h.return&&h.return()}finally{if(m)throw g}}}}}}catch(e){i=!0,s=e}finally{try{!l&&d.return&&d.return()}finally{if(i)throw s}}return r[t]=n,r},b=function(e,t,a){return a.rows&&a.rows[0]&&a.rows[0].rowid?a=e.cardTable.updateDataByRowId(t,a):e.cardTable.setTableData(t,a),a};t.cardOperatorForCash=function(e,t,a,o,i,s,u,d,c,m,g){var _="array"==typeof o?o:Object.keys(o),h={},v=e.form.getFormItemsValue(a,i).value,y=e.form.getFormItemsValue(a,"ts").value;h[v]=y;var k=f(e,v,o);g||(g={}),(0,r.ajax)({url:s,data:{pkMapTs:h,pageCode:t,isRet:!0,extParam:g,pkMapbodyPKMaprowID:k},success:function(t){var o=t.data,s=!1;if(o){var f=o.head,g=o.body,h=o.bodys;if(f||g||h){if(m&&(s=p(f,a)),f&&e.form.setAllFormValue(l({},a,f[a])),g&&_&&_.length>0){var y=!0,k=!1,w=void 0;try{for(var I,C=_[Symbol.iterator]();!(y=(I=C.next()).done);y=!0){var T=I.value,S=g[T];S&&((S=b(e,T,S))&&(o.body[T]=S))}}catch(e){k=!0,w=e}finally{try{!y&&C.return&&C.return()}finally{if(k)throw w}}}if(h&&_&&_.length>0){var B=!0,P=!1,A=void 0;try{for(var D,O=_[Symbol.iterator]();!(B=(D=O.next()).done);B=!0){var x=D.value,j=h[x];j&&((j=b(e,x,j))&&(o.bodys[x]=j))}}catch(e){P=!0,A=e}finally{try{!B&&O.return&&O.return()}finally{if(P)throw A}}}if(f&&f[a]&&f[a].rows&&f[a].rows[0]){var L=f[a].rows[0],F=L&&L.values&&L.values[i]&&L.values[i].value;r.cardCache.updateCache(i,F,o,a,d)}s||(0,r.toast)({color:"success",content:u+(0,n.loadMultiLang)(e,"36300-000005")})}}else r.cardCache.deleteCacheById(i,v,d),(0,r.toast)({color:"success",content:u+(0,n.loadMultiLang)(e,"36300-000005")});c&&"function"==typeof c&&c(e,o)}})},t.cardOperator=function(e,t,a,o,i,s,u,d,c,m,g){var _="array"==typeof o?o:Object.keys(o),h={},v=e.form.getFormItemsValue(a,i).value,y=e.form.getFormItemsValue(a,"ts").value;h[v]=y;var k=f(e,v,o);g||(g={}),(0,r.ajax)({url:s,data:{pkMapTs:h,pageCode:t,isRet:!0,extParam:g,pkMapbodyPKMaprowID:k},success:function(t){var o=t.data,s=!1;if(o){e.getUrlParam("status");var f=o.head,g=o.body,h=o.bodys;if(f||g||h){if(m&&(s=p(f,a)),f&&e.form.setAllFormValue(l({},a,f[a])),g&&_&&_.length>0){var y=!0,k=!1,w=void 0;try{for(var I,C=_[Symbol.iterator]();!(y=(I=C.next()).done);y=!0){var T=I.value,S=g[T];S&&((S=b(e,T,S))&&(o.body[T]=S))}}catch(e){k=!0,w=e}finally{try{!y&&C.return&&C.return()}finally{if(k)throw w}}}if(h&&_&&_.length>0){var B=!0,P=!1,A=void 0;try{for(var D,O=_[Symbol.iterator]();!(B=(D=O.next()).done);B=!0){var x=D.value,j=h[x];j&&((j=b(e,x,j))&&(o.bodys[x]=j))}}catch(e){P=!0,A=e}finally{try{!B&&O.return&&O.return()}finally{if(P)throw A}}}if(f&&f[a]&&f[a].rows&&f[a].rows[0]){var L=f[a].rows[0],F=L&&L.values&&L.values[i]&&L.values[i].value;r.cardCache.updateCache(i,F,o,a,d)}s||(0,r.toast)({color:"success",content:u+(0,n.loadMultiLang)(e,"36300-000005")})}}else r.cardCache.deleteCacheById(i,v,d),(0,r.toast)({color:"success",content:u+(0,n.loadMultiLang)(e,"36300-000005")});c&&"function"==typeof c&&c(e,o)}})},t.linkSucessPro=function(e,t,a){var r=t.data;if(r&&r.length>0)for(var n=0;n<r.length;n++){var l=r[n],i=(l.url,l.pks),s=l.appCode,u=l.linkPageCode;a&&0!=Object.keys(a).length||(a={status:"browse"}),a.scene||(a.scene=o.SCENE.LINK),a.srcbillid||(a.srcbillid=i),a.appcode=s,a.pagecode=u,a.pks=i,a.id=i,e.openTo(null,a)}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.button_limit=5,t.module_id="3630",t.module_name="fts",t.module_tmpub_name="tmpub",t.module_tmpub_id="3601",t.sourceModel_FTS="FTS",t.PaymentMergeBillType="36J5",t.PaymentBillType="36J1",t.SHOWMODEL_BULU=0,t.SHOWMODEL_LIULAN=1,t.SHOWMODEL_ZHIFU=3,t.PAYMODEL_COMBINEPAY=13,t.BILLTYPE_ARAP=["F2","F3"]},,function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=function(e,t){var a=e[1]||"",r=e[3];if(!r)return a;if(t&&"function"==typeof btoa){var o=(l=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(l))))+" */"),n=r.sources.map((function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"}));return[a].concat(n).concat([o]).join("\n")}var l;return[a].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+a+"}":a})).join("")},t.i=function(e,a){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var n=this[o][0];"number"==typeof n&&(r[n]=!0)}for(o=0;o<e.length;o++){var l=e[o];"number"==typeof l[0]&&r[l[0]]||(a&&!l[2]?l[2]=a:a&&(l[2]="("+l[2]+") and ("+a+")"),t.push(l))}},t}},function(e,t,a){var r,o,n={},l=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=r.apply(this,arguments)),o}),i=function(e){var t={};return function(a){return void 0===t[a]&&(t[a]=e.call(this,a)),t[a]}}((function(e){return document.querySelector(e)})),s=null,u=0,d=[],c=a(16);function p(e,t){for(var a=0;a<e.length;a++){var r=e[a],o=n[r.id];if(o){o.refs++;for(var l=0;l<o.parts.length;l++)o.parts[l](r.parts[l]);for(;l<r.parts.length;l++)o.parts.push(h(r.parts[l],t))}else{var i=[];for(l=0;l<r.parts.length;l++)i.push(h(r.parts[l],t));n[r.id]={id:r.id,refs:1,parts:i}}}}function f(e,t){for(var a=[],r={},o=0;o<e.length;o++){var n=e[o],l=t.base?n[0]+t.base:n[0],i={css:n[1],media:n[2],sourceMap:n[3]};r[l]?r[l].parts.push(i):a.push(r[l]={id:l,parts:[i]})}return a}function b(e,t){var a=i(e.insertInto);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=d[d.length-1];if("top"===e.insertAt)r?r.nextSibling?a.insertBefore(t,r.nextSibling):a.appendChild(t):a.insertBefore(t,a.firstChild),d.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");a.appendChild(t)}}function m(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=d.indexOf(e);t>=0&&d.splice(t,1)}function g(e){var t=document.createElement("style");return e.attrs.type="text/css",_(t,e.attrs),b(e,t),t}function _(e,t){Object.keys(t).forEach((function(a){e.setAttribute(a,t[a])}))}function h(e,t){var a,r,o,n;if(t.transform&&e.css){if(!(n=t.transform(e.css)))return function(){};e.css=n}if(t.singleton){var l=u++;a=s||(s=g(t)),r=k.bind(null,a,l,!1),o=k.bind(null,a,l,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(a=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",_(t,e.attrs),b(e,t),t}(t),r=I.bind(null,a,t),o=function(){m(a),a.href&&URL.revokeObjectURL(a.href)}):(a=g(t),r=w.bind(null,a),o=function(){m(a)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=l()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var a=f(e,t);return p(a,t),function(e){for(var r=[],o=0;o<a.length;o++){var l=a[o];(i=n[l.id]).refs--,r.push(i)}e&&p(f(e,t),t);for(o=0;o<r.length;o++){var i;if(0===(i=r[o]).refs){for(var s=0;s<i.parts.length;s++)i.parts[s]();delete n[i.id]}}}};var v,y=(v=[],function(e,t){return v[e]=t,v.filter(Boolean).join("\n")});function k(e,t,a,r){var o=a?"":r.css;if(e.styleSheet)e.styleSheet.cssText=y(t,o);else{var n=document.createTextNode(o),l=e.childNodes;l[t]&&e.removeChild(l[t]),l.length?e.insertBefore(n,l[t]):e.appendChild(n)}}function w(e,t){var a=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}function I(e,t,a){var r=a.css,o=a.sourceMap,n=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||n)&&(r=c(r)),o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var l=new Blob([r],{type:"text/css"}),i=e.href;e.href=URL.createObjectURL(l),i&&URL.revokeObjectURL(i)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.orgVersionView=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"pk_org",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pk_org_v";if(e&&t){var o=e.getUrlParam("status"),n="browse"==o,l={};l[a]=!n,l[r]=n,e.form.setFormItemsVisible(t,l)}},t.orgVersionViewNew=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"pk_org",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pk_org_v";if(e&&t){var o=e.getUrlParam("status"),n="browse"==o,l={};l[a]=!n,l[r]=n,e.form.setItemsVisible(t,l)}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.app_id="0001Z610000000029LJM",t.module_id="3630",t.appcode="36300TG",t.oid="1001Z61000000002OG84",t.base_url="/nccloud/fts/commission/",t.button_limit=9,t.list_page_id="36300TG_L01",t.list_linkpage_id="36300TG_L01_LINK",t.list_search_id="gathering_search",t.list_table_id="gathering",t.has_query="has_query",t.card_page_id="36300TG_C01",t.card_linkpage_id="36300TG_C01_LINK",t.card_from_id="gathering",t.card_from_exchangegathermsg_id="exchangegathermsg",t.card_from_delivermsg_id="delivermsg",t.card_from_vsourcemsg_id="vsourcemsg",t.card_from_auditinfo_id="auditinfo",t.card_table1_id="gatheringfinance",t.card_table2_id="gatheringfund",t.card_table2_edit_id="childform4",t.card_table1_edit_id="childform2",t.lang=["36300TG","3630"],t.group_needDeal="0",t.group_needCommit="1",t.group_approving="2",t.group_needgather="3",t.group_all="4",t.saga_gtxid="saga_gtxid",t.pk="pk_gathering",t.billtype="36J2",t.billType="36J2",t.funcode="36300TG",t.print_templateid="1001Z61000000001OP6Q",t.print_nodekey="gathernccprint",t.busType={BusType_BillRecv:"billrecv",BusType_BillPayAwoke:"billpayawoke",BusType_BillMerge:"billmerge",BusType_BillDeliver:"billdeliver",BusType_BillHand:"billhand",BusType_BillFBM:"billfbm"},t.card_shouder_buttons=["AddLine","CopyLine","DeleteLine","AddLine2","CopyLine2","DeleteLine2"],t.list_head_buttons=["Delete","Commit","UnCommit","Gather","UnGather","File","Copy","Print","Output","LinkQueryWorkFlow","LinkQueryBeforBill","LinkQueryAfterBill","LinkQueryPZ","LinkQueryNtb","OffiPrint","InOffiPrint","LinkReturnBill","BatchPremit","BatchUnPremit"],t.card_hidden_buttons=["Save","SaveAdd","SaveCommit","Delete","Commit","Decide","Back","UnDecide","UnCommit","Approve","Deliver","UnDeliver","Gather","UnApprove","Cancel","Add","Premit","UnPremit","LinkQueryPZ","LinkQueryAferBill","LinkReturnBill","Edit","Copy","UnGather","OffiPrint","InOffiPrint"],t.GetMode={Gather_Direct:{value:"direct",display:""}},t.dataSource="tm.fts.commission.commissiongathering.dataSource",t.pkname="pk_gathering",t.printnodekey={official:"OFFICIAL",inofficial:"INOFFICIAL"},t.billstatus_gather={payok:"4"},t.cache={iserrtoast:"iserrtoast"}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.linkVoucherApp=t.linkApp=void 0;var r=a(0),o=(a(14),a(2)),n=a(1),l=(t.linkApp=function(e,t,a){(0,r.ajax)({url:"/nccloud/tmpub/pub/qrylinkinfo.do",data:{billTypeOrTransType:t},success:function(t){var r=t.data;if(r){r.url;var n=r.appCode,l=r.linkPageCode;a&&0!=Object.keys(a).length||(a={}),a.scene||(a.scene=o.SCENE.LINK),a.status||(a.status="browse"),a.appcode=n,a.pagecode=l,e.openTo(null,a)}}})},"_LinkVouchar2019");t.linkVoucherApp=function(e,t,a,o,i,s,u){var d={pk_group:a,pk_org:o,relationID:t,pk_billtype:i};u&&u.freedef4&&(d={pk_group:a,pk_org:o,relationID:t,pk_billtype:i,freedef4:u.freedef4}),(0,r.ajax)({url:"/nccloud/tmpub/pub/qrylinkvoucherinfo.do",data:d,success:function(t){var a=t.success,o=t.data;if(a&&o&&o.src&&l==o.src&&o.pklist&&0!=o.pklist.length){var i=o.src,u=o.url,d=o.pklist,c=o.appcode,p=o.pagecode,f=o.srcAppCode,b=o.cachekey;o.des?1==d.length?e.openTo(u,{status:"browse",appcode:c,pagecode:p,id:d[0],n:(0,n.loadMultiLang)(e,"3601-000004"),pagekey:"link",backflag:"noback"}):(r.cacheTools.set(b,d),e.openTo(t.data.url,{status:"browse",appcode:c,pagecode:p,n:(0,n.loadMultiLang)(e,"3601-000004"),scene:c+i})):(r.cacheTools.set(f+i,d),e.openTo(t.data.url,{status:"browse",appcode:c,pagecode:p,scene:f+i}))}else(0,r.toast)({color:"warning",content:(0,n.loadMultiLang)(e,"3601-000002")+s+(0,n.loadMultiLang)(e,"3601-000003")})}})}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.MODULE_H_FTS="FTS",t.MODULE_L_FTS="fts",t.VoucherDataConst={pagecode:"10170410_1017041001",appcode:"10170410",linkIdentification:"36300TP_LinkVouchar"}},,function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var a=t.protocol+"//"+t.host,r=a+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var o,n=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(n)?e:(o=0===n.indexOf("//")?n:0===n.indexOf("/")?a+n:r+n.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")}))}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{template:{gridrelation:{restmoney:{destBrowseAreaCode:null,destEditAreaCode:null,srcAreaCode:"restmoney",tabRelation:["restmoney"]}},restmoney:{clazz:"nc.vo.cmp.settlement.LinkAccountBalanceVO",code:"restmoney",items:[{itemtype:"input",visible:!0,label:this.state.json["360701OB-000041"],attrcode:"accountcode",maxlength:"20",metapath:"accountcode"},{itemtype:"input",visible:!0,label:this.state.json["360701OB-000042"],attrcode:"accountname",maxlength:"20",metapath:"accountname"},{itemtype:"input",visible:!0,label:this.state.json["360701OB-000058"],attrcode:"currencyname",maxlength:"20",metapath:"currencyname"},{itemtype:"input",visible:!0,label:this.state.json["360701OB-000043"],attrcode:"accounttype",disabled:!0,metapath:"accounttype"},{itemtype:"input",visible:!1,label:this.state.json["360701OB-000057"],code:"capitaltype",attrcode:"capitaltype",disabled:!0,metapath:"capitaltype"},{itemtype:"number",scale:"8",visible:!0,label:this.state.json["360701OB-000044"],attrcode:"currentbalance",maxlength:"28",metapath:"currentbalance"},{itemtype:"number",scale:"8",visible:!0,label:this.state.json["360701OB-000045"],attrcode:"surplusbalance",maxlength:"28",metapath:"surplusbalance"}],moduletype:"table",name:this.state.json["360701OB-000046"],pagination:!1,vometa:""},code:"restmoney",moduletype:"table",name:this.state.json["360701OB-000046"]},code:"360701OB_P01",formrelation:null,name:this.state.json["360701OB-000046"],metapath:"cmp_initdate",clazz:"nc.vo.cmp.settlement.LinkAccountBalanceVO",pagetype:"Nochild"}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.queryRelationRowsByRowno=t.buildLightBodyAfterEditData=t.validateWriteOffMny=t.setBodyItemProp=t.setHeadItemProp=void 0;var r=a(1),o=(t.setHeadItemProp=function(e,t,a){var r=e.form,o={},n={},l={};if(a&&0!=a.length){var i=!0,s=!1,u=void 0;try{for(var d,c=a[Symbol.iterator]();!(i=(d=c.next()).done);i=!0){var p=d.value;if(p.hasOwnProperty("itemName")){var f=p.itemName;if(f){if(p.hasOwnProperty("editable")){var b=p.editable;null!=b&&(o[f]=!("true"==b))}if(p.hasOwnProperty("require")){var m=p.require;null!=m&&(n[f]="true"==m)}if(p.hasOwnProperty("visible")){var g=p.visible;null!=g&&(l[f]="true"==g)}}}}}catch(e){s=!0,u=e}finally{try{!i&&c.return&&c.return()}finally{if(s)throw u}}Object.keys(n).length>0&&r.setFormItemsRequired(t,n),Object.keys(o).length>0&&r.setFormItemsDisabled(t,o),Object.keys(l).length>0&&r.setFormItemsVisible(t,l)}},function(e,t,a,r,o){if(a.hasOwnProperty("editable")&&null!=a.editable){var n=a.rowID,l=a.rowIndex,i=a.itemName,s=a.editable;s="true"===a.editable,n||l?n?e.cardTable.setEditableByRowId(t,n,i,s):l&&e.cardTable.setEditableByIndex(t,l,i,s):s?r.push(i):o.push(i)}}),n=function(e,t,a,r,o){if(a.hasOwnProperty("visible")&&null!=a.visible){a.rowID,a.rowIndex;var n=a.itemName;a.visible?r.push(n):o.push(n)}},l=(t.setBodyItemProp=function(e,t){if(e&&0!=Object.keys(t).length){var a=!0,r=!1,l=void 0;try{for(var i,s=Object.keys(t)[Symbol.iterator]();!(a=(i=s.next()).done);a=!0){var u=i.value,d=t[u];if(0!=d.length){var c=[],p=[],f=[],b=[],m=!0,g=!1,_=void 0;try{for(var h,v=d[Symbol.iterator]();!(m=(h=v.next()).done);m=!0){var y=h.value;y.itemName&&(o(e,u,y,c,p),n(0,0,y,f,b))}}catch(e){g=!0,_=e}finally{try{!m&&v.return&&v.return()}finally{if(g)throw _}}c.length>0&&e.cardTable.setColEditableByKey(u,c,!0),p.length>0&&e.cardTable.setColEditableByKey(u,p,!1),f.length>0&&e.cardTable.showColByKey(u,f),b.length>0&&e.cardTable.hideColByKey(u,b)}}}catch(e){r=!0,l=e}finally{try{!a&&s.return&&s.return()}finally{if(r)throw l}}}},t.validateWriteOffMny=function(e,t,a,o){if(!(Math.sign(a)>=0)&&!(e.form.getFormItemsValue(t,o)&&e.form.getFormItemsValue(t,o).value))throw new Error((0,r.loadMultiLang)(e,"36300-000000"))},t.buildLightBodyAfterEditData=function(e,t,a,r,o,n,l,i){var u=arguments.length>8&&void 0!==arguments[8]&&arguments[8];try{if(!(e&&t&&a&&r&&n&&l))throw new Error("参数缺失！");var d=s(e,t,a,r,o,n,l,i,u),c=d.card,p=c.body,f=c.bodys;return u&&1==p[r].rows.length||!u&&f[r].rows.length,d}catch(e){throw e}},function(e,t){var a={},r=e.form.getAllFormValue(t);return r.areacode=t,a[t]=r,a}),i=function(e,t,a,r){var o=e.cardTable.getChangedRows(t),n=r[0].rowid,l=[];if(o&&o.length>1){var i=!0,s=!1,d=void 0;try{for(var c,p=o[Symbol.iterator]();!(i=(c=p.next()).done);i=!0){var f=c.value,b=f.rowid;if(b&&b==n){l.push(f);break}}}catch(e){s=!0,d=e}finally{try{!i&&p.return&&p.return()}finally{if(s)throw d}}}else o&&1==o.length&&l.push(o[0]);var m={rows:l,areaType:"table",areacode:t},g={};g[t]=m;var _=l&&l[0].values.relationindex.value;if(_){var h=u(e,a,_);if(h&&h.length>0){var v={rows:h,areaType:"table",areacode:a};g[a]=v}}return g},s=function(e,t,a,r,o,n,s,u,d){var c={head:l(e,a),pageid:t};return d?c.body=i(e,r):c.bodys=i(e,r,o,s),{areacode:r,attrcode:n,card:c,changedrows:s,index:u}},u=t.queryRelationRowsByRowno=function(e,t,a){for(var r=[],o=e.cardTable.getAllRows(t,!1),n=0;n<o.length;n++){a==o[n].values.relationindex.value&&r.push(o[n])}return r}},,,,function(e,t){e.exports=r},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,n,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=a(3),s=(n=i)&&n.__esModule?n:{default:n},u=a(0);function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a(31);var c=u.base.NCModal,p=u.base.NCButton,f=u.base.NCTextArea,b=u.base.NCHotKeys,m=u.base.NCTooltip,g=(o=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.strlen=function(e){e+="";for(var t=0,a=0,r=0;r<e.length;r++)e.charCodeAt(r)>127||94==e.charCodeAt(r)?t+=2:t++,a++;return{len:t,lens:a}},a.state={value:"",lang:{}},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),l(t,[{key:"componentWillMount",value:function(){var e=this;(0,u.getMultiLang)({moduleId:d({},"tmpub",["3601"]),callback:function(t){e.setState({lang:t})}})}},{key:"componentWillReceiveProps",value:function(e){e.show&&e.show!==this.props.show&&this.setState({value:""})}},{key:"render",value:function(){var e=this,t=this.props,a=t.title,r=t.size,o=t.show,n=(t.content,t.onOk),l=t.onClose,i=t.className,d=t.okShow,g=t.closeShow,_=t.label,h=t.isRequire,v=t.placeholder,y=t.maxlen,k=this.state,w=k.value,I=k.lang;return s.default.createElement(c,{fieldid:"reback",animation:!1,backdrop:"static",show:o,onHide:l,className:"zijin-modal "+r+" "+i},s.default.createElement(b,{keyMap:{sureBtnHandler:b.USUAL_KEYS.NC_MODAL_CONFIRM,cancelBtnHandler:b.USUAL_KEYS.NC_MODAL_CALCEL},handlers:{sureBtnHandler:function(){!h||w?n&&n(w):(0,u.toast)({color:"warning",content:I["3601-000007"]+""+_})},cancelBtnHandler:function(){l&&l()}},className:"simpleModal-hotkeys-wrapper",focused:!0,attach:document.body,display:"inline-block"}),s.default.createElement(c.Header,{closeButton:!0},s.default.createElement(c.Title,null,a)),s.default.createElement(c.Body,null,s.default.createElement("div",{className:"area-box"},s.default.createElement("span",{className:"modal-label nc-theme-common-font-c"},h&&s.default.createElement("span",{className:"require-icon"},"* "),_),s.default.createElement(f,{fieldid:"rebackreason",value:w,placeholder:v,onChange:function(t){t.length>y&&(t=t.substr(0,y)),e.setState({value:t})}}),s.default.createElement("span",{className:"value-length"},s.default.createElement("span",{className:"normal-length"},w.length," "),"/",s.default.createElement("span",{className:"max-length"}," ",y)))),s.default.createElement(c.Footer,null,d&&s.default.createElement(m,{placement:"top",inverse:!0,overlay:I["3601-000005"]+" ("+b.USUAL_KEYS.NC_MODAL_CONFIRM+")",trigger:["hover","focus"],className:"model-helper-overlay"},s.default.createElement(p,{fieldid:"rebackok",className:"button-primary",onClick:function(){!h||w?n&&n(w):(0,u.toast)({color:"warning",content:I["3601-000007"]+""+_})}},I["3601-000005"],"(",s.default.createElement("span",{className:"text-decoration-underline"},"Y"),")")),g&&s.default.createElement(m,{placement:"top",inverse:!0,overlay:I["3601-000006"]+" ("+b.USUAL_KEYS.NC_MODAL_CALCEL+")",trigger:["focus","hover"],className:"model-helper-overlay"},s.default.createElement(p,{fieldid:"rebackcancel",onClick:function(){l&&l()}},I["3601-000006"],"(",s.default.createElement("span",{className:"text-decoration-underline"},"N"),")"))))}}]),t}(i.Component),r.defaultProps={show:!1,title:"",label:"",content:"",isRequire:!0,size:"sm",okShow:!0,closeShow:!0,className:"",placeholder:"",maxlen:100},o);t.default=g},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=a(3),n=s(o),l=(s(a(4)),a(0)),i=(s(a(22)),a(28));function s(e){return e&&e.__esModule?e:{default:e}}var u=l.base.NCModal,d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.getLangCode=function(e){var t=a.props.MutiInit.getIntl(a.moduleId);return t&&t.get(a.moduleId+"-"+e)},a.initMultiLang=function(){var e=a.moduleId;(0,l.getMultiLang)({moduleId:e,currentLocale:a.state.currentLocale,domainName:"cmp",callback:a.setMultiLang})},a.setMultiLang=function(e){a.setState({json:e},(function(){i.initTemplate.call(a,a.props)}))},a.getData=function(e){var t={pubsearch:e,pagecode:"360701OB_P01",queryAreaCode:"",oid:"",queryType:"simple"};(0,l.ajax)({url:"/nccloud/cmp/bankaccountbook/initrestmoneypub.do",data:t,success:function(e){var t=e.success,r=e.data;if(t&&null!=r&&r){var o={},n=[];if(r.message)return(0,l.toast)({color:"warning",content:r.message}),void a.props.table.setAllTableData(a.tableId,{rows:[]});var i=r.scale;i||(i="3");var s=r.vos,u={},d={},c=s.accountCode,p=s.accountName,f=s.accountType,b=s.capitalType,m=s.currencyName,g=s.currentBalance,_=s.surplusBalance;d.accountcode={value:c,display:c},d.accountname={value:p,display:p},d.accounttype={value:f,display:f},d.capitaltype={value:b,display:b},d.currencyname={value:m,display:m},d.currentbalance={value:g,display:g,scale:i},d.surplusbalance={value:_,display:_,scale:i},u.values=d,u.status="0",u.rowid=null,n.push(u),o.rows=n,o.areacode=a.tableId,a.props.table.setAllTableData(a.tableId,o)}else a.props.table.setAllTableData(a.tableId,{rows:[]})}})},a.close=function(){a.setState({showOriginalData:[]},(function(){a.props.onCloseClick()}))},a.moduleId="360701OB",a.tableId="restmoney",a.state={currentLocale:"zh-CN",showOriginalData:[],json:{}},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentWillMount",value:function(){this.initMultiLang()}},{key:"componentDidMount",value:function(){var e=this;this.props.table.setAllTableData(this.tableId,{rows:[]}),this.setState({showOriginalData:this.props.showOriginalData},(function(){e.initData()}))}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(e.showmodal&&e.showmodal!==this.props.showmodal){this.props.table.setAllTableData(this.tableId,{rows:[]}),this.setState({showOriginalData:e.showOriginalData},(function(){t.initData()}))}}},{key:"initData",value:function(){var e=this.state.showOriginalData;if(Array.isArray(e)){if(!e||0==e.length)return;for(var t=0;t<e.length;t++){var a=e[t];a.pk_account||a.pk_cashaccount||e.splice(t,1)}if(0==e.length)return;this.getData(e)}else{var r=[];if(!e.pk_account&&!e.pk_cashaccount)return;r.push(e),this.getData(r)}}},{key:"render",value:function(){var e=this.props,t=e.table,a=e.button,r=(e.search,e.modal,t.createSimpleTable);a.createButton;return n.default.createElement("div",null,n.default.createElement(u,{fieldid:"accbalance",show:this.props.showmodal,style:{width:"1100px"},size:"lg",onHide:this.close},n.default.createElement(u.Header,{closeButton:"true"},n.default.createElement(u.Title,null,this.state.json["360701OB-000056"])),n.default.createElement(u.Body,{size:"sm",className:"body-resize-icon"},n.default.createElement("div",null,r(this.tableId,{height:"158px",showIndex:!0,cancelCustomRightMenu:!0})))))}}]),t}(o.Component);t.default=(0,l.createPage)({})(d)},,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={multiLang:{domainName:"tmpub",currentLocale:"zh-CN",moduleId:"refer_tmpub"},refType:"grid",refName:"refer-0011",refcode:"tmpub.refer.accid.AccidGridRef",queryGridUrl:"/nccloud/tmpub/refer/AccidGridRef.do",isMultiSelectedEnabled:!1,columnConfig:[{name:["refer-0012","refer-0013","refer-0014","refer-0015","refer-0016","refer-0017","refer-0018"],code:["refcode","refname","pk_ownerorgname","pk_orgname","currtypename","acctypename","isaccounting"]}]};return React.createElement(r,Object.assign(t,e))};var r=a(0).high.Refer},function(e,t,a){"use strict";(function(e){var r,o,n,l,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};window,l=function(e){return function(e){var t={};function a(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==(void 0===e?"undefined":i(e))&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(r,o,function(t){return e[t]}.bind(null,o));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="../../../../",a(a.s=472)}({0:function(t,a){t.exports=e},1:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.conf=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return React.createElement(o,r({},n,e))};var o=a(0).high.Refer,n=t.conf={multiLang:{domainName:"uap",currentLocale:"zh-CN",moduleId:"uapRefer"},queryTreeUrl:"/nccloud/riart/ref/groupRefTreeAction.do",refType:"tree",placeholder:"1880000025-000061",refName:"1880000025-000061",rootNode:{refname:"1880000025-000061",refpk:"root"}}},3:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.conf=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return React.createElement(l,r({},i,e))};var o=a(0),n=a(1),l=o.high.Refer;n.conf.fieldid="group";var i=t.conf={multiLang:{domainName:"uapbd",currentLocale:"zh-CN",moduleId:"refer_uapbd"},refType:"tree",refName:"refer-000201",refCode:"uapbd.refer.org.BusinessUnitTreeRef",rootNode:{refname:"refer-000201",refpk:"root"},placeholder:"refer-000201",queryTreeUrl:"/nccloud/uapbd/org/BusinessUnitTreeRef.do",treeConfig:{name:["refer-000002","refer-000003"],code:["refcode","refname"]},isMultiSelectedEnabled:!1,unitProps:n.conf,isShowUnit:!1}},472:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={multiLang:{domainName:"uapbd",currentLocale:"zh-CN",moduleId:"refer_uapbd"},refType:"gridTree",refName:"refer-000386",placeholder:"refer-000386",rootNode:{refname:"refer-000015",refpk:"root"},refCode:"uapbd.pub.BankaccSubUseTreeGridRef",queryTreeUrl:"/nccloud/uapbd/ref/BankaccSubUseTreeRef.do",queryGridUrl:"/nccloud/uapbd/ref/BankaccSubUseGridRef.do",columnConfig:[{name:["refer-000377","refer-000378","refer-000379","refer-000387","refer-000388","refer-000017","refer-000382","refer-000383","refer-000389","refer-000385","refer-000014"],code:["bd_bankaccsub.accnum","bd_bankaccsub.accname","bd_bankaccbas.code","bd_bankaccbas.name","bd_bankdoc.name","bd_banktype.name","bd_bankaccsub.code","bd_bankaccsub.name","bd_currtype.name","bd_bankaccsub.acctype as acctype","bd_bankaccbas.mnecode"],checked:{"bd_bankaccbas.mnecode":!1},search:{"bd_bankaccbas.mnecode":!0}}],treeConfig:{name:["refer-000002","refer-000003"],code:["refcode","refname"]},isMultiSelectedEnabled:!1,unitProps:n.conf,isShowUnit:!1};return React.createElement(l,r({},t,e))};var o=a(0),n=a(3),l=o.high.Refer}})},"object"==i(t)&&"object"==i(e)?e.exports=l(a(0)):(o=[a(0)],void 0===(n="function"==typeof(r=l)?r.apply(t,o):r)||(e.exports=n))}).call(this,a(13)(e))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.restmoney=t.initTemplate=void 0;var r=n(a(29)),o=n(a(17));function n(e){return e&&e.__esModule?e:{default:e}}t.initTemplate=r.default,t.restmoney=o.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=n.default.call(this);if(t.template){var a=t.template;a=function(e,t){return t.restmoney.items=t.restmoney.items.map((function(e,t){return e.width=150,e})),t.restmoney.showcheck=!0,t.restmoney.pagination=!1,t}(0,a),e.meta.setMeta(a)}};a(0);var r,o=a(17),n=(r=o)&&r.__esModule?r:{default:r}},,function(e,t,a){var r=a(32);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};a(9)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,a){(e.exports=a(8)(!1)).push([e.i,'@media (min-width: 768px) {\n  .u-modal.zijin-modal .u-modal-dialog {\n    width: 520px;\n    height: 290px;\n  }\n}\n.zijin-modal [aria-hidden="true"] {\n  font-size: 23px;\n  font-weight: 400;\n}\n.zijin-modal.nc-modal.u-modal .u-modal-dialog .u-modal-content {\n  height: 290px;\n  width: 520px;\n}\n.zijin-modal .u-modal-body {\n  padding: 20px 20px !important;\n  height: 200px;\n}\n.zijin-modal .u-modal-body .area-box {\n  position: relative;\n}\n.zijin-modal .u-modal-body .modal-label {\n  display: inline-block;\n  width: 100px;\n  text-align: left;\n  vertical-align: top;\n  margin-right: 16px;\n  color: #555;\n  padding: 2px;\n}\n.zijin-modal .u-modal-body .modal-label .require-icon {\n  color: red;\n  font-size: 14px;\n}\n.zijin-modal .u-modal-body .textarea-wrap {\n  display: inline-block;\n  width: calc(100% - 150px);\n  height: 95px;\n}\n.zijin-modal .u-modal-body .textarea-wrap .u-form-control {\n  resize: none !important;\n  height: 100%;\n  width: 480px;\n}\n.zijin-modal .u-modal-body .value-length {\n  font-size: 12px;\n  color: #ccc;\n  position: absolute;\n  bottom: 5px;\n  right: 20px;\n}\n.zijin-modal .u-modal-footer .u-button {\n  min-width: 60px !important;\n}\n',""])},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearOutAccountView=t.VoucherLinkBill=t.setListButtonUseful=t.setCardShouderBtnUseful=void 0;var r=a(0),o=a(11);r.cardCache.setDefData,t.setCardShouderBtnUseful=function(e,t){e.button.setButtonDisabled(o.card_shouder_buttons,!0),console.log(e.form.getFormItemsValue(o.card_from_id,"pk_org")),e.form.getFormItemsValue(o.card_from_id,"pk_org")&&e.form.getFormItemsValue(o.card_from_id,"pk_org").value&&e.button.setButtonDisabled(["AddLine","AddLine2"],!1),"deal"==e.getUrlParam("status")&&e.button.setButtonDisabled(["AddLine2"],!1);var a=!1,r=e.form.getFormItemsValue(o.card_from_id,"vsourcebustype")&&e.form.getFormItemsValue(o.card_from_id,"vsourcebustype").value;if((o.busType.BusType_BillFBM==r&&(a=!0),a&&(e.button.setButtonDisabled(["AddLine"],!0),e.button.setButtonDisabled(["AddLine2"],!0)),e.cardTable.getNumberOfRows(o.card_table1_id,!0)>0)&&e.cardTable.getCheckedRows(o.card_table1_id).length>0){if(a)return e.button.setButtonDisabled(["AddLine","CopyLine"],!0),void e.button.setButtonDisabled(["DeleteLine"],!1);e.button.setButtonDisabled(["DeleteLine","CopyLine"],!1)}if(e.cardTable.getNumberOfRows(o.card_table2_id,!0)>0&&e.cardTable.getCheckedRows(o.card_table2_id).length>0){if(a)return void e.button.setButtonDisabled(["AddLine2","DelLine2","CopyLine2"],!0);e.button.setButtonDisabled(["DeleteLine2","CopyLine2"],!1)}},t.setListButtonUseful=function(){this.props.button.setButtonDisabled(o.list_head_buttons,!0);var e=this.props.table.getCheckedRows(o.list_table_id);if(e&&0!=e.length)if(1==e.length){this.props.button.setButtonDisabled(["Copy","Output","Print","OutPut","File","LinkQueryNtb","LinkQueryBeforBill"],!1);var t=null,a=null,r=null;e.forEach((function(e){t=e.data.values.billstatus.value,e.data.values.vbillstatus.value,a=e.data.values.voucherflag.value,r=e.data.values.vsourcebustype.value}));var n=[];"0"==t?n=["Commit","Delete"]:"1"==t&&"billhand"==r?n=["UnCommit","LinkQueryWorkFlow"]:"1"==t&&"billhand"!=r?n=["LinkQueryWorkFlow","UnCommit"]:"2"==t?n=["LinkQueryWorkFlow"]:"3"==t?n=["Gather","LinkQueryWorkFlow"]:a&&"4"==t?n=["LinkQueryWorkFlow","LinkQueryPZ","LinkQueryAfterBill","LinkReturnBill","OffiPrint","InOffiPrint","BatchUnPremit"]:a||"4"!=t?("5"==t||"6"==t)&&(n=["LinkQueryWorkFlow"]):n=["UnGather","LinkQueryWorkFlow","LinkQueryAfterBill","LinkReturnBill","OffiPrint","InOffiPrint","BatchPremit"],this.props.button.setButtonDisabled(n,!1)}else e.length>1&&this.props.button.setButtonDisabled(o.list_head_buttons,!1);else this.props.button.setButtonDisabled(o.list_head_buttons,!0)},t.VoucherLinkBill=function(e,t,a){var n,l={pageInfo:JSON.stringify(e.table.getTablePageInfo(a))};(n=r.cacheTools.get("checkedData"))&&n.length>0&&(0,r.ajax)({url:o.base_url+"pzlinkquerybill.do",data:{operatingLogVO:n,pageCode:t,extParam:l},success:function(t){var r=t.success,o=t.data;if(console.log(t),r){var n=o&&o.grid;if(n)if(n[a].rows.length>1)e.table.setAllTableData(a,n[a]);else if(1==n[a].rows.length){var l=n[a].rows[0].values.pk_gathering.value;e.pushTo("/linkcard",{status:"browse",id:l,scene:"'scene'"})}else e.table.setAllTableData(a,{rows:[]});else e.table.setAllTableData(a,{rows:[]})}}})},t.clearOutAccountView=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"pk_clearoutaccount",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pk_clearoutbankaccount";if(e&&t){var n=e.getUrlParam("status"),l="browse"==n,i={};if(l)i[a]=!0,i[r]=!1;else{var s=(e.form.getFormItemsValue(o.card_from_id,"clearoutacctype")||{}).value,u=e.form.getFormItemsValue(o.card_from_id,"pk_clearoutbankaccount");u&&u.value||e.form.setFormItemsValue(o.card_from_id,{pk_clearoutbankaccount:{value:e.form.getFormItemsValue(o.card_from_id,"pk_clearoutaccount")&&e.form.getFormItemsValue(o.card_from_id,"pk_clearoutaccount").value,display:e.form.getFormItemsValue(o.card_from_id,"pk_clearoutaccount")&&e.form.getFormItemsValue(o.card_from_id,"pk_clearoutaccount").display}}),s&&"inneraccount"!=s?(i[r]=!0,i[a]=!1):(i[r]=!1,i[a]=!0)}e.form.setFormItemsVisible(o.card_from_id,i)}}},,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(0);a(41);var o=r.base.NCTabs;t.default=o},function(e,t,a){var r=a(42);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};a(9)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,a){(e.exports=a(8)(!1)).push([e.i,".u-tabs-top .u-tabs-bar {\n  margin-bottom: 0px;\n}\n",""])},,function(e,t,a){"use strict";(function(e){var r,o,n,l,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};window,l=function(e){return function(e){var t={};function a(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==(void 0===e?"undefined":i(e))&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(r,o,function(t){return e[t]}.bind(null,o));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="../../../../",a(a.s=474)}({0:function(t,a){t.exports=e},1:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.conf=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return React.createElement(o,r({},n,e))};var o=a(0).high.Refer,n=t.conf={multiLang:{domainName:"uap",currentLocale:"zh-CN",moduleId:"uapRefer"},queryTreeUrl:"/nccloud/riart/ref/groupRefTreeAction.do",refType:"tree",placeholder:"1880000025-000061",refName:"1880000025-000061",rootNode:{refname:"1880000025-000061",refpk:"root"}}},3:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.conf=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return React.createElement(l,r({},i,e))};var o=a(0),n=a(1),l=o.high.Refer;n.conf.fieldid="group";var i=t.conf={multiLang:{domainName:"uapbd",currentLocale:"zh-CN",moduleId:"refer_uapbd"},refType:"tree",refName:"refer-000201",refCode:"uapbd.refer.org.BusinessUnitTreeRef",rootNode:{refname:"refer-000201",refpk:"root"},placeholder:"refer-000201",queryTreeUrl:"/nccloud/uapbd/org/BusinessUnitTreeRef.do",treeConfig:{name:["refer-000002","refer-000003"],code:["refcode","refname"]},isMultiSelectedEnabled:!1,unitProps:n.conf,isShowUnit:!1}},474:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="refer-000393";"refer-000393"==e.title||"refer-000394"==e.title||"refer-000395"==e.title?t=e.title:e.title=t;var a={refName:t,placeholder:t,refCode:"uapbd.refer.pub.CustBankAccGridRef",queryGridUrl:"/nccloud/uapbd/ref/CustBankAccGridRef.do",isMultiSelectedEnabled:!1,columnConfig:[{name:["refer-000012","refer-000013","refer-000381","refer-000015","refer-000384"],code:["accnum","accname","bankdoc_name","banktype_name","currtype_name"]}],multiLang:{domainName:"uapbd",currentLocale:"zh-CN",moduleId:"refer_uapbd"},refType:"grid",isShowUnit:!1,unitProps:n.conf};return React.createElement(l,r({},a,e))};var o=a(0),n=a(3),l=o.high.Refer}})},"object"==i(t)&&"object"==i(e)?e.exports=l(a(0)):(o=[a(0)],void 0===(n="function"==typeof(r=l)?r.apply(t,o):r)||(e.exports=n))}).call(this,a(13)(e))},function(e,t,a){"use strict";(function(e){var r,o,n,l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(i,s){"object"==l(t)&&"object"==l(e)?e.exports=s(a(0),a(3)):(o=[a(0),a(3)],void 0===(n="function"==typeof(r=s)?r.apply(t,o):r)||(e.exports=n))}(window,(function(e,t){return function(e){var t={};function a(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==(void 0===e?"undefined":l(e))&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(r,o,function(t){return e[t]}.bind(null,o));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="../../../../",a(a.s=529)}({0:function(t,a){t.exports=e},1:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.conf=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return React.createElement(o,r({},n,e))};var o=a(0).high.Refer,n=t.conf={multiLang:{domainName:"uap",currentLocale:"zh-CN",moduleId:"uapRefer"},queryTreeUrl:"/nccloud/riart/ref/groupRefTreeAction.do",refType:"tree",placeholder:"1880000025-000061",refName:"1880000025-000061",rootNode:{refname:"1880000025-000061",refpk:"root"}}},143:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.conf=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return React.createElement(l,r({},i,e))};var o=a(0),n=a(1),l=o.high.Refer,i=t.conf={multiLang:{domainName:"uapbd",currentLocale:"zh-CN",moduleId:"refer_uapbd"},refType:"tree",refName:"refer-000193",refCode:"uapbd.org.BusinessUnitAllTreeRef",rootNode:{refname:"refer-000193",refpk:"root"},placeholder:"refer-000194",queryTreeUrl:"/nccloud/uapbd/ref/BusinessUnitAllTreeRef.do",treeConfig:{name:["refer-000002","refer-000003"],code:["refcode","refname"]},isMultiSelectedEnabled:!1,unitProps:n.conf,isShowUnit:!1,isHasDisabledData:!1}},4:function(e,a){e.exports=t},5:function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=function(e,t){var a,r=e[1]||"",o=e[3];if(!o)return r;if(t&&"function"==typeof btoa){var n=(a=o,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),l=o.sources.map((function(e){return"/*# sourceURL="+o.sourceRoot+e+" */"}));return[r].concat(l).concat([n]).join("\n")}return[r].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+a+"}":a})).join("")},t.i=function(e,a){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var n=this[o][0];"number"==typeof n&&(r[n]=!0)}for(o=0;o<e.length;o++){var l=e[o];"number"==typeof l[0]&&r[l[0]]||(a&&!l[2]?l[2]=a:a&&(l[2]="("+l[2]+") and ("+a+")"),t.push(l))}},t}},529:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={multiLang:{domainName:"uapbd",currentLocale:"zh-CN",moduleId:"refer_uapbd"},refType:"gridTree",refName:"refer-000500",refCode:"uapbd.supplier.InnerCustSupplierForCustGridTreeRef",placeholder:"refer-000500",queryTreeUrl:"/nccloud/uapbd/ref/CustSupplierFlexTreeRef.do",queryGridUrl:"/nccloud/uapbd/ref/CustSupplierFlexGridRef.do",columnConfig:[{name:["refer-000047","refer-000501","refer-000502","refer-000014","refer-000504"],code:["pk_orgname","refcode","refname","mnecode","taxpayerid"],fullTxtCode:{refcode:!0,refname:!0,taxpayerid:!0},search:{mnecode:!0}}],isMultiSelectedEnabled:!1,treeConfig:{name:["refer-000002","refer-000003"],code:["refcode","refname"]},isTreelazyLoad:!0,isShowUnit:!1,unitProps:s.conf,isShowUsual:!0,isHasDisabledData:!0,defaultCheck:"pk_custclass"};return d.default.createElement(p,r({},t,e))};var n=a(0),i=c(a(530)),s=a(143),u=a(4),d=c(u);function c(e){return e&&e.__esModule?e:{default:e}}n.high.Refer;var p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":l(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={rootNode:{refname:"pk_custclass"==a.props.defaultCheck?"refer-000538":"refer-000539",refpk:"root"}},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":l(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"onRadioChange",value:function(e){var t=this.state.rootNode;t.refname="pk_custclass"==e?"refer-000538":"refer-000539",this.setState({rootNode:t})}},{key:"render",value:function(){return d.default.createElement(i.default,r({},this.props,{rootNode:this.state.rootNode,onRadioChange:this.onRadioChange.bind(this)}))}}]),t}(u.Component)},530:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},o="function"==typeof Symbol&&"symbol"==l(Symbol.iterator)?function(e){return void 0===e?"undefined":l(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":l(e)},n=a(0);a(531);var i=n.base.NCRadio,s=n.high.Refer,u=(s.PopRefer,(0,s.MultiLangWrapper)(function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":l(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.getParam=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=a.props,r=t.queryCondition,n=t.pageSize,l=t.refType;"root"===e.pid&&(e.pid="");var i=e.keyword,s=void 0===i?"":i,u=e.pid,d=void 0===u?"":u,c=e.pageInfo,p=void 0===c?{}:c;p={pageSize:p.pageSize||n,pageIndex:p.pageIndex||("tree"===l?-1:0)};var f={pid:d,keyword:s,queryCondition:r?"function"==typeof r?r():"object"===(void 0===r?"undefined":o(r))?r:{}:{},pageInfo:p};return f.queryCondition.queryType=a.state.radioValue,f},a.handleGroupChange=function(e){a.setState({group_pk:e.refpk,expandedKeys:[]},(function(){a.getTreeData()}))},a.handleRadioChange=function(e){a.props.onRadioChange(e);var t=a.props.rootNode,r=a.state.group;r[void 0]=[t],a.setState({group:r,tableData:[{rows:[],page:{pageIndex:0,pageSize:a.props.pageSize,totalPage:1}}],treeData:[t],radioValue:e,expandedKeys:[]},(function(){a.getTreeData()}))},a.getTreeData=function(){var e=a.props,t=e.queryTreeUrl,r=e.isCacheable,o=e.rootNode,n=a.getParam({pid:"",pageInfo:{pageSize:10,pageIndex:-1},queryCondition:{queryType:a.state.radioValue}}),l=a.hasCache(t,n);a.state.tableData=[{rows:[],page:{pageIndex:0,pageSize:a.props.pageSize,totalPage:1}}],1==r&&l?a.setTreeData("treeData",o,l):a.loadTreeData(n).then((function(e){a.setTreeData("treeData",o,e)})),a.setState({tableData:a.state.tableData})},a.renderPopoverLeftHeader=function(){return React.createElement("div",{id:"radioGroup",style:{"margin-bottom":"5px","margin-left":"10px"}},React.createElement(i.NCRadioGroup,{name:"role",radioValue:a.state.radioValue,selectedValue:a.state.radioValue,onChange:a.handleRadioChange.bind(a)},React.createElement(i,{className:"my-radio",value:"pk_custclass"},a.props.multiLang["refer-000540"]),React.createElement(i,{className:"my-radio",value:"pk_supplierclass"},a.props.multiLang["refer-000541"])))},a.state=r({},a.state,{radioValue:"pk_custclass"==a.props.defaultCheck?"pk_custclass":"pk_supplierclass",group_pk:"firstGroup",currentReffer:[]}),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":l(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(s.ReferWithUnit)));t.default=u},531:function(e,t,a){var r=a(532);"string"==typeof r&&(r=[[e.i,r,""]]);a(6)(r,{transform:void 0}),r.locals&&(e.exports=r.locals)},532:function(e,t,a){(e.exports=a(5)(!1)).push([e.i,".my-radio label.u-radio-label::before {\n  height: 14px!important;\n  width: 14px!important;\n}\n.my-radio label.u-radio-label::after {\n  margin-left: 4px!important;\n  top: 7px!important;\n}\n",""])},6:function(e,t,a){var r,o,n={},i=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=r.apply(this,arguments)),o}),s=function(e){var t={};return function(a){return void 0===t[a]&&(t[a]=e.call(this,a)),t[a]}}((function(e){return document.querySelector(e)})),u=null,d=0,c=[],p=a(7);function f(e,t){for(var a=0;a<e.length;a++){var r=e[a],o=n[r.id];if(o){o.refs++;for(var l=0;l<o.parts.length;l++)o.parts[l](r.parts[l]);for(;l<r.parts.length;l++)o.parts.push(v(r.parts[l],t))}else{var i=[];for(l=0;l<r.parts.length;l++)i.push(v(r.parts[l],t));n[r.id]={id:r.id,refs:1,parts:i}}}}function b(e,t){for(var a=[],r={},o=0;o<e.length;o++){var n=e[o],l=t.base?n[0]+t.base:n[0],i={css:n[1],media:n[2],sourceMap:n[3]};r[l]?r[l].parts.push(i):a.push(r[l]={id:l,parts:[i]})}return a}function m(e,t){var a=s(e.insertInto);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=c[c.length-1];if("top"===e.insertAt)r?r.nextSibling?a.insertBefore(t,r.nextSibling):a.appendChild(t):a.insertBefore(t,a.firstChild),c.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");a.appendChild(t)}}function g(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=c.indexOf(e);t>=0&&c.splice(t,1)}function _(e){var t=document.createElement("style");return e.attrs.type="text/css",h(t,e.attrs),m(e,t),t}function h(e,t){Object.keys(t).forEach((function(a){e.setAttribute(a,t[a])}))}function v(e,t){var a,r,o,n;if(t.transform&&e.css){if(!(n=t.transform(e.css)))return function(){};e.css=n}if(t.singleton){var l=d++;a=u||(u=_(t)),r=w.bind(null,a,l,!1),o=w.bind(null,a,l,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(a=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",h(t,e.attrs),m(e,t),t}(t),r=C.bind(null,a,t),o=function(){g(a),a.href&&URL.revokeObjectURL(a.href)}):(a=_(t),r=I.bind(null,a),o=function(){g(a)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=("undefined"==typeof document?"undefined":l(document)))throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==l(t.attrs)?t.attrs:{},t.singleton||(t.singleton=i()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var a=b(e,t);return f(a,t),function(e){for(var r=[],o=0;o<a.length;o++){var l=a[o];(i=n[l.id]).refs--,r.push(i)}for(e&&f(b(e,t),t),o=0;o<r.length;o++){var i;if(0===(i=r[o]).refs){for(var s=0;s<i.parts.length;s++)i.parts[s]();delete n[i.id]}}}};var y,k=(y=[],function(e,t){return y[e]=t,y.filter(Boolean).join("\n")});function w(e,t,a,r){var o=a?"":r.css;if(e.styleSheet)e.styleSheet.cssText=k(t,o);else{var n=document.createTextNode(o),l=e.childNodes;l[t]&&e.removeChild(l[t]),l.length?e.insertBefore(n,l[t]):e.appendChild(n)}}function I(e,t){var a=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}function C(e,t,a){var r=a.css,o=a.sourceMap,n=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||n)&&(r=p(r)),o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var l=new Blob([r],{type:"text/css"}),i=e.href;e.href=URL.createObjectURL(l),i&&URL.revokeObjectURL(i)}},7:function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var a=t.protocol+"//"+t.host,r=a+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var o,n=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(n)?e:(o=0===n.indexOf("//")?n:0===n.indexOf("/")?a+n:r+n.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")}))}}})}))}).call(this,a(13)(e))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InnerAccoutDialog=void 0;var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=a(3),n=s(o),l=(s(a(4)),a(0));a(50);var i=s(a(52));function s(e){return e&&e.__esModule?e:{default:e}}var u=l.base.NCModal,d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.tableCode="inneraccbalance",a.init(e),a.state={json:{}},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentWillReceiveProps",value:function(e){this.init(e),this.queryAccBalance(this.props.accpk)}},{key:"componentWillMount",value:function(){var e=this;(0,l.getMultiLang)({moduleId:"3601Inner",domainName:"tmpub",callback:function(t,a,r){a&&e.setState({json:t},(function(){e.initTemplate()}))}})}},{key:"render",value:function(){var e=this.props.table.createSimpleTable;return n.default.createElement(u,{fieldid:"inneraccbalance",className:"InnerAccoutModal_class",show:this.show,onHide:this.close,style:{width:"700px"}},n.default.createElement(u.Header,{closeButton:!0},n.default.createElement(u.Title,null,this.state.json["3601Inner-000005"])),n.default.createElement(u.Body,{className:"body-resize-icon"},e&&n.default.createElement("div",null,e(this.tableCode,{height:"158px",showIndex:!0,cancelCustomRightMenu:!0}))))}},{key:"componentDidMount",value:function(){this.queryAccBalance()}},{key:"init",value:function(e){this.pk_accid=e.accpk,this.show=e.showModal,this.close=e.closeModal}},{key:"queryAccBalance",value:function(){var e=this;(0,l.ajax)({url:"/nccloud/tmpub/pub/inneraccbalance.do",async:!0,data:{accid:this.pk_accid},success:function(t){var a=t.data,r={areacode:e.tableCode,rows:[{status:0,rowid:null,values:{name:{display:a.accName,value:a.accName,scale:-1},bookbalance:{display:null,value:a.bookBalance,scale:3},realbalance:{display:null,value:a.realBalance,scale:3},realbalancewithoutover:{display:null,value:a.realBalanceNoOverFraft,scale:3}}}]};e.props.table.setAllTableData(e.tableCode,r)},error:function(t){e.props.table.setAllTableData(e.tableCode,{rows:[]})}})}},{key:"initTemplate",value:function(){var e=i.default.call(this);if(e.template){var t=e.template;t=this.modifierMeta.call(this,t),this.props.meta.setMeta(t)}}},{key:"modifierMeta",value:function(e){return e}}]),t}(o.Component);t.InnerAccoutDialog=(0,l.createPage)({})(d)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={multiLang:{domainName:"fbm",currentLocale:"zh-CN",moduleId:"refer_fbm"},refType:"grid",refName:"refer-0023",refcode:"fbm.refer.fbm.Bill4FtsReceiveGridRef",queryGridUrl:"/nccloud/fbm/refer/Bill4FtsReceiveGridRef.do",isMultiSelectedEnabled:!1,columnConfig:[{name:["refer-0012","refer-0013","refer-0014","refer-0015","refer-0017","refer-0018"],code:["fbmbillno","currname","money","enddate","billtypename","orgname"]}]};return React.createElement(r,Object.assign(t,e))};var r=a(0).high.Refer},,,function(e,t,a){var r=a(51);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};a(9)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,a){(e.exports=a(8)(!1)).push([e.i,".InnerAccoutModal_class .u-modal-content {\n  max-height: 300px !important;\n}\n",""])},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{template:{gridrelation:{inneraccbalance:{destBrowseAreaCode:null,destEditAreaCode:null,srcAreaCode:"inneraccbalance",tabRelation:["inneraccbalance"]}},inneraccbalance:{clazz:null,code:"inneraccbalance",items:[{itemtype:"input",visible:!0,label:this.state.json["3601Inner-000000"],attrcode:"name",maxlength:"20",metapath:null},{itemtype:"input",visible:!0,label:this.state.json["3601Inner-000001"],attrcode:"bookbalance",maxlength:"20",metapath:null},{itemtype:"input",visible:!0,label:this.state.json["3601Inner-000002"],attrcode:"realbalance",maxlength:"20",metapath:null},{itemtype:"input",visible:!0,label:this.state.json["3601Inner-000003"],attrcode:"realbalancewithoutover",maxlength:"20",metapath:null}],moduletype:"table",name:this.state.json["3601Inner-000005"],pagination:!1,vometa:""},code:"inneraccbalancedialog",moduletype:"table",name:this.state.json["3601Inner-000005"]},code:"inneraccbalancedialog",formrelation:null,name:this.state.json["3601Inner-000005"],metapath:null,clazz:null,pagetype:"Nochild"}}},,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showTbbInfo=void 0;var r=a(0);t.showTbbInfo=function(e){if(e&&e.model&&e.model.rows&&0!=e.model.rows.length){var t=e.model.rows,a="",o=!1,n=!0,l=!1,i=void 0;try{for(var s,u=t[Symbol.iterator]();!(n=(s=u.next()).done);n=!0){var d=s.value,c=(d&&d.values&&d.values.ntbinfo||{}).value;c&&(o=!0,a+=c,d.values.ntbinfo={value:null,display:null})}}catch(e){l=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(l)throw i}}o&&(0,r.toast)({color:"warning",content:a})}}},,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buttonVisible=t.pageInfoClick=t.initTemplate=t.afterEvent=t.buttonClick=void 0;var r=s(a(71)),o=s(a(93)),n=s(a(76)),l=s(a(122)),i=s(a(75));function s(e){return e&&e.__esModule?e:{default:e}}t.buttonClick=r.default,t.afterEvent=n.default,t.initTemplate=o.default,t.pageInfoClick=l.default,t.buttonVisible=i.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTableDefData=t.modelDelLineAfterProcess=t.modelDelLineProcess=t.modelAddLineProcess=t.BatchCopyFund=t.getCopyIndexByFinanceIndex=t.BatchCopyGatherLine=t.findMaxRelationNum=t.getNextRelationNum=t.queryRelationIndexs=t.BatchDelGatherFundLine=t.BatchDelGatherLine=t.AddGatherLine=t.addLineProcess=void 0,t.default=function(e,t,a){var r,s=this,d=(e.getUrlParam("status"),this.props.form.getFormItemsValue(l.card_from_id,"pk_gathering").value),p=this.props.form.getFormItemsValue(l.card_from_id,"vsourcebustype").value,b=(this.props.form.getFormItemsValue(l.card_from_id,"pk_vsourcebilltype")||{}).value,h=(this.props.form.getFormItemsValue(l.card_from_id,"pk_srcbill")||{}).value,k=e.createExtCardData(l.card_page_id,l.card_from_id,[l.card_table1_id,l.card_table2_id]),w=e.form.getFormItemsValue(this.formId,"vbillno").value,I=e.form.getFormItemsValue(this.formId,"pk_billtype").value,B=e.form.getFormItemsValue(this.formId,"pk_group").value,O=this.props.form.getFormItemsValue(l.card_from_id,"pk_org").value,x={},j={};switch(x[l.card_table1_id]="cardTable",x[l.card_table2_id]="cardTable",t){case"Refresh":this.queryData("gatheringcardquery.do",!0);break;case"Print":this.printFunction.call(this,e);break;case"Output":(0,o.output)({url:l.base_url+"gatheringprint.do",data:{oids:[d],funcode:l.funcode,nodekey:l.print_nodekey,outputType:"output"}});break;case"Add":e.pushTo("/card",{status:"add",from:"card",id:e.getUrlParam("id")}),u.default.call(this,e),c.orgVersionView.call(this,this.props,l.card_from_id),e.form.EmptyAllFormValue(l.card_from_id),e.cardTable.setMulTablesData((m(r={},this.tableId1,{rows:[]}),m(r,this.tableId2,{rows:[]}),r)),this.vbillno="",this.toggleShow();break;case"Save":e.validateToSave(k,this.saveBill.bind(this,e),x,"");break;case"SaveCommit":e.validateToSave(k,A.bind(this,e),x,"");break;case"SaveAdd":e.validateToSave(k,this.saveAndAdd.bind(this,e),x,"");break;case"Edit":this.editBill();break;case"Copy":if("billdeliver"==p)return void(0,o.toast)({color:"warning",content:this.state.json["36300TG-000004"]});e.pushTo("/card",{status:"copy",id:e.getUrlParam("id"),isCopy:!0,from:"card"}),this.copyBill();break;case"Commit":(0,n.cardOperator)(e,l.card_page_id,l.card_from_id,g,l.pkname,l.base_url+"gatheringcommit.do",this.state.json["36300TG-000005"],l.dataSource,P.bind(this),!0,{btncode:"Commit",pagecode:l.card_page_id});break;case"UnCommit":(0,n.cardOperator)(e,l.card_page_id,l.card_from_id,g,l.pkname,l.base_url+"gatheringuncommit.do",this.state.json["36300TG-000006"],l.dataSource,this.toggleShow.bind(this),!0);break;case"Decide":this.decideBill();break;case"UnDecide":(0,n.cardOperator)(e,l.card_page_id,l.card_from_id,g,l.pkname,l.base_url+"gatheringundecide.do",this.state.json["36300TG-000007"],l.dataSource,this.toggleShow.bind(this));break;case"Delete":(0,o.promptBox)({color:"warning",title:this.state.json["36300TG-000008"],content:this.state.json["36300TG-000009"],beSureBtnClick:this.delConfirm.bind()});break;case"Deliver":(0,n.cardOperator)(e,l.card_page_id,l.card_from_id,g,l.pkname,l.base_url+"gatheringdeliver.do",this.state.json["36300TG-000010"],l.dataSource,this.toggleShow.bind(this));break;case"UnDeliver":(0,n.cardOperator)(e,l.card_page_id,l.card_from_id,g,l.pkname,l.base_url+"gatheringundeliver.do",this.state.json["36300TG-000011"],l.dataSource,this.toggleShow.bind(this));break;case"Gather":(0,n.cardOperator)(e,l.card_page_id,l.card_from_id,g,l.pkname,l.base_url+"gatheringrecvmoney.do",this.state.json["36300TG-000012"],l.dataSource,this.toggleShow.bind(this),null,{btncode:"Gather",pagecode:l.card_page_id});break;case"UnGather":(0,n.cardOperator)(e,l.card_page_id,l.card_from_id,g,l.pkname,l.base_url+"gatheringunrecvmoney.do",this.state.json["36300TG-000013"],l.dataSource,this.toggleShow.bind(this),null,{btncode:"UnGather",pagecode:l.card_page_id});break;case"Premit":(0,n.cardOperator)(e,l.card_page_id,l.card_from_id,g,l.pkname,l.base_url+"gatheringvoucher.do",this.state.json["36300TG-000014"],l.dataSource,this.toggleShow.bind(this),null,{btncode:"Premit",pagecode:l.card_page_id});break;case"UnPremit":(0,n.cardOperator)(e,l.card_page_id,l.card_from_id,g,l.pkname,l.base_url+"gatheringunvoucher.do",this.state.json["36300TG-000015"],l.dataSource,this.toggleShow.bind(this),null,{btncode:"UnPremit",pagecode:l.card_page_id});break;case"Back":p!==l.busType.BusType_BillFBM&&p!==l.busType.BusType_BillPayAwoke?this.setState({showModal:!0}):(0,o.promptBox)({color:"warning",title:this.state.json["36300TG-000016"],content:this.state.json["36300TG-000017"],beSureBtnClick:this.backConfirm.bind()});break;case"File":var L=e.form.getFormItemsValue(this.formId,"pk_gathering").value;this.billID=L,this.vbillno=w,this.setState({showUploader:!this.state.showUploader,target:null});break;case"OffiPrint":D.call(this,e,!0);break;case"InOffiPrint":D.call(this,e,!1);break;case"Cancel":e.getUrlParam("isCopy")&&(this.billID=t),(0,o.promptBox)({color:"warning",title:this.state.json["36300TG-000018"],content:this.state.json["36300TG-000019"],beSureBtnClick:this.cancelConfirm.bind(this,e)});break;case"LinkQueryNtb":S.call(this,e);break;case"LinkQueryWorkFlow":this.billID=d,this.setState({showApproveDetail:!0,billtype:I});break;case"LinkQueryBeforBill":if(p==l.busType.BusType_BillPayAwoke||p==l.busType.BusType_BillFBM||p==l.busType.BusType_BillDeliver)return void(0,o.toast)({color:"warning",content:this.state.json["36300TG-000020"]});if(p==l.busType.BusType_BillHand)return void(0,o.toast)({color:"warning",content:this.state.json["36300TG-000021"]});var F={status:"browse",LinkBillType:I,id:h};(0,i.linkApp)(e,b,F);break;case"LinkQueryAferBill":(0,o.ajax)({url:l.base_url+"linkqueryaferbill.do",data:{pk:d},success:function(t){var a=t.data;if(a){var r=a[0],o=r.url,n=(r.pks,r.appCode),l=r.linkPageCode;j&&0!=Object.keys(j).length||(j={}),j.scene=f.SCENE.LINK,j.status="browse",j.appcode=n,j.pagecode=l,j[f.URL_PARAM.PK_SRC]=d,j[f.LINK_PARAM.ARAP.FLAG]=f.LINK_PARAM.ARAP.FLAG_VALUE,e.openTo(o,j)}}});break;case"LinkQueryPZ":(0,i.linkVoucherApp)(e,d,B,O,"36J7",w);break;case"LinkQueryAccountR":case"LinkQueryCashAccount":var R=e.cardTable.getCheckedRows(l.card_table2_id);if(null==R||0==R.length)return void(0,o.toast)({color:"warning",content:this.state.json["36300TG-000022"]});if(R.length>1)return void(0,o.toast)({color:"warning",content:this.state.json["36300TG-000023"]});var M=R[0].data.values.pk_bankaccount_r.value,E=R[0].data.values.pk_cashaccount_r.value;if(!M&&"LinkQueryAccountR"==t)return void(0,o.toast)({color:"warning",content:this.state.json["36300TG-000024"]});if(!E&&"LinkQueryCashAccount"==t)return void(0,o.toast)({color:"warning",content:this.state.json["36300TG-000024"]});var V=[],N={pk_org:O,pk_account:M,pk_cashaccount:E};V.push(N),this.setState({showOriginalData:V,showOriginal:!0});break;case"LinkQueryAccid":var G=e.cardTable.getCheckedRows(l.card_table1_id);if(null==G||0==G.length)return void(0,o.toast)({color:"warning",content:this.state.json["36300TG-000025"]});if(G.length>1)return void(0,o.toast)({color:"warning",content:this.state.json["36300TG-000026"]});var U=G[0].data.values.pk_inneraccount_r.value;if(null==U)return void(0,o.toast)({color:"warning",content:this.state.json["36300TG-000027"]});this.setState({accModalShow:!0,currentpk:U});break;case"LinkReturnBill":if(this.props.form.getFormItemsValue(this.formId,"billstatus").value!=l.billstatus_gather.payok)return void(0,o.toast)({color:"warning",content:this.state.json["36300TG-000103"]});(0,o.ajax)({url:l.base_url+"gatheringrcptinitcount.do",data:{pk:d},success:function(t){var a,r=(m(a={status:"browse"},f.URL_PARAM.PK_SRC,d),m(a,"scene",f.SCENE.LINK),m(a,"appcode","36300TGRF"),m(a,"pagecode","36300TGRF_L01"),a);"1"==parseInt(t.data)&&(r.pagecode="36300TGRF_C01"),e.openTo(null,r)}});break;case"AddLine":case"AddLine2":_.call(this,e,a);break;case"DeleteLine":v.call(this,e,a);break;case"DeleteLine2":y.call(this,e,a);break;case"CopyLine":case"CopyLine2":var q=e.cardTable.getCheckedRows(a);if(null==q||0==q.length)return(0,o.toast)({color:"warning",content:this.state.json["36300TG-000028"]}),!1;a==l.card_table1_id?this.setState({copyflag1:!0},(function(){s.toggleShow()})):a==l.card_table2_id&&this.setState({copyflag2:!0},(function(){s.toggleShow()}));break;case"CopyLineLast":C.call(this,e,a),a==l.card_table1_id&&this.setState({copyflag1:!1},(function(){s.toggleShow()}));break;case"CopyLineLast2":T.call(this,e,a),a==l.card_table2_id&&this.setState({copyflag2:!1},(function(){s.toggleShow()}));break;case"CancelLine":case"CancelLine2":a==l.card_table1_id?this.setState({copyflag1:!1},(function(){s.toggleShow()})):a==l.card_table2_id&&this.setState({copyflag2:!1},(function(){s.toggleShow()}))}};var r,o=a(0),n=a(5),l=a(11),i=a(12),s=a(93),u=(r=s)&&r.__esModule?r:{default:r},d=a(33),c=a(10),p=a(70),f=a(2),b=a(1);function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var g={};g[l.card_table1_id]="pk_gatheringfinance",g[l.card_table2_id]="pk_gatheringfund";var _=t.addLineProcess=function(e,t,a){var r=this.props.form.getFormItemsValue(this.formId,"isautorelation").value,o=this.props.form.getFormItemsValue(this.formId,"pk_org").value,n=this.props.form.getFormItemsValue(this.formId,"pk_group").value;if(a=a||this.props.cardTable.getNumberOfRows(t),t==l.card_table1_id){var i=w(e),s={origetmode:{value:"direct",display:this.state.json["36300TG-000098"]},rowno:{value:i.toString(),display:i.toString()},relationindex:{value:i.toString(),display:i.toString()},pk_org:{value:o,display:o},pk_group:{value:n,display:n}};if(r){h(e,l.card_table1_id,a,s);var u={getmode:{value:"direct",display:this.state.json["36300TG-000098"]},relationindex:{value:i.toString(),display:i.toString()},pk_org:{value:o,display:o},pk_group:{value:n,display:n}};h(e,l.card_table2_id,a,u)}else h(e,l.card_table1_id,a,s)}else if(t==l.card_table2_id){var d={getmode:{value:"direct",display:this.state.json["36300TG-000098"]},pk_org:{value:o,display:o},pk_group:{value:n,display:n}};h(e,l.card_table2_id,a,d)}},h=t.AddGatherLine=function(e,t,a,r){e.cardTable.addRow(t,a,r,!1)},v=t.BatchDelGatherLine=function(e,t){var a=e.cardTable.getCheckedRows(t);if(null==a||0==a.length)return(0,o.toast)({color:"warning",content:this.state.json["36300TG-000029"]}),!1;var r=[],n=[],i=!0,s=!1,u=void 0;try{for(var c,f=a[Symbol.iterator]();!(i=(c=f.next()).done);i=!0){var b=c.value;r.push(b.index),n.push(b.data.values.rowno.value)}}catch(e){s=!0,u=e}finally{try{!i&&f.return&&f.return()}finally{if(s)throw u}}e.cardTable.delRowsByIndex(t,r);var m=k(e,n);m&&m.length>0&&e.cardTable.delRowsByIndex(l.card_table2_id,m);var g=this.props.form.getFormItemsValue(l.card_from_id,"totalamount");return p.afterEvent.call(this,this.props,l.card_from_id,"bodyevent",g,null,null,null,null,!0),(0,d.setCardShouderBtnUseful)(e,t),!0},y=t.BatchDelGatherFundLine=function(e,t){(0,n.BatchDelLine)(e,t);var a=this.props.form.getFormItemsValue(l.card_from_id,"totalamount");p.afterEvent.call(this,this.props,l.card_from_id,"bodyevent",a,null,null,null,null,!0)},k=t.queryRelationIndexs=function(e,t){var a=[];if(t&&t.length>0)for(var r=e.cardTable.getAllRows(l.card_table2_id,!1),o=0;o<r.length;o++){var n=r[o];t.indexOf(n.values.relationindex.value)>-1&&a.push(o)}return a},w=t.getNextRelationNum=function(e){return I(e)+1},I=t.findMaxRelationNum=function(e){for(var t=e.cardTable.getAllRows(l.card_table1_id,!1),a=e.cardTable.getAllRows(l.card_table2_id,!1),r=0,o=0;o<t.length;o++){var n=t[o];n.values.relationindex.value&&r<n.values.relationindex.value&&(r=parseInt(n.values.relationindex.value))}for(var i=0;i<a.length;i++){var s=a[i];s.values.relationindex.value&&r<s.values.relationindex.value&&(r=parseInt(s.values.relationindex.value))}return r},C=t.BatchCopyGatherLine=function(e,t,a){var r=e.cardTable.getCheckedRows(t);if(null==r||0==r.length)return(0,o.toast)({color:"warning",content:this.state.json["36300TG-000028"]}),!1;var n=[],i=[],s=JSON.parse(JSON.stringify(r)),u=I(e),d=this.props.form.getFormItemsValue(this.formId,"isautorelation").value,c=!0,f=!1,b=void 0;try{for(var m,g=s[Symbol.iterator]();!(c=(m=g.next()).done);c=!0){var _=m.value;u+=1,_.data.selected=!1;var h=[];if(h.push(_.data.values.relationindex.value),_.data.values.relationindex={value:u.toString(),display:u.toString()},_.data.values.rowno={value:u.toString(),display:u.toString()},_.data.values.pseudocolumn={value:null,display:null},t==l.card_table1_id?_.data.values.pk_gatheringfinance={value:null,display:null}:_.data.values.pk_gatheringfund={value:null,display:null},n.push(_.data),d){var v=k(e,h);if(v&&v.length>0){var y=e.cardTable.getRowsByIndexs(l.card_table2_id,v),w=JSON.parse(JSON.stringify(y))[0];w.values.relationindex={value:u.toString(),display:u.toString()},w.values.pk_gatheringfund={value:null,display:null},w.values.pseudocolumn={value:null,display:null},i.push(w)}}}}catch(e){f=!0,b=e}finally{try{!c&&g.return&&g.return()}finally{if(f)throw b}}var C=a||e.cardTable.getNumberOfRows(t,!1);e.cardTable.insertRowsAfterIndex(t,n,C),e.cardTable.insertRowsAfterIndex(l.card_table2_id,i,C);var T=this.props.form.getFormItemsValue(l.card_from_id,"totalamount");return p.afterEvent.call(this,this.props,l.card_from_id,"bodyevent",T,null,null,null,null,!0),!0},T=(t.getCopyIndexByFinanceIndex=function(e,t){if(null==t||null==t||""==t)return e.cardTable.getNumberOfRows(l.card_table2_id,!1);var a=e.cardTable.getRowsByIndexs(l.card_table1_id,t);if(0==a.length)return e.cardTable.getNumberOfRows(l.card_table2_id,!1);var r=a[0].values.relationindex.value;return k([r])[0]},t.BatchCopyFund=function(e,t,a){var r=e.cardTable.getCheckedRows(t);if(null==r||0==r.length)return(0,o.toast)({color:"warning",content:this.state.json["36300TG-000028"]}),!1;var n=[],l=JSON.parse(JSON.stringify(r)),i=!0,s=!1,u=void 0;try{for(var d,c=l[Symbol.iterator]();!(i=(d=c.next()).done);i=!0){var p=d.value;p.data.selected=!1,p.data.values.relationindex={value:null,display:null},p.data.values.pk_gatheringfund={value:null,display:null},p.data.values.pseudocolumn={value:null,display:null},n.push(p.data)}}catch(e){s=!0,u=e}finally{try{!i&&c.return&&c.return()}finally{if(s)throw u}}return null==a&&(a=e.cardTable.getNumberOfRows(t,!1)),e.cardTable.insertRowsAfterIndex(t,n,a),!0}),S=function(e){var t=this,a=e.form.getFormItemsValue(l.card_from_id,"pk_gathering").value;(0,o.ajax)({url:l.base_url+"linkqueryntb.do",data:{pk:a},success:function(e){var a=e.data;t.setState({showNtbDetail:!0,ntbdata:a})}})},B=(t.modelAddLineProcess=function(e,t,a){var r=this.props.form.getFormItemsValue(this.formId,"isautorelation").value,o=parseInt(this.state.maxIndex)+parseInt(1);a+=1,this.setState({maxIndex:o});var n=B.call(this,e,t,o,!1);if(this.props.cardTable.setValByKeysAndIndex(t,a,n),t==l.card_table1_id&&r){var i=a||e.cardTable.getNumberOfRows(l.card_table2_id);n=B.call(this,e,l.card_table2_id,o,!0),h(e,l.card_table2_id,i,n)}},t.modelDelLineProcess=function(e,t,a,r){if(t==l.card_table1_id){var o=[];o.push(r.values.rowno.value);var n=k(e,o);n&&n.length>0&&e.cardTable.delRowsByIndex(l.card_table2_id,n)}return!0},t.modelDelLineAfterProcess=function(e,t){var a=this.props.form.getFormItemsValue(l.card_from_id,"totalamount");return p.afterEvent.call(this,this.props,l.card_from_id,"bodyevent",a,null,null,null,null,!0),!0},t.getTableDefData=function(e,t,a,r){var o=this.props.form.getFormItemsValue(this.formId,"pk_org").value,n=this.props.form.getFormItemsValue(this.formId,"pk_group").value,i=parseInt(a).toString(),s={};return t==l.card_table1_id?s={origetmode:{value:"direct",display:this.state.json["36300TG-000098"]},rowno:{value:i,display:i},relationindex:{value:i,display:i},pk_org:{value:o,display:o},pk_group:{value:n,display:n}}:t==l.card_table2_id&&r?s={getmode:{value:"direct",display:this.state.json["36300TG-000098"]},rowno:{value:i,display:i},relationindex:{value:i,display:i},pk_org:{value:o,display:o},pk_group:{value:n,display:n}}:t!=l.card_table2_id||r||(s={getmode:{value:"direct",display:this.state.json["36300TG-000098"]},pk_org:{value:o,display:o},pk_group:{value:n,display:n}}),s}),P=function(e,t){if(t){Array.isArray(t)&&(t=t[0]);var a=t.workflow;a&&"approveflow"==a||"workflow"==a?this.setState({assignData:t,assignShow:t}):this.toggleShow()}},A=function(e){var t=this;this.saveBill.call(this,(function(){(0,n.cardOperator)(e,l.card_page_id,l.card_from_id,g,l.pkname,l.base_url+"gatheringcommit.do",t.state.json["36300TG-000005"],l.dataSource,P.bind(t),!0,{btncode:"SaveCommit",pagecode:l.card_page_id})}))},D=function(e,t){var a=this;(0,b.elecSignCardPrint)(e,{url:l.base_url+"gatheringelecsignprint.do",offical:t,appCode:l.funcode,nodeKey:t?l.printnodekey.official:l.printnodekey.inofficial,headCode:l.card_from_id,field_id:l.pkname,field_billno:"vbillno",getOrgFunc:function(){var t=e.form.getFormItemsValue(l.card_from_id,"pk_delgoorg")&&e.form.getFormItemsValue(l.card_from_id,"pk_delgoorg").value;return t||e.form.getFormItemsValue(l.card_from_id,"pk_org").value},validateFunc:function(){var t=e.form.getFormItemsValue(l.card_from_id,"billstatus").value;return l.billstatus_gather.payok!=t?a.state.json["36300TG-000102"]:null}})}},,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buttonVisible=void 0;a(0);var r=a(11),o=r.card_from_id,n=(r.card_page_id,r.card_table1_id),l=r.card_table2_id,i=r.card_hidden_buttons;t.buttonVisible=function(e){console.log("buttons",e.button.getButtons());var t=e.getUrlParam("status"),a="browse"!==t,s="browse"!==t,u=this.state.copyflag1||!1,d=this.state.copyflag2||!1,c=e.getUrlParam("scene"),p=!0;"deal"===t&&(p=!1);var f=!1;c&&"linksce"==c&&(f=!0);var b=!1,m=this.props.form.getFormItemsValue(r.card_from_id,"vsourcebustype")&&this.props.form.getFormItemsValue(r.card_from_id,"vsourcebustype").value;r.busType.BusType_BillFBM==m&&(b=!0),a?(e.button.setButtonVisible(["AddLine","DeleteLine","CopyLine"],a&&!u&&p),e.button.setButtonVisible(["CancelLine","CopyLineLast"],a&&u&&p),e.button.setButtonVisible(["CopyThisLine","InsertLine","DeleteLine_i"],a&&!u&&p),e.button.setButtonVisible(["AddLine2","DeleteLine2","CopyLine2"],a&&!d),e.button.setButtonVisible(["CancelLine2","CopyLineLast2"],a&&d),b&&(e.button.setButtonDisabled(["AddLine2","DelLine2","CopyLine2"],!0),e.button.setButtonDisabled(["AddLine","DelLine","CopyLine"],!0))):e.button.setButtonVisible(["AddLine","DeleteLine","CopyLine","CancelLine","CopyLineLast","CopyThisLine","InsertLine","DeleteLine_i","AddLine2","DeleteLine2","CopyLine2","CancelLine2","CopyLineLast2"],!1);var g=e.form.getFormItemsValue(o,"billstatus");g=g&&g.value;var _=e.form.getFormItemsValue(o,"vbillstatus");_=_&&_.value;var h=e.form.getFormItemsValue(o,"voucherflag");h=h&&h.value;var v=e.form.getFormItemsValue(o,"vsourcebustype");v=v&&v.value,f?(e.button.setButtonVisible(i,!1),"4"!==g||h?"4"===g&&h?e.button.setButtonVisible(["LinkQueryAferBill","LinkQueryPZ","LinkReturnBill"],!0):("5"===g||"6"===g)&&e.button.setButtonVisible(["LinkQueryAferBill"],!0):e.button.setButtonVisible(["LinkQueryAferBill","LinkReturnBill"],!0)):s?(e.button.setButtonVisible(i,!1),e.button.setButtonVisible(["LinkQueryMenu","Refresh","File","Print"],!1),e.button.setButtonVisible(["Save","SaveAdd","SaveCommit","Cancel"],!0),"deal"==t&&(e.button.setButtonVisible(["SaveAdd","SaveCommit"],!1),"1"===g&&v==r.busType.BusType_BillFBM&&(e.button.setButtonVisible(r.card_shouder_buttons,!1),e.button.setButtonVisible(["CopyThisLine","InsertLine","DeleteLine_i","CopyAtLine","CopyThisLine2","InsertLine2","DeleteLine_i2","CopyAtLine2"],!1))),e.button.setMainButton(["Save"],!0)):(e.button.setButtonVisible(i,!1),"0"===g?(e.button.setButtonVisible(["Add","Edit","Delete","Copy","Commit"],!0),e.button.setButtonVisible(["LinkQueryMenu","Refresh","File","Print"],!0),e.button.setMainButton(["Commit"],!0),e.button.setMainButton(["Add"],!1)):"1"===g&&"billhand"==v?(e.button.setButtonVisible(["Add","Copy","Decide","UnCommit"],!0),e.button.setButtonVisible(["LinkQueryMenu","Refresh","File","Print"],!0),e.button.setMainButton(["Decide"],!0),e.button.setMainButton(["Add"],!1)):"1"===g&&"billhand"!=v?(e.button.setButtonVisible(["Add","Copy","Decide","Back","UnCommit"],!0),e.button.setButtonVisible(["LinkQueryMenu","Refresh","File","Print"],!0),e.button.setMainButton(["Decide"],!0),e.button.setMainButton(["Add"],!1)):"2"===g?(e.button.setButtonVisible(["Add","Copy","UnDecide"],!0),e.button.setButtonVisible(["LinkQueryMenu","Refresh","File","Print"],!0),e.button.setMainButton(["Add"],!1)):"3"===g?(e.button.setButtonVisible(["Add","Copy","Gather"],!0),e.button.setButtonVisible(["LinkQueryMenu","Refresh","File","Print"],!0),e.button.setMainButton(["Gather"],!0),e.button.setMainButton(["Add"],!1)):"4"!==g||h?"4"===g&&h?(e.button.setButtonVisible(["Add","Copy","UnPremit","LinkQueryAferBill","LinkReturnBill","LinkQueryPZ","File","OffiPrint","InOffiPrint","Print","Refresh"],!0),e.button.setMainButton(["Add"],!1)):"5"===g?(e.button.setButtonVisible(["Add","Copy","Deliver","LinkQueryAferBill","File","Print","Refresh"],!0),e.button.setMainButton(["Deliver"],!0),e.button.setMainButton(["Add"],!1)):"6"===g?(e.button.setButtonVisible(["Add","Copy","UnDeliver","LinkQueryAferBill","File","Print","Refresh"],!0),e.button.setMainButton(["Add"],!1)):(e.button.setButtonVisible(["LinkQueryMenu","Refresh","File","Print","Refresh"],!1),e.button.setButtonVisible(["Add"],!0),e.button.setMainButton(["Add"],!0)):(e.button.setButtonVisible(["Add","Copy","UnGather","Premit","LinkQueryAferBill","LinkReturnBill","File","OffiPrint","InOffiPrint","Print","Refresh"],!0),e.button.setMainButton(["Premit"],!0),e.button.setMainButton(["Add"],!1))),e.cardPagination.setCardPaginationVisible("cardPaginationBtn",!s),"deal"!=t&&"copy"!=t||(t="edit");var y=e.form.getFormItemsValue(r.card_from_id,"pk_org");"add"==t&&y&&y.value&&(t="edit",e.resMetaAfterPkorgEdit(),e.form.setFormItemsDisabled(r.card_from_id,{pk_org:!0})),e.form.setFormStatus(o,t),e.cardTable.setStatus(n,t),e.cardTable.setStatus(l,t)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.customerInputCleatValue=t.customerResetDisplay=t.customerResetDisplayFormSave=t.customerResetDisplayFormQuery=t.fbmbillnoAfterEdit=t.handleTraOrgChangeSure=t.handleOrgChangeSure=void 0,t.default=function(e,t,a,n,l,i,s,g){console.log(e,t,a,n,l,i,s,g);e.getUrlParam("status");var v=void 0,y=void 0,k=void 0,w=void 0;e.form.getFormItemsValue(o.card_from_id,"pk_org").value;switch(a){case"pk_org":if(v=e.createHeadAfterEventData(o.card_page_id,o.card_from_id,[o.card_table1_id,o.card_table2_id],o.card_from_id,a,n),y=v.newvalue,w=v.oldvalue,c=JSON.stringify(w),w.value&&y.value&&y.value!=w.value||w.value&&!y||w.value&&!y.value)(0,r.promptBox)({color:"warning",content:this.state.json["36300TG-000000"],beSureBtnClick:p.bind(this,e,t,a,n,l,i,v),cancelBtnClick:f.bind(this,e,t,a,n,w,v)});else if(y&&y.value)p.call(this,e,t,a,n,l,i,v);else if(!y||!y.value){var I;e.form.EmptyAllFormValue(o.card_from_id),e.cardTable.setMulTablesData((u(I={},o.card_table1_id,{rows:[]}),u(I,o.card_table2_id,{rows:[]}),I)),e.initMetaByPkorg()}break;case"pk_transactorg":v=e.createHeadAfterEventData(o.card_page_id,o.card_from_id,[o.card_table1_id,o.card_table2_id],o.card_from_id,a,n),y=v.newvalue,w=v.oldvalue,c=JSON.stringify(w),w.value&&y.value&&y.value!=w.value||w.value&&!y||w.value&&!y.value?(0,r.promptBox)({color:"warning",content:this.state.json["36300TG-000001"],beSureBtnClick:b.bind(this,e,t,a,n,l,i,v),cancelBtnClick:m.bind(this,e,t,a,n,w,v)}):!w&&y&&y.value?b.bind(this,e,t,a,n,l,i,v):m.bind(this,e,t,a,n,w,v);break;case"pk_financeorg_r":n&&n.values&&n.refpk&&n.values.pk_group&&n.values.pk_group.value&&d(o.dataSource,n&&n.refpk,n&&n.values&&n.values.pk_group&&n.values.pk_group.value),h.call(this,e,t,a,n,l,i,v,o.card_table1_id,k);break;case"pk_fundgetorg":case"pk_currtype":case"bodyevent":_.call(this,e,t,a,n,l,i,v);break;case"olcrate":case"glcrate":case"gllcrate":h.call(this,e,t,a,n,l,i,v,t,k);break;case"pk_clearoutbankaccount":e.form.setFormItemsValue(o.card_from_id,{pk_clearoutaccount:{value:e.form.getFormItemsValue(o.card_from_id,"pk_clearoutbankaccount")&&e.form.getFormItemsValue(o.card_from_id,"pk_clearoutbankaccount").value,display:e.form.getFormItemsValue(o.card_from_id,"pk_clearoutbankaccount")&&e.form.getFormItemsValue(o.card_from_id,"pk_clearoutbankaccount").display}});break;case"pk_company_p":n&&n.values?(this.iscustomerinput=!1,k={rowno:i,custName:n&&n.refname}):(this.iscustomerinput=!0,k={rowno:i,custName:n&&n.refcode,isinput:!0}),h.call(this,e,t,a,n,l,i,v,o.card_table1_id,k);break;case"pk_bankaccount_p":n&&n.values?(this.isbankaccrinput=!1,this.isbankinput=!1,k={rowno:i,bankaccount:n&&n.refcode,bankaccountname:n&&n.refname,bankname:n&&n.values&&n.values.pk_bankdoc&&n.values.pk_bankdoc.value}):(this.isbankaccrinput=!0,this.isbankinput=!0,k={rowno:i,bankaccount:n&&n.refcode,isinput:!0}),h.call(this,e,t,a,n,l,i,v,o.card_table1_id,k);break;case"pk_bankname_p":n&&n.values?(this.isbankinput=!1,k={rowno:i,bankname:n&&n.refname}):(this.isbankinput=!0,k={rowno:i,bankname:n&&n.refname,isinput:!0}),h.call(this,e,t,a,n,l,i,v,o.card_table1_id,k);break;case"origetmode":k={rowno:i},h.call(this,e,t,a,n,l,i,v,o.card_table1_id,k);break;case"amount":h.call(this,e,t,a,n,l,i,v,t,k);break;case"pk_gathercurr":case"isexchangegather":case"exprice":_.call(this,e,t,a,n,l,i,v);break;case"getmode":case"isfees":h.call(this,e,t,a,n,l,i,v,o.card_table2_id,k);break;case"pk_bankaccount_r":case"pk_cashaccount_r":break;case"pk_notetype":case"billno":h.call(this,e,t,a,n,l,i,v,o.card_table2_id,k);break;case"notenumber":console.log(n),k={pk_billno:n&&n.refpk,billno:n&&n.refname,amount:n&&n.values&&n.values.money&&n.values.money.value},h.call(this,e,t,a,n,l,i,v,o.card_table2_id,k);break;case"feedirection":break;case"feeamount":h.call(this,e,t,a,n,l,i,v,o.card_table2_id,k);break;case"clearoutacctype":var C={},T=(e.form.getFormItemsValue(o.card_from_id,"clearoutacctype")||{}).value;T&&"inneraccount"!=T?(C.pk_clearoutbankaccount=!0,C.pk_clearoutaccount=!1):(C.pk_clearoutbankaccount=!1,C.pk_clearoutaccount=!0),e.form.setFormItemsVisible(o.card_from_id,C)}};var r=a(0),o=a(11),n=a(18),l=a(33),i=a(71),s=a(94);function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var d=r.cardCache.setDefData,c={};var p=t.handleOrgChangeSure=function(e,t,a,r,n,i,s){e.resMetaAfterPkorgEdit();var d,c,p=s.newvalue;p&&p.value?(v.call(this,e,t,a,r,n,i,s),e.cardTable.setMulTablesData((u(d={},o.card_table2_id,{rows:[]}),u(d,o.card_table1_id,{rows:[]}),u(d,o.card_from_id,{rows:[]}),d))):(e.form.EmptyAllFormValue(o.card_from_id),e.cardTable.setMulTablesData((u(c={},o.card_table2_id,{rows:[]}),u(c,o.card_table1_id,{rows:[]}),u(c,o.card_from_id,{rows:[]}),c)),e.initMetaByPkorg());(0,l.setCardShouderBtnUseful)(e)},f=function(e,t,a,r,n,l){var i=JSON.parse(c);e.resMetaAfterPkorgEdit(),e.form.setFormItemsValue(o.card_from_id,{pk_org:{value:i.value,display:i.display}})},b=t.handleTraOrgChangeSure=function(e,t,a,r,n,l,i){var s=i.newvalue;if(s&&s.value)g(e,t,a,r,n,l,i);else{var u=JSON.parse(c);e.form.setFormItemsValue(o.card_from_id,{pk_transactorg:{value:u.value,display:u.display}})}var d=e.form.getFormItemsValue(o.card_from_id,"pk_org").value;s.value!=d?e.cardTable.setColEditableByKey(o.card_table2_id,["pk_bankaccount_r","pk_getplanitem","pk_cashaccount_r"]):e.cardTable.setColEditableByKey(o.card_table2_id,["pk_bankaccount_r","pk_getplanitem","pk_cashaccount_r"],!1)},m=function(e,t,a,r,n,l){var i=JSON.parse(c);e.form.setFormItemsValue(o.card_from_id,{pk_transactorg:{value:i.value,display:i.display}})},g=function(e,t,a,l,i,s,d){var c;c={uiState:e.getUrlParam("status")},(0,r.ajax)({url:o.base_url+"cardafteredit.do",async:!1,data:{eventPosition:"head",eventType:"card",eventData:JSON.stringify(d),extParam:c},success:function(t){var a=t.success,l=t.data;if(a){var i=l.card,s=l.extParam,d=l.headItemProps,c=(l.bodyItemProps,i.head),p=i.bodys;e.form.setAllFormValue(u({},o.card_from_id,c[o.card_from_id])),p&&p[o.card_table1_id]&&e.cardTable.setMulTablesData(u({},o.card_table1_id,p[o.card_table1_id])),p&&p[o.card_table2_id]&&e.cardTable.setMulTablesData(u({},o.card_table2_id,p[o.card_table2_id])),(0,n.setHeadItemProp)(e,o.card_from_id,d);var f={},b=(e.form.getFormItemsValue(o.card_from_id,"clearoutacctype")||{}).value;b&&"inneraccount"!=b?(f.pk_clearoutbankaccount=!0,f.pk_clearoutaccount=!1):(f.pk_clearoutbankaccount=!1,f.pk_clearoutaccount=!0),e.form.setFormItemsVisible(o.card_from_id,f),s.hasOwnProperty("warning")&&(0,r.toast)({color:"warning",content:s.warning})}}})},_=function(e,t,a,l,i,s,d){var c,p,f,b=this;p={uiState:e.getUrlParam("status")},c=(d=e.createHeadAfterEventData(o.card_page_id,o.card_from_id,[o.card_table1_id,o.card_table2_id],o.card_from_id,a,l)).newvalue,(f=d.oldvalue)&&f.value&&c.value==f.value&&"bodyevent"!=a||(0,r.ajax)({url:o.base_url+"cardafteredit.do",async:!1,data:{eventPosition:"head",eventType:"card",eventData:JSON.stringify(d),extParam:p},success:function(a){var l=a.success,i=a.data;if(l){var s=i.card,d=i.extParam,c=i.headItemProps,p=(i.bodyItemProps,s.head),f=s.bodys;e.form.setAllFormValue(u({},o.card_from_id,p[o.card_from_id])),f&&f[o.card_table1_id]&&e.cardTable.setMulTablesData(u({},o.card_table1_id,f[o.card_table1_id])),f&&f[o.card_table2_id]&&e.cardTable.setMulTablesData(u({},o.card_table2_id,f[o.card_table2_id])),(0,n.setHeadItemProp)(e,o.card_from_id,c),k.call(b,e,t),d.hasOwnProperty("warning")&&(0,r.toast)({color:"warning",content:d.warning})}}})},h=function(e,t,a,l,i,s,d,c,p){var f,b,m=this;f=(d=e.createBodyAfterEventData(o.card_page_id,o.card_from_id,[o.card_table1_id,o.card_table2_id],c,a,i)).changedrows[0].newvalue.value,b=d.changedrows[0].oldvalue.value,(f||b)&&f!=b&&(0,r.ajax)({url:o.base_url+"cardafteredit.do",async:!1,data:{eventPosition:"body",eventType:"card",eventData:JSON.stringify(d),extParam:p},success:function(a){var l=a.success,i=a.data;if(l){var d=i.card,c=i.extParam,p=i.headItemProps,f=i.bodyItemProps,b=d.head,g=d.bodys;if(e.form.setAllFormValue(u({},o.card_from_id,b[o.card_from_id])),g&&g[o.card_table1_id]&&e.cardTable.updateDataByRowId(o.card_table1_id,g[o.card_table1_id]),(0,n.setHeadItemProp)(e,o.card_from_id,p),(0,n.setBodyItemProp)(e,f),c.hasOwnProperty("warning")&&(0,r.toast)({color:"warning",content:c.warning}),c.hasOwnProperty("needRef")){var _=e.meta.getMeta();console.log(_)}y(e,s,g[o.card_table2_id],!0),k.call(m,e,t)}}})},v=function(e,t,a,l,d,c,p){var f=this,b={uiState:e.getUrlParam("status")};(0,r.ajax)({url:o.base_url+"cardafteredit.do",data:{eventPosition:"head",eventType:"card",eventData:JSON.stringify(p),extParam:b},success:function(t){var a=t.success,r=t.data;if(a){var l=r.card,d=r.extParam,c=r.headItemProps,p=(r.bodyItemProps,l.head);l.bodys;if(e.form.setAllFormValue(u({},o.card_from_id,p[o.card_from_id])),(0,n.setHeadItemProp)(e,o.card_from_id,c),i.addLineProcess.call(f,e,o.card_table1_id),d.hasOwnProperty("iscustallowinput")){var b="Y"==d.iscustallowinput;f.isallowflag=b,(0,s.customerAllowInputProcess)(e,o.card_table1_id,b),e.cardTable.setColEditableByKey(o.card_table1_id,"bankaccountname_r",!b)}}}})},y=t.fbmbillnoAfterEdit=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=a&&a.rows;if(n&&n.length>0){for(var l=0;l<n.length;l++){var i=n[l],s=(i.values.getmode||{}).value;if("note"==s){i.values.pk_billno.value;var u=i.values.billno.value;i.values.notenumber={value:u,display:u}}}if(r)return e.cardTable.updateDataByRowId(o.card_table2_id,a)}r||e.cardTable.setTableData(o.card_table2_id,a)},k=(t.customerResetDisplayFormQuery=function(e,t){var a=t.rows,r=a[0].values.pk_bankaccount_p.value,n=a[0].values.pk_bankname_p.value,l=a[0].values.pk_company_p.value;if(r&&n&&l)e.cardTable.setMulTablesData(u({},o.card_table1_id,t));else{l||(this.iscustomerinput=!0),r||(this.isbankaccrinput=!0),n||(this.isbankinput=!0);for(var i=0;i<a.length;i++){var s=a[i];if(!l){var d=s.values.company_p.value;s.values.pk_company_p={value:d,display:d}}if(!r){var c=s.values.bankaccount_p.value;s.values.pk_bankaccount_p={value:c,display:c}}if(!n){var p=s.values.bankname_p.value;s.values.pk_bankname_p={value:p,display:p}}}e.cardTable.setMulTablesData(u({},o.card_table1_id,t))}},t.customerResetDisplayFormSave=function(e,t){if(!this.isbankaccrinput&&!this.iscustomerinput&&!this.isbankinput)return t;for(var a=t[o.card_table1_id]&&t[o.card_table1_id].rows,r=0;r<a.length;r++){var n=a[r];if(this.isbankaccrinput){var l=n.values.company_p.value;n.values.pk_company_p={value:l,display:l}}if(this.iscustomerinput){var i=n.values.bankaccount_p.value;n.values.pk_bankaccount_p={value:i,display:i}}if(this.isbankinput){var s=n.values.bankname_p.value;n.values.pk_bankname_p={value:s,display:s}}}return k.call(this,e),t},t.customerResetDisplay=function(e,t){if(this.isbankaccrinput){var a=e.cardTable.getValByKeyAndIndex(o.card_table1_id,0,"bankaccount_p");e.cardTable.setColValue(o.card_table1_id,"pk_bankaccount_p",{value:a&&a.value,display:a&&a.value})}if(this.isbankinput){var r=e.cardTable.getValByKeyAndIndex(o.card_table1_id,0,"bankname_p");e.cardTable.setColValue(o.card_table1_id,"pk_bankname_p",{value:r&&r.value,display:r&&r.value})}if(this.iscustomerinput){var n=e.cardTable.getValByKeyAndIndex(o.card_table1_id,0,"company_p");e.cardTable.setColValue(o.card_table1_id,"pk_company_p",{value:n&&n.value,display:n&&n.value})}});t.customerInputCleatValue=function(e,t){for(var a=t.bodys[o.card_table1_id].rows,r=0;r<a.length;r++){var n=a[r];this.isbankaccrinput&&(n.values.pk_bankaccount_p={value:null,display:null}),this.isbankinput&&(n.values.pk_bankname_p={value:null,display:null}),this.iscustomerinput&&(n.values.pk_company_p={value:null,display:null})}return t}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BatchCopyFund=t.getCopyIndexByFinanceIndex=t.BatchCopyGatherLine=t.queryRelationRowsByRowno=t.BatchDelGatherLine=t.AddGatherLine=t.addLineProcess=void 0,t.default=function(e,t,a){var r,s=this,d=(e.getUrlParam("status"),this.props.form.getFormItemsValue(l.card_from_id,"pk_gathering").value),f=this.props.form.getFormItemsValue(l.card_from_id,"vsourcebustype").value,g=(this.props.form.getFormItemsValue(l.card_from_id,"pk_vsourcebilltype")||{}).value,h=(this.props.form.getFormItemsValue(l.card_from_id,"pk_srcbill")||{}).value,y=e.createExtCardData(l.card_linkpage_id,l.card_from_id,[l.card_table1_id,l.card_table2_id]),C=e.form.getFormItemsValue(this.formId,"vbillno").value,T=e.form.getFormItemsValue(this.formId,"pk_group").value,S=e.form.getFormItemsValue(this.formId,"pk_billtype").value,B={};B[l.card_table1_id]="cardTable",B[l.card_table2_id]="cardTable";var P={};P[l.card_table1_id]="pk_gatheringfinance",P[l.card_table2_id]="pk_gatheringfund";var A={};switch(t){case"Refresh":this.queryData("gatheringcardquery.do",!0);break;case"Print":this.printFunction.call(this,e);break;case"Output":(0,o.output)({url:l.base_url+"gatheringprint.do",data:{oids:[d],funcode:l.funcode,nodekey:l.print_nodekey,outputType:"output"}});break;case"Add":e.pushTo("/card",{status:"add",from:"card",id:e.getUrlParam("id")}),u.default.call(this,e),c.orgVersionView.call(this,this.props,l.card_from_id),e.form.EmptyAllFormValue(l.card_from_id),e.cardTable.setMulTablesData((b(r={},this.tableId1,{rows:[]}),b(r,this.tableId2,{rows:[]}),r)),this.setState({vbillno:""}),this.toggleShow();break;case"Save":e.validateToSave(y,this.saveBill.bind(this,e),B,"");break;case"SaveCommit":e.validateToSave(y,this.saveAndCommitBill.bind(this,e),B,"");break;case"SaveAdd":e.validateToSave(y,this.saveAndAdd.bind(this,e),B,"");break;case"Edit":this.editBill();break;case"Copy":if("billdeliver"==f)return void(0,o.toast)({color:"warning",content:this.state.json["36300TG-000004"]});e.pushTo("/card",{status:"copy",id:e.getUrlParam("id"),isCopy:!0,from:"card"}),this.copyBill();break;case"Commit":(0,n.cardOperator)(e,l.card_linkpage_id,l.card_from_id,P,l.pkname,l.base_url+"gatheringcommit.do",this.state.json["36300TG-000061"],l.dataSource,this.toggleShow.bind(this));break;case"UnCommit":(0,n.cardOperator)(e,l.card_linkpage_id,l.card_from_id,P,l.pkname,l.base_url+"gatheringuncommit.do",this.state.json["36300TG-000062"],l.dataSource,this.toggleShow.bind(this));break;case"Decide":this.decideBill();break;case"UnDecide":(0,n.cardOperator)(e,l.card_linkpage_id,l.card_from_id,P,l.pkname,l.base_url+"gatheringundecide.do",this.state.json["36300TG-000063"],l.dataSource,this.toggleShow.bind(this));break;case"Delete":(0,o.promptBox)({color:"warning",title:this.state.json["36300TG-000008"],content:this.state.json["36300TG-000009"],beSureBtnClick:this.delConfirm.bind()});break;case"Deliver":(0,n.cardOperator)(e,l.card_linkpage_id,l.card_from_id,P,l.pkname,l.base_url+"gatheringdeliver.do",this.state.json["36300TG-000064"],l.dataSource,this.toggleShow.bind(this));break;case"UnDeliver":(0,n.cardOperator)(e,l.card_linkpage_id,l.card_from_id,P,l.pkname,l.base_url+"gatheringundeliver.do",this.state.json["36300TG-000065"],l.dataSource,this.toggleShow.bind(this));break;case"Gather":(0,n.cardOperator)(e,l.card_linkpage_id,l.card_from_id,P,l.pkname,l.base_url+"gatheringrecvmoney.do",this.state.json["36300TG-000066"],l.dataSource,this.toggleShow.bind(this));break;case"UnGather":(0,n.cardOperator)(e,l.card_linkpage_id,l.card_from_id,P,l.pkname,l.base_url+"gatheringunrecvmoney.do",this.state.json["36300TG-000067"],l.dataSource,this.toggleShow.bind(this));break;case"Premit":(0,n.cardOperator)(e,l.card_linkpage_id,l.card_from_id,P,l.pkname,l.base_url+"gatheringvoucher.do",this.state.json["36300TG-000068"],l.dataSource,this.toggleShow.bind(this));break;case"UnPremit":(0,n.cardOperator)(e,l.card_linkpage_id,l.card_from_id,P,l.pkname,l.base_url+"gatheringunvoucher.do",this.state.json["36300TG-000069"],l.dataSource,this.toggleShow.bind(this));break;case"Back":f!==l.busType.BusType_BillFBM&&f!==l.busType.BusType_BillPayAwoke?this.setState({showModal:!0}):(0,o.promptBox)({color:"warning",title:this.state.json["36300TG-000016"],content:this.state.json["36300TG-000017"],beSureBtnClick:this.backConfirm.bind()});break;case"File":this.setState({billID:d,vbillno:C,showUploader:!this.state.showUploader,target:null});break;case"OffiPrint":I.call(this,e,!0);break;case"InOffiPrint":I.call(this,e,!1);break;case"Cancel":e.getUrlParam("isCopy")&&this.setState({billID:t}),(0,o.promptBox)({color:"warning",title:this.state.json["36300TG-000018"],content:this.state.json["36300TG-000019"],beSureBtnClick:this.cancelConfirm.bind(this,e)});break;case"LinkQueryNtb":w.call(this,e);break;case"LinkQueryWorkFlow":this.setState({showApproveDetail:!0,billID:d,billtype:S});break;case"LinkQueryBeforBill":if(f==l.busType.BusType_BillPayAwoke||f==l.busType.BusType_BillFBM||f==l.busType.BusType_BillDeliver)return void(0,o.toast)({color:"warning",content:this.state.json["36300TG-000020"]});if(f==l.busType.BusType_BillHand)return void(0,o.toast)({color:"warning",content:this.state.json["36300TG-000021"]});var D={status:"browse",LinkBillType:S,id:h};(0,i.linkApp)(e,g,D);break;case"LinkQueryAferBill":(0,o.ajax)({url:l.base_url+"linkqueryaferbill.do",data:{pk:d},success:function(t){var a=t.data;if(a){var r=a[0],o=r.url,n=(r.pks,r.appCode),l=r.linkPageCode;A&&0!=Object.keys(A).length||(A={}),A.scene=p.SCENE.LINK,A.status="browse",A.appcode=n,A.pagecode=l,A[p.LINK_PARAM.ARAP.FLAG]=p.LINK_PARAM.ARAP.FLAG_VALUE,A[p.URL_PARAM.PK_SRC]=d,e.openTo(o,A)}}});break;case"LinkQueryPZ":(0,i.linkVoucherApp)(e,d,T,L,"36J7",C);break;case"LinkQueryAccountR":case"LinkQueryCashAccount":var O=e.cardTable.getCheckedRows(l.card_table2_id);if(null==O||0==O.length)return void(0,o.toast)({color:"warning",content:this.state.json["36300TG-000022"]});if(O.length>1)return void(0,o.toast)({color:"warning",content:this.state.json["36300TG-000023"]});var x=O[0].data.values.pk_bankaccount_r.value,j=O[0].data.values.pk_cashaccount_r.value;if(!x&&"LinkQueryAccountR"==t)return void(0,o.toast)({color:"warning",content:this.state.json["36300TG-000024"]});if(!j&&"LinkQueryCashAccount"==t)return void(0,o.toast)({color:"warning",content:this.state.json["36300TG-000024"]});var L=this.props.form.getFormItemsValue(l.card_from_id,"pk_org").value,F=[],R={pk_org:L,pk_account:x,pk_cashaccount:j};F.push(R),this.setState({showOriginalData:F,showOriginal:!0});break;case"LinkQueryAccid":var M=e.cardTable.getCheckedRows(l.card_table1_id);if(null==M||0==M.length)return void(0,o.toast)({color:"warning",content:this.state.json["36300TG-000025"]});if(M.length>1)return void(0,o.toast)({color:"warning",content:this.state.json["36300TG-000026"]});var E=M[0].data.values.pk_inneraccount_r.value;if(null==E)return void(0,o.toast)({color:"warning",content:this.state.json["36300TG-000027"]});this.setState({accModalShow:!0,currentpk:E});break;case"LinkReturnBill":if(this.props.form.getFormItemsValue(this.formId,"billstatus").value!=l.billstatus_gather.payok)return void(0,o.toast)({color:"warning",content:this.state.json["36300TG-000103"]});(0,o.ajax)({url:l.base_url+"gatheringrcptinitcount.do",data:{pk:d},success:function(t){var a,r=(b(a={status:"browse"},p.URL_PARAM.PK_SRC,d),b(a,"scene",p.SCENE.LINK),b(a,"appcode","36300TGRF"),b(a,"pagecode","36300TGRF_L01"),a);"1"==parseInt(t.data)&&(r.pagecode="36300TGRF_C01"),e.openTo(null,r)}});break;case"AddLine":case"AddLine2":m.call(this,e,a);break;case"DeleteLine":_.call(this,e,a);break;case"DeleteLine2":(0,n.BatchDelLine)(e,a);break;case"CopyLine":case"CopyLine2":var V=e.cardTable.getCheckedRows(a);if(null==V||0==V.length)return(0,o.toast)({color:"warning",content:this.state.json["36300TG-000028"]}),!1;a==l.card_table1_id?this.setState({copyflag1:!0},(function(){s.toggleShow()})):a==l.card_table2_id&&this.setState({copyflag2:!0},(function(){s.toggleShow()}));break;case"CopyLineLast":v.call(this,e,a),a==l.card_table1_id&&this.setState({copyflag1:!1},(function(){s.toggleShow()}));break;case"CopyLineLast2":k(this,e,a),a==l.card_table2_id&&this.setState({copyflag2:!1},(function(){s.toggleShow()}));break;case"CancelLine":case"CancelLine2":a==l.card_table1_id?this.setState({copyflag1:!1},(function(){s.toggleShow()})):a==l.card_table2_id&&this.setState({copyflag2:!1},(function(){s.toggleShow()}))}};var r,o=a(0),n=a(5),l=a(11),i=a(12),s=a(95),u=(r=s)&&r.__esModule?r:{default:r},d=a(33),c=a(10),p=a(2),f=a(1);function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var m=t.addLineProcess=function(e,t,a){var r=this.props.form.getFormItemsValue(this.formId,"isautorelation").value,o=this.props.form.getFormItemsValue(this.formId,"pk_org").value,n=this.props.form.getFormItemsValue(this.formId,"pk_group").value,i=parseInt(this.state.maxIndex)+parseInt(1);this.setState({maxIndex:i}),console.log(i,"maxIndex");var s={origetmode:l.GetMode.Gather_Direct,rowno:{value:parseInt(i)+"",display:parseInt(i)+""},relationindex:{value:parseInt(i)+"",display:parseInt(i)+""},pk_org:{value:o,display:o},pk_group:{value:n,display:n}},u={getmode:l.GetMode.Gather_Direct,pk_org:{value:o,display:o},pk_group:{value:n,display:n}},d=a||e.cardTable.getNumberOfRows(l.card_table1_id);console.log(d,"index11111");var c=a||e.cardTable.getNumberOfRows(l.card_table2_id);if(t==l.card_table1_id)if(r){g(e,l.card_table1_id,d,s);var p={getmode:{value:e.cardTable.getValByKeyAndIndex(l.card_table1_id,d,"origetmode").value,display:e.cardTable.getValByKeyAndIndex(l.card_table1_id,d,"origetmode").display},relationindex:{value:parseInt(i)+"",display:parseInt(i)+""},pk_org:{value:o,display:o},pk_group:{value:n,display:n}};g(e,l.card_table2_id,c,p)}else g(e,l.card_table1_id,d,s);else t==l.card_table2_id&&g(e,l.card_table2_id,c,u)},g=t.AddGatherLine=function(e,t,a,r){e.cardTable.addRow(t,a,r,!1)},_=t.BatchDelGatherLine=function(e,t){var a=e.cardTable.getCheckedRows(t);if(null==a||0==a.length)return(0,o.toast)({color:"warning",content:this.state.json["36300TG-000029"]}),!1;var r=[],n=[],i=!0,s=!1,u=void 0;try{for(var c,p=a[Symbol.iterator]();!(i=(c=p.next()).done);i=!0){var f=c.value;r.push(f.index),n.push(f.data.values.rowno.value)}}catch(e){s=!0,u=e}finally{try{!i&&p.return&&p.return()}finally{if(s)throw u}}e.cardTable.delRowsByIndex(t,r);this.props.form.getFormItemsValue(this.formId,"isautorelation").value;var b=h(e,n);return b&&b.length>0&&e.cardTable.delRowsByIndex(l.card_table2_id,b),(0,d.setCardShouderBtnUseful)(e,t),!0},h=t.queryRelationRowsByRowno=function(e,t){var a=[];if(t&&t.length>0)for(var r=e.cardTable.getAllRows(l.card_table2_id,!1),o=0;o<r.length;o++){var n=r[o];t.indexOf(n.values.relationindex.value)>-1&&a.push(o)}return a},v=t.BatchCopyGatherLine=function(e,t,a){var r=e.cardTable.getCheckedRows(t);if(null==r||0==r.length)return(0,o.toast)({color:"warning",content:this.state.json["36300TG-000028"]}),!1;var n=Number(parseInt(this.state.maxIndex));console.log(n,"maxIndexCopy");var i=[],s=[],u=[],d=JSON.parse(JSON.stringify(r)),c=!0,p=!1,f=void 0;try{for(var b,m=d[Symbol.iterator]();!(c=(b=m.next()).done);c=!0){var g=b.value;n=parseInt(n)+parseInt(1),g.data.selected=!1,s.push(g.data.values.rowno.value),g.data.values.rowno={value:n.toString(),display:n.toString()},t==l.card_table1_id?g.data.values.pk_gatheringfinance={value:null,display:null}:g.data.values.pk_gatheringfund={value:null,display:null},console.log(g.data,"selectRowCopy"),i.push(g.data),u.push(n.toString())}}catch(e){p=!0,f=e}finally{try{!c&&m.return&&m.return()}finally{if(p)throw f}}this.setState({maxIndex:n.toString()});var _="";if(null==a&&(_=e.cardTable.getNumberOfRows(t,!1)),console.log(this.state.json["36300TG-000030"],i,"table_index1",_),e.cardTable.insertRowsAfterIndex(t,i,_),this.props.form.getFormItemsValue(this.formId,"isautorelation").value){for(var v=h(e,s),k=e.cardTable.getRowsByIndexs(l.card_table2_id,v),w=JSON.parse(JSON.stringify(k)),I=0;I<w.length;I++){var C=w[I];C.values.relationindex={value:u[I].toString(),display:u[I].toString()},C.values.pk_gatheringfund={value:null,display:null}}var T=y(e,a);console.log(this.state.json["36300TG-000031"],w,"table_index2",T),e.cardTable.insertRowsAfterIndex(l.card_table2_id,w,T)}return!0},y=t.getCopyIndexByFinanceIndex=function(e,t){if(null==t||null==t||""==t)return e.cardTable.getNumberOfRows(l.card_table2_id,!1);var a=e.cardTable.getRowsByIndexs(l.card_table1_id,t);if(0==a.length)return e.cardTable.getNumberOfRows(l.card_table2_id,!1);var r=a[0].values.rowno.value;return h([r])[0]},k=t.BatchCopyFund=function(e,t,a){var r=e.cardTable.getCheckedRows(t);if(null==r||0==r.length)return(0,o.toast)({color:"warning",content:this.state.json["36300TG-000028"]}),!1;var n=[],l=JSON.parse(JSON.stringify(r)),i=!0,s=!1,u=void 0;try{for(var d,c=l[Symbol.iterator]();!(i=(d=c.next()).done);i=!0){var p=d.value;p.data.selected=!1,p.data.values.relationindex={value:null,display:null},p.data.values.pk_gatheringfund={value:null,display:null},n.push(p.data)}}catch(e){s=!0,u=e}finally{try{!i&&c.return&&c.return()}finally{if(s)throw u}}return null==a&&(a=e.cardTable.getNumberOfRows(t,!1)),e.cardTable.insertRowsAfterIndex(t,n,a),!0},w=function(e){var t=this,a=e.form.getFormItemsValue(l.card_from_id,"pk_gathering").value;(0,o.ajax)({url:l.base_url+"linkqueryntb.do",data:{pk:a},success:function(e){var a=e.data;t.setState({showNtbDetail:!0,ntbdata:a})}})},I=function(e,t){var a=this;(0,f.elecSignCardPrint)(e,{url:l.base_url+"gatheringelecsignprint.do",offical:t,appCode:l.funcode,nodeKey:t?l.printnodekey.official:l.printnodekey.inofficial,headCode:l.card_from_id,field_id:l.pkname,field_billno:"vbillno",getOrgFunc:function(){var t=e.form.getFormItemsValue(l.card_from_id,"pk_delgoorg")&&e.form.getFormItemsValue(l.card_from_id,"pk_delgoorg").value;return t||e.form.getFormItemsValue(l.card_from_id,"pk_org").value},validateFunc:function(){var t=e.form.getFormItemsValue(l.card_from_id,"billstatus").value;return l.billstatus_gather.payok!=t?a.state.json["36300TG-000102"]:null}})}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buttonVisible=void 0;a(0);var r=a(11),o=r.card_from_id,n=(r.card_linkpage_id,r.card_table1_id),l=r.card_table2_id,i=r.card_hidden_buttons;t.buttonVisible=function(e){console.log("buttons",e.button.getButtons());var t=e.getUrlParam("status"),a="browse"!==t,r="browse"!==t,s=this.state.copyflag1||!1,u=this.state.copyflag2||!1,d=e.getUrlParam("scene"),c=!0;"deal"===t&&(c=!1);var p=!1;d&&"linksce"==d&&(p=!0),a?(e.button.setButtonVisible(["AddLine","DeleteLine","CopyLine"],a&&!s&&c),e.button.setButtonVisible(["CancelLine","CopyLineLast"],a&&s&&c),e.button.setButtonVisible(["CopyThisLine","InsertLine","DeleteLine_i","CopyAtLine"],a&&!s&&c),e.button.setButtonVisible(["AddLine2","DeleteLine2","CopyLine2"],a&&!u),e.button.setButtonVisible(["CancelLine2","CopyLineLast2"],a&&u)):e.button.setButtonVisible(["AddLine","DeleteLine","CopyLine","CancelLine","CopyLineLast","CopyThisLine","InsertLine","DeleteLine_i","CopyAtLine","AddLine2","DeleteLine2","CopyLine2","CancelLine2","CopyLineLast2"],!1);var f=e.form.getFormItemsValue(o,"billstatus");f=f&&f.value;var b=e.form.getFormItemsValue(o,"vbillstatus");b=b&&b.value;var m=e.form.getFormItemsValue(o,"voucherflag");m=m&&m.value;var g=e.form.getFormItemsValue(o,"vsourcebustype");g=g&&g.value,p?(e.button.setButtonVisible(i,!1),"4"!==f||m?"4"===f&&m?e.button.setButtonVisible(["LinkQueryAferBill","LinkReturnBill","LinkQueryPZ"],!0):("5"===f||"6"===f)&&e.button.setButtonVisible(["LinkQueryAferBill"],!0):e.button.setButtonVisible(["LinkQueryAferBill","LinkReturnBill"],!0)):r?(e.button.setButtonVisible(i,!1),e.button.setButtonVisible(["LinkQueryMenu","Refresh","File","Print"],!1),e.button.setButtonVisible(["Save","SaveAdd","SaveCommit","Cancel"],!0),"deal"==t&&e.button.setButtonVisible(["SaveAdd","SaveCommit"],!1),e.button.setMainButton(["Save"],!0)):(e.button.setButtonVisible(i,!1),"0"===f?(e.button.setButtonVisible(["Add","Edit","Delete","Copy","Commit"],!0),e.button.setButtonVisible(["LinkQueryMenu","Refresh","File","Print"],!0),e.button.setMainButton(["Commit"],!0),e.button.setMainButton(["Add"],!1)):"1"===f&&"billhand"==g?(e.button.setButtonVisible(["Add","Copy","Decide","UnCommit"],!0),e.button.setButtonVisible(["LinkQueryMenu","Refresh","File","Print"],!0),e.button.setMainButton(["Decide"],!0),e.button.setMainButton(["Add"],!1)):"1"===f&&"billhand"!=g?(e.button.setButtonVisible(["Add","Copy","Decide","Back"],!0),e.button.setButtonVisible(["LinkQueryMenu","Refresh","File","Print"],!0),e.button.setMainButton(["Decide"],!0),e.button.setMainButton(["Add"],!1)):"2"===f?(e.button.setButtonVisible(["Add","Copy","UnDecide"],!0),e.button.setButtonVisible(["LinkQueryMenu","Refresh","File","Print"],!0),e.button.setMainButton(["Add"],!1)):"3"===f?(e.button.setButtonVisible(["Add","Copy","Gather"],!0),e.button.setButtonVisible(["LinkQueryMenu","Refresh","File","Print"],!0),e.button.setMainButton(["Gather"],!0),e.button.setMainButton(["Add"],!1)):"4"!==f||m?"4"===f&&m?(e.button.setButtonVisible(["Add","Copy","UnPremit","LinkQueryAferBill","LinkReturnBill","LinkQueryPZ","File","Print","Refresh"],!0),e.button.setMainButton(["Add"],!1)):"5"===f?(e.button.setButtonVisible(["Add","Copy","Deliver","LinkQueryAferBill","File","Print","Refresh"],!0),e.button.setMainButton(["Deliver"],!0),e.button.setMainButton(["Add"],!1)):"6"===f?(e.button.setButtonVisible(["Add","Copy","UnDeliver","LinkQueryAferBill","File","Print","Refresh"],!0),e.button.setMainButton(["Add"],!1)):(e.button.setButtonVisible(["LinkQueryMenu","Refresh","File","Print","Refresh"],!1),e.button.setButtonVisible(["Add"],!0),e.button.setMainButton(["Add"],!0)):(e.button.setButtonVisible(["Add","Copy","UnGather","Premit","LinkQueryAferBill","LinkReturnBill","File","Print","Refresh"],!0),e.button.setMainButton(["Premit"],!0),e.button.setMainButton(["Add"],!1))),e.cardPagination.setCardPaginationVisible("cardPaginationBtn",!r),"deal"!=t&&"copy"!=t||(t="edit"),e.form.setFormStatus(o,t),e.cardTable.setStatus(n,t),e.cardTable.setStatus(l,t)}},,,,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=this;e.createUIDom({pagecode:y,appcode:e.getUrlParam("c")},(function(a){if(a){if(a.template){var r=a.template;!function(e,t,a){var r=t.getUrlParam("status");a[_].status=r,a[h].status=r,a[v].status=r;var o=!e.isallowflag;console.log(_),(a[v].items.find((function(e){return"notenumber"===e.attrcode}))||{}).showHistory=!1,(a[v].items.find((function(e){return"notenumber"===e.attrcode}))||{}).isCacheable=!1,(a[_].items.find((function(e){return"pk_delsourceorg"===e.attrcode}))||{}).isShowUnit=!0,(a[_].items.find((function(e){return"pk_delgoorg"===e.attrcode}))||{}).isShowUnit=!0,(a[_].items.find((function(e){return"pk_fundgetorg"===e.attrcode}))||{}).isShowUnit=!0,(a[_].items.find((function(e){return"pk_transactorg"===e.attrcode}))||{}).isShowUnit=!0,(a[h].items.find((function(e){return"pk_financeorg_r"===e.attrcode}))||{}).isShowUnit=!0,a[_].items.map((function(e){"pk_org"==e.attrcode&&(e.queryCondition=function(){return{funcode:s.appcode,TreeRefActionExt:"nccloud.web.tmpub.filter.FundOrgPermissionFilter"}}),"pk_fundgetorg"==e.attrcode&&(e.queryCondition=function(){return{pk_org:t.form.getFormItemsValue(_,"pk_org").value,isinform:t.form.getFormItemsValue(_,"isinform").value,TreeRefActionExt:"nccloud.web.fts.commission.commissiongathering.filter.GatherFundOrgFilter"}}),"pk_transactorg"==e.attrcode&&(e.queryCondition=function(){return{pk_org:t.form.getFormItemsValue(_,"pk_org").value,isinform:t.form.getFormItemsValue(_,"isinform").value,TreeRefActionExt:"nccloud.web.fts.commission.commissiongathering.filter.GatherTransactOrgFilter"}}),"pk_costcenter"==e.attrcode&&(e.queryCondition=function(){return{pk_org:t.form.getFormItemsValue(_,"pk_org").value}})})),a[s.card_from_delivermsg_id].items.map((function(e){"pk_clearinplan"!=e.attrcode&&"pk_clearoutplan"!=e.attrcode||(e.queryCondition=function(){return{pk_org:t.form.getFormItemsValue(_,"pk_org").value}}),"pk_clearoutaccount"!=e.attrcode&&"pk_clearoutbankaccount"!=e.attrcode||(e.queryCondition=function(){return{pk_org:t.form.getFormItemsValue(_,"pk_org").value,pk_delgoorg:(t.form.getFormItemsValue(_,"pk_delgoorg")||{}).value,pk_currtype:(t.form.getFormItemsValue(_,"pk_currtype")||{}).value,clearoutacctype:(t.form.getFormItemsValue(_,"clearoutacctype")||{}).value,acceptdate:(t.form.getFormItemsValue(_,"acceptdate")||{}).value,GridRefActionExt:"nccloud.web.fts.commission.commissiongathering.filter.GatherOutClearAccFilter"}})})),a[h].items.map((function(e){k(t,e,o)})),a[v].items.map((function(e){w(t,e)})),a.childform2.items.map((function(e){k(t,e,o)})),a.childform4.items.map((function(e){w(t,e)})),(0,b.addDefReferFilter)(t,{meta:a,areaCode:[_,h,v,"childform2","childform4"],getOrgFunc:function(){return(t.form.getFormItemsValue(_,"pk_org")||{}).value}});var n={attrcode:"opr",label:e.state.json["36300TG-000097"],fixed:"right",itemtype:"customer",visible:!0,width:"200px",render:function(a,r,o){var n=t.cardTable.getStatus(h),l=t.form.getFormItemsValue(_,"vsourcebustype").value,i=!1;s.busType.BusType_BillFBM==l&&(i=!0);var u=[];return u=i?["Open"]:e.state.copyflag1?["CopyAtLine"]:["Open","CopyThisLine","InsertLine","DeleteLine_i"],"browse"===n&&(u=r.expandRowStatus?["CloseDown"]:["OpenDown"]),React.createElement("div",{className:"currency-opr-col"},t.button.createOprationButton(u,{area:"card_inner",buttonLimit:3,onButtonClick:function(t,n){return d.bodyButtonClick.call(e,t,n,a,r,o,h)}}))}};a[h].items.push(n);var l={attrcode:"opr",label:e.state.json["36300TG-000097"],fixed:"right",itemtype:"customer",visible:!0,width:"200px",render:function(a,r,o){var n=t.cardTable.getStatus(v),l=t.form.getFormItemsValue(_,"vsourcebustype").value,i=!1;s.busType.BusType_BillFBM==l&&(i=!0);var u=[];return u=i?["Open"]:e.state.copyflag2?["CopyAtLine"]:["Open","CopyThisLine2","InsertLine2","DeleteLine_i2"],"browse"===n&&(u=r.expandRowStatus?["CloseDown"]:["OpenDown"]),React.createElement("div",{className:"currency-opr-col"},t.button.createOprationButton(u,{area:"card_inner",buttonLimit:3,onButtonClick:function(t,n){return d.bodyButtonClick.call(e,t,n,a,r,o,v)}}))}};a[v].items.push(l)}(t,e,r),e.meta.setMeta(r);e.getUrlParam("id");"add"==e.getUrlParam("status")?t.props.initMetaByPkorg():"copy"!=e.getUrlParam("status")&&"edit"!=e.getUrlParam("status")&&"deal"!=e.getUrlParam("status")||t.props.form.setFormItemsDisabled(s.card_from_id,{pk_org:!0})}if(a.button){var o=a.button;e.button.setButtons(o),u.buttonVisible.call(t,e),(0,c.setCardShouderBtnUseful)(e)}if(a.context){var n=a.context;if("add"===e.getUrlParam("status")&&!e.getUrlParam("src")&&n.pk_org){var l=a.context,i=l.pk_org,m=l.org_Name,g=l.pk_org_v,y=l.org_v_Name,I={value:n.pk_org,display:n.org_Name};e.form.setFormItemsValue(_,{pk_org:{value:i,display:m},pk_org_v:{value:g,display:y}}),f.afterEvent.call(t,t.props,s.card_from_id,"pk_org",I,null,null,null,null,!0),t.props.resMetaAfterPkorgEdit(),t.props.form.setFormItemsDisabled(s.card_from_id,{pk_org:!1})}}p.orgVersionView.call(t,t.props,t.formId)}}))};var r=a(0),o=m(a(26)),n=m(a(44)),l=m(a(45)),i=(m(a(47)),m(a(27))),s=a(11),u=a(75),d=a(121),c=a(33),p=a(10),f=a(70),b=a(1);function m(e){return e&&e.__esModule?e:{default:e}}r.base.NCPopconfirm;var g=r.cardCache.getDefData,_=s.card_from_id,h=s.card_table1_id,v=s.card_table2_id,y=s.card_page_id;var k=function(e,t,a){"pk_inneraccount_r"==t.attrcode&&(t.render=function(t,a,r){return(0,o.default)({queryCondition:function(){return{pk_fundgetorg:(e.form.getFormItemsValue(_,"pk_fundgetorg")||{}).value,pk_currtype:(e.form.getFormItemsValue(_,"pk_currtype")||{}).value,acceptdate:(e.form.getFormItemsValue(_,"acceptdate")||{}).value,pk_financeorg_r:(a.values.pk_financeorg_r||{}).value,origetmode:(a.values.origetmode||{}).value,GridRefActionExt:"nccloud.web.fts.commission.commissiongathering.filter.InnerAccountFilter"}}})}),"pk_financeorg_r"==t.attrcode&&(t.queryCondition=function(){return{pk_org:e.form.getFormItemsValue(_,"pk_org").value,pk_fundpayorg:e.form.getFormItemsValue(_,"pk_fundgetorg").value,TreeRefActionExt:"nccloud.web.fts.pub.filter.DefaultFundFinanceOrgFilter"}}),"pk_bankaccount_p"==t.attrcode&&(t.render=function(t,r,o){return(0,n.default)({checkStrictly:a,queryCondition:function(){var t=e.form.getFormItemsValue(_,"pk_org").value,a=e.form.getFormItemsValue(_,"pk_currtype").value,o=e.form.getFormItemsValue(_,"pk_gathercurr").value,n=e.form.getFormItemsValue(_,"isexchangegather").value;return n&&(a=o),{pk_org:t,pk_currtype:a,pk_gathercurr:o,accclass:2,isexchangegather:n,pk_cust:(r.values.pk_company_p||{}).value,GridRefActionExt:"nccloud.web.fts.commission.commissiongathering.filter.GatherCustBankAccFilter"}}})}),"pk_company_p"==t.attrcode&&(t.render=function(t,r,o){return(0,l.default)({checkStrictly:a,queryCondition:function(){var t=e.cardTable.getValByKeyAndIndex(h,o,"pk_financeorg_r").value;return{pk_financeorg_r:t,pk_org:t,pk_group:g(s.dataSource,t),GridRefActionExt:"nccloud.web.fts.commission.commissiongathering.filter.GatherCustCompanyFilter",TreeRefActionExt:"nccloud.web.fts.commission.commissiongathering.filter.GatherCustCompanyTreeFilter"}}})}),"pk_financeplan"==t.attrcode&&(t.queryCondition=function(){return{pk_org:e.form.getFormItemsValue(_,"pk_org").value,pk_group:e.form.getFormItemsValue(_,"pk_group").value,TreeRefActionExt:"nccloud.web.fts.pub.filter.GatherFinancePlanFilter"}})},w=function(e,t){"pk_bankaccount_r"==t.attrcode&&(t.render=function(t,a,r){return(0,i.default)({queryCondition:function(){var t=e.form.getFormItemsValue(_,"acceptdate").value,a=e.form.getFormItemsValue(_,"pk_currtype").value,o=e.form.getFormItemsValue(_,"pk_gathercurr").value,n=e.form.getFormItemsValue(_,"isexchangegather").value;return{pk_org:e.form.getFormItemsValue(_,"pk_org").value,pk_currtype:a,isexchangegather:n,acceptdate:t,pk_gathercurr:o,pk_financeorg_r:(e.cardTable.getValByKeyAndIndex(h,r,"pk_financeorg_r")||{}).value,GridRefActionExt:"nccloud.web.fts.commission.commissiongathering.filter.GatherBankAccRBankAccFilter"}}})}),"pk_cashaccount_r"==t.attrcode&&(t.queryCondition=function(){return{acceptdate:e.form.getFormItemsValue(_,"acceptdate").value,pk_org:e.form.getFormItemsValue(_,"pk_org").value,pk_currtype:e.form.getFormItemsValue(_,"pk_currtype").value,pk_transactorg:e.form.getFormItemsValue(_,"pk_transactorg").value,GridRefActionExt:"nccloud.web.fts.commission.commissiongathering.filter.GatherCashAccRFilter"}}),"pk_getplanitem"==t.attrcode&&(t.queryCondition=function(){return{pk_org:e.form.getFormItemsValue(_,"pk_org").value}})}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.customerAllowInputProcess=void 0,t.default=function(e,t,a,n,c,p){var f=e.form.getFormItemsValue(o.card_from_id,"pk_org").value,b=(e.form.getFormItemsValue(o.card_from_id,"pk_transactorg")||{}).value,m=e.form.getFormItemsValue(o.card_from_id,"pk_vsourcebilltype").value,g=e.form.getFormItemsValue(o.card_from_id,"vsourcebustype").value,_="deal"==e.getUrlParam("status");if(console.log(n),t==o.card_from_id){var h=e.form.getFormItemsDisabled(o.card_from_id,a);switch(a){case"pk_org":return!(status&&"edit"==status||status&&"deal"==status||status&&"add"==status);case"pk_transactorg":return!s(e)&&!u(e);case"pk_currtype":case"totalamount":return!s(e);default:return!h}}else if(t==o.card_table1_id)switch(a){case"pk_financeorg_r":if(console.log(_),_){if(f==b&&("F4"===m||"D2"===m))return!1;if(d(e))return!1;if(f!=b&&"billhand"!=g)return!1;if("billpayawoke"==g&&!n.value)return!0;if("billpayawoke"==g&&n.value)return!1}return!s(e);case"pk_inneraccount_r":if(_){if(f==b&&("F4"===m||"D2"===m))return!1;if(d(e))return!1;if(f!=b&&"billhand"!=g)return!1;if("billpayawoke"==g&&!n.value)return!0;if("billpayawoke"==g&&n.value)return!1}return p.values.pk_financeorg_r.value?!s(e):((0,r.toast)({color:"warning",content:this.state.json["36300TG-000002"]}),!1);case"pk_company_p":if(_){if(f==b&&("F4"===m||"D2"===m))return!1;if(d(e))return!1;if(f!=b&&"billhand"!=g)return!1;if("billpayawoke"==g)return!1}return!s(e);case"pk_bankaccount_p":if(_){if(f==b&&("F4"===m||"D2"===m))return!1;if(d(e))return!1;if(f!=b&&"billhand"!=g)return!1;if("billpayawoke"==g)return!1}return p.values.pk_company_p.value?!s(e):((0,r.toast)({color:"warning",content:this.state.json["36300TG-000003"]}),!1);case"pk_bankname_p":return(!_||!d(e))&&(!("cash"!=p.values.origetmode.value&&"note"!=p.values.origetmode.value&&!this.isbankaccrinput)&&!s(e));case"pk_balatype":if(_){if(f==b&&("F4"===m||"D2"===m))return!1;if(d(e))return!1;if(f!=b&&"billhand"!=g)return!1;if("billpayawoke"==g)return!1}return!0;case"origetmode":if(_){if(f==b&&("F4"===m||"D2"===m))return!1;if(d(e))return!1;if(f!=b&&"billhand"!=g)return!1;if("billpayawoke"==g)return!1}return!s(e);case"amount":if(_){if(f==b&&("F4"===m||"D2"===m))return!1;if(d(e))return!1;if(f!=b&&"billhand"!=g)return!1;if("billpayawoke"==g)return!1}return!0;case"olcrate":case"glcrate":case"gllcrate":if(_){if(f==b&&("F4"===m||"D2"===m))return!1;if(d(e))return!1;if(f!=b&&"billhand"!=g)return!1;if("billpayawoke"==g)return!1}return l(e,t,a,n,c,p);default:return!0}else{if(t!=o.card_table2_id)return!0;switch(a){case"getmode":return"billpayawoke"!=g&&!s(e);case"fundtype":return!1;case"pk_bankaccount_r":return!s(e)&&l(e,t,a,n,c,p);case"isfees":return f==b&&("billpayawoke"!=g&&!s(e));case"pk_cashaccount_r":return f==b&&("cash"==p.values.getmode.value||(s(e),!1));case"amount":return"billpayawoke"!=g&&(!s(e)&&(!s(e)&&l(e,t,a,n,c,p)));case"olcrate":case"glcrate":case"gllcrate":return"billpayawoke"!=g&&(!s(e)&&l(e,t,a,n,c,p));case"pk_notetype":return"note"==p.values.getmode.value&&!s(e);case"billno":case"notenumber":var v=!1;"note"==p.values.getmode.value&&(v=!0),v=!!p.values.pk_notetype.value&&!s(e);var y=l(e,t,a,n,c,p),k=e.meta.getMeta(),w=k[o.card_table2_id].items,I=k[o.card_table2_edit_id].items;return w.forEach((function(t){"notenumber"==t.attrcode&&(y&&"refer"!=t.itemtype?(t.showHistory=!1,t.itemtype="refer",t.refcode="fbm/refer/fbm/Bill4FtsReceiveGridRef/index.js",t.queryCondition=function(){var t=(e.form.getFormItemsValue(o.card_from_id,"pk_currtype")||{}).value,a=(e.form.getFormItemsValue(o.card_from_id,"pk_transactorg").value,e.form.getFormItemsValue(o.card_from_id,"pk_org").value),r=(p.values.pk_notetype||{}).value;(e.cardTable.getValByKeyAndIndex(o.card_table1_id,c,"pk_financeorg_r")||{}).value;return(e.form.getFormItemsValue(o.card_from_id,"pk_financeorg_r")||{}).value,{pk_org:a,pk_curr:t,fbmbilltype:r,GridRefActionExt:"nccloud.web.fts.commission.commissiongathering.filter.GatherBodyPkNoteFilter"}}):y&&"refer"==t.itemtype?(t.showHistory=!1,t.queryCondition=function(){var t=(e.form.getFormItemsValue(o.card_from_id,"pk_currtype")||{}).value,a=(e.form.getFormItemsValue(o.card_from_id,"pk_transactorg").value,e.form.getFormItemsValue(o.card_from_id,"pk_org").value),r=(p.values.pk_notetype||{}).value;(e.cardTable.getValByKeyAndIndex(o.card_table1_id,c,"pk_financeorg_r")||{}).value;return(e.form.getFormItemsValue(o.card_from_id,"pk_financeorg_r")||{}).value,{pk_org:a,pk_curr:t,fbmbilltype:r,GridRefActionExt:"nccloud.web.fts.commission.commissiongathering.filter.GatherBodyPkNoteFilter"}}):(t.itemtype="input",t.refcode=null))})),I.forEach((function(t){"notenumber"==t.attrcode&&(y&&"refer"!=t.itemtype?(t.itemtype="refer",t.refcode="fbm/refer/fbm/Bill4FtsReceiveGridRef/index.js",t.queryCondition=function(){var t=(e.form.getFormItemsValue(o.card_from_id,"pk_currtype")||{}).value,a=(e.form.getFormItemsValue(o.card_from_id,"pk_transactorg").value,e.form.getFormItemsValue(o.card_from_id,"pk_org").value),r=(p.values.pk_notetype||{}).value;(e.cardTable.getValByKeyAndIndex(o.card_table1_id,c,"pk_financeorg_r")||{}).value;return(e.form.getFormItemsValue(o.card_from_id,"pk_financeorg_r")||{}).value,{pk_org:a,pk_curr:t,fbmbilltype:r,GridRefActionExt:"nccloud.web.fts.commission.commissiongathering.filter.GatherBodyPkNoteFilte"}}):y&&"refer"==t.itemtype?t.queryCondition=function(){var t=(e.form.getFormItemsValue(o.card_from_id,"pk_currtype")||{}).value,a=(e.form.getFormItemsValue(o.card_from_id,"pk_transactorg").value,e.form.getFormItemsValue(o.card_from_id,"pk_org").value),r=(p.values.pk_notetype||{}).value;(e.cardTable.getValByKeyAndIndex(o.card_table1_id,c,"pk_financeorg_r")||{}).value;return(e.form.getFormItemsValue(o.card_from_id,"pk_financeorg_r")||{}).value,{pk_org:a,pk_curr:t,fbmbilltype:r,GridRefActionExt:"nccloud.web.fts.commission.commissiongathering.filter.GatherBodyPkNoteFilte"}}:(t.itemtype="input",t.refcode=null))})),e.meta.setMeta(k),console.log(k),e.renderItem("table",t,"notenumber",null),i(e,p,y),v;case"feedirection":case"feeamount":return!!p.values.isfees.value||(s(e),!1);default:return!0}}};var r=a(0),o=a(11);a(18),n(a(27)),n(a(26));function n(e){return e&&e.__esModule?e:{default:e}}var l=function(e,t,a,n,l,i){var s=e.createExtCardData(o.card_page_id,o.card_from_id,[o.card_table1_id,o.card_table2_id]),u=!1;return(0,r.ajax)({url:o.base_url+"cardbeforeedit.do",data:{data:JSON.stringify(s),pageCode:o.card_page_id,areaCode:t,key:a,index:l},async:!1,success:function(e){u=e.data}}),u},i=function(e,t,a){for(var r=e.cardTable.getAllRows(o.card_table2_id,!1),n=0;n<r.length;n++){var l=r[n];if(t.rowid!=l.rowid&&t.values.pk_notetype.value!=l.values.pk_notetype.value){var i=l.values.pk_billno.value,s=l.values.billno.value;l.values.notenumber=a?{value:s,display:s}:{value:i,display:s}}}var u={rows:r};e.cardTable.updateTableData(o.card_table2_id,u)},s=(t.customerAllowInputProcess=function(e,t,a,r){var n=e.meta.getMeta();if(n&&n[o.card_table1_id]&&n[o.card_table1_edit_id]){var l=n[o.card_table1_id].items,i=n[o.card_table1_edit_id].items;l.forEach((function(e){var t=e.attrcode;"pk_company_p"!=t&&"pk_bankaccount_p"!=t&&"pk_bankname_p"!=t||(e.checkStrictly=!a)})),i.forEach((function(e){var t=e.attrcode;"pk_company_p"!=t&&"pk_bankaccount_p"!=t&&"pk_bankname_p"!=t||(e.checkStrictly=!a)})),e.meta.setMeta(n)}},function(e){var t=e.form.getFormItemsValue(o.card_from_id,"vsourcebustype").value;return o.busType.BusType_BillFBM==t}),u=function(e){var t=e.form.getFormItemsValue(o.card_from_id,"isinform").value;return!!(t&&1==t||t&&"Y"==t)},d=function(e){var t=e.form.getFormItemsValue(o.card_from_id,"vsourcebustype").value;return o.busType.BusType_BillDeliver==t}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=this;e.createUIDom({pagecode:_,appcode:e.getUrlParam("c")},(function(a){if(a){if(a.template){var r=a.template;!function(e,t,a){var r=t.getUrlParam("status");a[b].status=r,a[m].status=r,a[g].status=r,console.log(b),(a[b].items.find((function(e){return"pk_delsourceorg"===e.attrcode}))||{}).isShowUnit=!0,(a[b].items.find((function(e){return"pk_delgoorg"===e.attrcode}))||{}).isShowUnit=!0,(a[b].items.find((function(e){return"pk_fundgetorg"===e.attrcode}))||{}).isShowUnit=!0,(a[b].items.find((function(e){return"pk_transactorg"===e.attrcode}))||{}).isShowUnit=!0,(a[m].items.find((function(e){return"pk_financeorg_r"===e.attrcode}))||{}).isShowUnit=!0,a[b].items.map((function(e){"pk_org"==e.attrcode&&(e.queryCondition=function(){return{funcode:s.appcode,TreeRefActionExt:"nccloud.web.tmpub.filter.FundOrgPermissionFilter"}}),"pk_fundgetorg"==e.attrcode&&(e.queryCondition=function(){return{pk_org:t.form.getFormItemsValue(b,"pk_org").value,isinform:t.form.getFormItemsValue(b,"isinform").value,TreeRefActionExt:"nccloud.web.fts.commission.commissiongathering.filter.GatherFundOrgFilter"}}),"pk_transactorg"==e.attrcode&&(e.queryCondition=function(){return{pk_org:t.form.getFormItemsValue(b,"pk_org").value,isinform:t.form.getFormItemsValue(b,"isinform").value,TreeRefActionExt:"nccloud.web.fts.commission.commissiongathering.filter.GatherTransactOrgFilter"}})})),a[s.card_from_delivermsg_id].items.map((function(e){"pk_clearinplan"!=e.attrcode&&"pk_clearoutplan"!=e.attrcode||(e.queryCondition=function(){return{pk_org:t.form.getFormItemsValue(b,"pk_org").value}}),"pk_clearoutaccount"!=e.attrcode&&"pk_clearoutbankaccount"!=e.attrcode||(e.queryCondition=function(){return{pk_org:t.form.getFormItemsValue(b,"pk_org").value,pk_delgoorg:(t.form.getFormItemsValue(b,"pk_delgoorg")||{}).value,pk_currtype:(t.form.getFormItemsValue(b,"pk_currtype")||{}).value,clearoutacctype:(t.form.getFormItemsValue(b,"clearoutacctype")||{}).value,acceptdate:(t.form.getFormItemsValue(b,"acceptdate")||{}).value,GridRefActionExt:"nccloud.web.fts.commission.commissiongathering.filter.GatherOutClearAccFilter"}})})),a[m].items.map((function(e){"pk_inneraccount_r"==e.attrcode&&(e.render=function(e,a,r){return(0,o.default)({queryCondition:function(){return{pk_fundgetorg:(t.form.getFormItemsValue(b,"pk_fundgetorg")||{}).value,pk_currtype:(t.form.getFormItemsValue(b,"pk_currtype")||{}).value,acceptdate:(t.form.getFormItemsValue(b,"acceptdate")||{}).value,pk_financeorg_r:(a.values.pk_financeorg_r||{}).value,origetmode:(a.values.origetmode||{}).value,GridRefActionExt:"nccloud.web.fts.commission.commissiongathering.filter.InnerAccountFilter"}}})}),"pk_financeorg_r"==e.attrcode&&(e.queryCondition=function(){return{pk_org:t.form.getFormItemsValue(b,"pk_org").value,pk_fundpayorg:t.form.getFormItemsValue(b,"pk_fundgetorg").value,TreeRefActionExt:"nccloud.web.fts.pub.filter.DefaultFundFinanceOrgFilter"}}),"pk_bankaccount_p"==e.attrcode&&(e.render=function(e,a,r){return(0,n.default)({queryCondition:function(){return{pk_org:t.form.getFormItemsValue(b,"pk_org").value,pk_currtype:t.form.getFormItemsValue(b,"pk_currtype").value,accclass:2,pk_cust:(a.values.pk_company_p||{}).value,TreeRefActionExt:"nccloud.web.fts.commission.commissiongathering.filter.GatherCustBankAccFilter"}}})}),"pk_company_p"==e.attrcode&&(e.render=function(e,a,r){return(0,l.default)({queryCondition:function(){return{pk_financeorg_r:t.cardTable.getValByKeyAndIndex(m,r,"pk_financeorg_r").value,pk_org:t.form.getFormItemsValue(b,"pk_org").value,GridRefActionExt:"nccloud.web.fts.commission.commissiongathering.filter.GatherCustCompanyFilter"}}})}),"pk_financeplan"==e.attrcode&&(e.queryCondition=function(){return{pk_org:t.form.getFormItemsValue(b,"pk_org").value,pk_group:t.form.getFormItemsValue(b,"pk_group").value,TreeRefActionExt:"nccloud.web.fts.pub.filter.GatherFinancePlanFilter"}})})),a[g].items.map((function(e){"pk_bankaccount_r"==e.attrcode&&(e.render=function(e,a,r){return(0,i.default)({queryCondition:function(){var e=t.form.getFormItemsValue(b,"acceptdate").value,a=t.form.getFormItemsValue(b,"pk_currtype").value,o=t.form.getFormItemsValue(b,"pk_gathercurr").value,n=t.form.getFormItemsValue(b,"isexchangegather").value;return{pk_org:t.form.getFormItemsValue(b,"pk_org").value,pk_currtype:a,isexchangegather:n,acceptdate:e,pk_gathercurr:o,pk_financeorg_r:(t.cardTable.getValByKeyAndIndex(m,r,"pk_financeorg_r")||{}).value,GridRefActionExt:"nccloud.web.fts.commission.commissiongathering.filter.GatherBankAccRBankAccFilter"}}})}),"pk_cashaccount_r"==e.attrcode&&(e.queryCondition=function(){return{acceptdate:t.form.getFormItemsValue(b,"acceptdate").value,pk_org:t.form.getFormItemsValue(b,"pk_org").value,pk_currtype:t.form.getFormItemsValue(b,"pk_currtype").value,pk_transactorg:t.form.getFormItemsValue(b,"pk_transactorg").value,GridRefActionExt:"nccloud.web.fts.commission.commissiongathering.filter.GatherCashAccRFilter"}}),"pk_getplanitem"==e.attrcode&&(e.queryCondition=function(){return{pk_org:t.form.getFormItemsValue(b,"pk_org").value}})}));t.getUrlParam("status");console.log("actionName"),console.log(t.getUrlParam("actionName"));var u={attrcode:"opr",label:e.state.json["36300TG-000097"],fixed:"right",itemtype:"customer",visible:!0,width:"200px",render:function(a,r,o){var n=t.cardTable.getStatus(m),l=e.state.copyflag1?["CopyAtLine"]:["Open","CopyThisLine","InsertLine","DeleteLine_i"];return"browse"===n&&(l=r.expandRowStatus?["CloseDown"]:["OpenDown"]),React.createElement("div",{className:"currency-opr-col"},t.button.createOprationButton(l,{area:"card_inner",buttonLimit:3,onButtonClick:function(t,n){return d.bodyButtonClick.call(e,t,n,a,r,o,m)}}))}};a[m].items.push(u);var c={attrcode:"opr",label:e.state.json["36300TG-000097"],fixed:"right",itemtype:"customer",visible:!0,width:"200px",render:function(a,r,o){var n=t.cardTable.getStatus(g),l=e.state.copyflag2?["CopyAtLine"]:["Open","CopyThisLine2","InsertLine2","DeleteLine_i2"];return"browse"===n&&(l=r.expandRowStatus?["CloseDown"]:["OpenDown"]),React.createElement("div",{className:"currency-opr-col"},t.button.createOprationButton(l,{area:"card_inner",buttonLimit:3,onButtonClick:function(t,n){return d.bodyButtonClick.call(e,t,n,a,r,o,g)}}))}};a[g].items.push(c)}(t,e,r),e.meta.setMeta(r);e.getUrlParam("id");"add"==e.getUrlParam("status")?t.props.initMetaByPkorg():"copy"!=e.getUrlParam("status")&&"edit"!=e.getUrlParam("status")&&"deal"!=e.getUrlParam("status")||t.props.form.setFormItemsDisabled(s.card_from_id,{pk_org:!0})}if(a.button){var f=a.button;e.button.setButtons(f),u.buttonVisible.call(t,e),(0,c.setCardShouderBtnUseful)(e)}p.orgVersionView.call(t,t.props,t.formId)}}))};var r=a(0),o=f(a(26)),n=f(a(44)),l=f(a(45)),i=(f(a(47)),f(a(27))),s=a(11),u=a(78),d=a(125),c=a(33),p=a(10);function f(e){return e&&e.__esModule?e:{default:e}}r.base.NCPopconfirm;var b=s.card_from_id,m=s.card_table1_id,g=s.card_table2_id,_=s.card_linkpage_id},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,n=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(3),i=C(l),s=(C(a(4)),a(0)),u=a(70),d=a(94),c=C(d),p=a(75),f=a(71),b=a(11),m=a(46),g=C(a(24)),_=C(a(23)),h=a(5),v=a(10),y=a(33),k=a(6),w=a(1),I=a(76);function C(e){return e&&e.__esModule?e:{default:e}}function T(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var S=s.base.NCAnchor,B=s.base.NCScrollLink,P=s.base.NCScrollElement,A=s.base.NCAffix,D=(s.base.NCBackBtn,s.base.NCDiv),O=s.high.NCUploader,x=s.high.ApproveDetail,j=s.high.Inspection,L=s.high.ApprovalTrans,F=s.cardCache.addCache,R=s.cardCache.updateCache,M=s.cardCache.getNextId,E=s.cardCache.deleteCacheById,V=s.cardCache.getCurrentLastId,N=(s.cardCache.getDefData,s.cardCache.getCacheById,r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.call(a),a.formId=b.card_from_id,a.searchId=b.list_search_id,a.moduleId=b.module_id,a.tableId1=b.card_table1_id,a.tableId2=b.card_table2_id,a.pageId=b.card_page_id,a.billID="",a.vbillno="",a.isallowflag=!1,a.isbankaccrinput=!1,a.iscustomerinput=!1,a.isbankinput=!1,a.state={show:!1,sourceData:null,copyflag1:!1,copyflag2:!1,accModalShow1:!1,currentpk:null,showApproveDetail:!1,showOriginal:!1,showOriginalData:[],value:"",showNtbDetail:!1,ntbdata:null,showModal:!1,billtype:"",json:{},inlt:null,assignData:null,assignShow:!1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"componentDidMount",value:function(){var e=this.props.getUrlParam("id"),t=this.props.getUrlParam("status");if(this.billID=e,this.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!0,showBillCode:!0}),"copy"==t)this.copyBill();else if("edit"==t){var a=this.props.getUrlParam("ts");this.editBill(a)}else"add"!=t&&"copy"!=t?this.queryData("gatheringcardquery.do"):(this.props.initMetaByPkorg(),this.props.resMetaAfterPkorgEdit(),this.props.form.setFormItemsDisabled(b.card_from_id,{pk_org:!0}),this.toggleShow())}},{key:"componentWillMount",value:function(){var e,t=this;(0,s.getMultiLang)({moduleId:(e={},T(e,k.module_tmpub_name,[k.module_tmpub_id]),T(e,k.module_name,[b.module_id,b.funcode]),e),callback:function(e,a,r){a?((0,w.saveMultiLangRes)(t.props,e),u.initTemplate.call(t,t.props,e,r),t.setState({json:e,inlt:r})):console.log("未加载到多语资源")}}),window.onbeforeunload=function(){if("browse"!=t.props.getUrlParam("status"))return t.state.json["36300TG-000034"]}}},{key:"handleClick",value:function(){this.props.pushTo("/list",{status:"browse"})}},{key:"cancel",value:function(){this.setState({show:!1})}},{key:"affirm",value:function(e){console.log(e),this.setState({show:!1})}},{key:"click",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,a=t.cardTable,r=t.form,o=t.button,n=t.modal,l=t.cardPagination,s=t.socket,d=this.props.button.getButtons(),p=this.props.BillHeadInfo.createBillHeadInfo,v=r.createForm,k=a.createCardTable,I=l.createCardPagination,C=(o.createButton,o.createButtonApp),T=n.createModal,F=this.state,R=F.showUploader,M=F.target,E=F.showApproveDetail,V=F.showNtbDetail,N=F.ntbdata,G=F.accModalShow,U=F.billtype,q=F.showModal,K=F.assignData,Q=F.assignShow,H=(this.props.getUrlParam("status"),"deal"===this.props.getUrlParam("status"));return i.default.createElement("div",{className:"nc-bill-extCard"},i.default.createElement(S,null,i.default.createElement(B,{to:"forminfo",spy:!0,smooth:!0,duration:300,offset:-100},i.default.createElement("p",null,this.state.json["36300TG-000044"])),i.default.createElement(B,{to:"businfo",spy:!0,smooth:!0,duration:300,offset:-100},i.default.createElement("p",null,this.state.json["36300TG-000045"])),i.default.createElement(B,{to:"detail",spy:!0,smooth:!0,duration:300,offset:-50},i.default.createElement("p",null,this.state.json["36300TG-000046"]))),i.default.createElement("div",{className:"nc-bill-top-area"},i.default.createElement(A,null,i.default.createElement(D,{areaCode:D.config.HEADER,className:"nc-bill-header-area"},i.default.createElement("div",{className:"header-title-search-area"},i.default.createElement("span",null,p({title:this.state.json["36300TG-000038"],billCode:this.vbillno,backBtnClick:function(){e.handleClick()}}))),s.connectMesg({headBtnAreaCode:"card_head",formAreaCode:b.card_from_id,billpkname:b.pkname,billtype:b.billType,dataSource:b.dataSource}),i.default.createElement("div",{className:"header-button-area"},this.props.button.createErrorFlag({headBtnAreaCode:"card_head"}),C({area:"card_head",onButtonClick:u.buttonClick.bind(this)})),i.default.createElement("div",{className:"header-cardPagination-area",style:{float:"right"}},I({handlePageInfoChange:u.pageInfoClick.bind(this),dataSource:b.dataSource})))),i.default.createElement(P,{name:"forminfo"},i.default.createElement("div",{className:"nc-bill-form-area"},v(this.formId,{expandArr:[this.formId,b.card_from_delivermsg_id,b.card_from_exchangegathermsg_id],onAfterEvent:u.afterEvent.bind(this),onBeforeEvent:c.default.bind(this)})))),i.default.createElement("div",{className:"nc-bill-bottom-area"},i.default.createElement(P,{name:"businfo"},i.default.createElement("div",{className:"nc-bill-table-area"},k(this.tableId1,{tableHead:this.getTableHead.bind(this,d,this.tableId1),modelSave:function(){e.saveBill(),e.props.cardTable.closeModel(e.tableId1)},onAfterEvent:u.afterEvent.bind(this),onBeforeEvent:c.default.bind(this),onSelected:y.setCardShouderBtnUseful.bind(this),onSelectedAll:y.setCardShouderBtnUseful.bind(this),showCheck:!0,showIndex:!0,modelAddRow:f.modelAddLineProcess.bind(this),modelDelRowBefore:f.modelDelLineProcess.bind(this),modelDelRow:f.modelDelLineAfterProcess.bind(this),hideAdd:H,hideDel:H}))),i.default.createElement(P,{name:"detail"},i.default.createElement("div",{className:"nc-bill-table-area",style:{borderRadius:"0 0 4px 4px"}},k(this.tableId2,{tableHead:this.getTableHead2.bind(this,d,this.tableId2),modelSave:function(){e.saveBill(),e.props.cardTable.closeModel(e.tableId2)},onAfterEvent:u.afterEvent.bind(this),onBeforeEvent:c.default.bind(this),onSelected:y.setCardShouderBtnUseful.bind(this),onSelectedAll:y.setCardShouderBtnUseful.bind(this),showCheck:!0,showIndex:!0,modelAddRow:f.modelAddLineProcess.bind(this),modelDelRowBefore:f.modelDelLineProcess.bind(this),modelDelRow:f.modelDelLineAfterProcess.bind(this)})))),i.default.createElement("div",{className:"nc-faith-demo-div2"},R&&i.default.createElement(O,{billId:this.billID,target:M,placement:"bottom",billNo:this.vbillno,onHide:function(){e.setState({showUploader:!1})},customInterface:{queryLeftTree:"/nccloud/tmpub/pub/lefttreequery.do",queryAttachments:b.base_url+"gatherattachment.do"}})),i.default.createElement("div",null,i.default.createElement(j,{show:this.state.show,sourceData:this.state.sourceData,cancel:this.cancel.bind(this),affirm:this.affirm.bind(this)})),i.default.createElement("div",null,G&&i.default.createElement(m.InnerAccoutDialog,{id:"dialog",showModal:G,accpk:this.state.currentpk,closeModal:function(){e.setState({accModalShow:!1,currAccid:""}),G=!1}})),i.default.createElement("div",null,Q&&i.default.createElement(L,{title:(0,w.loadMultiLang)(this.props,"36300-000015"),data:K,display:Q,getResult:function(t){var a={};t&&(a.content=JSON.stringify(t)),e.setState({assignShow:!1,assignData:null});var r={};r[b.card_table1_id]="pk_gatheringfinance",r[b.card_table2_id]="pk_gatheringfund",(0,h.cardOperator)(e.props,b.card_page_id,b.card_from_id,r,b.pkname,b.base_url+"gatheringcommit.do",e.state.json["36300TG-000005"],b.dataSource,e.toggleShow.bind(e),!0,a)},cancel:function(){e.setState({assignShow:!1,assignData:null})},hideNote:!1})),i.default.createElement("div",null,i.default.createElement(j,{show:V,sourceData:N,cancel:function(){e.setState({showNtbDetail:!1})},affirm:function(){e.setState({showNtbDetail:!1})}})),i.default.createElement("div",null,E&&i.default.createElement(x,{show:E,billtype:U,billid:this.billID,close:function(){e.setState({showApproveDetail:!1})}})),i.default.createElement(g.default,{showmodal:this.state.showOriginal,showOriginalData:this.state.showOriginalData,onSureClick:function(t){e.setState({showOriginal:!1})},onCloseClick:function(){e.setState({showOriginal:!1})}}),T("MessageDlg",{size:"lg",content:""}),i.default.createElement("div",null,i.default.createElement(_.default,{title:this.state.json["36300TG-000042"],label:this.state.json["36300TG-000043"],show:q,onOk:function(t){e.backConfirm.call(t)},onClose:function(){e.setState({showModal:!1})}})))}}]),t}(l.Component),o=function(){var e=this;this.queryData=function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r={pk:e.props.getUrlParam("id"),ts:e.props.getUrlParam("ts"),pageCode:e.pageId},o=e.props.getUrlParam("src"),n=e,l=b.base_url+t;o&&"fbm_relation"==o&&!a&&(l=b.base_url+"associatefbm.do",n.props.setUrlParam({status:"add"}),e.iscustomerinput=!1),(0,s.ajax)({url:l,data:r,success:function(t){if(t.data){if(a&&(0,s.toast)({color:"success",content:e.state.json["36300TG-000104"]}),t.data.head){n.props.form.setAllFormValue(T({},e.formId,t.data.head[e.formId])),n.vbillno=t.data.head[e.formId].rows[0].values.vbillno.value;var r=n.props.form.getFormItemsValue(b.card_from_id,"vsourcebustype").value,o=n.props.form.getFormItemsValue(b.card_from_id,"pk_org").value,l=n.props.form.getFormItemsValue(b.card_from_id,"pk_transactorg").value,i=n.props.form.getFormItemsValue(b.card_from_id,"pk_fundgetorg").value,u={};"deal"==n.props.getUrlParam("status")?(u.pk_org=!0,"billpayawoke"==r&&(u.isreversebustype=!0,u.pk_currtype=!0,u.totalamount=!0,u.pk_fundgetorg=!1,u.pk_transactorg=!0),l==o&&i==o||(u.pk_clearoutaccount=!1,u.pk_clearoutplan=!1,u.pk_clearinplan=!1),n.props.form.setFormItemsDisabled(b.card_from_id,u)):"edit"==n.props.getUrlParam("status")&&(l==o&&i==o||(u.pk_clearoutaccount=!1,u.pk_clearoutplan=!1,u.pk_clearinplan=!1),y.setCardShouderBtnUseful.call(e,e.props,e.tableId1),y.setCardShouderBtnUseful.call(e,e.props,e.tableId2),n.props.form.setFormItemsDisabled(b.card_from_id,u))}t.data.bodys&&(I.customerResetDisplayFormQuery.call(e,e.props,t.data.bodys[e.tableId1]),(0,I.fbmbillnoAfterEdit)(n.props,null,t.data.bodys[n.tableId2])),n.toggleShow()}else{var d;(0,s.toast)({color:"warning",content:e.state.json["36300TG-000101"]}),n.vbillno="",n.billID="",n.props.form.EmptyAllFormValue(e.formId),n.props.cardTable.setMulTablesData((T(d={},e.tableId1,{rows:[]}),T(d,e.tableId2,{rows:[]}),d))}n.toggleShow()}})},this.copyBill=function(){var t={pk:e.props.getUrlParam("id"),pageCode:e.pageId},a=e;(0,s.ajax)({url:b.base_url+"gatheringcopy.do",data:t,success:function(t){if(t.data){"isallow"==t.data.userjson?(e.isallowflag=!0,(0,d.customerAllowInputProcess)(e.props,b.card_table1_id,!0)):((0,d.customerAllowInputProcess)(e.props,b.card_table1_id,!1),e.isallowflag=!1),t.data.head&&(a.props.form.setAllFormValue(T({},e.formId,t.data.head[e.formId])),a.props.form.setFormItemsDisabled(b.card_from_id,{pk_org:!0}),a.vbillno=t.data.head[e.formId].rows[0].values.vbillno.value),t.data.bodys&&(I.customerResetDisplayFormQuery.call(e,e.props,t.data.bodys[e.tableId1]),(0,I.fbmbillnoAfterEdit)(a.props,null,t.data.bodys[a.tableId2])),y.setCardShouderBtnUseful.call(a,a.props,e.tableId1),y.setCardShouderBtnUseful.call(a,a.props,e.tableId2),e.props.resMetaAfterPkorgEdit();var r=e.props.form.getFormItemsValue(b.card_from_id,"pk_org").value,o=e.props.form.getFormItemsValue(b.card_from_id,"pk_transactorg").value,n=e.props.form.getFormItemsValue(b.card_from_id,"pk_fundgetorg").value,l={pk_org:!0};o==r&&n==r||(l.pk_clearoutaccount=!1,l.pk_clearoutplan=!1,l.pk_clearinplan=!1),e.props.form.setFormItemsDisabled(b.card_from_id,l)}else{var i;a.props.form.EmptyAllFormValue(e.formId),a.props.cardTable.setMulTablesData((T(i={},e.tableId1,{rows:[]}),T(i,e.tableId2,{rows:[]}),i))}e.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!1,showBillCode:!1}),a.toggleShow()}})},this.toggleShow=function(){var t=e.props.getUrlParam("status");"deal"==t||"edit"==t||"add"==t?e.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!1,showBillCode:!1}):(e.props.form.setFormItemsVisible(e.formId,{pk_clearoutaccount:!0,pk_clearoutbankaccount:!1}),e.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!0,showBillCode:!0,billCode:e.vbillno})),p.buttonVisible.call(e,e.props),v.orgVersionView.call(e,e.props,e.formId),y.clearOutAccountView.call(e,e.props,e.formId),(0,w.showErrBtn)(e.props,{headBtnCode:"card_head",headAreaCode:b.card_from_id,fieldPK:b.pk,datasource:b.dataSource})},this.editBill=function(t){var a={},r=e.props.getUrlParam("id");t||(t=e.props.form.getFormItemsValue(e.formId,"ts").value);var o=b.card_page_id;a[r]=t,(0,s.ajax)({url:b.base_url+"gatheringedit.do",data:{pkMapTs:a,pageCode:o,pk:r,ts:t},success:function(t){if(t){"isallow"==t.data.userjson?(e.isallowflag=!0,(0,d.customerAllowInputProcess)(e.props,b.card_table1_id,!0)):((0,d.customerAllowInputProcess)(e.props,b.card_table1_id,!1),e.isallowflag=!1),e.props.setUrlParam({status:"edit",from:"card",id:e.props.getUrlParam("id")});var a=t.data.head;e.props.form.setAllFormValue(T({},b.card_from_id,a[b.card_from_id])),t.data.bodys&&(I.customerResetDisplayFormQuery.call(e,e.props,t.data.bodys[e.tableId1]),(0,I.fbmbillnoAfterEdit)(e.props,null,t.data.bodys[e.tableId2])),y.setCardShouderBtnUseful.call(e,e.props,e.tableId1),y.setCardShouderBtnUseful.call(e,e.props,e.tableId2),e.props.initMetaByPkorg(),e.props.resMetaAfterPkorgEdit();var r=e.props.form.getFormItemsValue(b.card_from_id,"pk_org").value,o=e.props.form.getFormItemsValue(b.card_from_id,"pk_transactorg").value,n=e.props.form.getFormItemsValue(b.card_from_id,"pk_fundgetorg").value,l={pk_org:!0};o==r&&n==r||(l.pk_clearoutaccount=!1,l.pk_clearoutplan=!1,l.pk_clearinplan=!1),e.props.form.setFormItemsDisabled(b.card_from_id,l),e.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!1,showBillCode:!1}),e.toggleShow()}}})},this.decideBill=function(){var t={},a=e.props.getUrlParam("id"),r=e.props.form.getFormItemsValue(e.formId,"ts").value,o=b.card_page_id,n=e;t[a]=r,(0,s.ajax)({url:b.base_url+"gatheringdecide.do",data:{pkMapTs:t,pageCode:o,pk:a,ts:r},success:function(t){if(t){if("isallow"==t.data.userjson?(e.isallowflag=!0,(0,d.customerAllowInputProcess)(e.props,b.card_table1_id,!0)):((0,d.customerAllowInputProcess)(e.props,b.card_table1_id,!1),e.isallowflag=!1),e.props.pushTo("/card",{status:"deal",actionName:"deal",from:"card",id:e.props.getUrlParam("id")}),"deal"==n.props.getUrlParam("status")){var a=n.props.form.getFormItemsValue(b.card_from_id,"vsourcebustype").value,r=n.props.form.getFormItemsValue(b.card_from_id,"pk_org").value,o=n.props.form.getFormItemsValue(b.card_from_id,"pk_transactorg").value,l=n.props.form.getFormItemsValue(b.card_from_id,"pk_fundgetorg").value,i={pk_org:!0};"billpayawoke"==a&&(i.isreversebustype=!0,i.pk_currtype=!0,i.totalamount=!0,i.pk_fundgetorg=!1,i.pk_transactorg=!0),o==r&&l==r||(i.pk_clearoutplan=!1,i.pk_clearinplan=!1),"billhand"!=a&&(i.pk_gathercurr=!0,i.pk_currtype=!0),n.props.form.setFormItemsDisabled(b.card_from_id,i)}else"edit"==n.props.getUrlParam("status")&&(pk_transactorg==pk_org&&pk_fundgetorg==pk_org||(editArry.pk_clearoutplan=!1,editArry.pk_clearinplan=!1),n.props.form.setFormItemsDisabled(b.card_from_id,editArry));e.toggleShow()}}})},this.delConfirm=function(){var t={},a=e.props.getUrlParam("id"),r=e.props.form.getFormItemsValue(e.formId,"ts").value,o=b.card_page_id;t[a]=r,(0,s.ajax)({url:b.base_url+"gatheringdelete.do",data:{pkMapTs:t,pageCode:o},success:function(t){if(t){(0,s.toast)({color:"success",content:e.state.json["36300TG-000035"]});var r,o=M(a,b.dataSource);if(E(b.pkname,a,b.dataSource),o)e.props.cardPagination.setCardPaginationId(o),u.pageInfoClick.call(e,e.props,o);else e.props.pushTo("/card",{status:"browse"}),e.vbillno="",e.props.form.EmptyAllFormValue(e.formId),e.props.cardTable.setMulTablesData((T(r={},e.tableId1,{rows:[]}),T(r,e.tableId2,{rows:[]}),r)),e.toggleShow()}}})},this.backConfirm=function(t){var a={},r=e.props.getUrlParam("id"),o=e.props.form.getFormItemsValue(e.formId,"ts").value;a[r]=o;var n=b.card_page_id,l={};l.backxjreason=t,(0,s.ajax)({url:b.base_url+"gatheringback.do",data:{extParam:l,pkMapTs:a,pageCode:n},success:function(t){if(t){(0,s.toast)({color:"success",content:e.state.json["36300TG-000036"]});var a,o=M(r,b.dataSource);if(E(b.pkname,r,b.dataSource),o)e.props.cardPagination.setCardPaginationId(o),u.pageInfoClick.call(e,e.props,o);else e.props.pushTo("/card",{status:"browse"}),e.vbillno="",e.props.form.EmptyAllFormValue(e.formId),e.props.cardTable.setMulTablesData((T(a={},e.tableId1,{rows:[]}),T(a,e.tableId2,{rows:[]}),a)),e.toggleShow()}}}),e.setState({showModal:!1,value:""})},this.cancelConfirm=function(){var t,a=e.props.getUrlParam("id");a||((a=e.billID)||(a=V(b.dataSource))||(e.props.form.EmptyAllFormValue(e.formId),e.props.cardTable.setMulTablesData((T(t={},e.tableId1,{rows:[]}),T(t,e.tableId2,{rows:[]}),t)),e.props.pushTo("/card",{status:"browse"})));a&&(e.props.pushTo("/card",{status:"browse",id:a}),e.queryData("gatheringcardquery.do")),e.toggleShow()},this.printFunction=function(e){var t=[],a=this.props.form.getFormItemsValue(this.formId,"pk_gathering").value,r=this.props.form.getFormItemsValue(this.formId,"pk_billtype").value;t.push(a),(0,s.print)("pdf",b.base_url+"gatheringprint.do",{oids:t,billtype:r,funcode:b.funcode,nodekey:b.print_nodekey})},this.saveBill=function(t){var a=e.props.form.isCheckNow(b.card_from_id),r=e.props.cardTable.getNumberOfRows(b.card_table1_id),o=e.props.cardTable.getNumberOfRows(b.card_table2_id);if(r<=0||o<=0)(0,s.toast)({color:"danger",content:e.state.json["36300TG-000099"]});else{var n=e.props.cardTable.checkTableRequired();if(a&&n){var l=(0,w.createSimpleBillData)(e.props,b.card_page_id,b.card_from_id,[e.tableId1,e.tableId2],!1);l=I.customerInputCleatValue.call(e,e.props,l);var i={data:JSON.stringify(l),pageCode:b.card_page_id},u=b.base_url+"gatheringsave.do";"edit"===e.props.getUrlParam("status")?u=b.base_url+"gatheringupdate.do":"deal"===e.props.getUrlParam("status")&&(u=b.base_url+"gatheringdecidesave.do"),(0,s.ajax)({url:u,data:i,success:function(a){var r=null;if(a.success&&a.data){var o=a.data,n=(o.head,o.bodys);if(a.data.head&&a.data.head[e.formId]){e.props.form.setAllFormValue(T({},e.formId,a.data.head[e.formId])),r=a.data.head[e.formId].rows[0].values.pk_gathering.value;var l=a.data.head[e.formId].rows[0].values.vbillno.value;e.vbillno=l}a.data.bodys&&a.data.bodys[e.tableId1]&&a.data.bodys[e.tableId1].rows[0]&&a.data.bodys[e.tableId1].rows[0].rowid?n[e.tableId1]=e.props.cardTable.updateDataByRowId(e.tableId1,a.data.bodys[e.tableId1]):e.props.cardTable.setTableData(e.tableId1,a.data.bodys[e.tableId1]);var i=!!(a.data.bodys&&a.data.bodys[e.tableId2]&&a.data.bodys[e.tableId2].rows[0]&&a.data.bodys[e.tableId2].rows[0].rowid);i?n[e.tableId2]=(0,I.fbmbillnoAfterEdit)(e.props,null,a.data.bodys[e.tableId2],i):(0,I.fbmbillnoAfterEdit)(e.props,null,a.data.bodys[e.tableId2],i),n=I.customerResetDisplayFormSave.call(e,e.props,n),r&&(a.data.bodys=n,"edit"===e.props.getUrlParam("status")||"deal"===e.props.getUrlParam("status")?R(b.pkname,r,a.data,e.formId,b.dataSource):F(r,a.data,e.formId,b.dataSource))}e.props.setUrlParam({status:"browse",id:r}),(0,s.toast)({color:"success",content:e.state.json["36300TG-000037"]}),e.toggleShow(),t&&"function"==typeof t&&t()}})}}},this.saveAndAdd=function(){var t=e.props.form.isCheckNow(b.card_from_id),a=e.props.cardTable.getNumberOfRows(b.card_table1_id),r=e.props.cardTable.getNumberOfRows(b.card_table2_id);if(a<=0||r<=0)(0,s.toast)({color:"danger",content:e.state.json["36300TG-000099"]});else{var o=e.props.cardTable.checkTableRequired();if(t&&o){var n=(0,w.createSimpleBillData)(e.props,b.card_page_id,b.card_from_id,[e.tableId1,e.tableId2],!1);n=I.customerInputCleatValue.call(e,e.props,n);var l=b.card_page_id,i={data:JSON.stringify(n),pageCode:l};console.log("CardData",n);var d=b.base_url+"gatheringsave.do";"edit"===e.props.getUrlParam("status")?d=b.base_url+"gatheringupdate.do":"deal"===e.props.getUrlParam("status")&&(d=b.base_url+"gatheringdecidesave.do"),(0,s.ajax)({url:d,data:i,success:function(t){var a=null,r=null;if(t.success&&t.data){var o,n=t.data,l=(n.head,n.bodys);if(t.data.head&&t.data.head[e.formId]){a=t.data.head[e.formId].rows[0].values.pk_gathering.value,r=t.data.head[e.formId].rows[0].values.pk_org,t.data.bodys&&t.data.bodys[e.tableId1]&&t.data.bodys[e.tableId1].rows[0]&&t.data.bodys[e.tableId1].rows[0].rowid?l[e.tableId1]=e.props.cardTable.updateDataByRowId(e.tableId1,t.data.bodys[e.tableId1]):e.props.cardTable.setTableData(e.tableId1,t.data.bodys[e.tableId1]);var i=t.data.bodys&&t.data.bodys[e.tableId2]&&t.data.bodys[e.tableId2].rows[0]&&t.data.bodys[e.tableId2].rows[0].rowid;i?l[e.tableId2]=(0,I.fbmbillnoAfterEdit)(e.props,null,t.data.bodys[e.tableId2],i):(0,I.fbmbillnoAfterEdit)(e.props,null,t.data.bodys[e.tableId2],i),l=I.customerResetDisplayFormSave.call(e,e.props,l),a&&(t.data.bodys=l,"edit"===e.props.getUrlParam("status")||"deal"===e.props.getUrlParam("status")?R(b.pkname,a,t.data,b.card_from_id,b.dataSource):F(a,t.data,e.formId,b.dataSource))}e.props.setUrlParam({status:"add",id:a,from:"card"}),(0,s.toast)({color:"success",content:e.state.json["36300TG-000037"]}),e.props.form.EmptyAllFormValue(e.formId),e.props.cardTable.setMulTablesData((T(o={},e.tableId1,{rows:[]}),T(o,e.tableId2,{rows:[]}),o)),e.props.form.setFormItemsValue(b.card_from_id,{pk_org:{value:r.value,display:r.display}}),e.props.initMetaByPkorg(),e.props.resMetaAfterPkorgEdit(),u.afterEvent.call(e,e.props,b.card_from_id,"pk_org",r),e.toggleShow()}}})}}},this.saveAndCommitBill=function(){var t=e.props.form.isCheckNow(b.card_from_id),a=e.props.cardTable.getNumberOfRows(b.card_table1_id),r=e.props.cardTable.getNumberOfRows(b.card_table2_id);if(a<=0||r<=0)(0,s.toast)({color:"danger",content:e.state.json["36300TG-000099"]});else{var o=e.props.cardTable.checkTableRequired();if(t&&o){var n=(0,w.createSimpleBillData)(e.props,b.card_page_id,b.card_from_id,[e.tableId1,e.tableId2],!1);n=I.customerInputCleatValue.call(e,e.props,n);var l=b.card_page_id,i={data:JSON.stringify(n),pageCode:l};console.log("CardData",n);var u=b.base_url+"gatheringsavecommit.do";"edit"===e.props.getUrlParam("status")&&(u=b.base_url+"gatheringupdatecommit.do"),(0,s.ajax)({url:u,data:i,success:function(t){var a=null;if(t.success&&t.data){var r=t.data,o=(r.head,r.bodys);if(t.data.head&&t.data.head[e.formId]){e.props.form.setAllFormValue(T({},e.formId,t.data.head[e.formId])),a=t.data.head[e.formId].rows[0].values.pk_gathering.value;var n=t.data.head[e.formId].rows[0].values.vbillno.value;e.vbillno=n,t.data.bodys&&t.data.bodys[e.tableId1]&&t.data.bodys[e.tableId1].rows[0]&&t.data.bodys[e.tableId1].rows[0].rowid?o[e.tableId1]=e.props.cardTable.updateDataByRowId(e.tableId1,t.data.bodys[e.tableId1]):e.props.cardTable.setTableData(e.tableId1,t.data.bodys[e.tableId1]);var l=t.data.bodys&&t.data.bodys[e.tableId2]&&t.data.bodys[e.tableId2].rows[0]&&t.data.bodys[e.tableId2].rows[0].rowid;l?o[e.tableId2]=(0,I.fbmbillnoAfterEdit)(e.props,null,t.data.bodys[e.tableId2],l):(0,I.fbmbillnoAfterEdit)(e.props,null,t.data.bodys[e.tableId2],l),o=I.customerResetDisplayFormSave.call(e,e.props,o),a&&(t.data.bodys=o,"edit"===e.props.getUrlParam("status")||"deal"===e.props.getUrlParam("status")?R(b.pkname,a,t.data,b.card_from_id,b.dataSource):F(a,t.data,e.formId,b.dataSource))}if(a){var i={};i.id=a,u===b.base_url+"gatheringsavecommit.do"&&(i.status=2),e.props.cardPagination.setCardPaginationId(i)}}e.props.setUrlParam({status:"browse",id:a}),(0,s.toast)({color:"success",content:e.state.json["36300TG-000037"]}),e.toggleShow()}})}}},this.onChange=function(t){e.setState({value:t})},this.getButtonNames=function(e){return"edit"===e||"add"===e||"save"===e?"main-button":"secondary - button"},this.getTableHead=function(t,a){var r=e.props.button,o=(r.createButton,r.createButtonApp);return i.default.createElement("div",{className:"shoulder-definition-area"},i.default.createElement("div",{className:"definition-icons"},e.props.cardTable.createBrowseIcons(a,{iconArr:[],maxDestAreaId:"finance-fts-commissiongathering-card"}),o({area:"card_body",onButtonClick:function(t,r){return u.buttonClick.call(e,t,r,a)}})))},this.getTableHead2=function(t,a){var r=e.props.button,o=(r.createButton,r.createButtonApp);return i.default.createElement("div",{className:"shoulder-definition-area"},i.default.createElement("div",{className:"definition-icons"},e.props.cardTable.createBrowseIcons(a,{iconArr:[],maxDestAreaId:"finance-fts-commissiongathering-card"}),o({area:"card_body2",onButtonClick:function(t,r){return u.buttonClick.call(e,t,r,a)}})))}},r);N=(0,s.createPage)({billinfo:{billtype:"extcard",pagecode:b.card_page_id,headcode:b.card_from_id,bodycode:[b.card_table1_id,b.card_table2_id]},orderOfHotKey:[b.card_from_id,b.card_table1_id,b.card_table2_id]})(N),t.default=N},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DelFinanceLine=t.copyFundLine=t.bodyButtonClick=void 0;var r=a(0),o=a(11),n=a(5),l=a(71),i=a(70),s=(r.base.NCPopconfirm,r.base.NCIcon,t.bodyButtonClick=function(e,t,a,r,i,f){var b=this;switch(t){case"Open":(0,n.Open)(e,f,i,r,"edit");break;case"CopyThisLine":case"CopyThisLine2":f==o.card_table1_id?d.call(this,e,f,i,r):c.call(this,e,f,i,r);break;case"InsertLine":case"InsertLine2":l.addLineProcess.call(this,e,f,i);break;case"DeleteLine_i":case"DeleteLine_i2":f==o.card_table1_id?p.call(this,e,f,i,r):u.call(this,e,f,i,r);break;case"CopyAtLine":case"CopyAtLine2":f==o.card_table1_id?l.BatchCopyGatherLine.call(this,e,f,i):s.call(this,e,f,i,r),f==o.card_table1_id?this.setState({copyflag1:!1},(function(){b.toggleShow()})):f==o.card_table2_id&&this.setState({copyflag2:!1},(function(){b.toggleShow()}));break;case"OpenDown":case"CloseDown":e.cardTable.toggleRowView(f,r)}},function(e,t,a,r){l.BatchCopyFund.call(this,e,t,a);var n=this.props.form.getFormItemsValue(o.card_from_id,"totalamount");i.afterEvent.call(this,this.props,o.card_from_id,"bodyevent",n,null,null,null,null,!0)}),u=function(e,t,a,r){(0,n.DelLine)(e,t,a,r);var l=this.props.form.getFormItemsValue(o.card_from_id,"totalamount");i.afterEvent.call(this,this.props,o.card_from_id,"bodyevent",l,null,null,null,null,!0)},d=function(e,t,a,r){var n=(0,l.getNextRelationNum)(e),s=e.form.getFormItemsValue(o.card_from_id,"isautorelation").value,u=[],d=JSON.parse(JSON.stringify(r));if(d.selected=!1,u.push(d.values.rowno.value),d.values.rowno={value:n.toString(),display:n.toString()},d.values.pseudocolumn={value:null,display:null},d.values.relationindex={value:n.toString(),display:n.toString()},d.values.pk_gatheringfinance={value:null,display:null},[].push(n.toString()),e.cardTable.insertRowsAfterIndex(t,d,a),s){var c=(0,l.queryRelationIndexs)(e,u),p=e.cardTable.getRowsByIndexs(o.card_table2_id,c),f=JSON.parse(JSON.stringify(p))[0];f.values.relationindex={value:n.toString(),display:n.toString()},f.values.rowno={value:n.toString(),display:n.toString()},f.values.pk_gatheringfund={value:null,display:null},f.values.pseudocolumn={value:null,display:null};var b=c[0];e.cardTable.insertRowsAfterIndex(o.card_table2_id,f,b);var m=this.props.form.getFormItemsValue(o.card_from_id,"totalamount");i.afterEvent.call(this,this.props,o.card_from_id,"bodyevent",m,null,null,null,null,!0)}},c=t.copyFundLine=function(e,t,a,r){var n=JSON.parse(JSON.stringify(r));n.selected=!1,n.values.relationindex={value:null,display:null},n.values.pk_gatheringfund={value:null,display:null},n.values.pseudocolumn={value:null,display:null},e.cardTable.insertRowsAfterIndex(t,n,a);var l=this.props.form.getFormItemsValue(o.card_from_id,"totalamount");i.afterEvent.call(this,this.props,o.card_from_id,"bodyevent",l,null,null,null,null,!0)},p=t.DelFinanceLine=function(e,t,a,r){var n=[];n.push(r.values.rowno.value),e.cardTable.delRowsByIndex(t,a);var s=(0,l.queryRelationIndexs)(e,n);s&&s.length>0&&e.cardTable.delRowsByIndex(o.card_table2_id,s);var u=this.props.form.getFormItemsValue(o.card_from_id,"totalamount");return i.afterEvent.call(this,this.props,o.card_from_id,"bodyevent",u,null,null,null,null,!0),!0}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=this;console.log(t);var i=o.cardCache.getCacheById,s=o.cardCache.updateCache;e.setUrlParam(t);var u=i(t,r.dataSource);if(u)this.props.form.setAllFormValue(l({},this.formId,u.head[this.formId])),n.customerResetDisplayFormQuery.call(this,this.props,u.bodys[this.tableId1]),(0,n.fbmbillnoAfterEdit)(this.props,null,u.bodys[this.tableId2]),this.vbillno=u.head[this.formId].rows[0].values.vbillno.value,this.toggleShow();else{var d={pk:t,pageCode:r.card_page_id};(0,o.ajax)({url:r.base_url+"gatheringcardquery.do",data:d,success:function(o){o.data?(o.data.head&&(a.props.form.setAllFormValue(l({},a.formId,o.data.head[a.formId])),a.vbillno=o.data.head[a.formId].rows[0].values.vbillno.value),o.data.bodys&&(n.customerResetDisplayFormQuery.call(a,a.props,o.data.bodys[a.tableId1]),a.props.cardTable.setTableData(a.tableId1,o.data.bodys[a.tableId1]),(0,n.fbmbillnoAfterEdit)(a.props,null,o.data.bodys[a.tableId2])),s(r.pkname,t,a.formId,r.dataSource),e.setUrlParam(t),a.toggleShow()):(a.props.form.EmptyAllFormValue(a.formId),a.props.cardTable.setTableData(a.tableId1,{rows:[]}),a.props.cardTable.setTableData(a.tableId2,{rows:[]}),a.toggleShow())}})}};var r=a(11),o=a(0),n=a(76);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,n=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(3),i=k(l),s=(k(a(4)),a(0)),u=a(124),d=k(a(128)),c=a(78),p=a(11),f=a(46),b=k(a(24)),m=k(a(23)),g=a(59),_=a(10),h=a(33),v=a(1),y=a(6);function k(e){return e&&e.__esModule?e:{default:e}}function w(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}s.base.NCFormControl;var I=s.base.NCAnchor,C=s.base.NCScrollLink,T=s.base.NCScrollElement,S=s.base.NCAffix,B=(s.base.NCBackBtn,s.base.NCDiv),P=s.high.NCUploader,A=s.high.ApproveDetail,D=s.high.Inspection,O=s.cardCache.addCache,x=s.cardCache.updateCache,j=s.cardCache.getNextId,L=s.cardCache.deleteCacheById,F=s.cardCache.getCurrentLastId,R=s.cardCache.getCacheById,M=(r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.call(a),a.formId=p.card_from_id,a.searchId=p.list_search_id,a.moduleId=p.module_id,a.tableId1=p.card_table1_id,a.tableId2=p.card_table2_id,a.pageId=p.card_linkpage_id,a.state={show:!1,sourceData:null,vbillno:"",copyflag1:!1,copyflag2:!1,accModalShow1:!1,currentpk:null,maxIndex:0,showApproveDetail:!1,billID:"",showOriginal:!1,showOriginalData:[],value:"",showNtbDetail:!1,ntbdata:null,showModal:!1,billtype:"",json:{},inlt:null},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"componentDidMount",value:function(){this.props.getUrlParam("id");var e=this.props.getUrlParam("status");this.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!1,showBillCode:!1}),"add"!=e&&"copy"!=e?this.queryData("gatheringcardquery.do"):"copy"==e?this.copyBill():(this.props.initMetaByPkorg(),this.props.resMetaAfterPkorgEdit(),this.props.form.setFormItemsDisabled(p.card_from_id,{pk_org:!0}),this.toggleShow())}},{key:"componentWillMount",value:function(){var e,t=this;(0,s.getMultiLang)({moduleId:(e={},w(e,y.module_tmpub_name,[y.module_tmpub_id]),w(e,y.module_name,[p.module_id,p.funcode]),e),callback:function(e,a,r){a?((0,v.saveMultiLangRes)(t.props,e),u.initTemplate.call(t,t.props,e,r),t.setState({json:e,inlt:r})):console.log("未加载到多语资源")}}),window.onbeforeunload=function(){if("browse"!=t.props.getUrlParam("status"))return t.state.json["36300TG-000034"]}}},{key:"handleClick",value:function(){this.props.pushTo("/linklist",{status:"browse"})}},{key:"cancel",value:function(){this.setState({show:!1})}},{key:"affirm",value:function(e){console.log(e),this.setState({show:!1})}},{key:"click",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,a=t.cardTable,r=t.form,o=t.button,n=t.modal,l=t.cardPagination,s=t.socket,c=this.props.button.getButtons(),g=r.createForm,_=a.createCardTable,v=l.createCardPagination,y=(o.createButton,o.createButtonApp),k=n.createModal,w=this.state,O=w.showUploader,x=w.target,j=w.vbillno,L=w.billID,F=w.showApproveDetail,R=w.showNtbDetail,M=w.ntbdata,E=w.accModalShow,V=w.billtype,N=w.showModal,G=(this.props.getUrlParam("status"),this.props.BillHeadInfo.createBillHeadInfo);return i.default.createElement("div",{className:"nc-bill-extCard"},i.default.createElement(I,null,i.default.createElement(C,{to:"forminfo",spy:!0,smooth:!0,duration:300,offset:-100},i.default.createElement("p",null,this.state.json["36300TG-000044"])),i.default.createElement(C,{to:"businfo",spy:!0,smooth:!0,duration:300,offset:-100},i.default.createElement("p",null,this.state.json["36300TG-000045"])),i.default.createElement(C,{to:"detail",spy:!0,smooth:!0,duration:300,offset:-50},i.default.createElement("p",null,this.state.json["36300TG-000046"]))),i.default.createElement("div",{className:"nc-bill-top-area"},i.default.createElement(S,null,i.default.createElement(B,{areaCode:B.config.HEADER,className:"nc-bill-header-area"},i.default.createElement("div",{className:"header-title-search-area"},G({title:this.state.json["36300TG-000038"]+" ",billCode:j,backBtnClick:function(){e.handleClick()}})),s.connectMesg({headBtnAreaCode:"card_head",formAreaCode:p.card_from_id,billpkname:p.pkname,billtype:p.billType,dataSource:p.dataSource}),i.default.createElement("div",{className:"header-button-area"},this.props.button.createErrorFlag({headBtnAreaCode:"card_head"}),y({area:"card_head",onButtonClick:u.buttonClick.bind(this)})),i.default.createElement("div",{className:"header-cardPagination-area",style:{float:"right"}},v({handlePageInfoChange:u.pageInfoClick.bind(this),dataSource:p.dataSource})))),i.default.createElement(T,{name:"forminfo"},i.default.createElement("div",{className:"nc-bill-form-area"},g(this.formId,{expandArr:[this.formId,p.card_from_delivermsg_id,p.card_from_exchangegathermsg_id],onAfterEvent:u.afterEvent.bind(this),onBeforeEvent:d.default.bind(this)})))),i.default.createElement("div",{className:"nc-bill-bottom-area"},i.default.createElement(T,{name:"businfo"},i.default.createElement("div",{className:"nc-bill-table-area"},_(this.tableId1,{tableHead:this.getTableHead.bind(this,c,this.tableId1),modelSave:this.saveBill,onAfterEvent:u.afterEvent.bind(this),onBeforeEvent:d.default.bind(this),onSelected:h.setCardShouderBtnUseful.bind(this),onSelectedAll:h.setCardShouderBtnUseful.bind(this),showCheck:!0,showIndex:!0}))),i.default.createElement(T,{name:"detail"},i.default.createElement("div",{className:"nc-bill-table-area",style:{borderRadius:"0 0 4px 4px"}},_(this.tableId2,{tableHead:this.getTableHead2.bind(this,c,this.tableId2),modelSave:this.saveBill,onAfterEvent:u.afterEvent.bind(this),onBeforeEvent:d.default.bind(this),onSelected:h.setCardShouderBtnUseful.bind(this),onSelectedAll:h.setCardShouderBtnUseful.bind(this),showCheck:!0,showIndex:!0})))),i.default.createElement("div",{className:"nc-faith-demo-div2"},O&&i.default.createElement(P,{billId:L,target:x,placement:"bottom",billNo:j,onHide:function(){e.setState({showUploader:!1})},customInterface:{queryLeftTree:"/nccloud/tmpub/pub/lefttreequery.do",queryAttachments:p.base_url+"gatherattachment.do"}})),i.default.createElement("div",null,i.default.createElement(D,{show:this.state.show,sourceData:this.state.sourceData,cancel:this.cancel.bind(this),affirm:this.affirm.bind(this)})),i.default.createElement("div",null,E&&i.default.createElement(f.InnerAccoutDialog,{id:"dialog",showModal:E,accpk:this.state.currentpk,closeModal:function(){e.setState({accModalShow:!1,currAccid:""}),E=!1}})),i.default.createElement("div",null,i.default.createElement(D,{show:R,sourceData:M,cancel:function(){e.setState({showNtbDetail:!1})},affirm:function(){e.setState({showNtbDetail:!1})}})),i.default.createElement("div",null,F&&i.default.createElement(A,{show:F,billtype:V,billid:L,close:function(){e.setState({showApproveDetail:!1})}})),i.default.createElement(b.default,{showmodal:this.state.showOriginal,showOriginalData:this.state.showOriginalData,onSureClick:function(t){e.setState({showOriginal:!1})},onCloseClick:function(){e.setState({showOriginal:!1})}}),k("MessageDlg",{size:"lg",content:""}),i.default.createElement("div",null,i.default.createElement(m.default,{title:this.state.json["36300TG-000042"],label:this.state.json["36300TG-000043"],show:N,onOk:function(t){e.backConfirm.call(t)},onClose:function(){e.setState({showModal:!1})}})))}}]),t}(l.Component),o=function(){var e=this;this.queryData=function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.props.getUrlParam("id"),o={pk:r,pageCode:e.pageId},n=e.props.getUrlParam("scene"),l=(e.props.getUrlParam("src"),e),i=p.base_url+t;(0,s.ajax)({url:i,data:o,success:function(t){var o;t.data?(a?(0,s.toast)({color:"success",content:e.state.json["36300TG-000104"]}):s.cardCache.setDefData(p.cache.iserrtoast,p.dataSource,!0),t.data.head&&(l.props.form.setAllFormValue(w({},e.formId,t.data.head[e.formId])),l.state.vbillno=t.data.head[e.formId].rows[0].values.vbillno.value),t.data.bodys&&(l.props.cardTable.setTableData(l.tableId1,t.data.bodys[l.tableId1]),l.props.cardTable.setTableData(l.tableId2,t.data.bodys[l.tableId2])),n&&(R(r,p.dataSource)?x(p.pkname,r,t.data,e.formId,p.dataSource):O(r,t.data,e.formId,p.dataSource))):(l.props.form.EmptyAllFormValue(e.formId),l.props.cardTable.setMulTablesData((w(o={},e.tableId1,{rows:[]}),w(o,e.tableId2,{rows:[]}),o)));l.toggleShow()}})},this.copyBill=function(){var t={pk:e.props.getUrlParam("id"),pageCode:e.pageId},a=e;(0,s.ajax)({url:p.base_url+"gatheringcopy.do",data:t,success:function(t){var r;t.data?(t.data.head&&(a.props.form.setAllFormValue(w({},e.formId,t.data.head[e.formId])),a.props.form.setFormItemsDisabled(p.card_from_id,{pk_org:!0}),a.state.vbillno=t.data.head[e.formId].rows[0].values.vbillno.value),t.data.bodys&&(a.props.cardTable.setTableData(a.tableId1,t.data.bodys[a.tableId1]),a.props.cardTable.setTableData(a.tableId2,t.data.bodys[a.tableId2])),e.props.resMetaAfterPkorgEdit(),a.toggleShow()):(a.props.form.EmptyAllFormValue(e.formId),a.props.cardTable.setMulTablesData((w(r={},e.tableId1,{rows:[]}),w(r,e.tableId2,{rows:[]}),r)))}})},this.toggleShow=function(){var t=e.props.getUrlParam("status"),a=e.props.getUrlParam("scene");"browse"==t?(e.props.form.setFormItemsVisible(e.formId,{pk_clearoutaccount:!0,pk_clearoutbankaccount:!1}),e.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!a,showBillCode:!0,billCode:e.state.vbillno})):e.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!1,showBillCode:!0,billCode:e.state.vbillno}),c.buttonVisible.call(e,e.props),_.orgVersionView.call(e,e.props,e.formId),(0,v.showErrBtn)(e.props,{headBtnCode:"card_head",headAreaCode:p.card_from_id,fieldPK:p.pk,datasource:p.dataSource})},this.editBill=function(){var t={},a=e.props.getUrlParam("id"),r=e.props.form.getFormItemsValue(e.formId,"ts").value,o=p.card_linkpage_id;t[a]=r,(0,s.ajax)({url:p.base_url+"gatheringedit.do",data:{pkMapTs:t,pageCode:o},success:function(t){if(t){e.props.pushTo("/card",{status:"edit",from:"card",id:e.props.getUrlParam("id")}),e.props.initMetaByPkorg(),e.props.resMetaAfterPkorgEdit();var a=e.props.form.getFormItemsValue(p.card_from_id,"pk_org").value,r=e.props.form.getFormItemsValue(p.card_from_id,"pk_transactorg").value,o=e.props.form.getFormItemsValue(p.card_from_id,"pk_fundgetorg").value,n={pk_org:!0};r==a&&o==a||(n.pk_clearoutaccount=!0,n.pk_clearoutplan=!0,n.pk_clearinplan=!0),e.props.form.setFormItemsDisabled(p.card_from_id,n),e.toggleShow()}}})},this.decideBill=function(){var t={},a=e.props.getUrlParam("id"),r=e.props.form.getFormItemsValue(e.formId,"ts").value,o=p.card_linkpage_id,n=e;t[a]=r,(0,s.ajax)({url:p.base_url+"gatheringdecide.do",data:{pkMapTs:t,pageCode:o},success:function(t){if(t){if(e.props.pushTo("/card",{status:"deal",from:"card",id:e.props.getUrlParam("id")}),"deal"==n.props.getUrlParam("status")){var a=n.props.form.getFormItemsValue(p.card_from_id,"vsourcebustype").value,r=n.props.form.getFormItemsValue(p.card_from_id,"pk_org").value,o=n.props.form.getFormItemsValue(p.card_from_id,"pk_transactorg").value,l=n.props.form.getFormItemsValue(p.card_from_id,"pk_fundgetorg").value,i={pk_org:!0};"billpayawoke"==a&&(i.isreversebustype=!0,i.pk_currtype=!0,i.totalamount=!0,i.pk_fundgetorg=!1,i.pk_transactorg=!0),o==r&&l==r||(i.pk_clearoutaccount=!0,i.pk_clearoutplan=!0,i.pk_clearinplan=!0),"billhand"!=a&&(i.pk_gathercurr=!0,i.pk_currtype=!0),n.props.form.setFormItemsDisabled(p.card_from_id,i)}else"edit"==n.props.getUrlParam("status")&&(pk_transactorg==pk_org&&pk_fundgetorg==pk_org||(editArry.pk_clearoutaccount=!0,editArry.pk_clearoutplan=!0,editArry.pk_clearinplan=!0),n.props.form.setFormItemsDisabled(p.card_from_id,editArry));e.toggleShow()}}})},this.delConfirm=function(){var t={},a=e.props.getUrlParam("id"),r=e.props.form.getFormItemsValue(e.formId,"ts").value,o=p.card_linkpage_id;t[a]=r,(0,s.ajax)({url:p.base_url+"gatheringdelete.do",data:{pkMapTs:t,pageCode:o},success:function(t){if(t){(0,s.toast)({color:"success",content:e.state.json["36300TG-000035"]});var r,o=j(a,p.dataSource);if(L(p.pkname,a,p.dataSource),o)e.props.cardPagination.setCardPaginationId(o),u.pageInfoClick.call(e,e.props,o);else e.props.pushTo("/card",{status:"browse"}),e.setState({vbillno:""}),e.props.form.EmptyAllFormValue(e.formId),e.props.cardTable.setMulTablesData((w(r={},e.tableId1,{rows:[]}),w(r,e.tableId2,{rows:[]}),r)),e.toggleShow()}}})},this.backConfirm=function(t){var a={},r=e.props.getUrlParam("id"),o=e.props.form.getFormItemsValue(e.formId,"ts").value;a[r]=o;var n=p.card_linkpage_id,l={};l.backxjreason=t,(0,s.ajax)({url:p.base_url+"gatheringback.do",data:{extParam:l,pkMapTs:a,pageCode:n},success:function(t){if(t){(0,s.toast)({color:"success",content:e.state.json["36300TG-000036"]});var a,o=j(r,p.dataSource);if(L(p.pkname,r,p.dataSource),o)e.props.cardPagination.setCardPaginationId(o),u.pageInfoClick.call(e,e.props,o);else e.props.pushTo("/card",{status:"browse"}),e.setState({vbillno:""}),e.props.form.EmptyAllFormValue(e.formId),e.props.cardTable.setMulTablesData((w(a={},e.tableId1,{rows:[]}),w(a,e.tableId2,{rows:[]}),a)),e.toggleShow()}}}),e.setState({showModal:!1,value:""})},this.cancelConfirm=function(){var t,a=e.props.getUrlParam("id");a||((a=e.state.billID)||(a=F(p.dataSource))||(e.props.form.EmptyAllFormValue(e.formId),e.props.cardTable.setMulTablesData((w(t={},e.tableId1,{rows:[]}),w(t,e.tableId2,{rows:[]}),t)),e.props.pushTo("/card",{status:"browse"})));a&&(e.props.pushTo("/card",{status:"browse",id:a}),e.queryData("gatheringcardquery.do")),e.toggleShow()},this.printFunction=function(e){var t=[],a=this.props.form.getFormItemsValue(this.formId,"pk_gathering").value,r=this.props.form.getFormItemsValue(this.formId,"pk_billtype").value;t.push(a),(0,s.print)("pdf",p.base_url+"gatheringprint.do",{oids:t,billtype:r,funcode:p.funcode,nodekey:p.print_nodekey})},this.saveBill=function(){e.props.getUrlParam("isCopy")&&(e.props.form.setFormItemsValue(e.formId,{crevecontid:null,pk_gathering:null}),e.props.form.setFormItemsValue(e.formId,{ts:null}));var t=e.props.createExtCardData(e.pageId,e.formId,[e.tableId1,e.tableId2]),a={data:JSON.stringify(t),pageCode:p.card_linkpage_id},r=p.base_url+"gatheringsave.do";"edit"===e.props.getUrlParam("status")?r=p.base_url+"gatheringupdate.do":"deal"===e.props.getUrlParam("status")&&(r=p.base_url+"gatheringdecidesave.do"),(0,s.ajax)({url:r,data:a,success:function(t){var a=null;if(t.success&&t.data){if((0,s.toast)({color:"success",content:e.state.json["36300TG-000037"]}),t.data.head&&t.data.head[e.formId]){(0,g.showTbbInfo)(t.data.head[e.formId]),e.props.form.setAllFormValue(w({},e.formId,t.data.head[e.formId])),a=t.data.head[e.formId].rows[0].values.pk_gathering.value;var o=t.data.head[e.formId].rows[0].values.vbillno.value;e.setState({vbillno:o}),"edit"===e.props.getUrlParam("status")||"deal"===e.props.getUrlParam("status")?x(p.pkname,a,t.data,e.formId,p.dataSource):O(a,t.data,e.formId,p.dataSource)}if(t.data.bodys&&t.data.bodys[e.tableId1]&&e.props.cardTable.updateDataByRowId(e.tableId1,t.data.bodys[e.tableId1]),t.data.bodys&&t.data.bodys[e.tableId2]&&e.props.cardTable.updateDataByRowId(e.tableId2,t.data.bodys[e.tableId2]),a){var n={};n.id=a,r===p.base_url+"gatheringsave.do"&&(n.status=2),e.props.cardPagination.setCardPaginationId(n)}}e.props.pushTo("/card",{status:"browse",id:a}),e.toggleShow()}})},this.saveAndAdd=function(){e.props.getUrlParam("isCopy")&&(e.props.form.setFormItemsValue(e.formId,{crevecontid:null,pk_gathering:null}),e.props.form.setFormItemsValue(e.formId,{ts:null}));var t=e.props.createExtCardData(e.pageId,e.formId,[e.tableId1,e.tableId2]),a=p.card_linkpage_id,r={data:JSON.stringify(t),pageCode:a};console.log("CardData",t);var o=p.base_url+"gatheringsave.do";"edit"===e.props.getUrlParam("status")?o=p.base_url+"gatheringupdate.do":"deal"===e.props.getUrlParam("status")&&(o=p.base_url+"gatheringdecidesave.do"),(0,s.ajax)({url:o,data:r,success:function(t){var a,r=null,o=null;t.success&&(t.data&&((0,s.toast)({color:"success",content:e.state.json["36300TG-000037"]}),t.data.head&&t.data.head[e.formId]&&(r=t.data.head[e.formId].rows[0].values.pk_gathering.value,o=t.data.head[e.formId].rows[0].values.pk_org,"edit"===e.props.getUrlParam("status")||"deal"===e.props.getUrlParam("status")?x(p.pkname,r,t.data,p.card_from_id,p.dataSource):O(r,t.data,e.formId,p.dataSource)),e.props.pushTo("/card",{status:"add",id:r,from:"card"}),e.props.form.EmptyAllFormValue(e.formId),e.props.cardTable.setMulTablesData((w(a={},e.tableId1,{rows:[]}),w(a,e.tableId2,{rows:[]}),a)),e.props.form.setFormItemsValue(p.card_from_id,{pk_org:{value:o.value,display:o.display}}),e.props.initMetaByPkorg(),e.props.resMetaAfterPkorgEdit(),(0,u.afterEvent)(e.props,p.card_from_id,"pk_org",o),e.toggleShow()))}})},this.saveAndCommitBill=function(){e.props.getUrlParam("isCopy")&&(e.props.form.setFormItemsValue(e.formId,{crevecontid:null,pk_gathering:null}),e.props.form.setFormItemsValue(e.formId,{ts:null}));var t=e.props.createExtCardData(e.pageId,e.formId,[e.tableId1,e.tableId2]),a=p.card_linkpage_id,r={data:JSON.stringify(t),pageCode:a};console.log("CardData",t);var o=p.base_url+"gatheringsavecommit.do";"edit"===e.props.getUrlParam("status")&&(o=p.base_url+"gatheringupdate.do"),(0,s.ajax)({url:o,data:r,success:function(t){var a=null;if(t.success&&t.data){if((0,s.toast)({color:"success",content:e.state.json["36300TG-000037"]}),t.data.head&&t.data.head[e.formId]){e.props.form.setAllFormValue(w({},e.formId,t.data.head[e.formId])),a=t.data.head[e.formId].rows[0].values.pk_gathering.value;var r=t.data.head[e.formId].rows[0].values.vbillno.value;e.setState({vbillno:r}),"edit"===e.props.getUrlParam("status")||"deal"===e.props.getUrlParam("status")?x(p.pkname,a,t.data,p.card_from_id,p.dataSource):O(a,t.data,e.formId,p.dataSource)}if(t.data.bodys&&t.data.bodys[e.tableId1]&&e.props.cardTable.updateDataByRowId(e.tableId1,t.data.bodys[e.tableId1]),t.data.bodys&&t.data.bodys[e.tableId2]&&e.props.cardTable.updateDataByRowId(e.tableId2,t.data.bodys[e.tableId2]),a){var n={};n.id=a,o===p.base_url+"gatheringsavecommit.do"&&(n.status=2),e.props.cardPagination.setCardPaginationId(n)}}e.props.pushTo("/card",{status:"browse",id:a}),e.toggleShow()}})},this.onChange=function(t){e.setState({value:t})},this.getButtonNames=function(e){return"edit"===e||"add"===e||"save"===e?"main-button":"secondary - button"},this.getTableHead=function(t,a){var r=e.props.button,o=(r.createButton,r.createButtonApp);return i.default.createElement("div",{className:"shoulder-definition-area"},i.default.createElement("div",{className:"definition-icons"},e.props.cardTable.createBrowseIcons(a,{iconArr:[],maxDestAreaId:"finance-fts-commissiongathering-card"}),o({area:"card_body",onButtonClick:function(t,r){return u.buttonClick.call(e,t,r,a)}})))},this.getTableHead2=function(t,a){var r=e.props.button,o=(r.createButton,r.createButtonApp);return i.default.createElement("div",{className:"shoulder-definition-area"},i.default.createElement("div",{className:"definition-icons"},e.props.cardTable.createBrowseIcons(a,{iconArr:[],maxDestAreaId:"finance-fts-commissiongathering-card"}),o({area:"card_body2",onButtonClick:function(t,r){return u.buttonClick.call(e,t,r,a)}})))}},r);M=(0,s.createPage)({billinfo:{billtype:"extcard",pagecode:p.card_linkpage_id,headcode:p.card_from_id,bodycode:[p.card_table1_id,p.card_table2_id]},orderOfHotKey:[p.card_from_id,p.card_table1_id,p.card_table2_id]})(M),t.default=M},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buttonVisible=t.pageInfoClick=t.initTemplate=t.afterEvent=t.buttonClick=void 0;var r=s(a(77)),o=s(a(95)),n=s(a(126)),l=s(a(127)),i=s(a(78));function s(e){return e&&e.__esModule?e:{default:e}}t.buttonClick=r.default,t.afterEvent=n.default,t.initTemplate=o.default,t.pageInfoClick=l.default,t.buttonVisible=i.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DelFinanceLine=t.copyFundLine=t.bodyButtonClick=void 0;var r=a(0),o=a(11),n=a(5),l=a(77),i=(r.base.NCPopconfirm,r.base.NCIcon,o.card_from_id,o.card_linkpage_id,t.bodyButtonClick=function(e,t,a,r,d,c){var p=this;switch(t){case"Open":(0,n.Open)(e,c,d,r,"edit");break;case"CopyThisLine":case"CopyThisLine2":c==o.card_table1_id?i.call(this,e,c,d,r):s.call(this,e,c,d,r);break;case"InsertLine":case"InsertLine2":l.addLineProcess.call(this,e,c,d);break;case"DeleteLine_i":case"DeleteLine_i2":c==o.card_table1_id?u(e,c,d,r):(0,n.DelLine)(e,c,d,r);break;case"CopyAtLine":case"CopyAtLine2":c==o.card_table1_id?l.BatchCopyGatherLine.call(this,e,c,d):(0,n.BatchCopy)(e,c,d),c==o.card_table1_id?this.setState({copyflag1:!1},(function(){p.toggleShow()})):c==o.card_table2_id&&this.setState({copyflag2:!1},(function(){p.toggleShow()}));break;case"OpenDown":case"CloseDown":e.cardTable.toggleRowView(c,r)}},function(e,t,a,r){var n=parseInt(this.state.maxIndex),i=e.form.getFormItemsValue(o.card_from_id,"isautorelation").value,s=[],u=[],d=JSON.parse(JSON.stringify(r));if(n=parseInt(n)+parseInt(1),d.selected=!1,s.push(d.values.rowno.value),d.values.rowno={value:n.toString(),display:n.toString()},d.values.pk_gatheringfinance={value:null,display:null},u.push(n.toString()),this.setState({maxIndex:n.toString()}),e.cardTable.insertRowsAfterIndex(t,d,a),i){for(var c=(0,l.queryRelationRowsByRowno)(e,s),p=e.cardTable.getRowsByIndexs(o.card_table2_id,c),f=JSON.parse(JSON.stringify(p)),b=0;b<f.length;b++){var m=f[b];m.values.relationindex={value:u[b],display:u[b]},m.values.pk_gatheringfund={value:null,display:null}}var g=c[0];e.cardTable.insertRowsAfterIndex(o.card_table2_id,f,g)}}),s=t.copyFundLine=function(e,t,a,r){var o=JSON.parse(JSON.stringify(r));o.selected=!1,o.values.relationindex={value:null,display:null},o.values.pk_gatheringfund={value:null,display:null},e.cardTable.insertRowsAfterIndex(t,o,a)},u=t.DelFinanceLine=function(e,t,a,r){var n=[];n.push(r.values.rowno.value),e.cardTable.delRowsByIndex(t,a);var i=(0,l.queryRelationRowsByRowno)(e,n);return i&&i.length>0&&e.cardTable.delRowsByIndex(o.card_table2_id,i),!0}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleTraOrgChangeSure=t.handleOrgChangeSure=void 0,t.default=function(e,t,a,n,l,i,b,_){console.log(e,t,a,n,l,i,b,_);e.getUrlParam("status");var h=void 0,v=void 0,y=void 0,k=void 0;e.form.getFormItemsValue(o.card_from_id,"pk_org").value;switch(a){case"pk_org":if(h=e.createHeadAfterEventData(o.card_linkpage_id,o.card_from_id,[o.card_table1_id,o.card_table2_id],o.card_from_id,a,n),v=h.newvalue,k=h.oldvalue,u=JSON.stringify(k),k.value&&v.value&&v.value!=k.value||k.value&&!v||k.value&&!v.value)(0,r.promptBox)({color:"warning",content:this.state.json["36300TG-000000"],beSureBtnClick:d.bind(this,e,t,a,n,l,i,h),cancelBtnClick:c.bind(this,e,t,a,n,k,h)});else if(v&&v.value)d.call(this,e,t,a,n,l,i,h);else if(!v||!v.value){var w;e.form.EmptyAllFormValue(o.card_from_id),e.cardTable.setMulTablesData((s(w={},o.card_table1_id,{rows:[]}),s(w,o.card_table2_id,{rows:[]}),w)),e.initMetaByPkorg()}break;case"pk_transactorg":h=e.createHeadAfterEventData(o.card_linkpage_id,o.card_from_id,[o.card_table1_id,o.card_table2_id],o.card_from_id,a,n),v=h.newvalue,k=h.oldvalue,u=JSON.stringify(k),k.value&&v.value&&v.value!=k.value||k.value&&!v||k.value&&!v.value?(0,r.promptBox)({color:"warning",content:this.state.json["36300TG-000001"],beSureBtnClick:p.bind(this,e,t,a,n,l,i,h),cancelBtnClick:f.bind(this,e,t,a,n,k,h)}):!k&&v&&v.value?p.bind(this,e,t,a,n,l,i,h):f.bind(this,e,t,a,n,k,h);break;case"pk_financeorg_r":g(e,t,a,n,l,i,h,o.card_table1_id,y);break;case"pk_fundgetorg":case"pk_currtype":m(e,t,a,n,l,i,h);break;case"olcrate":g(e,t,a,n,l,i,h,t,y);break;case"pk_company_p":y={rowno:i,custName:n&&n.refname},g(e,t,a,n,l,i,h,o.card_table1_id,y);break;case"pk_bankaccount_p":y={rowno:i,bankaccount:n&&n.refcode,bankaccountname:n&&n.refname,bankname:n&&n.values&&n.values.pk_bankdoc&&n.values.pk_bankdoc.value},g(e,t,a,n,l,i,h,o.card_table1_id,y);break;case"pk_bankname_p":console.log(n),y={rowno:i,bankname:n&&n.refname},g(e,t,a,n,l,i,h,o.card_table1_id,y);break;case"origetmode":y={rowno:i},g(e,t,a,n,l,i,h,o.card_table1_id,y);break;case"amount":g(e,t,a,n,l,i,h,t,y);break;case"pk_gathercurr":case"isexchangegather":case"exprice":m(e,t,a,n,l,i,h);break;case"getmode":case"isfees":g(e,t,a,n,l,i,h,o.card_table2_id,y);break;case"pk_bankaccount_r":case"pk_cashaccount_r":break;case"pk_notetype":case"billno":g(e,t,a,n,l,i,h,o.card_table2_id,y);break;case"notenumber":console.log(n),y={pk_billno:n&&n.refpk,billno:n&&n.refname,amount:n&&n.values&&n.values.money&&n.values.money.value},g(e,t,a,n,l,i,h,o.card_table2_id,y);break;case"feedirection":break;case"feeamount":g(e,t,a,n,l,i,h,o.card_table2_id,y);break;case"clearoutacctype":var I={},C=(e.form.getFormItemsValue(o.card_from_id,"clearoutacctype")||{}).value;C&&"inneraccount"!=C?(I.pk_clearoutbankaccount=!0,I.pk_clearoutaccount=!1):(I.pk_clearoutbankaccount=!1,I.pk_clearoutaccount=!0),e.form.setFormItemsVisible(o.card_from_id,I)}};var r=a(0),o=a(11),n=a(18),l=a(33),i=a(77);function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var u={};var d=t.handleOrgChangeSure=function(e,t,a,r,n,i,u){e.resMetaAfterPkorgEdit();var d,c,p=u.newvalue;p&&p.value?(h.call(this,e,t,a,r,n,i,u),e.cardTable.setMulTablesData((s(d={},o.card_table2_id,{rows:[]}),s(d,o.card_table1_id,{rows:[]}),s(d,o.card_from_id,{rows:[]}),d))):(e.form.EmptyAllFormValue(o.card_from_id),e.cardTable.setMulTablesData((s(c={},o.card_table2_id,{rows:[]}),s(c,o.card_table1_id,{rows:[]}),s(c,o.card_from_id,{rows:[]}),c)),e.initMetaByPkorg());(0,l.setCardShouderBtnUseful)(e)},c=function(e,t,a,r,n,l){var i=JSON.parse(u);e.resMetaAfterPkorgEdit(),e.form.setFormItemsValue(o.card_from_id,{pk_org:{value:i.value,display:i.display}})},p=t.handleTraOrgChangeSure=function(e,t,a,r,n,l,i){var s=i.newvalue;if(s&&s.value)b(e,t,a,r,n,l,i);else{var d=JSON.parse(u);e.form.setFormItemsValue(o.card_from_id,{pk_transactorg:{value:d.value,display:d.display}})}var c=e.form.getFormItemsValue(o.card_from_id,"pk_org").value;s.value!=c?e.cardTable.setColEditableByKey(o.card_table2_id,["pk_bankaccount_r","pk_getplanitem","pk_cashaccount_r"]):e.cardTable.setColEditableByKey(o.card_table2_id,["pk_bankaccount_r","pk_getplanitem","pk_cashaccount_r"],!1)},f=function(e,t,a,r,n,l){var i=JSON.parse(u);e.form.setFormItemsValue(o.card_from_id,{pk_transactorg:{value:i.value,display:i.display}})},b=function(e,t,a,l,i,u,d){var c;c={uiState:e.getUrlParam("status")},(0,r.ajax)({url:o.base_url+"cardafteredit.do",data:{eventPosition:"head",eventType:"card",eventData:JSON.stringify(d),extParam:c},success:function(t){var a=t.success,l=t.data;if(a){var i=l.card,u=l.extParam,d=l.headItemProps,c=(l.bodyItemProps,i.head),p=i.bodys;e.form.setAllFormValue(s({},o.card_from_id,c[o.card_from_id])),p&&p[o.card_table1_id]&&e.cardTable.setMulTablesData(s({},o.card_table1_id,p[o.card_table1_id])),p&&p[o.card_table2_id]&&e.cardTable.setMulTablesData(s({},o.card_table2_id,p[o.card_table2_id])),(0,n.setHeadItemProp)(e,o.card_from_id,d);var f={},b=(e.form.getFormItemsValue(o.card_from_id,"clearoutacctype")||{}).value;b&&"inneraccount"!=b?(f.pk_clearoutbankaccount=!0,f.pk_clearoutaccount=!1):(f.pk_clearoutbankaccount=!1,f.pk_clearoutaccount=!0),e.form.setFormItemsVisible(o.card_from_id,f),u.hasOwnProperty("warning")&&(0,r.toast)({color:"warning",content:u.warning})}}})},m=function(e,t,a,l,i,u,d){var c,p,f;p={uiState:e.getUrlParam("status")},c=(d=e.createHeadAfterEventData(o.card_linkpage_id,o.card_from_id,[o.card_table1_id,o.card_table2_id],o.card_from_id,a,l)).newvalue,(f=d.oldvalue)&&f.value&&c.value==f.value||(0,r.ajax)({url:o.base_url+"cardafteredit.do",data:{eventPosition:"head",eventType:"card",eventData:JSON.stringify(d),extParam:p},success:function(t){var a=t.success,l=t.data;if(a){var i=l.card,u=l.extParam,d=l.headItemProps,c=(l.bodyItemProps,i.head),p=i.bodys;e.form.setAllFormValue(s({},o.card_from_id,c[o.card_from_id])),p&&p[o.card_table1_id]&&e.cardTable.setMulTablesData(s({},o.card_table1_id,p[o.card_table1_id])),p&&p[o.card_table2_id]&&e.cardTable.setMulTablesData(s({},o.card_table2_id,p[o.card_table2_id])),(0,n.setHeadItemProp)(e,o.card_from_id,d),u.hasOwnProperty("warning")&&(0,r.toast)({color:"warning",content:u.warning})}}})},g=function(e,t,a,l,i,u,d,c,p){var f,b;f=(d=e.createBodyAfterEventData(o.card_linkpage_id,o.card_from_id,[o.card_table1_id,o.card_table2_id],c,a,i)).changedrows[0].newvalue.value,b=d.changedrows[0].oldvalue.value,(f||b)&&f!=b&&(0,r.ajax)({url:o.base_url+"cardafteredit.do",data:{eventPosition:"body",eventType:"card",eventData:JSON.stringify(d),extParam:p},success:function(t){var l=t.success,i=t.data;if(l){var d=i.card,c=i.extParam,p=i.headItemProps,f=i.bodyItemProps,b=d.head,m=d.bodys;if(e.form.setAllFormValue(s({},o.card_from_id,b[o.card_from_id])),m&&m[o.card_table1_id]&&e.cardTable.setMulTablesData(s({},o.card_table1_id,m[o.card_table1_id])),"notenumber"!=a&&m&&m[o.card_table2_id]&&e.cardTable.setMulTablesData(s({},o.card_table2_id,m[o.card_table2_id])),(0,n.setHeadItemProp)(e,o.card_from_id,p),(0,n.setBodyItemProp)(e,f),c.hasOwnProperty("warning")&&(0,r.toast)({color:"warning",content:c.warning}),c.hasOwnProperty("needRef")){var g=e.meta.getMeta();console.log(g)}"notenumber"==a&&_(e,u,m[o.card_table2_id])}}})},_=function(e,t,a){for(var r=a.rows,n=(a.rows[t],0);n<r.length;n++){var l=r[n],i=(l.values.pk_billno.value,l.values.billno.value);l.values.notenumber={value:i,display:i}}e.cardTable.setMulTablesData(s({},o.card_table2_id,a))},h=function(e,t,a,l,u,d,c){var p=this,f={uiState:e.getUrlParam("status")};(0,r.ajax)({url:o.base_url+"cardafteredit.do",data:{eventPosition:"head",eventType:"card",eventData:JSON.stringify(c),extParam:f},success:function(t){var a=t.success,r=t.data;if(a){var l=r.card,u=(r.extParam,r.headItemProps),d=(r.bodyItemProps,l.head);l.bodys;e.form.setAllFormValue(s({},o.card_from_id,d[o.card_from_id])),(0,n.setHeadItemProp)(e,o.card_from_id,u),i.addLineProcess.call(p,e,o.card_table1_id)}}})}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=this;console.log(t);var l=o.cardCache.getCacheById,i=o.cardCache.updateCache;e.setUrlParam(t);var s=l(t,r.dataSource);if(s)this.props.form.setAllFormValue(n({},this.formId,s.head[this.formId])),this.props.cardTable.setTableData(this.tableId1,s.body[this.tableId1]),this.props.cardTable.setTableData(this.tableId2,s.body[this.tableId2]);else{var u={pk:t,pageCode:r.card_linkpage_id};(0,o.ajax)({url:r.base_url+"gatheringcardquery.do",data:u,success:function(o){o.data?(o.data.head&&(a.props.form.setAllFormValue(n({},a.formId,o.data.head[a.formId])),a.state.vbillno=o.data.head[a.formId].rows[0].values.vbillno.value),o.data.bodys&&(a.props.cardTable.setTableData(a.tableId1,o.data.bodys[a.tableId1]),a.props.cardTable.setTableData(a.tableId2,o.data.bodys[a.tableId2])),i(r.pkname,t,a.formId,r.dataSource),e.setUrlParam(t),a.toggleShow()):(a.props.form.EmptyAllFormValue(a.formId),a.props.cardTable.setTableData(a.tableId1,{rows:[]}),a.props.cardTable.setTableData(a.tableId2,{rows:[]}))}})}};var r=a(11),o=a(0);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,n,s,u){var d=e.form.getFormItemsValue(o.card_from_id,"pk_org").value,c=(e.form.getFormItemsValue(o.card_from_id,"pk_transactorg")||{}).value,p=e.form.getFormItemsValue(o.card_from_id,"pk_vsourcebilltype").value,f=e.form.getFormItemsValue(o.card_from_id,"vsourcebustype").value,b="deal"==e.getUrlParam("status");if(console.log(n),t==o.card_table1_id)switch(a){case"pk_financeorg_r":if(console.log(b),b){if(d==c&&("F4"===p||"D2"===p))return!1;if(d!=c&&"billhand"!=f)return!1;if("billpayawoke"==f&&!n.value)return!0;if("billpayawoke"==f&&n.value)return!1}return!0;case"pk_inneraccount_r":if(b){if(d==c&&("F4"===p||"D2"===p))return!1;if(d!=c&&"billhand"!=f)return!1;if("billpayawoke"==f&&!n.value)return!0;if("billpayawoke"==f&&n.value)return!1}return!!u.values.pk_financeorg_r.value||((0,r.toast)({color:"warning",content:this.state.json["36300TG-000002"]}),!1);case"pk_company_p":if(b){if(d==c&&("F4"===p||"D2"===p))return!1;if(d!=c&&"billhand"!=f)return!1;if("billpayawoke"==f)return!1}return!0;case"pk_bankaccount_p":if(b){if(d==c&&("F4"===p||"D2"===p))return!1;if(d!=c&&"billhand"!=f)return!1;if("billpayawoke"==f)return!1}return!!u.values.pk_company_p.value||((0,r.toast)({color:"warning",content:this.state.json["36300TG-000003"]}),!1);case"pk_bankname_p":return"cash"==u.values.origetmode.value||"note"==u.values.origetmode.value;case"pk_balatype":case"origetmode":case"amount":if(b){if(d==c&&("F4"===p||"D2"===p))return!1;if(d!=c&&"billhand"!=f)return!1;if("billpayawoke"==f)return!1}return!0;case"olcrate":if(b){if(d==c&&("F4"===p||"D2"===p))return!1;if(d!=c&&"billhand"!=f)return!1;if("billpayawoke"==f)return!1}return l(e,t,a,n,s,u);default:return!0}else{if(t!=o.card_table2_id)return!0;switch(a){case"getmode":return"billpayawoke"!=f;case"fundtype":return!1;case"pk_bankaccount_r":return l(e,t,a,n,s,u);case"isfees":return d==c&&"billpayawoke"!=f;case"pk_cashaccount_r":return d==c&&"cash"==u.values.getmode.value;case"amount":return"billpayawoke"!=f;case"olcrate":return"billpayawoke"!=f&&l(e,t,a,n,s,u);case"pk_notetype":return"note"==u.values.getmode.value;case"billno":case"notenumber":var m=!1;"note"==u.values.getmode.value&&(m=!0),m=!!u.values.pk_notetype.value;var g=l(e,t,a,n,s,u),_=e.meta.getMeta();return _[o.card_table2_id].items.forEach((function(t){"notenumber"==t.attrcode&&(g&&"refer"!=t.itemtype?(t.itemtype="refer",t.refcode="fbm/refer/fbm/Bill4FtsReceiveGridRef/index.js",t.queryCondition=function(){var t=(e.form.getFormItemsValue(o.card_from_id,"pk_currtype")||{}).value,a=(e.form.getFormItemsValue(o.card_from_id,"pk_transactorg").value,e.form.getFormItemsValue(o.card_from_id,"pk_org").value),r=(u.values.pk_notetype||{}).value;(e.cardTable.getValByKeyAndIndex(o.card_table1_id,s,"pk_financeorg_r")||{}).value;return(e.form.getFormItemsValue(o.card_from_id,"pk_financeorg_r")||{}).value,{pk_org:a,pk_curr:t,fbmbilltype:r,GridRefActionExt:"nccloud.web.fts.commission.commissiongathering.filter.GatherBodyPkNoteFilte"}}):g&&"refer"==t.itemtype?t.queryCondition=function(){var t=(e.form.getFormItemsValue(o.card_from_id,"pk_currtype")||{}).value,a=(e.form.getFormItemsValue(o.card_from_id,"pk_transactorg").value,e.form.getFormItemsValue(o.card_from_id,"pk_org").value),r=(u.values.pk_notetype||{}).value;(e.cardTable.getValByKeyAndIndex(o.card_table1_id,s,"pk_financeorg_r")||{}).value;return(e.form.getFormItemsValue(o.card_from_id,"pk_financeorg_r")||{}).value,{pk_org:a,pk_curr:t,fbmbilltype:r,GridRefActionExt:"nccloud.web.fts.commission.commissiongathering.filter.GatherBodyPkNoteFilte"}}:(t.itemtype="input",t.refcode=null))})),e.meta.setMeta(_),console.log(_),e.renderItem("table",t,"notenumber",null),i(e,u,g),m;case"feedirection":case"feeamount":return!!u.values.isfees.value;default:return!0}}};var r=a(0),o=a(11);a(18),n(a(27)),n(a(26));function n(e){return e&&e.__esModule?e:{default:e}}var l=function(e,t,a,n,l,i){var s=e.createExtCardData(o.card_linkpage_id,o.card_from_id,[o.card_table1_id,o.card_table2_id]),u=!1;return(0,r.ajax)({url:o.base_url+"cardbeforeedit.do",data:{data:JSON.stringify(s),pageCode:o.card_linkpage_id,areaCode:t,key:a,index:l},async:!1,success:function(e){u=e.data}}),u},i=function(e,t,a){for(var r=e.cardTable.getAllRows(o.card_table2_id,!1),n=0;n<r.length;n++){var l=r[n];if(t.rowid!=l.rowid&&t.values.pk_notetype.value!=l.values.pk_notetype.value){var i=l.values.pk_billno.value,s=l.values.billno.value;l.values.notenumber=a?{value:s,display:s}:{value:i,display:s}}}var u={rows:r};e.cardTable.updateTableData(o.card_table2_id,u)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,n=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(3),i=g(l),s=(g(a(4)),a(0)),u=g(a(40)),d=a(130),c=a(11),p=g(a(23)),f=a(33),b=a(6),m=a(1);function g(e){return e&&e.__esModule?e:{default:e}}function _(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var h=s.high.NCUploader,v=s.high.ApproveDetail,y=s.high.Inspection,k=(s.base.NCTabsControl,s.base.NCAffix),w=s.base.NCDiv,I=(u.default.NCTabPane,s.cardCache.setDefData),C=s.cardCache.getDefData,T=(r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.call(a),a.moduleId=c.module_id,a.searchId=c.list_search_id,a.tableId=c.list_table_id,a.pageId=c.list_linkpage_id,a.state={bodyvalues:{},groupCount:{},defaultSelectGrup:0,selectedGroup:"0",showUploader:!1,billId:"",vbillno:"",showApproveDetail:!1,value:"",showNtbDetail:!1,ntbdata:null,showModal:!1,record:{},billtype:"",json:{},inlt:null},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"componentDidMount",value:function(){var e=C(c.dataSource,"groupCount"),t=C(c.dataSource,"selectedGroup"),a=this.props.getUrlParam("pk_ntbparadimvo"),r=this.props.getUrlParam("scene"),o=this.props.getUrlParam("id");e&&(this.state.groupCount=e),t&&(this.state.selectedGroup=t),a?d.listInitData.call(this,this.props):r&&("fip"==r?(0,f.VoucherLinkBill)(this.props,c.list_linkpage_id,c.list_table_id):o&&"string"==typeof o&&this.props.pushTo("/linkcard",{status:"browse",scene:r,id:o})),f.setListButtonUseful.call(this)}},{key:"componentWillMount",value:function(){var e,t=this;(0,s.getMultiLang)({moduleId:(e={},_(e,b.module_tmpub_name,[b.module_tmpub_id]),_(e,b.module_name,[c.module_id,c.funcode]),e),callback:function(e,a,r){a?((0,m.saveMultiLangRes)(t.props,e),d.initTemplate.call(t,t.props,e,r),t.setState({json:e,inlt:r})):console.log("未加载到多语资源")}})}},{key:"render",value:function(){var e=this,t=this.props,a=t.table,r=t.button,o=t.search,n=t.modal,l=t.socket,s=(this.props.button.getButtons(),this.props.MutiInit.getIntl(this.moduleId),a.createSimpleTable),u=(a.getTablePageInfo,o.NCCreateSearch,n.createModal,r.createButton,r.getButtons,r.createButtonApp),b=this.props.BillHeadInfo.createBillHeadInfo,m=this.state,g=m.showUploader,_=m.vbillno,I=m.billId,C=(m.defaultSelectGrup,m.selectedGroup,m.showModal),T=m.showApproveDetail,S=(m.record,m.groupCount,m.billtype),B=m.showNtbDetail,P=m.ntbdata;return i.default.createElement("div",{className:"nc-bill-list"},i.default.createElement(k,null,i.default.createElement(w,{areaCode:w.config.HEADER,className:"nc-bill-header-area"},i.default.createElement("div",{className:"header-title-search-area"},b({title:this.state.json["36300TG-000038"],initShowBackBtn:!1})),i.default.createElement("div",{className:"header-button-area"},u({area:"page_header",onButtonClick:d.buttonClick.bind(this)})))),l.connectMesg({tableAreaCode:this.tableId,billpkname:c.pkname,billtype:c.billType,dataSource:c.dataSource}),i.default.createElement("div",{className:"nc-bill-table-area"},s(this.tableId,{dataSource:c.dataSource,pkname:c.pkname,componentInitFinished:function(){f.setListButtonUseful.call(e)},handlePageInfoChange:d.pageInfoClick.bind(this),tableModelConfirm:d.tableModelConfirm,onRowDoubleClick:this.onRowDoubleClick.bind(this),onSelected:f.setListButtonUseful.bind(this),onSelectedAll:f.setListButtonUseful.bind(this),showCheck:!0,showIndex:!0})),i.default.createElement("div",{className:"nc-faith-demo-div2"},g&&i.default.createElement(h,{billId:I,target:null,placement:"bottom",billNo:_,onHide:function(){e.setState({showUploader:!1})},customInterface:{queryLeftTree:"/nccloud/tmpub/pub/lefttreequery.do",queryAttachments:c.base_url+"gatherattachment.do"}})),i.default.createElement("div",null,i.default.createElement(y,{show:B,sourceData:P,cancel:function(){e.setState({showNtbDetail:!1})},affirm:function(){e.setState({showNtbDetail:!1})}})),i.default.createElement("div",null,T&&i.default.createElement(v,{show:T,billtype:S,billid:I,close:function(){e.setState({showApproveDetail:!1})}})),i.default.createElement("div",null,i.default.createElement(p.default,{title:this.state.json["36300TG-000042"],label:this.state.json["36300TG-000043"],show:C,onOk:function(t){e.backConfirm.call(t)},onClose:function(){e.setState({showModal:!1})}})))}}]),t}(l.Component),o=function(){var e=this;this.onChange=function(t){e.setState({value:t})},this.navChangeFun=function(t,a,r){I(c.dataSource,"selectedGroup",t),d.searchBtnClick.call(e,e.props,null,t)},this.onRowDoubleClick=function(e,t,a,r){a.pushTo("/linkcard",{status:"browse",id:e.pk_gathering.value})},this.backConfirm=function(t){e.props.getUrlParam("id");var a=e.state.record;if(a){var r={},o=a.pk_gathering.value,n=a.ts.value;r[o]=n;var l={};l.backxjreason=t;var i=e;(0,s.ajax)({url:c.base_url+"gatheringback.do",data:{extParam:l,pkMapTs:r,pageCode:c.list_linkpage_id},success:function(t){t&&((0,s.toast)({color:"success",content:e.state.json["36300TG-000036"]}),i.refresh())}}),e.setState({showModal:!1,record:{},value:""})}},this.editBill=function(t){var a={},r=t.pk_gathering.value,o=t.ts.value;a[r]=o,(0,s.ajax)({url:c.base_url+"gatheringedit.do",data:{pkMapTs:a,pageCode:c.list_linkpage_id},success:function(t){t&&e.props.pushTo("/card",{status:"edit",from:"card",id:r})}})},this.decideBill=function(t){var a={},r=t.pk_gathering.value,o=t.ts.value;a[r]=o,(0,s.ajax)({url:c.base_url+"gatheringdecide.do",data:{pkMapTs:a,pageCode:c.list_linkpage_id},success:function(t){t&&e.props.pushTo("/card",{status:"deal",actionName:"deal",from:"list",id:r})}})},this.delConfirm=function(t,a){var r={},o=t.pk_gathering.value,n=t.ts.value;r[o]=n;var l=c.list_linkpage_id,i=e;(0,s.ajax)({url:c.base_url+"gatheringdelete.do",data:{pkMapTs:r,pageCode:l},success:function(){(0,i.props.table.deleteCacheId)(c.list_table_id,o),i.props.table.deleteTableRowsByIndex(c.list_table_id,a),(0,s.toast)({color:"success",content:e.state.json["36300TG-000035"]})}})},this.refresh=function(){var t=e.state.selectedGroup;e.navChangeFun(t)}},r);T=(0,s.createPage)({billinfo:{billtype:"grid",pagecode:c.list_linkpage_id,bodycode:c.list_table_id}})(T),t.default=T},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.searchAfterEvent=t.buttonClick=t.initTemplate=t.pageInfoClick=t.listInitData=t.searchBtnClick=void 0;var r=a(131),o=s(a(132)),n=s(a(134)),l=s(a(135)),i=s(a(136));function s(e){return e&&e.__esModule?e:{default:e}}t.searchBtnClick=r.searchBtnClick,t.listInitData=r.listInitData,t.pageInfoClick=n.default,t.initTemplate=o.default,t.buttonClick=l.default,t.searchAfterEvent=i.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateListView=t.listInitData=t.buildQryData=t.searchBtnClick=void 0;var r=a(0),o=a(11),n=r.cardCache.setDefData,l=r.cardCache.getDefData,i=(t.searchBtnClick=function(e,t,a){if("simple"==a&&(a=o.group_needDeal),this.setState({defaultSelectGrup:a,selectedGroup:a}),t&&t.conditions&&0!=t.conditions.length?(n(o.list_search_id,o.dataSource,t),n(o.has_query,o.dataSource,"true")):t=l(o.list_search_id,o.dataSource),l(o.has_query,o.dataSource)||t&&t.conditions&&0!=t.conditions.length){var s=i.call(this,e,t,a),d=this;(0,r.ajax)({url:o.base_url+"gatheringpagequery.do",data:s,success:function(t){u.call(d,e,t,a)}})}},t.buildQryData=function(e,t,a){var r=e.table.getTablePageInfo(o.list_table_id),n=s.call(this,a),l=Array.isArray(n)?n:[n],i=e.getSearchParam("p"),u=e.search.getQueryInfo(o.list_search_id,!1);return u.querycondition=t,u.custcondition={logic:"and",conditions:l},u.pageInfo=r,{data:JSON.stringify(u),pageCode:i}}),s=function(e){var t=void 0;switch(e){case"1":t={field:"billstatus",value:{firstvalue:0,secondvalue:null},oprtype:"="};break;case"0":t={field:"billstatus",value:{firstvalue:1,secondvalue:null},oprtype:"="};break;case"2":t={field:"billstatus",value:{firstvalue:2,secondvalue:null},oprtype:"="};break;case"3":t={field:"billstatus",value:{firstvalue:3,secondvalue:null},oprtype:"="};break;case"4":t={};break;default:t={field:"billstatus",value:{firstvalue:1,secondvalue:null},oprtype:"="}}return t},u=(t.listInitData=function(e){var t={pk_ntbparadimvo:e.getUrlParam("pk_ntbparadimvo"),pageInfo:JSON.stringify(e.table.getTablePageInfo(o.list_table_id))},a={pageCode:o.list_linkpage_id,extParam:t},n=this.state.selectedGroup,l=this;(0,r.ajax)({url:o.base_url+"listinitdata.do",data:a,success:function(t){u.call(l,e,t,n)}})},t.updateListView=function(e,t,a){var r=t.success,l=t.data;if(r)if(l){var i=t&&t.data,s=i.grid,u=i.numvalues,d=i.head;if(s)e.table.setAllTableData(o.list_table_id,s[o.list_table_id]);else if(d){var c=d[o.card_from_id].rows[0].values.pk_gathering.value;e.pushTo("/linkcard",{status:"browse",id:c,scene:"'scene'"})}else e.table.setAllTableData(o.list_table_id,{rows:[]});u&&this.setState({defaultSelectGrup:a,selectedGroup:a,groupCount:{needDeal:u.needDeal||0,needCommit:u.needCommit||0,approving:u.approving||0,needGather:u.needGather||0}})}else e.table.setAllTableData(o.list_table_id,{rows:[]});n(o.dataSource,"groupCount",this.state.groupCount),n(o.dataSource,"selectedGroup",this.state.selectedGroup)})},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=this;e.createUIDom({pagecode:i.list_linkpage_id,appcode:e.getUrlParam("c")},(function(a){if(a){if(a.template){var r=a.template;r=function(e,t,a){return a[i.list_table_id].pagination=!0,a[i.list_table_id].items=a[i.list_table_id].items.map((function(e,a){return"vbillno"==e.attrcode&&(e.render=function(e,a,r){return React.createElement("a",{style:{cursor:"pointer"},onClick:function(){t.pushTo("/linkcard",{status:"browse",id:a.pk_gathering.value})}},a&&a.vbillno&&a.vbillno.value)}),e})),a;return a[i.list_table_id].items.push({attrcode:"opr",label:e.state.json["36300TG-000097"],width:200,fixed:"right",itemtype:"customer",className:"table-opr",visible:!0,render:function(a,r,o){console.log(r.vbillstatus,99);var n=[],i=r.voucherflag&&r.voucherflag.value,s=r.vsourcebustype&&r.vsourcebustype.value;return r.billstatus&&"0"==r.billstatus.value?n=["Commit_i","Edit_i","Delete_i"]:r.billstatus&&"1"==r.billstatus.value&&"billhand"==s?n=["Decide_i","UnCommit_i"]:r.billstatus&&"1"==r.billstatus.value&&"billhand"!=s?n=["Decide_i","Back_i"]:r.billstatus&&"2"==r.billstatus.value?n=["UnDecide_i"]:r.billstatus&&"3"==r.billstatus.value?n=["Gather_i"]:r.voucherflag&&r.voucherflag.value&&r.billstatus&&"4"==r.billstatus.value?n=["UnPremit_i"]:!i&&r.billstatus&&"4"==r.billstatus.value?n=["UnGather_i","Premit_i"]:r.billstatus&&"5"==r.billstatus.value?n=["Deliver_i"]:r.billstatus&&"6"==r.billstatus.value?n=["UnDeliver_i"]:r.billstatus&&"7"==r.billstatus.value&&(n=[]),t.button.createOprationButton(n,{area:"list_inner",buttonLimit:3,onButtonClick:function(t,n){return l.default.call(e,t,n,a,r,o)}})}}),a}(t,e,r),e.meta.setMeta(r,(function(){console.log("-------------------------------------------------------------------------------------------------------");var t=s(i.dataSource,i.list_table_id);console.log(t),console.log("-------------------------------------------------------------------------------------------------------"),t&&e.table.setAllTableData(i.list_table_id,t)}))}if(a.button){var o=a.button;e.button.setButtons(o),e.button.setPopContent("Delete_i",t.state.json["36300TG-000089"])}}}))};var r,o=a(0),n=a(133),l=(r=n)&&r.__esModule?r:{default:r},i=a(11);o.base.NCPopconfirm,o.base.NCIcon,o.base.NCTooltip,o.cardCache.setDefData;var s=o.cardCache.getDefData},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,l,i){var s={operType:"list"};switch(t){case"Edit_i":this.editBill(l);break;case"Delete_i":this.delConfirm(l,i);break;case"Commit_i":(0,n.listSingleOperator)(e,o.list_linkpage_id,o.list_table_id,o.base_url+"gatheringcommit.do",l,o.pkname,i,this.state.json["36300TG-000070"],o.dataSource,s);break;case"UnCommit_i":(0,n.listSingleOperator)(e,o.list_linkpage_id,o.list_table_id,o.base_url+"gatheringuncommit.do",l,o.pkname,i,this.state.json["36300TG-000071"],o.dataSource,s);break;case"Decide_i":this.decideBill(l);break;case"UnDecide_i":(0,n.listSingleOperator)(e,o.list_linkpage_id,o.list_table_id,o.base_url+"gatheringundecide.do",l,o.pkname,i,this.state.json["36300TG-000072"],o.dataSource,s);break;case"Deliver_i":(0,n.listSingleOperator)(e,o.list_linkpage_id,o.list_table_id,o.base_url+"gatheringdeliver.do",l,o.pkname,i,this.state.json["36300TG-000073"],o.dataSource,s);break;case"UnDeliver_i":(0,n.listSingleOperator)(e,o.list_linkpage_id,o.list_table_id,o.base_url+"gatheringundeliver.do",l,o.pkname,i,this.state.json["36300TG-000074"],o.dataSource,s);break;case"Gather_i":(0,n.listSingleOperator)(e,o.list_linkpage_id,o.list_table_id,o.base_url+"gatheringrecvmoney.do",l,o.pkname,i,this.state.json["36300TG-000075"],o.dataSource,s);break;case"UnGather_i":(0,n.listSingleOperator)(e,o.list_linkpage_id,o.list_table_id,o.base_url+"gatheringunrecvmoney.do",l,o.pkname,i,this.state.json["36300TG-000076"],o.dataSource,s);break;case"Premit_i":(0,n.listSingleOperator)(e,o.list_linkpage_id,o.list_table_id,o.base_url+"gatheringvoucher.do",l,o.pkname,i,this.state.json["36300TG-000077"],o.dataSource,s);break;case"UnPremit_i":(0,n.listSingleOperator)(e,o.list_linkpage_id,o.list_table_id,o.base_url+"gatheringunvoucher.do",l,o.pkname,i,this.state.json["36300TG-000078"],o.dataSource,s);break;case"Back_i":var u=l.vsourcebustype.value;u!==o.busType.BusType_BillFBM&&u!==o.busType.BusType_BillPayAwoke?this.setState({showModal:!0,record:l}):(this.setState({record:l}),(0,r.promptBox)({color:"warning",title:this.state.json["36300TG-000016"],content:this.state.json["36300TG-000017"],beSureBtnClick:this.backConfirm.bind()}))}};var r=a(0),o=a(11),n=a(5);r.base.NCPopconfirm,r.base.NCIcon},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){if(null!=a&&0!=a.length){e.table.getTablePageInfo(o.list_table_id);var n={pks:a,pageCode:o.list_linkpage_id},l=this;(0,r.ajax)({url:o.base_url+"gatheringpagechange.do",data:n,success:function(e){l.props.table.setAllTableData(o.list_table_id,e.data[o.list_table_id])}})}};var r=a(0),o=a(11)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=e.table.getCheckedRows(r.list_table_id);switch(t){case"Refresh":this.refresh();break;case"Add":console.log(t),e.pushTo("/card",{status:"add"});break;case"Delete":if(1==a.length){var n=a[0].index;(0,l.promptBox)({color:"warning",title:this.state.json["36300TG-000008"],content:this.state.json["36300TG-000079"],beSureBtnClick:this.delConfirm.bind(this,a[0].data.values,n)})}else(0,l.promptBox)({color:"warning",title:this.state.json["36300TG-000008"],content:this.state.json["36300TG-000009"],beSureBtnClick:o.listMultiOperator.bind(this,e,r.list_linkpage_id,r.list_table_id,r.pkname,r.base_url+"gatheringdelete.do",this.state.json["36300TG-000080"],r.dataSource)});break;case"Commit":(0,o.listMultiOperator)(e,r.list_linkpage_id,r.list_table_id,r.pkname,r.base_url+"gatheringcommit.do",this.state.json["36300TG-000081"],r.dataSource);break;case"UnCommit":(0,o.listMultiOperator)(e,r.list_linkpage_id,r.list_table_id,r.pkname,r.base_url+"gatheringuncommit.do",this.state.json["36300TG-000082"],r.dataSource);break;case"Gather":(0,o.listMultiOperator)(e,r.list_linkpage_id,r.list_table_id,r.pkname,r.base_url+"gatheringrecvmoney.do",this.state.json["36300TG-000083"],r.dataSource);break;case"UnGather":(0,o.listMultiOperator)(e,r.list_linkpage_id,r.list_table_id,r.pkname,r.base_url+"gatheringunrecvmoney.do",this.state.json["36300TG-000084"],r.dataSource);break;case"File":var s=e.table.getCheckedRows(this.tableId),_="",h="";if(null==s||0==s.length)return void(0,l.toast)({color:"warning",content:this.state.json["36300TG-000085"]});if(s.length>1)return void(0,l.toast)({color:"warning",content:this.state.json["36300TG-000086"]});1==s.length&&(s.forEach((function(e){e.data.values.pk_gathering&&null!=e.data.values.pk_gathering.value&&(_=e.data.values.pk_gathering.value),e.data.values.vbillno&&null!=e.data.values.vbillno.value&&(h=e.data.values.vbillno.value)})),this.setState({billId:_,vbillno:h,showUploader:!this.state.showUploader,target:null}));break;case"Copy":if(null==a||0==a.length)return void(0,l.toast)({color:"warning",content:this.state.json["36300TG-000085"]});if(a.length>1)return void(0,l.toast)({color:"warning",content:this.state.json["36300TG-000088"]});if("billdeliver"==(a[0]&&a[0].data&&a[0].data.values&&a[0].data.values.vsourcebustype&&a[0].data.values.vsourcebustype.value))return void(0,l.toast)({color:"warning",content:this.state.json["36300TG-000004"]});var v=a[0]&&a[0].data&&a[0].data.values&&a[0].data.values.pk_gathering&&a[0].data.values.pk_gathering.value;e.pushTo("/card",{status:"copy",id:v,isCopy:!0,from:"list"});break;case"Print":f.call(this,e);break;case"OffiPrint":g.call(this,e,!0);break;case"InOffiPrint":g.call(this,e,!1);break;case"Output":m.call(this,e);break;case"LinkQueryWorkFlow":var y=a[0]&&a[0].data&&a[0].data.values&&a[0].data.values.pk_gathering&&a[0].data.values.pk_gathering.value,k=a[0]&&a[0].data&&a[0].data.values&&a[0].data.values.pk_billtype&&a[0].data.values.pk_billtype.value;console.log(y),this.setState({showApproveDetail:!0,billId:y,billtype:k});break;case"LinkQueryBeforBill":console.log(t),p.call(this,e);break;case"LinkQueryAfterBill":console.log(t),c.call(this,e);break;case"LinkQueryPZ":d.call(this,e);break;case"LinkQueryNtb":b.call(this,e);break;case"LinkReturnBill":if(null==a||0==a.length||a.length>1)return void(0,l.toast)({color:"warning",content:this.state.json["36300TG-000088"]});if(a[0].data.values.billstatus.value!=r.billstatus_gather.payok)return void(0,l.toast)({color:"warning",content:this.state.json["36300TG-000103"]});(0,l.ajax)({url:r.base_url+"gatheringrcptinitcount.do",data:{pk:a[0].data.values.pk_gathering.value},success:function(t){var r,o=(u(r={status:"browse"},i.URL_PARAM.PK_SRC,a[0].data.values.pk_gathering.value),u(r,"scene",i.SCENE.LINK),u(r,"appcode","36300TGRF"),u(r,"pagecode","36300TGRF_L01"),r);"1"==parseInt(t.data)&&(o.pagecode="36300TGRF_C01"),e.openTo(null,o)}})}};var r=a(11),o=a(5),n=a(12),l=a(0),i=a(2),s=a(1);function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var d=function(e){var t=e.table.getCheckedRows(r.list_table_id);if(null!=t&&0!=t.length)if(t.length>1)(0,l.toast)({color:"warning",content:this.state.json["36300TG-000086"]});else{t[0]&&t[0].data&&t[0].data.values&&t[0].data.values.pk_billtype&&t[0].data.values.pk_billtype.value;var a=t[0]&&t[0].data&&t[0].data.values&&t[0].data.values.pk_gathering&&t[0].data.values.pk_gathering.value,o=t[0]&&t[0].data&&t[0].data.values&&t[0].data.values.vbillno&&t[0].data.values.vbillno.value,i=t[0]&&t[0].data&&t[0].data.values&&t[0].data.values.pk_group&&t[0].data.values.pk_group.value,s=t[0]&&t[0].data&&t[0].data.values&&t[0].data.values.pk_org&&t[0].data.values.pk_org.value;(0,n.linkVoucherApp)(e,a,i,s,"36J7",o)}else(0,l.toast)({color:"warning",content:this.state.json["36300TG-000085"]})},c=function(e){var t=e.table.getCheckedRows(r.list_table_id);if(null!=t&&0!=t.length)if(t.length>1)(0,l.toast)({color:"warning",content:this.state.json["36300TG-000088"]});else{var a=t[0]&&t[0].data&&t[0].data.values&&t[0].data.values.pk_gathering&&t[0].data.values.pk_gathering.value;(0,l.ajax)({url:r.base_url+"linkqueryaferbill.do",data:{pk:a},success:function(t){var r={},o=t.data;if(o){var n=o[0],l=n.url,s=(n.pks,n.appCode),u=n.linkPageCode;r&&0!=Object.keys(r).length||(r={}),r.scene=i.SCENE.LINK,r.status="browse",r.appcode=s,r.pagecode=u,r[i.LINK_PARAM.ARAP.FLAG]=i.LINK_PARAM.ARAP.FLAG_VALUE,r[i.URL_PARAM.PK_SRC]=a,e.openTo(l,r)}}})}else(0,l.toast)({color:"warning",content:this.state.json["36300TG-000085"]})},p=function(e){var t=e.table.getCheckedRows(r.list_table_id);if(null!=t&&0!=t.length)if(t.length>1)(0,l.toast)({color:"warning",content:this.state.json["36300TG-000088"]});else{var a=t[0]&&t[0].data&&t[0].data.values&&t[0].data.values.vsourcebustype&&t[0].data.values.vsourcebustype.value,o=t[0]&&t[0].data&&t[0].data.values&&t[0].data.values.pk_vsourcebilltype&&t[0].data.values.pk_vsourcebilltype.value,i=t[0]&&t[0].data&&t[0].data.values&&t[0].data.values.pk_srcbill&&t[0].data.values.pk_srcbill.value;if(a!=r.busType.BusType_BillPayAwoke&&a!=r.busType.BusType_BillFBM&&a!=r.busType.BusType_BillDeliver)if(a!=r.busType.BusType_BillHand){var s={status:"browse",LinkBillType:r.billtype,id:i};(0,n.linkApp)(e,o,s)}else(0,l.toast)({color:"warning",content:this.state.json["36300TG-000021"]});else(0,l.toast)({color:"warning",content:this.state.json["36300TG-000020"]})}else(0,l.toast)({color:"warning",content:this.state.json["36300TG-000085"]})},f=function(e){var t=e.table.getCheckedRows(r.list_table_id);if(null!=t&&0!=t.length){for(var a=0,o=[],n=void 0;a<t.length;)(n=t[a]&&t[a].data&&t[a].data.values&&t[a].data.values.pk_gathering&&t[a].data.values.pk_gathering.value)&&(o.push(n),a++);var i=t[a]&&t[a].data&&t[a].data.values&&t[a].data.values.pk_billtype&&t[a].data.values.pk_billtype.value;0!=o.length?(0,l.print)("pdf",r.base_url+"gatheringprint.do",{pk_billtype:i,funcode:r.funcode,nodekey:r.print_nodekey,oids:o}):(0,l.toast)({color:"warning",content:this.state.json["36300TG-000088"]})}else(0,l.toast)({color:"warning",content:this.state.json["36300TG-000088"]})},b=function(e){var t=this,a=e.table.getCheckedRows(r.list_table_id);if(null!=a&&0!=a.length){var o=a[0]&&a[0].data&&a[0].data.values&&a[0].data.values.pk_gathering&&a[0].data.values.pk_gathering.value;(0,l.ajax)({url:r.base_url+"linkqueryntb.do",data:{pk:o},success:function(e){var a=e.data;t.setState({showNtbDetail:!0,ntbdata:a})}})}else(0,l.toast)({color:"warning",content:this.state.json["36300TG-000088"]})},m=function(e){var t=e.table.getCheckedRows(r.list_table_id);if(null!=t&&0!=t.length){for(var a=0,o=[],n=void 0;a<t.length;)(n=t[a]&&t[a].data&&t[a].data.values&&t[a].data.values.pk_gathering&&t[a].data.values.pk_gathering.value)&&(o.push(n),a++);0!=o.length?(0,l.output)({url:r.base_url+"gatheringprint.do",data:{oids:o,funcode:r.funcode,nodekey:r.print_nodekey,outputType:"output"}}):(0,l.toast)({color:"warning",content:this.state.json["36300TG-000088"]})}else(0,l.toast)({color:"warning",content:this.state.json["36300TG-000088"]})},g=function(e,t){var a=this;(0,s.elecSignListPrint)(e,{url:r.base_url+"gatheringelecsignprint.do",offical:t,appCode:r.funcode,nodeKey:t?r.printnodekey.official:r.printnodekey.inofficial,tableCode:r.list_table_id,field_id:r.pkname,field_billno:"vbillno",getOrgFunc:function(e){var t=e&&e.data&&e.data.values&&e.data.values.pk_delgoorg&&e.data.values.pk_delgoorg.value;return t||e&&e.data&&e.data.values&&e.data.values.pk_org&&e.data.values.pk_org.value},validateFunc:function(e){var t=e&&e.data&&e.data.values&&e.data.values.billstatus&&e.data.values.billstatus.value;return r.billstatus_gather.payok!=t?a.state.json["36300TG-000102"]:null}})}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,r,o,n,l,i){if(console.log(e,t,a,r,o,n,l,i),"pk_org_v"===a)r.value;"pk_org"===a&&console.log(r);if("cmaterialvid"===a){var s=r;if(console.log(s),s&&s.length>1){e.cardTable.setValByKeyAndIndex(t,n,a,{value:s[0].refpk,display:s[0].refname});for(var u=1;u<s.length;u++){e.cardTable.addRow(t);var d=e.cardTable.getNumberOfRows(t);e.cardTable.setValByKeyAndIndex(t,d-1,a,{value:s[u].refpk,display:s[u].refname})}}}if("fconfirmpoint"==a)e.createBodyAfterEventData("20521030",this.formId,this.tableId,t,a,o)};a(0)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,n=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(3),i=_(l),s=(_(a(4)),a(0)),u=_(a(40)),d=a(138),c=a(5),p=a(11),f=_(a(23)),b=a(33),m=a(1),g=a(6);function _(e){return e&&e.__esModule?e:{default:e}}function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var v=s.high.NCUploader,y=s.high.ApproveDetail,k=s.high.Inspection,w=s.high.ApprovalTrans,I=(s.base.NCTabsControl,s.base.NCAffix),C=s.base.NCDiv,T=u.default.NCTabPane,S=s.cardCache.setDefData,B=s.cardCache.getDefData,P=(r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.call(a),a.moduleId=p.module_id,a.searchId=p.list_search_id,a.tableId=p.list_table_id,a.pageId=p.list_page_id,a.state={bodyvalues:{},groupCount:{},defaultSelectGrup:0,selectedGroup:"0",showUploader:!1,billId:"",index:null,ts:"",vbillno:"",showApproveDetail:!1,value:"",showNtbDetail:!1,ntbdata:null,showModal:!1,record:{},billtype:"",json:{},inlt:null,assignData:null,assignShow:!1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"componentDidMount",value:function(){var e=B(p.dataSource,"groupCount");e&&(this.state.groupCount=e);var t=B(p.dataSource,"selectedGroup");t&&(this.state.selectedGroup=t),b.setListButtonUseful.call(this)}},{key:"componentWillMount",value:function(){var e,t=this;(0,s.getMultiLang)({moduleId:(e={},h(e,g.module_tmpub_name,[g.module_tmpub_id]),h(e,g.module_name,[p.module_id,p.funcode]),e),callback:function(e,a,r){a?((0,m.saveMultiLangRes)(t.props,e),d.initTemplate.call(t,t.props,e,r),t.setState({json:e,inlt:r})):console.log("未加载到多语资源")}})}},{key:"render",value:function(){var e=this,t=this.props,a=t.table,r=t.button,o=t.search,n=t.modal,l=t.socket,s=(this.props.button.getButtons(),this.props.MutiInit.getIntl(this.moduleId),a.createSimpleTable),g=(a.getTablePageInfo,o.NCCreateSearch),_=(n.createModal,r.createButton,r.getButtons,r.createButtonApp),h=this.props.BillHeadInfo.createBillHeadInfo,S=this.state,B=S.showUploader,P=S.vbillno,A=S.billId,D=S.index,O=S.ts,x=(S.defaultSelectGrup,S.selectedGroup),j=S.showModal,L=S.showApproveDetail,F=(S.record,S.groupCount),R=S.billtype,M=S.showNtbDetail,E=S.ntbdata,V=S.assignData,N=S.assignShow;return i.default.createElement("div",{className:"nc-bill-list"},i.default.createElement(I,null,i.default.createElement(C,{areaCode:C.config.HEADER,className:"nc-bill-header-area"},i.default.createElement("div",{className:"header-title-search-area"},h({title:this.state.json["36300TG-000038"],initShowBackBtn:!1})),i.default.createElement("div",{className:"header-button-area"},_({area:"page_header",onButtonClick:d.buttonClick.bind(this)})))),i.default.createElement("div",{className:"nc-bill-search-area"},g(this.searchId,{clickSearchBtn:d.searchBtnClick.bind(this),showAdvBtn:!0,onAfterEvent:d.searchAfterEvent.bind(this)})),i.default.createElement(u.default,{activeKey:x,onChange:function(t){e.navChangeFun.call(e,t)}},i.default.createElement(T,{key:p.group_needDeal,tab:i.default.createElement("span",null,this.state.json["36300TG-000091"]+"(",i.default.createElement("span",null,F&&F.needDeal||0),")")}),i.default.createElement(T,{key:p.group_needCommit,tab:i.default.createElement("span",null,this.state.json["36300TG-000092"]+"(",i.default.createElement("span",null,F&&F.needCommit||0),")")}),i.default.createElement(T,{key:p.group_approving,tab:i.default.createElement("span",null,this.state.json["36300TG-000093"]+"(",i.default.createElement("span",null,F&&F.approving||0),")")}),i.default.createElement(T,{key:p.group_needgather,tab:i.default.createElement("span",null,this.state.json["36300TG-000094"]+"(",i.default.createElement("span",null,F&&F.needGather||0),")")}),i.default.createElement(T,{key:p.group_all,tab:i.default.createElement("span",null,this.state.json["36300TG-000095"])})),l.connectMesg({tableAreaCode:this.tableId,billpkname:p.pkname,billtype:p.billType,dataSource:p.dataSource}),i.default.createElement("div",{className:"nc-bill-table-area"},s(this.tableId,{dataSource:p.dataSource,pkname:p.pkname,handlePageInfoChange:d.pageInfoClick.bind(this),tableModelConfirm:d.tableModelConfirm,onRowDoubleClick:this.onRowDoubleClick.bind(this),onSelected:b.setListButtonUseful.bind(this),onSelectedAll:b.setListButtonUseful.bind(this),showCheck:!0,showIndex:!0,componentInitFinished:function(){b.setListButtonUseful.call(e)}})),i.default.createElement("div",{className:"nc-faith-demo-div2"},B&&i.default.createElement(v,{billId:A,target:null,placement:"bottom",billNo:P,onHide:function(){e.setState({showUploader:!1})},customInterface:{queryLeftTree:"/nccloud/tmpub/pub/lefttreequery.do",queryAttachments:p.base_url+"gatherattachment.do"}})),i.default.createElement("div",null,L&&i.default.createElement(y,{show:L,billtype:R,billid:A,close:function(){e.setState({showApproveDetail:!1})}})),i.default.createElement("div",null,i.default.createElement(k,{show:M,sourceData:E,cancel:function(){e.setState({showNtbDetail:!1})},affirm:function(){e.setState({showNtbDetail:!1})}})),i.default.createElement("div",null,i.default.createElement(f.default,{title:this.state.json["36300TG-000042"],label:this.state.json["36300TG-000043"],show:j,onOk:function(t){e.backConfirm.call(t)},onClose:function(){e.setState({showModal:!1})}})),i.default.createElement("div",null,N&&i.default.createElement(w,{title:(0,m.loadMultiLang)(this.props,"36300-000015"),data:V,display:N,getResult:function(t){var a={};t&&(a.content=JSON.stringify(t)),e.setState({assignShow:!1,assignData:null}),(0,c.listSingleOperatorNoRecord)(e.props,p.list_page_id,p.list_table_id,p.base_url+"gatheringcommit.do",A,O,D,e.state.json["36300TG-000005"],p.dataSource,!0,a)},cancel:function(){e.setState({assignShow:!1,assignData:null})},hideNote:!1})))}}]),t}(l.Component),o=function(){var e=this;this.onChange=function(t){e.setState({value:t})},this.navChangeFun=function(t,a,r){e.setState({selectedGroup:t},(function(){S(p.dataSource,"selectedGroup",t),d.searchBtnClick.call(e,e.props,null,t,!1)}))},this.onRowDoubleClick=function(t,a,r,o){s.cardCache.setDefData(p.cache.iserrtoast,p.dataSource,!0);var n=e.props.getUrlParam("scene");r.pushTo("/card",{status:"browse",scene:n,id:t.pk_gathering.value})},this.backConfirm=function(t){e.props.getUrlParam("id");var a=e.state.record;if(a){var r={},o=a.pk_gathering.value,n=a.ts.value;r[o]=n;var l={};l.backxjreason=t;var i=e;(0,s.ajax)({url:p.base_url+"gatheringback.do",data:{extParam:l,pkMapTs:r,pageCode:p.list_page_id},success:function(t){t&&((0,s.toast)({color:"success",content:e.state.json["36300TG-000036"]}),i.refresh())}}),e.setState({showModal:!1,record:{},value:""})}},this.editBill=function(t){var a={},r=t.pk_gathering.value,o=t.ts.value;a[r]=o,(0,s.ajax)({url:p.base_url+"gatheringedit.do",data:{pk:r,ts:o,pkMapTs:a,pageCode:p.list_page_id},success:function(t){t&&e.props.pushTo("/card",{status:"edit",from:"card",id:r,ts:o})}})},this.decideBill=function(t){var a={},r=t.pk_gathering.value,o=t.ts.value;a[r]=o,(0,s.ajax)({url:p.base_url+"gatheringdecide.do",data:{pkMapTs:a,pageCode:p.list_page_id},success:function(t){t&&e.props.pushTo("/card",{status:"deal",actionName:"deal",from:"list",id:r})}})},this.delConfirm=function(t,a){var r={},o=t.pk_gathering.value,n=t.ts.value;r[o]=n;var l=p.list_page_id,i=e;(0,s.ajax)({url:p.base_url+"gatheringdelete.do",data:{pkMapTs:r,pageCode:l},success:function(){(0,i.props.table.deleteCacheId)(p.list_table_id,o),i.props.table.deleteTableRowsByIndex(p.list_table_id,a),(0,s.toast)({color:"success",content:e.state.json["36300TG-000035"]})}})},this.refresh=function(){var t=e.state.selectedGroup;e.setState({selectedGroup:t},(function(){S(p.dataSource,"selectedGroup",t),d.searchBtnClick.call(e,e.props,null,t,!1,!0)}))}},r);P=(0,s.createPage)({billinfo:{billtype:"grid",pagecode:p.list_page_id,bodycode:p.list_table_id}})(P),t.default=P},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.searchAfterEvent=t.buttonClick=t.initTemplate=t.pageInfoClick=t.listInitData=t.searchBtnClick=void 0;var r=a(139),o=s(a(140)),n=s(a(142)),l=s(a(143)),i=s(a(144));function s(e){return e&&e.__esModule?e:{default:e}}t.searchBtnClick=r.searchBtnClick,t.listInitData=r.listInitData,t.pageInfoClick=n.default,t.initTemplate=o.default,t.buttonClick=l.default,t.searchAfterEvent=i.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateListView=t.listInitData=t.buildQryData=t.searchBtnClick=void 0;var r=a(0),o=a(11),n=a(1),l=r.cardCache.setDefData,i=r.cardCache.getDefData,s=(t.searchBtnClick=function(e,t,a){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],u=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n&&(a=this.state.selectedGroup),t&&t.conditions&&0!=t.conditions.length?(l(o.list_search_id,o.dataSource,t),l(o.has_query,o.dataSource,"true")):t=i(o.list_search_id,o.dataSource);var c=i(o.has_query,o.dataSource);if(c||t&&t.conditions&&0!=t.conditions.length){var p=s.call(this,e,t,this.state.selectedGroup),f=this;(0,r.ajax)({url:o.base_url+"gatheringpagequery.do",data:p,success:function(t){d.call(f,e,t,a,n,u)}})}},t.buildQryData=function(e,t,a){var r=e.table.getTablePageInfo(o.list_table_id);r.pageIndex=0;var n=u.call(this,a),l=Array.isArray(n)?n:[n],i=e.getSearchParam("p"),s=e.search.getQueryInfo(o.list_search_id,!1);return s.querycondition=t,s.custcondition={logic:"and",conditions:l},s.pageInfo=r,{data:JSON.stringify(s),pageCode:i}}),u=function(e){var t=void 0;switch(e){case"1":t={field:"billstatus",value:{firstvalue:0,secondvalue:null},oprtype:"="};break;case"0":t={field:"billstatus",value:{firstvalue:1,secondvalue:null},oprtype:"="};break;case"2":t={field:"billstatus",value:{firstvalue:2,secondvalue:null},oprtype:"="};break;case"3":t={field:"billstatus",value:{firstvalue:3,secondvalue:null},oprtype:"="};break;case"4":t={};break;default:t={field:"billstatus",value:{firstvalue:1,secondvalue:null},oprtype:"="}}return t},d=(t.listInitData=function(e){var t={pk_ntbparadimvo:e.getUrlParam("pk_ntbparadimvo"),pageInfo:JSON.stringify(e.table.getTablePageInfo(o.list_table_id))},a={pageCode:o.list_page_id,extParam:t},n=this.state.selectedGroup,l=this;(0,r.ajax)({url:o.base_url+"listinitdata.do",data:a,success:function(t){d.call(l,e,t,n)}})},t.updateListView=function(e,t,a,i,s){var u=t.data,d=u.grid,c=u.numvalues;d&&d[o.list_table_id]&&d[o.list_table_id].rows.length>0?(i&&(0,r.toast)({color:"success",content:this.state.json["36300TG-000105"]}),s&&(0,r.toast)({color:"success",content:this.state.json["36300TG-000104"]}),e.table.setAllTableData(o.list_table_id,d[o.list_table_id])):(c&&"1"==c.HasData&&i?(0,r.toast)({color:"success",content:this.state.json["36300TG-000105"]}):s?(0,r.toast)({color:"success",content:this.state.json["36300TG-000104"]}):i&&(0,r.toast)({color:"warning",title:(0,n.loadMultiLang)(this.props,"3601-000016")}),e.table.setAllTableData(o.list_table_id,{rows:[]})),c&&this.setState({defaultSelectGrup:a,selectedGroup:a,groupCount:{needDeal:c.needDeal||0,needCommit:c.needCommit||0,approving:c.approving||0,needGather:c.needGather||0}}),l(o.dataSource,"groupCount",this.state.groupCount),l(o.dataSource,"selectedGroup",this.state.selectedGroup)})},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=this;e.createUIDom({pagecode:i.list_page_id,appcode:e.getUrlParam("c")},(function(a){if(a){if(a.template){var r=a.template;r=function(e,t,a){return a[i.list_search_id].items=a[i.list_search_id].items.map((function(e,t){return e.col="9",e})),a[i.list_search_id].items.find((function(e){return"gatheringfinance.pk_financeorg_r"===e.attrcode})).isShowUnit=!0,(a[i.list_search_id].items.find((function(e){return"gatheringfinance.pk_bankaccount_p"===e.attrcode}))||{}).isShowUnit=!0,(a[i.list_search_id].items.find((function(e){return"gatheringfund.pk_bankaccount_r"===e.attrcode}))||{}).isShowUnit=!0,(a[i.list_search_id].items.find((function(e){return"gatheringfund.pk_cashaccount_r"===e.attrcode}))||{}).isShowUnit=!0,(a[i.list_search_id].items.find((function(e){return"pk_delsourceorg"===e.attrcode}))||{}).isShowUnit=!0,(a[i.list_search_id].items.find((function(e){return"pk_delgoorg"===e.attrcode}))||{}).isShowUnit=!0,(a[i.list_search_id].items.find((function(e){return"pk_fundgetorg"===e.attrcode}))||{}).isShowUnit=!0,(a[i.list_search_id].items.find((function(e){return"pk_transactorg"===e.attrcode}))||{}).isShowUnit=!0,(a[i.list_search_id].items.find((function(e){return"pk_financeorg_r"===e.attrcode}))||{}).isShowUnit=!0,(a[i.list_search_id].items.find((function(e){return"pk_costcenter"===e.attrcode}))||{}).isShowUnit=!0,a[i.list_search_id].items.map((function(e){e.isShowDisabledData=!0,"pk_org"==e.attrcode||"pk_fundgetorg"==e.attrcode||"pk_transactorg"==e.attrcode?(e.isMultiSelectedEnabled=!0,e.queryCondition=function(){return{funcode:i.appcode,TreeRefActionExt:"nccloud.web.tmpub.filter.FundOrgPermissionFilter"}}):e.queryCondition=function(){return{pk_org:(t.search.getSearchValByField(i.list_search_id,"pk_org").value||{}).firstvalue}}})),a[i.list_table_id].pagination=!0,a[i.list_table_id].items=a[i.list_table_id].items.map((function(e,a){return"vbillno"==e.attrcode&&(e.render=function(e,a,r){return React.createElement("a",{style:{cursor:"pointer"},onClick:function(){o.cardCache.setDefData(i.cache.iserrtoast,i.dataSource,!0),t.pushTo("/card",{status:"browse",id:a.pk_gathering.value})}},a&&a.vbillno&&a.vbillno.value)}),e})),a[i.list_table_id].items.push({attrcode:"opr",label:e.state.json["36300TG-000097"],width:200,fixed:"right",className:"table-opr",itemtype:"customer",visible:!0,render:function(a,r,o){console.log(r.vbillstatus,99);var n=[],i=r.voucherflag&&r.voucherflag.value,s=r.vsourcebustype&&r.vsourcebustype.value;return r.billstatus&&"0"==r.billstatus.value?n=["Commit_i","Edit_i","Delete_i"]:r.billstatus&&"1"==r.billstatus.value&&"billhand"==s?n=["Decide_i","UnCommit_i"]:r.billstatus&&"1"==r.billstatus.value&&"billhand"!=s?n=["Decide_i","Back_i"]:r.billstatus&&"2"==r.billstatus.value?n=["UnDecide_i"]:r.billstatus&&"3"==r.billstatus.value?n=["Gather_i"]:r.voucherflag&&r.voucherflag.value&&r.billstatus&&"4"==r.billstatus.value?n=["UnPremit_i"]:!i&&r.billstatus&&"4"==r.billstatus.value?n=["UnGather_i","Premit_i"]:r.billstatus&&"5"==r.billstatus.value?n=["Deliver_i"]:r.billstatus&&"6"==r.billstatus.value?n=["UnDeliver_i"]:r.billstatus&&"7"==r.billstatus.value&&(n=[]),t.button.createErrorButton({record:r,sucessCallBack:function(){return t.button.createOprationButton(n,{rowIndex:o,area:"list_inner",buttonLimit:3,onButtonClick:function(t,n){return l.default.call(e,t,n,a,r,o)}})}})}}),a}(t,e,r),(0,s.setDefOrg2AdvanceSrchArea)(e,i.list_search_id,a),e.meta.setMeta(r,(function(){})),(0,s.setDefOrg2ListSrchArea)(e,i.list_search_id,a)}if(a.button){var n=a.button;e.button.setButtons(n),e.button.setPopContent("Delete_i",t.state.json["36300TG-000089"])}u.setListButtonUseful.call(t)}}))};var r,o=a(0),n=a(141),l=(r=n)&&r.__esModule?r:{default:r},i=a(11),s=a(1),u=a(33);o.base.NCPopconfirm,o.base.NCIcon,o.base.NCTooltip},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,l,i){var s=this,u={operType:"list"};switch(t){case"Edit_i":this.editBill(l);break;case"Delete_i":this.delConfirm(l,i);break;case"Commit_i":(0,n.listSingleOperator)(e,o.list_page_id,o.list_table_id,o.base_url+"gatheringcommit.do",l,o.pkname,i,this.state.json["36300TG-000005"],o.dataSource,!0,{btncode:"Commit_i",pagecode:o.list_page_id},(function(e,t){if(t){Array.isArray(t)&&(t=t[0]);var a=t.workflow;(a&&"approveflow"==a||"workflow"==a)&&s.setState({assignData:t,assignShow:t,index:i,ts:l.ts.value,billId:l[o.pkname].value})}}));break;case"UnCommit_i":(0,n.listSingleOperator)(e,o.list_page_id,o.list_table_id,o.base_url+"gatheringuncommit.do",l,o.pkname,i,this.state.json["36300TG-000006"],o.dataSource,u,{btncode:"UnCommit_i",pagecode:o.list_page_id});break;case"Decide_i":this.decideBill(l);break;case"UnDecide_i":(0,n.listSingleOperator)(e,o.list_page_id,o.list_table_id,o.base_url+"gatheringundecide.do",l,o.pkname,i,this.state.json["36300TG-000007"],o.dataSource,u);break;case"Deliver_i":(0,n.listSingleOperator)(e,o.list_page_id,o.list_table_id,o.base_url+"gatheringdeliver.do",l,o.pkname,i,this.state.json["36300TG-000010"],o.dataSource,u);break;case"UnDeliver_i":(0,n.listSingleOperator)(e,o.list_page_id,o.list_table_id,o.base_url+"gatheringundeliver.do",l,o.pkname,i,this.state.json["36300TG-000011"],o.dataSource,u);break;case"Gather_i":(0,n.listSingleOperator)(e,o.list_page_id,o.list_table_id,o.base_url+"gatheringrecvmoney.do",l,o.pkname,i,this.state.json["36300TG-000012"],o.dataSource,u,null,{btncode:"Gather_i",pagecode:o.list_page_id});break;case"UnGather_i":(0,n.listSingleOperator)(e,o.list_page_id,o.list_table_id,o.base_url+"gatheringunrecvmoney.do",l,o.pkname,i,this.state.json["36300TG-000013"],o.dataSource,u,null,{btncode:"UnGather_i",pagecode:o.list_page_id});break;case"Premit_i":(0,n.listSingleOperator)(e,o.list_page_id,o.list_table_id,o.base_url+"gatheringvoucher.do",l,o.pkname,i,this.state.json["36300TG-000014"],o.dataSource,{btncode:"Premit_i",pagecode:o.list_page_id,operType:"list"});break;case"UnPremit_i":(0,n.listSingleOperator)(e,o.list_page_id,o.list_table_id,o.base_url+"gatheringunvoucher.do",l,o.pkname,i,this.state.json["36300TG-000015"],o.dataSource,{btncode:"UnPremit_i",pagecode:o.list_page_id,operType:"list"});break;case"Back_i":var d=l.vsourcebustype.value;d!==o.busType.BusType_BillFBM&&d!==o.busType.BusType_BillPayAwoke?this.setState({showModal:!0,record:l}):(this.setState({record:l}),(0,r.promptBox)({color:"warning",title:this.state.json["36300TG-000016"],content:this.state.json["36300TG-000017"],beSureBtnClick:this.backConfirm.bind()}))}};var r=a(0),o=a(11),n=a(5);r.base.NCPopconfirm,r.base.NCIcon},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){if(null!=a&&0!=a.length){e.table.getTablePageInfo(o.list_table_id);var n={pks:a,pageCode:o.list_page_id},l=this;(0,r.ajax)({url:o.base_url+"gatheringpagechange.do",data:n,success:function(e){l.props.table.setAllTableData(o.list_table_id,e.data[o.list_table_id])}})}};var r=a(0),o=a(11)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=this,n=e.table.getCheckedRows(r.list_table_id),s=n[0];switch(t){case"Refresh":this.refresh();break;case"Add":console.log(t),e.pushTo("/card",{status:"add"});break;case"Delete":if(1==n.length){var _=n[0].index;(0,l.promptBox)({color:"warning",title:this.state.json["36300TG-000008"],content:this.state.json["36300TG-000079"],beSureBtnClick:this.delConfirm.bind(this,n[0].data.values,_)})}else(0,l.promptBox)({color:"warning",title:this.state.json["36300TG-000008"],content:this.state.json["36300TG-000009"],beSureBtnClick:o.listMultiOperator.bind(this,e,r.list_page_id,r.list_table_id,r.pkname,r.base_url+"gatheringdelete.do",this.state.json["36300TG-000008"],r.dataSource)});break;case"Commit":(0,o.listMultiOperator)(e,r.list_page_id,r.list_table_id,r.pkname,r.base_url+"gatheringcommit.do",this.state.json["36300TG-000005"],r.dataSource,!0,{btncode:"Commit",pagecode:r.list_page_id},(function(e,t){if(t){Array.isArray(t)&&(t=t[0]);var o=t.workflow;(o&&"approveflow"==o||"workflow"==o)&&a.setState({assignData:t,assignShow:t,index:s.index,billId:s&&s.data&&s.data.values&&s.data.values[r.pkname]&&s.data.values[r.pkname].value,ts:s&&s.data&&s.data.values&&s.data.values.ts&&s.data.values.ts.value})}}));break;case"UnCommit":(0,o.listMultiOperator)(e,r.list_page_id,r.list_table_id,r.pkname,r.base_url+"gatheringuncommit.do",this.state.json["36300TG-000006"],r.dataSource,null,{btncode:"UnCommit",pagecode:r.list_page_id});break;case"BatchPremit":(0,o.listMultiOperator)(e,r.list_page_id,r.list_table_id,r.pkname,r.base_url+"gatheringvoucher.do",this.state.json["36300TG-000014"],r.dataSource,null,{btncode:"BatchPremit",pagecode:r.list_page_id});break;case"BatchUnPremit":(0,o.listMultiOperator)(e,r.list_page_id,r.list_table_id,r.pkname,r.base_url+"gatheringunvoucher.do",this.state.json["36300TG-000015"],r.dataSource,null,{btncode:"BatchUnPremit",pagecode:r.list_page_id});break;case"Gather":(0,o.listMultiOperator)(e,r.list_page_id,r.list_table_id,r.pkname,r.base_url+"gatheringrecvmoney.do",this.state.json["36300TG-000012"],r.dataSource,null,{btncode:"Gather",pagecode:r.list_page_id});break;case"UnGather":(0,o.listMultiOperator)(e,r.list_page_id,r.list_table_id,r.pkname,r.base_url+"gatheringunrecvmoney.do",this.state.json["36300TG-000013"],r.dataSource,null,{btncode:"UnGather",pagecode:r.list_page_id});break;case"File":var h=e.table.getCheckedRows(this.tableId),v="",y="";if(null==h||0==h.length)return void(0,l.toast)({color:"warning",content:this.state.json["36300TG-000085"]});if(h.length>1)return void(0,l.toast)({color:"warning",content:this.state.json["36300TG-000086"]});1==h.length&&(h.forEach((function(e){e.data.values.pk_gathering&&null!=e.data.values.pk_gathering.value&&(v=e.data.values.pk_gathering.value),e.data.values.vbillno&&null!=e.data.values.vbillno.value&&(y=e.data.values.vbillno.value)})),this.setState({billId:v,vbillno:y,showUploader:!this.state.showUploader,target:null}));break;case"Copy":if(null==n||0==n.length)return void(0,l.toast)({color:"warning",content:this.state.json["36300TG-000085"]});if(n.length>1)return void(0,l.toast)({color:"warning",content:this.state.json["36300TG-000088"]});if("billdeliver"==(n[0]&&n[0].data&&n[0].data.values&&n[0].data.values.vsourcebustype&&n[0].data.values.vsourcebustype.value))return void(0,l.toast)({color:"warning",content:this.state.json["36300TG-000004"]});var k=n[0]&&n[0].data&&n[0].data.values&&n[0].data.values.pk_gathering&&n[0].data.values.pk_gathering.value;e.pushTo("/card",{status:"copy",id:k,isCopy:!0,from:"list"});break;case"Print":f.call(this,e);break;case"OffiPrint":g.call(this,e,!0);break;case"InOffiPrint":g.call(this,e,!1);break;case"Output":m.call(this,e);break;case"LinkQueryWorkFlow":var w=n[0]&&n[0].data&&n[0].data.values&&n[0].data.values.pk_gathering&&n[0].data.values.pk_gathering.value,I=n[0]&&n[0].data&&n[0].data.values&&n[0].data.values.pk_billtype&&n[0].data.values.pk_billtype.value;console.log(w),this.setState({showApproveDetail:!0,billId:w,billtype:I});break;case"LinkQueryBeforBill":console.log(t),p.call(this,e);break;case"LinkQueryAfterBill":console.log(t),c.call(this,e);break;case"LinkQueryPZ":d.call(this,e);break;case"LinkQueryNtb":b.call(this,e);break;case"LinkReturnBill":if(null==n||0==n.length||n.length>1)return void(0,l.toast)({color:"warning",content:this.state.json["36300TG-000088"]});if(n[0].data.values.billstatus.value!=r.billstatus_gather.payok)return void(0,l.toast)({color:"warning",content:this.state.json["36300TG-000103"]});(0,l.ajax)({url:r.base_url+"gatheringrcptinitcount.do",data:{pk:n[0].data.values.pk_gathering.value},success:function(t){var a,r=(u(a={status:"browse"},i.URL_PARAM.PK_SRC,n[0].data.values.pk_gathering.value),u(a,"scene",i.SCENE.LINK),u(a,"appcode","36300TGRF"),u(a,"pagecode","36300TGRF_L01"),a);"1"==parseInt(t.data)&&(r.pagecode="36300TGRF_C01"),e.openTo(null,r)}})}};var r=a(11),o=a(5),n=a(12),l=a(0),i=a(2),s=a(1);function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var d=function(e){var t=e.table.getCheckedRows(r.list_table_id);if(null!=t&&0!=t.length)if(t.length>1)(0,l.toast)({color:"warning",content:this.state.json["36300TG-000086"]});else{t[0]&&t[0].data&&t[0].data.values&&t[0].data.values.pk_billtype&&t[0].data.values.pk_billtype.value;var a=t[0]&&t[0].data&&t[0].data.values&&t[0].data.values.pk_gathering&&t[0].data.values.pk_gathering.value,o=t[0]&&t[0].data&&t[0].data.values&&t[0].data.values.vbillno&&t[0].data.values.vbillno.value,i=t[0]&&t[0].data&&t[0].data.values&&t[0].data.values.pk_group&&t[0].data.values.pk_group.value,s=t[0]&&t[0].data&&t[0].data.values&&t[0].data.values.pk_org&&t[0].data.values.pk_org.value;(0,n.linkVoucherApp)(e,a,i,s,"36J7",o)}else(0,l.toast)({color:"warning",content:this.state.json["36300TG-000085"]})},c=function(e){var t=e.table.getCheckedRows(r.list_table_id);if(null!=t&&0!=t.length)if(t.length>1)(0,l.toast)({color:"warning",content:this.state.json["36300TG-000088"]});else{var a=t[0]&&t[0].data&&t[0].data.values&&t[0].data.values.pk_gathering&&t[0].data.values.pk_gathering.value;(0,l.ajax)({url:r.base_url+"linkqueryaferbill.do",data:{pk:a},success:function(t){var r={},o=t.data;if(o){var n=o[0],l=n.url,s=(n.pks,n.appCode),u=n.linkPageCode;r&&0!=Object.keys(r).length||(r={}),r.scene=i.SCENE.LINK,r.status="browse",r.appcode=s,r.pagecode=u,r[i.LINK_PARAM.ARAP.FLAG]=i.LINK_PARAM.ARAP.FLAG_VALUE,r[i.URL_PARAM.PK_SRC]=a,e.openTo(l,r)}}})}else(0,l.toast)({color:"warning",content:this.state.json["36300TG-000085"]})},p=function(e){var t=e.table.getCheckedRows(r.list_table_id);if(null!=t&&0!=t.length)if(t.length>1)(0,l.toast)({color:"warning",content:this.state.json["36300TG-000088"]});else{var a=t[0]&&t[0].data&&t[0].data.values&&t[0].data.values.vsourcebustype&&t[0].data.values.vsourcebustype.value,o=t[0]&&t[0].data&&t[0].data.values&&t[0].data.values.pk_vsourcebilltype&&t[0].data.values.pk_vsourcebilltype.value,i=t[0]&&t[0].data&&t[0].data.values&&t[0].data.values.pk_srcbill&&t[0].data.values.pk_srcbill.value;if(a!=r.busType.BusType_BillPayAwoke&&a!=r.busType.BusType_BillFBM&&a!=r.busType.BusType_BillDeliver)if(a!=r.busType.BusType_BillHand){var s={status:"browse",LinkBillType:r.billtype,id:i};(0,n.linkApp)(e,o,s)}else(0,l.toast)({color:"warning",content:this.state.json["36300TG-000021"]});else(0,l.toast)({color:"warning",content:this.state.json["36300TG-000020"]})}else(0,l.toast)({color:"warning",content:this.state.json["36300TG-000085"]})},f=function(e){var t=e.table.getCheckedRows(r.list_table_id);if(null!=t&&0!=t.length){for(var a=0,o=[],n=void 0;a<t.length;)(n=t[a]&&t[a].data&&t[a].data.values&&t[a].data.values.pk_gathering&&t[a].data.values.pk_gathering.value)&&(o.push(n),a++);var i=t[a]&&t[a].data&&t[a].data.values&&t[a].data.values.pk_billtype&&t[a].data.values.pk_billtype.value;0!=o.length?(0,l.print)("pdf",r.base_url+"gatheringprint.do",{pk_billtype:i,funcode:r.funcode,nodekey:r.print_nodekey,oids:o}):(0,l.toast)({color:"warning",content:this.state.json["36300TG-000088"]})}else(0,l.toast)({color:"warning",content:this.state.json["36300TG-000088"]})},b=function(e){var t=this,a=e.table.getCheckedRows(r.list_table_id);if(null!=a&&0!=a.length){var o=a[0]&&a[0].data&&a[0].data.values&&a[0].data.values.pk_gathering&&a[0].data.values.pk_gathering.value;(0,l.ajax)({url:r.base_url+"linkqueryntb.do",data:{pk:o},success:function(e){var a=e.data;t.setState({showNtbDetail:!0,ntbdata:a})}})}else(0,l.toast)({color:"warning",content:this.state.json["36300TG-000088"]})},m=function(e){var t=e.table.getCheckedRows(r.list_table_id);if(null!=t&&0!=t.length){for(var a=0,o=[],n=void 0;a<t.length;)(n=t[a]&&t[a].data&&t[a].data.values&&t[a].data.values.pk_gathering&&t[a].data.values.pk_gathering.value)&&(o.push(n),a++);0!=o.length?(0,l.output)({url:r.base_url+"gatheringprint.do",data:{oids:o,funcode:r.funcode,nodekey:r.print_nodekey,outputType:"output"}}):(0,l.toast)({color:"warning",content:this.state.json["36300TG-000088"]})}else(0,l.toast)({color:"warning",content:this.state.json["36300TG-000088"]})},g=function(e,t){var a=this;(0,s.elecSignListPrint)(e,{url:r.base_url+"gatheringelecsignprint.do",offical:t,appCode:r.funcode,nodeKey:t?r.printnodekey.official:r.printnodekey.inofficial,tableCode:r.list_table_id,field_id:r.pkname,field_billno:"vbillno",getOrgFunc:function(e){var t=e&&e.data&&e.data.values&&e.data.values.pk_delgoorg&&e.data.values.pk_delgoorg.value;return t||e&&e.data&&e.data.values&&e.data.values.pk_org&&e.data.values.pk_org.value},validateFunc:function(e){var t=e&&e.data&&e.data.values&&e.data.values.billstatus&&e.data.values.billstatus.value;return r.billstatus_gather.payok!=t?a.state.json["36300TG-000102"]:null}})}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,r,o,n,l,i){if(console.log(e,t,a,r,o,n,l,i),"pk_org_v"===a)r.value;"pk_org"===a&&console.log(r);if("cmaterialvid"===a){var s=r;if(console.log(s),s&&s.length>1){e.cardTable.setValByKeyAndIndex(t,n,a,{value:s[0].refpk,display:s[0].refname});for(var u=1;u<s.length;u++){e.cardTable.addRow(t);var d=e.cardTable.getNumberOfRows(t);e.cardTable.setValByKeyAndIndex(t,d-1,a,{value:s[u].refpk,display:s[u].refname})}}}if("fconfirmpoint"==a)e.createBodyAfterEventData("20521030",this.formId,this.tableId,t,a,o)};a(0)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var r,o,n,l=a(0),i=a(213),s=(r=i)&&r.__esModule?r:{default:r};o=s.default,n="app",(0,l.RenderRouter)(o,n)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),o=i(a(137)),n=i(a(129)),l=i(a(120));function i(e){return e&&e.__esModule?e:{default:e}}var s=(0,r.asyncComponent)((function(){return Promise.resolve().then(a.t.bind(null,123,7))})),u=[{path:"/",component:o.default,exact:!0},{path:"/list",component:o.default},{path:"/card",component:l.default},{path:"/linkcard",component:s},{path:"/linklist",component:n.default}];t.default=u}])}));
//# sourceMappingURL=index.12f8eaec.js.map