/*! @ncctag {"provider":"test","date":"2020-5-11 22:19:54"} */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nc-lightapp-front")):"function"==typeof define&&define.amd?define(["nc-lightapp-front"],t):"object"==typeof exports?exports["fts/commission/commissiongathering/util/index"]=t(require("nc-lightapp-front")):e["fts/commission/commissiongathering/util/index"]=t(e["nc-lightapp-front"])}(window,(function(e){return function(e){var t={};function r(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(i,o,function(t){return e[t]}.bind(null,o));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="../../../../",r(r.s=33)}({0:function(t,r){t.exports=e},11:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.app_id="0001Z610000000029LJM",t.module_id="3630",t.appcode="36300TG",t.oid="1001Z61000000002OG84",t.base_url="/nccloud/fts/commission/",t.button_limit=9,t.list_page_id="36300TG_L01",t.list_linkpage_id="36300TG_L01_LINK",t.list_search_id="gathering_search",t.list_table_id="gathering",t.has_query="has_query",t.card_page_id="36300TG_C01",t.card_linkpage_id="36300TG_C01_LINK",t.card_from_id="gathering",t.card_from_exchangegathermsg_id="exchangegathermsg",t.card_from_delivermsg_id="delivermsg",t.card_from_vsourcemsg_id="vsourcemsg",t.card_from_auditinfo_id="auditinfo",t.card_table1_id="gatheringfinance",t.card_table2_id="gatheringfund",t.card_table2_edit_id="childform4",t.card_table1_edit_id="childform2",t.lang=["36300TG","3630"],t.group_needDeal="0",t.group_needCommit="1",t.group_approving="2",t.group_needgather="3",t.group_all="4",t.saga_gtxid="saga_gtxid",t.pk="pk_gathering",t.billtype="36J2",t.billType="36J2",t.funcode="36300TG",t.print_templateid="1001Z61000000001OP6Q",t.print_nodekey="gathernccprint",t.busType={BusType_BillRecv:"billrecv",BusType_BillPayAwoke:"billpayawoke",BusType_BillMerge:"billmerge",BusType_BillDeliver:"billdeliver",BusType_BillHand:"billhand",BusType_BillFBM:"billfbm"},t.card_shouder_buttons=["AddLine","CopyLine","DeleteLine","AddLine2","CopyLine2","DeleteLine2"],t.list_head_buttons=["Delete","Commit","UnCommit","Gather","UnGather","File","Copy","Print","Output","LinkQueryWorkFlow","LinkQueryBeforBill","LinkQueryAfterBill","LinkQueryPZ","LinkQueryNtb","OffiPrint","InOffiPrint","LinkReturnBill","BatchPremit","BatchUnPremit"],t.card_hidden_buttons=["Save","SaveAdd","SaveCommit","Delete","Commit","Decide","Back","UnDecide","UnCommit","Approve","Deliver","UnDeliver","Gather","UnApprove","Cancel","Add","Premit","UnPremit","LinkQueryPZ","LinkQueryAferBill","LinkReturnBill","Edit","Copy","UnGather","OffiPrint","InOffiPrint"],t.GetMode={Gather_Direct:{value:"direct",display:""}},t.dataSource="tm.fts.commission.commissiongathering.dataSource",t.pkname="pk_gathering",t.printnodekey={official:"OFFICIAL",inofficial:"INOFFICIAL"},t.billstatus_gather={payok:"4"},t.cache={iserrtoast:"iserrtoast"}},33:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearOutAccountView=t.VoucherLinkBill=t.setListButtonUseful=t.setCardShouderBtnUseful=void 0;var i=r(0),o=r(11);i.cardCache.setDefData,t.setCardShouderBtnUseful=function(e,t){e.button.setButtonDisabled(o.card_shouder_buttons,!0),console.log(e.form.getFormItemsValue(o.card_from_id,"pk_org")),e.form.getFormItemsValue(o.card_from_id,"pk_org")&&e.form.getFormItemsValue(o.card_from_id,"pk_org").value&&e.button.setButtonDisabled(["AddLine","AddLine2"],!1),"deal"==e.getUrlParam("status")&&e.button.setButtonDisabled(["AddLine2"],!1);var r=!1,i=e.form.getFormItemsValue(o.card_from_id,"vsourcebustype")&&e.form.getFormItemsValue(o.card_from_id,"vsourcebustype").value;if((o.busType.BusType_BillFBM==i&&(r=!0),r&&(e.button.setButtonDisabled(["AddLine"],!0),e.button.setButtonDisabled(["AddLine2"],!0)),e.cardTable.getNumberOfRows(o.card_table1_id,!0)>0)&&e.cardTable.getCheckedRows(o.card_table1_id).length>0){if(r)return e.button.setButtonDisabled(["AddLine","CopyLine"],!0),void e.button.setButtonDisabled(["DeleteLine"],!1);e.button.setButtonDisabled(["DeleteLine","CopyLine"],!1)}if(e.cardTable.getNumberOfRows(o.card_table2_id,!0)>0&&e.cardTable.getCheckedRows(o.card_table2_id).length>0){if(r)return void e.button.setButtonDisabled(["AddLine2","DelLine2","CopyLine2"],!0);e.button.setButtonDisabled(["DeleteLine2","CopyLine2"],!1)}},t.setListButtonUseful=function(){this.props.button.setButtonDisabled(o.list_head_buttons,!0);var e=this.props.table.getCheckedRows(o.list_table_id);if(e&&0!=e.length)if(1==e.length){this.props.button.setButtonDisabled(["Copy","Output","Print","OutPut","File","LinkQueryNtb","LinkQueryBeforBill"],!1);var t=null,r=null,i=null;e.forEach((function(e){t=e.data.values.billstatus.value,e.data.values.vbillstatus.value,r=e.data.values.voucherflag.value,i=e.data.values.vsourcebustype.value}));var n=[];"0"==t?n=["Commit","Delete"]:"1"==t&&"billhand"==i?n=["UnCommit","LinkQueryWorkFlow"]:"1"==t&&"billhand"!=i?n=["LinkQueryWorkFlow","UnCommit"]:"2"==t?n=["LinkQueryWorkFlow"]:"3"==t?n=["Gather","LinkQueryWorkFlow"]:r&&"4"==t?n=["LinkQueryWorkFlow","LinkQueryPZ","LinkQueryAfterBill","LinkReturnBill","OffiPrint","InOffiPrint","BatchUnPremit"]:r||"4"!=t?("5"==t||"6"==t)&&(n=["LinkQueryWorkFlow"]):n=["UnGather","LinkQueryWorkFlow","LinkQueryAfterBill","LinkReturnBill","OffiPrint","InOffiPrint","BatchPremit"],this.props.button.setButtonDisabled(n,!1)}else e.length>1&&this.props.button.setButtonDisabled(o.list_head_buttons,!1);else this.props.button.setButtonDisabled(o.list_head_buttons,!0)},t.VoucherLinkBill=function(e,t,r){var n,a={pageInfo:JSON.stringify(e.table.getTablePageInfo(r))};(n=i.cacheTools.get("checkedData"))&&n.length>0&&(0,i.ajax)({url:o.base_url+"pzlinkquerybill.do",data:{operatingLogVO:n,pageCode:t,extParam:a},success:function(t){var i=t.success,o=t.data;if(console.log(t),i){var n=o&&o.grid;if(n)if(n[r].rows.length>1)e.table.setAllTableData(r,n[r]);else if(1==n[r].rows.length){var a=n[r].rows[0].values.pk_gathering.value;e.pushTo("/linkcard",{status:"browse",id:a,scene:"'scene'"})}else e.table.setAllTableData(r,{rows:[]});else e.table.setAllTableData(r,{rows:[]})}}})},t.clearOutAccountView=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"pk_clearoutaccount",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pk_clearoutbankaccount";if(e&&t){var n=e.getUrlParam("status"),a="browse"==n,l={};if(a)l[r]=!0,l[i]=!1;else{var u=(e.form.getFormItemsValue(o.card_from_id,"clearoutacctype")||{}).value,s=e.form.getFormItemsValue(o.card_from_id,"pk_clearoutbankaccount");s&&s.value||e.form.setFormItemsValue(o.card_from_id,{pk_clearoutbankaccount:{value:e.form.getFormItemsValue(o.card_from_id,"pk_clearoutaccount")&&e.form.getFormItemsValue(o.card_from_id,"pk_clearoutaccount").value,display:e.form.getFormItemsValue(o.card_from_id,"pk_clearoutaccount")&&e.form.getFormItemsValue(o.card_from_id,"pk_clearoutaccount").display}}),u&&"inneraccount"!=u?(l[i]=!0,l[r]=!1):(l[i]=!1,l[r]=!0)}e.form.setFormItemsVisible(o.card_from_id,l)}}}})}));
//# sourceMappingURL=index.12f8eaec.js.map