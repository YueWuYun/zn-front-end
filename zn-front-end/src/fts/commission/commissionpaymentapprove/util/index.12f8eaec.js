/*! @ncctag {"provider":"test","date":"2020-5-11 22:19:54"} */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nc-lightapp-front")):"function"==typeof define&&define.amd?define(["nc-lightapp-front"],t):"object"==typeof exports?exports["fts/commission/commissionpaymentapprove/util/index"]=t(require("nc-lightapp-front")):e["fts/commission/commissionpaymentapprove/util/index"]=t(e["nc-lightapp-front"])}(window,(function(e){return function(e){var t={};function a(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="../../../../",a(a.s=62)}({0:function(t,a){t.exports=e},10:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.orgVersionView=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"pk_org",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pk_org_v";if(e&&t){var i=e.getUrlParam("status"),o="browse"==i,r={};r[a]=!o,r[n]=o,e.form.setFormItemsVisible(t,r)}},t.orgVersionViewNew=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"pk_org",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pk_org_v";if(e&&t){var i=e.getUrlParam("status"),o="browse"==i,r={};r[a]=!o,r[n]=o,e.form.setItemsVisible(t,r)}}},2:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.URL_PARAM={ID:"id",STATE:"status",SCENE:"scene",TBB_LINK:"pk_ntbparadimvo",LINK_ID:"linkId",PK_SRC:"pk_src"},t.sagaField={frozen:"saga_frozen",gtxid:"saga_gtxid",btxid:"saga_btxid",status:"saga_status"},t.sagaFrozenEnum={frozen:1,unfrozen:0},t.sagaStateEnum={success:0,fail:1},t.SCENE={DEFAULT:"defaultsce",APPROVE:"approvesce",LINK:"linksce",FIP:"fip",OTHER:"othersce"},t.LINKTYPE={NORMAL:"NORMAL",BILL_REVIEW:"BILL_REVIEW"},t.LINK_PARAM={ARAP:{FLAG:"flag",FLAG_VALUE:"ftsLinkArap"}},t.MODULE_INFO={TMPUB:"tmpub",TMPUB_NUM:"3601"},t.COMMON_URL={ELECSIGNPRINTCHECK:"/nccloud/tmpub/pub/elecsignprintcheck.do"},t.cache={rateinfo:"rateinfo",iserrtoast:"iserrtoast"},t.SPLIT_TBBCTRLTYPE="_ctrltype_",t.tbbwarntype={flexibility:"0",inflexibility:"1",warning:"2"}},21:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.app_id="0001Z61000000001TS3P",t.module_id="3630",t.oid="1001Z61000000002M6N3",t.base_url="/nccloud/fts/commission/",t.base_path="/fts/commission/commissionpayment/",t.ConfirmData={pmtConfirmUrl:"/obm/ebankconfirmpay/confirmpay/main/index.html#/card",pagecode:"36100CONFM_C01",appcode:"36100CONFM",billtype:"36CC"},t.PayChangeData={payChangeUrl:"/fts/commission/payinfochange/card/index.html",pagecode:"36300CPI_C01",appcode:"36300CPI",billtype:"36J8"},t.button_limit=3,t.billtype="36J5",t.link_billtype="36J1",t.funcode="36300TP_APPROVE",t.funcode_multi="36300TP",t.print_templateid="1001Z61000000001NJ9N",t.print_nodekey=null,t.PaymentConst={dataSource:"TM_FTS_CommissionPayment_base",pk_filed:"pk_payment",hasQryFlag:"hasQryFlag",queryCondition:"queryCondition",islink:"islinkpayment",saveAddOrg:"saveaddorg"},t.printnodekey={official:"OFFICIAL",inofficial:"INOFFICIAL"},t.list_page_id="36300TP_L01",t.list_search_id="36300TP_search",t.list_table_id="payment",t.card_page_id="36300TP_APPROVE_C01",t.card_from_id="payment",t.card_from_exchangemsg_id="exchangepay",t.card_from_delivermsg_id="deliver",t.card_from_vsourcemsg_id="vsourcemsg",t.card_from_auditinfo_id="auditinfo",t.card_table1_id="paymentfinance",t.card_table2_id="paymentfund",t.card_tablebrowse1_id="childform1",t.card_tablebrowse2_id="childform3",t.card_tableedit1_id="childform2",t.card_tableedit2_id="childform4",t.saga_gtxid="saga_gtxid",t.pk="pk_payment",t.PayFundVO={ISEBANKWRITEFULL:"isebankwritefull",ISEBANKBACKFULL:"isebankbackfull",ISEBANKUNBACKFULL:"isebankunbackfull",ISNETPAY:"isnetpay",ISEBANKUNBACK:"isebankunback",ISEBANKBACK:"isebankback"},t.viewmod_deal="deal",t.LISTGROUP={NEEDDEAL:"0",NEEDCOMMIT:"1",APPROVING:"2",NEEDPAY:"3",PAYING:"4",ALL:"5"},t.billstatus={WaitCommit:0,WaitDecide:1,WaitApprove:2,WaitPay:3,Paying:4,WaitTransfer:5,Transfered:6,Back:7,PayOK:8,Merge:9,Abolish:10},t.group_all=5,t.busType={BusType_BillPay:"billpay",BusType_BillPayAwoke:"billpayawoke",BusType_BillMerge:"billmerge",BusType_BillDeliver:"billdeliver",BusType_BillHand:"billhand",BusType_BillFBM:"billfbm"},t.NetPay_Status={NetPay_Success:0,NetPay_Fail:1,NetPay_Paying:2,NetPay_UnCommit:3},t.IPaymentConst={Pay_Proxy:{value:"proxypay",display:"代理支付"},Pay_Note:{value:"notepay",display:"票据支付"},Pay_Group:{value:"grouppay",display:"集团支付"},Pay_Cash:{value:"cashpay",display:"现金支付"},Pay_Back:{value:"backpay",display:"回拨支付"},Pay_Direct:{value:"directpay",display:"直接支付"},Pay_Hand:{value:"handpay",display:"手工支付"}},t.IClearConst={DeliverDirection_Up:"up",DeliverDirection_Down:"down",DeliverType_Step:"step",DeliverType_Direct:"direct",RefNodeName_InnerAccount:"内部账户",RefNodeName_BankAccount:"使用权参照"},t.Button_PayVisible=["Pay","MergePay","CallBackPay","RecoveryFund","UnPay","Abolish","QueryStatus","PayChangeBill","UnionCheckPayBill"],t.Button_CardHeadDisable=["AddLine","DelLine","CopyLine","AddLine2","DelLine2","CopyLine2"],t.card_hidden_buttons=["BankAccReWrite","Save","SaveAdd","SaveCommit","Delete","Commit","Decide","Back","Undecide","Uncommit","Deliver","Undeliver","Pay","MergePay","CallBackPay","RecoveryFund","UnPay","Abolish","UnionCheckPayBill","QueryStatus","PayChangeBill","Cancel","Add","Premit","Unpremit","Edit","Copy"],t.head_hidden_buttons=["BatchDelete","Copy","BatchCommit","File","Print","BatchBankAccBrowse","BatchDownReBrowse","BatchUpReBrowse"],t.cache={iserrtoast:"iserrtoast"}},62:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handlerCardTableInsertAfter=t.getRelationIndexFinanceOrg=t.isEbankBuLuInfoFullForList=t.isEbankBuLuInfoFull=t.VoucherLinkBill=t.handleIsNeedCADentify=t.setListButtonUseful=t.setCardShouderBtnUseful=t.versionControl=void 0;var n=a(0),i=a(10),o=a(21),r=a(2),l=(t.versionControl=function(e){var t={};t[o.card_from_id]=["pk_org","pk_fundpayorg","pk_transactorg"];(0,i.orgVersionView)(e,t,{})},t.setCardShouderBtnUseful=function(e,t,a,n){var i="deal"==e.getUrlParam("status"),r=e.form.getFormItemsValue(o.card_from_id,"pk_org")&&e.form.getFormItemsValue(o.card_from_id,"pk_org").value,l=e.cardTable.getCheckedRows(t),s=!1;if(l&&l.length>0&&(s=!0),t==o.card_table1_id){if(e.button.setButtonDisabled(["AddLine","DelLine","CopyLine"],!0),i)return;r&&e.button.setButtonDisabled(["AddLine"],!1),e.cardTable.getCheckedRows(t),(parseInt(a)>0||s)&&e.button.setButtonDisabled(["DelLine","CopyLine"],!1)}else e.button.setButtonDisabled(["AddLine2","DelLine2","CopyLine2"],!0),r&&e.button.setButtonDisabled(["AddLine2"],!1),(parseInt(a)>0||s)&&e.button.setButtonDisabled(["DelLine2","CopyLine2"],!1)},t.setListButtonUseful=function(){this.props.button.setButtonDisabled(list_head_buttons,!0);var e=this.props.table.getCheckedRows(list_table_id);if(e&&0!=e.length){if(1==e.length){this.props.button.setButtonDisabled(["Copy","linkgroup","LinkNtbPlan","File","Print","OutPut","Refresh"],!1);var t=null,a=null,n=null,i=null;e.forEach((function(e){t=e.data.values.billstatus.value,a=e.data.values.vbillstatus.value,n=e.data.values.ismakevoucher.value,i=e.data.values.recmodul.value})),"5"==t?this.props.button.setButtonDisabled(["BatchDelete","BatchCommit"],!1):"2"==t?this.props.button.setButtonDisabled(["BatchUncommit","LinkViewApprove"],!1):"3"!=t||n?"1"==a&&n&&this.props.button.setButtonDisabled(["LinkViewApprove","LinkSendBill","LinkQueryVoucher"],!1):this.props.button.setButtonDisabled(["BatchUncommit","LinkViewApprove","LinkSendBill"],!1),i==sourceModel.ModuleCode_CMP&&this.props.button.setButtonDisabled(["LinkSourceBill"],!1)}else if(e.length>1){this.props.button.setButtonDisabled(["Print","OutPut","Refresh"],!1);var o=this.state.selectedGroup;o==group_approving?this.props.button.setButtonDisabled(["BatchUncommit"],!1):o==group_needcommit?this.props.button.setButtonDisabled(["BatchDelete","BatchCommit"],!1):o==group_all&&this.props.button.setButtonDisabled(["BatchDelete","BatchCommit","BatchUncommit"],!1)}}else this.props.button.setButtonDisabled(list_head_buttons,!0)},t.handleIsNeedCADentify=function(e,t,a,i,r){var l=[];if(r&&0!=r.length)l=r;else if("card"==a){var s=e.form.getFormItemsValue(t,"pk_payment").value;l.push(s)}else{var u=e.table.getCheckedRows(t);if(u&&u.length>0)for(var d=0;d<u.length;d++){var c=u[d].data.values.pk_payment.value;l.push(c)}}if(0==l.length)return!1;var p=!1;return(0,n.ajax)({url:o.base_url+"paymentcadentify.do",data:{actionCode:i,pks:l},async:!1,success:function(e){p=e.data},error:function(e){p="error",(0,n.toast)({color:"warning",content:e.message})}}),p},t.VoucherLinkBill=function(e,t,a){var i;(i=n.cacheTools.get("checkedData"))&&i.length>0&&(0,n.ajax)({url:o.base_url+"paymentvoucherbill.do",data:{operatingLogVO:i,pageCode:t},success:function(t){var n=t.success,i=t.data;if(n)if(i)if(1==i[a].rows.length){var l=i[a].rows[0].values.pk_payment.value;e.pushTo("/card",{status:"browse",scene:r.SCENE.LINK,id:l,pagecode:o.card_page_id})}else i?e.table.setAllTableData(a,i[a]):e.table.setAllTableData(a,{rows:[]});else e.table.setAllTableData(a,{rows:[]})}})},t.isEbankBuLuInfoFull=function(e,t){return"Pay"==t?l(e,o.PayFundVO.ISNETPAY,o.PayFundVO.ISEBANKWRITEFULL):"MergePay"!=t&&("RecoveryFund"==t?l(e,o.PayFundVO.ISEBANKUNBACK,o.PayFundVO.ISEBANKUNBACKFULL):"CallBackPay"==t?l(e,o.PayFundVO.ISEBANKBACK,o.PayFundVO.ISEBANKBACKFULL):void 0)},function(e,t,a){var n=e.cardTable.getAllRows(o.card_table2_id,!1);if(null!=n&&n.length>0)for(var i=0;i<n.length;i++){var r=n[i],l=r.values[t].value,s=r.values[a].value;if(l&&"N"!=l&&(!s||"N"==s||0==s))return!1}return!0});t.isEbankBuLuInfoFullForList=function(e,t,a,i){var r=a.pk_payment&&a.pk_payment.value,l=!1;return(0,n.ajax)({url:o.base_url+"paymentisbulufull.do",data:{actionCode:t,pk:r},async:!1,success:function(e){l=e.data},error:function(e){l="error",(0,n.toast)({color:"warning",content:e.message})}}),l},t.getRelationIndexFinanceOrg=function(e,t,a,n){var i=(t.values.relationindex||{}).value;if(null!=i&&null!=i)for(var o=e.cardTable.getAllRows(n,!1),r=0;r<o.length;r++){var l=o[r];if(l.values.relationindex.value==i)return l.values.pk_financeorg_p.value||null}},t.handlerCardTableInsertAfter=function(e,t){var a=this.rateflag;console.log("组织本币汇率flag",a),e.cardTable.setColEditableByKey(o.card_table1_id,"olcrate",a),e.cardTable.setColEditableByKey(o.card_table2_id,"olcrate",a)}}})}));
//# sourceMappingURL=index.12f8eaec.js.map