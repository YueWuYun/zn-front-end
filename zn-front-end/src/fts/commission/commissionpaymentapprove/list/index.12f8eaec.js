/*! @ncctag {"provider":"test","date":"2020-5-11 22:19:54"} */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nc-lightapp-front"),require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["nc-lightapp-front","react","react-dom"],t):"object"==typeof exports?exports["fts/commission/commissionpaymentapprove/list/index"]=t(require("nc-lightapp-front"),require("react"),require("react-dom")):e["fts/commission/commissionpaymentapprove/list/index"]=t(e["nc-lightapp-front"],e.React,e.ReactDOM)}(window,(function(e,t,a){return function(e){var t={};function a(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,a),n.l=!0,n.exports}return a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="../../../../",a(a.s=160)}({0:function(t,a){t.exports=e},1:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.go2CardCheck=t.tbbWarnDialog=t.showTBBMsg=t.getTBBMsg=t.saveCommit=t.frozenBtnCtrl=t.showErrBtn=t.createCardWebSocket=t.createListWebSocket=t.setRate2NewRow=t.getCacheRateValue=t.bodyRateEditOnAfterEdit=t.addDefReferFilter=t.elecSignCardPrint=t.elecSignListPrint=t.createSimpleBillData=t.buildLightBodyAfterEditData=t.loadMultiLang=t.getMultiLangRes=t.appendMultiLangRes=t.saveMultiLangRes=t.getPropCache=t.setPropCache=t.showPagination=t.setDefOrg2AdvanceSrchArea=t.setDefOrg2ListSrchArea=t.setDefOrg2Form=t.hasDefaultOrg=t.isLinkScene=void 0;var r=a(0),n=a(2);function o(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,a){return function r(n,o){try{var l=t[n](o),i=l.value}catch(e){return void a(e)}if(!l.done)return Promise.resolve(i).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(i)}("next")}))}}var l,i,s=t.isLinkScene=function(e){var t=e.getUrlParam(n.URL_PARAM.SCENE);return!(!!!e.getUrlParam(n.URL_PARAM.TBB_LINK)&&t!=n.SCENE.LINK&&t!=n.SCENE.FIP)},u=t.hasDefaultOrg=function(e){return e&&e.context&&e.context&&e.context.pk_org},c=function(e,t,a){if(!(e&&e.search&&t&&a))return!1;try{var r=e.search.getSearchValByField(t,a);return!(!r||!r.value||!r.value.firstvalue&&!r.value.secondvalue)}catch(e){return!0}},d=(t.setDefOrg2Form=function(e,t,a){if(e&&t&&u(a)){var r=a.context,n=r.pk_org,o=r.org_Name,l=r.pk_org_v,i=r.org_v_Name;e.form.setFormItemsValue(t,{pk_org:{value:n,display:o},pk_org_v:{value:l,display:i}})}},t.setDefOrg2ListSrchArea=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pk_org";if(e&&e.search&&t&&u(a)&&!s(e)&&!c(e,t,r)){var n=a.context,o=n.pk_org,l=n.org_Name,i={display:l,value:o};e.search.setSearchValByField(t,r,i)}},t.setDefOrg2AdvanceSrchArea=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pk_org";if(e&&e.search&&t&&u(a)&&a.template&&!s(e)){var n=a.template,o=a.context,l=o.pk_org,i=o.org_Name;n[t].items.map((function(e){e.attrcode==r&&(e.initialvalue={display:i,value:l})}))}},t.showPagination=function(e,t,a){e&&t&&a&&!a.template&&(a.template[t].pagination=!s(e))},function(e){return e+"_extObj"}),p=(t.setPropCache=function(e,t,a,r){if(e&&t&&a){var n=d(t),o=e.ViewModel.getData(n);o||(o={}),o[a]=r,e.ViewModel.setData(n,o)}},t.getPropCache=function(e,t,a){if(!e||!t||!a)return null;var r=d(t),n=e.ViewModel.getData(r);return n&&n.hasOwnProperty(a)?n[a]:null},t.saveMultiLangRes=function(e,t){if(e&&t){e.ViewModel.setData("multiLang",t)}}),f=(t.appendMultiLangRes=function(e,t){if(e&&t){var a=f(e);a?Object.assign(a,t):p(e,t)}},t.getMultiLangRes=function(e){if(e){return e.ViewModel.getData("multiLang")}}),b=t.loadMultiLang=function(e,t){var a=f(e);return a&&a[t]||""},v=function(e,t){var a={},r=e.form.getAllFormValue(t);return r.areacode=t,a[t]=r,a},h=function(e,t){var a={rows:e.cardTable.getChangedRows(t),areaType:"table",areacode:t},r={};return r[t]=a,r},y=function(e,t,a,r,n,o,l,i){var s={head:v(e,a),pageid:t};return i?s.body=h(e,r):s.bodys=h(e,r),{areacode:r,attrcode:n,card:s,changedrows:o,index:l}},m=(t.buildLightBodyAfterEditData=function(e,t,a,r,n,o,l){var i=arguments.length>7&&void 0!==arguments[7]&&arguments[7];try{if(!(e&&t&&a&&r&&n&&o))throw new Error("参数缺失！");var s=y(e,t,a,r,n,o,l,i),u=s.card,c=u.body,d=u.bodys;if(i&&1==c[r].rows.length||!i&&1==d[r].rows.length)return s;var p=[],f=o[0].rowid;if(!(c=i?c[r]:d[r]))throw new Error("未获取到指定的表体["+r+"]!");var b=c,v=b.rows,h=!0,m=!1,g=void 0;try{for(var _,k=v[Symbol.iterator]();!(h=(_=k.next()).done);h=!0){var C=_.value,w=C.rowid;if(w&&w==f){p.push(C);break}}}catch(e){m=!0,g=e}finally{try{!h&&k.return&&k.return()}finally{if(m)throw g}}if(0==p.length)throw new Error("未找到修改的行!");return c.rows=p,s}catch(e){throw e}},function(e){if(!e||0==e.length)return null;var t=!0,a=!1,r=void 0;try{for(var n,o=e[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var l=n.value;if(l&&l.values&&0!=Object.keys(l.values).length){var i=l.values,s=Object.keys(i),u=!0,c=!1,d=void 0;try{for(var p,f=s[Symbol.iterator]();!(u=(p=f.next()).done);u=!0){var b=p.value,v=i[b];v&&0!=Object.keys(v).length&&v.value||delete i[b]}}catch(e){c=!0,d=e}finally{try{!u&&f.return&&f.return()}finally{if(c)throw d}}}}}catch(e){a=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw r}}}),g=function(e,t,a,r,n){var o=e.createMasterChildDataSimple(t,a,r),l=o.head,i=o.body;return n&&(m(l[a].rows),m(i[r].rows)),o},_=function(e,t,a,r,n){var o=e.createExtCardDataSimple(t,a,r),l=o.head,i=o.bodys;if(n){m(l[a].rows);var s=!0,u=!1,c=void 0;try{for(var d,p=r[Symbol.iterator]();!(s=(d=p.next()).done);s=!0){var f=d.value;m(i[f].rows)}}catch(e){u=!0,c=e}finally{try{!s&&p.return&&p.return()}finally{if(u)throw c}}}return o},k=t.createSimpleBillData=function(e,t,a,r){var n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!(e&&t&&a&&r))return null;var o=!!Array.isArray(r)&&r.length>1,l=Array.isArray(r)?r:[r];return o?_(e,t,a,l,n):g(e,t,a,l[0],n)},C=(t.elecSignListPrint=function(e,t){var a=t.url,n=t.offical,o=void 0!==n&&n,l=t.appCode,i=t.nodeKey,s=t.tableCode,u=t.field_id,c=t.field_billno,d=void 0===c?"vbillno":c,p=t.getOrgFunc,f=t.validateFunc;if(!(a&&l&&s&&u&&d))throw new Error("参数缺失！");var v=e.table.getCheckedRows(s);if(null!=v&&0!=v.length){var h=[],y=[],m=!0,g=!1,_=void 0;try{for(var k,C=v[Symbol.iterator]();!(m=(k=C.next()).done);m=!0){var B=k.value,x=B&&B.data&&B.data.values&&B.data.values[u]&&B.data.values[u].value;if(x){var L=B&&B.data&&B.data.values&&B.data.values[d]&&B.data.values[d].value,P=B&&B.data&&B.data.values&&B.data.values.pk_org&&B.data.values.pk_org.value,O=B.index;p&&"function"==typeof p&&(P=p(B));var D=!0;if(f&&"function"==typeof f){var I=f(B);I&&(y.push(S(e,I,L,O)),D=!1)}D&&h.push({id:x,vbillno:L,pk_org:P,index:O})}}}catch(e){g=!0,_=e}finally{try{!m&&C.return&&C.return()}finally{if(g)throw _}}w(e,{url:a,offical:o,appCode:l,nodeKey:i,detail:h,errMessArr:y})}else(0,r.toast)({color:"warning",content:b(e,"3601-000010")})},t.elecSignCardPrint=function(e,t){var a=t.url,r=t.offical,n=void 0!==r&&r,o=t.appCode,l=t.nodeKey,i=t.headCode,s=t.field_id,u=t.field_billno,c=void 0===u?"vbillno":u,d=t.getOrgFunc,p=t.validateFunc;if(!(a&&o&&i&&s&&c))throw new Error("参数缺失！");var f=e.form.getFormItemsValue(i,s).value,b=e.form.getFormItemsValue(i,c).value,v=e.form.getFormItemsValue(i,"pk_org").value;d&&"function"==typeof d&&(v=d());var h=[],y=!0;if(p&&"function"==typeof p){var m=p();m&&(h.push(S(e,m,b,0)),y=!1)}w(e,{url:a,offical:n,appCode:o,nodeKey:l,detail:y?[{id:f,vbillno:b,pk_org:v}]:null,errMessArr:h})},function(e,t){t&&0!=t.length&&(1==t.length?(0,r.toast)({duration:"infinity",color:"danger",content:t[0],hasCloseBtn:!0}):(0,r.toast)({duration:"infinity",color:"danger",TextArr:[b(e,"3601-000000"),b(e,"3601-000001"),b(e,"3601-000021")],groupOperation:!0,groupOperationMsg:t}))}),w=function(e,t){var a=t.url,o=t.offical,l=t.appCode,i=t.nodeKey,s=t.detail,u=t.errMessArr,c=void 0===u?[]:u;if(!(c&&c.length>0)||s&&0!=s.length){var d={offical:o,detail:s};(0,r.ajax)({url:n.COMMON_URL.ELECSIGNPRINTCHECK,data:d,success:function(t){var n=t.data,s=n.passPKs,u=n.passInfos,d=n.unPassInfos;if(c.length>0||d&&d.length>0){var p=!0,f=!1,b=void 0;try{for(var v,h=d[Symbol.iterator]();!(p=(v=h.next()).done);p=!0){var y=v.value,m=y.vbillno,g=y.mess,_=y.index,k=S(e,g,m,_);c.push(k)}}catch(e){f=!0,b=e}finally{try{!p&&h.return&&h.return()}finally{if(f)throw b}}C(e,c)}if(s&&s.length>0&&u&&u.length>0){var w={offical:o,detail:u};(0,r.print)("pdf",a,{nodekey:i,appcode:l,oids:s,userjson:JSON.stringify(w)})}}})}else C(e,c)},S=function(e,t,a,r){return b(e,"3601-000008")+a+b(e,"3601-000009")+t||""},B=(t.addDefReferFilter=function(e,t){var a=t.headCode,r=t.areaCode,n=t.meta,o=t.orgField,l=t.getOrgFunc;if(r&&n&&(a||o||l)){var i=Array.isArray(r)?r:[r],s=!0,u=!1,c=void 0;try{for(var d,p=i[Symbol.iterator]();!(s=(d=p.next()).done);s=!0){n[d.value].items.map((function(t){(t.attrcode.startsWith("vdef")||t.attrcode.startsWith("vuserdef"))&&(t.queryCondition=function(){return{pk_org:l&&"function"==typeof l?l():(e.form.getFormItemsValue(a,o)||{}).value}})}))}}catch(e){u=!0,c=e}finally{try{!s&&p.return&&p.return()}finally{if(u)throw c}}}},t.bodyRateEditOnAfterEdit=function(e){var t=e.props,a=e.bodyCodes,o=e.rateInfo,l=e.datasource,i=e.olcRates,s=e.glcRates,u=e.gllcRates;if(t&&o&&l&&a){!function(e){var t=e.rateInfo,a=e.datasource;if(t&&a){r.cardCache.setDefData(n.cache.rateinfo,a,t);r.cardCache.getDefData(n.cache.rateinfo,a)}}({rateInfo:o,datasource:l}),Array.isArray(a)||(a=[a]);var c=o.olcRateEditable,d=o.glcRateEditable,p=o.gllcRateEditable,f=!0,b=!1,v=void 0;try{for(var h,y=a[Symbol.iterator]();!(f=(h=y.next()).done);f=!0){var m=h.value;i&&(Array.isArray(i)||(i=[i]),t.cardTable.setColEditableByKey(m,i,!c)),s&&(Array.isArray(s)||(s=[s]),t.cardTable.setColEditableByKey(m,s,!d)),u&&(Array.isArray(u)||(u=[u]),t.cardTable.setColEditableByKey(m,u,!p))}}catch(e){b=!0,v=e}finally{try{!f&&y.return&&y.return()}finally{if(b)throw v}}}},t.getCacheRateValue=function(e){var t=e.datasource;if(t){var a=r.cardCache.getDefData(n.cache.rateinfo,t);return a?{olcRate:a.olcRate,glcRate:a.glcRate,gllcRate:a.gllcRate}:null}}),x=(t.setRate2NewRow=function(e){var t=e.olcRates,a=e.glcRates,r=e.gllcRates,n=e.datasource,o=e.row;if(n){var l=B({datasource:n});if(l){var i=l.olcRate,s=l.glcRate,u=l.gllcRate;if(t){Array.isArray(t)||(t=[t]);var c=!0,d=!1,p=void 0;try{for(var f,b=t[Symbol.iterator]();!(c=(f=b.next()).done);c=!0){o[f.value]={value:i}}}catch(e){d=!0,p=e}finally{try{!c&&b.return&&b.return()}finally{if(d)throw p}}}if(a){Array.isArray(a)||(a=[a]);var v=!0,h=!1,y=void 0;try{for(var m,g=a[Symbol.iterator]();!(v=(m=g.next()).done);v=!0){o[m.value]={value:s}}}catch(e){h=!0,y=e}finally{try{!v&&g.return&&g.return()}finally{if(h)throw y}}}if(r){Array.isArray(r)||(r=[r]);var _=!0,k=!1,C=void 0;try{for(var w,S=r[Symbol.iterator]();!(_=(w=S.next()).done);_=!0){o[w.value]={value:u}}}catch(e){k=!0,C=e}finally{try{!_&&S.return&&S.return()}finally{if(k)throw C}}}}}},t.createListWebSocket=function(e,t){var a=t.tableAreaCode,r=t.tablePkName,n=t.billtype,o=t.dataSource,l=t.serverLocation;if(e&&a&&r&&n){var i=e.socket,s={tableAreaCode:a,billpkname:r,billtype:n,dataSource:o};return l&&(s.serverLocation=l),React.createElement("div",null,i.connectMesg(s))}},t.createCardWebSocket=function(e,t){var a=t.headBtnAreaCode,r=t.formAreaCode,n=t.billpkname,o=t.billtype,l=t.dataSource,i=t.serverLocation;if(e&&a&&r&&n&&o){var s=e.socket,u={headBtnAreaCode:a,formAreaCode:r,billtype:o,billpkname:n,dataSource:l};return i&&(u.serverLocation=i),React.createElement("div",null,s.connectMesg(u))}},t.showErrBtn=function(e,t){var a=t.headBtnCode,r=t.headAreaCode,o=t.fieldPK;t.datasource;if(e&&a&&r){var l=e.getUrlParam(n.URL_PARAM.STATE),i="0";try{i=e.form.getFormItemsValue(r,n.sagaField.status).value}catch(e){i="0"}var s="1"===i&&"browse"==l;e.button.toggleErrorStatus(a,{isError:s}),s&&x(e,{headAreaCode:r,fieldPK:o})}},function(e,t){var a=t.headAreaCode,r=t.fieldPK;if(a&&r){var o=e.getUrlParam("status"),l=e.form.getFormItemsValue(a,n.sagaField.gtxid),i=e.form.getFormItemsValue(a,r);"browse"==o&&l&&l.value&&i&&i.value&&e.socket.showToast({gtxid:l.value,billpk:i.value})}}),L=(t.frozenBtnCtrl=function(e,t){var a=t.btnCodes;if(e&&a){var r=Array.isArray(a)?a:[a];if("browse"==e.getUrlParam(n.URL_PARAM.STATE)){var o="1";try{o=e.form.getFormItemsValue(headAreaCode,n.sagaField.frozen).value}catch(e){o="1"}e.button.setButtonDisabled(r,"1"==o)}}},function(e,t){var a=t.pageCode,r=t.headCode,n=t.bodyCodeArr,o=t.saveFunc,l={},i={};if(0==n.length)l={pageid:a,model:{areacode:r,rows:e.form.getAllFormValue(r).rows,areaType:"form"}},i[r]="form";else{l=n.length>1?e.createExtCardData(a,r,n):e.createMasterChildData(a,r,n[0]);var s=!0,u=!1,c=void 0;try{for(var d,p=n[Symbol.iterator]();!(s=(d=p.next()).done);s=!0){i[d.value]="cardTable"}}catch(e){u=!0,c=e}finally{try{!s&&p.return&&p.return()}finally{if(u)throw c}}}e.validateToSave(l,o,i,"")}),P=(l=o(regeneratorRuntime.mark((function e(t,a){var r,n=a.pageCode,o=a.headCode,l=a.bodyCodeArr,i=a.saveValidate,s=a.processSaveData;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.form.isCheckNow(o)){e.next=2;break}return e.abrupt("return",null);case 2:if(!(l&&l.length>0)||t.cardTable.checkTableRequired()){e.next=4;break}return e.abrupt("return",null);case 4:if(!i||"function"!=typeof i){e.next=7;break}if(i()){e.next=7;break}return e.abrupt("return",null);case 7:if(r=k(t,n,o,l),!s||"function"!=typeof s){e.next=12;break}return e.next=11,s(r);case 11:r=e.sent;case 12:return e.abrupt("return",{data:JSON.stringify(r),pageCode:n});case 13:case"end":return e.stop()}}),e,this)}))),function(e,t){return l.apply(this,arguments)}),O=(t.saveCommit=(i=o(regeneratorRuntime.mark((function e(t,a){var n,o,l=a.pageCode,i=a.headCode,s=a.bodyCode,u=a.url,c=a.assign,d=a.showAssignFunc,p=a.updateViewFunc,f=a.saveValidate,b=a.processSaveData,v=a.extParam;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l&&i&&u&&d&&p){e.next=2;break}return e.abrupt("return");case 2:return v||(v={}),n=(a=s)?Array.isArray(a)?a:[a]:[],e.next=6,P(t,{pageCode:l,headCode:i,bodyCodeArr:n,saveValidate:f,processSaveData:b});case 6:if(o=e.sent){e.next=9;break}return e.abrupt("return");case 9:c&&(v.content=JSON.stringify(c)),o.extParam=v,L(t,{pageCode:l,headCode:i,bodyCodeArr:n,saveFunc:function(){(0,r.ajax)({url:u,data:o,success:function(e){var t=e.data.workflow;t&&"approveflow"==t||"workflow"==t?d(e):p(e)}})}});case 12:case"end":return e.stop()}var a}),e,this)}))),function(e,t){return i.apply(this,arguments)}),t.getTBBMsg=function(e){var t=e.row,a=e.msgfield;a||(a="ntbinfo");var r=(t&&t.values&&t.values[a]||{}).value;return r&&(t.values[a]={value:null,display:null}),r});t.showTBBMsg=function(e){var t=e.head,a=e.headCode,n=e.msgfield;if(!(t&&a&&t[a]&&t[a].rows&&0!=t[a].rows.length))return!1;var o=!1,l=t[a].rows[0],i=O({row:l,msgfield:n});return i&&((0,r.toast)({color:"warning",content:i}),o=!0),o},t.tbbWarnDialog=function(e,t){var a=t.ntbinfos,n=t.onConfirm;if(a&&0!=a.length){var o=[],l=a.length>1,i=1,s=l?[b(e,"3601-000019")+"["+a.length+"]"+b(e,"3601-000020")]:[],u=!0,c=!1,d=void 0;try{for(var p,f=a[Symbol.iterator]();!(u=(p=f.next()).done);u=!0){var v=p.value;if(null!=v){var h=v.pk,y=v.msg,m=v.vbillno;if(h&&m){o.push(h);var g="";l&&(g=i+". "+b(e,"3601-000018")+"["+m+"] "),s.push(React.createElement("li",null,g+y)),i++}}}}catch(e){c=!0,d=e}finally{try{!u&&f.return&&f.return()}finally{if(c)throw d}}0!=s.length&&(0,r.promptBox)({color:"warning",title:b(e,"3601-000017"),content:React.createElement("ul",null,s),beSureBtnClick:function(){n(o)}})}},t.go2CardCheck=function(e){var t=e.props,a=e.url,n=e.pk,o=e.ts,l=e.fieldPK,i=e.actionCode,s=e.permissionCode,u=e.checkSaga,c=void 0===u||u,d=e.checkTS,p=void 0===d||d,f=e.go2CardFunc;f&&"function"==typeof f&&(t&&a&&n&&o&&l||f(),(0,r.ajax)({url:a,data:{pk:n,ts:o,actionCode:i,permissionCode:s,fieldPK:l,checkSaga:c,checkTS:p},success:function(e){f()}}))}},12:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.linkVoucherApp=t.linkApp=void 0;var r=a(0),n=(a(14),a(2)),o=a(1),l=(t.linkApp=function(e,t,a){(0,r.ajax)({url:"/nccloud/tmpub/pub/qrylinkinfo.do",data:{billTypeOrTransType:t},success:function(t){var r=t.data;if(r){r.url;var o=r.appCode,l=r.linkPageCode;a&&0!=Object.keys(a).length||(a={}),a.scene||(a.scene=n.SCENE.LINK),a.status||(a.status="browse"),a.appcode=o,a.pagecode=l,e.openTo(null,a)}}})},"_LinkVouchar2019");t.linkVoucherApp=function(e,t,a,n,i,s,u){var c={pk_group:a,pk_org:n,relationID:t,pk_billtype:i};u&&u.freedef4&&(c={pk_group:a,pk_org:n,relationID:t,pk_billtype:i,freedef4:u.freedef4}),(0,r.ajax)({url:"/nccloud/tmpub/pub/qrylinkvoucherinfo.do",data:c,success:function(t){var a=t.success,n=t.data;if(a&&n&&n.src&&l==n.src&&n.pklist&&0!=n.pklist.length){var i=n.src,u=n.url,c=n.pklist,d=n.appcode,p=n.pagecode,f=n.srcAppCode,b=n.cachekey;n.des?1==c.length?e.openTo(u,{status:"browse",appcode:d,pagecode:p,id:c[0],n:(0,o.loadMultiLang)(e,"3601-000004"),pagekey:"link",backflag:"noback"}):(r.cacheTools.set(b,c),e.openTo(t.data.url,{status:"browse",appcode:d,pagecode:p,n:(0,o.loadMultiLang)(e,"3601-000004"),scene:d+i})):(r.cacheTools.set(f+i,c),e.openTo(t.data.url,{status:"browse",appcode:d,pagecode:p,scene:f+i}))}else(0,r.toast)({color:"warning",content:(0,o.loadMultiLang)(e,"3601-000002")+s+(0,o.loadMultiLang)(e,"3601-000003")})}})}},14:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.MODULE_H_FTS="FTS",t.MODULE_L_FTS="fts",t.VoucherDataConst={pagecode:"10170410_1017041001",appcode:"10170410",linkIdentification:"36300TP_LinkVouchar"}},16:function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var a=t.protocol+"//"+t.host,r=a+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var n,o=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(o)?e:(n=0===o.indexOf("//")?o:0===o.indexOf("/")?a+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(n)+")")}))}},160:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n,o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(3),i=h(l),s=(h(a(4)),a(0)),u=a(161),c=a(21),d=a(6),p=h(a(30)),f=h(a(58)),b=a(5),v=a(7);function h(e){return e&&e.__esModule?e:{default:e}}var y=s.base.NCTabsControl,m=s.base.NCAffix,g=(s.base.NCButton,s.high.NCUploader),_=s.high.ApproveDetail,k=s.high.Inspection,C=c.PaymentConst.dataSource,w=(r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.call(a),a.moduleId=c.module_id,a.searchId=c.list_search_id,a.tableId=c.list_table_id,a.pageId=c.list_page_id,a.state={msgContent:"",bodyvalues:{},numvalues:{},defaultSelectGrup:0,selectedGroup:0,showUploader:!1,billID:"",billNO:"",showBuLu:!1,onLineData:[],modelType:d.SHOWMODEL_BULU,actionCode:"",backxjreason:"",showApproveDetail:!1,showNtbDetail:!1,ntbdata:null,showModal:!1,record:{},index:null},u.initTemplate.call(a,e),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){if(this.props.getUrlParam("id")){var e=this.props.getUrlParam("id");e&&this.props.pushTo("/card",{status:"browse",pagecode:card_page_id,id:e})}var t=(0,v.getDefData)(c.PaymentConst.dataSource,"numvalues");t&&this.setState({numvalues:t});var a=(0,v.getDefData)(c.PaymentConst.dataSource,"selectedGroup");a&&this.setState({selectedGroup:a}),(0,v.hasListCache)(this.props,C)}},{key:"render",value:function(){var e=this,t=this.state.numvalues,a=this.props,r=a.table,n=a.button,o=a.search,l=a.modal,b=(this.props.button.getButtons(),this.props.MutiInit.getIntl(this.moduleId)),v=r.createSimpleTable,h=(r.getTablePageInfo,o.NCCreateSearch),w=l.createModal,S=(n.createButton,n.getButtons,n.createButtonApp),B=this.state,x=B.showUploader,L=B.billNO,P=B.billID,O=(B.defaultSelectGrup,B.selectedGroup),D=B.showApproveDetail,I=B.showNtbDetail,T=B.ntbdata,A=B.showModal;return console.log(O,"selectedGroupselectedGroup"),i.default.createElement("div",{className:"nc-bill-list"},i.default.createElement(m,null,i.default.createElement("div",{className:"nc-bill-header-area"},i.default.createElement("div",{className:"header-title-search-area"},(0,s.createPageIcon)(),i.default.createElement("h2",{className:"title-search-detail"},b&&b.get("36300TP-0001"))),i.default.createElement("div",{className:"header-button-area"},S({area:"list_head",buttonLimit:8,onButtonClick:u.buttonClick.bind(this),popContainer:document.querySelector(".header-button-area")})))),i.default.createElement("div",{className:"nc-bill-search-area"},h(this.searchId,{clickSearchBtn:u.searchBtnClick.bind(this),showAdvBtn:!0,onAfterEvent:u.onSearchAfterEvent.bind(this)})),i.default.createElement("div",{className:"tab-definInfo-area"},i.default.createElement(y,{defaultKey:O},i.default.createElement("div",{key:0,clickFun:this.navChangeFun.bind(this,0)},b&&b.get("3630-0023"),"  ",i.default.createElement("span",null,t&&t.DJB||0)),i.default.createElement("div",{key:1,clickFun:this.navChangeFun.bind(this,1)},b&&b.get("3630-0024"),"  ",i.default.createElement("span",null,t&&t.DTJ||0)),i.default.createElement("div",{key:2,clickFun:this.navChangeFun.bind(this,2)},b&&b.get("3630-0025"),"  ",i.default.createElement("span",null,t&&t.SPZ||0)),i.default.createElement("div",{key:3,clickFun:this.navChangeFun.bind(this,3)},b&&b.get("3630-0026"),"  ",i.default.createElement("span",null,t&&t.DZF||0)),i.default.createElement("div",{key:4,clickFun:this.navChangeFun.bind(this,4)},b&&b.get("3630-0027"),"  ",i.default.createElement("span",null,t&&t.ZFZ||0)),i.default.createElement("div",{key:5,clickFun:this.navChangeFun.bind(this,5)},b&&b.get("3630-0028")))),i.default.createElement("div",{style:{height:"10px"}}),i.default.createElement("div",{className:"nc-bill-table-area"},v(this.tableId,{dataSource:C,pkname:c.PaymentConst.pk_filed,componentInitFinished:function(){},handlePageInfoChange:u.pageInfoClick.bind(this),onRowDoubleClick:this.onRowDoubleClick.bind(this),showCheck:!0,showIndex:!0,showTotal:!0})),w("MessageDlg",{size:"xlg",content:this.state.msgContent}),i.default.createElement("div",{className:"nc-faith-demo-div2"},x&&i.default.createElement(g,{billId:P,target:null,placement:"bottom",billNo:L,onHide:function(){e.setState({showUploader:!1})},customInterface:{queryLeftTree:"/nccloud/tmpub/pub/lefttreequery.do",queryAttachments:c.base_url+"paymentattachment.do"}})),i.default.createElement(p.default,{showmodal:this.state.showBuLu,modal:l,onLineData:this.state.onLineData,moduleType:d.sourceModel_FTS,modelType:this.state.modelType,onSureClick:function(t){e.processRetMsg(t),e.setState({showBuLu:!1})},onCloseClick:function(){e.setState({showBuLu:!1})}}),i.default.createElement("div",null,D&&i.default.createElement(_,{show:D,billtype:c.billtype,billid:P,close:function(){e.setState({showApproveDetail:!1,billID:""})}})),i.default.createElement("div",null,i.default.createElement(k,{show:I,sourceData:T,cancel:function(){e.setState({showNtbDetail:!1})},affirm:function(){e.setState({showNtbDetail:!1})}})),A&&i.default.createElement("div",null,i.default.createElement(f.default,{title:"请输入退回理由",show:this.state.showModal,open:function(){e.setState({showModal:!0})},close:function(){e.setState({showModal:!1,backxjreason:""})},beSureClick:this.beSureClick.bind(this,!0),onChange:this.onChange,value:this.state.backxjreason})),w("back",{title:b&&b.get("3630-0034"),content:b&&b.get("3630-0033"),beSureBtnClick:this.beSureClick.bind(this,!1)}))}}]),t}(l.Component),n=function(){var e=this;this.navChangeFun=function(t,a,r){e.setState({selectedGroup:t},(function(){(0,v.setDefData)(c.PaymentConst.dataSource,"selectedGroup",t),u.searchBtnClick.call(e,e.props)}))},this.refresh=function(){var t=e.state.selectedGroup;e.navChangeFun(t)},this.editBill=function(t){var a={},r=t.pk_payment.value,n=t.ts.value;a[r]=n,(0,s.ajax)({url:c.base_url+"paymentedit.do",data:{pkMapTs:a,pageCode:c.list_page_id},success:function(t){t&&(e.beforeLinkOfList(),e.props.pushTo("/card",{status:"edit",pagecode:card_page_id,from:"list",id:r}))}})},this.onRowDoubleClick=function(t,a,r,n){e.beforeLinkOfList(),r.pushTo("/card",{status:"browse",id:t.pk_payment.value,pagecode:card_page_id})},this.beforeLinkOfList=function(){var t=e.props.search.getQueryInfo(e.searchId,!1);(0,v.setDefData)(c.PaymentConst.dataSource,"searchAreaData",t.querycondition.conditions)},this.beSureClick=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=e.state.backxjreason;if(t&&""==a.replace(/(^\s*)|(\s*$)/g,""))toast({content:"请填入退回理由！",color:"warning"});else{console.log(a);var r=e.state.record,n=e.state.index;r.backxjreason={value:a},(0,b.listSingleOperator)(e.props,c.list_page_id,c.list_table_id,c.base_url+"paymentpremit.do",r,"pk_payment",n,"制证成功！",c.PaymentConst.dataSource),(0,b.listSingleOperator)(c.list_page_id,c.base_url+"paymentback.do",r,"pk_payment","退回成功！",e.refresh.bind(e)),e.setState({showModal:!1,backxjreason:"",record:{},index:null})}},this.onChange=function(t){e.setState({backxjreason:t})}},r);w=(0,s.createPage)({billinfo:{billtype:"grid",pagecode:c.list_page_id,bodycode:c.list_table_id},mutiLangCode:c.module_id})(w),t.default=w},161:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onSearchAfterEvent=t.buttonClick=t.initTemplate=t.pageInfoClick=t.searchBtnClick=void 0;var r=a(162),n=s(a(163)),o=s(a(165)),l=s(a(166)),i=s(a(167));function s(e){return e&&e.__esModule?e:{default:e}}t.searchBtnClick=r.searchBtnClick,t.pageInfoClick=o.default,t.initTemplate=n.default,t.buttonClick=l.default,t.onSearchAfterEvent=i.default},162:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.searchBtnClick=void 0;var r=a(0),n=a(21),o=a(7),l=(t.searchBtnClick=function(e,t,a,i){var s=this;if((t||(t=e.search.getAllSearchData(n.list_search_id)))&&t.conditions&&0!=t.conditions.length){for(var u=t.conditions,c=0;c<u.length;c++){"totalamount"==u[c].field&&u.splice(c,1)}var d=l.call(this,this.state.selectedGroup),p=e.table.getTablePageInfo(this.tableId);p.pageIndex=0;var f={querycondition:t,custcondition:{logic:"and",conditions:[d]},pageInfo:p,pageCode:n.list_page_id,queryAreaCode:n.list_search_id,oid:n.oid,querytype:"tree"};(0,r.ajax)({url:"/nccloud/fts/commission/paymentpagequery.do",data:{data:JSON.stringify(f),pageCode:n.list_page_id},success:function(e){var t=e.success,a=e.data;t&&(a?(a.grid?s.props.table.setAllTableData(s.tableId,a.grid[s.tableId]):s.props.table.setAllTableData(s.tableId,{rows:[]}),a.numvalues&&(s.setState({numvalues:a.numvalues}),(0,o.setDefData)(n.PaymentConst.dataSource,"numvalues",a.numvalues)),a.bodyvalues&&s.setState({bodyvalues:a.bodyvalues||{}})):(s.props.table.setAllTableData(s.tableId,{rows:[]}),s.setState({numvalues:{}}),(0,o.setDefData)(n.PaymentConst.dataSource,"numvalues",{})))}})}},function(e){var t=void 0;switch(e){case 0:t={field:"billstatus",value:{firstvalue:1,secondvalue:null},oprtype:"="};break;case 1:t={field:"billstatus",value:{firstvalue:0,secondvalue:null},oprtype:"="};break;case 2:t={field:"billstatus",value:{firstvalue:2,secondvalue:null},oprtype:"="};break;case 3:t={field:"billstatus",value:{firstvalue:3,secondvalue:null},oprtype:"="};break;case 4:t={field:"billstatus",value:{firstvalue:4,secondvalue:null},oprtype:"="};break;case 5:default:t={}}return t})},163:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=this;e.createUIDom({pagecode:i.list_page_id},(function(a){if(a){if(a.template){var r=a.template;r=function(e,t,a){a[i.list_search_id].items=a[i.list_search_id].items.map((function(e,t){return e})),a[i.list_search_id].items.find((function(e){return"pk_org"===e.attrcode})).isMultiSelectedEnabled=!0,a[i.list_search_id].items.find((function(e){return"pk_fundpayorg"===e.attrcode})).isMultiSelectedEnabled=!0,a[i.list_search_id].items.find((function(e){return"pk_transactorg"===e.attrcode})).isMultiSelectedEnabled=!0,a[i.list_search_id].items.map((function(e){"pk_org"==e.attrcode?(e.isTreelazyLoad=!1,e.queryCondition=function(){return{funcode:i.funcode,TreeRefActionExt:"nccloud.web.tmpub.filter.FundOrgPermissionFilter"}}):"pk_inneraccount_p"==e.attrcode||"pk_fundcashaccount"==e.attrcode||"pk_fundbankaccount_p"==e.attrcode||"pk_allotaccount"==e.attrcode?e.queryCondition=function(){return{pk_org:(t.search.getSearchValByField(i.list_search_id,"pk_org")||{}).value,pk_currency:(t.search.getSearchValByField(i.list_search_id,"pk_currency")||{}).value}}:"pk_bankaccount_p"==e.attrcode?e.queryCondition=function(){return{pk_org:(t.search.getSearchValByField(i.list_search_id,"pk_financeorg_p")||{}).value,pk_currency:(t.search.getSearchValByField(i.list_search_id,"pk_currency")||{}).value}}:"pk_company_r"==e.attrcode?e.queryCondition=function(){return{pk_org:(t.search.getSearchValByField(i.list_search_id,"pk_financeorg_p")||{}).value}}:"pk_costcenter"!=e.attrcode&&"pk_drawer"!=e.attrcode||(e.queryCondition=function(){return{pk_org:(t.search.getSearchValByField(i.list_search_id,"pk_org")||{}).value}})})),a[i.list_table_id].pagination=!0,a[i.list_table_id].items=a[i.list_table_id].items.map((function(a,r){return a.width=150,"vbillno"==a.attrcode?a.render=function(a,r,n){React.createElement("a",{style:{cursor:"pointer"},onClick:function(){e.beforeLinkOfList(),t.pushTo("/card",{pagecode:i.card_page_id,status:"browse",id:r.pk_payment.value})}},r&&r.vbillno&&r.vbillno.value)}:"billdate"==a.attrcode&&(a.render=function(e,t,a){return React.createElement("span",null,t&&t.billdate&&function(e){if("string"!=typeof e)return;return e.split(" ")&&e.split(" ")[0]}(t.billdate.value))}),a}));var r=t.MutiInit.getIntl("3630");return a[i.list_table_id].items.push({attrcode:"opr",label:r&&r.get("3630-0005"),width:200,fixed:"right",className:"table-opr",visible:!0,render:function(a,r,n){var o=[];return r.billstatus&&"0"==r.billstatus.value?(o=["Edit","Commit","Delete"]).push("BankAccReWrite","UpRewrite","DownRewrite"):r.billstatus&&"1"==r.billstatus.value?(o=["Decide","Back","Uncommit"]).push("BankAccReWrite","UpRewrite","DownRewrite"):r.billstatus&&"2"==r.billstatus.value?(o=["Undecide"]).push("BankAccReWrite","UpRewrite","DownRewrite"):r.billstatus&&"3"==r.billstatus.value?o.push("Pay","MergePay","CallBackPay","RecoveryFund","BankAccReWrite","UpRewrite","DownRewrite"):r.billstatus&&"4"==r.billstatus.value?(o=["UnPay","Abolish","PayConfirmBill"]).push("QueryStatus","PayChangeBill"):r.billstatus&&"5"==r.billstatus.value?o=["Deliver"]:r.billstatus&&"6"==r.billstatus.value?o=["Undeliver"]:r.billstatus&&"7"==r.billstatus.value?o=[]:r.billstatus&&"8"==r.billstatus.value?(o=["UnPay"],r.voucherflag&&r.voucherflag.value||o.push("Premit")):r.billstatus&&"10"==r.billstatus.value&&(o=["PayConfirmBill","Abolish"]),r.voucherflag&&r.voucherflag.value&&o.push("Unpremit"),t.button.createOprationButton(o,{area:"list_inner",buttonLimit:i.button_limit,onButtonClick:function(t,o){return l.default.call(e,t,o,a,r,n)}})}}),a}(t,e,r),e.meta.setMeta(r,(function(){var t=(0,s.getDefData)(i.PaymentConst.dataSource,"searchAreaData");console.log("查询区缓存数据search",t),t&&e.search.setSearchValue(i.list_search_id,t)}))}if(a.button){var n=a.button;e.button.setButtons(n),e.button.setButtonDisabled(["BatchBankAccReWrite","BatchPay"],!0),e.button.setPopContent("Delete","确认要删除吗?")}}}))};var r,n=a(0),o=a(164),l=(r=o)&&r.__esModule?r:{default:r},i=a(21),s=a(7);n.base.NCPopconfirm,n.base.NCIcon,n.base.NCTooltip},164:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n=a(0),o=a(21),l=a(5),i=a(6),s=a(7),u=a(19),c=(r=u)&&r.__esModule?r:{default:r};var d,p;n.base.NCPopconfirm,n.base.NCIcon;t.default=(d=regeneratorRuntime.mark((function e(t,a,r,u,d){var p,b,v,h,y=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p={},b=u.pk_payment&&u.pk_payment.value,v=u.ts&&u.ts.value,p[b]=v,e.t0=a,e.next="Edit"===e.t0?8:"Delete"===e.t0?10:"Commit"===e.t0?12:"Uncommit"===e.t0?14:"Decide"===e.t0?16:"Undecide"===e.t0?19:"Back"===e.t0?21:"Premit"===e.t0?24:"Unpremit"===e.t0?26:"Deliver"===e.t0?28:"Undeliver"===e.t0?30:"Pay"===e.t0?32:"MergePay"===e.t0?39:"UnPay"===e.t0?46:"RecoveryFund"===e.t0?48:"CallBackPay"===e.t0?55:"QueryStatus"===e.t0?62:"Abolish"===e.t0?64:"BankAccReWrite"===e.t0?66:"BankAccBrowse"===e.t0?68:"DownRewrite"===e.t0?70:"DownRewriteBrowse"===e.t0?72:"UpRewrite"===e.t0?74:"UpRewriteBrowse"===e.t0?76:78;break;case 8:return this.editBill(u),e.abrupt("break",79);case 10:return(0,n.ajax)({url:"/nccloud/fts/commission/paymentdelete.do",data:{pkMapTs:p,pageCode:o.list_page_id},success:function(e){e.success&&((0,n.toast)({color:"success",content:"删除成功"}),t.table.deleteTableRowsByIndex(o.list_table_id,d),(0,s.deleteCacheDataForList)(t,o.list_table_id,b))}}),e.abrupt("break",79);case 12:return(0,l.listSingleOperator)(t,o.list_page_id,o.list_table_id,o.base_url+"paymentcommit.do",u,"pk_payment",d,"提交成功！",o.PaymentConst.dataSource),e.abrupt("break",79);case 14:return(0,l.listSingleOperator)(t,o.list_page_id,o.list_table_id,o.base_url+"paymentuncommit.do",u,"pk_payment",d,"收回成功！",o.PaymentConst.dataSource),e.abrupt("break",79);case 16:return this.beforeLinkOfList(),t.pushTo("/card",{status:o.viewmod_deal,id:u.pk_payment.value,pagecode:card_page_id,from:"list"}),e.abrupt("break",79);case 19:return(0,l.listSingleOperator)(t,o.list_page_id,o.list_table_id,o.base_url+"paymentundecide.do",u,"pk_payment",d,"取消经办成功！",o.PaymentConst.dataSource),e.abrupt("break",79);case 21:return(h=u.vsourcebustype.value)!==o.busType.BusType_BillFBM&&h!==o.busType.BusType_BillPayAwoke?this.setState({showModal:!0,record:u,index:d}):this.setState({record:u},(function(){y.props.modal.show("back")})),e.abrupt("break",79);case 24:return(0,l.listSingleOperator)(t,o.list_page_id,o.list_table_id,o.base_url+"paymentpremit.do",u,"pk_payment",d,"制证成功！",o.PaymentConst.dataSource),e.abrupt("break",79);case 26:return(0,l.listSingleOperator)(t,o.list_page_id,o.list_table_id,o.base_url+"paymentunpremit.do",u,"pk_payment",d,"取消制证成功！",o.PaymentConst.dataSource),e.abrupt("break",79);case 28:return(0,l.listSingleOperator)(t,o.list_page_id,o.list_table_id,o.base_url+"paymentdeliver.do",u,"pk_payment",d,"传递成功！",o.PaymentConst.dataSource),e.abrupt("break",79);case 30:return(0,l.listSingleOperator)(t,o.list_page_id,o.list_table_id,o.base_url+"paymentundeliver.do",u,"pk_payment",d,"取消传递成功！",o.PaymentConst.dataSource),e.abrupt("break",79);case 32:return e.next=34,(0,c.default)({isSign:!1,isKey:!0,data:null,encryptVOClassName:null});case 34:if(!e.sent.isStop){e.next=37;break}return e.abrupt("return");case 37:return(0,l.listSingleOperator)(t,o.list_page_id,o.list_table_id,o.base_url+"paymentpay.do",u,"pk_payment",d,"支付成功！",o.PaymentConst.dataSource),e.abrupt("break",79);case 39:return e.next=41,(0,c.default)({isSign:!1,isKey:!0,data:null,encryptVOClassName:null});case 41:if(!e.sent.isStop){e.next=44;break}return e.abrupt("return");case 44:return(0,l.listSingleOperator)(t,o.list_page_id,o.list_table_id,o.base_url+"paymentmergepay.do",u,"pk_payment",d,"合并支付成功！",o.PaymentConst.dataSource),e.abrupt("break",79);case 46:return(0,l.listSingleOperator)(t,o.list_page_id,o.list_table_id,o.base_url+"paymentunpay.do",u,"pk_payment",d,"取消支付成功！",o.PaymentConst.dataSource),e.abrupt("break",79);case 48:return e.next=50,(0,c.default)({isSign:!1,isKey:!0,data:null,encryptVOClassName:null});case 50:if(!e.sent.isStop){e.next=53;break}return e.abrupt("return");case 53:return(0,l.listSingleOperator)(t,o.list_page_id,o.list_table_id,o.base_url+"paymentrecoveryfund.do",u,"pk_payment",d,"上收回拨成功！",o.PaymentConst.dataSource),e.abrupt("break",79);case 55:return e.next=57,(0,c.default)({isSign:!1,isKey:!0,data:null,encryptVOClassName:null});case 57:if(!e.sent.isStop){e.next=60;break}return e.abrupt("return");case 60:return(0,l.listSingleOperator)(t,o.list_page_id,o.list_table_id,o.base_url+"paymentcallbackpay.do",u,"pk_payment",d,"回拨支付成功！",o.PaymentConst.dataSource),e.abrupt("break",79);case 62:return(0,l.listSingleOperator)(t,o.list_page_id,o.list_table_id,o.base_url+"paymentquerystatus.do",u,"pk_payment",d,"下载支付状态成功！",o.PaymentConst.dataSource),e.abrupt("break",79);case 64:return(0,l.listSingleOperator)(t,o.list_page_id,o.list_table_id,o.base_url+"paymentabolish.do",u,"pk_payment",d,"作废成功！",o.PaymentConst.dataSource),e.abrupt("break",79);case 66:return f.call(this,t,"BankAccReWrite",o.base_url+"paymentbankrewrite.do",i.SHOWMODEL_BULU,u),e.abrupt("break",79);case 68:return f.call(this,t,"BankAccBrowse",o.base_url+"paymentbankrewrite.do",i.SHOWMODEL_LIULAN,u),e.abrupt("break",79);case 70:return f.call(this,t,"DownRewrite",o.base_url+"paymentbankrewrite.do",i.SHOWMODEL_BULU,u),e.abrupt("break",79);case 72:return f.call(this,t,"DownRewriteBrowse",o.base_url+"paymentbankrewrite.do",i.SHOWMODEL_LIULAN,u),e.abrupt("break",79);case 74:return f.call(this,t,"UpRewrite",o.base_url+"paymentbankrewrite.do",i.SHOWMODEL_BULU,u),e.abrupt("break",79);case 76:return f.call(this,t,"UpRewriteBrowse",o.base_url+"paymentbankrewrite.do",i.SHOWMODEL_LIULAN,u),e.abrupt("break",79);case 78:return e.abrupt("break",79);case 79:case"end":return e.stop()}}),e,this)})),p=function(){var e=d.apply(this,arguments);return new Promise((function(t,a){return function r(n,o){try{var l=e[n](o),i=l.value}catch(e){return void a(e)}if(!l.done)return Promise.resolve(i).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(i)}("next")}))},function(e,t,a,r,n){return p.apply(this,arguments)});var f=function(e,t,a,r,o){var l=this,i={},s=o.pk_payment&&o.pk_payment.value,u=o.ts&&o.ts.value;i[s]=u,(0,n.ajax)({url:a,data:{pkMapTs:i,actionCode:t},success:function(e){e&&e.data&&l.setState({onLineData:e.data||[],actionCode:t,modelType:r},(function(){l.setState({showBuLu:!0})}))}})}},165:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){e.table.getTablePageInfo(n.list_table_id),e.search.getAllSearchData(n.list_search_id);var o=n.list_table_id,l=this,i={pks:a,pageCode:n.list_page_id};(0,r.ajax)({url:"/nccloud/fts/commission/paymentpagechange.do",data:i,success:function(e){e.data&&e.data[o]?l.props.table.setAllTableData(o,e.data[o]):l.props.table.setAllTableData(o,{rows:[]})}})};var r=a(0),n=a(21);a(7)},166:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){console.log("Add"===t);var a="Add"===t?"add":t,u=e.table.getCheckedRows(n.list_table_id),y="",m="",g="",_={};u&&u.length>0&&(g=u[0].data.values.pk_payment.value);switch(a){case"add":this.beforeLinkOfList(),e.pushTo("/card",{status:"add",pagecode:n.card_page_id});break;case"Refresh":this.refresh();break;case"BatchDelete":if(null==u||0==u.length)return void(0,r.toast)({color:"warning",content:"未选中行！"});if(1==u.length)return g=u[0].data.values.pk_payment.value,B=u[0].data.values.ts.value,_[g]=B,void(0,r.ajax)({url:"/nccloud/fts/commission/paymentdelete.do",data:{pkMapTs:_,pageCode:n.list_page_id},success:function(t){t.success&&((0,r.toast)({color:"success",content:"删除成功"}),e.table.deleteTableRowsByIndex(n.list_table_id,u[0].index),(0,s.deleteCacheDataForList)(e,n.list_table_id,g))}});(0,o.listMultiOperator)(e,n.list_page_id,n.list_table_id,"pk_payment",n.base_url+"paymentdelete.do","批量删除成功！",n.PaymentConst.dataSource);break;case"Copy":if(null==(u=e.table.getCheckedRows(n.list_table_id))||0==u.length)return void(0,r.toast)({color:"warning",content:"未选中行！"});if(u.length>1)return void(0,r.toast)({color:"warning",content:"只支持单笔数据复制！"});u[0].data.values.vsourcebustype.value;var k=u[0].data.values.ispayroll.value,C=u[0].data.values.pk_org.value,w=u[0].data.values.pk_fundpayorg.value;if(""==n.busType.BusType_BillDeliver)return void(0,r.toast)({color:"warning",content:"传递生成的单据不允许进行复制"});if(C!==w)return void(0,r.toast)({color:"warning",content:"当前资金组织非付款资金组织，不允许进行复制"});if(k)return void(0,r.toast)({color:"warning",content:"代发工资的单据，不允许进行复制"});var S=u[0]&&u[0].data&&u[0].data.values&&u[0].data.values.pk_payment&&u[0].data.values.pk_payment.value;this.beforeLinkOfList(),e.pushTo("/card",{status:"add",id:S,isCopy:!0,pagecode:n.card_page_id,from:"list"});break;case"BatchCommit":(0,o.listMultiOperator)(e,n.list_page_id,n.list_table_id,"pk_payment",n.base_url+"paymentcommit.do","批量提交成功！",n.PaymentConst.dataSource);break;case"BatchUncommit":(0,o.listMultiOperator)(e,n.list_page_id,n.list_table_id,"pk_payment",n.base_url+"paymentuncommit.do","批量收回成功！",n.PaymentConst.dataSource);break;case"File":d.call(this,e);break;case"Print":p.call(this,e);break;case"OffiPrint":h(e,!0);break;case"InOffiPrint":h(e,!1);break;case"OutPut":c.call(this,e);break;case"BatchBankAccBrowse":f.call(this,e,"BankAccBrowse",n.base_url+"paymentbankrewrite.do",l.SHOWMODEL_LIULAN);break;case"BatchDownReBrowse":f.call(this,e,"DownRewriteBrowse",n.base_url+"paymentbankrewrite.do",l.SHOWMODEL_LIULAN);break;case"BatchUpReBrowse":f.call(this,e,"UpRewriteBrowse",n.base_url+"paymentbankrewrite.do",l.SHOWMODEL_LIULAN);break;case"LinkApproveDetail":case"LinkWorkFlow":b.call(this,e);break;case"LinkSourceBill":if(null==u||0==u.length||u.length>1)return void(0,r.toast)({color:"warning",content:"请选中一行数据！"});u[0].data.values.vsourcebustype.value,y=u[0].data.values.pk_vsourcebilltype.value,m=u[0].data.values.pk_srcbill.value;var B=u[0].data.values.ts.value;if(""==n.busType.BusType_BillPayAwoke||""==n.busType.BusType_BillFBM||""==n.busType.BusType_BillDeliver)return void(0,r.toast)({color:"warning",content:"到账通知生成、票据冲销生成或传递生成单据，无需联查来源"});if(""==n.busType.BusType_BillHand)return void(0,r.toast)({color:"warning",content:"手工录入的单据，没有来源"});var x={status:"browse",LinkBillType:n.billtype,pk_srcbill:[m]};(0,i.linkApp)(e,y,x);break;case"LinkAfterBill":(0,r.ajax)({url:n.base_url+"paymentafterlinkinfo.do",data:{pk:g},success:function(t){if(t.data){(0,o.linkSucessPro)(e,t,{status:"browse"})}}});break;case"LinkNtbPlan":v.call(this,e);break;case"LinkUpBill":(0,r.ajax)({url:n.base_url+"paymentlinkupbill.do",data:{pk:g},success:function(t){var a=t.data;if(a){var r={status:"browse",srckey:a[0].pks,srcbilltype:n.billtype};(0,o.linkSucessPro)(e,t,r)}}});break;case"LinkDownBill":(0,r.ajax)({url:n.base_url+"paymentlinkdownbill.do",data:{pk:g},success:function(t){var a=t.data;if(a){var r={status:"browse",srckey:a[0].pks,srcbilltype:n.billtype};(0,o.linkSucessPro)(e,t,r)}}});break;case"LinkViewVoucher":(0,i.linkVoucherApp)(e,g,"nc.vo.fts.commissionpayment.AggPaymentVO",null,"36J1")}};var r=a(0),n=a(21),o=a(5),l=a(6),i=a(12),s=a(7),u=a(1);var c=function(e){var t=e.table.getCheckedRows(n.list_table_id);if(null!=t&&0!=t.length){for(var a=0,o=[],l=void 0;a<t.length;)(l=t[a]&&t[a].data&&t[a].data.values&&t[a].data.values.pk_payment&&t[a].data.values.pk_payment.value)&&(o.push(l),a++);0!=o.length?(0,r.output)({url:n.base_url+"paymentprint.do",data:{nodekey:null,appcode:n.funcode,oids:o,outputType:"output"}}):(0,r.toast)({color:"warning",content:"请选中一行数据！"})}else(0,r.toast)({color:"warning",content:"请选中一行数据！"})},d=function(e){var t=e.table.getCheckedRows(n.list_table_id);if(null==t||0==t.length||t.length>1)(0,r.toast)({color:"warning",content:"请选中一行数据！"});else{var a=t[0]&&t[0].data&&t[0].data.values&&t[0].data.values.pk_payment&&t[0].data.values.pk_payment.value,o=t[0]&&t[0].data&&t[0].data.values&&t[0].data.values.vbillno&&t[0].data.values.vbillno.value;this.setState({showUploader:!this.state.showUploader,billID:a,billNO:o})}},p=function(e){var t=e.table.getCheckedRows(n.list_table_id);if(null!=t&&0!=t.length){for(var a=0,o=[],l=void 0;a<t.length;)(l=t[a]&&t[a].data&&t[a].data.values&&t[a].data.values.pk_payment&&t[a].data.values.pk_payment.value)&&(o.push(l),a++);0!=o.length?(0,r.print)("pdf",n.base_url+"paymentprint.do",{billtype:n.billtype,funcode:n.funcode,nodekey:n.print_nodekey,oids:o}):(0,r.toast)({color:"warning",content:"请选中一行数据！"})}else(0,r.toast)({color:"warning",content:"请选中一行数据！"})},f=function(e,t,a,o){var l=this,i=e.table.getCheckedRows(n.list_table_id);if(null==i||0==i.length||i.length>1)(0,r.toast)({color:"warning",content:"请选中一行数据！"});else{var s=i[0].data.values.pk_payment.value,u=i[0].data.values.ts.value,c={};s&&u&&(c[s]=u),(0,r.ajax)({url:a,data:{pkMapTs:c,pageCode:n.list_page_id,actionCode:t},success:function(e){e&&e.data&&l.setState({onLineData:e.data||[],actionCode:t,modelType:o},(function(){l.setState({showBuLu:!0})}))}})}},b=function(e){var t=e.table.getCheckedRows(n.list_table_id);if(null!=t&&1==t.length){var a=t[0].data.values.pk_payment.value;a||(0,r.toast)({color:"warning",content:"选中数据主键为空！"}),this.setState({showApproveDetail:!0,billID:a})}else(0,r.toast)({color:"warning",content:"请选中一行数据！"})},v=function(e){var t=this,a=e.table.getCheckedRows(n.list_table_id);if(null!=a&&1==a.length){var o=a[0].data.values.pk_payment.value;o&&(0,r.ajax)({url:n.base_url+"paymentlinkntb.do",data:{pk:o},success:function(e){var a=e.data;t.setState({showNtbDetail:!0,ntbdata:a})}})}else(0,r.toast)({color:"warning",content:"请选中一行数据！"})},h=function(e,t){(0,u.elecSignListPrint)(e,{url:n.base_url+"currexelecsignprint.do",offical:t,appCode:n.funcode,nodeKey:t?n.printnodekey.official:n.printnodekey.inofficial,tableCode:n.list_table_id,field_id:n.PaymentConst.pk_filed,field_billno:"vbillno",validateFunc:function(t){var a=t&&t.data&&t.data.values&&t.data.values.billstatus&&t.data.values.billstatus.value;return n.billstatus.PayOK!=a?e.MutiInit.getIntl("36300TP")&&e.MutiInit.getIntl("36300TP").get("36300TP-000110"):null}})}},167:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,r,n,o,l,i){if(console.log(e,t,a,r,n,o,l,i),"pk_org_v"===a)r.value;"pk_org"===a&&console.log(r);if("cmaterialvid"===a){var s=r;if(console.log(s),s&&s.length>1){e.cardTable.setValByKeyAndIndex(t,o,a,{value:s[0].refpk,display:s[0].refname});for(var u=1;u<s.length;u++){e.cardTable.addRow(t);var c=e.cardTable.getNumberOfRows(t);e.cardTable.setValByKeyAndIndex(t,c-1,a,{value:s[u].refpk,display:s[u].refname})}}}if("fconfirmpoint"==a)e.createBodyAfterEventData("20521030",this.formId,this.tableId,t,a,n)};a(0)},19:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n,o=(r=u(regeneratorRuntime.mark((function e(t,a,r,n){var o,l,i,s,u,c,d,p,f,v,h,y,m,g,_,k,C,w,S,B,x,L,P,O;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o="",e.next=3,b(r,n);case 3:if(l=e.sent,i=l.order,s=l.tabledata,u=l.tableinfo,c=l.encryptkey,d=l.tablerelation,p=l.scale,f=void 0===p?{scale:8}:p,"{}"!==JSON.stringify(l)){e.next=7;break}return e.abrupt("return",{});case 7:v=!0,h=!1,y=void 0,e.prev=10,m=u[Symbol.iterator]();case 12:if(v=(g=m.next()).done){e.next=60;break}_=g.value,k=s[_],C=("head"===_?t[a]:t.body||t.bodys)[d[_]].rows.sort((function(e,t){return e.values[i].value-t.values[i].value})),w=!0,S=!1,B=void 0,e.prev=19,x=C[Symbol.iterator]();case 21:if(w=(L=x.next()).done){e.next=43;break}if("3"!==(P=L.value).status){e.next=25;break}return e.abrupt("continue",40);case 25:Object.keys(k).length||(o+="null"),e.t0=regeneratorRuntime.keys(k);case 27:if((e.t1=e.t0()).done){e.next=40;break}O=e.t1.value,e.t2=Number(k[O]),e.next=0===e.t2?32:1===e.t2?34:2===e.t2?36:38;break;case 32:return o+=P.values[O]&&P.values[O].value||"",e.abrupt("break",38);case 34:return o+=P.values[O]&&P.values[O].display||"",e.abrupt("break",38);case 36:return o+=P.values[O]&&P.values[O].value?(Number(P.values[O].value)||0).toFixed(f.scale):"",e.abrupt("break",38);case 38:e.next=27;break;case 40:w=!0,e.next=21;break;case 43:e.next=49;break;case 45:e.prev=45,e.t3=e.catch(19),S=!0,B=e.t3;case 49:e.prev=49,e.prev=50,!w&&x.return&&x.return();case 52:if(e.prev=52,!S){e.next=55;break}throw B;case 55:return e.finish(52);case 56:return e.finish(49);case 57:v=!0,e.next=12;break;case 60:e.next=66;break;case 62:e.prev=62,e.t4=e.catch(10),h=!0,y=e.t4;case 66:e.prev=66,e.prev=67,!v&&m.return&&m.return();case 69:if(e.prev=69,!h){e.next=72;break}throw y;case 72:return e.finish(69);case 73:return e.finish(66);case 74:return e.abrupt("return",{signStr:o,encryptkey:c,tablerelation:d});case 75:case"end":return e.stop()}}),e,this,[[10,62,66,74],[19,45,49,57],[50,,52,56],[67,,69,73]])}))),function(e,t,a,n){return r.apply(this,arguments)}),l=a(0),i=a(4),s=(n=i)&&n.__esModule?n:{default:n};function u(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,a){return function r(n,o){try{var l=t[n](o),i=l.value}catch(e){return void a(e)}if(!l.done)return Promise.resolve(i).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(i)}("next")}))}}var c,d=l.viewModel.setGlobalStorage,p=l.viewModel.getGlobalStorage,f=(l.viewModel.removeGlobalStorage,l.base.NCLoading);function b(e,t){return new Promise((function(a){return(0,l.ajax)({type:"post",url:"/nccloud/tmpub/pub/qryencryptinfo.do",data:{encryptVOClassName:e},loading:!1,async:!1,success:function(e){e.success&&a(e.data)},error:function(e){t&&s.default.unmountComponentAtNode(t),(0,l.toast)({color:"warning",content:e.message}),a({})}})}))}t.default=(c=u(regeneratorRuntime.mark((function e(t){var a,r,n,i,u,c,b,v,h,y,m,g,_,k,C,w=t.data,S=void 0===w?{}:w,B=t.encryptVOClassName,x=void 0===B?"":B,L=t.isSign,P=void 0===L||L,O=t.isKey,D=void 0===O||O,I=t.head,T=void 0===I?"head":I,A=t.isSave,M=void 0!==A&&A,E=t.primaryId,R=void 0===E?null:E;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R=R?Array.isArray(R)?R:[R]:R,S=R?{text:R.join(""),signText:null}:S,P||D){e.next=4;break}return e.abrupt("return",{data:S,isStop:!1});case 4:if(M&&("1"===p("localStorage","isSignKey")?D=!1:d("localStorage","isSignKey",D?1:2,(function(){}))),(a=(0,l.getBusinessInfo)())&&a.userCode){e.next=9;break}return(0,l.toast)({color:"warning",content:"无法获取当前登录用户信息, 请重新登录!"}),e.abrupt("return",{data:S,isStop:!0});case 9:if(r=void 0,n={},i="",u={},r=document.createElement("div"),document.body.appendChild(r),s.default.render(React.createElement(f,{show:!0,fullScreen:!0}),r),!P){e.next=26;break}if(R){e.next=25;break}return e.next=17,o(S,T,x,r);case 17:if(n=e.sent,"{}"!==JSON.stringify(n)){e.next=21;break}return r&&s.default.unmountComponentAtNode(r),e.abrupt("return",{data:S,isStop:!0});case 21:i=n.signStr,u=n.encryptkey,e.next=26;break;case 25:i=S.text;case 26:return e.next=28,new Promise((function(e){return(0,l.ajax)({type:"post",url:"/nccloud/tmpub/pub/iscauser.do",loading:!1,async:!1,success:function(t){t.success&&e(t.data)},error:function(t){e(!1)}})}));case 28:if((c=e.sent)||(D=!1),0===(b=superSign(i,a.userCode,D,c)).status){e.next=35;break}return(0,l.toast)({color:"warning",content:b.msg||"系统异常错误, 请重新尝试!"}),r&&s.default.unmountComponentAtNode(r),e.abrupt("return",{data:S,isStop:!0});case 35:if(!P){e.next=69;break}if(R){e.next=67;break}i=b.signStr,v=n.tablerelation,e.t0=regeneratorRuntime.keys(u);case 40:if((e.t1=e.t0()).done){e.next=64;break}for(h=e.t1.value,y=("head"===h?S[T]:S.body||S.bodys)[v[h]].rows,m=!0,g=!1,_=void 0,e.prev=46,k=y[Symbol.iterator]();!(m=(C=k.next()).done);m=!0)C.value.values[u[h]]={value:i};e.next=54;break;case 50:e.prev=50,e.t2=e.catch(46),g=!0,_=e.t2;case 54:e.prev=54,e.prev=55,!m&&k.return&&k.return();case 57:if(e.prev=57,!g){e.next=60;break}throw _;case 60:return e.finish(57);case 61:return e.finish(54);case 62:e.next=40;break;case 64:S.userjson=b.sn,e.next=69;break;case 67:S.signText=b.signStr,S.userjson=b.sn;case 69:return r&&s.default.unmountComponentAtNode(r),e.abrupt("return",{data:S,isStop:!1});case 71:case"end":return e.stop()}}),e,this,[[46,50,54,62],[55,,57,61]])}))),function(e){return c.apply(this,arguments)})},2:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.URL_PARAM={ID:"id",STATE:"status",SCENE:"scene",TBB_LINK:"pk_ntbparadimvo",LINK_ID:"linkId",PK_SRC:"pk_src"},t.sagaField={frozen:"saga_frozen",gtxid:"saga_gtxid",btxid:"saga_btxid",status:"saga_status"},t.sagaFrozenEnum={frozen:1,unfrozen:0},t.sagaStateEnum={success:0,fail:1},t.SCENE={DEFAULT:"defaultsce",APPROVE:"approvesce",LINK:"linksce",FIP:"fip",OTHER:"othersce"},t.LINKTYPE={NORMAL:"NORMAL",BILL_REVIEW:"BILL_REVIEW"},t.LINK_PARAM={ARAP:{FLAG:"flag",FLAG_VALUE:"ftsLinkArap"}},t.MODULE_INFO={TMPUB:"tmpub",TMPUB_NUM:"3601"},t.COMMON_URL={ELECSIGNPRINTCHECK:"/nccloud/tmpub/pub/elecsignprintcheck.do"},t.cache={rateinfo:"rateinfo",iserrtoast:"iserrtoast"},t.SPLIT_TBBCTRLTYPE="_ctrltype_",t.tbbwarntype={flexibility:"0",inflexibility:"1",warning:"2"}},21:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.app_id="0001Z61000000001TS3P",t.module_id="3630",t.oid="1001Z61000000002M6N3",t.base_url="/nccloud/fts/commission/",t.base_path="/fts/commission/commissionpayment/",t.ConfirmData={pmtConfirmUrl:"/obm/ebankconfirmpay/confirmpay/main/index.html#/card",pagecode:"36100CONFM_C01",appcode:"36100CONFM",billtype:"36CC"},t.PayChangeData={payChangeUrl:"/fts/commission/payinfochange/card/index.html",pagecode:"36300CPI_C01",appcode:"36300CPI",billtype:"36J8"},t.button_limit=3,t.billtype="36J5",t.link_billtype="36J1",t.funcode="36300TP_APPROVE",t.funcode_multi="36300TP",t.print_templateid="1001Z61000000001NJ9N",t.print_nodekey=null,t.PaymentConst={dataSource:"TM_FTS_CommissionPayment_base",pk_filed:"pk_payment",hasQryFlag:"hasQryFlag",queryCondition:"queryCondition",islink:"islinkpayment",saveAddOrg:"saveaddorg"},t.printnodekey={official:"OFFICIAL",inofficial:"INOFFICIAL"},t.list_page_id="36300TP_L01",t.list_search_id="36300TP_search",t.list_table_id="payment",t.card_page_id="36300TP_APPROVE_C01",t.card_from_id="payment",t.card_from_exchangemsg_id="exchangepay",t.card_from_delivermsg_id="deliver",t.card_from_vsourcemsg_id="vsourcemsg",t.card_from_auditinfo_id="auditinfo",t.card_table1_id="paymentfinance",t.card_table2_id="paymentfund",t.card_tablebrowse1_id="childform1",t.card_tablebrowse2_id="childform3",t.card_tableedit1_id="childform2",t.card_tableedit2_id="childform4",t.saga_gtxid="saga_gtxid",t.pk="pk_payment",t.PayFundVO={ISEBANKWRITEFULL:"isebankwritefull",ISEBANKBACKFULL:"isebankbackfull",ISEBANKUNBACKFULL:"isebankunbackfull",ISNETPAY:"isnetpay",ISEBANKUNBACK:"isebankunback",ISEBANKBACK:"isebankback"},t.viewmod_deal="deal",t.LISTGROUP={NEEDDEAL:"0",NEEDCOMMIT:"1",APPROVING:"2",NEEDPAY:"3",PAYING:"4",ALL:"5"},t.billstatus={WaitCommit:0,WaitDecide:1,WaitApprove:2,WaitPay:3,Paying:4,WaitTransfer:5,Transfered:6,Back:7,PayOK:8,Merge:9,Abolish:10},t.group_all=5,t.busType={BusType_BillPay:"billpay",BusType_BillPayAwoke:"billpayawoke",BusType_BillMerge:"billmerge",BusType_BillDeliver:"billdeliver",BusType_BillHand:"billhand",BusType_BillFBM:"billfbm"},t.NetPay_Status={NetPay_Success:0,NetPay_Fail:1,NetPay_Paying:2,NetPay_UnCommit:3},t.IPaymentConst={Pay_Proxy:{value:"proxypay",display:"代理支付"},Pay_Note:{value:"notepay",display:"票据支付"},Pay_Group:{value:"grouppay",display:"集团支付"},Pay_Cash:{value:"cashpay",display:"现金支付"},Pay_Back:{value:"backpay",display:"回拨支付"},Pay_Direct:{value:"directpay",display:"直接支付"},Pay_Hand:{value:"handpay",display:"手工支付"}},t.IClearConst={DeliverDirection_Up:"up",DeliverDirection_Down:"down",DeliverType_Step:"step",DeliverType_Direct:"direct",RefNodeName_InnerAccount:"内部账户",RefNodeName_BankAccount:"使用权参照"},t.Button_PayVisible=["Pay","MergePay","CallBackPay","RecoveryFund","UnPay","Abolish","QueryStatus","PayChangeBill","UnionCheckPayBill"],t.Button_CardHeadDisable=["AddLine","DelLine","CopyLine","AddLine2","DelLine2","CopyLine2"],t.card_hidden_buttons=["BankAccReWrite","Save","SaveAdd","SaveCommit","Delete","Commit","Decide","Back","Undecide","Uncommit","Deliver","Undeliver","Pay","MergePay","CallBackPay","RecoveryFund","UnPay","Abolish","UnionCheckPayBill","QueryStatus","PayChangeBill","Cancel","Add","Premit","Unpremit","Edit","Copy"],t.head_hidden_buttons=["BatchDelete","Copy","BatchCommit","File","Print","BatchBankAccBrowse","BatchDownReBrowse","BatchUpReBrowse"],t.cache={iserrtoast:"iserrtoast"}},3:function(e,a){e.exports=t},30:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=a(3),l=(r=o)&&r.__esModule?r:{default:r},i=a(0),s=a(34);function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a(37);var c=i.base.NCModal,d=i.base.NCButton,p=function(e){function t(e){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r,n,o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.initMultiLang=function(){var e=o.moduleId;(0,i.getMultiLang)({moduleId:e,currentLocale:o.state.currentLocale,domainName:"obm",callback:o.setMultiLang})},o.setMultiLang=function(e){o.setState({json:e},(function(){s.initTemplate.call(o,o.props)}))},o.payMoney=(r=regeneratorRuntime.mark((function e(t){var r,n,l,s,u,c,d,p,f,b,v,h,y,m,g,_,k,C,w,S,B;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r="",r+="{bankData:[",n=0,l=!0,s=!1,u=void 0,e.prev=6,c=o.bankdata[Symbol.iterator]();case 8:if(l=(d=c.next()).done){e.next=38;break}for(p=d.value,n>0&&(r+=","),f=p.requestvos,r+="{onlineData:[",b=0,v=!0,h=!1,y=void 0,e.prev=17,m=f[Symbol.iterator]();!(v=(g=m.next()).done);v=!0)_=g.value,b>0&&(r+=","),r+="{",r+="dbtacc:"+_.dbtacc+",",r+="crtacc:"+_.crtacc+",",r+="trsamt:"+o.number_format(_.trsamt,8,".","","round"),r+="}",b+=1;e.next=25;break;case 21:e.prev=21,e.t0=e.catch(17),h=!0,y=e.t0;case 25:e.prev=25,e.prev=26,!v&&m.return&&m.return();case 28:if(e.prev=28,!h){e.next=31;break}throw y;case 31:return e.finish(28);case 32:return e.finish(25);case 33:r+="]}",n+=1;case 35:l=!0,e.next=8;break;case 38:e.next=44;break;case 40:e.prev=40,e.t1=e.catch(6),s=!0,u=e.t1;case 44:e.prev=44,e.prev=45,!l&&c.return&&c.return();case 47:if(e.prev=47,!s){e.next=50;break}throw u;case 50:return e.finish(47);case 51:return e.finish(44);case 52:if(r+="]}",(k=(0,i.getBusinessInfo)())&&k.userCode){e.next=57;break}return(0,i.toast)({color:"warning",content:o.state.json["3610BULU-000000"]}),e.abrupt("return",{});case 57:return e.next=59,o.getIsca();case 59:if(C=e.sent,1!=(w=superSign(r,k.userCode,!1,C)).status){e.next=65;break}return(0,i.toast)({color:"error",content:w.msg}),e.abrupt("return",{});case 65:S=w.signStr,B=w.sn,(0,i.ajax)({url:"/nccloud/obm/ebankbulu/buluset.do",data:{retvo:o.bankdata,signData:S,sn:B,modelType:o.props.modelType,moduleType:o.props.moduleType},success:function(e){e.success&&e.data&&(o.needInit=!0,o.props.onSureClick&&o.props.onSureClick(e.data),o.setState({step:1,title:o.state.json["3610BULU-000000"],needOpeanUI:!1}))}});case 68:case"end":return e.stop()}}),e,a,[[6,40,44,52],[17,21,25,33],[26,,28,32],[45,,47,51]])})),n=function(){var e=r.apply(this,arguments);return new Promise((function(t,a){return function r(n,o){try{var l=e[n](o),i=l.value}catch(e){return void a(e)}if(!l.done)return Promise.resolve(i).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(i)}("next")}))},function(e){return n.apply(this,arguments)}),o.doubleClick=function(e,t){var a=o.props.table.getAllTableData(o.tableid).rows[t].values;o.props.form.setFormItemsValue(o.formId,a),o.selrow=t},o.rowClick=function(e,t,a,r){var n=o.props.table.getAllTableData(o.tableid).rows[r].values;o.props.form.setFormItemsValue(o.formId,n),o.selrow=r},o.OkClick=function(){var e=o.props.form.getFormItemsValue(o.formId,"busnar"),t=void 0;e&&(t=e.value);if(t){var a=!0,r=!1,n=void 0;try{for(var l,s=["%","/","\\","'","%","&","<","<",">","\n",'"'][Symbol.iterator]();!(a=(l=s.next()).done);a=!0){var u=l.value;if(t.includes(u))return void(0,i.toast)({content:o.state.json["3610BULU-000000"]+"["+u+"]",color:"warning"})}}catch(e){r=!0,n=e}finally{try{!a&&s.return&&s.return()}finally{if(r)throw n}}}o.check()},o.check=function(){var e=o.state.step-1,t=o.buludata[e].buluindex,a=o.bankdata[t].elog.m_HeadVO.attributeValue.func;void 0!==o.props.modelType&&null!==o.props.modelTyp&&4!==o.props.modelType&&a&&"query"!==a?o.checkItemLength():o.buluOk()},o.checkItemLength=function(){for(var e="",t=o.props.meta.getMeta().table_bulu.items,a=o.props.table.getAllTableData(o.tableid),r=a.rows.length,n=a.rows,l=null==t?0:t.length,i=null,s={},u=0;u<r;u++){for(var c=[],d=0;d<l;d++){var p=t[d],f=p.maxlength,b=p.label,v=p.itemtype,h=p.attrcode;"input"===v&&(i=n[u].values[h].value)&&i.length>f&&(e=""+b+o.state.json["3610BULU-000004"]+f,c.push(e))}c.length>0&&(s[u]=c)}if(Object.keys(s).length>0){var y="";Object.keys(s).forEach((function(e){y+=o.state.json["3610BULU-000002"]+""+(+e+1)+o.state.json["3610BULU-000009"]+s[e].join("，")+"；"})),o.props.modal.show("MessageDlg",{title:o.state.json["3610BULU-000003"],content:o.state.json["3610BULU-000005"]+"？\n"+y.slice(0,y.length-1)+"。",beSureBtnClick:o.beSureBtnClick.bind(o,e),cancelBtnClick:o.cancelBtnClick.bind(o,y)})}else o.checknull()&&o.buluOk()},o.beSureBtnClick=function(e){o.cutItemByLength(),o.checknull()&&o.buluOk()},o.cancelBtnClick=function(e){o.checknull()&&o.buluOk()},o.checknull=function(){var e=o.props.table.getAllTableData(o.tableid);return o.checkRequired.call(o,o.tableid,e.rows)},o.checkRequired=function(e,t){o.state;var a=o.props.meta.getMeta();if(!a.table_bulu)return(0,i.toast)({content:""+o.state.json["3610BULU-000011"]+e+o.state.json["3610BULU-000012"],color:"warning"}),!1;if(Array.isArray(t)){var r={};if(a.table_bulu.items.filter((function(e){return e.visible})).forEach((function(e){var a=e.attrcode,r=e.children;o.isUndefined.call(o,r)?t.forEach((function(e){"3"!==e.status&&o.isUndefined.call(o,e.values[a])&&(e.values[a]={})})):r.forEach((function(e){var a=e.attrcode;t.forEach((function(e){"3"!==e.status&&o.isUndefined.call(o,e.values[a])&&(e.values[a]={})}))}))})),t.forEach((function(e,t){var n=[];"3"!==e.status&&Object.keys(e.values).forEach((function(t){var r=e.values[t].value;""!==r&&null!=r||a.table_bulu.items.filter((function(e){return e.visible})).forEach((function(e){var a=e.attrcode,r=e.required,l=e.children,i=e.label;o.isUndefined.call(o,l)?r&&a===t&&n.push(i):l.forEach((function(e){var a=e.attrcode,r=e.required,o=e.label;r&&a===t&&n.push(o)}))}))})),n.length>0&&(r[t]=n)})),Object.keys(r).length>0){Object.keys(r).forEach((function(e){var t=[];a.table_bulu.items.filter((function(e){return e.visible})).forEach((function(a){r[e].forEach((function(e){var r=a.children,n=a.label;o.isUndefined.call(o,r)?e===n&&t.push("["+n+"]"):r.forEach((function(a){var r=a.label;e===r&&t.push("["+r+"]")}))}))})),r[e]=t}));var n="";return Object.keys(r).forEach((function(e){n+=o.state.json["3610BULU-000002"]+" \n                            "+(+e+1)+" "+o.state.json["3610BULU-000009"]+" "+r[e].join("，")+"；"})),(0,i.toast)({content:""+o.state.json["3610BULU-000010"]+n.slice(0,n.length-1)+"。",color:"danger"}),!1}return!0}return(0,i.toast)({content:""+o.state.json["3610BULU-000013"],color:"warning"}),!1},o.isUndefined=function(e){return void 0===e||void 0===e},o.cutItemByLength=function(){for(var e=o.props.meta.getMeta().table_bulu.items,t=o.props.table.getAllTableData(o.tableid),a=t.rows.length,r=t.rows,n=null==e?0:e.length,l=null,i=null,s=(o.props.table.getCheckedRows(o.tableid),0);s<a;s++)for(var c=0;c<n;c++){var d=e[c],p=d.maxlength,f=(d.label,d.itemtype),b=d.attrcode;"input"===f&&(i=(l=r[s].values[b]).value)&&i.length>p&&(i=i.substring(0,p),l.value=i,l.display=l.display.substring(0,p),o.props.table.setValByKeyAndIndex(o.tableid,s,b,l),s===o.selrow&&o.props.form.setFormItemsValue(o.formId,u({},b,l)))}},o.CloseClick=function(){var e=o.state.step-1;o.buludata[e].buluindex;o.state.step<o.bulusize?o.setState({step:o.state.step+1},(function(){o.init(o.props)})):(o.needInit=!0,o.props.onCloseClick&&o.props.onCloseClick(),o.setState({step:1,title:o.state.json["3610BULU-000000"],needOpeanUI:!1}))},o.buluOk=function(){for(var e=o.state.step-1,t=o.buludata[e].buluindex,a=o.props.table.getAllTableData(o.tableid),r=o.bankdata[t],n=a.rows.length,l=Object.keys(a.rows[0].values),i=l.length,s=0;s<n;s++)for(var u=0;u<i;u++){var c=a.rows[s].values[l[u]].value;r.elog.m_ItemVOs[s].logvo[l[u]]=c,r.elog.m_ItemVOs[s].attributeValue[l[u]]&&(r.elog.m_ItemVOs[s].attributeValue[l[u]]=c)}o.state.step<o.bulusize?o.setState({step:o.state.step+1},(function(){o.init(o.props)})):o.payMoney(o.props)},o.copyBulu=function(){var e=o.props.meta.getMeta(),t=e.form_bulu.items,a=(e.table_bulu.items,o.props.table.getAllTableData(o.tableid)),r=a.rows,n=a.rows.length,l=!1;o.selrow<0||o.selrow>=n||(t.filter((function(e){return e.visible})).forEach((function(e){var t=e.attrcode,a=e.bulu,n=e.disabled,i=o.props.form.getFormItemsValue(o.formId,t);"Y"!==a||n||(r.forEach((function(e){e.values[t]=i})),l=!0)})),l&&o.props.table.setAllTableData("table_bulu",a))},o.props=e,o.moduleId="3610BULU",o.formId="form_bulu",o.tableid="table_bulu",o.selrow=0,o.needInit=!0,o.banksize=1,o.bankdata={},o.bulusize=0,o.buludata={},o.state={step:1,title:"",needOpeanUI:!1,currentLocale:"zh-CN",json:{}},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillMount",value:function(){this.initMultiLang()}},{key:"componentWillReceiveProps",value:function(e){console.log("nextProps.showmodal"+e.showmodal),console.log("this.state.step"+this.state.step),console.log("this.needInit"+this.needInit),e.showmodal&&1===this.state.step&&this.needInit&&(this.needInit=!1,this.buluInit(this.props))}},{key:"buluInit",value:function(e){var t=this;(0,i.ajax)({url:"/nccloud/obm/ebankbulu/buluget.do",data:{onLineData:this.props.onLineData,modelType:this.props.modelType,moduleType:this.props.moduleType},success:function(e){if(e.success&&e.data){e.data;t.banksize=e.data.banksize,t.bankdata=e.data.bankdata,t.bulusize=e.data.bulusize,t.buludata=e.data.buludata,t.bulusize>0?t.init(t.props):(t.setState({needOpeanUI:!1}),t.payMoney(t.props))}},error:function(e){t.needInit=!0,t.props.onCloseClick&&t.props.onCloseClick(),t.setState({step:1,title:t.state.json["3610BULU-000000"],needOpeanUI:!1}),(0,i.toast)({color:"warning",content:e.message})}})}},{key:"init",value:function(e){var t=this,a=this.state.step-1,r=this.buludata[a].bulumeta.templet;this.props.meta.setMeta(r);var n=this.buludata[a].bulumeta.value;this.props.table.setAllTableData("table_bulu",n);var o=n.rows[0].values;this.props.form.setFormItemsValue(this.formId,o),this.selrow=0;var l=this.buludata[a].buluindex,i=this.bankdata[l],s=i.bankname,u=i.needOpeanUI,c=i.elog.m_HeadVO.attributeValue,d=c.bank,p=c.func;this.setState({title:this.state.json["3610BULU-000000"]+"("+s+d+"_"+p+")",needOpeanUI:u&&this.props.showmodal},(function(){t.props.table.setAllTableData("table_bulu",n)}))}},{key:"number_format",value:function(e,t,a,r,n){e=(e+"").replace(/[^0-9+-Ee.]/g,""),n=n||"ceil";var o=isFinite(+e)?+e:0,l=isFinite(+t)?Math.abs(t):0,i=void 0===a?".":a,s="";return((s=(l?function(e,t){var a=Math.pow(10,t);return console.log(),""+parseFloat(Math[n](parseFloat((e*a).toFixed(2*t))).toFixed(2*t))/a}(o,l):""+Math.round(o)).split("."))[1]||"").length<l&&(s[1]=s[1]||"",s[1]+=new Array(l-s[1].length+1).join("0")),s.join(i)}},{key:"getIsca",value:function(){return new Promise((function(e){return(0,i.ajax)({type:"post",url:"/nccloud/tmpub/pub/iscauser.do",loading:!1,async:!1,success:function(t){t.success&&e(t.data)},error:function(t){e(!1)}})}))}},{key:"render",value:function(){var e=this.props,t=e.modal,a=e.ncmodal,r=(t.createModal,this.props.form.createForm),n=this.props.table.createSimpleTable,o=a.createModal,i=(this.props.editTable.createEditTable,"1"==this.props.modelType);return l.default.createElement("div",{className:"form-wrapper"},l.default.createElement(c,{show:this.state.needOpeanUI,style:{width:"1380px",height:"585px"},onHide:this.CloseClick},l.default.createElement(c.Header,{closeButton:!0},l.default.createElement(c.Title,{style:{height:"20px"}},this.state.title)),l.default.createElement(c.Body,null,l.default.createElement("div",null,r(this.formId,{onAfterEvent:s.afterEvent.bind(this)}),l.default.createElement("div",{style:{height:"20px"}}),l.default.createElement("div",{style:{height:"200px"}},n(this.tableid,{onRowClick:this.rowClick,onRowDoubleClick:this.doubleClick,showIndex:!0})))),i?l.default.createElement(c.Footer,null,l.default.createElement(d,{onClick:this.CloseClick},this.state.json["3610BULU-000014"])):l.default.createElement(c.Footer,null,l.default.createElement(d,{onClick:this.copyBulu},this.state.json["3610BULU-000006"]),l.default.createElement(d,{className:"button-primary",onClick:this.OkClick},this.state.json["3610BULU-000007"]),l.default.createElement(d,{onClick:this.CloseClick},this.state.json["3610BULU-000008"]))),o("MessageDlg",{title:this.state.json["3610BULU-000003"]}))}}]),t}(o.Component);t.default=(0,i.createPage)({})(p)},34:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initTemplate=t.afterEvent=void 0;var r=o(a(35)),n=o(a(36));function o(e){return e&&e.__esModule?e:{default:e}}t.afterEvent=n.default,t.initTemplate=r.default},35:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){};a(0)},36:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,n,o,l){if(e,t===r){var i="";i=void 0===n.display?n.value:n.display;var s={value:n.value,display:i};if(e.table.setValByKeyAndIndex("table_bulu",this.selrow,a,s),"c_ccynbr"===a){if(e.form.getFormItemsValue(r,"filetype")){var u=e.form.getFormItemsValue(r,"filetype").value;u&&"rbnc"===u&&n&&"人民币"===n.display&&e.form.setFormItemsRequired(r,{bankcharges:!0})}}else if("bankcharges"===a&&((n&&"1"===n.value||"2"===n.value)&&e.form.setFormItemsRequired(r,{chargaccount:!0}),n&&"3"===n.value||"2"===n.value)){var c=e.form.getFormItemsValue(r,"dbtacc").value,d={value:c,display:c};e.form.setFormItemsValue(r,{chargaccount:{value:c,display:c}}),e.table.setValByKeyAndIndex("table_bulu",this.selrow,"chargaccount",d)}}};a(0);var r="form_bulu"},37:function(e,t,a){var r=a(38);"string"==typeof r&&(r=[[e.i,r,""]]);var n={transform:void 0};a(9)(r,n);r.locals&&(e.exports=r.locals)},38:function(e,t,a){(e.exports=a(8)(!1)).push([e.i,"",""])},4:function(e,t){e.exports=a},5:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.linkSucessPro=t.cardOperator=t.cardOperatorForCash=t.showTBBMsg=t.listSingleOperator=t.listSingleOperatorNoRecord=t.listMultiOperator=t.CopyLine=t.BatchCopy=t.Open=t.DelLine=t.BatchDelLine=t.InsertLine=t.AddLine=void 0,t.BatchCopyForCash=function(e,t,a,n){var l=e.cardTable.getCheckedRows(t);if(null==l||0==l.length)return(0,r.toast)({color:"warning",content:(0,o.loadMultiLang)(e,"36300-000002")}),!1;var i=[],s=JSON.parse(JSON.stringify(l)),u=!0,c=!1,d=void 0;try{for(var p,f=s[Symbol.iterator]();!(u=(p=f.next()).done);u=!0){var b=p.value;b.data.selected=!1,b.data.values[n]&&b.data.values[n].value&&(b.data.values[n].value=null),b.data.values.rowno&&b.data.values.rowno.value&&(b.data.values.rowno.value=null),i.push(b.data)}}catch(e){c=!0,d=e}finally{try{!u&&f.return&&f.return()}finally{if(c)throw d}}null!=a&&null!=a||(a=e.cardTable.getNumberOfRows(t,!1));return e.cardTable.insertRowsAfterIndex(t,i,a),!0};var r=a(0),n=a(2),o=a(1);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}r.cardCache.getNextId,r.cardCache.deleteCacheById,t.AddLine=function(e,t,a,r){if(a){var n=e.cardTable.getNumberOfRows(t);e.cardTable.addRow(t,n,a)}else e.cardTable.addRow(t);r&&"function"==typeof r&&afterFunc(e,t)},t.InsertLine=function(e,t,a,r){e.cardTable.addRow(t,a+1,r)},t.BatchDelLine=function(e,t,a){var n=e.cardTable.getCheckedRows(t);if(null==n||0==n.length)return(0,r.toast)({color:"warning",content:(0,o.loadMultiLang)(e,"36300-000001")}),!1;var l=[],i=!0,s=!1,u=void 0;try{for(var c,d=n[Symbol.iterator]();!(i=(c=d.next()).done);i=!0){var p=c.value;l.push(p.index)}}catch(e){s=!0,u=e}finally{try{!i&&d.return&&d.return()}finally{if(s)throw u}}return a&&"function"==typeof a?e.cardTable.delRowsByIndex(t,l,a):e.cardTable.delRowsByIndex(t,l),!0},t.DelLine=function(e,t,a,r){r&&"function"==typeof r?e.cardTable.delRowsByIndex(t,a,r):e.cardTable.delRowsByIndex(t,a)},t.Open=function(e,t,a,r,n){e.cardTable.openModel(t,n,r,a)};t.BatchCopy=function(e,t,a){var n=e.cardTable.getCheckedRows(t);if(null==n||0==n.length)return(0,r.toast)({color:"warning",content:(0,o.loadMultiLang)(e,"36300-000002")}),!1;var l=[],i=JSON.parse(JSON.stringify(n)),s=!0,u=!1,c=void 0;try{for(var d,p=i[Symbol.iterator]();!(s=(d=p.next()).done);s=!0){var f=d.value;f.data.selected=!1,l.push(f.data)}}catch(e){u=!0,c=e}finally{try{!s&&p.return&&p.return()}finally{if(u)throw c}}return null==a&&(a=e.cardTable.getNumberOfRows(t,!1)),e.cardTable.insertRowsAfterIndex(t,l,a),!0},t.CopyLine=function(e,t,a){e.cardTable.pasteRow(t,a)};var i=function(e,t,a){e.errContent=e.errContent+t,e.failCount=Number(e.failCount)+1,e.errMsgArr.push(a||"")},s=function(e,t){e.succContent=e.succContent+t,e.succCount=Number(e.succCount)+1},u=(t.listMultiOperator=function(e,t,a,n,l,u,p,f,b,v){var h=e.table.getCheckedRows(a);if(null!=h&&0!=h.length){if(1==h.length){var y={};return y[n]=h[0]&&h[0].data&&h[0].data.values&&h[0].data.values[n],y.ts=h[0]&&h[0].data&&h[0].data.values&&h[0].data.values.ts,void c(e,t,a,l,y,n,h[0].index,u,p,f,b,v)}var m={},g={},_={},k=0,C=void 0,w=void 0,S=void 0;b||(b={});for(;k<h.length;)C=h[k]&&h[k].data&&h[k].data.values&&h[k].data.values[n]&&h[k].data.values[n].value,w=h[k]&&h[k].data&&h[k].data.values&&h[k].data.values.ts&&h[k].data.values.ts.value,S=h[k]&&h[k].data&&h[k].data.values&&h[k].data.values.vbillno&&h[k].data.values.vbillno.value,_[C]=h[k].index,C&&w&&(m[C]=w),C&&S&&(g[C]=S),k++;Object.keys(m).length>0&&(0,r.ajax)({url:l,data:{pkMapRowIndex:_,pkMapTs:m,pkMapVbillno:g,pageCode:t,extParam:b},success:function(t){var n=t.data.data,l=[],c=[],p={errMsgArr:[],succContent:"",errContent:"",succCount:0,failCount:0};if(n&&n.length>0){var b=!0,h=!1,y=void 0;try{for(var m,g=n[Symbol.iterator]();!(b=(m=g.next()).done);b=!0){var _=m.value,k=_.state,C=_.msg,w=_.result,S=_.pk,B=(_.vbillno,_.rowIndex),x=Number(B)+1;if(0==k)if(w){if(w&&w.head&&w.head[a]&&w.head[a].rows&&w.head[a].rows.length>0){var L=w.head[a].rows[0];if(f){var P=d(L);P?i(p,x,P=x+"."+P):s(p,x)}else s(p,x);var O={index:B,data:{values:L.values}};l.push(O)}}else s(p,x),e.table.deleteCacheId(a,S),c.push(B);else 1==k&&i(p,x,C)}}catch(e){h=!0,y=e}finally{try{!b&&g.return&&g.return()}finally{if(h)throw y}}l.length>0&&e.table.updateDataByIndexs(a,l),c.length>0&&e.table.deleteTableRowsByIndex(a,c)}var D=t.data,I=D.status,T=(D.msg,p.succContent),A=p.errContent,M=p.succCount,E=p.failCount,R=p.errMsgArr,U=(""==(T=M>0?T+(0,o.loadMultiLang)(e,"36300-000004")+u+(0,o.loadMultiLang)(e,"36300-000005"):"")?"":T+"，")+(E>0?A+(0,o.loadMultiLang)(e,"36300-000004")+u+(0,o.loadMultiLang)(e,"36300-000006"):"");if(0==I&&0==R.length){(0,o.loadMultiLang)(e,"36300-000007"),(0,o.loadMultiLang)(e,"36300-000008");(0,r.toast)({color:"success",content:u+(0,o.loadMultiLang)(e,"36300-000007")+M+(0,o.loadMultiLang)(e,"36300-000008")})}else(1==I||2==I||R.length>0)&&(0,r.toast)({duration:"infinity",color:"danger",content:U,TextArr:[(0,o.loadMultiLang)(e,"36300-000009"),(0,o.loadMultiLang)(e,"36300-000010"),(0,o.loadMultiLang)(e,"36300-000011")],groupOperation:!0,groupOperationMsg:R});v&&"function"==typeof v&&v(e,n)}})}else(0,r.toast)({color:"warning",content:(0,o.loadMultiLang)(e,"36300-000003")})},t.listSingleOperatorNoRecord=function(e,t,a,n,l,i,s,u,c,d,f,b){var v={};v[l]=i,f||(f={}),(0,r.ajax)({url:n,data:{pkMapTs:v,pageCode:t,extParam:f},success:function(t){var n=t.data,i=!1;if(n){if(n&&n.head&&n.head[a]&&n.head[a].rows&&1==n.head[a].rows.length){d&&(i=p(n.head,a));var c=n.head[a].rows[0],f=[{index:s,data:{values:c.values}}];e.table.updateDataByIndexs(a,f),i||(0,r.toast)({color:"success",content:u+(0,o.loadMultiLang)(e,"36300-000005")})}}else e.table.deleteCacheId(a,l),e.table.deleteTableRowsByIndex(a,s),(0,r.toast)({color:"success",content:u+(0,o.loadMultiLang)(e,"36300-000005")});b&&"function"==typeof b&&b(e,n)}})}),c=t.listSingleOperator=function(e,t,a,r,n,o,l,i,s,c,d,p){var f=n[o].value,b=n.ts.value;u(e,t,a,r,f,b,l,i,s,c,d,p)},d=function(e){var t=(e&&e.values&&e.values.ntbinfo||{}).value;return t&&(e.values.ntbinfo={value:null,display:null}),t},p=t.showTBBMsg=function(e,t){if(!(e&&t&&e[t]&&e[t].rows&&0!=e[t].rows.length))return!1;var a=!1,n=e[t].rows[0],o=d(n);return o&&((0,r.toast)({color:"warning",content:o}),a=!0),a},f=function(e,t,a){var r={},n="array"==typeof a?a:Object.keys(a);if(!n||0==n.length)return null;var o={},l=!0,i=!1,s=void 0;try{for(var u,c=n[Symbol.iterator]();!(l=(u=c.next()).done);l=!0){var d=u.value,p="array"==typeof a?null:a[d];if(p){var f=e.cardTable.getAllRows(d);if(f&&0!=f.length){var b=!0,v=!1,h=void 0;try{for(var y,m=f[Symbol.iterator]();!(b=(y=m.next()).done);b=!0){var g=y.value;if(g&&g.values&&0!=g.values.length){var _=g.rowid;o[g.values[p].value]=_}}}catch(e){v=!0,h=e}finally{try{!b&&m.return&&m.return()}finally{if(v)throw h}}}}}}catch(e){i=!0,s=e}finally{try{!l&&c.return&&c.return()}finally{if(i)throw s}}return r[t]=o,r},b=function(e,t,a){return a.rows&&a.rows[0]&&a.rows[0].rowid?a=e.cardTable.updateDataByRowId(t,a):e.cardTable.setTableData(t,a),a};t.cardOperatorForCash=function(e,t,a,n,i,s,u,c,d,v,h){var y="array"==typeof n?n:Object.keys(n),m={},g=e.form.getFormItemsValue(a,i).value,_=e.form.getFormItemsValue(a,"ts").value;m[g]=_;var k=f(e,g,n);h||(h={}),(0,r.ajax)({url:s,data:{pkMapTs:m,pageCode:t,isRet:!0,extParam:h,pkMapbodyPKMaprowID:k},success:function(t){var n=t.data,s=!1;if(n){var f=n.head,h=n.body,m=n.bodys;if(f||h||m){if(v&&(s=p(f,a)),f&&e.form.setAllFormValue(l({},a,f[a])),h&&y&&y.length>0){var _=!0,k=!1,C=void 0;try{for(var w,S=y[Symbol.iterator]();!(_=(w=S.next()).done);_=!0){var B=w.value,x=h[B];x&&((x=b(e,B,x))&&(n.body[B]=x))}}catch(e){k=!0,C=e}finally{try{!_&&S.return&&S.return()}finally{if(k)throw C}}}if(m&&y&&y.length>0){var L=!0,P=!1,O=void 0;try{for(var D,I=y[Symbol.iterator]();!(L=(D=I.next()).done);L=!0){var T=D.value,A=m[T];A&&((A=b(e,T,A))&&(n.bodys[T]=A))}}catch(e){P=!0,O=e}finally{try{!L&&I.return&&I.return()}finally{if(P)throw O}}}if(f&&f[a]&&f[a].rows&&f[a].rows[0]){var M=f[a].rows[0],E=M&&M.values&&M.values[i]&&M.values[i].value;r.cardCache.updateCache(i,E,n,a,c)}s||(0,r.toast)({color:"success",content:u+(0,o.loadMultiLang)(e,"36300-000005")})}}else r.cardCache.deleteCacheById(i,g,c),(0,r.toast)({color:"success",content:u+(0,o.loadMultiLang)(e,"36300-000005")});d&&"function"==typeof d&&d(e,n)}})},t.cardOperator=function(e,t,a,n,i,s,u,c,d,v,h){var y="array"==typeof n?n:Object.keys(n),m={},g=e.form.getFormItemsValue(a,i).value,_=e.form.getFormItemsValue(a,"ts").value;m[g]=_;var k=f(e,g,n);h||(h={}),(0,r.ajax)({url:s,data:{pkMapTs:m,pageCode:t,isRet:!0,extParam:h,pkMapbodyPKMaprowID:k},success:function(t){var n=t.data,s=!1;if(n){e.getUrlParam("status");var f=n.head,h=n.body,m=n.bodys;if(f||h||m){if(v&&(s=p(f,a)),f&&e.form.setAllFormValue(l({},a,f[a])),h&&y&&y.length>0){var _=!0,k=!1,C=void 0;try{for(var w,S=y[Symbol.iterator]();!(_=(w=S.next()).done);_=!0){var B=w.value,x=h[B];x&&((x=b(e,B,x))&&(n.body[B]=x))}}catch(e){k=!0,C=e}finally{try{!_&&S.return&&S.return()}finally{if(k)throw C}}}if(m&&y&&y.length>0){var L=!0,P=!1,O=void 0;try{for(var D,I=y[Symbol.iterator]();!(L=(D=I.next()).done);L=!0){var T=D.value,A=m[T];A&&((A=b(e,T,A))&&(n.bodys[T]=A))}}catch(e){P=!0,O=e}finally{try{!L&&I.return&&I.return()}finally{if(P)throw O}}}if(f&&f[a]&&f[a].rows&&f[a].rows[0]){var M=f[a].rows[0],E=M&&M.values&&M.values[i]&&M.values[i].value;r.cardCache.updateCache(i,E,n,a,c)}s||(0,r.toast)({color:"success",content:u+(0,o.loadMultiLang)(e,"36300-000005")})}}else r.cardCache.deleteCacheById(i,g,c),(0,r.toast)({color:"success",content:u+(0,o.loadMultiLang)(e,"36300-000005")});d&&"function"==typeof d&&d(e,n)}})},t.linkSucessPro=function(e,t,a){var r=t.data;if(r&&r.length>0)for(var o=0;o<r.length;o++){var l=r[o],i=(l.url,l.pks),s=l.appCode,u=l.linkPageCode;a&&0!=Object.keys(a).length||(a={status:"browse"}),a.scene||(a.scene=n.SCENE.LINK),a.srcbillid||(a.srcbillid=i),a.appcode=s,a.pagecode=u,a.pks=i,a.id=i,e.openTo(null,a)}}},53:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rewriteTransferSrcBids=t.deleteCacheDataForList=t.getNextId=t.getCurrentLastId=t.getDefData=t.setDefData=t.hasListCache=t.addCacheData=t.getCacheDataByPk=t.deleteCacheData=t.updateCacheData=t.changeUrlParam=void 0;var r=a(0);t.changeUrlParam=function(e,t){e.setUrlParam(t)},t.updateCacheData=function(e,t,a,n,o,l,i){r.cardCache.addCache;var s=r.cardCache.updateCache;r.cardCache.getCacheById,s(t,a,n,o,l)},t.deleteCacheData=function(e,t,a,n){var o=r.cardCache.deleteCacheById;r.cardCache.getNextId,o(t,a,n)},t.getCacheDataByPk=function(e,t,a){return(0,r.cardCache.getCacheById)(a,t)},t.addCacheData=function(e,t,a,n,o,l,i){(0,r.cardCache.addCache)(a,n,o,l,i)},t.hasListCache=function(e,t){return e.table.hasCacheData(t)},t.setDefData=function(e,t,a){(0,r.cardCache.setDefData)(t,e,a)},t.getDefData=function(e,t){return(0,r.cardCache.getDefData)(t,e)},t.getCurrentLastId=function(e){return(0,r.cardCache.getCurrentLastId)(e)},t.getNextId=function(e,t,a){return(0,r.cardCache.getNextId)(t,a)},t.deleteCacheDataForList=function(e,t,a){e.table.deleteCacheId(t,a)},t.rewriteTransferSrcBids=function(e,t,a){if(a){var r=[];a.forEach((function(e){r.push(e.values[t].value)})),e.transferTable.setSavedTransferTableDataPk(r)}}},58:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),n=a(3),o=i(n),l=(i(a(4)),a(0));function i(e){return e&&e.__esModule?e:{default:e}}var s=l.base.NCModal,u=l.base.NCButton,c=l.base.NCFormControl,d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={value:"test"},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"render",value:function(){return o.default.createElement(s,{show:this.props.show,onHide:this.props.close,style:{width:"520px",height:"210px"}},o.default.createElement(s.Header,{closeButton:!0,style:{background:"rgba(243,243,243,1)"}},o.default.createElement(s.Title,{style:{paddingLeft:"0px"}},this.props.title)),o.default.createElement(s.Body,{style:{marginTop:"20px"}},o.default.createElement(c,{className:"demo-input",onChange:this.props.onChange,value:this.props.value,size:"sm"})),o.default.createElement(s.Footer,null,o.default.createElement(u,{shape:"border",colors:"primary",onClick:this.props.beSureClick},"确认"),o.default.createElement(u,{shape:"border",onClick:this.props.close},"取消")))}}]),t}(n.Component);t.default=d},6:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.button_limit=5,t.module_id="3630",t.module_name="fts",t.module_tmpub_name="tmpub",t.module_tmpub_id="3601",t.sourceModel_FTS="FTS",t.PaymentMergeBillType="36J5",t.PaymentBillType="36J1",t.SHOWMODEL_BULU=0,t.SHOWMODEL_LIULAN=1,t.SHOWMODEL_ZHIFU=3,t.PAYMODEL_COMBINEPAY=13,t.BILLTYPE_ARAP=["F2","F3"]},7:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rewriteTransferSrcBids=t.deleteCacheDataForList=t.getNextId=t.getCurrentLastId=t.getDefData=t.setDefData=t.hasListCache=t.addCacheData=t.getCacheDataByPk=t.deleteCacheData=t.updateCacheData=t.changeUrlParam=void 0;var r=a(53);t.changeUrlParam=r.changeUrlParam,t.updateCacheData=r.updateCacheData,t.deleteCacheData=r.deleteCacheData,t.getCacheDataByPk=r.getCacheDataByPk,t.addCacheData=r.addCacheData,t.hasListCache=r.hasListCache,t.setDefData=r.setDefData,t.getDefData=r.getDefData,t.getCurrentLastId=r.getCurrentLastId,t.getNextId=r.getNextId,t.deleteCacheDataForList=r.deleteCacheDataForList,t.rewriteTransferSrcBids=r.rewriteTransferSrcBids},8:function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=function(e,t){var a=e[1]||"",r=e[3];if(!r)return a;if(t&&"function"==typeof btoa){var n=(l=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(l))))+" */"),o=r.sources.map((function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"}));return[a].concat(o).concat([n]).join("\n")}var l;return[a].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+a+"}":a})).join("")},t.i=function(e,a){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},n=0;n<this.length;n++){var o=this[n][0];"number"==typeof o&&(r[o]=!0)}for(n=0;n<e.length;n++){var l=e[n];"number"==typeof l[0]&&r[l[0]]||(a&&!l[2]?l[2]=a:a&&(l[2]="("+l[2]+") and ("+a+")"),t.push(l))}},t}},9:function(e,t,a){var r,n,o={},l=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===n&&(n=r.apply(this,arguments)),n}),i=function(e){var t={};return function(a){return void 0===t[a]&&(t[a]=e.call(this,a)),t[a]}}((function(e){return document.querySelector(e)})),s=null,u=0,c=[],d=a(16);function p(e,t){for(var a=0;a<e.length;a++){var r=e[a],n=o[r.id];if(n){n.refs++;for(var l=0;l<n.parts.length;l++)n.parts[l](r.parts[l]);for(;l<r.parts.length;l++)n.parts.push(m(r.parts[l],t))}else{var i=[];for(l=0;l<r.parts.length;l++)i.push(m(r.parts[l],t));o[r.id]={id:r.id,refs:1,parts:i}}}}function f(e,t){for(var a=[],r={},n=0;n<e.length;n++){var o=e[n],l=t.base?o[0]+t.base:o[0],i={css:o[1],media:o[2],sourceMap:o[3]};r[l]?r[l].parts.push(i):a.push(r[l]={id:l,parts:[i]})}return a}function b(e,t){var a=i(e.insertInto);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=c[c.length-1];if("top"===e.insertAt)r?r.nextSibling?a.insertBefore(t,r.nextSibling):a.appendChild(t):a.insertBefore(t,a.firstChild),c.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");a.appendChild(t)}}function v(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=c.indexOf(e);t>=0&&c.splice(t,1)}function h(e){var t=document.createElement("style");return e.attrs.type="text/css",y(t,e.attrs),b(e,t),t}function y(e,t){Object.keys(t).forEach((function(a){e.setAttribute(a,t[a])}))}function m(e,t){var a,r,n,o;if(t.transform&&e.css){if(!(o=t.transform(e.css)))return function(){};e.css=o}if(t.singleton){var l=u++;a=s||(s=h(t)),r=k.bind(null,a,l,!1),n=k.bind(null,a,l,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(a=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",y(t,e.attrs),b(e,t),t}(t),r=w.bind(null,a,t),n=function(){v(a),a.href&&URL.revokeObjectURL(a.href)}):(a=h(t),r=C.bind(null,a),n=function(){v(a)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else n()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=l()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var a=f(e,t);return p(a,t),function(e){for(var r=[],n=0;n<a.length;n++){var l=a[n];(i=o[l.id]).refs--,r.push(i)}e&&p(f(e,t),t);for(n=0;n<r.length;n++){var i;if(0===(i=r[n]).refs){for(var s=0;s<i.parts.length;s++)i.parts[s]();delete o[i.id]}}}};var g,_=(g=[],function(e,t){return g[e]=t,g.filter(Boolean).join("\n")});function k(e,t,a,r){var n=a?"":r.css;if(e.styleSheet)e.styleSheet.cssText=_(t,n);else{var o=document.createTextNode(n),l=e.childNodes;l[t]&&e.removeChild(l[t]),l.length?e.insertBefore(o,l[t]):e.appendChild(o)}}function C(e,t){var a=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}function w(e,t,a){var r=a.css,n=a.sourceMap,o=void 0===t.convertToAbsoluteUrls&&n;(t.convertToAbsoluteUrls||o)&&(r=d(r)),n&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");var l=new Blob([r],{type:"text/css"}),i=e.href;e.href=URL.createObjectURL(l),i&&URL.revokeObjectURL(i)}}})}));
//# sourceMappingURL=index.12f8eaec.js.map