/*! @ncctag {"provider":"test","date":"2020-5-11 22:20:58"} */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nc-lightapp-front"),require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["nc-lightapp-front","react","react-dom"],t):"object"==typeof exports?exports["fts/currex/currexapprove/card/index"]=t(require("nc-lightapp-front"),require("react"),require("react-dom")):e["fts/currex/currexapprove/card/index"]=t(e["nc-lightapp-front"],e.React,e.ReactDOM)}(window,(function(e,t,r){return function(e){var t={};function r(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(a,o,function(t){return e[t]}.bind(null,o));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="../../../../",r(r.s=59)}([function(t,r){t.exports=e},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rewriteTransferSrcBids=t.deleteCacheDataForList=t.getNextId=t.getCurrentLastId=t.getDefData=t.setDefData=t.hasListCache=t.addCacheData=t.getCacheDataByPk=t.deleteCacheData=t.updateCacheData=t.changeUrlParam=void 0;var a=r(15);t.changeUrlParam=a.changeUrlParam,t.updateCacheData=a.updateCacheData,t.deleteCacheData=a.deleteCacheData,t.getCacheDataByPk=a.getCacheDataByPk,t.addCacheData=a.addCacheData,t.hasListCache=a.hasListCache,t.setDefData=a.setDefData,t.getDefData=a.getDefData,t.getCurrentLastId=a.getCurrentLastId,t.getNextId=a.getNextId,t.deleteCacheDataForList=a.deleteCacheDataForList,t.rewriteTransferSrcBids=a.rewriteTransferSrcBids},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.URL_PARAM={ID:"id",STATE:"status",SCENE:"scene",TBB_LINK:"pk_ntbparadimvo",LINK_ID:"linkId",PK_SRC:"pk_src"},t.sagaField={frozen:"saga_frozen",gtxid:"saga_gtxid",btxid:"saga_btxid",status:"saga_status"},t.sagaFrozenEnum={frozen:1,unfrozen:0},t.sagaStateEnum={success:0,fail:1},t.SCENE={DEFAULT:"defaultsce",APPROVE:"approvesce",LINK:"linksce",FIP:"fip",OTHER:"othersce"},t.LINKTYPE={NORMAL:"NORMAL",BILL_REVIEW:"BILL_REVIEW"},t.LINK_PARAM={ARAP:{FLAG:"flag",FLAG_VALUE:"ftsLinkArap"}},t.MODULE_INFO={TMPUB:"tmpub",TMPUB_NUM:"3601"},t.COMMON_URL={ELECSIGNPRINTCHECK:"/nccloud/tmpub/pub/elecsignprintcheck.do"},t.cache={rateinfo:"rateinfo",iserrtoast:"iserrtoast"},t.SPLIT_TBBCTRLTYPE="_ctrltype_",t.tbbwarntype={flexibility:"0",inflexibility:"1",warning:"2"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.go2CardCheck=t.tbbWarnDialog=t.showTBBMsg=t.getTBBMsg=t.saveCommit=t.frozenBtnCtrl=t.showErrBtn=t.createCardWebSocket=t.createListWebSocket=t.setRate2NewRow=t.getCacheRateValue=t.bodyRateEditOnAfterEdit=t.addDefReferFilter=t.elecSignCardPrint=t.elecSignListPrint=t.createSimpleBillData=t.buildLightBodyAfterEditData=t.loadMultiLang=t.getMultiLangRes=t.appendMultiLangRes=t.saveMultiLangRes=t.getPropCache=t.setPropCache=t.showPagination=t.setDefOrg2AdvanceSrchArea=t.setDefOrg2ListSrchArea=t.setDefOrg2Form=t.hasDefaultOrg=t.isLinkScene=void 0;var a=r(0),o=r(2);function n(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function a(o,n){try{var i=t[o](n),l=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(l).then((function(e){a("next",e)}),(function(e){a("throw",e)}));e(l)}("next")}))}}var i,l,s=t.isLinkScene=function(e){var t=e.getUrlParam(o.URL_PARAM.SCENE);return!(!!!e.getUrlParam(o.URL_PARAM.TBB_LINK)&&t!=o.SCENE.LINK&&t!=o.SCENE.FIP)},u=t.hasDefaultOrg=function(e){return e&&e.context&&e.context&&e.context.pk_org},c=function(e,t,r){if(!(e&&e.search&&t&&r))return!1;try{var a=e.search.getSearchValByField(t,r);return!(!a||!a.value||!a.value.firstvalue&&!a.value.secondvalue)}catch(e){return!0}},d=(t.setDefOrg2Form=function(e,t,r){if(e&&t&&u(r)){var a=r.context,o=a.pk_org,n=a.org_Name,i=a.pk_org_v,l=a.org_v_Name;e.form.setFormItemsValue(t,{pk_org:{value:o,display:n},pk_org_v:{value:i,display:l}})}},t.setDefOrg2ListSrchArea=function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pk_org";if(e&&e.search&&t&&u(r)&&!s(e)&&!c(e,t,a)){var o=r.context,n=o.pk_org,i=o.org_Name,l={display:i,value:n};e.search.setSearchValByField(t,a,l)}},t.setDefOrg2AdvanceSrchArea=function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pk_org";if(e&&e.search&&t&&u(r)&&r.template&&!s(e)){var o=r.template,n=r.context,i=n.pk_org,l=n.org_Name;o[t].items.map((function(e){e.attrcode==a&&(e.initialvalue={display:l,value:i})}))}},t.showPagination=function(e,t,r){e&&t&&r&&!r.template&&(r.template[t].pagination=!s(e))},function(e){return e+"_extObj"}),f=(t.setPropCache=function(e,t,r,a){if(e&&t&&r){var o=d(t),n=e.ViewModel.getData(o);n||(n={}),n[r]=a,e.ViewModel.setData(o,n)}},t.getPropCache=function(e,t,r){if(!e||!t||!r)return null;var a=d(t),o=e.ViewModel.getData(a);return o&&o.hasOwnProperty(r)?o[r]:null},t.saveMultiLangRes=function(e,t){if(e&&t){e.ViewModel.setData("multiLang",t)}}),p=(t.appendMultiLangRes=function(e,t){if(e&&t){var r=p(e);r?Object.assign(r,t):f(e,t)}},t.getMultiLangRes=function(e){if(e){return e.ViewModel.getData("multiLang")}}),m=t.loadMultiLang=function(e,t){var r=p(e);return r&&r[t]||""},h=function(e,t){var r={},a=e.form.getAllFormValue(t);return a.areacode=t,r[t]=a,r},g=function(e,t){var r={rows:e.cardTable.getChangedRows(t),areaType:"table",areacode:t},a={};return a[t]=r,a},v=function(e,t,r,a,o,n,i,l){var s={head:h(e,r),pageid:t};return l?s.body=g(e,a):s.bodys=g(e,a),{areacode:a,attrcode:o,card:s,changedrows:n,index:i}},b=(t.buildLightBodyAfterEditData=function(e,t,r,a,o,n,i){var l=arguments.length>7&&void 0!==arguments[7]&&arguments[7];try{if(!(e&&t&&r&&a&&o&&n))throw new Error("参数缺失！");var s=v(e,t,r,a,o,n,i,l),u=s.card,c=u.body,d=u.bodys;if(l&&1==c[a].rows.length||!l&&1==d[a].rows.length)return s;var f=[],p=n[0].rowid;if(!(c=l?c[a]:d[a]))throw new Error("未获取到指定的表体["+a+"]!");var m=c,h=m.rows,g=!0,b=!1,y=void 0;try{for(var _,C=h[Symbol.iterator]();!(g=(_=C.next()).done);g=!0){var I=_.value,w=I.rowid;if(w&&w==p){f.push(I);break}}}catch(e){b=!0,y=e}finally{try{!g&&C.return&&C.return()}finally{if(b)throw y}}if(0==f.length)throw new Error("未找到修改的行!");return c.rows=f,s}catch(e){throw e}},function(e){if(!e||0==e.length)return null;var t=!0,r=!1,a=void 0;try{for(var o,n=e[Symbol.iterator]();!(t=(o=n.next()).done);t=!0){var i=o.value;if(i&&i.values&&0!=Object.keys(i.values).length){var l=i.values,s=Object.keys(l),u=!0,c=!1,d=void 0;try{for(var f,p=s[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var m=f.value,h=l[m];h&&0!=Object.keys(h).length&&h.value||delete l[m]}}catch(e){c=!0,d=e}finally{try{!u&&p.return&&p.return()}finally{if(c)throw d}}}}}catch(e){r=!0,a=e}finally{try{!t&&n.return&&n.return()}finally{if(r)throw a}}}),y=function(e,t,r,a,o){var n=e.createMasterChildDataSimple(t,r,a),i=n.head,l=n.body;return o&&(b(i[r].rows),b(l[a].rows)),n},_=function(e,t,r,a,o){var n=e.createExtCardDataSimple(t,r,a),i=n.head,l=n.bodys;if(o){b(i[r].rows);var s=!0,u=!1,c=void 0;try{for(var d,f=a[Symbol.iterator]();!(s=(d=f.next()).done);s=!0){var p=d.value;b(l[p].rows)}}catch(e){u=!0,c=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}}return n},C=t.createSimpleBillData=function(e,t,r,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!(e&&t&&r&&a))return null;var n=!!Array.isArray(a)&&a.length>1,i=Array.isArray(a)?a:[a];return n?_(e,t,r,i,o):y(e,t,r,i[0],o)},I=(t.elecSignListPrint=function(e,t){var r=t.url,o=t.offical,n=void 0!==o&&o,i=t.appCode,l=t.nodeKey,s=t.tableCode,u=t.field_id,c=t.field_billno,d=void 0===c?"vbillno":c,f=t.getOrgFunc,p=t.validateFunc;if(!(r&&i&&s&&u&&d))throw new Error("参数缺失！");var h=e.table.getCheckedRows(s);if(null!=h&&0!=h.length){var g=[],v=[],b=!0,y=!1,_=void 0;try{for(var C,I=h[Symbol.iterator]();!(b=(C=I.next()).done);b=!0){var E=C.value,x=E&&E.data&&E.data.values&&E.data.values[u]&&E.data.values[u].value;if(x){var R=E&&E.data&&E.data.values&&E.data.values[d]&&E.data.values[d].value,S=E&&E.data&&E.data.values&&E.data.values.pk_org&&E.data.values.pk_org.value,M=E.index;f&&"function"==typeof f&&(S=f(E));var P=!0;if(p&&"function"==typeof p){var A=p(E);A&&(v.push(k(e,A,R,M)),P=!1)}P&&g.push({id:x,vbillno:R,pk_org:S,index:M})}}}catch(e){y=!0,_=e}finally{try{!b&&I.return&&I.return()}finally{if(y)throw _}}w(e,{url:r,offical:n,appCode:i,nodeKey:l,detail:g,errMessArr:v})}else(0,a.toast)({color:"warning",content:m(e,"3601-000010")})},t.elecSignCardPrint=function(e,t){var r=t.url,a=t.offical,o=void 0!==a&&a,n=t.appCode,i=t.nodeKey,l=t.headCode,s=t.field_id,u=t.field_billno,c=void 0===u?"vbillno":u,d=t.getOrgFunc,f=t.validateFunc;if(!(r&&n&&l&&s&&c))throw new Error("参数缺失！");var p=e.form.getFormItemsValue(l,s).value,m=e.form.getFormItemsValue(l,c).value,h=e.form.getFormItemsValue(l,"pk_org").value;d&&"function"==typeof d&&(h=d());var g=[],v=!0;if(f&&"function"==typeof f){var b=f();b&&(g.push(k(e,b,m,0)),v=!1)}w(e,{url:r,offical:o,appCode:n,nodeKey:i,detail:v?[{id:p,vbillno:m,pk_org:h}]:null,errMessArr:g})},function(e,t){t&&0!=t.length&&(1==t.length?(0,a.toast)({duration:"infinity",color:"danger",content:t[0],hasCloseBtn:!0}):(0,a.toast)({duration:"infinity",color:"danger",TextArr:[m(e,"3601-000000"),m(e,"3601-000001"),m(e,"3601-000021")],groupOperation:!0,groupOperationMsg:t}))}),w=function(e,t){var r=t.url,n=t.offical,i=t.appCode,l=t.nodeKey,s=t.detail,u=t.errMessArr,c=void 0===u?[]:u;if(!(c&&c.length>0)||s&&0!=s.length){var d={offical:n,detail:s};(0,a.ajax)({url:o.COMMON_URL.ELECSIGNPRINTCHECK,data:d,success:function(t){var o=t.data,s=o.passPKs,u=o.passInfos,d=o.unPassInfos;if(c.length>0||d&&d.length>0){var f=!0,p=!1,m=void 0;try{for(var h,g=d[Symbol.iterator]();!(f=(h=g.next()).done);f=!0){var v=h.value,b=v.vbillno,y=v.mess,_=v.index,C=k(e,y,b,_);c.push(C)}}catch(e){p=!0,m=e}finally{try{!f&&g.return&&g.return()}finally{if(p)throw m}}I(e,c)}if(s&&s.length>0&&u&&u.length>0){var w={offical:n,detail:u};(0,a.print)("pdf",r,{nodekey:l,appcode:i,oids:s,userjson:JSON.stringify(w)})}}})}else I(e,c)},k=function(e,t,r,a){return m(e,"3601-000008")+r+m(e,"3601-000009")+t||""},E=(t.addDefReferFilter=function(e,t){var r=t.headCode,a=t.areaCode,o=t.meta,n=t.orgField,i=t.getOrgFunc;if(a&&o&&(r||n||i)){var l=Array.isArray(a)?a:[a],s=!0,u=!1,c=void 0;try{for(var d,f=l[Symbol.iterator]();!(s=(d=f.next()).done);s=!0){o[d.value].items.map((function(t){(t.attrcode.startsWith("vdef")||t.attrcode.startsWith("vuserdef"))&&(t.queryCondition=function(){return{pk_org:i&&"function"==typeof i?i():(e.form.getFormItemsValue(r,n)||{}).value}})}))}}catch(e){u=!0,c=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}}},t.bodyRateEditOnAfterEdit=function(e){var t=e.props,r=e.bodyCodes,n=e.rateInfo,i=e.datasource,l=e.olcRates,s=e.glcRates,u=e.gllcRates;if(t&&n&&i&&r){!function(e){var t=e.rateInfo,r=e.datasource;if(t&&r){a.cardCache.setDefData(o.cache.rateinfo,r,t);a.cardCache.getDefData(o.cache.rateinfo,r)}}({rateInfo:n,datasource:i}),Array.isArray(r)||(r=[r]);var c=n.olcRateEditable,d=n.glcRateEditable,f=n.gllcRateEditable,p=!0,m=!1,h=void 0;try{for(var g,v=r[Symbol.iterator]();!(p=(g=v.next()).done);p=!0){var b=g.value;l&&(Array.isArray(l)||(l=[l]),t.cardTable.setColEditableByKey(b,l,!c)),s&&(Array.isArray(s)||(s=[s]),t.cardTable.setColEditableByKey(b,s,!d)),u&&(Array.isArray(u)||(u=[u]),t.cardTable.setColEditableByKey(b,u,!f))}}catch(e){m=!0,h=e}finally{try{!p&&v.return&&v.return()}finally{if(m)throw h}}}},t.getCacheRateValue=function(e){var t=e.datasource;if(t){var r=a.cardCache.getDefData(o.cache.rateinfo,t);return r?{olcRate:r.olcRate,glcRate:r.glcRate,gllcRate:r.gllcRate}:null}}),x=(t.setRate2NewRow=function(e){var t=e.olcRates,r=e.glcRates,a=e.gllcRates,o=e.datasource,n=e.row;if(o){var i=E({datasource:o});if(i){var l=i.olcRate,s=i.glcRate,u=i.gllcRate;if(t){Array.isArray(t)||(t=[t]);var c=!0,d=!1,f=void 0;try{for(var p,m=t[Symbol.iterator]();!(c=(p=m.next()).done);c=!0){n[p.value]={value:l}}}catch(e){d=!0,f=e}finally{try{!c&&m.return&&m.return()}finally{if(d)throw f}}}if(r){Array.isArray(r)||(r=[r]);var h=!0,g=!1,v=void 0;try{for(var b,y=r[Symbol.iterator]();!(h=(b=y.next()).done);h=!0){n[b.value]={value:s}}}catch(e){g=!0,v=e}finally{try{!h&&y.return&&y.return()}finally{if(g)throw v}}}if(a){Array.isArray(a)||(a=[a]);var _=!0,C=!1,I=void 0;try{for(var w,k=a[Symbol.iterator]();!(_=(w=k.next()).done);_=!0){n[w.value]={value:u}}}catch(e){C=!0,I=e}finally{try{!_&&k.return&&k.return()}finally{if(C)throw I}}}}}},t.createListWebSocket=function(e,t){var r=t.tableAreaCode,a=t.tablePkName,o=t.billtype,n=t.dataSource,i=t.serverLocation;if(e&&r&&a&&o){var l=e.socket,s={tableAreaCode:r,billpkname:a,billtype:o,dataSource:n};return i&&(s.serverLocation=i),React.createElement("div",null,l.connectMesg(s))}},t.createCardWebSocket=function(e,t){var r=t.headBtnAreaCode,a=t.formAreaCode,o=t.billpkname,n=t.billtype,i=t.dataSource,l=t.serverLocation;if(e&&r&&a&&o&&n){var s=e.socket,u={headBtnAreaCode:r,formAreaCode:a,billtype:n,billpkname:o,dataSource:i};return l&&(u.serverLocation=l),React.createElement("div",null,s.connectMesg(u))}},t.showErrBtn=function(e,t){var r=t.headBtnCode,a=t.headAreaCode,n=t.fieldPK;t.datasource;if(e&&r&&a){var i=e.getUrlParam(o.URL_PARAM.STATE),l="0";try{l=e.form.getFormItemsValue(a,o.sagaField.status).value}catch(e){l="0"}var s="1"===l&&"browse"==i;e.button.toggleErrorStatus(r,{isError:s}),s&&x(e,{headAreaCode:a,fieldPK:n})}},function(e,t){var r=t.headAreaCode,a=t.fieldPK;if(r&&a){var n=e.getUrlParam("status"),i=e.form.getFormItemsValue(r,o.sagaField.gtxid),l=e.form.getFormItemsValue(r,a);"browse"==n&&i&&i.value&&l&&l.value&&e.socket.showToast({gtxid:i.value,billpk:l.value})}}),R=(t.frozenBtnCtrl=function(e,t){var r=t.btnCodes;if(e&&r){var a=Array.isArray(r)?r:[r];if("browse"==e.getUrlParam(o.URL_PARAM.STATE)){var n="1";try{n=e.form.getFormItemsValue(headAreaCode,o.sagaField.frozen).value}catch(e){n="1"}e.button.setButtonDisabled(a,"1"==n)}}},function(e,t){var r=t.pageCode,a=t.headCode,o=t.bodyCodeArr,n=t.saveFunc,i={},l={};if(0==o.length)i={pageid:r,model:{areacode:a,rows:e.form.getAllFormValue(a).rows,areaType:"form"}},l[a]="form";else{i=o.length>1?e.createExtCardData(r,a,o):e.createMasterChildData(r,a,o[0]);var s=!0,u=!1,c=void 0;try{for(var d,f=o[Symbol.iterator]();!(s=(d=f.next()).done);s=!0){l[d.value]="cardTable"}}catch(e){u=!0,c=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}}e.validateToSave(i,n,l,"")}),S=(i=n(regeneratorRuntime.mark((function e(t,r){var a,o=r.pageCode,n=r.headCode,i=r.bodyCodeArr,l=r.saveValidate,s=r.processSaveData;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.form.isCheckNow(n)){e.next=2;break}return e.abrupt("return",null);case 2:if(!(i&&i.length>0)||t.cardTable.checkTableRequired()){e.next=4;break}return e.abrupt("return",null);case 4:if(!l||"function"!=typeof l){e.next=7;break}if(l()){e.next=7;break}return e.abrupt("return",null);case 7:if(a=C(t,o,n,i),!s||"function"!=typeof s){e.next=12;break}return e.next=11,s(a);case 11:a=e.sent;case 12:return e.abrupt("return",{data:JSON.stringify(a),pageCode:o});case 13:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)}),M=(t.saveCommit=(l=n(regeneratorRuntime.mark((function e(t,r){var o,n,i=r.pageCode,l=r.headCode,s=r.bodyCode,u=r.url,c=r.assign,d=r.showAssignFunc,f=r.updateViewFunc,p=r.saveValidate,m=r.processSaveData,h=r.extParam;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i&&l&&u&&d&&f){e.next=2;break}return e.abrupt("return");case 2:return h||(h={}),o=(r=s)?Array.isArray(r)?r:[r]:[],e.next=6,S(t,{pageCode:i,headCode:l,bodyCodeArr:o,saveValidate:p,processSaveData:m});case 6:if(n=e.sent){e.next=9;break}return e.abrupt("return");case 9:c&&(h.content=JSON.stringify(c)),n.extParam=h,R(t,{pageCode:i,headCode:l,bodyCodeArr:o,saveFunc:function(){(0,a.ajax)({url:u,data:n,success:function(e){var t=e.data.workflow;t&&"approveflow"==t||"workflow"==t?d(e):f(e)}})}});case 12:case"end":return e.stop()}var r}),e,this)}))),function(e,t){return l.apply(this,arguments)}),t.getTBBMsg=function(e){var t=e.row,r=e.msgfield;r||(r="ntbinfo");var a=(t&&t.values&&t.values[r]||{}).value;return a&&(t.values[r]={value:null,display:null}),a});t.showTBBMsg=function(e){var t=e.head,r=e.headCode,o=e.msgfield;if(!(t&&r&&t[r]&&t[r].rows&&0!=t[r].rows.length))return!1;var n=!1,i=t[r].rows[0],l=M({row:i,msgfield:o});return l&&((0,a.toast)({color:"warning",content:l}),n=!0),n},t.tbbWarnDialog=function(e,t){var r=t.ntbinfos,o=t.onConfirm;if(r&&0!=r.length){var n=[],i=r.length>1,l=1,s=i?[m(e,"3601-000019")+"["+r.length+"]"+m(e,"3601-000020")]:[],u=!0,c=!1,d=void 0;try{for(var f,p=r[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=f.value;if(null!=h){var g=h.pk,v=h.msg,b=h.vbillno;if(g&&b){n.push(g);var y="";i&&(y=l+". "+m(e,"3601-000018")+"["+b+"] "),s.push(React.createElement("li",null,y+v)),l++}}}}catch(e){c=!0,d=e}finally{try{!u&&p.return&&p.return()}finally{if(c)throw d}}0!=s.length&&(0,a.promptBox)({color:"warning",title:m(e,"3601-000017"),content:React.createElement("ul",null,s),beSureBtnClick:function(){o(n)}})}},t.go2CardCheck=function(e){var t=e.props,r=e.url,o=e.pk,n=e.ts,i=e.fieldPK,l=e.actionCode,s=e.permissionCode,u=e.checkSaga,c=void 0===u||u,d=e.checkTS,f=void 0===d||d,p=e.go2CardFunc;p&&"function"==typeof p&&(t&&r&&o&&n&&i||p(),(0,a.ajax)({url:r,data:{pk:o,ts:n,actionCode:l,permissionCode:s,fieldPK:i,checkSaga:c,checkTS:f},success:function(e){p()}}))}},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.module_id="3630",t.base_url="/nccloud/fts/currex/",t.base_path="/fts/currex/currex/",t.button_limit=3,t.billtype="36JV",t.link_billtype="36JV",t.funcode="36300CUREX_APPROVE",t.funcode_multi="36300CUREX",t.print_nodekey=null,t.CurrExConst={dataSource:"TM_FTS_CurrEx_base",pk_filed:"pk_currex_h",hasQryFlag:"hasQryFlag",queryCondition:"queryCondition",islink:"islinkpayment",saveAddOrg:"saveaddorg",linkSourceData:"linkSourceData"},t.list_page_id="36300CUREX_L01",t.list_search_id="36300CUREX_search",t.list_table_id="currex",t.card_page_id="36300CUREX_APPROVE_C01",t.card_from_id="currex",t.card_from_exchangemsg_id="exchangeinfo",t.card_from_srcinfo_id="srcinfo",t.card_from_auditinfo_id="auditinfo",t.saga_gtxid="saga_gtxid",t.pk="pk_currex_h",t.printnodekey={official:"OFFICIAL",inofficial:"INOFFICIAL"},t.viewmod_deal="deal",t.LISTGROUP={NEEDCOMMIT:"0",APPROVING:"1",PAYSUCCESS:"2",ALL:"3"},t.billstatus={WaitCommit:"0",WaitApprove:"1",PayOK:"2"},t.group_all=5,t.busType={BusType_Purchas:"purchasing",BusType_Selling:"selling",BusType_Exchange:"exchange"},t.srcBusiType={SrcBusiType_APPLY:"APPLY",SrcBusiType_HAND:"HAND"},t.card_hidden_buttons=["Save","SaveCommit","Delete","Commit","Decide","Back","UnCommit","Cancel","Add","Premit","Unpremit","Edit","Copy"],t.head_hidden_buttons=["BatchDelete","Copy","BatchCommit","BatchPremit","BatchUnPremit","BatchUncommit","File","Print","OutPut","OffiPrint","InOffiPrint"],t.head_majorbuttons=["Add","Commit","Decide","Pay","Premit","Deliver"],t.cache={iserrtoast:"iserrtoast"}},function(e,r){e.exports=t},function(e,t){e.exports=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.linkSucessPro=t.cardOperator=t.cardOperatorForCash=t.showTBBMsg=t.listSingleOperator=t.listSingleOperatorNoRecord=t.listMultiOperator=t.CopyLine=t.BatchCopy=t.Open=t.DelLine=t.BatchDelLine=t.InsertLine=t.AddLine=void 0,t.BatchCopyForCash=function(e,t,r,o){var i=e.cardTable.getCheckedRows(t);if(null==i||0==i.length)return(0,a.toast)({color:"warning",content:(0,n.loadMultiLang)(e,"36300-000002")}),!1;var l=[],s=JSON.parse(JSON.stringify(i)),u=!0,c=!1,d=void 0;try{for(var f,p=s[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var m=f.value;m.data.selected=!1,m.data.values[o]&&m.data.values[o].value&&(m.data.values[o].value=null),m.data.values.rowno&&m.data.values.rowno.value&&(m.data.values.rowno.value=null),l.push(m.data)}}catch(e){c=!0,d=e}finally{try{!u&&p.return&&p.return()}finally{if(c)throw d}}null!=r&&null!=r||(r=e.cardTable.getNumberOfRows(t,!1));return e.cardTable.insertRowsAfterIndex(t,l,r),!0};var a=r(0),o=r(2),n=r(3);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}a.cardCache.getNextId,a.cardCache.deleteCacheById,t.AddLine=function(e,t,r,a){if(r){var o=e.cardTable.getNumberOfRows(t);e.cardTable.addRow(t,o,r)}else e.cardTable.addRow(t);a&&"function"==typeof a&&afterFunc(e,t)},t.InsertLine=function(e,t,r,a){e.cardTable.addRow(t,r+1,a)},t.BatchDelLine=function(e,t,r){var o=e.cardTable.getCheckedRows(t);if(null==o||0==o.length)return(0,a.toast)({color:"warning",content:(0,n.loadMultiLang)(e,"36300-000001")}),!1;var i=[],l=!0,s=!1,u=void 0;try{for(var c,d=o[Symbol.iterator]();!(l=(c=d.next()).done);l=!0){var f=c.value;i.push(f.index)}}catch(e){s=!0,u=e}finally{try{!l&&d.return&&d.return()}finally{if(s)throw u}}return r&&"function"==typeof r?e.cardTable.delRowsByIndex(t,i,r):e.cardTable.delRowsByIndex(t,i),!0},t.DelLine=function(e,t,r,a){a&&"function"==typeof a?e.cardTable.delRowsByIndex(t,r,a):e.cardTable.delRowsByIndex(t,r)},t.Open=function(e,t,r,a,o){e.cardTable.openModel(t,o,a,r)};t.BatchCopy=function(e,t,r){var o=e.cardTable.getCheckedRows(t);if(null==o||0==o.length)return(0,a.toast)({color:"warning",content:(0,n.loadMultiLang)(e,"36300-000002")}),!1;var i=[],l=JSON.parse(JSON.stringify(o)),s=!0,u=!1,c=void 0;try{for(var d,f=l[Symbol.iterator]();!(s=(d=f.next()).done);s=!0){var p=d.value;p.data.selected=!1,i.push(p.data)}}catch(e){u=!0,c=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}return null==r&&(r=e.cardTable.getNumberOfRows(t,!1)),e.cardTable.insertRowsAfterIndex(t,i,r),!0},t.CopyLine=function(e,t,r){e.cardTable.pasteRow(t,r)};var l=function(e,t,r){e.errContent=e.errContent+t,e.failCount=Number(e.failCount)+1,e.errMsgArr.push(r||"")},s=function(e,t){e.succContent=e.succContent+t,e.succCount=Number(e.succCount)+1},u=(t.listMultiOperator=function(e,t,r,o,i,u,f,p,m,h){var g=e.table.getCheckedRows(r);if(null!=g&&0!=g.length){if(1==g.length){var v={};return v[o]=g[0]&&g[0].data&&g[0].data.values&&g[0].data.values[o],v.ts=g[0]&&g[0].data&&g[0].data.values&&g[0].data.values.ts,void c(e,t,r,i,v,o,g[0].index,u,f,p,m,h)}var b={},y={},_={},C=0,I=void 0,w=void 0,k=void 0;m||(m={});for(;C<g.length;)I=g[C]&&g[C].data&&g[C].data.values&&g[C].data.values[o]&&g[C].data.values[o].value,w=g[C]&&g[C].data&&g[C].data.values&&g[C].data.values.ts&&g[C].data.values.ts.value,k=g[C]&&g[C].data&&g[C].data.values&&g[C].data.values.vbillno&&g[C].data.values.vbillno.value,_[I]=g[C].index,I&&w&&(b[I]=w),I&&k&&(y[I]=k),C++;Object.keys(b).length>0&&(0,a.ajax)({url:i,data:{pkMapRowIndex:_,pkMapTs:b,pkMapVbillno:y,pageCode:t,extParam:m},success:function(t){var o=t.data.data,i=[],c=[],f={errMsgArr:[],succContent:"",errContent:"",succCount:0,failCount:0};if(o&&o.length>0){var m=!0,g=!1,v=void 0;try{for(var b,y=o[Symbol.iterator]();!(m=(b=y.next()).done);m=!0){var _=b.value,C=_.state,I=_.msg,w=_.result,k=_.pk,E=(_.vbillno,_.rowIndex),x=Number(E)+1;if(0==C)if(w){if(w&&w.head&&w.head[r]&&w.head[r].rows&&w.head[r].rows.length>0){var R=w.head[r].rows[0];if(p){var S=d(R);S?l(f,x,S=x+"."+S):s(f,x)}else s(f,x);var M={index:E,data:{values:R.values}};i.push(M)}}else s(f,x),e.table.deleteCacheId(r,k),c.push(E);else 1==C&&l(f,x,I)}}catch(e){g=!0,v=e}finally{try{!m&&y.return&&y.return()}finally{if(g)throw v}}i.length>0&&e.table.updateDataByIndexs(r,i),c.length>0&&e.table.deleteTableRowsByIndex(r,c)}var P=t.data,A=P.status,U=(P.msg,f.succContent),O=f.errContent,B=f.succCount,D=f.failCount,T=f.errMsgArr,N=(""==(U=B>0?U+(0,n.loadMultiLang)(e,"36300-000004")+u+(0,n.loadMultiLang)(e,"36300-000005"):"")?"":U+"，")+(D>0?O+(0,n.loadMultiLang)(e,"36300-000004")+u+(0,n.loadMultiLang)(e,"36300-000006"):"");if(0==A&&0==T.length){(0,n.loadMultiLang)(e,"36300-000007"),(0,n.loadMultiLang)(e,"36300-000008");(0,a.toast)({color:"success",content:u+(0,n.loadMultiLang)(e,"36300-000007")+B+(0,n.loadMultiLang)(e,"36300-000008")})}else(1==A||2==A||T.length>0)&&(0,a.toast)({duration:"infinity",color:"danger",content:N,TextArr:[(0,n.loadMultiLang)(e,"36300-000009"),(0,n.loadMultiLang)(e,"36300-000010"),(0,n.loadMultiLang)(e,"36300-000011")],groupOperation:!0,groupOperationMsg:T});h&&"function"==typeof h&&h(e,o)}})}else(0,a.toast)({color:"warning",content:(0,n.loadMultiLang)(e,"36300-000003")})},t.listSingleOperatorNoRecord=function(e,t,r,o,i,l,s,u,c,d,p,m){var h={};h[i]=l,p||(p={}),(0,a.ajax)({url:o,data:{pkMapTs:h,pageCode:t,extParam:p},success:function(t){var o=t.data,l=!1;if(o){if(o&&o.head&&o.head[r]&&o.head[r].rows&&1==o.head[r].rows.length){d&&(l=f(o.head,r));var c=o.head[r].rows[0],p=[{index:s,data:{values:c.values}}];e.table.updateDataByIndexs(r,p),l||(0,a.toast)({color:"success",content:u+(0,n.loadMultiLang)(e,"36300-000005")})}}else e.table.deleteCacheId(r,i),e.table.deleteTableRowsByIndex(r,s),(0,a.toast)({color:"success",content:u+(0,n.loadMultiLang)(e,"36300-000005")});m&&"function"==typeof m&&m(e,o)}})}),c=t.listSingleOperator=function(e,t,r,a,o,n,i,l,s,c,d,f){var p=o[n].value,m=o.ts.value;u(e,t,r,a,p,m,i,l,s,c,d,f)},d=function(e){var t=(e&&e.values&&e.values.ntbinfo||{}).value;return t&&(e.values.ntbinfo={value:null,display:null}),t},f=t.showTBBMsg=function(e,t){if(!(e&&t&&e[t]&&e[t].rows&&0!=e[t].rows.length))return!1;var r=!1,o=e[t].rows[0],n=d(o);return n&&((0,a.toast)({color:"warning",content:n}),r=!0),r},p=function(e,t,r){var a={},o="array"==typeof r?r:Object.keys(r);if(!o||0==o.length)return null;var n={},i=!0,l=!1,s=void 0;try{for(var u,c=o[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var d=u.value,f="array"==typeof r?null:r[d];if(f){var p=e.cardTable.getAllRows(d);if(p&&0!=p.length){var m=!0,h=!1,g=void 0;try{for(var v,b=p[Symbol.iterator]();!(m=(v=b.next()).done);m=!0){var y=v.value;if(y&&y.values&&0!=y.values.length){var _=y.rowid;n[y.values[f].value]=_}}}catch(e){h=!0,g=e}finally{try{!m&&b.return&&b.return()}finally{if(h)throw g}}}}}}catch(e){l=!0,s=e}finally{try{!i&&c.return&&c.return()}finally{if(l)throw s}}return a[t]=n,a},m=function(e,t,r){return r.rows&&r.rows[0]&&r.rows[0].rowid?r=e.cardTable.updateDataByRowId(t,r):e.cardTable.setTableData(t,r),r};t.cardOperatorForCash=function(e,t,r,o,l,s,u,c,d,h,g){var v="array"==typeof o?o:Object.keys(o),b={},y=e.form.getFormItemsValue(r,l).value,_=e.form.getFormItemsValue(r,"ts").value;b[y]=_;var C=p(e,y,o);g||(g={}),(0,a.ajax)({url:s,data:{pkMapTs:b,pageCode:t,isRet:!0,extParam:g,pkMapbodyPKMaprowID:C},success:function(t){var o=t.data,s=!1;if(o){var p=o.head,g=o.body,b=o.bodys;if(p||g||b){if(h&&(s=f(p,r)),p&&e.form.setAllFormValue(i({},r,p[r])),g&&v&&v.length>0){var _=!0,C=!1,I=void 0;try{for(var w,k=v[Symbol.iterator]();!(_=(w=k.next()).done);_=!0){var E=w.value,x=g[E];x&&((x=m(e,E,x))&&(o.body[E]=x))}}catch(e){C=!0,I=e}finally{try{!_&&k.return&&k.return()}finally{if(C)throw I}}}if(b&&v&&v.length>0){var R=!0,S=!1,M=void 0;try{for(var P,A=v[Symbol.iterator]();!(R=(P=A.next()).done);R=!0){var U=P.value,O=b[U];O&&((O=m(e,U,O))&&(o.bodys[U]=O))}}catch(e){S=!0,M=e}finally{try{!R&&A.return&&A.return()}finally{if(S)throw M}}}if(p&&p[r]&&p[r].rows&&p[r].rows[0]){var B=p[r].rows[0],D=B&&B.values&&B.values[l]&&B.values[l].value;a.cardCache.updateCache(l,D,o,r,c)}s||(0,a.toast)({color:"success",content:u+(0,n.loadMultiLang)(e,"36300-000005")})}}else a.cardCache.deleteCacheById(l,y,c),(0,a.toast)({color:"success",content:u+(0,n.loadMultiLang)(e,"36300-000005")});d&&"function"==typeof d&&d(e,o)}})},t.cardOperator=function(e,t,r,o,l,s,u,c,d,h,g){var v="array"==typeof o?o:Object.keys(o),b={},y=e.form.getFormItemsValue(r,l).value,_=e.form.getFormItemsValue(r,"ts").value;b[y]=_;var C=p(e,y,o);g||(g={}),(0,a.ajax)({url:s,data:{pkMapTs:b,pageCode:t,isRet:!0,extParam:g,pkMapbodyPKMaprowID:C},success:function(t){var o=t.data,s=!1;if(o){e.getUrlParam("status");var p=o.head,g=o.body,b=o.bodys;if(p||g||b){if(h&&(s=f(p,r)),p&&e.form.setAllFormValue(i({},r,p[r])),g&&v&&v.length>0){var _=!0,C=!1,I=void 0;try{for(var w,k=v[Symbol.iterator]();!(_=(w=k.next()).done);_=!0){var E=w.value,x=g[E];x&&((x=m(e,E,x))&&(o.body[E]=x))}}catch(e){C=!0,I=e}finally{try{!_&&k.return&&k.return()}finally{if(C)throw I}}}if(b&&v&&v.length>0){var R=!0,S=!1,M=void 0;try{for(var P,A=v[Symbol.iterator]();!(R=(P=A.next()).done);R=!0){var U=P.value,O=b[U];O&&((O=m(e,U,O))&&(o.bodys[U]=O))}}catch(e){S=!0,M=e}finally{try{!R&&A.return&&A.return()}finally{if(S)throw M}}}if(p&&p[r]&&p[r].rows&&p[r].rows[0]){var B=p[r].rows[0],D=B&&B.values&&B.values[l]&&B.values[l].value;a.cardCache.updateCache(l,D,o,r,c)}s||(0,a.toast)({color:"success",content:u+(0,n.loadMultiLang)(e,"36300-000005")})}}else a.cardCache.deleteCacheById(l,y,c),(0,a.toast)({color:"success",content:u+(0,n.loadMultiLang)(e,"36300-000005")});d&&"function"==typeof d&&d(e,o)}})},t.linkSucessPro=function(e,t,r){var a=t.data;if(a&&a.length>0)for(var n=0;n<a.length;n++){var i=a[n],l=(i.url,i.pks),s=i.appCode,u=i.linkPageCode;r&&0!=Object.keys(r).length||(r={status:"browse"}),r.scene||(r.scene=o.SCENE.LINK),r.srcbillid||(r.srcbillid=l),r.appcode=s,r.pagecode=u,r.pks=l,r.id=l,e.openTo(null,r)}}},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r=e[1]||"",a=e[3];if(!a)return r;if(t&&"function"==typeof btoa){var o=(i=a,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),n=a.sources.map((function(e){return"/*# sourceURL="+a.sourceRoot+e+" */"}));return[r].concat(n).concat([o]).join("\n")}var i;return[r].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+r+"}":r})).join("")},t.i=function(e,r){"string"==typeof e&&(e=[[null,e,""]]);for(var a={},o=0;o<this.length;o++){var n=this[o][0];"number"==typeof n&&(a[n]=!0)}for(o=0;o<e.length;o++){var i=e[o];"number"==typeof i[0]&&a[i[0]]||(r&&!i[2]?i[2]=r:r&&(i[2]="("+i[2]+") and ("+r+")"),t.push(i))}},t}},function(e,t,r){var a,o,n={},i=(a=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=a.apply(this,arguments)),o}),l=function(e){var t={};return function(r){return void 0===t[r]&&(t[r]=e.call(this,r)),t[r]}}((function(e){return document.querySelector(e)})),s=null,u=0,c=[],d=r(16);function f(e,t){for(var r=0;r<e.length;r++){var a=e[r],o=n[a.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](a.parts[i]);for(;i<a.parts.length;i++)o.parts.push(b(a.parts[i],t))}else{var l=[];for(i=0;i<a.parts.length;i++)l.push(b(a.parts[i],t));n[a.id]={id:a.id,refs:1,parts:l}}}}function p(e,t){for(var r=[],a={},o=0;o<e.length;o++){var n=e[o],i=t.base?n[0]+t.base:n[0],l={css:n[1],media:n[2],sourceMap:n[3]};a[i]?a[i].parts.push(l):r.push(a[i]={id:i,parts:[l]})}return r}function m(e,t){var r=l(e.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var a=c[c.length-1];if("top"===e.insertAt)a?a.nextSibling?r.insertBefore(t,a.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild),c.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");r.appendChild(t)}}function h(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=c.indexOf(e);t>=0&&c.splice(t,1)}function g(e){var t=document.createElement("style");return e.attrs.type="text/css",v(t,e.attrs),m(e,t),t}function v(e,t){Object.keys(t).forEach((function(r){e.setAttribute(r,t[r])}))}function b(e,t){var r,a,o,n;if(t.transform&&e.css){if(!(n=t.transform(e.css)))return function(){};e.css=n}if(t.singleton){var i=u++;r=s||(s=g(t)),a=C.bind(null,r,i,!1),o=C.bind(null,r,i,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",v(t,e.attrs),m(e,t),t}(t),a=w.bind(null,r,t),o=function(){h(r),r.href&&URL.revokeObjectURL(r.href)}):(r=g(t),a=I.bind(null,r),o=function(){h(r)});return a(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;a(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=i()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var r=p(e,t);return f(r,t),function(e){for(var a=[],o=0;o<r.length;o++){var i=r[o];(l=n[i.id]).refs--,a.push(l)}e&&f(p(e,t),t);for(o=0;o<a.length;o++){var l;if(0===(l=a[o]).refs){for(var s=0;s<l.parts.length;s++)l.parts[s]();delete n[l.id]}}}};var y,_=(y=[],function(e,t){return y[e]=t,y.filter(Boolean).join("\n")});function C(e,t,r,a){var o=r?"":a.css;if(e.styleSheet)e.styleSheet.cssText=_(t,o);else{var n=document.createTextNode(o),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(n,i[t]):e.appendChild(n)}}function I(e,t){var r=t.css,a=t.media;if(a&&e.setAttribute("media",a),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}function w(e,t,r){var a=r.css,o=r.sourceMap,n=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||n)&&(a=d(a)),o&&(a+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var i=new Blob([a],{type:"text/css"}),l=e.href;e.href=URL.createObjectURL(i),l&&URL.revokeObjectURL(l)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.linkVoucherApp=t.linkApp=void 0;var a=r(0),o=(r(14),r(2)),n=r(3),i=(t.linkApp=function(e,t,r){(0,a.ajax)({url:"/nccloud/tmpub/pub/qrylinkinfo.do",data:{billTypeOrTransType:t},success:function(t){var a=t.data;if(a){a.url;var n=a.appCode,i=a.linkPageCode;r&&0!=Object.keys(r).length||(r={}),r.scene||(r.scene=o.SCENE.LINK),r.status||(r.status="browse"),r.appcode=n,r.pagecode=i,e.openTo(null,r)}}})},"_LinkVouchar2019");t.linkVoucherApp=function(e,t,r,o,l,s,u){var c={pk_group:r,pk_org:o,relationID:t,pk_billtype:l};u&&u.freedef4&&(c={pk_group:r,pk_org:o,relationID:t,pk_billtype:l,freedef4:u.freedef4}),(0,a.ajax)({url:"/nccloud/tmpub/pub/qrylinkvoucherinfo.do",data:c,success:function(t){var r=t.success,o=t.data;if(r&&o&&o.src&&i==o.src&&o.pklist&&0!=o.pklist.length){var l=o.src,u=o.url,c=o.pklist,d=o.appcode,f=o.pagecode,p=o.srcAppCode,m=o.cachekey;o.des?1==c.length?e.openTo(u,{status:"browse",appcode:d,pagecode:f,id:c[0],n:(0,n.loadMultiLang)(e,"3601-000004"),pagekey:"link",backflag:"noback"}):(a.cacheTools.set(m,c),e.openTo(t.data.url,{status:"browse",appcode:d,pagecode:f,n:(0,n.loadMultiLang)(e,"3601-000004"),scene:d+l})):(a.cacheTools.set(p+l,c),e.openTo(t.data.url,{status:"browse",appcode:d,pagecode:f,scene:p+l}))}else(0,a.toast)({color:"warning",content:(0,n.loadMultiLang)(e,"3601-000002")+s+(0,n.loadMultiLang)(e,"3601-000003")})}})}},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.orgVersionView=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"pk_org",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pk_org_v";if(e&&t){var o=e.getUrlParam("status"),n="browse"==o,i={};i[r]=!n,i[a]=n,e.form.setFormItemsVisible(t,i)}},t.orgVersionViewNew=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"pk_org",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pk_org_v";if(e&&t){var o=e.getUrlParam("status"),n="browse"==o,i={};i[r]=!n,i[a]=n,e.form.setItemsVisible(t,i)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.MODULE_H_FTS="FTS",t.MODULE_L_FTS="fts",t.VoucherDataConst={pagecode:"10170410_1017041001",appcode:"10170410",linkIdentification:"36300TP_LinkVouchar"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rewriteTransferSrcBids=t.deleteCacheDataForList=t.getNextId=t.getCurrentLastId=t.getDefData=t.setDefData=t.hasListCache=t.addCacheData=t.getCacheDataByPk=t.deleteCacheData=t.updateCacheData=t.changeUrlParam=void 0;var a=r(0);t.changeUrlParam=function(e,t){e.setUrlParam(t)},t.updateCacheData=function(e,t,r,o,n,i,l){a.cardCache.addCache;var s=a.cardCache.updateCache;a.cardCache.getCacheById,s(t,r,o,n,i)},t.deleteCacheData=function(e,t,r,o){var n=a.cardCache.deleteCacheById;a.cardCache.getNextId,n(t,r,o)},t.getCacheDataByPk=function(e,t,r){return(0,a.cardCache.getCacheById)(r,t)},t.addCacheData=function(e,t,r,o,n,i,l){(0,a.cardCache.addCache)(r,o,n,i,l)},t.hasListCache=function(e,t){return e.table.hasCacheData(t)},t.setDefData=function(e,t,r){(0,a.cardCache.setDefData)(t,e,r)},t.getDefData=function(e,t){return(0,a.cardCache.getDefData)(t,e)},t.getCurrentLastId=function(e){return(0,a.cardCache.getCurrentLastId)(e)},t.getNextId=function(e,t,r){return(0,a.cardCache.getNextId)(t,r)},t.deleteCacheDataForList=function(e,t,r){e.table.deleteCacheId(t,r)},t.rewriteTransferSrcBids=function(e,t,r){if(r){var a=[];r.forEach((function(e){a.push(e.values[t].value)})),e.transferTable.setSavedTransferTableDataPk(a)}}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var r=t.protocol+"//"+t.host,a=r+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var o,n=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(n)?e:(o=0===n.indexOf("//")?n:0===n.indexOf("/")?r+n:a+n.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")}))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InnerAccoutDialog=void 0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),o=r(6),n=s(o),i=(s(r(7)),r(0));r(22);var l=s(r(24));function s(e){return e&&e.__esModule?e:{default:e}}var u=i.base.NCModal,c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.tableCode="inneraccbalance",r.init(e),r.state={json:{}},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentWillReceiveProps",value:function(e){this.init(e),this.queryAccBalance(this.props.accpk)}},{key:"componentWillMount",value:function(){var e=this;(0,i.getMultiLang)({moduleId:"3601Inner",domainName:"tmpub",callback:function(t,r,a){r&&e.setState({json:t},(function(){e.initTemplate()}))}})}},{key:"render",value:function(){var e=this.props.table.createSimpleTable;return n.default.createElement(u,{fieldid:"inneraccbalance",className:"InnerAccoutModal_class",show:this.show,onHide:this.close,style:{width:"700px"}},n.default.createElement(u.Header,{closeButton:!0},n.default.createElement(u.Title,null,this.state.json["3601Inner-000005"])),n.default.createElement(u.Body,{className:"body-resize-icon"},e&&n.default.createElement("div",null,e(this.tableCode,{height:"158px",showIndex:!0,cancelCustomRightMenu:!0}))))}},{key:"componentDidMount",value:function(){this.queryAccBalance()}},{key:"init",value:function(e){this.pk_accid=e.accpk,this.show=e.showModal,this.close=e.closeModal}},{key:"queryAccBalance",value:function(){var e=this;(0,i.ajax)({url:"/nccloud/tmpub/pub/inneraccbalance.do",async:!0,data:{accid:this.pk_accid},success:function(t){var r=t.data,a={areacode:e.tableCode,rows:[{status:0,rowid:null,values:{name:{display:r.accName,value:r.accName,scale:-1},bookbalance:{display:null,value:r.bookBalance,scale:3},realbalance:{display:null,value:r.realBalance,scale:3},realbalancewithoutover:{display:null,value:r.realBalanceNoOverFraft,scale:3}}}]};e.props.table.setAllTableData(e.tableCode,a)},error:function(t){e.props.table.setAllTableData(e.tableCode,{rows:[]})}})}},{key:"initTemplate",value:function(){var e=l.default.call(this);if(e.template){var t=e.template;t=this.modifierMeta.call(this,t),this.props.meta.setMeta(t)}}},{key:"modifierMeta",value:function(e){return e}}]),t}(o.Component);t.InnerAccoutDialog=(0,i.createPage)({})(c)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.button_limit=5,t.module_id="3630",t.module_name="fts",t.module_tmpub_name="tmpub",t.module_tmpub_id="3601",t.sourceModel_FTS="FTS",t.PaymentMergeBillType="36J5",t.PaymentBillType="36J1",t.SHOWMODEL_BULU=0,t.SHOWMODEL_LIULAN=1,t.SHOWMODEL_ZHIFU=3,t.PAYMODEL_COMBINEPAY=13,t.BILLTYPE_ARAP=["F2","F3"]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o,n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),l=r(6),s=(n=l)&&n.__esModule?n:{default:n},u=r(0);function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(25);var d=u.base.NCModal,f=u.base.NCButton,p=u.base.NCTextArea,m=u.base.NCHotKeys,h=u.base.NCTooltip,g=(o=a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.strlen=function(e){e+="";for(var t=0,r=0,a=0;a<e.length;a++)e.charCodeAt(a)>127||94==e.charCodeAt(a)?t+=2:t++,r++;return{len:t,lens:r}},r.state={value:"",lang:{}},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentWillMount",value:function(){var e=this;(0,u.getMultiLang)({moduleId:c({},"tmpub",["3601"]),callback:function(t){e.setState({lang:t})}})}},{key:"componentWillReceiveProps",value:function(e){e.show&&e.show!==this.props.show&&this.setState({value:""})}},{key:"render",value:function(){var e=this,t=this.props,r=t.title,a=t.size,o=t.show,n=(t.content,t.onOk),i=t.onClose,l=t.className,c=t.okShow,g=t.closeShow,v=t.label,b=t.isRequire,y=t.placeholder,_=t.maxlen,C=this.state,I=C.value,w=C.lang;return s.default.createElement(d,{fieldid:"reback",animation:!1,backdrop:"static",show:o,onHide:i,className:"zijin-modal "+a+" "+l},s.default.createElement(m,{keyMap:{sureBtnHandler:m.USUAL_KEYS.NC_MODAL_CONFIRM,cancelBtnHandler:m.USUAL_KEYS.NC_MODAL_CALCEL},handlers:{sureBtnHandler:function(){!b||I?n&&n(I):(0,u.toast)({color:"warning",content:w["3601-000007"]+""+v})},cancelBtnHandler:function(){i&&i()}},className:"simpleModal-hotkeys-wrapper",focused:!0,attach:document.body,display:"inline-block"}),s.default.createElement(d.Header,{closeButton:!0},s.default.createElement(d.Title,null,r)),s.default.createElement(d.Body,null,s.default.createElement("div",{className:"area-box"},s.default.createElement("span",{className:"modal-label nc-theme-common-font-c"},b&&s.default.createElement("span",{className:"require-icon"},"* "),v),s.default.createElement(p,{fieldid:"rebackreason",value:I,placeholder:y,onChange:function(t){t.length>_&&(t=t.substr(0,_)),e.setState({value:t})}}),s.default.createElement("span",{className:"value-length"},s.default.createElement("span",{className:"normal-length"},I.length," "),"/",s.default.createElement("span",{className:"max-length"}," ",_)))),s.default.createElement(d.Footer,null,c&&s.default.createElement(h,{placement:"top",inverse:!0,overlay:w["3601-000005"]+" ("+m.USUAL_KEYS.NC_MODAL_CONFIRM+")",trigger:["hover","focus"],className:"model-helper-overlay"},s.default.createElement(f,{fieldid:"rebackok",className:"button-primary",onClick:function(){!b||I?n&&n(I):(0,u.toast)({color:"warning",content:w["3601-000007"]+""+v})}},w["3601-000005"],"(",s.default.createElement("span",{className:"text-decoration-underline"},"Y"),")")),g&&s.default.createElement(h,{placement:"top",inverse:!0,overlay:w["3601-000006"]+" ("+m.USUAL_KEYS.NC_MODAL_CALCEL+")",trigger:["focus","hover"],className:"model-helper-overlay"},s.default.createElement(f,{fieldid:"rebackcancel",onClick:function(){i&&i()}},w["3601-000006"],"(",s.default.createElement("span",{className:"text-decoration-underline"},"N"),")"))))}}]),t}(l.Component),a.defaultProps={show:!1,title:"",label:"",content:"",isRequire:!0,size:"sm",okShow:!0,closeShow:!0,className:"",placeholder:"",maxlen:100},o);t.default=g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VoucherLinkBill=t.versionControl=void 0;var a=r(0),o=r(13),n=r(5),i=r(2),l=r(1);t.versionControl=function(e){var t={};t[n.card_from_id]=["pk_org","pk_exorg"];(0,o.orgVersionView)(e,t,{})},t.VoucherLinkBill=function(e,t,r){var o;(o=a.cacheTools.get("checkedData"))&&o.length>0&&(0,a.ajax)({url:n.base_url+"currexvoucherbill.do",data:{operatingLogVO:o,pageCode:t},success:function(t){var a=t.success,o=t.data;if(a)if(o)if(1==o[r].rows.length){var s=o[r].rows[0].values.pk_currex_h.value;(0,l.setDefData)(n.CurrExConst.dataSource,n.CurrExConst.linkSourceData+s,o[r]),setTimeout((function(){e.pushTo("/card",{status:"browse",scene:i.SCENE.LINK,id:s,pagecode:n.card_page_id,autolink:"Y"})}),10)}else o?e.table.setAllTableData(r,o[r]):e.table.setAllTableData(r,{rows:[]});else e.table.setAllTableData(r,{rows:[]})}})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.queryRelationRowsByRowno=t.buildLightBodyAfterEditData=t.validateWriteOffMny=t.setBodyItemProp=t.setHeadItemProp=void 0;var a=r(3),o=(t.setHeadItemProp=function(e,t,r){var a=e.form,o={},n={},i={};if(r&&0!=r.length){var l=!0,s=!1,u=void 0;try{for(var c,d=r[Symbol.iterator]();!(l=(c=d.next()).done);l=!0){var f=c.value;if(f.hasOwnProperty("itemName")){var p=f.itemName;if(p){if(f.hasOwnProperty("editable")){var m=f.editable;null!=m&&(o[p]=!("true"==m))}if(f.hasOwnProperty("require")){var h=f.require;null!=h&&(n[p]="true"==h)}if(f.hasOwnProperty("visible")){var g=f.visible;null!=g&&(i[p]="true"==g)}}}}}catch(e){s=!0,u=e}finally{try{!l&&d.return&&d.return()}finally{if(s)throw u}}Object.keys(n).length>0&&a.setFormItemsRequired(t,n),Object.keys(o).length>0&&a.setFormItemsDisabled(t,o),Object.keys(i).length>0&&a.setFormItemsVisible(t,i)}},function(e,t,r,a,o){if(r.hasOwnProperty("editable")&&null!=r.editable){var n=r.rowID,i=r.rowIndex,l=r.itemName,s=r.editable;s="true"===r.editable,n||i?n?e.cardTable.setEditableByRowId(t,n,l,s):i&&e.cardTable.setEditableByIndex(t,i,l,s):s?a.push(l):o.push(l)}}),n=function(e,t,r,a,o){if(r.hasOwnProperty("visible")&&null!=r.visible){r.rowID,r.rowIndex;var n=r.itemName;r.visible?a.push(n):o.push(n)}},i=(t.setBodyItemProp=function(e,t){if(e&&0!=Object.keys(t).length){var r=!0,a=!1,i=void 0;try{for(var l,s=Object.keys(t)[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var u=l.value,c=t[u];if(0!=c.length){var d=[],f=[],p=[],m=[],h=!0,g=!1,v=void 0;try{for(var b,y=c[Symbol.iterator]();!(h=(b=y.next()).done);h=!0){var _=b.value;_.itemName&&(o(e,u,_,d,f),n(0,0,_,p,m))}}catch(e){g=!0,v=e}finally{try{!h&&y.return&&y.return()}finally{if(g)throw v}}d.length>0&&e.cardTable.setColEditableByKey(u,d,!0),f.length>0&&e.cardTable.setColEditableByKey(u,f,!1),p.length>0&&e.cardTable.showColByKey(u,p),m.length>0&&e.cardTable.hideColByKey(u,m)}}}catch(e){a=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw i}}}},t.validateWriteOffMny=function(e,t,r,o){if(!(Math.sign(r)>=0)&&!(e.form.getFormItemsValue(t,o)&&e.form.getFormItemsValue(t,o).value))throw new Error((0,a.loadMultiLang)(e,"36300-000000"))},t.buildLightBodyAfterEditData=function(e,t,r,a,o,n,i,l){var u=arguments.length>8&&void 0!==arguments[8]&&arguments[8];try{if(!(e&&t&&r&&a&&n&&i))throw new Error("参数缺失！");var c=s(e,t,r,a,o,n,i,l,u),d=c.card,f=d.body,p=d.bodys;return u&&1==f[a].rows.length||!u&&p[a].rows.length,c}catch(e){throw e}},function(e,t){var r={},a=e.form.getAllFormValue(t);return a.areacode=t,r[t]=a,r}),l=function(e,t,r,a){var o=e.cardTable.getChangedRows(t),n=a[0].rowid,i=[];if(o&&o.length>1){var l=!0,s=!1,c=void 0;try{for(var d,f=o[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var p=d.value,m=p.rowid;if(m&&m==n){i.push(p);break}}}catch(e){s=!0,c=e}finally{try{!l&&f.return&&f.return()}finally{if(s)throw c}}}else o&&1==o.length&&i.push(o[0]);var h={rows:i,areaType:"table",areacode:t},g={};g[t]=h;var v=i&&i[0].values.relationindex.value;if(v){var b=u(e,r,v);if(b&&b.length>0){var y={rows:b,areaType:"table",areacode:r};g[r]=y}}return g},s=function(e,t,r,a,o,n,s,u,c){var d={head:i(e,r),pageid:t};return c?d.body=l(e,a):d.bodys=l(e,a,o,s),{areacode:a,attrcode:n,card:d,changedrows:s,index:u}},u=t.queryRelationRowsByRowno=function(e,t,r){for(var a=[],o=e.cardTable.getAllRows(t,!1),n=0;n<o.length;n++){r==o[n].values.relationindex.value&&a.push(o[n])}return a}},function(e,t,r){var a=r(23);"string"==typeof a&&(a=[[e.i,a,""]]);var o={transform:void 0};r(10)(a,o);a.locals&&(e.exports=a.locals)},function(e,t,r){(e.exports=r(9)(!1)).push([e.i,".InnerAccoutModal_class .u-modal-content {\n  max-height: 300px !important;\n}\n",""])},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{template:{gridrelation:{inneraccbalance:{destBrowseAreaCode:null,destEditAreaCode:null,srcAreaCode:"inneraccbalance",tabRelation:["inneraccbalance"]}},inneraccbalance:{clazz:null,code:"inneraccbalance",items:[{itemtype:"input",visible:!0,label:this.state.json["3601Inner-000000"],attrcode:"name",maxlength:"20",metapath:null},{itemtype:"input",visible:!0,label:this.state.json["3601Inner-000001"],attrcode:"bookbalance",maxlength:"20",metapath:null},{itemtype:"input",visible:!0,label:this.state.json["3601Inner-000002"],attrcode:"realbalance",maxlength:"20",metapath:null},{itemtype:"input",visible:!0,label:this.state.json["3601Inner-000003"],attrcode:"realbalancewithoutover",maxlength:"20",metapath:null}],moduletype:"table",name:this.state.json["3601Inner-000005"],pagination:!1,vometa:""},code:"inneraccbalancedialog",moduletype:"table",name:this.state.json["3601Inner-000005"]},code:"inneraccbalancedialog",formrelation:null,name:this.state.json["3601Inner-000005"],metapath:null,clazz:null,pagetype:"Nochild"}}},function(e,t,r){var a=r(26);"string"==typeof a&&(a=[[e.i,a,""]]);var o={transform:void 0};r(10)(a,o);a.locals&&(e.exports=a.locals)},function(e,t,r){(e.exports=r(9)(!1)).push([e.i,'@media (min-width: 768px) {\n  .u-modal.zijin-modal .u-modal-dialog {\n    width: 520px;\n    height: 290px;\n  }\n}\n.zijin-modal [aria-hidden="true"] {\n  font-size: 23px;\n  font-weight: 400;\n}\n.zijin-modal.nc-modal.u-modal .u-modal-dialog .u-modal-content {\n  height: 290px;\n  width: 520px;\n}\n.zijin-modal .u-modal-body {\n  padding: 20px 20px !important;\n  height: 200px;\n}\n.zijin-modal .u-modal-body .area-box {\n  position: relative;\n}\n.zijin-modal .u-modal-body .modal-label {\n  display: inline-block;\n  width: 100px;\n  text-align: left;\n  vertical-align: top;\n  margin-right: 16px;\n  color: #555;\n  padding: 2px;\n}\n.zijin-modal .u-modal-body .modal-label .require-icon {\n  color: red;\n  font-size: 14px;\n}\n.zijin-modal .u-modal-body .textarea-wrap {\n  display: inline-block;\n  width: calc(100% - 150px);\n  height: 95px;\n}\n.zijin-modal .u-modal-body .textarea-wrap .u-form-control {\n  resize: none !important;\n  height: 100%;\n  width: 480px;\n}\n.zijin-modal .u-modal-body .value-length {\n  font-size: 12px;\n  color: #ccc;\n  position: absolute;\n  bottom: 5px;\n  right: 20px;\n}\n.zijin-modal .u-modal-footer .u-button {\n  min-width: 60px !important;\n}\n',""])},,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.paymentBeforeUtil=void 0,t.default=i;r(0);var a=r(5);r(21),o(r(35)),o(r(37)),o(r(38));function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t,r,o,n,i){e.form.getFormItemsValue(a.card_from_id,"pk_org").value;var l=e.form.getFormItemsValue(a.card_from_id,"pk_inneracc_poundage").value,s=e.form.getFormItemsValue(a.card_from_id,"busitype").value,u=(e.getUrlParam("status"),e.getUrlParam("isCopy"),"deal"==e.getUrlParam("status"));if(t!=a.card_from_id)return!0;var c=e.form.getFormItemsDisabled(a.card_from_id,r);switch(r){case"inamount":return a.busType.BusType_Purchas!=s&&a.busType.BusType_Exchange!=s||!u;case"outamount":return a.busType.BusType_Selling!=s||!u;case"pk_inneracc_poundage":return!l||!u;case"pk_incurrtype":return a.busType.BusType_Selling!=s&&!u;case"pk_outcurrtype":return a.busType.BusType_Purchas!=s&&!u;default:return!c}}t.paymentBeforeUtil=function(e,t,r,o,l,s,u){var c=!1,d=!0,f=!1,p=void 0;try{for(var m,h=e[Symbol.iterator]();!(d=(m=h.next()).done);d=!0){var g=m.value;r==a.card_from_id?(c=i.call(this,t,r,g,l,s,u),t.form.setFormItemsDisabled(a.card_from_id,n({},g,!c))):(c=i.call(this,t,r,g,l,s,u),"olcrate"==g?(t.cardTable.setColEditableByKey(a.card_table1_id,[g],c),t.cardTable.setColEditableByKey(a.card_table2_id,[g],c)):t.cardTable.setColEditableByKey(r,[g],c))}}catch(e){f=!0,p=e}finally{try{!d&&h.return&&h.return()}finally{if(f)throw p}}}},,,function(e,t,r){"use strict";(function(e){var a,o,n,i,l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};window,i=function(e){return function(e){var t={};function r(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==(void 0===e?"undefined":l(e))&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(a,o,function(t){return e[t]}.bind(null,o));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="../../../../",r(r.s=472)}({0:function(t,r){t.exports=e},1:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.conf=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return React.createElement(o,a({},n,e))};var o=r(0).high.Refer,n=t.conf={multiLang:{domainName:"uap",currentLocale:"zh-CN",moduleId:"uapRefer"},queryTreeUrl:"/nccloud/riart/ref/groupRefTreeAction.do",refType:"tree",placeholder:"1880000025-000061",refName:"1880000025-000061",rootNode:{refname:"1880000025-000061",refpk:"root"}}},3:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.conf=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return React.createElement(i,a({},l,e))};var o=r(0),n=r(1),i=o.high.Refer;n.conf.fieldid="group";var l=t.conf={multiLang:{domainName:"uapbd",currentLocale:"zh-CN",moduleId:"refer_uapbd"},refType:"tree",refName:"refer-000201",refCode:"uapbd.refer.org.BusinessUnitTreeRef",rootNode:{refname:"refer-000201",refpk:"root"},placeholder:"refer-000201",queryTreeUrl:"/nccloud/uapbd/org/BusinessUnitTreeRef.do",treeConfig:{name:["refer-000002","refer-000003"],code:["refcode","refname"]},isMultiSelectedEnabled:!1,unitProps:n.conf,isShowUnit:!1}},472:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={multiLang:{domainName:"uapbd",currentLocale:"zh-CN",moduleId:"refer_uapbd"},refType:"gridTree",refName:"refer-000386",placeholder:"refer-000386",rootNode:{refname:"refer-000015",refpk:"root"},refCode:"uapbd.pub.BankaccSubUseTreeGridRef",queryTreeUrl:"/nccloud/uapbd/ref/BankaccSubUseTreeRef.do",queryGridUrl:"/nccloud/uapbd/ref/BankaccSubUseGridRef.do",columnConfig:[{name:["refer-000377","refer-000378","refer-000379","refer-000387","refer-000388","refer-000017","refer-000382","refer-000383","refer-000389","refer-000385","refer-000014"],code:["bd_bankaccsub.accnum","bd_bankaccsub.accname","bd_bankaccbas.code","bd_bankaccbas.name","bd_bankdoc.name","bd_banktype.name","bd_bankaccsub.code","bd_bankaccsub.name","bd_currtype.name","bd_bankaccsub.acctype as acctype","bd_bankaccbas.mnecode"],checked:{"bd_bankaccbas.mnecode":!1},search:{"bd_bankaccbas.mnecode":!0}}],treeConfig:{name:["refer-000002","refer-000003"],code:["refcode","refname"]},isMultiSelectedEnabled:!1,unitProps:n.conf,isShowUnit:!1};return React.createElement(i,a({},t,e))};var o=r(0),n=r(3),i=o.high.Refer}})},"object"==l(t)&&"object"==l(e)?e.exports=i(r(0)):(o=[r(0)],void 0===(n="function"==typeof(a=i)?a.apply(t,o):a)||(e.exports=n))}).call(this,r(36)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={multiLang:{domainName:"fbm",currentLocale:"zh-CN",moduleId:"refer_fbm"},refType:"grid",refName:"refer-0023",refcode:"fbm.refer.fbm.Bill4FtsReceiveGridRef",queryGridUrl:"/nccloud/fbm/refer/Bill4FtsReceiveGridRef.do",isMultiSelectedEnabled:!1,columnConfig:[{name:["refer-0012","refer-0013","refer-0014","refer-0015","refer-0017","refer-0018"],code:["fbmbillno","currname","money","enddate","billtypename","orgname"]}]};return React.createElement(a,Object.assign(t,e))};var a=r(0).high.Refer},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={multiLang:{domainName:"tmpub",currentLocale:"zh-CN",moduleId:"refer_tmpub"},refType:"grid",refName:"refer-0011",refcode:"tmpub.refer.accid.AccidGridRef",queryGridUrl:"/nccloud/tmpub/refer/AccidGridRef.do",isMultiSelectedEnabled:!1,columnConfig:[{name:["refer-0012","refer-0013","refer-0014","refer-0015","refer-0016","refer-0017","refer-0018"],code:["refcode","refname","pk_ownerorgname","pk_orgname","currtypename","acctypename","isaccounting"]}]};return React.createElement(a,Object.assign(t,e))};var a=r(0).high.Refer},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.beforeEvent=t.buttonVisible=t.pageInfoClick=t.initTemplate=t.afterEvent=t.buttonClick=void 0;var a=u(r(44)),o=u(r(45)),n=u(r(60)),i=u(r(61)),l=u(r(40)),s=u(r(32));function u(e){return e&&e.__esModule?e:{default:e}}t.buttonClick=a.default,t.afterEvent=n.default,t.initTemplate=o.default,t.pageInfoClick=i.default,t.buttonVisible=l.default,t.beforeEvent=s.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buttonVisible=void 0;r(0);var a=r(5),o=(r(2),r(1)),n=a.card_from_id,i=(a.card_page_id,a.card_table1_id),l=a.card_table2_id;a.card_hidden_buttons,t.buttonVisible=function(e){var t=this.props.getUrlParam("status"),r=this.props.form.getFormItemsValue(n,"pk_currex_h");r=r&&r.value;var s=this.props.form.getFormItemsValue(n,"pk_org"),u=(s=s&&s.value,!!r),c=this.props.form.getFormItemsValue(a.card_from_id,"srcbusitype")&&this.props.form.getFormItemsValue(a.card_from_id,"srcbusitype").value,d=this.props.form.getFormItemsValue(n,"busistatus");d=d&&d.value;var f=this.props.form.getFormItemsValue(n,"vbillstatus");f=f&&f.value||!1;var p=this.props.form.getFormItemsValue(n,"voucherflag");if(p=p&&p.value||!1,0!=e.button.getButtons().length){var m=(0,o.getDefData)(a.CurrExConst.dataSource,a.CurrExConst.islink);"browse"===t?(e.button.setButtonVisible(a.card_hidden_buttons,!1),u?m?e.button.setButtonVisible(["linkgroup","File","Print","Refresh"],!0):"0"===d&&c==a.srcBusiType.SrcBusiType_HAND?(e.button.setButtonVisible(["Add","Edit","Delete","Copy","Commit","linkgroup","File","Print","Refresh"],!0),e.button.setMainButton({Commit:!0,Add:!1})):"0"===d&&c!=a.srcBusiType.SrcBusiType_HAND?(e.button.setButtonVisible(["Add","Copy","Decide","Back","Commit","linkgroup","File","Print","Refresh"],!0),e.button.setMainButton({Commit:!0,Decide:!1,Add:!1})):"1"===d?(e.button.setButtonVisible(["Add","Copy","UnCommit","linkgroup","File","Print","Refresh"],!0),e.button.setMainButton({Add:!1})):"2"!==d||p?"2"===d&&p&&(e.button.setButtonVisible(["Add","Copy","Unpremit","linkgroup","File","Print","Refresh"],!0),e.button.setMainButton({Add:!1})):(e.button.setButtonVisible(["Add","Copy","Premit","linkgroup","File","Print","Refresh"],!0),e.button.setMainButton({Premit:!0,Add:!1})):(e.button.setButtonVisible(["Add"],!0),e.button.setMainButton(["Add"],!0),e.button.setButtonVisible(["linkgroup","File","Print","Refresh"],!1))):(e.button.setButtonVisible(a.card_hidden_buttons,!1),e.button.setButtonVisible(["linkgroup","File","Print","Refresh"],!1),e.button.setButtonVisible(["Save","SaveCommit","Cancel"],!0),e.button.setMainButton(["Save"],!0)),e.cardPagination.setCardPaginationVisible("cardPaginationBtn",!1),t="browse"==t?"browse":"edit",e.form.setFormStatus(n,t),e.cardTable.setStatus(i,t),e.cardTable.setStatus(l,t)}}},,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){var a=this,s=(e.getUrlParam("status"),this.props.form.getFormItemsValue(n.card_from_id,"pk_currex_h").value),u=this.props.form.getFormItemsValue(this.formId,"vbillno").value,d=this.props.form.getFormItemsValue(this.formId,"pk_billtypecode")&&this.props.form.getFormItemsValue(this.formId,"pk_billtypecode").value,f=d,C=this.props.form.getFormItemsValue(this.formId,"srcbusitype").value,I=(this.props.form.getFormItemsValue(this.formId,"pk_srcbill").value,this.props.form.getFormItemsValue(this.formId,"pk_org").value),w=this.props.form.getFormItemsValue(this.formId,"pk_group").value,k=this.props.form.getFormItemsValue(this.formId,"busistatus").value,E={},x={},R={},S=null;switch(t){case"Add":g.call(this,e),this.toggleShow();break;case"Save":this.isSaveAdd=!1,x=this.props.createExtCardData(this.pageId,this.formId,[]),e.validateToSave(x,this.saveBill.bind(this,!1),E,"");break;case"SaveAdd":this.isSaveAdd=!0,x=this.props.createExtCardData(this.pageId,this.formId,[]),e.validateToSave(x,this.saveBill.bind(this,!1),E,"");break;case"SaveCommit":this.isSaveAdd=!1,x=this.props.createExtCardData(this.pageId,this.formId,[]),e.validateToSave(x,y.bind(this,e),E,"");break;case"Edit":this.editBill();break;case"Refresh":this.qryData(!0);break;case"Copy":t=e.getUrlParam("id"),e.pushTo("/card",{status:"add",id:t,isCopy:!0,from:"card"}),this.qryData();break;case"Delete":e.modal.show("MessageDlg",{title:this.props.MutiInit.getIntl("36300CUREX")&&this.props.MutiInit.getIntl("36300CUREX").get("36300CUREX-000015"),content:this.props.MutiInit.getIntl("36300CUREX")&&this.props.MutiInit.getIntl("36300CUREX").get("36300CUREX-000013"),leftBtnName:this.props.MutiInit.getIntl("36300CUREX")&&this.props.MutiInit.getIntl("36300CUREX").get("36300CUREX-000002"),rightBtnName:this.props.MutiInit.getIntl("36300CUREX")&&this.props.MutiInit.getIntl("36300CUREX").get("36300CUREX-000003"),hasCloseBtn:!1,beSureBtnClick:this.delConfirm.bind(this)});break;case"Cancel":e.modal.show("MessageDlg",{title:this.props.MutiInit.getIntl("36300CUREX")&&this.props.MutiInit.getIntl("36300CUREX").get("36300CUREX-000029"),content:this.props.MutiInit.getIntl("36300CUREX")&&this.props.MutiInit.getIntl("36300CUREX").get("36300CUREX-000028"),leftBtnName:this.props.MutiInit.getIntl("36300CUREX")&&this.props.MutiInit.getIntl("36300CUREX").get("36300CUREX-000002"),rightBtnName:this.props.MutiInit.getIntl("36300CUREX")&&this.props.MutiInit.getIntl("36300CUREX").get("36300CUREX-000003"),hasCloseBtn:!1,beSureBtnClick:v.bind(this,e)});break;case"Commit":(0,l.cardOperator)(e,n.card_page_id,n.card_from_id,m,"pk_currex_h",n.base_url+"currexcommit.do",this.props.MutiInit.getIntl("36300CUREX")&&this.props.MutiInit.getIntl("36300CUREX").get("36300CUREX-000011"),n.CurrExConst.dataSource,b.bind(this),!0);break;case"UnCommit":(0,l.cardOperator)(e,n.card_page_id,n.card_from_id,m,"pk_currex_h",n.base_url+"currexuncommit.do",this.props.MutiInit.getIntl("36300CUREX")&&this.props.MutiInit.getIntl("36300CUREX").get("36300CUREX-000017"),n.CurrExConst.dataSource,this.toggleShow.bind(this));break;case"Back":C!=n.srcBusiType.SrcBusiType_HAND&&this.setState({showModal:!0});break;case"Decide":this.decideBill();break;case"Premit":(0,l.cardOperator)(e,n.card_page_id,n.card_from_id,m,"pk_currex_h",n.base_url+"currexpremit.do",this.props.MutiInit.getIntl("36300CUREX")&&this.props.MutiInit.getIntl("36300CUREX").get("36300CUREX-000023"),n.CurrExConst.dataSource,this.toggleShow.bind(this));break;case"Unpremit":(0,l.cardOperator)(e,n.card_page_id,n.card_from_id,m,"pk_currex_h",n.base_url+"currexunpremit.do",this.props.MutiInit.getIntl("36300CUREX")&&this.props.MutiInit.getIntl("36300CUREX").get("36300CUREX-000024"),n.CurrExConst.dataSource,this.toggleShow.bind(this));break;case"File":this.setState({showUploader:!this.state.showUploader});break;case"Print":(0,o.print)("pdf",n.base_url+"currexprint.do",{billtype:d,funcode:n.funcode,nodekey:null,oids:[s]});break;case"OffiPrint":_(e,!0);break;case"InOffiPrint":_(e,!1);break;case"OutPut":(0,o.output)({url:n.base_url+"currexprint.do",data:{oids:[s],outputType:"output"}});break;case"LinkWorkFlow":this.billID=s,this.setState({showApproveDetail:!0});break;case"LinkSourceBill":if(C==n.srcBusiType.SrcBusiType_HAND)return void(0,o.toast)({color:"warning",content:this.props.MutiInit.getIntl("36300CUREX")&&this.props.MutiInit.getIntl("36300CUREX").get("36300CUREX-000019")});this.billID=s,this.setState({showBillReview:!0});break;case"LinkAfterBill":if(C!==n.srcBusiType.SrcBusiType_HAND)return void(0,o.toast)({color:"warning",content:this.props.MutiInit.getIntl("36300CUREX")&&this.props.MutiInit.getIntl("36300CUREX").get("36300CUREX-000026")});if(k!=n.billstatus.PayOK)return void(0,o.toast)({color:"warning",content:this.props.MutiInit.getIntl("36300CUREX")&&this.props.MutiInit.getIntl("36300CUREX").get("36300CUREX-000027")});(0,o.ajax)({url:n.base_url+"currexafterlinkinfo.do",data:{pk:s},success:function(t){if(t.data){var r=t.data;if(r&&r.length>0){var o=!0,n=!1,l=void 0;try{for(var u,c=r[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var d=u.value,m=d.type,h=d.pks,g=d.appCode,v=d.linkPageCode;d.billType,d.url;if(m&&m!=i.LINKTYPE.NORMAL){if(m==i.LINKTYPE.BILL_REVIEW){a.billID=h[0],a.setState({showBillReview:!0});break}}else{var b;b=p({scene:i.SCENE.LINK,status:"browse",appcode:g,pagecode:v,srcbilltype:f},i.URL_PARAM.PK_SRC,s),e.openTo(null,b)}}}catch(e){n=!0,l=e}finally{try{!o&&c.return&&c.return()}finally{if(n)throw l}}}}}});break;case"LinkInAcc":(S=h.call(this,e,"pk_inneraccount_in"))&&(this.currAccid=S,this.setState({showInnerAccount:!0,currAccid:S}));break;case"LinkOutAcc":(S=h.call(this,e,"pk_inneraccount_out"))&&(this.currAccid=S,this.setState({showInnerAccount:!0,currAccid:S}));break;case"LinkPoundageAcc":(S=h.call(this,e,"pk_inneracc_poundage"))&&(this.currAccid=S,this.setState({showInnerAccount:!0,currAccid:S}));break;case"LinkRecBill":if(k!=n.billstatus.PayOK)return void(0,o.toast)({color:"warning",content:this.props.MutiInit.getIntl("36300CUREX")&&this.props.MutiInit.getIntl("36300CUREX").get("36300CUREX-000030")});R={status:"browse",id:s,scene:i.SCENE.LINK,appcode:"36300CUREXRF",pagecode:"36300CUREXRF_C01"},e.openTo(null,R);break;case"LinkViewVoucher":(0,c.linkVoucherApp)(e,s,w,I,d,u)}};var a,o=r(0),n=r(5),i=r(2),l=(r(39),r(8)),s=r(45),u=(a=s)&&a.__esModule?a:{default:a},c=r(11),d=r(1),f=r(3);function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}o.high.NCUploader;var m={},h=function(e,t){var r=e.form.getFormItemsValue(n.card_from_id,t).value;return r||(0,o.toast)({color:"warning",content:this.props.MutiInit.getIntl("36300CUREX")&&this.props.MutiInit.getIntl("36300CUREX").get("36300CUREX-000021")}),r},g=function(e){e.getUrlParam("id");e.pushTo("/card",{status:"add",from:"card"}),u.default.call(this,e),this.billID="",e.form.EmptyAllFormValue(n.card_from_id),this.toggleShow()},v=function(e){var t=this.props.getUrlParam("status");if("edit"==t||t==n.viewmod_deal)e.setUrlParam({status:"browse",id:e.getUrlParam("id")}),this.qryData();else if("add"==t||"copy"==t){var r,a=(0,d.getCurrentLastId)(n.CurrExConst.dataSource);if(a)e.setUrlParam({status:"browse",id:a,isCopy:!1}),this.qryData();else this.billID="",this.props.form.EmptyAllFormValue(this.formId),this.props.cardTable.setMulTablesData((p(r={},this.tableId1,{rows:[]}),p(r,this.tableId2,{rows:[]}),r)),this.props.pushTo("/card",{status:"browse"}),this.toggleShow()}else window.history.back()},b=function(e,t){if(t){Array.isArray(t)&&(t=t[0]);var r=t.workflow;r&&"approveflow"==r||"workflow"==r?this.setState({assignData:t,assignShow:t}):this.toggleShow()}},y=function(e){var t=this;this.saveBill.call(this,!1,(function(){(0,l.cardOperator)(e,n.card_page_id,n.card_from_id,m,"pk_currex_h",n.base_url+"currexcommit.do",t.props.MutiInit.getIntl("36300CUREX")&&t.props.MutiInit.getIntl("36300CUREX").get("36300CUREX-000031"),n.CurrExConst.dataSource,b.bind(t),!0)}))},_=function(e,t){(0,f.elecSignCardPrint)(e,{url:n.base_url+"currexelecsignprint.do",offical:t,appCode:n.funcode,nodeKey:t?n.printnodekey.official:n.printnodekey.inofficial,headCode:n.card_from_id,field_id:n.CurrExConst.pk_filed,field_billno:"vbillno",validateFunc:function(){var t=e.form.getFormItemsValue(n.card_from_id,"busistatus").value;return n.billstatus.PayOK!=t?e.MutiInit.getIntl("36300CUREX")&&e.MutiInit.getIntl("36300CUREX").get("36300CUREX-000035"):null}})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=this;e.createUIDom({pagecode:u,appcode:e.getUrlParam("c")},(function(r){if(r){if(r.template){var a=r.template;!function(e,t,r){t.getUrlParam("status");r[s].items.find((function(e){return"pk_exorg"===e.attrcode})).showHistory=!1,(r[s].items.find((function(e){return"pk_exorg"===e.attrcode}))||{}).isShowUnit=!0,r[s].items.map((function(e){"pk_org"==e.attrcode&&(e.queryCondition=function(){return{funcode:o.funcode,TreeRefActionExt:"nccloud.web.tmpub.filter.FundOrgPermissionFilter"}}),"pk_exorg"==e.attrcode&&(e.isTreelazyLoad=!1,e.queryCondition=function(){return{pk_org:(t.form.getFormItemsValue(s,"pk_org")||{}).value,TreeRefActionExt:"nccloud.web.fts.currex.filter.CurrExExOrgFilter"}}),"pk_costcenter"==e.attrcode&&(e.queryCondition=function(){return{pk_org:t.form.getFormItemsValue(s,"pk_org").value}})})),r[o.card_from_exchangemsg_id].items.map((function(e){"pk_inneraccount_in"==e.attrcode&&(e.queryCondition=function(){return{isSelect:!1,billtype:"36JV",pk_ownerorg:(t.form.getFormItemsValue(s,"pk_exorg")||{}).value,pk_org:(t.form.getFormItemsValue(s,"pk_org")||{}).value,pk_currtype:(t.form.getFormItemsValue(s,"pk_incurrtype")||{}).value,GridRefActionExt:"nccloud.web.fts.currex.filter.CurrExInnerAccFilter"}}),"pk_inneraccount_out"==e.attrcode&&(e.queryCondition=function(){return{isSelect:!1,billtype:"36JV",pk_ownerorg:(t.form.getFormItemsValue(s,"pk_exorg")||{}).value,pk_org:(t.form.getFormItemsValue(s,"pk_org")||{}).value,pk_currtype:(t.form.getFormItemsValue(s,"pk_outcurrtype")||{}).value,GridRefActionExt:"nccloud.web.fts.currex.filter.CurrExInnerAccFilter"}}),"pk_inneracc_poundage"==e.attrcode&&(e.queryCondition=function(){return{isSelect:!1,billtype:"36JV",pk_ownerorg:(t.form.getFormItemsValue(s,"pk_exorg")||{}).value,pk_org:(t.form.getFormItemsValue(s,"pk_org")||{}).value,pk_currtype:(t.form.getFormItemsValue(s,"pk_poundagecurr")||{}).value,GridRefActionExt:"nccloud.web.fts.currex.filter.CurrExInnerAccFilter"}}),"pk_incurrtype"==e.attrcode&&(e.queryCondition=function(){return{busitype:(t.form.getFormItemsValue(s,"busitype")||{}).value,pk_org:(t.form.getFormItemsValue(s,"pk_org")||{}).value,GridRefActionExt:"nccloud.web.fts.currex.filter.CurrExInCurrFilter"}}),"pk_outcurrtype"==e.attrcode&&(e.queryCondition=function(){return{busitype:(t.form.getFormItemsValue(s,"busitype")||{}).value,pk_org:(t.form.getFormItemsValue(s,"pk_org")||{}).value,GridRefActionExt:"nccloud.web.fts.currex.filter.CurrExOutCurrFilter"}})}))}(0,e,a),e.meta.setMeta(a,(function(){e.getUrlParam("id");var r=e.getUrlParam("isCopy");"add"!=e.getUrlParam("status")||r||e.initMetaByPkorg(),l.orgVersionView.call(t,t.props,o.card_from_id)}))}if(r.button){var u=r.button;e.button.setButtons(u),n.buttonVisible.call(t,e)}if(r.context){var c=r.context;if("add"===e.getUrlParam("status")&&!t.isCopy&&c.pk_org){var d=r.context,f=d.pk_org,p=d.org_Name,m=d.pk_org_v,h=d.org_v_Name,g={value:c.pk_org,display:c.org_Name};e.form.setFormItemsValue(s,{pk_org:{value:f,display:p},pk_org_v:{value:m,display:h}}),i.afterEvent.call(t,t.props,o.card_from_id,"pk_org",g,null,null,null,null,!0),t.props.resMetaAfterPkorgEdit(),t.props.form.setFormItemsDisabled(o.card_from_id,{pk_org:!1})}}}}))};var a=r(0),o=(r(20),r(5)),n=r(40),i=r(39),l=(r(32),r(13)),s=(r(1),a.base.NCPopconfirm,o.card_from_id),u=o.card_page_id},,,,,,,,,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),o=r(6),n=v(o),i=(v(r(7)),r(0)),l=r(39),s=r(40),u=r(17),c=r(20),d=r(5),f=r(8),p=r(18),m=r(1),h=v(r(19)),g=(r(32),r(3));function v(e){return e&&e.__esModule?e:{default:e}}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}i.base.NCFormControl,i.base.NCAnchor,i.base.NCScrollLink,i.base.NCScrollElement;var y=i.base.NCAffix,_=(i.base.NCBackBtn,i.base.NCIcon,i.base.NCDiv),C=i.high.NCUploader,I=i.high.ApproveDetail,w=i.high.BillTrack,k=i.high.ApprovalTrans,E=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.toggleShow=function(){var e=r.props.getUrlParam("status");"browse"==e||"edit"==e||e==d.viewmod_deal?r.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!1,showBillCode:!0,billCode:r.billNO}):r.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!1,showBillCode:!1}),s.buttonVisible.call(r,r.props),(0,g.showErrBtn)(r.props,{headBtnCode:"card_head",headAreaCode:d.card_from_id,fieldPK:d.pk,datasource:d.CurrExConst.dataSource})},r.qryData=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=r.props.getUrlParam("status"),a=r.props.getUrlParam("isCopy");r.isCopy=a;var o=r.props.getUrlParam("autolink");o&&"Y"==o&&(o=!0);var n=d.base_url;e?n+="currexcardquery.do":t==d.viewmod_deal?n+="currexloaddecideinfo.do":n+="edit"==t?"currexedit.do":a?"currexcopy.do":"currexcardquery.do";var s={pk:r.props.getUrlParam("id"),pageCode:r.pageId},u=r;(0,i.ajax)({url:n,data:s,success:function(n){n.data?("browse"!=t&&!o||e||i.cardCache.setDefData(d.cache.iserrtoast,d.CurrExConst.dataSource,!0),n.data.head&&(u.props.form.setAllFormValue(b({},u.formId,n.data.head[u.formId])),r.billID=n.data.head[r.formId].rows[0].values.pk_currex_h.value||"",r.billNO=n.data.head[r.formId].rows[0].values.vbillno.value||""),e&&((0,i.toast)({color:"success",title:r.props.MutiInit.getIntl("36300CUREX")&&r.props.MutiInit.getIntl("36300CUREX").get("36300CUREX-000037")}),(0,m.updateCacheData)(u.props,d.CurrExConst.pk_filed,u.billID,n.data,u.formId,d.CurrExConst.dataSource,n.data.head[u.formId].rows[0].values)),o&&!e&&(0,m.addCacheData)(r.props,d.CurrExConst.pk_filed,r.billID,n.data,r.formId,d.CurrExConst.dataSource),c.versionControl.call(u,u.props,d.card_from_id),u.toggleShow(),a&&(r.props.form.setFormItemsDisabled(d.card_from_id,{pk_org:!0}),l.initTemplate.call(r,r.props),u.props.resMetaAfterPkorgEdit())):((0,i.toast)({color:"warning",content:r.props.MutiInit.getIntl("36300CUREX")&&r.props.MutiInit.getIntl("36300CUREX").get("36300CUREX-000033")}),r.billNO="",r.billID="",u.props.form.EmptyAllFormValue(u.formId),r.toggleShow())}})},r.decideBill=function(){r.props.getUrlParam("status"),r.props.getUrlParam("isCopy");var e=d.base_url;e+="currexloaddecideinfo.do";var t={pk:r.props.getUrlParam("id"),pageCode:r.pageId},a=r;(0,i.ajax)({url:e,data:t,success:function(e){e.data?(r.props.setUrlParam({status:d.viewmod_deal}),e.data.head&&(a.props.form.setAllFormValue(b({},a.formId,e.data.head[a.formId])),r.billID=e.data.head[r.formId].rows[0].values.pk_currex_h.value||"",r.billNO=e.data.head[r.formId].rows[0].values.vbillno.value||""),c.versionControl.call(a,a.props),a.toggleShow()):((0,i.toast)({color:"warning",content:r.props.MutiInit.getIntl("36300CUREX")&&r.props.MutiInit.getIntl("36300CUREX").get("36300CUREX-000033")}),r.billNO="",r.billID="",a.props.form.EmptyAllFormValue(a.formId),r.toggleShow())}})},r.delConfirm=function(){var e={},t=r.props.getUrlParam("id"),a=r.props.form.getFormItemsValue(r.formId,"ts").value;e[t]=a,(0,i.ajax)({url:"/nccloud/fts/commission/currexdelete.do",data:{pkMapTs:e,pageCode:d.card_page_id},success:function(e){if(e){(0,i.toast)({color:"success",content:r.props.MutiInit.getIntl("36300CUREX")&&r.props.MutiInit.getIntl("36300CUREX").get("36300CUREX-000015")});var a=(0,m.getNextId)(r.props,t,d.CurrExConst.dataSource);(0,m.deleteCacheData)(r.props,d.CurrExConst.pk_filed,t,d.CurrExConst.dataSource),l.pageInfoClick.call(r,r.props,a)}}})},r.saveBill=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments[1],t=r.isSaveAdd;r.props.form.setFormItemsValue(r.formId,{voucherflag:{value:"N"}});var a=r.props.getUrlParam("status"),o=d.base_url+"currexinsert.do";("add"==a||"edit"==a||a==d.viewmod_deal)&&(o=d.base_url+"currexinsert.do");var n=r.props.form.isCheckNow(d.card_from_id);if(n){var l=(0,g.createSimpleBillData)(r.props,d.card_page_id,d.card_from_id,[],!1),s=void 0;(0,i.ajax)({url:o,data:{data:JSON.stringify(l),pageCode:r.pageId},success:function(o){var n=null,l=null;if(o.success&&o.data){var u=o.data;u.head,u.bodys;o.data.head&&o.data.head[r.formId]&&(s=(0,f.showTBBMsg)(o.data.head,r.formId),o.data.head[r.formId].rows[0].values.pk_org,n=o.data.head[r.formId].rows[0].values.pk_currex_h.value,l=o.data.head[r.formId].rows[0].values.vbillno.value,r.billID=n,r.billNO=l,t?r.props.form.EmptyAllFormValue(r.formId):r.props.form.setAllFormValue(b({},r.formId,o.data.head[r.formId]))),"add"==a?(0,m.addCacheData)(r.props,d.CurrExConst.pk_filed,n,o.data,r.formId,d.CurrExConst.dataSource,o.data.head[r.formId].rows[0].values):"edit"==a&&(0,m.updateCacheData)(r.props,d.CurrExConst.pk_filed,n,o.data,r.formId,d.CurrExConst.dataSource,o.data.head[r.formId].rows[0].values)}r.props.setUrlParam({status:"browse",id:n}),c.versionControl.call(r,r.props,d.card_from_id),r.toggleShow();var p=e&&"function"==typeof e;s||p||(0,i.toast)({color:"success",content:r.props.MutiInit.getIntl("36300CUREX")&&r.props.MutiInit.getIntl("36300CUREX").get("36300CUREX-000032")}),p&&e()}})}},r.editBill=function(e){var t=r.props.getUrlParam("id"),a=(r.props.form.getFormItemsValue(r.formId,"ts").value,d.card_page_id);(0,i.ajax)({url:d.base_url+"currexedit.do",data:{pk:t,pageCode:a},success:function(e){e&&e.data&&(r.props.setUrlParam({status:"edit"}),e.data.head&&(r.props.form.setAllFormValue(b({},r.formId,e.data.head[r.formId])),r.billID=e.data.head[r.formId].rows[0].values.pk_currex_h.value||"",r.billNO=e.data.head[r.formId].rows[0].values.vbillno.value||""),r.props.form.setFormItemsDisabled(d.card_from_id,{pk_org:!0}),c.versionControl.call(r,r.props,d.card_from_id),r.toggleShow())}})},r.beSureClick=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];a&&r.props.form.setFormItemsValue(r.formId,{returnreason:{value:t}}),r.backConfirm()},r.backConfirm=function(){var e={},t=r.props.getUrlParam("id"),a=(r.props.form.getFormItemsValue(r.formId,"returnreason")||{}).value,o=r.props.form.getFormItemsValue(r.formId,"ts").value,n={};n.returnreason=a,e[t]=o,(0,i.ajax)({url:d.base_url+"currexback.do",data:{extParam:n,pkMapTs:e,pageCode:d.card_page_id},success:function(e){if(e){(0,i.toast)({color:"success",content:r.props.MutiInit.getIntl("36300CUREX")&&r.props.MutiInit.getIntl("36300CUREX").get("36300CUREX-000010")});var a=(0,m.getNextId)(r.props,t,d.CurrExConst.dataSource);(0,m.deleteCacheData)(r.props,d.CurrExConst.pk_filed,t,d.CurrExConst.dataSource),l.pageInfoClick.call(r,r.props,a),r.setState({showModal:!1})}}})},r.pageChange=function(e){if(r.props.setUrlParam({status:"browse"}),e)l.pageInfoClick.call(r,r.props,e);else{var t=r.props.getUrlParam("id"),a=(0,m.getNextId)(r.props,t,d.CurrExConst.dataSource);(0,m.deleteCacheData)(r.props,d.CurrExConst.pk_filed,t,d.CurrExConst.dataSource),l.pageInfoClick.call(r,r.props,a)}},r.formId=d.card_from_id,r.moduleId=d.module_id,r.tableId1=d.card_table1_id,r.tableId2=d.card_table2_id,r.pageId=d.card_page_id,r.currAccid="",r.maxIndex=0,r.billID="",r.billNO="",r.isPay=!1,r.isMergePay=!1,r.isSaveAdd=!1,r.copyflag1=!1,r.copyflag2=!1,r.rateflag=!1,r.isCopy=!1,r.state={showUploader:!1,showInnerAccount:!1,actionCode:"",showApproveDetail:!1,showModal:!1,showBillReview:!1,assignData:null,assignShow:!1},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){this.props.BillHeadInfo.setBillHeadInfoVisible({showBackBtn:!1,showBillCode:!1});var e=this.props.getUrlParam("id");this.billID=e,e&&this.qryData(!1)}},{key:"componentWillMount",value:function(){var e,t=this;(0,i.getMultiLang)({moduleId:(e={},b(e,p.module_tmpub_name,[p.module_tmpub_id]),b(e,p.module_name,[d.module_id,d.funcode_multi]),e),callback:function(e){(0,g.saveMultiLangRes)(t.props,e),l.initTemplate.call(t,t.props)}}),window.onbeforeunload=function(){if("browse"!=t.props.getUrlParam("status"))return t.props.MutiInit.getIntl("36300CUREX")&&t.props.MutiInit.getIntl("36300CUREX").get("36300CUREX-000034")}}},{key:"handleClick",value:function(){this.props.getUrlParam("autolink");this.props.pushTo("/list",{autolink:"Y"})}},{key:"render",value:function(){var e=this,t=this.props,r=t.cardTable,a=t.form,o=t.button,i=(t.modal,t.cardPagination),s=t.ncmodal,c=t.socket,p=this.props.BillHeadInfo.createBillHeadInfo,m=(this.props.button.getButtons(),this.props.MutiInit.getIntl(d.funcode_multi)),v=a.createForm,b=(r.createCardTable,i.createCardPagination),E=(o.createButton,o.createButtonApp),x=s.createModal,R=this.state,S=R.showInnerAccount,M=R.currAccid,P=R.showApproveDetail,A=R.showUploader,U=R.showModal,O=R.showBillReview,B=R.assignData,D=R.assignShow,T=this.billID,N=this.billNO;this.props.getUrlParam("status");return n.default.createElement("div",{className:"nc-bill-card"},n.default.createElement(y,null,n.default.createElement(_,{areaCode:_.config.HEADER,className:"nc-bill-header-area"},n.default.createElement("div",{className:"header-title-search-area"},p({title:m&&m.get("36300CUREX-000004")+" ",billCode:N,backBtnClick:function(){e.handleClick()}})),c.connectMesg({headBtnAreaCode:"card_head",formAreaCode:d.card_from_id,billpkname:d.CurrExConst.pk_filed,billtype:d.billtype,dataSource:d.CurrExConst.dataSource}),n.default.createElement("div",{className:"header-button-area"},this.props.button.createErrorFlag({headBtnAreaCode:"card_head"}),E({area:"card_head",onButtonClick:l.buttonClick.bind(this)})),n.default.createElement("div",{className:"header-cardPagination-area",style:{float:"right"}},b({handlePageInfoChange:l.pageInfoClick.bind(this),dataSource:d.CurrExConst.dataSource})))),n.default.createElement("div",{className:"nc-bill-form-area"},v(this.formId,{expandArr:[d.card_from_id,d.card_from_exchangemsg_id,d.card_from_srcinfo_id],onAfterEvent:l.afterEvent.bind(this),onBeforeEvent:l.beforeEvent.bind(this)})),x("MessageDlg",{size:"lg",content:""}),n.default.createElement("div",{className:"nc-faith-demo-div2"},A&&n.default.createElement(C,{billId:T,target:null,placement:"bottom",billNo:N,onHide:function(){e.setState({showUploader:!1})}})),S&&n.default.createElement(u.InnerAccoutDialog,{id:"dialog",showModal:S,accpk:M,closeModal:function(){e.setState({showInnerAccount:!1,currAccid:""})}}),n.default.createElement("div",null,P&&n.default.createElement(I,{show:P,billtype:d.billtype,billid:T,close:function(){e.setState({showApproveDetail:!1})}})),n.default.createElement("div",null,O&&n.default.createElement(w,{show:O,close:function(){e.setState({showBillReview:!1,billID:null})},pk:T,type:d.billtype})),U&&n.default.createElement(h.default,{title:m&&m.get("36300CUREX-000009"),label:m&&m.get("36300CUREX-000009"),show:U,onOk:function(t){U&&e.beSureClick.call(e,e.props,t,!0)},onClose:function(){e.setState({showModal:!1})}}),n.default.createElement("div",null,D&&n.default.createElement(k,{title:(0,g.loadMultiLang)(this.props,"36300-000015"),data:B,display:D,getResult:function(t){var r={};t&&(r.content=JSON.stringify(t)),e.setState({assignShow:!1,assignData:null});(0,f.cardOperator)(e.props,d.card_page_id,d.card_from_id,{},"pk_currex_h",d.base_url+"currexcommit.do",e.props.MutiInit.getIntl("36300CUREX")&&e.props.MutiInit.getIntl("36300CUREX").get("36300CUREX-000011"),d.CurrExConst.dataSource,e.toggleShow.bind(e),!0,r)},cancel:function(){e.setState({assignShow:!1,assignData:null})},hideNote:!0})))}}]),t}(o.Component);E=(0,i.createPage)({billinfo:{billtype:"form",pagecode:d.card_page_id,headcode:d.card_from_id},mutiLangCode:d.funcode_multi,orderOfHotKey:[d.card_from_id]})(E),t.default=E},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fbmbillnoAfterEdit=t.handleOrgChangeSure=void 0,t.default=function(e,t,r,a,n,i,l,p){var h=e.getUrlParam("status");"deal"==h&&"decide";var g=void 0,v=void 0,b=void 0;switch(r){case"pk_org":g=e.createHeadAfterEventData(o.card_page_id,o.card_from_id,[],o.card_from_id,r,a),v=g.newvalue,b=g.oldvalue,s=JSON.stringify(b),b.value&&v.value&&v.value!=b.value||b.value&&!v||b.value&&!v.value?e.modal.show("MessageDlg",{title:this.props.MutiInit.getIntl("36300CUREX")&&this.props.MutiInit.getIntl("36300CUREX").get("36300CUREX-000000"),content:this.props.MutiInit.getIntl("36300CUREX")&&this.props.MutiInit.getIntl("36300CUREX").get("36300CUREX-000001"),leftBtnName:this.props.MutiInit.getIntl("36300CUREX")&&this.props.MutiInit.getIntl("36300CUREX").get("36300CUREX-000002"),rightBtnName:this.props.MutiInit.getIntl("36300CUREX")&&this.props.MutiInit.getIntl("36300CUREX").get("36300CUREX-000003"),beSureBtnClick:c.bind(this,e,t,r,a,n,i,g),cancelBtnClick:d.bind(this,e,t,r,a,b,g)}):v&&v.value?c.call(this,e,t,r,a,n,i,g):v&&v.value||(e.form.EmptyAllFormValue(this.formId),e.initMetaByPkorg());break;case"busitype":m(e,t,r,a,n,i,g);break;case"bodyevent":var y=e.cardTable.getNumberOfRows(o.card_table1_id),_=e.cardTable.getNumberOfRows(o.card_table2_id);parseInt(y)>0&&parseInt(_)>0&&m(e,t,r,a,n,i,g);break;case"pk_exorg":m.call(this,e,t,r,a,n,i,g);break;case"pk_incurrtype":case"pk_outcurrtype":case"pk_poundagecurr":case"inamount":case"outamount":m(e,t,r,a,n,i,g);break;case"pk_transactorg":u=JSON.stringify(n);for(var C=[],I=e.cardTable.getAllRows(o.card_table2_id,!1),w=0;w<I.length;w++){var k=I[w];k.values.pk_fundbankaccount_p&&k.values.pk_fundbankaccount_p.value&&C.push(k.values.pk_fundbankaccount_p.value)}C&&C.length>0?e.modal.show("MessageDlg",{title:this.props.MutiInit.getIntl("36300CUREX")&&this.props.MutiInit.getIntl("36300CUREX").get("36300CUREX-000000"),content:this.props.MutiInit.getIntl("36300CUREX")&&this.props.MutiInit.getIntl("36300CUREX").get("36300CUREX-000004"),leftBtnName:this.props.MutiInit.getIntl("36300CUREX")&&this.props.MutiInit.getIntl("36300CUREX").get("36300CUREX-000002"),rightBtnName:this.props.MutiInit.getIntl("36300CUREX")&&this.props.MutiInit.getIntl("36300CUREX").get("36300CUREX-000003"),beSureBtnClick:m.bind(this,e,t,r,a,n,i,g,u),cancelBtnClick:f.bind(this,e,t,r,a,u,g)}):m(e,t,r,a,n,i,g)}};var a=r(0),o=r(5),n=r(21),i=(r(44),r(32));r(1);function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s={},u={};var c=t.handleOrgChangeSure=function(e,t,r,a,o,n,i){e.resMetaAfterPkorgEdit();var l=i.newvalue;l&&l.value?p.call(this,e,t,r,a,o,n,i):(e.form.EmptyAllFormValue(this.formId),e.initMetaByPkorg()),this.toggleShow()},d=function(e,t,r,a,n,i){var l=JSON.parse(s);e.resMetaAfterPkorgEdit(),e.form.setFormItemsValue(o.card_from_id,{pk_org:{value:l.value,display:l.display}})},f=function(e,t,r,a,n,i){var s=JSON.parse(n);e.form.setFormItemsValue(o.card_from_id,l({},r,{value:s.value,display:s.display}))},p=function(e,t,r,s,u,c,d){var f=this,p={uiState:e.getUrlParam("status")};(0,a.ajax)({url:o.base_url+"currexafteredit.do",data:{eventPosition:"head",eventType:"card",eventData:JSON.stringify(d),extParam:p},success:function(t){var r=t.success,a=t.data;if(r){var s=a.card,u=(a.extParam,a.headItemProps),c=(a.bodyItemProps,s.head);e.form.setAllFormValue(l({},o.card_from_id,c[o.card_from_id])),e.form.setFormItemsValue(o.card_from_id,{isautorelation:{value:!0,display:!0}}),(0,n.setHeadItemProp)(e,o.card_from_id,u);var d={},p=(e.form.getFormItemsValue(o.card_from_id,"clearoutacctype")||{}).value;p&&"inneraccount"!=p?(d.pk_clearoutbankaccount=!0,d.pk_clearoutaccount=!1):(d.pk_clearoutbankaccount=!1,d.pk_clearoutaccount=!0),e.form.setFormItemsVisible(o.card_from_id,d);i.paymentBeforeUtil.call(f,["pk_fundpayorg","pk_costcenter","pk_clearoutaccount","pk_clearoutplan","pk_clearinplan","paytotalmnt","pk_paycurrtype","exprice"],e,o.card_from_id)}}})},m=function(e,t,r,i,s,u,c,d,f){var p,m,h=void 0;m={uiState:e.getUrlParam("status")},p=(c=e.createHeadAfterEventData(o.card_page_id,o.card_from_id,[],o.card_from_id,r,i)).newvalue,(h=d?JSON.parse(d):c.oldvalue)&&h.value&&p.value==h.value&&"bodyevent"!=r||(0,a.ajax)({url:o.base_url+"currexafteredit.do",data:{eventPosition:"head",eventType:"card",eventData:JSON.stringify(c),extParam:m},success:function(t){var i=t.success,s=t.data;if(i){var u=s.card,c=s.extParam,d=s.headItemProps,p=(s.bodyItemProps,u.head);u.bodys;if(e.form.setAllFormValue(l({},o.card_from_id,p[o.card_from_id])),(0,n.setHeadItemProp)(e,o.card_from_id,d),"pk_fundpayorg"==r||"pk_transactorg"==r){var m={},h=(e.form.getFormItemsValue(o.card_from_id,"clearoutacctype")||{}).value;h&&"inneraccount"!=h?(m.pk_clearoutbankaccount=!0,m.pk_clearoutaccount=!1):(m.pk_clearoutbankaccount=!1,m.pk_clearoutaccount=!0),e.form.setFormItemsVisible(o.card_from_id,m)}c.hasOwnProperty("warning")&&(0,a.toast)({color:"warning",content:c.warning}),f&&"function"==typeof f&&f(e,s)}},error:function(e){(0,a.toast)({color:"warning",content:e.message})}})};t.fbmbillnoAfterEdit=function(e,t,r){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var a=r.rows,n=(r.rows[t],0);n<a.length;n++){var i=a[n],l=(i.values.pk_billno.value,i.values.billno.value);i.values.notenumber={value:l,display:l}}e.cardTable.updateDataByRowId(o.card_table2_id,r)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=this;if(null==t||null==t||""==t)return e.form.EmptyAllFormValue(this.formId),this.billNO="",this.billID="",void this.toggleShow();var l=(0,o.getCacheDataByPk)(e,n.CurrExConst.dataSource,t);if(l)e.setUrlParam(t),e.form.setAllFormValue(i({},this.formId,l.head[this.formId])),this.billID=l.head[this.formId].rows[0].values.pk_currex_h.value||"",this.billNO=l.head[this.formId].rows[0].values.vbillno.value||"",this.toggleShow();else{var s={pk:t,pageCode:this.pageId};(0,a.ajax)({url:"/nccloud/fts/currex/currexcardquery.do",data:s,success:function(l){if(l.data){if(l.data.head)r.props.form.setAllFormValue(i({},r.formId,l.data.head[r.formId])),r.billID=l.data.head[r.formId].rows[0].values.pk_currex_h.value||"",r.billNO=l.data.head[r.formId].rows[0].values.vbillno.value||"",(0,o.getDefData)(n.CurrExConst.dataSource,n.CurrExConst.islink)&&(0,o.setDefData)(n.CurrExConst.dataSource,n.CurrExConst.linkSourceData+r.billID,l.data.head[r.formId]);e.setUrlParam(t),(0,o.updateCacheData)(e,n.CurrExConst.pk_filed,t,l.data,r.formId,n.CurrExConst.dataSource,l.data.head[r.formId].rows[0].values),r.toggleShow()}else(0,a.toast)({color:"warning",content:r.props.MutiInit.getIntl("36300CUREX")&&r.props.MutiInit.getIntl("36300CUREX").get("36300CUREX-000033")}),r.props.form.EmptyAllFormValue(r.formId),r.billNO="",r.billID="",r.toggleShow()}})}};var a=r(0),o=r(1),n=r(5);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}}])}));
//# sourceMappingURL=index.ef09ea24.js.map