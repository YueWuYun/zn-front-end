/*! @ncctag {"provider":"test","date":"2020-5-11 22:19:02"} */
!function(e,a){"object"==typeof exports&&"object"==typeof module?module.exports=a(require("nc-lightapp-front")):"function"==typeof define&&define.amd?define(["nc-lightapp-front"],a):"object"==typeof exports?exports["fts/cash/cashpay/util/index"]=a(require("nc-lightapp-front")):e["fts/cash/cashpay/util/index"]=a(e["nc-lightapp-front"])}(window,(function(e){return function(e){var a={};function r(t){if(a[t])return a[t].exports;var o=a[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=a,r.d=function(e,a,t){r.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:t})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,a){if(1&a&&(e=r(e)),8&a)return e;if(4&a&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var o in e)r.d(t,o,function(a){return e[a]}.bind(null,o));return t},r.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(a,"a",a),a},r.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},r.p="../../../../",r(r.s=25)}([function(a,r){a.exports=e},function(e,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.go2CardCheck=a.tbbWarnDialog=a.showTBBMsg=a.getTBBMsg=a.saveCommit=a.frozenBtnCtrl=a.showErrBtn=a.createCardWebSocket=a.createListWebSocket=a.setRate2NewRow=a.getCacheRateValue=a.bodyRateEditOnAfterEdit=a.addDefReferFilter=a.elecSignCardPrint=a.elecSignListPrint=a.createSimpleBillData=a.buildLightBodyAfterEditData=a.loadMultiLang=a.getMultiLangRes=a.appendMultiLangRes=a.saveMultiLangRes=a.getPropCache=a.setPropCache=a.showPagination=a.setDefOrg2AdvanceSrchArea=a.setDefOrg2ListSrchArea=a.setDefOrg2Form=a.hasDefaultOrg=a.isLinkScene=void 0;var t=r(0),o=r(5);function n(e){return function(){var a=e.apply(this,arguments);return new Promise((function(e,r){return function t(o,n){try{var l=a[o](n),i=l.value}catch(e){return void r(e)}if(!l.done)return Promise.resolve(i).then((function(e){t("next",e)}),(function(e){t("throw",e)}));e(i)}("next")}))}}var l,i,d=a.isLinkScene=function(e){var a=e.getUrlParam(o.URL_PARAM.SCENE);return!(!!!e.getUrlParam(o.URL_PARAM.TBB_LINK)&&a!=o.SCENE.LINK&&a!=o.SCENE.FIP)},c=a.hasDefaultOrg=function(e){return e&&e.context&&e.context&&e.context.pk_org},u=function(e,a,r){if(!(e&&e.search&&a&&r))return!1;try{var t=e.search.getSearchValByField(a,r);return!(!t||!t.value||!t.value.firstvalue&&!t.value.secondvalue)}catch(e){return!0}},s=(a.setDefOrg2Form=function(e,a,r){if(e&&a&&c(r)){var t=r.context,o=t.pk_org,n=t.org_Name,l=t.pk_org_v,i=t.org_v_Name;e.form.setFormItemsValue(a,{pk_org:{value:o,display:n},pk_org_v:{value:l,display:i}})}},a.setDefOrg2ListSrchArea=function(e,a,r){var t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pk_org";if(e&&e.search&&a&&c(r)&&!d(e)&&!u(e,a,t)){var o=r.context,n=o.pk_org,l=o.org_Name,i={display:l,value:n};e.search.setSearchValByField(a,t,i)}},a.setDefOrg2AdvanceSrchArea=function(e,a,r){var t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pk_org";if(e&&e.search&&a&&c(r)&&r.template&&!d(e)){var o=r.template,n=r.context,l=n.pk_org,i=n.org_Name;o[a].items.map((function(e){e.attrcode==t&&(e.initialvalue={display:i,value:l})}))}},a.showPagination=function(e,a,r){e&&a&&r&&!r.template&&(r.template[a].pagination=!d(e))},function(e){return e+"_extObj"}),f=(a.setPropCache=function(e,a,r,t){if(e&&a&&r){var o=s(a),n=e.ViewModel.getData(o);n||(n={}),n[r]=t,e.ViewModel.setData(o,n)}},a.getPropCache=function(e,a,r){if(!e||!a||!r)return null;var t=s(a),o=e.ViewModel.getData(t);return o&&o.hasOwnProperty(r)?o[r]:null},a.saveMultiLangRes=function(e,a){if(e&&a){e.ViewModel.setData("multiLang",a)}}),p=(a.appendMultiLangRes=function(e,a){if(e&&a){var r=p(e);r?Object.assign(r,a):f(e,a)}},a.getMultiLangRes=function(e){if(e){return e.ViewModel.getData("multiLang")}}),b=a.loadMultiLang=function(e,a){var r=p(e);return r&&r[a]||""},_=function(e,a){var r={},t=e.form.getAllFormValue(a);return t.areacode=a,r[a]=t,r},m=function(e,a){var r={rows:e.cardTable.getChangedRows(a),areaType:"table",areacode:a},t={};return t[a]=r,t},v=function(e,a,r,t,o,n,l,i){var d={head:_(e,r),pageid:a};return i?d.body=m(e,t):d.bodys=m(e,t),{areacode:t,attrcode:o,card:d,changedrows:n,index:l}},y=(a.buildLightBodyAfterEditData=function(e,a,r,t,o,n,l){var i=arguments.length>7&&void 0!==arguments[7]&&arguments[7];try{if(!(e&&a&&r&&t&&o&&n))throw new Error("参数缺失！");var d=v(e,a,r,t,o,n,l,i),c=d.card,u=c.body,s=c.bodys;if(i&&1==u[t].rows.length||!i&&1==s[t].rows.length)return d;var f=[],p=n[0].rowid;if(!(u=i?u[t]:s[t]))throw new Error("未获取到指定的表体["+t+"]!");var b=u,_=b.rows,m=!0,y=!1,g=void 0;try{for(var h,k=_[Symbol.iterator]();!(m=(h=k.next()).done);m=!0){var C=h.value,w=C.rowid;if(w&&w==p){f.push(C);break}}}catch(e){y=!0,g=e}finally{try{!m&&k.return&&k.return()}finally{if(y)throw g}}if(0==f.length)throw new Error("未找到修改的行!");return u.rows=f,d}catch(e){throw e}},function(e){if(!e||0==e.length)return null;var a=!0,r=!1,t=void 0;try{for(var o,n=e[Symbol.iterator]();!(a=(o=n.next()).done);a=!0){var l=o.value;if(l&&l.values&&0!=Object.keys(l.values).length){var i=l.values,d=Object.keys(i),c=!0,u=!1,s=void 0;try{for(var f,p=d[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var b=f.value,_=i[b];_&&0!=Object.keys(_).length&&_.value||delete i[b]}}catch(e){u=!0,s=e}finally{try{!c&&p.return&&p.return()}finally{if(u)throw s}}}}}catch(e){r=!0,t=e}finally{try{!a&&n.return&&n.return()}finally{if(r)throw t}}}),g=function(e,a,r,t,o){var n=e.createMasterChildDataSimple(a,r,t),l=n.head,i=n.body;return o&&(y(l[r].rows),y(i[t].rows)),n},h=function(e,a,r,t,o){var n=e.createExtCardDataSimple(a,r,t),l=n.head,i=n.bodys;if(o){y(l[r].rows);var d=!0,c=!1,u=void 0;try{for(var s,f=t[Symbol.iterator]();!(d=(s=f.next()).done);d=!0){var p=s.value;y(i[p].rows)}}catch(e){c=!0,u=e}finally{try{!d&&f.return&&f.return()}finally{if(c)throw u}}}return n},k=a.createSimpleBillData=function(e,a,r,t){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!(e&&a&&r&&t))return null;var n=!!Array.isArray(t)&&t.length>1,l=Array.isArray(t)?t:[t];return n?h(e,a,r,l,o):g(e,a,r,l[0],o)},C=(a.elecSignListPrint=function(e,a){var r=a.url,o=a.offical,n=void 0!==o&&o,l=a.appCode,i=a.nodeKey,d=a.tableCode,c=a.field_id,u=a.field_billno,s=void 0===u?"vbillno":u,f=a.getOrgFunc,p=a.validateFunc;if(!(r&&l&&d&&c&&s))throw new Error("参数缺失！");var _=e.table.getCheckedRows(d);if(null!=_&&0!=_.length){var m=[],v=[],y=!0,g=!1,h=void 0;try{for(var k,C=_[Symbol.iterator]();!(y=(k=C.next()).done);y=!0){var T=k.value,S=T&&T.data&&T.data.values&&T.data.values[c]&&T.data.values[c].value;if(S){var I=T&&T.data&&T.data.values&&T.data.values[s]&&T.data.values[s].value,O=T&&T.data&&T.data.values&&T.data.values.pk_org&&T.data.values.pk_org.value,B=T.index;f&&"function"==typeof f&&(O=f(T));var R=!0;if(p&&"function"==typeof p){var x=p(T);x&&(v.push(P(e,x,I,B)),R=!1)}R&&m.push({id:S,vbillno:I,pk_org:O,index:B})}}}catch(e){g=!0,h=e}finally{try{!y&&C.return&&C.return()}finally{if(g)throw h}}w(e,{url:r,offical:n,appCode:l,nodeKey:i,detail:m,errMessArr:v})}else(0,t.toast)({color:"warning",content:b(e,"3601-000010")})},a.elecSignCardPrint=function(e,a){var r=a.url,t=a.offical,o=void 0!==t&&t,n=a.appCode,l=a.nodeKey,i=a.headCode,d=a.field_id,c=a.field_billno,u=void 0===c?"vbillno":c,s=a.getOrgFunc,f=a.validateFunc;if(!(r&&n&&i&&d&&u))throw new Error("参数缺失！");var p=e.form.getFormItemsValue(i,d).value,b=e.form.getFormItemsValue(i,u).value,_=e.form.getFormItemsValue(i,"pk_org").value;s&&"function"==typeof s&&(_=s());var m=[],v=!0;if(f&&"function"==typeof f){var y=f();y&&(m.push(P(e,y,b,0)),v=!1)}w(e,{url:r,offical:o,appCode:n,nodeKey:l,detail:v?[{id:p,vbillno:b,pk_org:_}]:null,errMessArr:m})},function(e,a){a&&0!=a.length&&(1==a.length?(0,t.toast)({duration:"infinity",color:"danger",content:a[0],hasCloseBtn:!0}):(0,t.toast)({duration:"infinity",color:"danger",TextArr:[b(e,"3601-000000"),b(e,"3601-000001"),b(e,"3601-000021")],groupOperation:!0,groupOperationMsg:a}))}),w=function(e,a){var r=a.url,n=a.offical,l=a.appCode,i=a.nodeKey,d=a.detail,c=a.errMessArr,u=void 0===c?[]:c;if(!(u&&u.length>0)||d&&0!=d.length){var s={offical:n,detail:d};(0,t.ajax)({url:o.COMMON_URL.ELECSIGNPRINTCHECK,data:s,success:function(a){var o=a.data,d=o.passPKs,c=o.passInfos,s=o.unPassInfos;if(u.length>0||s&&s.length>0){var f=!0,p=!1,b=void 0;try{for(var _,m=s[Symbol.iterator]();!(f=(_=m.next()).done);f=!0){var v=_.value,y=v.vbillno,g=v.mess,h=v.index,k=P(e,g,y,h);u.push(k)}}catch(e){p=!0,b=e}finally{try{!f&&m.return&&m.return()}finally{if(p)throw b}}C(e,u)}if(d&&d.length>0&&c&&c.length>0){var w={offical:n,detail:c};(0,t.print)("pdf",r,{nodekey:i,appcode:l,oids:d,userjson:JSON.stringify(w)})}}})}else C(e,u)},P=function(e,a,r,t){return b(e,"3601-000008")+r+b(e,"3601-000009")+a||""},T=(a.addDefReferFilter=function(e,a){var r=a.headCode,t=a.areaCode,o=a.meta,n=a.orgField,l=a.getOrgFunc;if(t&&o&&(r||n||l)){var i=Array.isArray(t)?t:[t],d=!0,c=!1,u=void 0;try{for(var s,f=i[Symbol.iterator]();!(d=(s=f.next()).done);d=!0){o[s.value].items.map((function(a){(a.attrcode.startsWith("vdef")||a.attrcode.startsWith("vuserdef"))&&(a.queryCondition=function(){return{pk_org:l&&"function"==typeof l?l():(e.form.getFormItemsValue(r,n)||{}).value}})}))}}catch(e){c=!0,u=e}finally{try{!d&&f.return&&f.return()}finally{if(c)throw u}}}},a.bodyRateEditOnAfterEdit=function(e){var a=e.props,r=e.bodyCodes,n=e.rateInfo,l=e.datasource,i=e.olcRates,d=e.glcRates,c=e.gllcRates;if(a&&n&&l&&r){!function(e){var a=e.rateInfo,r=e.datasource;if(a&&r){t.cardCache.setDefData(o.cache.rateinfo,r,a);t.cardCache.getDefData(o.cache.rateinfo,r)}}({rateInfo:n,datasource:l}),Array.isArray(r)||(r=[r]);var u=n.olcRateEditable,s=n.glcRateEditable,f=n.gllcRateEditable,p=!0,b=!1,_=void 0;try{for(var m,v=r[Symbol.iterator]();!(p=(m=v.next()).done);p=!0){var y=m.value;i&&(Array.isArray(i)||(i=[i]),a.cardTable.setColEditableByKey(y,i,!u)),d&&(Array.isArray(d)||(d=[d]),a.cardTable.setColEditableByKey(y,d,!s)),c&&(Array.isArray(c)||(c=[c]),a.cardTable.setColEditableByKey(y,c,!f))}}catch(e){b=!0,_=e}finally{try{!p&&v.return&&v.return()}finally{if(b)throw _}}}},a.getCacheRateValue=function(e){var a=e.datasource;if(a){var r=t.cardCache.getDefData(o.cache.rateinfo,a);return r?{olcRate:r.olcRate,glcRate:r.glcRate,gllcRate:r.gllcRate}:null}}),S=(a.setRate2NewRow=function(e){var a=e.olcRates,r=e.glcRates,t=e.gllcRates,o=e.datasource,n=e.row;if(o){var l=T({datasource:o});if(l){var i=l.olcRate,d=l.glcRate,c=l.gllcRate;if(a){Array.isArray(a)||(a=[a]);var u=!0,s=!1,f=void 0;try{for(var p,b=a[Symbol.iterator]();!(u=(p=b.next()).done);u=!0){n[p.value]={value:i}}}catch(e){s=!0,f=e}finally{try{!u&&b.return&&b.return()}finally{if(s)throw f}}}if(r){Array.isArray(r)||(r=[r]);var _=!0,m=!1,v=void 0;try{for(var y,g=r[Symbol.iterator]();!(_=(y=g.next()).done);_=!0){n[y.value]={value:d}}}catch(e){m=!0,v=e}finally{try{!_&&g.return&&g.return()}finally{if(m)throw v}}}if(t){Array.isArray(t)||(t=[t]);var h=!0,k=!1,C=void 0;try{for(var w,P=t[Symbol.iterator]();!(h=(w=P.next()).done);h=!0){n[w.value]={value:c}}}catch(e){k=!0,C=e}finally{try{!h&&P.return&&P.return()}finally{if(k)throw C}}}}}},a.createListWebSocket=function(e,a){var r=a.tableAreaCode,t=a.tablePkName,o=a.billtype,n=a.dataSource,l=a.serverLocation;if(e&&r&&t&&o){var i=e.socket,d={tableAreaCode:r,billpkname:t,billtype:o,dataSource:n};return l&&(d.serverLocation=l),React.createElement("div",null,i.connectMesg(d))}},a.createCardWebSocket=function(e,a){var r=a.headBtnAreaCode,t=a.formAreaCode,o=a.billpkname,n=a.billtype,l=a.dataSource,i=a.serverLocation;if(e&&r&&t&&o&&n){var d=e.socket,c={headBtnAreaCode:r,formAreaCode:t,billtype:n,billpkname:o,dataSource:l};return i&&(c.serverLocation=i),React.createElement("div",null,d.connectMesg(c))}},a.showErrBtn=function(e,a){var r=a.headBtnCode,t=a.headAreaCode,n=a.fieldPK;a.datasource;if(e&&r&&t){var l=e.getUrlParam(o.URL_PARAM.STATE),i="0";try{i=e.form.getFormItemsValue(t,o.sagaField.status).value}catch(e){i="0"}var d="1"===i&&"browse"==l;e.button.toggleErrorStatus(r,{isError:d}),d&&S(e,{headAreaCode:t,fieldPK:n})}},function(e,a){var r=a.headAreaCode,t=a.fieldPK;if(r&&t){var n=e.getUrlParam("status"),l=e.form.getFormItemsValue(r,o.sagaField.gtxid),i=e.form.getFormItemsValue(r,t);"browse"==n&&l&&l.value&&i&&i.value&&e.socket.showToast({gtxid:l.value,billpk:i.value})}}),I=(a.frozenBtnCtrl=function(e,a){var r=a.btnCodes;if(e&&r){var t=Array.isArray(r)?r:[r];if("browse"==e.getUrlParam(o.URL_PARAM.STATE)){var n="1";try{n=e.form.getFormItemsValue(headAreaCode,o.sagaField.frozen).value}catch(e){n="1"}e.button.setButtonDisabled(t,"1"==n)}}},function(e,a){var r=a.pageCode,t=a.headCode,o=a.bodyCodeArr,n=a.saveFunc,l={},i={};if(0==o.length)l={pageid:r,model:{areacode:t,rows:e.form.getAllFormValue(t).rows,areaType:"form"}},i[t]="form";else{l=o.length>1?e.createExtCardData(r,t,o):e.createMasterChildData(r,t,o[0]);var d=!0,c=!1,u=void 0;try{for(var s,f=o[Symbol.iterator]();!(d=(s=f.next()).done);d=!0){i[s.value]="cardTable"}}catch(e){c=!0,u=e}finally{try{!d&&f.return&&f.return()}finally{if(c)throw u}}}e.validateToSave(l,n,i,"")}),O=(l=n(regeneratorRuntime.mark((function e(a,r){var t,o=r.pageCode,n=r.headCode,l=r.bodyCodeArr,i=r.saveValidate,d=r.processSaveData;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.form.isCheckNow(n)){e.next=2;break}return e.abrupt("return",null);case 2:if(!(l&&l.length>0)||a.cardTable.checkTableRequired()){e.next=4;break}return e.abrupt("return",null);case 4:if(!i||"function"!=typeof i){e.next=7;break}if(i()){e.next=7;break}return e.abrupt("return",null);case 7:if(t=k(a,o,n,l),!d||"function"!=typeof d){e.next=12;break}return e.next=11,d(t);case 11:t=e.sent;case 12:return e.abrupt("return",{data:JSON.stringify(t),pageCode:o});case 13:case"end":return e.stop()}}),e,this)}))),function(e,a){return l.apply(this,arguments)}),B=(a.saveCommit=(i=n(regeneratorRuntime.mark((function e(a,r){var o,n,l=r.pageCode,i=r.headCode,d=r.bodyCode,c=r.url,u=r.assign,s=r.showAssignFunc,f=r.updateViewFunc,p=r.saveValidate,b=r.processSaveData,_=r.extParam;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l&&i&&c&&s&&f){e.next=2;break}return e.abrupt("return");case 2:return _||(_={}),o=(r=d)?Array.isArray(r)?r:[r]:[],e.next=6,O(a,{pageCode:l,headCode:i,bodyCodeArr:o,saveValidate:p,processSaveData:b});case 6:if(n=e.sent){e.next=9;break}return e.abrupt("return");case 9:u&&(_.content=JSON.stringify(u)),n.extParam=_,I(a,{pageCode:l,headCode:i,bodyCodeArr:o,saveFunc:function(){(0,t.ajax)({url:c,data:n,success:function(e){var a=e.data.workflow;a&&"approveflow"==a||"workflow"==a?s(e):f(e)}})}});case 12:case"end":return e.stop()}var r}),e,this)}))),function(e,a){return i.apply(this,arguments)}),a.getTBBMsg=function(e){var a=e.row,r=e.msgfield;r||(r="ntbinfo");var t=(a&&a.values&&a.values[r]||{}).value;return t&&(a.values[r]={value:null,display:null}),t});a.showTBBMsg=function(e){var a=e.head,r=e.headCode,o=e.msgfield;if(!(a&&r&&a[r]&&a[r].rows&&0!=a[r].rows.length))return!1;var n=!1,l=a[r].rows[0],i=B({row:l,msgfield:o});return i&&((0,t.toast)({color:"warning",content:i}),n=!0),n},a.tbbWarnDialog=function(e,a){var r=a.ntbinfos,o=a.onConfirm;if(r&&0!=r.length){var n=[],l=r.length>1,i=1,d=l?[b(e,"3601-000019")+"["+r.length+"]"+b(e,"3601-000020")]:[],c=!0,u=!1,s=void 0;try{for(var f,p=r[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var _=f.value;if(null!=_){var m=_.pk,v=_.msg,y=_.vbillno;if(m&&y){n.push(m);var g="";l&&(g=i+". "+b(e,"3601-000018")+"["+y+"] "),d.push(React.createElement("li",null,g+v)),i++}}}}catch(e){u=!0,s=e}finally{try{!c&&p.return&&p.return()}finally{if(u)throw s}}0!=d.length&&(0,t.promptBox)({color:"warning",title:b(e,"3601-000017"),content:React.createElement("ul",null,d),beSureBtnClick:function(){o(n)}})}},a.go2CardCheck=function(e){var a=e.props,r=e.url,o=e.pk,n=e.ts,l=e.fieldPK,i=e.actionCode,d=e.permissionCode,c=e.checkSaga,u=void 0===c||c,s=e.checkTS,f=void 0===s||s,p=e.go2CardFunc;p&&"function"==typeof p&&(a&&r&&o&&n&&l||p(),(0,t.ajax)({url:r,data:{pk:o,ts:n,actionCode:i,permissionCode:d,fieldPK:l,checkSaga:u,checkTS:f},success:function(e){p()}}))}},function(e,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.app_id="0001Z61000000002IQ8X",a.module_id="3630",a.module_name="fts",a.module_tmpub_name="tmpub",a.module_tmpub_id="3601",a.oid="1001Z61000000000BPAW",a.base_url="/nccloud/fts/cashpay/",a.print_templateid="1001Z610000000004WL1",a.print_nodekey="NCCLOUD",a.button_limit=2,a.list_page_id="36300WC_L01",a.link_list_page_id="36300WC_LINKL01",a.list_search_id="search_cashpay_01",a.list_table_id="table_cashpay_02",a.card_page_id="36300WC_C01",a.link_card_page_id="36300WC_LINKC01",a.card_from_id="form_cashpay_01",a.card_table_id="table_cashpay_01",a.card_table_formId="form_cashpay_03",a.viewmod_deal="decide",a.funcode="36300WC",a.saga_gtxid="saga_gtxid",a.pk="pk_cashpay_h",a.dataSource="fts.cash.cashpay.dataSource",a.printnodekey="NCCLOUD",a.appcode="36300WC",a.sourceModel_FTS="FTS",a.SHOWMODEL_BULU=0,a.SHOWMODEL_LIULAN=1,a.SHOWMODEL_ZHIFU=3,a.PAYMODEL_COMBINEPAY=13;var t={Commit:"Commit",commitsec:"commitsec",Uncommit:"Uncommit",Delete:"Delete",Copy:"Copy",Add:"Add",Print:"Print",printsec:"printsec",Output:"Output",File:"File",Back:"Back",Refresh:"Refresh",LinkQuery:"LinkQuery",CheckSourceBill:"CheckSourceBill",UnionAfterBill:"UnionAfterBill",payAccBalanceAction:"payAccBalanceAction",UnionBankBalance:"UnionBankBalance",UnionCashBalance:"UnionCashBalance",elecsignformalPrint:"elecsignformalPrint",elecsigninformalPrint:"elecsigninformalPrint",acceptLQueryVoucher:"acceptLQueryVoucher",QueryNtbPlan:"QueryNtbPlan",UnionReturnBill:"UnionReturnBill",QueryApprove:"QueryApprove"};a.button={listdisable:[t.commitgroup,t.Commit,t.Uncommit,t.Delete,t.Copy,t.Add,t.printdrop,t.printsec,t.Output,t.Print,t.common,t.commitdrop,t.File,t.Back,t.Refresh],refreshdisable:[t.Commit,t.commitsec,t.Uncommit,t.Delete,t.Copy,t.Output,t.Print,t.File,t.Back,t.CheckSourceBill,t.UnionAfterBill,t.payAccBalanceAction,t.UnionBankBalance,t.UnionCashBalance,t.acceptLQueryVoucher,t.QueryNtbPlan,t.elecsignformalPrint,t.elecsigninformalPrint,t.UnionReturnBill,t.QueryApprove],dtj:[t.Commit,t.Delete,t.Copy,t.Add,t.Output,t.Print,t.File,t.Refresh,t.QueryNtbPlan,t.CheckSourceBill],dtjm:[t.Back,t.commitdrop,t.commitgroup,t.Commit,t.Uncommit,t.common,t.Delete,t.Copy,t.Add,t.printdrop,t.printsec,t.Output,t.Print,t.field,t.Refresh],dsp:[t.Uncommit,t.Copy,t.Add,t.Output,t.Print,t.File,t.Refresh,t.QueryNtbPlan,t.CheckSourceBill,t.QueryApprove],dspm:[t.pay,t.Copy,t.Add,t.printdrop,t.printsec,t.Output,t.Print,t.field,t.Refresh],zzcg:[t.Copy,t.Add,t.Output,t.Print,t.File,t.Refresh,t.acceptLQueryVoucher,t.QueryNtbPlan,t.elecsigninformalPrint,t.elecsignformalPrint,t.CheckSourceBill,t.UnionAfterBill,t.UnionReturnBill,t.QueryApprove],zzcgm:[t.unpay,t.Copy,t.Add,t.printdrop,t.printsec,t.Output,t.Print,t.field,t.Refresh],qb:[t.Commit,t.commitsec,t.Uncommit,t.Delete,t.Copy,t.Output,t.Print,t.File,t.Back,t.CheckSourceBill,t.UnionAfterBill,t.payAccBalanceAction,t.UnionBankBalance,t.UnionCashBalance,t.acceptLQueryVoucher,t.QueryNtbPlan,t.elecsigninformalPrint,t.elecsignformalPrint,t.UnionReturnBill,t.QueryApprove],tabapprovedisable:[t.common,t.Copy,t.Add,t.printdrop,t.Print,t.Output,t.Print,t.File,t.Refresh],applycreatedisable:[t.commitdrop,t.commitgroup,t.Commit,t.Uncommit,t.common,t.Add,t.Copy,t.printdrop,t.printsec,t.Output,t.Print,t.File,t.Back,t.Refresh],otherdtj:[t.Back,t.Commit,t.Uncommit,t.Copy,t.Decide,t.Add,t.Output,t.Print,t.File,t.Refresh,t.CheckSourceBill,t.UnionAfterBill,t.payAccBalanceAction,t.UnionBankBalance,t.UnionCashBalance,t.acceptLQueryVoucher,t.QueryNtbPlan]},a.cache={iserrtoast:"iserrtoast"}},function(e,a){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},,function(e,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.URL_PARAM={ID:"id",STATE:"status",SCENE:"scene",TBB_LINK:"pk_ntbparadimvo",LINK_ID:"linkId",PK_SRC:"pk_src"},a.sagaField={frozen:"saga_frozen",gtxid:"saga_gtxid",btxid:"saga_btxid",status:"saga_status"},a.sagaFrozenEnum={frozen:1,unfrozen:0},a.sagaStateEnum={success:0,fail:1},a.SCENE={DEFAULT:"defaultsce",APPROVE:"approvesce",LINK:"linksce",FIP:"fip",OTHER:"othersce"},a.LINKTYPE={NORMAL:"NORMAL",BILL_REVIEW:"BILL_REVIEW"},a.LINK_PARAM={ARAP:{FLAG:"flag",FLAG_VALUE:"ftsLinkArap"}},a.MODULE_INFO={TMPUB:"tmpub",TMPUB_NUM:"3601"},a.COMMON_URL={ELECSIGNPRINTCHECK:"/nccloud/tmpub/pub/elecsignprintcheck.do"},a.cache={rateinfo:"rateinfo",iserrtoast:"iserrtoast"},a.SPLIT_TBBCTRLTYPE="_ctrltype_",a.tbbwarntype={flexibility:"0",inflexibility:"1",warning:"2"}},function(e,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.linkSucessPro=a.cardOperator=a.cardOperatorForCash=a.showTBBMsg=a.listSingleOperator=a.listSingleOperatorNoRecord=a.listMultiOperator=a.CopyLine=a.BatchCopy=a.Open=a.DelLine=a.BatchDelLine=a.InsertLine=a.AddLine=void 0,a.BatchCopyForCash=function(e,a,r,o){var l=e.cardTable.getCheckedRows(a);if(null==l||0==l.length)return(0,t.toast)({color:"warning",content:(0,n.loadMultiLang)(e,"36300-000002")}),!1;var i=[],d=JSON.parse(JSON.stringify(l)),c=!0,u=!1,s=void 0;try{for(var f,p=d[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var b=f.value;b.data.selected=!1,b.data.values[o]&&b.data.values[o].value&&(b.data.values[o].value=null),b.data.values.rowno&&b.data.values.rowno.value&&(b.data.values.rowno.value=null),i.push(b.data)}}catch(e){u=!0,s=e}finally{try{!c&&p.return&&p.return()}finally{if(u)throw s}}null!=r&&null!=r||(r=e.cardTable.getNumberOfRows(a,!1));return e.cardTable.insertRowsAfterIndex(a,i,r),!0};var t=r(0),o=r(5),n=r(1);function l(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}t.cardCache.getNextId,t.cardCache.deleteCacheById,a.AddLine=function(e,a,r,t){if(r){var o=e.cardTable.getNumberOfRows(a);e.cardTable.addRow(a,o,r)}else e.cardTable.addRow(a);t&&"function"==typeof t&&afterFunc(e,a)},a.InsertLine=function(e,a,r,t){e.cardTable.addRow(a,r+1,t)},a.BatchDelLine=function(e,a,r){var o=e.cardTable.getCheckedRows(a);if(null==o||0==o.length)return(0,t.toast)({color:"warning",content:(0,n.loadMultiLang)(e,"36300-000001")}),!1;var l=[],i=!0,d=!1,c=void 0;try{for(var u,s=o[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var f=u.value;l.push(f.index)}}catch(e){d=!0,c=e}finally{try{!i&&s.return&&s.return()}finally{if(d)throw c}}return r&&"function"==typeof r?e.cardTable.delRowsByIndex(a,l,r):e.cardTable.delRowsByIndex(a,l),!0},a.DelLine=function(e,a,r,t){t&&"function"==typeof t?e.cardTable.delRowsByIndex(a,r,t):e.cardTable.delRowsByIndex(a,r)},a.Open=function(e,a,r,t,o){e.cardTable.openModel(a,o,t,r)};a.BatchCopy=function(e,a,r){var o=e.cardTable.getCheckedRows(a);if(null==o||0==o.length)return(0,t.toast)({color:"warning",content:(0,n.loadMultiLang)(e,"36300-000002")}),!1;var l=[],i=JSON.parse(JSON.stringify(o)),d=!0,c=!1,u=void 0;try{for(var s,f=i[Symbol.iterator]();!(d=(s=f.next()).done);d=!0){var p=s.value;p.data.selected=!1,l.push(p.data)}}catch(e){c=!0,u=e}finally{try{!d&&f.return&&f.return()}finally{if(c)throw u}}return null==r&&(r=e.cardTable.getNumberOfRows(a,!1)),e.cardTable.insertRowsAfterIndex(a,l,r),!0},a.CopyLine=function(e,a,r){e.cardTable.pasteRow(a,r)};var i=function(e,a,r){e.errContent=e.errContent+a,e.failCount=Number(e.failCount)+1,e.errMsgArr.push(r||"")},d=function(e,a){e.succContent=e.succContent+a,e.succCount=Number(e.succCount)+1},c=(a.listMultiOperator=function(e,a,r,o,l,c,f,p,b,_){var m=e.table.getCheckedRows(r);if(null!=m&&0!=m.length){if(1==m.length){var v={};return v[o]=m[0]&&m[0].data&&m[0].data.values&&m[0].data.values[o],v.ts=m[0]&&m[0].data&&m[0].data.values&&m[0].data.values.ts,void u(e,a,r,l,v,o,m[0].index,c,f,p,b,_)}var y={},g={},h={},k=0,C=void 0,w=void 0,P=void 0;b||(b={});for(;k<m.length;)C=m[k]&&m[k].data&&m[k].data.values&&m[k].data.values[o]&&m[k].data.values[o].value,w=m[k]&&m[k].data&&m[k].data.values&&m[k].data.values.ts&&m[k].data.values.ts.value,P=m[k]&&m[k].data&&m[k].data.values&&m[k].data.values.vbillno&&m[k].data.values.vbillno.value,h[C]=m[k].index,C&&w&&(y[C]=w),C&&P&&(g[C]=P),k++;Object.keys(y).length>0&&(0,t.ajax)({url:l,data:{pkMapRowIndex:h,pkMapTs:y,pkMapVbillno:g,pageCode:a,extParam:b},success:function(a){var o=a.data.data,l=[],u=[],f={errMsgArr:[],succContent:"",errContent:"",succCount:0,failCount:0};if(o&&o.length>0){var b=!0,m=!1,v=void 0;try{for(var y,g=o[Symbol.iterator]();!(b=(y=g.next()).done);b=!0){var h=y.value,k=h.state,C=h.msg,w=h.result,P=h.pk,T=(h.vbillno,h.rowIndex),S=Number(T)+1;if(0==k)if(w){if(w&&w.head&&w.head[r]&&w.head[r].rows&&w.head[r].rows.length>0){var I=w.head[r].rows[0];if(p){var O=s(I);O?i(f,S,O=S+"."+O):d(f,S)}else d(f,S);var B={index:T,data:{values:I.values}};l.push(B)}}else d(f,S),e.table.deleteCacheId(r,P),u.push(T);else 1==k&&i(f,S,C)}}catch(e){m=!0,v=e}finally{try{!b&&g.return&&g.return()}finally{if(m)throw v}}l.length>0&&e.table.updateDataByIndexs(r,l),u.length>0&&e.table.deleteTableRowsByIndex(r,u)}var R=a.data,x=R.status,A=(R.msg,f.succContent),F=f.errContent,M=f.succCount,D=f.failCount,V=f.errMsgArr,L=(""==(A=M>0?A+(0,n.loadMultiLang)(e,"36300-000004")+c+(0,n.loadMultiLang)(e,"36300-000005"):"")?"":A+"，")+(D>0?F+(0,n.loadMultiLang)(e,"36300-000004")+c+(0,n.loadMultiLang)(e,"36300-000006"):"");if(0==x&&0==V.length){(0,n.loadMultiLang)(e,"36300-000007"),(0,n.loadMultiLang)(e,"36300-000008");(0,t.toast)({color:"success",content:c+(0,n.loadMultiLang)(e,"36300-000007")+M+(0,n.loadMultiLang)(e,"36300-000008")})}else(1==x||2==x||V.length>0)&&(0,t.toast)({duration:"infinity",color:"danger",content:L,TextArr:[(0,n.loadMultiLang)(e,"36300-000009"),(0,n.loadMultiLang)(e,"36300-000010"),(0,n.loadMultiLang)(e,"36300-000011")],groupOperation:!0,groupOperationMsg:V});_&&"function"==typeof _&&_(e,o)}})}else(0,t.toast)({color:"warning",content:(0,n.loadMultiLang)(e,"36300-000003")})},a.listSingleOperatorNoRecord=function(e,a,r,o,l,i,d,c,u,s,p,b){var _={};_[l]=i,p||(p={}),(0,t.ajax)({url:o,data:{pkMapTs:_,pageCode:a,extParam:p},success:function(a){var o=a.data,i=!1;if(o){if(o&&o.head&&o.head[r]&&o.head[r].rows&&1==o.head[r].rows.length){s&&(i=f(o.head,r));var u=o.head[r].rows[0],p=[{index:d,data:{values:u.values}}];e.table.updateDataByIndexs(r,p),i||(0,t.toast)({color:"success",content:c+(0,n.loadMultiLang)(e,"36300-000005")})}}else e.table.deleteCacheId(r,l),e.table.deleteTableRowsByIndex(r,d),(0,t.toast)({color:"success",content:c+(0,n.loadMultiLang)(e,"36300-000005")});b&&"function"==typeof b&&b(e,o)}})}),u=a.listSingleOperator=function(e,a,r,t,o,n,l,i,d,u,s,f){var p=o[n].value,b=o.ts.value;c(e,a,r,t,p,b,l,i,d,u,s,f)},s=function(e){var a=(e&&e.values&&e.values.ntbinfo||{}).value;return a&&(e.values.ntbinfo={value:null,display:null}),a},f=a.showTBBMsg=function(e,a){if(!(e&&a&&e[a]&&e[a].rows&&0!=e[a].rows.length))return!1;var r=!1,o=e[a].rows[0],n=s(o);return n&&((0,t.toast)({color:"warning",content:n}),r=!0),r},p=function(e,a,r){var t={},o="array"==typeof r?r:Object.keys(r);if(!o||0==o.length)return null;var n={},l=!0,i=!1,d=void 0;try{for(var c,u=o[Symbol.iterator]();!(l=(c=u.next()).done);l=!0){var s=c.value,f="array"==typeof r?null:r[s];if(f){var p=e.cardTable.getAllRows(s);if(p&&0!=p.length){var b=!0,_=!1,m=void 0;try{for(var v,y=p[Symbol.iterator]();!(b=(v=y.next()).done);b=!0){var g=v.value;if(g&&g.values&&0!=g.values.length){var h=g.rowid;n[g.values[f].value]=h}}}catch(e){_=!0,m=e}finally{try{!b&&y.return&&y.return()}finally{if(_)throw m}}}}}}catch(e){i=!0,d=e}finally{try{!l&&u.return&&u.return()}finally{if(i)throw d}}return t[a]=n,t},b=function(e,a,r){return r.rows&&r.rows[0]&&r.rows[0].rowid?r=e.cardTable.updateDataByRowId(a,r):e.cardTable.setTableData(a,r),r};a.cardOperatorForCash=function(e,a,r,o,i,d,c,u,s,_,m){var v="array"==typeof o?o:Object.keys(o),y={},g=e.form.getFormItemsValue(r,i).value,h=e.form.getFormItemsValue(r,"ts").value;y[g]=h;var k=p(e,g,o);m||(m={}),(0,t.ajax)({url:d,data:{pkMapTs:y,pageCode:a,isRet:!0,extParam:m,pkMapbodyPKMaprowID:k},success:function(a){var o=a.data,d=!1;if(o){var p=o.head,m=o.body,y=o.bodys;if(p||m||y){if(_&&(d=f(p,r)),p&&e.form.setAllFormValue(l({},r,p[r])),m&&v&&v.length>0){var h=!0,k=!1,C=void 0;try{for(var w,P=v[Symbol.iterator]();!(h=(w=P.next()).done);h=!0){var T=w.value,S=m[T];S&&((S=b(e,T,S))&&(o.body[T]=S))}}catch(e){k=!0,C=e}finally{try{!h&&P.return&&P.return()}finally{if(k)throw C}}}if(y&&v&&v.length>0){var I=!0,O=!1,B=void 0;try{for(var R,x=v[Symbol.iterator]();!(I=(R=x.next()).done);I=!0){var A=R.value,F=y[A];F&&((F=b(e,A,F))&&(o.bodys[A]=F))}}catch(e){O=!0,B=e}finally{try{!I&&x.return&&x.return()}finally{if(O)throw B}}}if(p&&p[r]&&p[r].rows&&p[r].rows[0]){var M=p[r].rows[0],D=M&&M.values&&M.values[i]&&M.values[i].value;t.cardCache.updateCache(i,D,o,r,u)}d||(0,t.toast)({color:"success",content:c+(0,n.loadMultiLang)(e,"36300-000005")})}}else t.cardCache.deleteCacheById(i,g,u),(0,t.toast)({color:"success",content:c+(0,n.loadMultiLang)(e,"36300-000005")});s&&"function"==typeof s&&s(e,o)}})},a.cardOperator=function(e,a,r,o,i,d,c,u,s,_,m){var v="array"==typeof o?o:Object.keys(o),y={},g=e.form.getFormItemsValue(r,i).value,h=e.form.getFormItemsValue(r,"ts").value;y[g]=h;var k=p(e,g,o);m||(m={}),(0,t.ajax)({url:d,data:{pkMapTs:y,pageCode:a,isRet:!0,extParam:m,pkMapbodyPKMaprowID:k},success:function(a){var o=a.data,d=!1;if(o){e.getUrlParam("status");var p=o.head,m=o.body,y=o.bodys;if(p||m||y){if(_&&(d=f(p,r)),p&&e.form.setAllFormValue(l({},r,p[r])),m&&v&&v.length>0){var h=!0,k=!1,C=void 0;try{for(var w,P=v[Symbol.iterator]();!(h=(w=P.next()).done);h=!0){var T=w.value,S=m[T];S&&((S=b(e,T,S))&&(o.body[T]=S))}}catch(e){k=!0,C=e}finally{try{!h&&P.return&&P.return()}finally{if(k)throw C}}}if(y&&v&&v.length>0){var I=!0,O=!1,B=void 0;try{for(var R,x=v[Symbol.iterator]();!(I=(R=x.next()).done);I=!0){var A=R.value,F=y[A];F&&((F=b(e,A,F))&&(o.bodys[A]=F))}}catch(e){O=!0,B=e}finally{try{!I&&x.return&&x.return()}finally{if(O)throw B}}}if(p&&p[r]&&p[r].rows&&p[r].rows[0]){var M=p[r].rows[0],D=M&&M.values&&M.values[i]&&M.values[i].value;t.cardCache.updateCache(i,D,o,r,u)}d||(0,t.toast)({color:"success",content:c+(0,n.loadMultiLang)(e,"36300-000005")})}}else t.cardCache.deleteCacheById(i,g,u),(0,t.toast)({color:"success",content:c+(0,n.loadMultiLang)(e,"36300-000005")});s&&"function"==typeof s&&s(e,o)}})},a.linkSucessPro=function(e,a,r){var t=a.data;if(t&&t.length>0)for(var n=0;n<t.length;n++){var l=t[n],i=(l.url,l.pks),d=l.appCode,c=l.linkPageCode;r&&0!=Object.keys(r).length||(r={status:"browse"}),r.scene||(r.scene=o.SCENE.LINK),r.srcbillid||(r.srcbillid=i),r.appcode=d,r.pagecode=c,r.pks=i,r.id=i,e.openTo(null,r)}}},,,,function(e,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.linkVoucherApp=a.linkApp=void 0;var t=r(0),o=(r(14),r(5)),n=r(1),l=(a.linkApp=function(e,a,r){(0,t.ajax)({url:"/nccloud/tmpub/pub/qrylinkinfo.do",data:{billTypeOrTransType:a},success:function(a){var t=a.data;if(t){t.url;var n=t.appCode,l=t.linkPageCode;r&&0!=Object.keys(r).length||(r={}),r.scene||(r.scene=o.SCENE.LINK),r.status||(r.status="browse"),r.appcode=n,r.pagecode=l,e.openTo(null,r)}}})},"_LinkVouchar2019");a.linkVoucherApp=function(e,a,r,o,i,d,c){var u={pk_group:r,pk_org:o,relationID:a,pk_billtype:i};c&&c.freedef4&&(u={pk_group:r,pk_org:o,relationID:a,pk_billtype:i,freedef4:c.freedef4}),(0,t.ajax)({url:"/nccloud/tmpub/pub/qrylinkvoucherinfo.do",data:u,success:function(a){var r=a.success,o=a.data;if(r&&o&&o.src&&l==o.src&&o.pklist&&0!=o.pklist.length){var i=o.src,c=o.url,u=o.pklist,s=o.appcode,f=o.pagecode,p=o.srcAppCode,b=o.cachekey;o.des?1==u.length?e.openTo(c,{status:"browse",appcode:s,pagecode:f,id:u[0],n:(0,n.loadMultiLang)(e,"3601-000004"),pagekey:"link",backflag:"noback"}):(t.cacheTools.set(b,u),e.openTo(a.data.url,{status:"browse",appcode:s,pagecode:f,n:(0,n.loadMultiLang)(e,"3601-000004"),scene:s+i})):(t.cacheTools.set(p+i,u),e.openTo(a.data.url,{status:"browse",appcode:s,pagecode:f,scene:p+i}))}else(0,t.toast)({color:"warning",content:(0,n.loadMultiLang)(e,"3601-000002")+d+(0,n.loadMultiLang)(e,"3601-000003")})}})}},function(e,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.queryRelationRowsByRowno=a.buildLightBodyAfterEditData=a.validateWriteOffMny=a.setBodyItemProp=a.setHeadItemProp=void 0;var t=r(1),o=(a.setHeadItemProp=function(e,a,r){var t=e.form,o={},n={},l={};if(r&&0!=r.length){var i=!0,d=!1,c=void 0;try{for(var u,s=r[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var f=u.value;if(f.hasOwnProperty("itemName")){var p=f.itemName;if(p){if(f.hasOwnProperty("editable")){var b=f.editable;null!=b&&(o[p]=!("true"==b))}if(f.hasOwnProperty("require")){var _=f.require;null!=_&&(n[p]="true"==_)}if(f.hasOwnProperty("visible")){var m=f.visible;null!=m&&(l[p]="true"==m)}}}}}catch(e){d=!0,c=e}finally{try{!i&&s.return&&s.return()}finally{if(d)throw c}}Object.keys(n).length>0&&t.setFormItemsRequired(a,n),Object.keys(o).length>0&&t.setFormItemsDisabled(a,o),Object.keys(l).length>0&&t.setFormItemsVisible(a,l)}},function(e,a,r,t,o){if(r.hasOwnProperty("editable")&&null!=r.editable){var n=r.rowID,l=r.rowIndex,i=r.itemName,d=r.editable;d="true"===r.editable,n||l?n?e.cardTable.setEditableByRowId(a,n,i,d):l&&e.cardTable.setEditableByIndex(a,l,i,d):d?t.push(i):o.push(i)}}),n=function(e,a,r,t,o){if(r.hasOwnProperty("visible")&&null!=r.visible){r.rowID,r.rowIndex;var n=r.itemName;r.visible?t.push(n):o.push(n)}},l=(a.setBodyItemProp=function(e,a){if(e&&0!=Object.keys(a).length){var r=!0,t=!1,l=void 0;try{for(var i,d=Object.keys(a)[Symbol.iterator]();!(r=(i=d.next()).done);r=!0){var c=i.value,u=a[c];if(0!=u.length){var s=[],f=[],p=[],b=[],_=!0,m=!1,v=void 0;try{for(var y,g=u[Symbol.iterator]();!(_=(y=g.next()).done);_=!0){var h=y.value;h.itemName&&(o(e,c,h,s,f),n(0,0,h,p,b))}}catch(e){m=!0,v=e}finally{try{!_&&g.return&&g.return()}finally{if(m)throw v}}s.length>0&&e.cardTable.setColEditableByKey(c,s,!0),f.length>0&&e.cardTable.setColEditableByKey(c,f,!1),p.length>0&&e.cardTable.showColByKey(c,p),b.length>0&&e.cardTable.hideColByKey(c,b)}}}catch(e){t=!0,l=e}finally{try{!r&&d.return&&d.return()}finally{if(t)throw l}}}},a.validateWriteOffMny=function(e,a,r,o){if(!(Math.sign(r)>=0)&&!(e.form.getFormItemsValue(a,o)&&e.form.getFormItemsValue(a,o).value))throw new Error((0,t.loadMultiLang)(e,"36300-000000"))},a.buildLightBodyAfterEditData=function(e,a,r,t,o,n,l,i){var c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];try{if(!(e&&a&&r&&t&&n&&l))throw new Error("参数缺失！");var u=d(e,a,r,t,o,n,l,i,c),s=u.card,f=s.body,p=s.bodys;return c&&1==f[t].rows.length||!c&&p[t].rows.length,u}catch(e){throw e}},function(e,a){var r={},t=e.form.getAllFormValue(a);return t.areacode=a,r[a]=t,r}),i=function(e,a,r,t){var o=e.cardTable.getChangedRows(a),n=t[0].rowid,l=[];if(o&&o.length>1){var i=!0,d=!1,u=void 0;try{for(var s,f=o[Symbol.iterator]();!(i=(s=f.next()).done);i=!0){var p=s.value,b=p.rowid;if(b&&b==n){l.push(p);break}}}catch(e){d=!0,u=e}finally{try{!i&&f.return&&f.return()}finally{if(d)throw u}}}else o&&1==o.length&&l.push(o[0]);var _={rows:l,areaType:"table",areacode:a},m={};m[a]=_;var v=l&&l[0].values.relationindex.value;if(v){var y=c(e,r,v);if(y&&y.length>0){var g={rows:y,areaType:"table",areacode:r};m[r]=g}}return m},d=function(e,a,r,t,o,n,d,c,u){var s={head:l(e,r),pageid:a};return u?s.body=i(e,t):s.bodys=i(e,t,o,d),{areacode:t,attrcode:n,card:s,changedrows:d,index:c}},c=a.queryRelationRowsByRowno=function(e,a,r){for(var t=[],o=e.cardTable.getAllRows(a,!1),n=0;n<o.length;n++){r==o[n].values.relationindex.value&&t.push(o[n])}return t}},,function(e,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.orgVersionView=function(e,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"pk_org",t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pk_org_v";if(e&&a){var o=e.getUrlParam("status"),n="browse"==o,l={};l[r]=!n,l[t]=n,e.form.setFormItemsVisible(a,l)}},a.orgVersionViewNew=function(e,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"pk_org",t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pk_org_v";if(e&&a){var o=e.getUrlParam("status"),n="browse"==o,l={};l[r]=!n,l[t]=n,e.form.setItemsVisible(a,l)}}},function(e,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.MODULE_H_FTS="FTS",a.MODULE_L_FTS="fts",a.VoucherDataConst={pagecode:"10170410_1017041001",appcode:"10170410",linkIdentification:"36300TP_LinkVouchar"}},,,function(e,a,r){"use strict";(function(e){var t,o,n,l,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};window,l=function(e){return function(e){var a={};function r(t){if(a[t])return a[t].exports;var o=a[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=a,r.d=function(e,a,t){r.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:t})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,a){if(1&a&&(e=r(e)),8&a)return e;if(4&a&&"object"==(void 0===e?"undefined":i(e))&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var o in e)r.d(t,o,function(a){return e[a]}.bind(null,o));return t},r.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(a,"a",a),a},r.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},r.p="../../../../",r(r.s=10)}({0:function(a,r){a.exports=e},1:function(e,a,r){Object.defineProperty(a,"__esModule",{value:!0}),a.conf=void 0;var t=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e};a.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return React.createElement(o,t({},n,e))};var o=r(0).high.Refer,n=a.conf={multiLang:{domainName:"uap",currentLocale:"zh-CN",moduleId:"uapRefer"},queryTreeUrl:"/nccloud/riart/ref/groupRefTreeAction.do",refType:"tree",placeholder:"1880000025-000061",refName:"1880000025-000061",rootNode:{refname:"1880000025-000061",refpk:"root"}}},10:function(e,a,r){Object.defineProperty(a,"__esModule",{value:!0}),a.conf=void 0;var t=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e};a.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return React.createElement(l,t({},i,e))};var o=r(0),n=r(1),l=o.high.Refer,i=a.conf={multiLang:{domainName:"uapbd",currentLocale:"zh-CN",moduleId:"refer_uapbd"},refType:"tree",refName:"refer-000165",placeholder:"refer-000165",rootNode:{refname:"refer-000165",refpk:"root"},treeConfig:{name:["refer-000002","refer-000003"],code:["refcode","refname"]},refCode:"uapbd.refer.org.FinanceOrgTreeRef",queryTreeUrl:"/nccloud/uapbd/org/FinanceOrgTreeRef.do",isShowDisabledData:!1,unitProps:n.conf,isRunWithChildren:!1}}})},"object"==i(a)&&"object"==i(e)?e.exports=l(r(0)):(o=[r(0)],void 0===(n="function"==typeof(t=l)?t.apply(a,o):t)||(e.exports=n))}).call(this,r(3)(e))},,,function(e,a,r){"use strict";(function(e){var t,o,n,l,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};window,l=function(e){return function(e){var a={};function r(t){if(a[t])return a[t].exports;var o=a[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=a,r.d=function(e,a,t){r.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:t})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,a){if(1&a&&(e=r(e)),8&a)return e;if(4&a&&"object"==(void 0===e?"undefined":i(e))&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var o in e)r.d(t,o,function(a){return e[a]}.bind(null,o));return t},r.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(a,"a",a),a},r.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},r.p="../../../../",r(r.s=472)}({0:function(a,r){a.exports=e},1:function(e,a,r){Object.defineProperty(a,"__esModule",{value:!0}),a.conf=void 0;var t=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e};a.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return React.createElement(o,t({},n,e))};var o=r(0).high.Refer,n=a.conf={multiLang:{domainName:"uap",currentLocale:"zh-CN",moduleId:"uapRefer"},queryTreeUrl:"/nccloud/riart/ref/groupRefTreeAction.do",refType:"tree",placeholder:"1880000025-000061",refName:"1880000025-000061",rootNode:{refname:"1880000025-000061",refpk:"root"}}},3:function(e,a,r){Object.defineProperty(a,"__esModule",{value:!0}),a.conf=void 0;var t=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e};a.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return React.createElement(l,t({},i,e))};var o=r(0),n=r(1),l=o.high.Refer;n.conf.fieldid="group";var i=a.conf={multiLang:{domainName:"uapbd",currentLocale:"zh-CN",moduleId:"refer_uapbd"},refType:"tree",refName:"refer-000201",refCode:"uapbd.refer.org.BusinessUnitTreeRef",rootNode:{refname:"refer-000201",refpk:"root"},placeholder:"refer-000201",queryTreeUrl:"/nccloud/uapbd/org/BusinessUnitTreeRef.do",treeConfig:{name:["refer-000002","refer-000003"],code:["refcode","refname"]},isMultiSelectedEnabled:!1,unitProps:n.conf,isShowUnit:!1}},472:function(e,a,r){Object.defineProperty(a,"__esModule",{value:!0});var t=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e};a.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a={multiLang:{domainName:"uapbd",currentLocale:"zh-CN",moduleId:"refer_uapbd"},refType:"gridTree",refName:"refer-000386",placeholder:"refer-000386",rootNode:{refname:"refer-000015",refpk:"root"},refCode:"uapbd.pub.BankaccSubUseTreeGridRef",queryTreeUrl:"/nccloud/uapbd/ref/BankaccSubUseTreeRef.do",queryGridUrl:"/nccloud/uapbd/ref/BankaccSubUseGridRef.do",columnConfig:[{name:["refer-000377","refer-000378","refer-000379","refer-000387","refer-000388","refer-000017","refer-000382","refer-000383","refer-000389","refer-000385","refer-000014"],code:["bd_bankaccsub.accnum","bd_bankaccsub.accname","bd_bankaccbas.code","bd_bankaccbas.name","bd_bankdoc.name","bd_banktype.name","bd_bankaccsub.code","bd_bankaccsub.name","bd_currtype.name","bd_bankaccsub.acctype as acctype","bd_bankaccbas.mnecode"],checked:{"bd_bankaccbas.mnecode":!1},search:{"bd_bankaccbas.mnecode":!0}}],treeConfig:{name:["refer-000002","refer-000003"],code:["refcode","refname"]},isMultiSelectedEnabled:!1,unitProps:n.conf,isShowUnit:!1};return React.createElement(l,t({},a,e))};var o=r(0),n=r(3),l=o.high.Refer}})},"object"==i(a)&&"object"==i(e)?e.exports=l(r(0)):(o=[r(0)],void 0===(n="function"==typeof(t=l)?t.apply(a,o):t)||(e.exports=n))}).call(this,r(3)(e))},function(e,a,r){"use strict";(function(e){var t,o,n,l,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};window,l=function(e){return function(e){var a={};function r(t){if(a[t])return a[t].exports;var o=a[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=a,r.d=function(e,a,t){r.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:t})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,a){if(1&a&&(e=r(e)),8&a)return e;if(4&a&&"object"==(void 0===e?"undefined":i(e))&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var o in e)r.d(t,o,function(a){return e[a]}.bind(null,o));return t},r.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(a,"a",a),a},r.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},r.p="../../../../",r(r.s=516)}({0:function(a,r){a.exports=e},1:function(e,a,r){Object.defineProperty(a,"__esModule",{value:!0}),a.conf=void 0;var t=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e};a.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return React.createElement(o,t({},n,e))};var o=r(0).high.Refer,n=a.conf={multiLang:{domainName:"uap",currentLocale:"zh-CN",moduleId:"uapRefer"},queryTreeUrl:"/nccloud/riart/ref/groupRefTreeAction.do",refType:"tree",placeholder:"1880000025-000061",refName:"1880000025-000061",rootNode:{refname:"1880000025-000061",refpk:"root"}}},10:function(e,a,r){Object.defineProperty(a,"__esModule",{value:!0}),a.conf=void 0;var t=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e};a.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return React.createElement(l,t({},i,e))};var o=r(0),n=r(1),l=o.high.Refer,i=a.conf={multiLang:{domainName:"uapbd",currentLocale:"zh-CN",moduleId:"refer_uapbd"},refType:"tree",refName:"refer-000165",placeholder:"refer-000165",rootNode:{refname:"refer-000165",refpk:"root"},treeConfig:{name:["refer-000002","refer-000003"],code:["refcode","refname"]},refCode:"uapbd.refer.org.FinanceOrgTreeRef",queryTreeUrl:"/nccloud/uapbd/org/FinanceOrgTreeRef.do",isShowDisabledData:!1,unitProps:n.conf,isRunWithChildren:!1}},516:function(e,a,r){Object.defineProperty(a,"__esModule",{value:!0});var t=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e};a.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a={multiLang:{domainName:"uapbd",currentLocale:"zh-CN",moduleId:"refer_uapbd"},refType:"grid",refName:"refer-000466",placeholder:"refer-000466",refCode:"uapbd.refer.sminfo.CashAccountGridRef",queryGridUrl:"/nccloud/uapbd/sminfo/CashAccountGridRef.do",isMultiSelectedEnabled:!1,columnConfig:[{name:["refer-000002","refer-000003","refer-000384"],code:["refcode","refname","currtype"]}],unitProps:n.conf,isShowUnit:!1};return React.createElement(l,t({},a,e))};var o=r(0),n=r(10),l=o.high.Refer}})},"object"==i(a)&&"object"==i(e)?e.exports=l(r(0)):(o=[r(0)],void 0===(n="function"==typeof(t=l)?t.apply(a,o):t)||(e.exports=n))}).call(this,r(3)(e))},function(e,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a={multiLang:{domainName:"tmpub",currentLocale:"zh-CN",moduleId:"refer_tmpub"},refType:"grid",refName:"refer-0011",refcode:"tmpub.refer.accid.AccidGridRef",queryGridUrl:"/nccloud/tmpub/refer/AccidGridRef.do",isMultiSelectedEnabled:!1,columnConfig:[{name:["refer-0012","refer-0013","refer-0014","refer-0015","refer-0016","refer-0017","refer-0018"],code:["refcode","refname","pk_ownerorgname","pk_orgname","currtypename","acctypename","isaccounting"]}]};return React.createElement(t,Object.assign(a,e))};var t=r(0).high.Refer},,,function(e,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.clsRowno=a.setEditDisable=a.repaintView=a.loadSearchCache=a.getCahceValue=a.go2linkcard=a.go2card=void 0;var t=r(0),o=(r(13),r(47),r(35)),n=r(2),l=r(2);a.go2card=function(e,a,r,o){var i=r("groupCount");t.cardCache.setDefData("groupCount",l.dataSource,i);var d=r("activeKey");t.cardCache.setDefData("activeKey",l.dataSource,d),a||((a={}).status="browse"),a.pagecode=l.card_page_id,t.cardCache.setDefData(n.cache.iserrtoast,l.dataSource,!0),e.pushTo("/card",a),o&&"function"==typeof o&&o(e)},a.go2linkcard=function(e,a,r,o){var n=r("groupCount");t.cardCache.setDefData("groupCount",l.dataSource,n);var i=r("activeKey");t.cardCache.setDefData("activeKey",l.dataSource,i),a||((a={}).status="browse"),a.pagecode=l.card_page_id,e.pushTo("/linkcard",a),o&&"function"==typeof o&&o(e)},a.getCahceValue=function(e,a,r){var o={},n=t.cardCache.getDefData("groupCount",l.dataSource);n&&(o.groupCount=n);var i=t.cardCache.getDefData("activeKey",l.dataSource);i&&(o.activeKey=i,o.defaultSelectGrup=i),Object.keys(o).length>0&&a(o),r&&"function"==typeof r&&r(e)},a.loadSearchCache=function(e,a){var r=t.cardCache.getDefData("searchData",l.dataSource);if(r)e.search.setSearchValue(l.list_search_id,r);else{var o=a.context;if(o.pk_org){var n=[{field:"pk_org",display:o.org_Name,value:{firstvalue:o.pk_org,secondvalue:""},oprtype:"="}];e.search.setSearchValue(l.list_search_id,n)}}},a.repaintView=function(e){e.form.setFormStatus(l.card_from_id,"browse"),(0,o.buttonVisible)(e,"browse")},a.setEditDisable=function(e){var a=e.form.getFormItemsValue(l.card_from_id,"isreversebustype").value;e.form.setFormItemsDisabled(l.card_from_id,{pk_org:!0}),a&&e.cardTable.setColEditableByKey(l.card_table_id,"isnetpay",!0);for(var r=e.cardTable.getAllRows(l.card_table_id),t=0;t<r.length;t++){r[t].values.isnetpay.value&&e.cardTable.setEditableByIndex(l.card_table_id,[t],["paytype","issamebank","issamecity"],!0)}},a.clsRowno=function(e,a){var r=e.cardTable.getAllRows(a),t=void 0;t=r[0].values.rowno&&r[0].values.rowno.value?parseInt(r[0].values.rowno.value):parseInt(0),r&&(r.forEach((function(e){t<parseInt(e.values.rowno.value)&&(t=parseInt(e.values.rowno.value))})),r.forEach((function(e){e.values.rowno&&e.values.rowno.value||(t=parseInt(t)+parseInt(10),e.values.rowno.value=String(t))})))}},,,,,,,,,,function(e,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.bodyButtonVisible=a.buttonVisible=a.pageInfoClick=a.initTemplate=a.beforeEvent=a.afterEvent=a.buttonClick=void 0;var t=u(r(59)),o=u(r(48)),n=u(r(69)),l=u(r(70)),i=r(49),d=u(r(50)),c=u(r(71));function u(e){return e&&e.__esModule?e:{default:e}}a.buttonClick=t.default,a.afterEvent=n.default,a.beforeEvent=c.default,a.initTemplate=o.default,a.pageInfoClick=l.default,a.buttonVisible=i.buttonVisible,a.bodyButtonVisible=d.default},,,,,function(e,a,r){"use strict";(function(e){var t,o,n,l,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};window,l=function(e){return function(e){var a={};function r(t){if(a[t])return a[t].exports;var o=a[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=a,r.d=function(e,a,t){r.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:t})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,a){if(1&a&&(e=r(e)),8&a)return e;if(4&a&&"object"==(void 0===e?"undefined":i(e))&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var o in e)r.d(t,o,function(a){return e[a]}.bind(null,o));return t},r.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(a,"a",a),a},r.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},r.p="../../../../",r(r.s=471)}({0:function(a,r){a.exports=e},1:function(e,a,r){Object.defineProperty(a,"__esModule",{value:!0}),a.conf=void 0;var t=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e};a.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return React.createElement(o,t({},n,e))};var o=r(0).high.Refer,n=a.conf={multiLang:{domainName:"uap",currentLocale:"zh-CN",moduleId:"uapRefer"},queryTreeUrl:"/nccloud/riart/ref/groupRefTreeAction.do",refType:"tree",placeholder:"1880000025-000061",refName:"1880000025-000061",rootNode:{refname:"1880000025-000061",refpk:"root"}}},3:function(e,a,r){Object.defineProperty(a,"__esModule",{value:!0}),a.conf=void 0;var t=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e};a.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return React.createElement(l,t({},i,e))};var o=r(0),n=r(1),l=o.high.Refer;n.conf.fieldid="group";var i=a.conf={multiLang:{domainName:"uapbd",currentLocale:"zh-CN",moduleId:"refer_uapbd"},refType:"tree",refName:"refer-000201",refCode:"uapbd.refer.org.BusinessUnitTreeRef",rootNode:{refname:"refer-000201",refpk:"root"},placeholder:"refer-000201",queryTreeUrl:"/nccloud/uapbd/org/BusinessUnitTreeRef.do",treeConfig:{name:["refer-000002","refer-000003"],code:["refcode","refname"]},isMultiSelectedEnabled:!1,unitProps:n.conf,isShowUnit:!1}},471:function(e,a,r){Object.defineProperty(a,"__esModule",{value:!0});var t=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e};a.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a={multiLang:{domainName:"uapbd",currentLocale:"zh-CN",moduleId:"refer_uapbd"},refType:"gridTree",refName:"refer-000376",placeholder:"refer-000376",refCode:"uapbd.ref.pub.BankaccSubDefaultGridTreeRef",queryTreeUrl:"/nccloud/uapbd/ref/BankaccSubDefaultTreeRef.do",queryGridUrl:"/nccloud/uapbd/ref/BankaccSubDefaultGridRef.do",columnConfig:[{name:["refer-000377","refer-000378","refer-000379","refer-000380","refer-000381","refer-000015","refer-000382","refer-000383","refer-000384","refer-000385","refer-000014"],code:["accnum","accname","refcode","refname","pk_bankdoc","pk_banktype","scode","sname","pk_currtype","acctype","mnecode"],checked:{mnecode:!1},search:{mnecode:!0}}],treeConfig:{name:["refer-000002","refer-000003"],code:["refcode","refname"]},rootNode:{refname:"refer-000015",refpk:"root"},isMultiSelectedEnabled:!1,unitProps:n.conf,isShowUnit:!1};return React.createElement(l,t({},a,e))};var o=r(0),n=r(3),l=o.high.Refer}})},"object"==i(a)&&"object"==i(e)?e.exports=l(r(0)):(o=[r(0)],void 0===(n="function"==typeof(t=l)?t.apply(a,o):t)||(e.exports=n))}).call(this,r(3)(e))},function(e,a,r){"use strict";(function(e){var t,o,n,l,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};window,l=function(e){return function(e){var a={};function r(t){if(a[t])return a[t].exports;var o=a[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=a,r.d=function(e,a,t){r.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:t})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,a){if(1&a&&(e=r(e)),8&a)return e;if(4&a&&"object"==(void 0===e?"undefined":i(e))&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var o in e)r.d(t,o,function(a){return e[a]}.bind(null,o));return t},r.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(a,"a",a),a},r.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},r.p="../../../../",r(r.s=235)}({0:function(a,r){a.exports=e},1:function(e,a,r){Object.defineProperty(a,"__esModule",{value:!0}),a.conf=void 0;var t=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e};a.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return React.createElement(o,t({},n,e))};var o=r(0).high.Refer,n=a.conf={multiLang:{domainName:"uap",currentLocale:"zh-CN",moduleId:"uapRefer"},queryTreeUrl:"/nccloud/riart/ref/groupRefTreeAction.do",refType:"tree",placeholder:"1880000025-000061",refName:"1880000025-000061",rootNode:{refname:"1880000025-000061",refpk:"root"}}},235:function(e,a,r){Object.defineProperty(a,"__esModule",{value:!0});var t=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e};a.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a={multiLang:{domainName:"uapbd",currentLocale:"zh-CN",moduleId:"refer_uapbd"},refType:"tree",refName:"refer-000113",placeholder:"refer-000113",rootNode:{refname:"refer-000113",refpk:"root"},refCode:"uapbd.refer.fiacc.FundPlanTreeRef",queryTreeUrl:"/nccloud/uapbd/ref/FundPlanTreeRef.do",treeConfig:{name:["refer-000002","refer-000003"],code:["refcode","refname"]},isMultiSelectedEnabled:!1,unitProps:n.conf,isShowUnit:!1};return React.createElement(l,t({},a,e))};var o=r(0),n=r(3),l=o.high.Refer},3:function(e,a,r){Object.defineProperty(a,"__esModule",{value:!0}),a.conf=void 0;var t=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e};a.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return React.createElement(l,t({},i,e))};var o=r(0),n=r(1),l=o.high.Refer;n.conf.fieldid="group";var i=a.conf={multiLang:{domainName:"uapbd",currentLocale:"zh-CN",moduleId:"refer_uapbd"},refType:"tree",refName:"refer-000201",refCode:"uapbd.refer.org.BusinessUnitTreeRef",rootNode:{refname:"refer-000201",refpk:"root"},placeholder:"refer-000201",queryTreeUrl:"/nccloud/uapbd/org/BusinessUnitTreeRef.do",treeConfig:{name:["refer-000002","refer-000003"],code:["refcode","refname"]},isMultiSelectedEnabled:!1,unitProps:n.conf,isShowUnit:!1}}})},"object"==i(a)&&"object"==i(e)?e.exports=l(r(0)):(o=[r(0)],void 0===(n="function"==typeof(t=l)?t.apply(a,o):t)||(e.exports=n))}).call(this,r(3)(e))},function(e,a,r){"use strict";(function(e){var t,o,n,l,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};window,l=function(e){return function(e){var a={};function r(t){if(a[t])return a[t].exports;var o=a[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=a,r.d=function(e,a,t){r.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:t})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,a){if(1&a&&(e=r(e)),8&a)return e;if(4&a&&"object"==(void 0===e?"undefined":i(e))&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var o in e)r.d(t,o,function(a){return e[a]}.bind(null,o));return t},r.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(a,"a",a),a},r.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},r.p="../../../../",r(r.s=521)}({0:function(a,r){a.exports=e},521:function(e,a,r){Object.defineProperty(a,"__esModule",{value:!0});var t=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e};a.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a={multiLang:{domainName:"uapbd",currentLocale:"zh-CN",moduleId:"refer_uapbd"},refType:"grid",refName:"refer-000479",refCode:"uapbd.sminfo.NotetypeDefaultGridRef",placeholder:"refer-000479",queryGridUrl:"/nccloud/uapbd/ref/NotetypeDefaultGridRef.do",columnConfig:[{name:["refer-000480","refer-000481","refer-000482"],code:["refcode","refname","noteclass_name"],checked:{noteclass_name:!1}}],isMultiSelectedEnabled:!1};return React.createElement(o,t({},a,e))};var o=r(0).high.Refer}})},"object"==i(a)&&"object"==i(e)?e.exports=l(r(0)):(o=[r(0)],void 0===(n="function"==typeof(t=l)?t.apply(a,o):t)||(e.exports=n))}).call(this,r(3)(e))},,,,,function(e,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.showTbbInfo=void 0;var t=r(0);a.showTbbInfo=function(e){if(e&&e.model&&e.model.rows&&0!=e.model.rows.length){var a=e.model.rows,r="",o=!1,n=!0,l=!1,i=void 0;try{for(var d,c=a[Symbol.iterator]();!(n=(d=c.next()).done);n=!0){var u=d.value,s=(u&&u.values&&u.values.ntbinfo||{}).value;s&&(o=!0,r+=s,u.values.ntbinfo={value:null,display:null})}}catch(e){l=!0,i=e}finally{try{!n&&c.return&&c.return()}finally{if(l)throw i}}o&&(0,t.toast)({color:"warning",content:r})}}},function(e,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var a=this;e.createUIDom({pagecode:k,appcode:e.getUrlParam("c")},(function(r){if(r){if(r.template){var t=r.template;!function(e,a,r){var t=a.getUrlParam("status");"decide"==t?(r[g].status="edit",r[h].status="edit"):(r[g].status=t,r[h].status=t);r[g].items.map((function(e){"pk_org"==e.attrcode&&(e.queryCondition=function(){return{funcode:a.getSearchParam("c"),TreeRefActionExt:"nccloud.web.tmpub.filter.FundOrgPermissionFilter"}})})),r[h].items.map((function(e){"pk_getfinanceorg"==e.attrcode&&(e.render=function(e,r,t){return(0,i.default)({queryCondition:function(){return{pk_org:(a.form.getFormItemsValue("form_cashpay_01","pk_org")||{}).value,TreeRefActionExt:"nccloud.web.fts.cash.cashpay.filter.DefaultFundFinanceOrgFilterForNCC"}}})},e.isShowUnit=!0),"pk_planitem"==e.attrcode&&(e.render=function(e,r,t){return(0,l.default)({queryCondition:function(){return{pk_org:a.form.getFormItemsValue("form_cashpay_01","pk_org").value,GridRefActionExt:"nccloud.web.fts.cash.cashpay.filter.DefaultRefPlanItemFilterForNCC"}}})}),"pk_accid"==e.attrcode&&(e.render=function(e,r,t){return(0,n.default)({queryCondition:function(){return{pk_currtype:a.form.getFormItemsValue("form_cashpay_01","pk_currtype").value,pk_org:a.form.getFormItemsValue("form_cashpay_01","pk_org").value,pk_getfinanceorg:r.values.pk_getfinanceorg.value,GridRefActionExt:"nccloud.web.fts.cash.cashpay.filter.DefaultRefAccFilterForNCC,nccloud.web.fts.cash.cashpay.filter.PkCurrTypeInnerAccFilterForNCC,nccloud.web.fts.cash.cashpay.filter.FinanceOrgRefAccFilterForNCC"}}})}),"pk_cashbankacc"==e.attrcode&&(e.render=function(e,r,t){return(0,d.default)({queryCondition:function(){return{pk_org:a.form.getFormItemsValue(g,"pk_org").value,pk_currtype:a.form.getFormItemsValue(g,"pk_currtype").value,GridRefActionExt:"nccloud.web.fts.cash.cashpay.filter.DefaultRefCashAccFilterForNCC"}}})}),"pk_bankacc"==e.attrcode&&(e.render=function(e,r,t){return(0,o.default)({queryCondition:function(){return{pk_getfinanceorg:r.values.pk_getfinanceorg.value,pk_org:a.form.getFormItemsValue(g,"pk_org").value,disable:"2",refnodename:"使用权参照",pk_currtype:a.form.getFormItemsValue(g,"pk_currtype").value,GridRefActionExt:"nccloud.web.fts.cash.cashpay.filter.CurrtypeRefBankAccFilterForNCC,nccloud.web.fts.cash.cashpay.filter.BanksubaccNoInnerAccFilterForNCC,nccloud.web.fts.cash.cashpay.filter.BanksubaccNoDestroyFilterForNCC,nccloud.web.fts.cash.cashpay.filter.BanksubaccNoFrozenFilterForNCC,nccloud.web.fts.cash.cashpay.filter.BanksubaccOnlyCurrentForNCC"}}})}),"notetype"==e.attrcode&&(e.render=function(e,a,r){return(0,c.default)({queryCondition:function(){return{GridRefActionExt:"nccloud.web.fts.cash.cashpay.filter.NoteTypeFilterForNCC"}}})}),"pk_drawer"==e.attrcode&&(e.render=function(e,r,t){return(0,u.default)({queryCondition:function(){return{pk_org:a.form.getFormItemsValue(g,"pk_org").value}}})})})),r[f.card_table_formId].items.map((function(e){"pk_getfinanceorg"==e.attrcode&&(e.render=function(e,r,t){return(0,i.default)({queryCondition:function(){return{pk_org:(a.form.getFormItemsValue("form_cashpay_01","pk_org")||{}).value,TreeRefActionExt:"nccloud.web.fts.cash.cashpay.filter.DefaultFundFinanceOrgFilterForNCC"}}})}),"pk_planitem"==e.attrcode&&(e.render=function(e,r,t){return(0,l.default)({queryCondition:function(){return{pk_org:a.form.getFormItemsValue("form_cashpay_01","pk_org").value,GridRefActionExt:"nccloud.web.fts.cash.cashpay.filter.DefaultRefPlanItemFilterForNCC"}}})}),"pk_accid"==e.attrcode&&(e.render=function(e,r,t){return(0,n.default)({queryCondition:function(){return{pk_currtype:a.form.getFormItemsValue("form_cashpay_01","pk_currtype").value,pk_org:a.form.getFormItemsValue("form_cashpay_01","pk_org").value,pk_getfinanceorg:r.values.pk_getfinanceorg.value,GridRefActionExt:"nccloud.web.fts.cash.cashpay.filter.DefaultRefAccFilterForNCC,nccloud.web.fts.cash.cashpay.filter.PkCurrTypeInnerAccFilterForNCC,nccloud.web.fts.cash.cashpay.filter.FinanceOrgRefAccFilterForNCC"}}})}),"pk_cashbankacc"==e.attrcode&&(e.render=function(e,r,t){return(0,d.default)({queryCondition:function(){return{pk_org:a.form.getFormItemsValue(g,"pk_org").value,pk_currtype:a.form.getFormItemsValue(g,"pk_currtype").value,GridRefActionExt:"nccloud.web.fts.cash.cashpay.filter.DefaultRefCashAccFilterForNCC"}}})}),"pk_bankacc"==e.attrcode&&(e.render=function(e,r,t){return(0,o.default)({queryCondition:function(){return{pk_getfinanceorg:r.values.pk_getfinanceorg.value,pk_org:a.form.getFormItemsValue(g,"pk_org").value,disable:"2",refnodename:"使用权参照",pk_currtype:a.form.getFormItemsValue(g,"pk_currtype").value,GridRefActionExt:"nccloud.web.fts.cash.cashpay.filter.CurrtypeRefBankAccFilterForNCC,nccloud.web.fts.cash.cashpay.filter.BanksubaccNoInnerAccFilterForNCC,nccloud.web.fts.cash.cashpay.filter.BanksubaccNoDestroyFilterForNCC,nccloud.web.fts.cash.cashpay.filter.BanksubaccNoFrozenFilterForNCC,nccloud.web.fts.cash.cashpay.filter.BanksubaccOnlyCurrentForNCC"}}})}),"notetype"==e.attrcode&&(e.render=function(e,a,r){return(0,c.default)({queryCondition:function(){return{GridRefActionExt:"nccloud.web.fts.cash.cashpay.filter.NoteTypeFilterForNCC"}}})}),"pk_drawer"==e.attrcode&&(e.render=function(e,r,t){return(0,u.default)({queryCondition:function(){return{pk_org:a.form.getFormItemsValue(g,"pk_org").value}}})})}));a.MutiInit.getIntl("36300WC_C01"),(0,v.loadMultiLang)(a,"36300WC-000050"),(0,v.loadMultiLang)(a,"36300WC-000051");var s={attrcode:"opr",label:(0,v.loadMultiLang)(a,"36300WC-000049"),visible:!0,fixed:"right",width:200,className:"table-opr",itemtype:"customer",render:function(r,t,o){a.cardTable.getStatus(h);var n=e.copyflag;e.state.showWord;if(n){return a.button.createOprationButton(["Copythis"],{area:"card_inner",buttonLimit:3,onButtonClick:function(a,n){return _.bodyButtonClick.call(e,a,n,r,t,o)}})}return React.createElement("div",{className:"currency-opr-col"},a.button.createOprationButton((0,b.getBodyBtnArr)(a,t,n),{area:"card_inner",buttonLimit:"3",onButtonClick:function(a,n){_.bodyButtonClick.call(e,a,n,r,t,o)}}))}};r[h].items.push(s)}(a,e,t),e.meta.setMeta(t,(function(){(0,s.orgVersionView)(e,f.card_from_id)})),e.getUrlParam("status"),"edit"!=e.getUrlParam("status")&&"copy"!=e.getUrlParam("status")&&"edit"!=e.getUrlParam("edit")||e.form.setFormItemsDisabled(f.card_from_id,{pk_org:!0,isreversebustype:!1,pk_currtype:!1,submituser:!0,billmaker:!0,dbilldate:!0,decideuser:!0,decidedate:!0,approver:!0,dapprovedate:!0,vbillstatus:!0,vapprovenote:!0,unitbillmaker:!0,unitapprover:!0}),"decide"==e.getUrlParam("status")&&(e.form.setFormItemsDisabled(f.card_from_id,{submituser:!0,billmaker:!0,dbilldate:!0,decideuser:!0,decidedate:!0,approver:!0,dapprovedate:!0,vbillstatus:!0,vapprovenote:!0,unitbillmaker:!0,unitapprover:!0}),e.cardTable.setColEditableByKey(f.card_table_id,["pk_getfinanceorg","pk_accid","amount"],!0)),a.billId||(a.billId=a.props.getUrlParam("id")),a.status=a.props.getUrlParam("status"),a.billId&&"add"!=a.status?a.qryData():"add"===a.status?setTimeout((function(){if(a.setState({vbillno:""}),a.props.cardTable.setTableData(f.card_table_id,{rows:[]}),a.props.initMetaByPkorg(),a.props.cardTable.setStatus(f.card_table_id,"browse"),"card"===a.props.getUrlParam("interfaceJump")&&(a.props.form.setFormItemsDisabled(f.card_from_id,{pk_org:!1}),a.props.form.setFormItemsDisabled(f.card_from_id,{memo:!0,busitype:!0,pk_currtype:!0,isreversebustype:!0})),a.props.form.EmptyAllFormValue(f.card_from_id),a.pk_org)m.afterEvent.call(a,a.props,f.card_from_id,"pk_org",a.pk_org,null,null,null,null,!0);else{e.form.setFormItemsVisible(f.card_from_id,{pk_org_v:!1});var t=r.context;if(t.pk_org){var o={value:t.pk_org,display:t.org_Name};m.afterEvent.call(a,e,f.card_from_id,"pk_org",o,null,null,null,null,!0)}}a.props.form.setFormItemsVisible(f.card_from_id,{pk_org_v:!1}),a.toggleShow()}),0):setTimeout((function(){a.props.form.EmptyAllFormValue(f.card_from_id),a.props.cardTable.setTableData(f.card_table_id,{rows:[]}),a.toggleShow()}),0)}if(r.button){var y=r.button;e.button.setButtons(y),p.buttonVisible.call(a,e),e.form.getFormItemsValue(f.card_from_id,f.saga_gtxid)&&e.socket.showToast({gtxid:e.form.getFormItemsValue(f.card_from_id,f.saga_gtxid).value,billpk:e.form.getFormItemsValue(f.card_from_id,f.pk).value})}}}))};var t=r(0),o=(y(r(40)),y(r(20))),n=y(r(22)),l=y(r(41)),i=y(r(17)),d=y(r(21)),c=y(r(42)),u=y(r(68)),s=r(13),f=r(2),p=r(49),b=r(50),_=r(60),m=r(35),v=r(1);function y(e){return e&&e.__esModule?e:{default:e}}t.base.NCPopconfirm;var g="form_cashpay_01",h="table_cashpay_01",k="36300WC_C01"},function(e,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.buttonVisible=void 0;r(0);var t=r(2),o=(r(1),t.card_from_id),n=(t.card_page_id,t.card_table_id);a.buttonVisible=function(e,a){a||(a=e.getUrlParam("status")),a||(a="browse");var r="browse"!==a,t=!1;this&&(t=this.copyflag||!1);var l=e.form.getFormItemsValue(o,"billstatus");l=l&&l.value;var i=e.form.getFormItemsValue(o,"recmodul");i=i&&i.value;var d=e.form.getFormItemsValue(o,"ismakevoucher");d=d&&d.value;var c=e.form.getFormItemsValue(o,"pk_org");e.button.setButtonVisible(["SaveGroup","AddGroup","Add","Cancel","Edit","Delete","Copy","Decide","Back","Commit","Uncommit","LinkQuery","Make","Unmake","Refresh","acceptLQueryVoucher","QueryNtbPlan","UnionReturnBill","QueryApprove","Print","elecsignformalPrint","elecsigninformalPrint"],!1),r&&"add"!=a||r&&"add"==a?(e.button.setButtonVisible(["File"],!r),e.button.setButtonVisible(["SaveGroup","Cancel"],r),e.button.setMainButton(["Save"],!0)):r||"5"!=l||"CMP"!=i?r||"5"!=l||"FTS"!=i?r||"2"!=l?r||"3"!=l||d?!r&&"3"==l&&d?(e.button.setButtonVisible(["AddGroup","Add","Copy","Unmake","File","LinkQuery","QueryNtbPlan","acceptLQueryVoucher","Print","Refresh","QueryApprove","UnionReturnBill","elecsignformalPrint","elecsigninformalPrint"],!0),e.button.setMainButton(["Add"],!1)):r||"4"!=l?null==l&&(e.button.setButtonVisible(["File"],!1),e.button.setButtonVisible(["Add"],!0),e.button.setMainButton(["Add"],!0)):(e.button.setButtonVisible(["AddGroup","Add","Copy","File","LinkQuery","Print","Refresh","QueryApprove"],!0),e.button.setMainButton(["Add"],!0)):(e.button.setButtonVisible(["AddGroup","Add","Copy","Uncommit","Make","File","LinkQuery","QueryNtbPlan","acceptLQueryVoucher","Print","Refresh","QueryApprove","UnionReturnBill","elecsignformalPrint","elecsigninformalPrint"],!0),e.button.setMainButton(["Add"],!1),e.button.setMainButton(["Make"],!0)):(e.button.setButtonVisible(["AddGroup","Add","Copy","Uncommit","File","LinkQuery","QueryNtbPlan","QueryApprove","Print","Refresh"],!0),e.button.setMainButton(["Uncommit"],!1),e.button.setMainButton(["Add"],!1)):(e.button.setButtonVisible(["AddGroup","Add","Edit","Delete","Copy","Commit","LinkQuery","QueryNtbPlan","Print","File","Refresh"],!0),e.button.setMainButton(["Commit"],!0),e.button.setMainButton(["Add"],!1)):(e.button.setButtonVisible(["AddGroup","Add","Copy","Decide","Back","Commit","LinkQuery","QueryNtbPlan","Print","File","Refresh"],!0),e.button.setMainButton(["Commit"],!0),e.button.setMainButton(["Add"],!1)),r&&!t&&"decide"!=a?(e.button.setButtonVisible(["Addline","Deleteline","Copyline"],!0),e.button.setButtonVisible(["Copyend","CancelCopy"],!1),"add"!=e.getUrlParam("status")||c?e.button.setButtonDisabled(["Deleteline","Copyline"],!0):e.button.setButtonDisabled(["Addline","Deleteline","Copyline"],!0)):r&&"decide"!=a?(e.button.setButtonVisible(["Copyend","CancelCopy"],!0),e.button.setButtonVisible(["Addline","Deleteline","Copyline"],!1)):(e.button.setButtonVisible(["Copyend","CancelCopy"],!1),e.button.setButtonVisible(["Addline","Deleteline","Copyline"],!1)),e.cardPagination.setCardPaginationVisible("cardPaginationBtn",!r),e.form.setFormStatus(o,a),e.cardTable.setStatus(n,a)}},function(e,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.getBodyBtnArr=void 0,a.default=function(e){var a=void 0,r=e.getUrlParam("status");e.cardTable&&e.cardTable.getNumberOfRows(t.card_table_id)>0&&(a=e.cardTable.getCheckedRows(t.card_table_id));var o=e.form.getFormItemsValue(t.card_from_id,"pk_org");"add"==r?a&&0!=a.length?e.button.setButtonDisabled(["Addline","Deleteline","Copyline"],!1):o&&o.value?e.button.setButtonDisabled(["Deleteline","Copyline"],!0):e.button.setButtonDisabled(["Addline","Deleteline","Copyline"],!0):a&&0!=a.length?e.button.setButtonDisabled(["Deleteline","Copyline"],!1):(e.button.setButtonDisabled(["Addline"],!1),e.button.setButtonDisabled(["Deleteline","Copyline"],!0))};var t=r(2);a.getBodyBtnArr=function(e,a,r){var t=e.getUrlParam("status");return"browse"==t?a.expandRowStatus?["closedown"]:["opendown"]:"decide"==t?["openright"]:r?void 0:["openright"]}},,,,,,,,,function(e,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.afterEventCurrtype=a.backConfirm=a.repaintView=void 0;var t,o=(t=f(regeneratorRuntime.mark((function e(a,r,t,o,c){var f,b,_,g,F,M,D,V,L,N,j,E,U,K,W,q=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=r,e.next="Add"===e.t0?3:"Save"===e.t0?8:"SaveAdd"===e.t0?10:"SaveCommit"===e.t0?12:"Edit"===e.t0?14:"Copy"===e.t0?19:"Delete"===e.t0?27:"Commit"===e.t0?29:"Uncommit"===e.t0?31:"Back"===e.t0?33:"Make"===e.t0?35:"Unmake"===e.t0?37:"Decide"===e.t0?39:"UnDeal"===e.t0?45:"Cancel"===e.t0?47:"Print"===e.t0?49:"Output"===e.t0?54:"File"===e.t0?59:"UnionReturnBill"===e.t0?65:"CheckSourceBill"===e.t0?67:"UnionAfterBill"===e.t0?69:"QueryNtbPlan"===e.t0?71:"acceptLQueryVoucher"===e.t0?74:"payAccBalanceAction"===e.t0?81:"reciveaccount"===e.t0?83:"payaccount"===e.t0?85:"UnionCashBalance"===e.t0?87:"UnionBankBalance"===e.t0?89:"commissionpayment"===e.t0?91:"QueryApprove"===e.t0?93:"Refresh"===e.t0?95:"elecsignformalPrint"===e.t0?97:"elecsigninformalPrint"===e.t0?99:101;break;case 3:return this.billno="",a.pushTo("/card",{pagecode:l.card_page_id,status:"add",id:"",iscopy:!1,interfaceJump:"card"}),this.status="add",setTimeout((function(){q.componentDidMount()}),0),e.abrupt("break",102);case 8:return m(a,v.bind(this,a)),e.abrupt("break",102);case 10:return m(a,y.bind(this,a)),e.abrupt("break",102);case 12:return m(a,v.bind(this,a,(function(){p[l.card_table_id]="pk_cashpay_b",(0,d.cardOperator)(a,l.card_page_id,l.card_from_id,p,"pk_cashpay_h",l.base_url+"commit.do",(0,u.loadMultiLang)(q.props,"36300WC-000005"),l.dataSource,O.bind(q),!0,{btncode:"SaveCommit",pagecode:l.card_page_id})}))),e.abrupt("break",102);case 14:return f=a.form.getFormItemsValue(l.card_from_id,"ts").value,a.setUrlParam({edit:"edit",status:"browse",id:a.getUrlParam("id"),isCopy:!1,ts:f}),this.status="browse",setTimeout((function(){q.componentDidMount(),a.form.setFormItemsDisabled(l.card_from_id,{pk_org:!0})}),0),e.abrupt("break",102);case 19:return this.status="copy",this.billId=a.getUrlParam("id"),this.billno=null,a.setUrlParam({status:"copy",id:a.getUrlParam("id"),isCopy:!0}),b={pk:this.props.getUrlParam("id"),pageid:l.card_page_id},_=l.base_url+"copy.do",(0,n.ajax)({url:_,data:b,success:function(e){e.data?(e.data.head&&(a.form.setAllFormValue(s({},l.card_from_id,e.data.head[l.card_from_id])),a.form.setFormItemsDisabled(l.card_from_id,{memo:!1,busitype:!1,pk_currtype:!1,isreversebustype:!1})),e.data.body&&a.cardTable.setTableData(l.card_table_id,e.data.body[l.card_table_id]),a.form.setFormItemsValue(l.card_from_id,{pk_cashpay_h:{value:null,display:null},srccmpbillcode:{value:null,display:null},recmodul:{value:"FTS",display:null},pk_srccmpbill:{value:null,display:null},srccmpbilltype:{value:null,display:null},srccmpbusitype:{value:null,display:null}}),a.cardTable.setColValue(l.card_table_id,"pk_cashpay_b",{value:null,display:null}),a.form.setFormItemsDisabled(l.card_from_id,{pk_org:!0,pk_group:!0,memo:!1,busitype:!1,pk_currtype:!1,isreversebustype:!1}),q.toggleShow(),x.call(q,a,l.card_from_id,"pk_currtype",a.form.getFormItemsValue(l.card_from_id,"pk_currtype").value,null,null,null,null,!0,a.getUrlParam("status"),a.getUrlParam("id"))):(a.form.setAllFormValue(s({},l.card_from_id,{rows:[]})),a.cardTable.setTableData(l.card_table_id,{rows:[]}))}}),e.abrupt("break",102);case 27:return(0,n.promptBox)({color:"warning",title:(0,u.loadMultiLang)(a,"36300WC-000059"),content:(0,u.loadMultiLang)(a,"36300WC-000060"),beSureBtnClick:this.delConfirm}),e.abrupt("break",102);case 29:return(0,d.cardOperatorForCash)(a,l.card_page_id,l.card_from_id,p,"pk_cashpay_h",l.base_url+"commit.do",(0,u.loadMultiLang)(this.props,"36300WC-000006"),l.dataSource,O.bind(this),!0,{btncode:"Commit",pagecode:l.card_page_id}),e.abrupt("break",102);case 31:return(0,d.cardOperatorForCash)(a,l.card_page_id,l.card_from_id,p,"pk_cashpay_h",l.base_url+"uncommit.do",(0,u.loadMultiLang)(this.props,"36300WC-000007"),l.dataSource,this.toggleShow.bind(this)),e.abrupt("break",102);case 33:return this.setState({showReBack:!0}),e.abrupt("break",102);case 35:return(0,d.cardOperatorForCash)(a,l.card_page_id,l.card_from_id,p,"pk_cashpay_h",l.base_url+"make.do",(0,u.loadMultiLang)(this.props,"36300WC-000008"),l.dataSource,this.toggleShow.bind(this),null,{btncode:"Make",pagecode:l.card_page_id}),e.abrupt("break",102);case 37:return(0,d.cardOperatorForCash)(a,l.card_page_id,l.card_from_id,p,"pk_cashpay_h",l.base_url+"unmake.do",(0,u.loadMultiLang)(this.props,"36300WC-000009"),l.dataSource,this.toggleShow.bind(this),null,{btncode:"Unmake",pagecode:l.card_page_id}),e.abrupt("break",102);case 39:return g=l.base_url+"decide.do",(f=this.ts)||(f=a.form.getFormItemsValue(l.card_from_id,"ts").value),F={pk:a.getUrlParam("id"),pageid:l.card_page_id,status:"decide",ts:f},(0,n.ajax)({url:g,data:F,success:function(e){e.data&&(a.setUrlParam({status:l.viewmod_deal,from:"card",id:a.getUrlParam("id")}),q.status=l.viewmod_deal,setTimeout((function(){q.componentDidMount()}),0))}}),e.abrupt("break",102);case 45:return(0,d.cardOperatorForCash)(a,l.card_page_id,l.card_from_id,p,"pk_cashpay_h",l.base_url+"undeal.do",(0,u.loadMultiLang)(this.props,"36300WC-000010"),l.dataSource,this.toggleShow.bind(this)),e.abrupt("break",102);case 47:return(0,n.promptBox)({title:(0,u.loadMultiLang)(this.props,"36300WC-000011"),color:"warning",content:(0,u.loadMultiLang)(this.props,"36300WC-000012"),beSureBtnClick:B.bind(this,a)}),e.abrupt("break",102);case 49:return M=[],(D=this.props.form.getFormItemsValue(l.card_from_id,"pk_cashpay_h").value)&&M.push(D),(0,n.print)("pdf",l.base_url+"print.do",{appcode:l.funcode,nodekey:"NCCLOUD",oids:M}),e.abrupt("break",102);case 54:return D=this.props.form.getFormItemsValue(l.card_from_id,"pk_cashpay_h").value,(V=[]).push(D),(0,n.output)({url:"/nccloud/fts/cashpay/print.do",data:{nodekey:"NCCLOUD",appcode:l.funcode,oids:V,outputType:"output"}}),e.abrupt("break",102);case 59:return L=this.props.form.getFormItemsValue(l.card_from_id,"pk_cashpay_h"),N=this.props.form.getFormItemsValue(l.card_from_id,"vbillno"),this.billId=L&&L.value,this.billno=N&&N.value,this.setState({showUploader:!this.state.showUploader}),e.abrupt("break",102);case 65:return C.call(this,a),e.abrupt("break",102);case 67:return h.call(this,a),e.abrupt("break",102);case 69:return k.call(this,a),e.abrupt("break",102);case 71:return j=a.createMasterChildData(l.card_page_id,l.card_from_id,l.card_table_id),(0,n.ajax)({url:"/nccloud/fts/cashpay/cashpaylinkplan.do",data:j,success:function(e){e.data&&e.data.hint?(0,n.toast)({color:"warning",content:e.data.hint}):q.setState({showInspection:!0,sourceData:e.data})}}),e.abrupt("break",102);case 74:return D=this.props.form.getFormItemsValue(l.card_from_id,"pk_cashpay_h").value,E=this.props.form.getFormItemsValue(l.card_from_id,"pk_group").value,U=this.props.form.getFormItemsValue(l.card_from_id,"pk_org").value,K=this.props.form.getFormItemsValue(l.card_from_id,"vbillno").value,W=this.props.form.getFormItemsValue(l.card_from_id,"pk_billtype").value,(0,i.linkVoucherApp)(a,D,E,U,W,K),e.abrupt("break",102);case 81:return P.call(this,a),e.abrupt("break",102);case 83:return T.call(this,a),e.abrupt("break",102);case 85:return S.call(this,a),e.abrupt("break",102);case 87:return R.call(this,a),e.abrupt("break",102);case 89:return A.call(this,a),e.abrupt("break",102);case 91:return h.call(this,a),e.abrupt("break",102);case 93:return I.call(this,a),e.abrupt("break",102);case 95:return w.call(this,a),e.abrupt("break",102);case 97:return(0,u.elecSignCardPrint)(a,{url:l.base_url+"elecsignprint.do",offical:!0,appCode:l.funcode,nodeKey:"OFFICAL",headCode:l.card_from_id,field_id:"pk_cashpay_h",field_billno:"vbillno",validateFunc:function(){return"3"!=a.form.getFormItemsValue(l.card_from_id,"billstatus").value?(0,u.loadMultiLang)(a,"36300WC-000103"):null}}),e.abrupt("break",102);case 99:return(0,u.elecSignCardPrint)(a,{url:l.base_url+"elecsignprint.do",offical:!1,appCode:l.funcode,nodeKey:"INOFFICAL",headCode:l.card_from_id,field_id:"pk_cashpay_h",field_billno:"vbillno",validateFunc:function(){return"3"!=a.form.getFormItemsValue(l.card_from_id,"billstatus").value?(0,u.loadMultiLang)(a,"36300WC-000103"):null}}),e.abrupt("break",102);case 101:return e.abrupt("break",102);case 102:case"end":return e.stop()}}),e,this)}))),function(e,a,r,o,n){return t.apply(this,arguments)}),n=r(0),l=r(2),i=r(10),d=r(6),c=r(35),u=r(1);function s(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function f(e){return function(){var a=e.apply(this,arguments);return new Promise((function(e,r){return function t(o,n){try{var l=a[o](n),i=l.value}catch(e){return void r(e)}if(!l.done)return Promise.resolve(i).then((function(e){t("next",e)}),(function(e){t("throw",e)}));e(i)}("next")}))}}var p={};p[l.card_table_id]="pk_cashpay_b";var b,_,m=function(e,a){var r=e.createMasterChildData(l.card_page_id,l.card_from_id,l.card_table_id),t=s({},l.card_table_id,"cardTable");e.validateToSave(r,a,t,"")},v=(b=f(regeneratorRuntime.mark((function e(a,r){var t,o,i,c,f,p,b,_,m,v,y,g,h=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.cardCache.addCache,o=n.cardCache.updateCache,i=a.getUrlParam("status"),c=a.form.isCheckNow(l.card_from_id),f=!1,c){e.next=6;break}return e.abrupt("return");case 6:if(!(a.cardTable.getNumberOfRows(l.card_table_id)<=0)){e.next=10;break}return(0,n.toast)({color:"warning",content:(0,u.loadMultiLang)(a,"36300WC-000107")}),e.abrupt("return");case 10:if(a.cardTable.checkTableRequired(l.card_table_id)){e.next=13;break}return e.abrupt("return");case 13:if(p=a.cardTable.getAllRows(l.card_table_id),b=!1,p.forEach((function(e){var a=e.values.pk_cashbankacc.value;e.values.pk_bankacc.value||a||(b=!0)})),!b){e.next=19;break}return(0,n.toast)({color:"warning",content:(0,u.loadMultiLang)(a,"36300WC-000111")}),e.abrupt("return");case 19:_=null,m=l.base_url,v=l.card_page_id,y=null,g=this,this.props.cardTable.filterEmptyRows(l.card_table_id),"add"==i||"copy"==i?(_=(0,u.createSimpleBillData)(a,l.card_page_id,l.card_from_id,l.card_table_id),y={data:JSON.stringify(_),pageCode:v},m+="save.do",(0,n.ajax)({url:m,data:y,success:function(e){var o=e.success,i=e.data;if(o){var c=i.head,p=i.body;c&&(g.props.form.setAllFormValue(s({},l.card_from_id,c[l.card_from_id])),f=(0,d.showTBBMsg)(c,l.card_from_id)),p&&(g.props.beforeUpdatePage(),p[l.card_table_id]=g.props.cardTable.updateDataByRowId(l.card_table_id,p[l.card_table_id]),g.props.updatePage(l.card_from_id,l.card_table_id,null),p[l.card_table_id]&&(e.data.body=p[l.card_table_id]));var b=c[l.card_from_id].rows[0].values.pk_cashpay_h.value,_=c[l.card_from_id].rows[0].values.vbillno.value;h.billId=b,h.billno=_,t(b,e.data,l.card_from_id,l.dataSource,e.data.head[l.card_from_id].rows[0].values),setTimeout((function(){if(a.setUrlParam({status:"browse",id:b,isCopy:!1}),h.status="browse",h.copyflag=!1,g.toggleShow(),r&&"function"==typeof r)r(a,i);else if(!f)return void(0,n.toast)({color:"success",content:(0,u.loadMultiLang)(h.props,"36300WC-000027")})}),0)}},error:function(e){(0,n.toast)({color:"warning",content:e.message})}})):"edit"==i?(_=(0,u.createSimpleBillData)(a,l.card_page_id,l.card_from_id,l.card_table_id),y={data:JSON.stringify(_),pageCode:v},m+="update.do",(0,n.ajax)({url:m,data:y,success:function(e){var t=e.success,i=e.data;if(t){var c=i.head,p=i.body;c&&(g.props.form.setAllFormValue(s({},l.card_from_id,c[l.card_from_id])),f=(0,d.showTBBMsg)(c,l.card_from_id)),p&&(g.props.beforeUpdatePage(),p[l.card_table_id]=g.props.cardTable.updateDataByRowId(l.card_table_id,p[l.card_table_id]),g.props.updatePage(l.card_from_id,l.card_table_id,null),p[l.card_table_id]&&(e.data.body=p[l.card_table_id]));var b=c[l.card_from_id].rows[0].values.pk_cashpay_h.value,_=c[l.card_from_id].rows[0].values.vbillno.value;h.billId=b,h.billno=_,o("pk_cashpay_h",b,e.data,l.card_from_id,l.dataSource),setTimeout((function(){a.setUrlParam({status:"browse",id:b}),h.status="browse",h.copyflag=!1,g.toggleShow(),r&&"function"==typeof r?r(a,i):f||(0,n.toast)({color:"success",content:(0,u.loadMultiLang)(h.props,"36300WC-000028")})}),0)}},error:function(e){(0,n.toast)({color:"warning",content:e.message})}})):"decide"==i&&(_=(0,u.createSimpleBillData)(a,l.card_page_id,l.card_from_id,l.card_table_id),y={data:JSON.stringify(_),pageCode:v},m+="update.do",(0,n.ajax)({url:m,data:y,success:function(e){var t=e.success,i=e.data;if(t){var c=i.head,p=i.body;c&&(g.props.form.setAllFormValue(s({},l.card_from_id,c[l.card_from_id])),f=(0,d.showTBBMsg)(c,l.card_from_id)),p&&g.props.cardTable.setTableData(l.card_table_id,p[l.card_table_id]);var b=c[l.card_from_id].rows[0].values.pk_cashpay_h.value,_=c[l.card_from_id].rows[0].values.vbillno.value,m=c[l.card_from_id].rows[0].values.ts.value;h.billId=b,h.billno=_,h.ts=m,o("pk_cashpay_h",b,e.data,l.card_from_id,l.dataSource),setTimeout((function(){a.setUrlParam({status:"browse",id:b,ts:m}),h.status="browse",h.copyflag=!1,g.toggleShow(),r&&"function"==typeof r?r(a,i):f||(0,n.toast)({color:"success",content:(0,u.loadMultiLang)(h.props,"36300WC-000029")})}),0)}},error:function(e){(0,n.toast)({color:"warning",content:e.message})}}));case 26:case"end":return e.stop()}}),e,this)}))),function(e,a){return b.apply(this,arguments)}),y=(_=f(regeneratorRuntime.mark((function e(a){var r,t,o,i,c,f,p,b,_,m,v,y,g=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.cardCache.addCache,t=n.cardCache.updateCache,o=a.getUrlParam("status"),i=!1,a.form.isCheckNow(l.card_from_id)){e.next=6;break}return e.abrupt("return");case 6:if(!(a.cardTable.getNumberOfRows(l.card_table_id)<=0)){e.next=10;break}return(0,n.toast)({color:"warning",content:(0,u.loadMultiLang)(a,"36300WC-000107")}),e.abrupt("return");case 10:if(a.cardTable.checkTableRequired(l.card_table_id)){e.next=13;break}return e.abrupt("return");case 13:if(c=!1,a.cardTable.getAllRows(l.card_table_id).forEach((function(e){var a=e.values.pk_cashbankacc.value;e.values.pk_bankacc.value||a||(c=!0)})),!c){e.next=19;break}return(0,n.toast)({color:"warning",content:(0,u.loadMultiLang)(a,"36300WC-000111")}),e.abrupt("return");case 19:if("add"==o||"edit"==o||"decide"==o||"copy"==o){e.next=21;break}return e.abrupt("return");case 21:if(f=(0,u.createSimpleBillData)(a,l.card_page_id,l.card_from_id,l.card_table_id),p=l.base_url,b=l.card_page_id,_={data:JSON.stringify(f),pageCode:b},m=this,"add"==o||"copy"==o){for(this.props.form.setFormItemsValue(l.card_from_id,{pk_cashpay_h:{value:null,display:null}}),v=this.props.cardTable.getNumberOfRows(l.card_table_id),y=0;y<v;y++)this.props.cardTable.setValByKeyAndIndex(l.card_table_id,y,"pk_cashpay_b",{value:null,display:null});f=(0,u.createSimpleBillData)(a,l.card_page_id,l.card_from_id,l.card_table_id),_={data:JSON.stringify(f),pageCode:b},p+="save.do",(0,n.ajax)({url:p,data:_,success:function(e){var t=e.success,o=e.data;if(t){var c=o.head,f=o.body;c&&(m.props.form.setAllFormValue(s({},l.card_from_id,c[l.card_from_id])),i=(0,d.showTBBMsg)(c,l.card_from_id)),f&&(m.props.beforeUpdatePage(),f[l.card_table_id]=m.props.cardTable.updateDataByRowId(l.card_table_id,f[l.card_table_id]),m.props.updatePage(l.card_from_id,l.card_table_id,null),f[l.card_table_id]&&(e.data.body=f[l.card_table_id]));var p=c[l.card_from_id].rows[0].values.pk_cashpay_h.value;if(g.billId=p,r(p,e.data,l.card_from_id,l.dataSource,e.data.head[l.card_from_id].rows[0].values),g.billno="",a.setUrlParam({status:"add",from:"card",interfaceJump:"card"}),g.pk_org=g.props.form.getFormItemsValue(l.card_from_id,"pk_org"),g.copyflag=!1,g.componentDidMount(),!i)return void(0,n.toast)({color:"success",content:(0,u.loadMultiLang)(g.props,"36300WC-000030")})}},error:function(e){(0,n.toast)({color:"warning",content:e.message})}})}else"edit"==o?(_={data:JSON.stringify(f),pageCode:b},p+="update.do",(0,n.ajax)({url:p,data:_,success:function(e){var r=e.success,o=e.data;if(r){var c=o.head,f=o.body;c&&(m.props.form.setAllFormValue(s({},l.card_from_id,c[l.card_from_id])),i=(0,d.showTBBMsg)(c,l.card_from_id)),f&&(m.props.beforeUpdatePage(),f[l.card_table_id]=m.props.cardTable.updateDataByRowId(l.card_table_id,f[l.card_table_id]),m.props.updatePage(l.card_from_id,l.card_table_id,null),f[l.card_table_id]&&(e.data.body=f[l.card_table_id]));var p=c[l.card_from_id].rows[0].values.pk_cashpay_h.value;if(g.billId=p,t("pk_cashpay_h",p,e.data,l.card_from_id,l.dataSource),g.copyflag=!1,g.billno="",a.setUrlParam({status:"add",from:"card",interfaceJump:"card"}),g.pk_org=g.props.form.getFormItemsValue(l.card_from_id,"pk_org"),g.componentDidMount(),!i)return void(0,n.toast)({color:"success",content:(0,u.loadMultiLang)(g.props,"36300WC-000028")})}},error:function(e){(0,n.toast)({color:"warning",content:e.message})}})):"decide"==o&&(_={data:JSON.stringify(f),pageCode:b},p+="update.do",(0,n.ajax)({url:p,data:_,success:function(e){var r=e.success,o=e.data;if(r){var c=o.head,f=o.body;c&&(m.props.form.setAllFormValue(s({},l.card_from_id,c[l.card_from_id])),i=(0,d.showTBBMsg)(c,l.card_from_id)),f&&m.props.cardTable.setTableData(l.card_table_id,f[l.card_table_id]);var p=c[l.card_from_id].rows[0].values.pk_cashpay_h.value;if(g.billId=p,t("pk_cashpay_h",p,e.data,l.card_from_id,l.dataSource),g.copyflag=!1,g.billno="",a.setUrlParam({status:"add",from:"card",interfaceJump:"card"}),g.pk_org=g.props.form.getFormItemsValue(l.card_from_id,"pk_org"),g.componentDidMount(),!i)return void(0,n.toast)({color:"success",content:(0,u.loadMultiLang)(g.props,"36300WC-000029")})}},error:function(e){(0,n.toast)({color:"warning",content:e.message})}}));case 27:case"end":return e.stop()}}),e,this)}))),function(e){return _.apply(this,arguments)}),g=(a.repaintView=function(e){var a=e.getUrlParam("status"),r="browse"===a?"browse":"edit";e.form.setFormStatus(l.card_from_id,r),e.cardTable.setStatus(l.card_table_id,r);var t=e.getUrlParam("isCopy"),o="add"==a&&!t;e.form.setFormItemsDisabled(l.card_from_id,{pk_org:!o}),(0,c.buttonVisible)(e)},function(e){var a={id:e.getUrlParam("id"),status:3},r=e.cardPagination.getNextCardPaginationId(a);n.cardCache.deleteCacheById("pk_cashpay_h",a,l.dataSource),r?(e.cardPagination.setCardPaginationId(a),c.pageInfoClick.call(this,e,r)):e.pushTo("/list",{pagecode:l.list_page_id})}),h=function(e){var a=e.form.getFormItemsValue(l.card_from_id,"pk_srccmpbill"),r=e.form.getFormItemsValue(l.card_from_id,"srccmpbilltype").value;if(a&&a.value){[].push(a.value);var t={status:"browse",id:a.value};(0,i.linkApp)(e,r,t)}else(0,n.toast)({color:"warning",content:(0,u.loadMultiLang)(this.props,"36300WC-000035")})},k=function(e,a){var r=this,t=e.form.getFormItemsValue(l.card_from_id,"pk_cashpay_h").value;if(t){e.form.getFormItemsValue(l.card_from_id,"recmodul").value,e.form.getFormItemsValue(l.card_from_id,"billstatus").value;var o=e.form.getFormItemsValue(l.card_from_id,"ts").value,i=s({},t,o);(0,n.ajax)({url:l.base_url+"linkdown.do",data:{pkMapTs:i},success:function(a){var o=a.data;if(o&&0!=o.length&&o&&o.length>0){var n=!0,l=!1,i=void 0;try{for(var d,c=o[Symbol.iterator]();!(n=(d=c.next()).done);n=!0){var u=d.value,s=u.type,f=u.pks,p=u.appCode,b=u.linkPageCode;if(s)if("NORMAL"==s){var _={scene:"linksce",status:"browse",appcode:p,pagecode:b};1==f.length?_.id=f[0]:f.length>1&&(_.pk_src=t),e.openTo(null,_)}else if("BILL_REVIEW"==s){r.setState({showBillReview:!0,pk:t});break}}}catch(e){l=!0,i=e}finally{try{!n&&c.return&&c.return()}finally{if(l)throw i}}}}})}},C=function(e){var a=this,r=e.form.getFormItemsValue(l.card_from_id,"billstatus");if(r&&3!=r.value)(0,n.toast)({color:"warning",content:(0,u.loadMultiLang)(this.props,"36300WC-000086")});else{var t=e.form.getFormItemsValue(l.card_from_id,"pk_cashpay_h").value;(0,n.ajax)({url:"/nccloud/fts/cashpay/cashpayqueryreceipt.do",data:{pk:t},success:function(r){if(r.data>1)e.openTo(null,{appcode:"36300WCRF",pagecode:"36300WCRF_L01",pk_src:t,status:"browse",scene:"pk_src"});else{if(1!=r.data)return void(0,n.toast)({color:"warning",content:(0,u.loadMultiLang)(a.props,"36300WC-000110")});e.openTo(null,{appcode:"36300WCRF",pagecode:"36300WCRF_C01",pk_src:t,status:"browse",scene:"pk_src"})}}})}},w=function(e){this.qryData(),(0,n.toast)({color:"success",content:(0,u.loadMultiLang)(this.props,"36300WC-000106")})},P=function(e){var a=e.cardTable.getCheckedRows(l.card_table_id);if(null==a||0==a.length||a.length>1)(0,n.toast)({color:"warning",content:(0,u.loadMultiLang)(this.props,"36300WC-000043")});else{var r=a[0]&&a[0].data&&a[0].data.values&&a[0].data.values.pk_accid&&a[0].data.values.pk_accid.value;r?this.setState({showAccModal:!this.state.showAccModal,pkInnAccount:r}):(0,n.toast)({color:"warning",content:(0,u.loadMultiLang)(this.props,"36300WC-000044")})}},T=function(e){var a=[],r=e.cardTable.getAllRows(l.card_table_id),t=e.cardTable.getCheckedRows(l.card_table_id),o=void 0,i=void 0;if(r.length>1){if(1!=t.length)return void(0,n.toast)({color:"warning",content:(0,u.loadMultiLang)(this.props,"36300WC-000045")});t.forEach((function(e){e.data.values.pk_cashpay_b.value,e.data.values.pk_bankacc_r&&e.data.values.pk_bankacc_r.value&&(i=e.data.values.pk_bankacc_r.value,o=e.data.values.pk_org_r.value);var r={pk_org:o,pk_account:i};a.push(r)}))}else{r[0].values.pk_cashpay_b.value,r[0].values.pk_bankacc_r&&r[0].values.pk_bankacc_r.value&&(i=r[0].values.pk_bankacc_r.value),r[0].values.pk_org_r&&r[0].values.pk_org_r.value&&(o=r[0].values.pk_org_r.value);var d={pk_org:o,pk_account:i};a.push(d)}this.setState({showOriginalData:a,showOriginal:!0})},S=function(e){var a=[],r=e.cardTable.getAllRows(l.card_table_id),t=e.cardTable.getCheckedRows(l.card_table_id),o=void 0,i=void 0;if(e.form.getFormItemsValue(l.card_from_id,"pk_org")&&e.form.getFormItemsValue(l.card_from_id,"pk_org").value&&(o=e.form.getFormItemsValue(l.card_from_id,"pk_org").value),r.length>1){if(1!=t.length)return void(0,n.toast)({color:"warning",content:(0,u.loadMultiLang)(this.props,"36300WC-000045")});t.forEach((function(e){bankacc_prestkey=e.data.values.pk_cashpay_b.value,e.data.values.pk_bankacc_p&&e.data.values.pk_bankacc_p.value&&(i=e.data.values.pk_bankacc_p.value);var r={pk_org:o,pk_account:i};a.push(r)}))}else{bankacc_prestkey=r[0].values.pk_cashpay_b.value,r[0].values.pk_bankacc_p&&r[0].values.pk_bankacc_p.value&&(i=r[0].values.pk_bankacc_p.value);var d={pk_org:o,pk_account:i};a.push(d)}this.setState({showOriginalData:a,showOriginal:!0})},I=function(e){var a=e.form.getFormItemsValue(l.card_from_id,"pk_cashpay_h");e.form.getFormItemsValue(l.card_from_id,"pk_billtype");this.billId=a&&a.value,this.setState({approveshow:!this.state.show})},O=function(e,a){var r=a.workflow;r&&"approveflow"==r||"workflow"==r?this.setState({assignData:a,assignShow:a}):(this.status="browse",this.toggleShow())},B=function(e){if("edit"==e.getUrlParam("status"))e.form.cancel(l.card_from_id),e.setUrlParam({status:"browse",id:e.getUrlParam("id"),interfaceJump:"card",isCopy:!1}),this.componentDidMount();else if("add"==e.getUrlParam("status")){var a=e.getUrlParam("id");a||(a=this.billId),e.setUrlParam({id:a,status:"browse",interfaceJump:"card",isCopy:!1}),this.componentDidMount()}else if("copy"==e.getUrlParam("status")){var r=e.getUrlParam("id");r||(r=this.billId),e.setUrlParam({id:r,status:"browse",interfaceJump:"card",isCopy:!1}),this.componentDidMount()}else"decide"==e.getUrlParam("status")?(e.setUrlParam({status:"browse",id:e.getUrlParam("id"),interfaceJump:"card"}),this.componentDidMount()):e.getUrlParam("status")&&"browse"!=this.props.getUrlParam("status")||(e.setUrlParam({status:"browse",id:""}),this.componentDidMount())},R=(a.backConfirm=function(e,a){var r=this;a?(0,d.cardOperator)(e,l.card_page_id,l.card_from_id,p,"pk_cashpay_h",l.base_url+"cashpayback.do",(0,u.loadMultiLang)(this.props,"36300WC-000047"),l.dataSource,(function(){g.call(r,e),r.setState({showReBack:!1})}),null,{backResone:a}):(0,n.toast)({color:"warning",content:(0,u.loadMultiLang)(this.props,"36300WC-000046")})},function(e){var a=e.cardTable.getCheckedRows(l.card_table_id),r=void 0;if(e.form.getFormItemsValue(l.card_from_id,"pk_org")&&e.form.getFormItemsValue(l.card_from_id,"pk_org").value&&(r=e.form.getFormItemsValue(l.card_from_id,"pk_org").value),1==a.length)if(a[0].data.values.pk_cashpay_b.value,a[0].data.values.pk_cashbankacc&&a[0].data.values.pk_cashbankacc.value){var t=[{pk_org:r,pk_cashaccount:a[0].data.values.pk_cashbankacc.value}];this.setState({showOriginalData:t,showOriginal:!0})}else(0,n.toast)({color:"warning",content:(0,u.loadMultiLang)(this.props,"36300WC-000108")});else(0,n.toast)({color:"warning",content:(0,u.loadMultiLang)(this.props,"36300WC-000045")})}),x=a.afterEventCurrtype=function(e,a,r,t,o,i,d,c,u,f,p){var b=e.createHeadAfterEventData(l.card_page_id,l.card_from_id,[l.card_table_id],l.card_from_id,r,o),_={uiState:f,pk:p},m={},v=e.form.getFormItemsValue(l.card_from_id,"pk_currtype");v&&v.value?(0,n.ajax)({url:"/nccloud/fts/cashpay/event.do",data:{eventPosition:"head",eventType:"card",eventData:JSON.stringify(b),extParam:_},async:!1,success:function(a){if(a.success&&a.data){a.success;var r=a.data,t=r.card,o=r.extParam,i=(r.headItemProps,r.bodyItemProps,r.columnPrecisions),d=t.head,c=t.bodys;e.form.setAllFormValue(s({},l.card_from_id,d[l.card_from_id])),e.cardTable.setTableData(l.card_table_id,c[l.card_table_id]);for(var f=e.cardTable.getNumberOfRows(l.card_table_id),p=0;p<f;p++){if("copy"==e.getUrlParam("status")||u||(e.cardTable.setValByKeyAndIndex(l.card_table_id,p,"pk_accid",{value:"",display:""}),e.cardTable.setValByKeyAndIndex(l.card_table_id,p,"pk_cashbankacc",{value:"",display:""}),e.cardTable.setValByKeyAndIndex(l.card_table_id,p,"pk_bankacc",{value:"",display:""})),o.hasOwnProperty("bodyOlcRateEditable")){var b="Y"!=o.bodyOlcRateEditable;e.cardTable.setColEditableByKey(l.card_table_id,["olcrate"],b)}if(o.hasOwnProperty("bodyGlcRateEditable")){var _="Y"!=o.bodyGlcRateEditable;e.cardTable.setColEditableByKey(l.card_table_id,["glcrate"],_)}if(o.hasOwnProperty("bodyGllcRateEditable")){var v="Y"!=o.bodyGllcRateEditable;e.cardTable.setColEditableByKey(l.card_table_id,["gllcrate"],v)}i&&e.cardTable.setColScale(i),m.olcrate=o.olcrate,m.glcrate=o.glcrate,m.gllcrate=o.gllcrate,n.cardCache.setDefData("rate",l.dataSource,m)}}},error:function(a){e.form.setFormItemsValue(l.card_from_id,{pk_currtype:{value:null,display:null}}),(0,n.toast)({color:"warning",content:a.message})}}):e.cardTable.setColsValue(l.card_table_id,[{key:"olcrate",data:{value:null,display:null}},{key:"glcrate",data:{value:null,display:null}},{key:"gllcrate",data:{value:null,display:null}}])},A=function(e){var a=[],r=e.cardTable.getAllRows(l.card_table_id),t=e.cardTable.getCheckedRows(l.card_table_id),o=void 0,i=void 0;if(e.form.getFormItemsValue(l.card_from_id,"pk_org")&&e.form.getFormItemsValue(l.card_from_id,"pk_org").value&&(o=e.form.getFormItemsValue(l.card_from_id,"pk_org").value),r.length>1){if(1!=t.length)return void(0,n.toast)({color:"warning",content:(0,u.loadMultiLang)(this.props,"36300WC-000045")});t.forEach((function(e){e.data.values.pk_cashpay_b.value,e.data.values.pk_bankacc&&e.data.values.pk_bankacc.value&&(i=e.data.values.pk_bankacc.value);var r={pk_org:o,pk_account:i};a.push(r)}))}else{r[0].values.pk_cashpay_b.value,r[0].values.pk_bankacc&&r[0].values.pk_bankacc.value&&(i=r[0].values.pk_bankacc.value);var d={pk_org:o,pk_account:i};a.push(d)}this.setState({showOriginalData:a,showOriginal:!0})};a.default=o},function(e,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.bodyButtonClick=void 0;var t=r(0),o=r(2),n=(r(48),r(10),r(6)),l=r(1);r(25),a.bodyButtonClick=function(e,a,r,i,d,c){var u=this.props.form.getFormItemsValue(o.card_from_id,"pk_org").value;switch(a){case"Addline":if(!u)return void(0,t.toast)({color:"warning",content:(0,l.loadMultiLang)(this.props,"36300WC-000003")});var s=e.form.getFormItemsValue(o.card_from_id,"pk_org").value,f=e.form.getFormItemsValue(o.card_from_id,"pk_group").value;d=0;var p=e.cardTable.getCheckedRows(o.card_table_id);d=p.length>0?p[p.length-1].index:e.cardTable.getNumberOfRows(o.card_table_id)-1,(0,n.InsertLine)(e,o.card_table_id,d),e.cardTable.setValByKeyAndIndex(o.card_table_id,d+1,"pk_org",{value:s,display:""}),e.cardTable.setValByKeyAndIndex(o.card_table_id,d+1,"pk_group",{value:f,display:""});var b=t.cardCache.getDefData("rate",o.dataSource);if(b){var _=b.olcrate,m=b.glcrate,v=b.gllcrate;e.cardTable.setValByKeyAndIndex(o.card_table_id,d+1,"olcrate",{value:_}),e.cardTable.setValByKeyAndIndex(o.card_table_id,d+1,"glcrate",{value:m}),e.cardTable.setValByKeyAndIndex(o.card_table_id,d+1,"gllcrate",{value:v})}break;case"opendown":case"closedown":e.cardTable.toggleRowView(o.card_table_id,i);break;case"openright":e.cardTable.openModel(o.card_table_id,"edit",i,d);break;case"Deleteline":(0,n.BatchDelLine)(e,o.card_table_id),e.button.setButtonDisabled(["Deleteline","Copyline"],!0);break;case"Copyline":var y=e.cardTable.getCheckedRows(o.card_table_id);if(null==y||0==y.length)return(0,t.toast)({color:"warning",content:(0,l.loadMultiLang)(this.props,"36300WC-000004")}),!1;this.copyflag=!0,this.toggleShow();break;case"Copyend":d=this.props.cardTable.getNumberOfRows(o.card_table_id),(0,n.BatchCopyForCash)(e,o.card_table_id,d,"pk_cashpay_b"),y=e.cardTable.getCheckedRows(o.card_table_id);for(var g=0;g<y.length;g++)e.cardTable.setValByKeyAndIndex(o.card_table_id,d+g,"ts",{value:null,display:null}),e.cardTable.setValByKeyAndIndex(o.card_table_id,d+g,"pk_cashpay_b",{value:null});this.copyflag=!1,this.toggleShow();break;case"Copythis":n.BatchCopyForCash.call(this,e,o.card_table_id,d,"pk_cashpay_b"),y=e.cardTable.getCheckedRows(o.card_table_id);for(var h=0;h<y.length;h++)e.cardTable.setValByKeyAndIndex(o.card_table_id,d+1+h,"ts",{value:null,display:null}),e.cardTable.setValByKeyAndIndex(o.card_table_id,d+1+h,"pk_cashpay_b",{value:null,display:null});this.copyflag=!1,this.toggleShow();break;case"CancelCopy":this.copyflag=!1,this.toggleShow();break;case"open":(0,n.Open)(e,o.card_table_id,d,i,"edit");break;case"copyrow":(0,n.CopyLine)(e,o.card_table_id,d);break;case"insertrow":(0,n.InsertLine)(e,o.card_table_id,d);break;case"deleterow":e.cardTable.delRowsByIndex(o.card_table_id,d);e.cardTable.getAllRows(o.card_table_id)}}},,,,,,,,function(e,a,r){"use strict";(function(e){var t,o,n,l,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};window,l=function(e){return function(e){var a={};function r(t){if(a[t])return a[t].exports;var o=a[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=a,r.d=function(e,a,t){r.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:t})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,a){if(1&a&&(e=r(e)),8&a)return e;if(4&a&&"object"==(void 0===e?"undefined":i(e))&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var o in e)r.d(t,o,function(a){return e[a]}.bind(null,o));return t},r.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(a,"a",a),a},r.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},r.p="../../../../",r(r.s=468)}({0:function(a,r){a.exports=e},1:function(e,a,r){Object.defineProperty(a,"__esModule",{value:!0}),a.conf=void 0;var t=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e};a.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return React.createElement(o,t({},n,e))};var o=r(0).high.Refer,n=a.conf={multiLang:{domainName:"uap",currentLocale:"zh-CN",moduleId:"uapRefer"},queryTreeUrl:"/nccloud/riart/ref/groupRefTreeAction.do",refType:"tree",placeholder:"1880000025-000061",refName:"1880000025-000061",rootNode:{refname:"1880000025-000061",refpk:"root"}}},3:function(e,a,r){Object.defineProperty(a,"__esModule",{value:!0}),a.conf=void 0;var t=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e};a.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return React.createElement(l,t({},i,e))};var o=r(0),n=r(1),l=o.high.Refer;n.conf.fieldid="group";var i=a.conf={multiLang:{domainName:"uapbd",currentLocale:"zh-CN",moduleId:"refer_uapbd"},refType:"tree",refName:"refer-000201",refCode:"uapbd.refer.org.BusinessUnitTreeRef",rootNode:{refname:"refer-000201",refpk:"root"},placeholder:"refer-000201",queryTreeUrl:"/nccloud/uapbd/org/BusinessUnitTreeRef.do",treeConfig:{name:["refer-000002","refer-000003"],code:["refcode","refname"]},isMultiSelectedEnabled:!1,unitProps:n.conf,isShowUnit:!1}},468:function(e,a,r){Object.defineProperty(a,"__esModule",{value:!0});var t=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},o="function"==typeof Symbol&&"symbol"==i(Symbol.iterator)?function(e){return void 0===e?"undefined":i(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":i(e)};a.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a={multiLang:{domainName:"uapbd",currentLocale:"zh-CN",moduleId:"refer_uapbd"},refType:"gridTree",refName:"refer-000369",placeholder:"refer-000369",rootNode:{refname:"refer-000216",refpk:"root"},refCode:"uapbd.psninfo.PsndocTreeGridRef",queryTreeUrl:"/nccloud/uapbd/ref/PsndocTreeRef.do",queryGridUrl:"/nccloud/uapbd/ref/PsndocGridRef.do",columnConfig:[{name:["refer-000370","refer-000371","refer-000216"],code:["refcode","refname","deptname"],fullTxtCode:{refcode:!0,refname:!0}}],treeConfig:{name:["refer-000002","refer-000003"],code:["refcode","refname"]},isMultiSelectedEnabled:!1,unitProps:l.conf,isShowUsual:!0,isShowUnit:!0,rowKey:"pk_psnjob"};return React.createElement(f,t({},a,e))};var n=r(0),l=r(3);l.conf.fieldid="orgunit";var d=n.high.Refer,c=(d.PopRefer,d.MultiLangWrapper),u=d.ReferWithUnit,s=(n.high.Refer,n.base.NCCheckbox),f=(n.base.NCCollapse,n.base.NCButton,n.base.NCTable,c(function(e){function a(e){!function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,a);var r=function(e,a){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=(void 0===a?"undefined":i(a))&&"function"!=typeof a?e:a}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return r.getParam=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=r.props,t=a.queryCondition,n=a.pageSize,l=a.refType,i=e.keyword,d=void 0===i?"":i,c=e.pid,u=void 0===c?"":c,s=e.pageInfo,f=void 0===s?{}:s;f={pageSize:f.pageSize||n,pageIndex:f.pageIndex||("tree"===l?-1:0)};var p={pid:u,keyword:d,queryCondition:t?"function"==typeof t?t(r.props):"object"===(void 0===t?"undefined":o(t))?t:{}:{},pageInfo:f,refType:l};return p.queryCondition.isShowDimission=r.state.isShowDimission?"Y":"N",p},r.renderPopoverLeftHeader=function(){return r.props.isShowDimission&&React.createElement("div",{style:{"margin-bottom":"5px","margin-left":"10px"}},React.createElement(s,{checked:r.state.isShowDimission,onChange:r.onChangeFirst.bind(r)},r.props.multiLang["refer-000570"]?r.props.multiLang["refer-000570"]:"显示离职人员"))},r.onChangeFirst=function(e){r.setState({isShowDimission:e,isShowDisabledData:e,isDisabledDataDisabled:e},(function(){var e=r.__getParam({pid:r.state.selectedKeys[0],pageInfo:{pageSize:r.props.pageSize,pageIndex:0}});null!==e.pid&&void 0!==e.pid&&""!==e.pid&&r.loadTableData(e).then((function(e){r.setTableData("tableData",r.state.currentLevel,e)}))}))},r.state=t({},r.state,{unit:e.defaultUnitValue||{},isShowDimission:!1}),r}return function(e,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+(void 0===a?"undefined":i(a)));e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(e,a):e.__proto__=a)}(a,e),a}(u)))}})},"object"==i(a)&&"object"==i(e)?e.exports=l(r(0)):(o=[r(0)],void 0===(n="function"==typeof(t=l)?t.apply(a,o):t)||(e.exports=n))}).call(this,r(3)(e))},function(e,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function e(a,r,c,u,s,f,p,b,_){var m=this;console.log(a,r,c,u,s,f,p,b);var v=a.getUrlParam("status"),y=void 0,g=void 0,h=void 0,k=void 0;if("pk_org"===c){var C=a.createHeadAfterEventData("36300WC_C01",o.card_from_id,[o.card_table_id],o.card_from_id,c,u);g={uiState:v},y=C.newvalue?C.newvalue.value:"",h=C.oldvalue?C.oldvalue.value:"",y!=h&&(h?(this.setState({oldorg:h,oldorgdisplay:C.oldvalue.display}),(0,t.promptBox)({color:"warning",title:(0,i.loadMultiLang)(this.props,"36300WC-000061"),content:(0,i.loadMultiLang)(this.props,"36300WC-000062"),beSureBtnClick:this.changeOrgConfirm.bind(this,k),cancelBtnClick:this.cancelBtnClick.bind(this)})):null!=y?(console.log(C),this.setState({oldorgdisplay:C.newvalue.display}),a.form.setFormItemsValue(o.card_from_id,{pk_org:{value:C.newvalue.value,display:C.newvalue.display}}),C=a.createHeadAfterEventData("36300WC_C01",o.card_from_id,[o.card_table_id],o.card_from_id,c,u),(0,t.ajax)({url:"/nccloud/fts/cashpay/event.do",data:{eventPosition:"head",eventType:"card",eventData:JSON.stringify(C),extParam:g},async:!1,success:function(r){if(r.success){r.success;var t=r.data,n=t.card,i=(t.extParam,t.headItemProps,t.bodyItemProps,n.head),c=(n.body,d({},o.card_from_id,i[o.card_from_id]));a.form.setAllFormValue(c),a.resMetaAfterPkorgEdit(),a.cardTable.updateDataByIndexs(o.card_table_id,{rows:[]});m.props.meta.getMeta();var u=a.form.getFormItemsValue(o.card_from_id,"pk_org").value,s=a.form.getFormItemsValue(o.card_from_id,"pk_group").value,f=0,p=a.cardTable.getCheckedRows(o.card_table_id);f=p.length>0?p[p.length-1].index:a.cardTable.getNumberOfRows(o.card_table_id)-1,(0,l.InsertLine)(a,o.card_table_id,f),a.cardTable.setValByKeyAndIndex(o.card_table_id,0,"rowno",{value:10,display:""}),f=a.cardTable.getNumberOfRows(o.card_table_id)-1,a.cardTable.setValByKeyAndIndex(o.card_table_id,f+1,"pk_org",{value:u,display:""}),a.cardTable.setValByKeyAndIndex(o.card_table_id,f+1,"pk_group",{value:s,display:""}),a.button.setButtonDisabled(["Addline"],!1),e(a,o.card_from_id,"pk_currtype")}},error:function(e){a.form.EmptyAllFormValue(o.card_from_id),a.cardTable.updateDataByIndexs(o.card_table_id,{rows:[]}),(0,t.toast)({color:"warning",content:e.message})}})):(a.form.EmptyAllFormValue(o.card_from_id),a.cardTable.updateDataByIndexs(o.card_table_id,{rows:[]}),a.initMetaByPkorg()))}if("pk_bankacc_r"==c){var w=(0,i.buildLightBodyAfterEditData)(a,o.card_page_id,o.card_from_id,o.card_table_id,c,s);y=s[0].newvalue?s[0].newvalue.value:"",h=s[0].oldvalue?s[0].oldvalue.value:"",y!=h&&null!=a.cardTable.getValByKeyAndIndex(o.card_table_id,f,"pk_bankacc_p").value&&(0,t.ajax)({url:"/nccloud/fts/cashpay/event.do",data:{eventPosition:"lightBody",eventType:"card",eventData:JSON.stringify(w)},async:!1,success:function(e){if(e.success){e.success;var r=e.data,n=r.grid;r.extParam,r.headItemProps,r.bodyItem;a.cardTable.updateDataByRowId(o.card_table_id,n[o.card_table_id]),r.extParam.warning&&(a.cardTable.setValByKeyAndIndex(o.card_table_id,f,"pk_bankacc_r",{value:null,display:null}),a.cardTable.setValByKeyAndIndex(o.card_table_id,f,"bankaccname_r",{value:null,display:null}),(0,t.toast)({color:"warning",content:e.data.extParam.warning}))}}})}if("isnetpay"==c){var P=(0,i.buildLightBodyAfterEditData)(a,o.card_page_id,o.card_from_id,o.card_table_id,c,s);y=P.newvalue?P.newvalue.value:"",h=P.oldvalue?P.oldvalue.value:"",y==h&&(console.log(P),null!=a.cardTable.getValByKeyAndIndex("table_cashpay_01",f,"isnetpay").value&&(0,t.ajax)({url:"/nccloud/fts/cashpay/event.do",data:{eventPosition:"lightBody",eventType:"card",eventData:JSON.stringify(P)},async:!1,success:function(e){if(e.success){e.success;var r=e.data,t=r.grid;r.extParam,r.headItemProps,r.bodyItem;a.cardTable.updateDataByRowId(o.card_table_id,t[o.card_table_id]),a.cardTable.getValByKeyAndIndex("table_cashpay_01",f,"isnetpay").value?(a.cardTable.setEditableByIndex(o.card_table_id,f,"paytype",!0),a.cardTable.setEditableByIndex(o.card_table_id,f,"issamebank",!0),a.cardTable.setEditableByIndex(o.card_table_id,f,"issamecity",!0)):(a.cardTable.setEditableByIndex(o.card_table_id,f,"paytype",!1),a.cardTable.setEditableByIndex(o.card_table_id,f,"issamebank",!1),a.cardTable.setEditableByIndex(o.card_table_id,f,"issamecity",!1)),a.button.setButtonDisabled(["addline"],!1)}}}))}if("busitype"==c){k=a.createHeadAfterEventData(o.card_page_id,o.card_from_id,[o.card_table_id],o.card_from_id,c,s),g={uiState:v},y=k.newvalue?k.newvalue.value:"",h=k.oldvalue?k.oldvalue.value:"",console.log(k);var T=u;T||(T=a.form.getFormItemsValue(o.card_from_id,"busitype").value),null!=T&&(0,t.ajax)({url:"/nccloud/fts/cashpay/event.do",data:{eventPosition:"head",eventType:"card",eventData:JSON.stringify(k),extParam:g},async:!1,success:function(e){if(e.success&&e.data){e.success;var r=e.data,t=r.card,l=(r.extParam,r.headItemProps,r.bodyItemProps),i=t.head,c=t.bodys;if(a.form.setAllFormValue(d({},o.card_from_id,i[o.card_from_id])),l&&(0,n.setBodyItemProp)(a,o.card_table_id,l,c[0]),"2"!=T){var u=a.meta.getMeta();u[o.card_table_id].items.find((function(e){return"pk_org_r"==e.attrcode})).refCode="../../../../../uapbd/refer/org/FundManaSystemMemberByFinancePKTreeRef",u[o.card_table_formId].items.find((function(e){return"pk_org_r"==e.attrcode})).refCode="../../../../../uapbd/refer/org/FundManaSystemMemberByFinancePKTreeRef"}for(var s=a.cardTable.getNumberOfRows(o.card_table_id),f=0;f<s;f++)a.cardTable.setValByKeyAndIndex(o.card_table_id,f,"pk_org_r",{value:null,display:null}),a.cardTable.setValByKeyAndIndex(o.card_table_id,f,"pk_accid_r",{value:null,display:null})}},error:function(e){a.form.setFormItemsValue(o.card_from_id,{busitype:{value:null,display:null}}),(0,t.toast)({color:"warning",content:e.message})}})}if("pk_currtype"==c){k=a.createHeadAfterEventData(o.card_page_id,o.card_from_id,[o.card_table_id],o.card_from_id,c,s),g={uiState:v,pk:a.getUrlParam("id")},y=k.newvalue?k.newvalue.value:"",h=k.oldvalue?k.oldvalue.value:"";var S={},I=a.form.getFormItemsValue(o.card_from_id,"pk_currtype");I&&I.value?(0,t.ajax)({url:"/nccloud/fts/cashpay/event.do",data:{eventPosition:"head",eventType:"card",eventData:JSON.stringify(k),extParam:g},async:!1,success:function(e){if(e.success&&e.data){e.success;var r=e.data,n=r.card,l=r.extParam,i=(r.headItemProps,r.bodyItemProps,r.columnPrecisions),c=n.head,u=n.bodys;a.form.setAllFormValue(d({},o.card_from_id,c[o.card_from_id])),a.cardTable.setTableData(o.card_table_id,u[o.card_table_id]);for(var s=a.cardTable.getNumberOfRows(o.card_table_id),f=0;f<s;f++){if(a.cardTable.setValByKeyAndIndex(o.card_table_id,f,"pk_accid",{value:"",display:""}),a.cardTable.setValByKeyAndIndex(o.card_table_id,f,"pk_cashbankacc",{value:"",display:""}),a.cardTable.setValByKeyAndIndex(o.card_table_id,f,"pk_bankacc",{value:"",display:""}),l.hasOwnProperty("bodyOlcRateEditable")){var p="Y"!=l.bodyOlcRateEditable;a.cardTable.setColEditableByKey(o.card_table_id,["olcrate"],p)}if(l.hasOwnProperty("bodyGlcRateEditable")){var b="Y"!=l.bodyGlcRateEditable;a.cardTable.setColEditableByKey(o.card_table_id,["glcrate"],b)}if(l.hasOwnProperty("bodyGllcRateEditable")){var _="Y"!=l.bodyGllcRateEditable;a.cardTable.setColEditableByKey(o.card_table_id,["gllcrate"],_)}i&&a.cardTable.setColScale(i),S.olcrate=l.olcrate,S.glcrate=l.glcrate,S.gllcrate=l.gllcrate,t.cardCache.setDefData("rate",o.dataSource,S)}}},error:function(e){a.form.setFormItemsValue(o.card_from_id,{pk_currtype:{value:null,display:null}}),(0,t.toast)({color:"warning",content:e.message})}}):a.cardTable.setColsValue(o.card_table_id,[{key:"olcrate",data:{value:null,display:null}},{key:"glcrate",data:{value:null,display:null}},{key:"gllcrate",data:{value:null,display:null}}])}if("pk_getfinanceorg"==c){var O=a.createBodyAfterEventData(o.card_page_id,o.card_from_id,[o.card_table_id],o.card_table_id,c,s),B=a.cardTable.getValByKeyAndIndex("table_cashpay_01",f,"pk_getfinanceorg");y=O.newvalue?O.newvalue.value:"",h=O.oldvalue?O.oldvalue.value:"",y==h&&B&&null!=B.value&&""!=B.value&&(0,t.ajax)({url:"/nccloud/fts/cashpay/event.do",data:{eventPosition:"body",eventType:"card",eventData:JSON.stringify(O)},async:!1,success:function(e){if(e.success){e.success;var r=e.data,t=r.card,n=(r.extParam,r.headItemProps,r.bodyItemProps,t.head,t.bodys);a.cardTable.updateDataByRowId(o.card_table_id,n[o.card_table_id]),a.cardTable.setValByKeyAndIndex(o.card_table_id,f,"pk_accid",{value:"",display:""})}}})}if("isreversebustype"==c){if(k=a.createHeadAfterEventData(o.card_page_id,o.card_from_id,[o.card_table_id],o.card_from_id,c,s),y=k.newvalue?k.newvalue.value:"",h=k.oldvalue?k.oldvalue.value:"",y==h)console.log(k),null!=k.newvalue.value&&(0,t.ajax)({url:"/nccloud/fts/cashpay/event.do",data:{eventPosition:"head",eventType:"card",eventData:JSON.stringify(k)},async:!1,success:function(e){if(e.success){var r=e.data,t=r.card,l=(r.extParam,r.headItemProps,r.bodyItemProps),i=t.head,c=t.bodys;a.form.setAllFormValue(d({},o.card_from_id,i[o.card_from_id])),a.cardTable.setTableData(o.card_table_id,c[o.card_table_id]),(0,n.setBodyItemProp)(a,o.card_table_id,l,c[0]),a.button.setButtonDisabled(["addline"],!1)}}})}if("amount"==c){var R=a.createBodyAfterEventData(o.card_page_id,o.card_from_id,[o.card_table_id],o.card_table_id,c,s);if(y=s[0].newvalue?s[0].newvalue.value:"",h=s[0].oldvalue?s[0].oldvalue.value:"",y!=h){var x=a.cardTable.getValByKeyAndIndex("table_cashpay_01",f,"amount").value,A=a.form.getFormItemsValue("form_cashpay_01","isreversebustype").value;if(x&&A){if(x>0)return(0,t.toast)({color:"warning",content:(0,i.loadMultiLang)(this.props,"36300WC-000001")}),void a.cardTable.setValByKeyAndIndex(o.card_table_id,f,c,{value:null,display:null})}else if(x<0)return(0,t.toast)({color:"warning",content:(0,i.loadMultiLang)(this.props,"36300WC-000002")}),void a.cardTable.setValByKeyAndIndex(o.card_table_id,f,c,{value:null,display:null});x&&(0,t.ajax)({url:"/nccloud/fts/cashpay/event.do",data:{eventPosition:"body",eventType:"card",eventData:JSON.stringify(R)},async:!1,success:function(e){if(e.success){e.success;var r=e.data,t=r.card,l=(r.extParam,r.headItemProps,r.bodyItemProps),i=(t.head,t.bodys);a.cardTable.updateDataByRowId(o.card_table_id,i[o.card_table_id]),(0,n.setBodyItemProp)(a,o.card_table_id,l,i)}}})}}if("olcrate"===c){var F=a.createBodyAfterEventData(o.card_page_id,o.card_from_id,[o.card_table_id],o.card_table_id,c,s);a.cardTable.getValByKeyAndIndex("table_cashpay_01",f,"olcrate").value&&(0,t.ajax)({url:"/nccloud/fts/cashpay/event.do",data:{eventPosition:"body",eventType:"card",eventData:JSON.stringify(F)},async:!1,success:function(e){if(e.success){e.success;var r=e.data,t=r.card,l=(r.extParam,r.headItemProps,r.bodyItemProps),i=(t.head,t.bodys);a.cardTable.updateDataByRowId(o.card_table_id,i[o.card_table_id]),(0,n.setBodyItemProp)(a,o.card_table_id,l,i)}}})}if("glcrate"==c){var M=a.createBodyAfterEventData(o.card_page_id,o.card_from_id,[o.card_table_id],o.card_table_id,c,s);a.cardTable.getValByKeyAndIndex("table_cashpay_01",f,"glcrate").value&&(0,t.ajax)({url:"/nccloud/fts/cashpay/event.do",data:{eventPosition:"body",eventType:"card",eventData:JSON.stringify(M)},async:!1,success:function(e){if(e.success){e.success;var r=e.data,t=r.card,l=(r.extParam,r.headItemProps,r.bodyItemProps),i=(t.head,t.bodys);a.cardTable.updateDataByRowId(o.card_table_id,i[o.card_table_id]),(0,n.setBodyItemProp)(a,o.card_table_id,l,i)}}})}if("gllcrate"==c){var D=a.createBodyAfterEventData(o.card_page_id,o.card_from_id,[o.card_table_id],o.card_table_id,c,s);a.cardTable.getValByKeyAndIndex("table_cashpay_01",f,"gllcrate").value&&(0,t.ajax)({url:"/nccloud/fts/cashpay/event.do",data:{eventPosition:"body",eventType:"card",eventData:JSON.stringify(D)},async:!1,success:function(e){if(e.success){e.success;var r=e.data,t=r.card,l=(r.extParam,r.headItemProps,r.bodyItemProps),i=(t.head,t.bodys);a.cardTable.updateDataByRowId(o.card_table_id,i[o.card_table_id]),(0,n.setBodyItemProp)(a,o.card_table_id,l,i)}}})}if("cmaterialvid"===c){var V=u;if(console.log(V),V&&V.length>1){a.cardTable.setValByKeyAndIndex(r,f,c,{value:V[0].refpk,display:V[0].refname});for(var L=1;L<V.length;L++){a.cardTable.addRow(r);var N=a.cardTable.getNumberOfRows(r);a.cardTable.setValByKeyAndIndex(r,N-1,c,{value:V[L].refpk,display:V[L].refname})}}}};var t=r(0),o=r(2),n=r(11),l=r(6),i=r(1);function d(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}},function(e,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e,a){var r=this;if(a){console.log(a);var l={pk:a,pageid:o.card_page_id,pageCode:o.card_page_id},i=t.cardCache.getCacheById,d=t.cardCache.updateCache;e.setUrlParam(a);var c=i(a,o.dataSource);c?(this.billno=c.head[o.card_from_id].rows[0].values.vbillno.value,this.props.form.setAllFormValue(n({},o.card_from_id,c.head[o.card_from_id])),this.props.cardTable.setTableData(o.card_table_id,c.body[o.card_table_id]),e.setUrlParam({status:"browse",id:a}),this.toggleShow()):(0,t.ajax)({url:"/nccloud/fts/cashpay/querycard.do",data:l,success:function(t){if(t.data){var l="";t.data.head&&(e.form.setAllFormValue(n({},o.card_from_id,t.data.head[o.card_from_id])),d("pk_cashpay_h",a,t.data,o.card_from_id,o.dataSource),l=t.data.head[o.card_from_id].rows[0].values.vbillno.value),t.data.body&&e.cardTable.setTableData(o.card_table_id,t.data.body[o.card_table_id]),r.billno=l,e.setUrlParam({status:"browse",id:a}),r.toggleShow()}else e.form.setAllFormValue(n({},o.card_from_id,{rows:[]})),e.cardTable.setTableData(o.card_table_id,{rows:[]})}})}};var t=r(0),o=r(2);r(1);function n(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}},function(e,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e,a,r,n,l,i,d){e.form.getFormItemsValue(o.card_from_id,"pk_org").value;if("olcrate"==r){var c=e.form.getFormItemsValue(o.card_from_id,"pk_currtype"),u=e.form.getFormItemsValue(o.card_from_id,"pk_org"),s={pk_org:u&&u.value,pk_currency:c&&c.value,attrcode:"olcrate"};(0,t.ajax)({url:"/nccloud/fts/cashpay/cashpaybodybeforeevent.do",data:s,success:function(a){a&&e.cardTable.setEditableByIndex(o.card_table_id,l,"olcrate",!a.data)}})}return!0};var t=r(0),o=(r(11),r(2));r(1)}])}));
//# sourceMappingURL=index.1768156c.js.map