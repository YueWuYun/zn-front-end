{"version":3,"sources":["webpack://[name]/webpack/universalModuleDefinition","webpack://[name]/webpack/bootstrap","webpack://[name]/external \"nc-lightapp-front\"","webpack://[name]/./src/zjcmp_cd/cd/96h10108/constant/index.js","webpack://[name]/external {\"root\":\"React\",\"var\":\"React\",\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"react\"}","webpack://[name]/./src/zjcmp_cd/cd/96h10108/list/events/listOperator.js","webpack://[name]/./src/zjcmp_cd/cd/96h10108/card/events/cardOperator.js","webpack://[name]/./src/zjcmp_cd/cd/96h10108/card/events/afterHeadEvent.js","webpack://[name]/./src/zjcmp_cd/cd/96h10108/card/events/buttonVisibilityControl.js","webpack://[name]/./src/zjcmp_cd/cd/96h10108/card/events/bodyButtonClick.js","webpack://[name]/./src/zjcmp_cd/cd/96h10108/card/index.js","webpack://[name]/./src/zjcmp_cd/cd/96h10108/card/events/initTemplate.js","webpack://[name]/./src/zjcmp_cd/cd/96h10108/card/events/buttonClick.js","webpack://[name]/./src/zjcmp_cd/cd/96h10108/card/events/beforeHeadEvent.js","webpack://[name]/./src/zjcmp_cd/cd/96h10108/card/events/beforeTableEvent.js","webpack://[name]/./src/zjcmp_cd/cd/96h10108/card/events/afterTableEvent.js","webpack://[name]/./src/zjcmp_cd/cd/96h10108/card/events/bodySelectedEvent.js","webpack://[name]/./src/zjcmp_cd/cd/96h10108/list/index.js","webpack://[name]/./src/zjcmp_cd/cd/96h10108/list/events/initTemplate.js","webpack://[name]/./src/zjcmp_cd/cd/96h10108/list/events/bodyButtonClick.js","webpack://[name]/./src/zjcmp_cd/cd/96h10108/list/events/buttonClick.js","webpack://[name]/./src/zjcmp_cd/cd/96h10108/list/events/searchBtnClick.js","webpack://[name]/./src/zjcmp_cd/cd/96h10108/list/events/selectedEvent.js","webpack://[name]/./src/zjcmp_cd/cd/96h10108/main/index.js","webpack://[name]/./src/zjcmp_cd/cd/96h10108/main/router.js"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__0__","__WEBPACK_EXTERNAL_MODULE__2__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","APPCODE","BILL_TYPE_CODE","MULTILANG","domainName","LIST","page_title","page_code","search_id","table_id","head_btn_code","body_btn_code","CARD","form_id","table_code","table_edit_code","table_browse_code","shoulder_btn_code","DATASOURCE","LIST_BUTTON","SEARCH_CACHE","dataSource","CARD_CACHE","base_path","REQUEST_URL","save","delete","queryCard","queryList","queryListByPks","commit","unCommit","toCard","toList","linkGroup","attachment","approvalLink","billTrack","print","output","refresh","bodyUpdate","bodyDelete","bodyCommit","bodyUnCommit","copy","CARD_BUTTON","LIST_DISABLED_BUTTON","saveAdd","saveCommit","cancel","update","back","addRow","deleteRow","copyRows","pasteTail","pasteCancel","expand","insertRow","delRow","copyRow","fold","unfold","pasteHere","CARD_DISABLED_BUTTON","CARD_ADD_DISABLED_BUTTON","FIELD","org","billStatus","ts","PRIMARY_KEY","head_id","body_id","bill_no","id","STATUS","status","edit","browse","add","info","warning","success","danger","NOSTATE","NOPASS","PASSING","GOINGON","COMMIT","listCreate","props","pushTo","pagecode","listRefresh","listEdit","pk","listCopy","isCopy","listCommit","data","select","checkSelected","valid","selectDatas","pks","map","item","values","pkMapTs","Map","set","ajax","url","res","workflow","setState","compositeData","compositeDisplay","curPk","PromptMessage","listUnCommit","toast","color","content","json","listAttachment","billId","billNo","this","showUploader","state","billInfo","listBillTrack","showBillTrack","billTrackBillId","billTrackBillType","listLinkApprove","showApproveDetail","listHeadDelete","allTableData","table","getAllTableData","allPks","rows","deleteRowIndexArr","findIndex","v","filter","deleteCacheId","deleteTableRowsByIndex","listBodyDelete","index","listSearch","pageInfoClick","config","setAllTableData","handleDoubleClick","record","scene","getUrlParam","getDefData","cardCache","isCheckOne","getCheckedRows","length","queryInfo","pageInfo","getTablePageInfo","search","getQueryInfo","pageCode","button","setDisabled","formulamsg","Array","dealFormulamsg","setDefData","msg","total","successNum","failNum","errMsgArr","errormessages","title","TextArr","groupOperation","duration","groupOperationMsg","cardBack","cardCreate","setUrlParam","initMetaByPkorg","setButtonDisabled","cardTable","setAllCheckboxAble","clearAll","setByStatus","context","pk_org","org_Name","form","setFormItemsValue","display","afterHeadEvent","copyClear","cardSave","Promise","resolve","rejected","isCheckNow","checkTableRequired","createMasterChildData","validateToSave","head","setAllFormValue","body","setTableData","addCache","updateCache","cardUpdate","cardCopy","cardDelete","getFormItemsValue","nextId","getNextId","deleteCacheById","lastId","getCardData","cardCancel","resetTableData","currentLastId","getCurrentLastId","cardRefresh","pageClick","cardAttachment","cardBillTrack","cardLinkApprove","cardCommit","cardUnCommit","getCacheById","buttonVisibilityControl","BillHeadInfo","setBillHeadInfoVisible","showBackBtn","showBillCode","billCode","resMetaAfterPkorgEdit","EmptyAllFormValue","setColValue","num","getNumberOfRows","updateArray","push","setRowStatusByIndexs","isRefresh","callBack","cardData","error","message","oldValue","buttons","getButtons","isBrowse","btnObj","showBtn","editBtn","unionBtn","parentButtons","allBtns","commonBtn","includes","setButtonVisible","setStatus","setFormStatus","bodyButtonClick","text","checkedRows","checkedIndex","delRowsByIndex","openTabModel","toggleTabRowView","pasteRow","copyControl","lastIndex","insertRowsAfterIndex","getPasteRows","selectAllRows","flag","isPaste","deepClone","selected","NCAffix","base","Card","MultiInit","getMultiLang","callback","inlt","initTemplate","onbeforeunload","getStatus","cardPagination","createCardPagination","createForm","createCardTable","createBillHeadInfo","NCUploader","high","BillTrack","ApprovalTrans","ApproveDetail","className","backBtnClick","buttonClick","createButtonApp","area","onButtonClick","style","float","pkname","handlePageInfoChange","onAfterEvent","onBeforeEvent","beforeHeadEvent","tableHead","getTableHead","showCheck","showIndex","onSelected","bodySelectedEvent","onSelectedAll","bodySelectedAllEvent","beforeTableEvent","afterTableEvent","modelSave","undefined","placement","onHide","show","close","type","getResult","getAssignUser","compositeTurnOff","billtype","billid","Component","popContainer","document","querySelector","userObj","createPage","billinfo","headcode","bodycode","createUIDom","setButtons","template","meta","modifierMeta","setMeta","getBusinessInfo","businessDate","groupName","groupId","userName","userId","items","attrcode","queryCondition","funcode","getSearchParam","keys","gridrelation","label","itemtype","fixed","visible","width","render","buttonAry","expandRowStatus","createOprationButton","buttonLimit","hotkey","isFromSide","then","closeModel","promptBox","beSureBtnClick","changedrows","method","List","createSimpleTable","NCCreateSearch","createPageIcon","clickSearchBtn","onRowDoubleClick","clickSelectBtn","clickSelectAllBtn","searchBtnClick","selectedEvent","selectedAllEvent","setPopContent","orgValue","getSearchValByField","setSearchValByField","isMultiSelectedEnabled","pagination","cursor","onClick","deleteFlag","isAllNoState","isAllPassing","busistatus","routers","htmlTagid","routes","RenderRouter","card","asyncComponent","path","component","list","exact"],"mappings":"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","file":"zjcmp_cd/cd/96h10108/main/index.14463980.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"nc-lightapp-front\"), require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"nc-lightapp-front\", \"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"zjcmp_cd/cd/96h10108/main/index\"] = factory(require(\"nc-lightapp-front\"), require(\"react\"));\n\telse\n\t\troot[\"zjcmp_cd/cd/96h10108/main/index\"] = factory(root[\"nc-lightapp-front\"], root[\"React\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__, __WEBPACK_EXTERNAL_MODULE__2__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"../../../../\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 47);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","/**\r\n* @description: 常量\r\n*/\r\n\r\n//应用编码\r\nexport const APPCODE = '96H10108';\r\n\r\n//单据类型\r\nexport const BILL_TYPE_CODE = 'WYDJ';\r\n\r\n/**\r\n* @description: 多语\r\n* @param moduleId: 多语资源名\r\n* @param domainName: 工程名\r\n*/\r\nexport const MULTILANG = {\r\n        moduleId: '96H10108',\r\n        domainName: 'zjcmp_cd'\r\n};\r\n\r\n/**\r\n * 列表\r\n */\r\nexport const LIST = {\r\n        page_title: '96H10108-000011',                  //页面标题 /* 国际化处理： 投融资费用*/\r\n\r\n        page_code: '96H10108_LIST',                     //页面编码\r\n\r\n        search_id: 'list_query',                        //查询区 \r\n        table_id: 'list_head',                          //表格区 \r\n\r\n        head_btn_code: 'list_head',                     //表头按钮区 \r\n        body_btn_code: 'list_inner',                                    //表体表格按钮区\r\n};\r\n\r\n/**\r\n * 卡片\r\n */\r\nexport const CARD = {\r\n        page_title: '96H10108-000011',                   //页面标题 /* 国际化处理： 投融资费用*/\r\n\r\n        page_code: '96H10108_CARD',                      //页面编码\r\n\r\n        form_id: 'card_head',                            //表头表单区\r\n        table_code: 'card_body',                         //表体表格区\r\n        table_edit_code: 'card_body_edit',               //表体表格编辑态侧拉区\r\n        table_browse_code: 'card_body_browse',           //表体表格浏览态下拉区\r\n\r\n        head_btn_code: 'card_head',                      //表头按钮区\r\n        shoulder_btn_code: 'tabs_head',                  //表体肩部按钮区\r\n        body_btn_code: 'tabs_body'                       //表体表格按钮区\r\n};\r\n\r\n//领域名.模块名.节点名.自定义名\r\n//缓存标示\r\nexport const DATASOURCE = 'tm.fmc.cost.datasource';\r\n\r\n//查询区域缓存 \r\nexport const SEARCH_CACHE = {\r\n        key: 'tm.fmc.cost.SEARCH_CACHE',                 //查询区域缓存Key\r\n        dataSource: DATASOURCE                                           //查询区域缓存数据的名称空间\r\n}\r\n\r\n//卡片缓存 \r\nexport const CARD_CACHE = {\r\n        key: 'tm.fmc.cost.CARD_CACHE',                   //卡片区域缓存Key\r\n        dataSource: DATASOURCE                                           //卡片区域缓存数据的名称空间\r\n}\r\n\r\n//请求基础路径\r\nexport const base_path = '/nccloud/zjcmp_cd/cd/';\r\n\r\n//url\r\nexport const REQUEST_URL = {\r\n        save: `/nccloud/zjcmp_cd/cd/savetam_registerVO.do`,                       //保存\r\n        delete: `/nccloud/zjcmp_cd/cd/deletetam_registerVO.do`,                        //删除\r\n        queryCard: `/nccloud/zjcmp_cd/cd/querycardtam_registerVO.do`,                      //卡片查询\r\n        queryList: `/nccloud/zjcmp_cd/cd/querypagetam_registerVO.do`,              //列表查询\r\n        queryListByPks: `/nccloud/zjcmp_cd/cd/querypagebypktam_registerVO.do`,     //列表分页查询\r\n        commit: `/nccloud/zjcmp_cd/cd/committam_registerVO.do`,                   //提交\r\n        unCommit: `/nccloud/zjcmp_cd/cd/uncommittam_registerVO.do`,               //收回\r\n\r\n        toCard: '/card',\r\n        toList: '/list'\r\n};\r\n\r\nexport const LIST_BUTTON = {\r\n        create: 'AddBtn',\r\n        delete: 'DelBtn',\r\n        commit: 'CommitBtn',\r\n        unCommit: 'UnCommitBtn',\r\n        linkGroup: 'JointBtn',\r\n        attachment: 'AttachmentBtn',\r\n        approvalLink: 'DetailBtn',\r\n        billTrack: 'TrackBtn',\r\n        print: 'PrintBtn',\r\n        output: 'OutputBtn',\r\n        refresh: 'RefreshBtn',\r\n\r\n        bodyUpdate: 'edit',\r\n        bodyDelete: 'delete',\r\n        bodyCommit: 'commit',\r\n        bodyUnCommit: 'unCommit',\r\n        copy: 'copy'\r\n};\r\n\r\n//列表默认禁用按钮\r\nexport const LIST_DISABLED_BUTTON = [LIST_BUTTON.delete, LIST_BUTTON.commit, LIST_BUTTON.unCommit, LIST_BUTTON.linkGroup, LIST_BUTTON.approvalLink, LIST_BUTTON.billTrack,\r\nLIST_BUTTON.attachment, LIST_BUTTON.print, LIST_BUTTON.output];\r\n\r\nexport const CARD_BUTTON = {\r\n        save: 'SaveBtn',\r\n        saveAdd: 'SaveAddBtn',\r\n        saveCommit: 'SaveCommitBtn',\r\n        cancel: 'CancelBtn',\r\n        create: 'CreateBtn',\r\n        update: 'UpdateBtn',\r\n        delete: 'DeleteBtn',\r\n        copy: 'CopyBtn',\r\n        commit: 'CommitBtn',\r\n        unCommit: 'UnCommitBtn',\r\n        attachment: 'AttachmentBtn',\r\n        approvalLink: 'DetailBtn',\r\n        billTrack: 'TrackBtn',\r\n        print: 'PrintBtn',\r\n        output: 'OutputBtn',\r\n        refresh: 'RefreshBtn',\r\n        back: 'Back',\r\n\r\n        addRow: 'addRow',\r\n        deleteRow: 'deleteRow',\r\n        copyRows: 'copyRows',\r\n        pasteTail: 'pasteTail',\r\n        pasteCancel: 'pasteCancel',\r\n\r\n        expand: 'expand',\r\n        insertRow: 'insertRow',\r\n        delRow: 'delRow',\r\n        copyRow: 'copyRow',\r\n        fold: 'fold',\r\n        unfold: 'unfold',\r\n        pasteHere: 'pasteHere'\r\n};\r\n\r\n//卡片默认禁用按钮\r\nexport const CARD_DISABLED_BUTTON = [CARD_BUTTON.deleteRow, CARD_BUTTON.copyRows];\r\n//卡片新增禁用按钮\r\nexport const CARD_ADD_DISABLED_BUTTON = [CARD_BUTTON.addRow, CARD_BUTTON.save, CARD_BUTTON.saveAdd, CARD_BUTTON.saveCommit];\r\n\r\n//字段名\r\nexport const FIELD = {\r\n        org: 'pk_org',                                                   //组织\r\n        //orgV: 'pk_org_v',                                              //组织多版本\r\n        billStatus: 'approvestatus',                             //单据状态字段（用以按钮控制）\r\n        ts: 'ts'                                                                 //时间戳\r\n};\r\n\r\n//主属性字段名\r\nexport const PRIMARY_KEY = {\r\n        head_id: 'pk_register',           //表头主键字段名\r\n        body_id: 'pk_register_b',           //表体主键字段名\r\n        bill_no: 'billno',                                               //单据编号字段名\r\n        id: 'id'                                                                 //单据前端缓存标识\r\n};\r\n\r\n//状态\r\nexport const STATUS = {\r\n        status: 'status',                                                //状态\r\n\r\n        edit: 'edit',                                            //编辑态\r\n        browse: 'browse',                                        //浏览态\r\n        add: 'add',                                                              //新增态\r\n\r\n        info: 'info',                                                    //帮助\r\n        warning: 'warning',                                              //警告\r\n        success: 'success',                                              //成功\r\n        danger: 'danger',                                                //出错\r\n\r\n        NOSTATE: '-1',                                                   //自由 态\r\n        NOPASS: '0',                                                     //未通过 态\r\n        PASSING: '1',                                                    //通过 态\r\n        GOINGON: '2',                                                    //进行中 态\r\n        COMMIT: '3'                                                              //提交 态\r\n};","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","import { ajax, cardCache, toast } from 'nc-lightapp-front';\r\nimport { REQUEST_URL, SEARCH_CACHE, CARD, LIST, PRIMARY_KEY, LIST_BUTTON, STATUS, BILL_TYPE_CODE, FIELD } from '../../constant';\r\n\r\n//列表新增\r\nexport function listCreate(props) {\r\n    props.pushTo(REQUEST_URL.toCard, {\r\n        status: STATUS.add,\r\n        pagecode: CARD.page_code\r\n    });\r\n}\r\n\r\n//列表刷新\r\nexport function listRefresh(props) {\r\n    let { getDefData } = cardCache;\r\n    let queryInfo = getDefData(SEARCH_CACHE.key, SEARCH_CACHE.dataSource);\r\n    listSearch(props, queryInfo);\r\n}\r\n\r\n//列表修改\r\nexport function listEdit(props, pk) {\r\n    props.pushTo(REQUEST_URL.toCard, {\r\n        status: STATUS.edit,\r\n        id: pk,\r\n        pagecode: CARD.page_code\r\n    });\r\n}\r\n\r\n//列表复制\r\nexport function listCopy(props, pk) {\r\n    props.pushTo(REQUEST_URL.toCard, {\r\n        status: STATUS.edit,\r\n        id: pk,\r\n        pagecode: CARD.page_code,\r\n        isCopy: true\r\n    });\r\n}\r\n\r\n\r\n//列表提交\r\nexport function listCommit(props, data) {\r\n    if (!data) {\r\n        let select = checkSelected(props, false);\r\n        if(!select.valid){\r\n            return;\r\n        }\r\n        if (select.valid) {\r\n            let selectDatas = select.selectDatas;\r\n            let pks = selectDatas && selectDatas.map(item => item.data.values[PRIMARY_KEY.head_id].value);\r\n            let pkMapTs = new Map();\r\n            selectDatas && selectDatas.map(item => {\r\n                let pk = item.data.values[PRIMARY_KEY.head_id].value;\r\n                let ts = item.data.values[FIELD.ts] && item.data.values[FIELD.ts].value;\r\n                //主键与tsMap\r\n                if (pk && ts) {\r\n                    pkMapTs.set(pk, ts);\r\n                }\r\n            });\r\n            data = { pks, pkMapTs };\r\n        }\r\n    }\r\n    ajax({\r\n        url: REQUEST_URL.commit,\r\n        data: data,\r\n        success: (res) => {\r\n            if (res.success) { //成功\r\n                if (res.data && res.data.workflow && (res.data.workflow == 'approveflow' || res.data.workflow == 'workflow')) {\r\n                    this.setState({\r\n                        compositeData: res.data,\r\n                        compositeDisplay: true,\r\n                        curPk: data.pks\r\n                    });\r\n                    PromptMessage.call(this, res);\r\n                } else {\r\n                    PromptMessage.call(this, res);\r\n                    listRefresh(props);\r\n                }\r\n            } else { //失败\r\n                PromptMessage.call(this, res);\r\n                //toast({ color: STATUS.warning, content: props.json['96H10108-000015'] });/* 国际化处理： 提交失败*/\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\n//列表收回\r\nexport function listUnCommit(props, data) {\r\n    if (!data) {\r\n        let select = checkSelected(props, false);\r\n        if (select.valid) {\r\n            let selectDatas = select.selectDatas;\r\n            let pks = selectDatas && selectDatas.map(item => item.data.values[PRIMARY_KEY.head_id].value);\r\n            let pkMapTs = new Map();\r\n            selectDatas && selectDatas.map(item => {\r\n                let pk = item.data.values[PRIMARY_KEY.head_id].value;\r\n                let ts = item.data.values[FIELD.ts] && item.data.values[FIELD.ts].value;\r\n                //主键与tsMap\r\n                if (pk && ts) {\r\n                    pkMapTs.set(pk, ts);\r\n                }\r\n            });\r\n            data = { pks, pkMapTs };\r\n        }\r\n    }\r\n    ajax({\r\n        url: REQUEST_URL.unCommit,\r\n        data: data,\r\n        success: (res) => {\r\n            if (res.success) { //成功\r\n                listRefresh(props);\r\n            } else { //失败\r\n                toast({ color: STATUS.warning, content: props.json['96H10108-000017'] });/* 国际化处理： 收回失败*/\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\n\r\n/**\r\n * 是否选中数据\r\n * \r\n * @param {*} isCheckOne 是否选中一条数据\r\n * @returns 返回是否校验成功\r\n */\r\nexport function checkSelected(props, isCheckOne) {\r\n    let valid = true;\r\n    let selectDatas = props.table && props.table.getCheckedRows(LIST.table_id);\r\n    if (isCheckOne && selectDatas.length > 1) {\r\n        toast({\r\n            color: STATUS.warning, content: props.json['96H10108-000012']/* 国际化处理： 请选中一行表体数据!*/\r\n        });\r\n        valid = false;\r\n    } else if (selectDatas.length == 0) {\r\n        toast({\r\n            color: STATUS.warning, content: props.json['96H10108-000013']/* 国际化处理： 请选择表体数据操作!*/\r\n        });\r\n        valid = false;\r\n    }\r\n    return { valid, selectDatas };\r\n}\r\n\r\n//列表附件\r\nexport function listAttachment(props) {\r\n    let select = checkSelected(props, true);\r\n    if (select.valid) {\r\n        let selectDatas = select.selectDatas;\r\n        let billId = selectDatas[0] && selectDatas[0].data.values[PRIMARY_KEY.head_id].value;\r\n        let billNo = selectDatas[0] && selectDatas[0].data.values[PRIMARY_KEY.bill_no].value;\r\n        this.setState({\r\n            showUploader: !this.state.showUploader,\r\n            billInfo: { billId, billNo }\r\n        });\r\n    }\r\n}\r\n\r\n//列表单据追溯\r\nexport function listBillTrack(props) {\r\n    //单据追溯示例\r\n    let select = checkSelected(props, true);\r\n    if (select.valid) {\r\n        let selectDatas = select.selectDatas;\r\n        let billId = selectDatas[0] && selectDatas[0].data.values[PRIMARY_KEY.head_id].value;\r\n        this.setState({\r\n            showBillTrack: true,\r\n            billTrackBillId: billId,\r\n            billTrackBillType: BILL_TYPE_CODE\r\n        });\r\n    }\r\n}\r\n\r\n//列表审批详情\r\nexport function listLinkApprove(props) {\r\n    let select = checkSelected(props, true);\r\n    if (select.valid) {\r\n        let selectDatas = select.selectDatas;\r\n        let billId = selectDatas[0] && selectDatas[0].data.values[PRIMARY_KEY.head_id].value;\r\n        this.setState({\r\n            showApproveDetail: true,\r\n            billId: billId\r\n        });\r\n    }\r\n}\r\n\r\n//列表表头删除\r\nexport function listHeadDelete(props) {\r\n    let data = {};\r\n    let pks = [];\r\n    let select = checkSelected(props, false);\r\n    if (select.valid) {\r\n        let selectDatas = select.selectDatas;\r\n        pks = selectDatas && selectDatas.map(item => item.data.values[PRIMARY_KEY.head_id].value);\r\n        let pkMapTs = new Map();\r\n        selectDatas && selectDatas.map(item => {\r\n            let pk = item.data.values[PRIMARY_KEY.head_id].value;\r\n            let ts = item.data.values[FIELD.ts] && item.data.values[FIELD.ts].value;\r\n            //主键与tsMap\r\n            if (pk && ts) {\r\n                pkMapTs.set(pk, ts);\r\n            }\r\n        });\r\n        data = { pks, pkMapTs };\r\n    }\r\n    ajax({\r\n        url: REQUEST_URL.delete,\r\n        data: data,\r\n        success: (res) => {\r\n            if (res.success) { //成功\r\n                let allTableData = props.table.getAllTableData(LIST.table_id);\r\n                let allPks = allTableData.rows[0] && allTableData.rows.map(item => item.values[PRIMARY_KEY.head_id].value);\r\n                let deleteRowIndexArr = pks.map(item => allPks.findIndex(v => v == item)).filter(item => item != -1);\r\n                props.table.deleteCacheId(LIST.table_id, pks);\r\n                props.table.deleteTableRowsByIndex(LIST.table_id, deleteRowIndexArr);\r\n                toast({ color: STATUS.success, content: props.json['96H10108-000005'] });/* 国际化处理： 删除成功*/\r\n            } else { //失败\r\n                toast({ color: STATUS.warning, content: props.json['96H10108-000009'] });/* 国际化处理： 删除失败*/\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\n//列表表体删除\r\nexport function listBodyDelete(props, data, index) {\r\n    ajax({\r\n        url: REQUEST_URL.delete,\r\n        data: data,\r\n        success: (res) => {\r\n            if (res.success) { //成功\r\n                props.table.deleteCacheId(LIST.table_id, data.pks[0]);\r\n                props.table.deleteTableRowsByIndex(LIST.table_id, index);\r\n                toast({ color: STATUS.success, content: props.json['96H10108-000005'] });/* 国际化处理： 删除成功*/\r\n            } else { //失败\r\n                toast({ color: STATUS.warning, content: props.json['96H10108-000009'] });/* 国际化处理： 删除失败*/\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\n//列表查询\r\nexport function listSearch(props, queryInfo) {\r\n    let pageInfo = props.table.getTablePageInfo(LIST.table_id);\r\n    if (!queryInfo) {\r\n        queryInfo = props.search.getQueryInfo(LIST.search_id);\r\n    }\r\n    queryInfo.pageInfo = pageInfo;\r\n    queryInfo.pageCode = LIST.page_code;\r\n\r\n    // 刷新按钮可用\r\n    props.button.setDisabled({ [LIST_BUTTON.refresh]: false });\r\n\r\n    ajax({\r\n        url: REQUEST_URL.queryList,\r\n        data: queryInfo,\r\n        success: (res) => {\r\n            let { success, data } = res;\r\n            if (res.formulamsg && res.formulamsg instanceof Array && res.formulamsg.length > 0) {\r\n                props.dealFormulamsg(res.formulamsg);\r\n            }\r\n            if (success && data && data[LIST.table_id]) {\r\n                props.table.setAllTableData(LIST.table_id, data[LIST.table_id]);\r\n                toast({ color: STATUS.success });\r\n            } else {\r\n                props.table.setAllTableData(LIST.table_id, { rows: [] });\r\n                toast({ color: STATUS.warning, content: props.json['96H10108-000010'] });/* 国际化处理： 未查询出符合条件的数据！*/\r\n            }\r\n\r\n            // 将查询条件缓存\r\n            let { setDefData } = cardCache;\r\n            setDefData(SEARCH_CACHE.key, SEARCH_CACHE.dataSource, queryInfo);\r\n        }\r\n    });\r\n}\r\n\r\n//分页查询\r\nexport function pageInfoClick(props, config, pks) {\r\n    let data = {\r\n        pks,\r\n        pagecode: LIST.page_code\r\n    };\r\n\r\n    ajax({\r\n        url: REQUEST_URL.queryListByPks,\r\n        data: data,\r\n        success: (res) => {\r\n            let { success, data } = res;\r\n            if (success && data && data[LIST.table_id]) {\r\n                props.table.setAllTableData(LIST.table_id, data[LIST.table_id]);\r\n                toast({ color: STATUS.success });\r\n            } else {\r\n                props.table.setAllTableData(LIST.table_id, { rows: [] });\r\n                toast({ color: STATUS.warning, content: props.json['96H10108-000010'] });/* 国际化处理： 未查询出符合条件的数据！*/\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\n/**\r\n * 列表消息提示\r\n * @param {*} res           返回的response\r\n * @param {*} opername      操作名称\r\n */\r\nexport function PromptMessage(res) {\r\n    let { status, msg } = res.data;\r\n    let content;\r\n    let total = res.data.total;\r\n    let successNum = res.data.successNum;\r\n    let failNum = res.data.failNum;\r\n    content = '共' + '提交' + total + '条';/* 国际化处理： 共,条，*/\r\n    content = content + ',成功' + successNum + '条';/* 国际化处理： 成功,条 ,,成功*/\r\n    content = content +',失败' + failNum + ',条';/* 国际化处理： 失败,条,条*/\r\n    let errMsgArr = res.data.errormessages;\r\n    //全部成功\r\n    if (status == 0) {\r\n        toast({\r\n            color: \"success\",\r\n            title: '提交' + msg,\r\n            content: content,\r\n            TextArr: ['展开', '收起', '关闭'],/* 国际化处理： 展开,收起,关闭*/\r\n            groupOperation: true\r\n        });\r\n    }\r\n    //全部失败\r\n    else if (status == 1) {\r\n        toast({\r\n            duration: \"infinity\",\r\n            color: \"danger\",\r\n            title: '提交' + msg,\r\n            content: content,\r\n            TextArr: ['展开', '收起', '关闭'],/* 国际化处理： 展开,收起,关闭*/\r\n            groupOperation: true,\r\n            groupOperationMsg: errMsgArr\r\n        });\r\n    }\r\n    //部分成功\r\n    else if (status == 2) {\r\n        toast({\r\n            duration: \"infinity\",\r\n            color: \"warning\",\r\n            title: '提交' + msg,\r\n            content: content,\r\n            TextArr: ['展开', '收起', '关闭'],/* 国际化处理： 展开,收起,关闭*/\r\n            groupOperation: true,\r\n            groupOperationMsg: errMsgArr\r\n        });\r\n    }\r\n}\r\n\r\n//列表行双击\r\nexport function handleDoubleClick(record, index, props) {\r\n    props.pushTo(REQUEST_URL.toCard, {\r\n        status: STATUS.browse,\r\n        id: record[PRIMARY_KEY.head_id].value,\r\n        pagecode: CARD.page_code,\r\n        scene: props.getUrlParam('scene')\r\n    });\r\n};","import { ajax, cardCache, toast } from 'nc-lightapp-front';\r\nimport { REQUEST_URL, CARD, PRIMARY_KEY, CARD_BUTTON, CARD_CACHE, DATASOURCE, STATUS, FIELD, BILL_TYPE_CODE, CARD_ADD_DISABLED_BUTTON } from '../../constant';\r\nimport { buttonVisibilityControl } from './buttonVisibilityControl';\r\nimport { afterHeadEvent } from './afterHeadEvent';\r\n\r\nlet { updateCache, addCache, getNextId, deleteCacheById, getCacheById, getCurrentLastId } = cardCache;\r\n\r\n//卡片返回\r\nexport function cardBack(props) {\r\n    props.pushTo(REQUEST_URL.toList, {});\r\n}\r\n\r\n\r\n//卡片新增\r\nexport function cardCreate(props) {\r\n    props.setUrlParam({ status: STATUS.add });\r\n    //单据有主组织，新增时,将其他字段设置为不可编辑\r\n    props.initMetaByPkorg();\r\n    props.button.setButtonDisabled(CARD_ADD_DISABLED_BUTTON, true);\r\n    props.cardTable.setAllCheckboxAble(CARD.table_code, false);\r\n    clearAll(props);\r\n    setByStatus(props);\r\n\r\n    let { getDefData } = cardCache;\r\n    let context = getDefData(CARD_CACHE.key, CARD_CACHE.dataSource);\r\n    if (context) {\r\n        let { pk_org, org_Name} = context;\r\n        props.form.setFormItemsValue(CARD.form_id, {\r\n            [FIELD.org]: { value: pk_org, display: org_Name }\r\n        });\r\n        afterHeadEvent(props, CARD.form_id, FIELD.org, { display: org_Name, value: pk_org }, { display: null, value: null });\r\n    }\r\n}\r\n\r\n/**\r\n * 根据状态设置卡片\r\n * @param {*} status  \r\n */\r\nfunction setByStatus(props) {\r\n    buttonVisibilityControl(props);\r\n    let status = props.getUrlParam(STATUS.status);\r\n    //设置单据编号\r\n    props.BillHeadInfo.setBillHeadInfoVisible({\r\n        showBackBtn: status === STATUS.browse,\r\n        showBillCode: status === STATUS.browse,\r\n        billCode: props.form.getFormItemsValue(CARD.form_id, PRIMARY_KEY.bill_no) && props.form.getFormItemsValue(CARD.form_id, PRIMARY_KEY.bill_no).value\r\n    });\r\n    if (status !== STATUS.add) {\r\n        props.resMetaAfterPkorgEdit(); //选择主组织以后，恢复其他字段的编辑性\r\n    }\r\n    // orgVersionView(props);//组织版本视图\r\n}\r\n\r\n/**\r\n * 组织多版本视图\r\n * @param {*} props \r\n * @param {*} headCode \r\n */\r\nfunction orgVersionView(props) {\r\n    let status = props.getUrlParam(STATUS.status);\r\n    //浏览态显示组织版本，编辑态显示组织\r\n    let showflag = status == STATUS.browse;\r\n    let obj = {};\r\n    obj[FIELD.org] = !showflag;\r\n    props.form.setFormItemsVisible(CARD.form_id, obj);\r\n}\r\n\r\n//清空表头表体数据\r\nfunction clearAll(props) {\r\n    props.form.EmptyAllFormValue(CARD.form_id);\r\n    props.cardTable.setTableData(CARD.table_code, { rows: [] });\r\n}\r\n\r\n//复制时清空数据\r\nexport function copyClear(props) {\r\n    if (props.getUrlParam('isCopy')) {\r\n        props.form.setFormItemsValue(CARD.form_id, {\r\n            [PRIMARY_KEY.head_id]: { value: null, display: null },\r\n            [PRIMARY_KEY.bill_no]: { value: null, display: null },\r\n            [FIELD.billStatus]: { value: STATUS.NOSTATE, display: '自由' }\r\n\r\n        });\r\n        props.cardTable.setColValue(CARD.table_code, PRIMARY_KEY.head_id, { value: null, display: null });\r\n        props.cardTable.setColValue(CARD.table_code, PRIMARY_KEY.body_id, { value: null, display: null });\r\n\r\n        var num = props.cardTable.getNumberOfRows(CARD.table_code, false);\r\n        var updateArray = new Array();\r\n        for (var i = 0; i < num; i++) {\r\n            updateArray.push({\r\n                index: i,\r\n                status: '2',//新增态\r\n            });\r\n        }\r\n        props.cardTable.setRowStatusByIndexs(CARD.table_code, updateArray);\r\n\r\n        props.setUrlParam({\r\n            id: null,\r\n            isCopy: false,\r\n            status: STATUS.add\r\n        });\r\n    }\r\n}\r\n\r\n//卡片保存\r\nexport function cardSave(props) {\r\n    return new Promise((resolve, rejected) => {\r\n        let flag = props.form.isCheckNow(CARD.form_id) && props.cardTable.checkTableRequired(CARD.table_code);\r\n        if (flag) {\r\n            let data = props.createMasterChildData(CARD.page_code, CARD.form_id, CARD.table_code, 'cardTable');\r\n            props.validateToSave(data, () => {\r\n\r\n                let status = props.getUrlParam(STATUS.status);\r\n                ajax({\r\n                    url: REQUEST_URL.save,\r\n                    data: data,\r\n                    success: (res) => {\r\n                        let { success, data } = res;\r\n                        if (success) {\r\n                            toast({ color: STATUS.success, content: props.json['96H10108-000004'] });/* 国际化处理： 保存成功*/\r\n\r\n                            if (res.formulamsg && res.formulamsg instanceof Array && res.formulamsg.length > 0) {\r\n                                props.dealFormulamsg(res.formulamsg);\r\n                            }\r\n\r\n                            let id = null;\r\n                            if (res.data) {\r\n                                if (res.data.head && res.data.head[CARD.form_id]) {\r\n                                    id = res.data.head[CARD.form_id].rows[0].values[PRIMARY_KEY.head_id].value;\r\n                                    props.form.setAllFormValue({ [CARD.form_id]: res.data.head[CARD.form_id] });\r\n                                }\r\n                                if (res.data.body && res.data.body[CARD.table_code]) {\r\n                                    props.cardTable.setTableData(CARD.table_code, res.data.body[CARD.table_code]);\r\n                                }\r\n                            }\r\n\r\n                            props.setUrlParam({\r\n                                id,\r\n                                status: STATUS.browse\r\n                            });\r\n\r\n                            // 缓存\r\n                            if (status === STATUS.add) {\r\n                                addCache(id, data, CARD.form_id, DATASOURCE);\r\n                            } else {\r\n                                updateCache(PRIMARY_KEY.head_id, id, data, CARD.form_id, DATASOURCE);\r\n                            }\r\n\r\n                            setByStatus(props);\r\n\r\n                            resolve(true);\r\n                        }\r\n                    }\r\n                });\r\n\r\n            }, { [CARD.table_code]: 'cardTable' });\r\n        }\r\n    });\r\n}\r\n\r\n//卡片修改\r\nexport function cardUpdate(props) {\r\n    props.setUrlParam({ status: STATUS.edit });\r\n    setByStatus(props);\r\n}\r\n\r\n//卡片修改\r\nexport function cardCopy(props) {\r\n    props.setUrlParam({ isCopy: true });\r\n    copyClear(props);\r\n    setByStatus(props);\r\n}\r\n\r\n//卡片删除\r\nexport function cardDelete(props) {\r\n    let pk = props.form.getFormItemsValue(CARD.form_id, PRIMARY_KEY.head_id).value || props.getUrlParam(PRIMARY_KEY.id);\r\n    let ts = props.form.getFormItemsValue(CARD.form_id, FIELD.ts) && props.form.getFormItemsValue(CARD.form_id, FIELD.ts).value;\r\n    let pkMapTs = new Map();\r\n    //主键与tsMap\r\n    if (pk && ts) {\r\n        pkMapTs.set(pk, ts);\r\n    }\r\n    let data = { pks: [pk], pkMapTs };\r\n    ajax({\r\n        url: REQUEST_URL.delete,\r\n        data: data,\r\n        success: (res) => {\r\n            if (res.success) {\r\n                toast({ color: STATUS.success, content: props.json['96H10108-000005'] });/* 国际化处理： 删除成功*/\r\n\r\n                // 获取下一条数据的id\r\n                let nextId = getNextId(pk, DATASOURCE);\r\n                //删除缓存\r\n                deleteCacheById(PRIMARY_KEY.head_id, pk, DATASOURCE);\r\n                let lastId = nextId ? nextId : null;\r\n                props.setUrlParam({ status: STATUS.browse, id: lastId });\r\n                if (lastId) {\r\n                    getCardData(props, lastId);\r\n                } else {// 删除的是最后一个的操作\r\n                    clearAll(props);\r\n                    setByStatus(props);\r\n                }\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\n/**\r\n * 卡片详情\r\n * @param {*} id         单据id\r\n * @param {*} isRefresh  是否刷新按钮，是的话不取缓存数据，直接调取接口，并addCache, 默认否\r\n */\r\nexport function getCardData(props, id, isRefresh = false, callBack) {\r\n    clearAll(props);\r\n    if (!isRefresh) {\r\n        let cardData = getCacheById(id, DATASOURCE);\r\n        if (cardData) {//有缓存\r\n            cardData.head && props.form.setAllFormValue({ [CARD.form_id]: cardData.head[CARD.form_id] });\r\n            cardData.body && props.cardTable.setTableData(CARD.table_code, cardData.body[CARD.table_code]);\r\n            setByStatus(props);\r\n            return;\r\n        }\r\n    }\r\n    ajax({\r\n        url: REQUEST_URL.queryCard,\r\n        data: {\r\n            pk: id,\r\n            pagecode: CARD.page_code\r\n        },\r\n        success: (res) => {\r\n            let { success, data } = res;\r\n            if (success) {\r\n                if (data && data.head) {\r\n                    props.form.setAllFormValue({ [CARD.form_id]: data.head[CARD.form_id] });\r\n                }\r\n                if (data && data.body) {\r\n                    props.cardTable.setTableData(CARD.table_code, data.body[CARD.table_code]);\r\n                }\r\n                // 更新缓存\r\n                updateCache(PRIMARY_KEY.head_id, id, data, CARD.form_id, DATASOURCE);\r\n                callBack && callBack(props);\r\n                setByStatus(props);\r\n            }\r\n        },\r\n        error: (res) => {\r\n            toast({ color: STATUS.danger, content: res.message });\r\n            clearAll(props);\r\n            setByStatus(props);\r\n        }\r\n    });\r\n}\r\n\r\n//卡片取消\r\nexport function cardCancel(props) {\r\n    let id = props.getUrlParam(PRIMARY_KEY.id);\r\n    props.setUrlParam({ status: STATUS.browse });\r\n    if (id) { //有id切换编辑态\r\n        props.form.cancel(CARD.form_id);\r\n        props.cardTable.resetTableData(CARD.table_code);\r\n        getCardData(props, id);\r\n    } else { //没有id查缓存中最后一条数据\r\n        let currentLastId = getCurrentLastId(DATASOURCE);\r\n        let lastId = currentLastId ? currentLastId : null;\r\n        props.setUrlParam({ id: lastId });\r\n        if (lastId) {\r\n            getCardData(props, lastId);\r\n        } else {\r\n            clearAll(props);\r\n            setByStatus(props);\r\n        }\r\n    }\r\n}\r\n\r\n//卡片刷新\r\nexport function cardRefresh(props) {\r\n    let id = props.getUrlParam(PRIMARY_KEY.id);\r\n    getCardData(props, id, true);\r\n}\r\n\r\n/**\r\n * 卡片分页\r\n * @param {*} props  页面内置对象\r\n * @param {*} pk    下一页的pk\r\n */\r\nexport function pageClick(props, id) {\r\n    props.setUrlParam({ status: STATUS.browse, id });\r\n    getCardData(props, id);\r\n}\r\n\r\n\r\n//卡片附件\r\nexport function cardAttachment(props) {\r\n    let billId = props.form.getFormItemsValue(CARD.form_id, PRIMARY_KEY.head_id) && props.form.getFormItemsValue(CARD.form_id, PRIMARY_KEY.head_id).value;\r\n    let billNo = props.form.getFormItemsValue(CARD.form_id, PRIMARY_KEY.bill_no) && props.form.getFormItemsValue(CARD.form_id, PRIMARY_KEY.bill_no).value;\r\n    this.setState({\r\n        showUploader: !this.state.showUploader,\r\n        billInfo: { billId, billNo }\r\n    });\r\n}\r\n\r\n//卡片单据追溯\r\nexport function cardBillTrack(props) {\r\n    let billId = props.form.getFormItemsValue(CARD.form_id, PRIMARY_KEY.head_id) && props.form.getFormItemsValue(CARD.form_id, PRIMARY_KEY.head_id).value;\r\n    this.setState({\r\n        showBillTrack: true,\r\n        billTrackBillId: billId,\r\n        billTrackBillType: BILL_TYPE_CODE\r\n    });\r\n}\r\n\r\n//卡片联查审批详情\r\nexport function cardLinkApprove(props) {\r\n    let billId = props.form.getFormItemsValue(CARD.form_id, PRIMARY_KEY.head_id) && props.form.getFormItemsValue(CARD.form_id, PRIMARY_KEY.head_id).value;\r\n    this.setState({\r\n        showApproveDetail: true,\r\n        billId: billId\r\n    });\r\n}\r\n\r\n\r\n//卡片提交\r\nexport function cardCommit(props, data) {\r\n    if (!data) {\r\n        let pk = props.form.getFormItemsValue(CARD.form_id, PRIMARY_KEY.head_id) && props.form.getFormItemsValue(CARD.form_id, PRIMARY_KEY.head_id).value;\r\n        let ts = props.form.getFormItemsValue(CARD.form_id, FIELD.ts) && props.form.getFormItemsValue(CARD.form_id, FIELD.ts).value;\r\n        let pkMapTs = new Map();\r\n        //主键与tsMap\r\n        if (pk && ts) {\r\n            pkMapTs.set(pk, ts);\r\n        }\r\n        data = { pks: [pk], pkMapTs };\r\n    }\r\n    ajax({\r\n        url: REQUEST_URL.commit,\r\n        data: data,\r\n        success: (res) => {\r\n            if (res.success) { //成功\r\n                if (res.data && res.data.workflow && (res.data.workflow == 'approveflow' || res.data.workflow == 'workflow')) {\r\n                    this.setState({\r\n                        compositeData: res.data,\r\n                        compositeDisplay: true,\r\n                        curPk: data.pks\r\n                    });\r\n                } else {\r\n                    cardRefresh(props);\r\n                }\r\n            } else { //失败\r\n                toast({ color: STATUS.warning, content: props.json['96H10108-000015'] });/* 国际化处理： 提交失败*/\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\n\r\n//卡片收回\r\nexport function cardUnCommit(props) {\r\n    let pk = props.form.getFormItemsValue(CARD.form_id, PRIMARY_KEY.head_id) && props.form.getFormItemsValue(CARD.form_id, PRIMARY_KEY.head_id).value;\r\n    let ts = props.form.getFormItemsValue(CARD.form_id, FIELD.ts) && props.form.getFormItemsValue(CARD.form_id, FIELD.ts).value;\r\n    let pkMapTs = new Map();\r\n    //主键与tsMap\r\n    if (pk && ts) {\r\n        pkMapTs.set(pk, ts);\r\n    }\r\n    let data = { pks: [pk], pkMapTs };\r\n    ajax({\r\n        url: REQUEST_URL.unCommit,\r\n        data: data,\r\n        success: (res) => {\r\n            if (res.success) { //成功\r\n                cardRefresh(props);\r\n            } else { //失败\r\n                toast({ color: STATUS.warning, content: props.json['96H10108-000017'] });/* 国际化处理： 收回失败*/\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\n","import { FIELD, CARD_ADD_DISABLED_BUTTON, CARD } from \"../../constant\";\r\n/**\r\n* @description: 表头编辑后事件\r\n* @param: moduleId 区域编码\r\n* @param: key 当前字段编码\r\n*/\r\nexport function afterHeadEvent(props, moduleId, key, value, oldValue) {\r\n        if (key === FIELD.org) {\r\n                props.resMetaAfterPkorgEdit(); //选择主组织以后，恢复其他字段的编辑性\r\n                props.button.setButtonDisabled(CARD_ADD_DISABLED_BUTTON, false);//恢复增行编辑性\r\n                props.cardTable.setAllCheckboxAble(CARD.table_code, true);\r\n        }\r\n}\r\n","import { CARD, CARD_BUTTON, STATUS, PRIMARY_KEY, FIELD, CARD_DISABLED_BUTTON } from '../../constant';\r\n\r\n/**\r\n* @description: 卡片按钮可见性\r\n*/\r\nexport function buttonVisibilityControl(props) {\r\n\r\n    /** \r\n     * 此处应根据实际情况自由发挥\r\n     * 目标就是将某个状态下的某些按钮展示或隐藏\r\n     * 示例代码可能过于繁琐且难以理解\r\n     * \r\n     * 可调用如下方法实现\r\n     * props.button.setButtonVisible();\r\n     * props.button.setButtonDisabled();\r\n     * \r\n     * 例如\r\n     * let btn1 = [ 编辑态下显示的按钮 ];\r\n     * let btn2 = [ 编辑态下不显示的按钮 ];\r\n     * \r\n     * props.button.setButtonVisible(btn1,true);\r\n     * props.button.setButtonVisible(btn2,false);\r\n     * 即可控制编辑态下的显示按钮。\r\n    */\r\n\r\n    let buttons = props.button.getButtons();\r\n    if (!buttons || buttons.length == 0) {\r\n        //模板没渲染完成，暂不渲染按钮\r\n        return;\r\n    }\r\n    let status = props.getUrlParam(STATUS.status);\r\n    let id = props.getUrlParam(PRIMARY_KEY.id);\r\n    let isBrowse = status === STATUS.browse;\r\n    //单据状态\r\n    let billStatus = props.form.getFormItemsValue(CARD.form_id, FIELD.billStatus) && props.form.getFormItemsValue(CARD.form_id, FIELD.billStatus).value;\r\n\r\n    let btnObj = {};\r\n    //将要显示的按钮\r\n    let showBtn = [];\r\n    //编辑态显示按钮\r\n    let editBtn = [CARD_BUTTON.save, CARD_BUTTON.saveAdd, CARD_BUTTON.saveCommit, CARD_BUTTON.cancel,\r\n    CARD_BUTTON.addRow, CARD_BUTTON.deleteRow, CARD_BUTTON.copyRows,\r\n    CARD_BUTTON.insertRow, CARD_BUTTON.delRow, CARD_BUTTON.copyRow, CARD_BUTTON.pasteHere, CARD_BUTTON.expand];\r\n    //联查按钮\r\n    let unionBtn = [CARD_BUTTON.billTrack, CARD_BUTTON.approvalLink];\r\n    //获得所有的按钮的编码（不包括按钮组下的按钮）\r\n    let parentButtons = buttons.map(item => item.key);\r\n    //(有重复的按钮编码，但无妨)\r\n    let allBtns = [...parentButtons, ...editBtn, ...unionBtn, CARD_BUTTON.create, CARD_BUTTON.update, CARD_BUTTON.delete, CARD_BUTTON.copy, CARD_BUTTON.output];\r\n    if (!isBrowse) { //编辑态\r\n\r\n        showBtn = editBtn;\r\n\r\n    } else { //浏览态\r\n        if (!id) {//点击新增然后点击取消后\r\n\r\n            showBtn = [CARD_BUTTON.create];\r\n\r\n        } else {//单据浏览态\r\n            let commonBtn = [CARD_BUTTON.create, CARD_BUTTON.copy, CARD_BUTTON.attachment, ...unionBtn, CARD_BUTTON.print, CARD_BUTTON.output, CARD_BUTTON.refresh, CARD_BUTTON.fold, CARD_BUTTON.unfold];\r\n            switch (billStatus) {\r\n                case STATUS.NOSTATE:\r\n                    showBtn = [CARD_BUTTON.update, CARD_BUTTON.delete, CARD_BUTTON.commit, ...commonBtn];\r\n                    break;\r\n                case STATUS.PASSING:\r\n                case STATUS.COMMIT:\r\n                case STATUS.GOINGON:\r\n                    showBtn = [CARD_BUTTON.unCommit, ...commonBtn];\r\n                    break;\r\n                default:\r\n                    showBtn = [...commonBtn];\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n    for (let item of allBtns) {\r\n        btnObj[item] = showBtn.includes(item);\r\n    }\r\n    //控制按钮显示与否\r\n    props.button.setButtonVisible(btnObj);\r\n    //设置按钮禁用\r\n    props.button.setButtonDisabled(CARD_DISABLED_BUTTON, true);\r\n    //设置卡片状态\r\n    props.cardTable.setStatus(CARD.table_code, isBrowse ? STATUS.browse : STATUS.edit);\r\n    props.form.setFormStatus(CARD.form_id, status);\r\n}\r\n","import { deepClone } from 'nc-lightapp-front';\r\nimport { CARD_BUTTON, CARD, STATUS, CARD_DISABLED_BUTTON, PRIMARY_KEY } from '../../constant';\r\n\r\n/**\r\n* @description: 表体按钮点击事件\r\n* @param: key 当前触发按钮名称\r\n* @param: index 当前行序\r\n* @param: record 当前行信息\r\n*/\r\nexport function bodyButtonClick(props, key, text, record, index) {\r\n\r\n    switch (key) {\r\n        //肩 新增\r\n        case CARD_BUTTON.addRow:\r\n            props.cardTable.addRow(CARD.table_code);\r\n            break;\r\n\r\n        //肩 删除\r\n        case CARD_BUTTON.deleteRow:\r\n            let checkedRows = props.cardTable.getCheckedRows(CARD.table_code);\r\n            let checkedIndex = checkedRows && checkedRows.map(item => item.index);\r\n            if (checkedRows.length > 0) {\r\n                props.cardTable.delRowsByIndex(CARD.table_code, checkedIndex);\r\n                props.button.setButtonDisabled(CARD_DISABLED_BUTTON, true);\r\n            }\r\n            break;\r\n\r\n        //行 展开\r\n        case CARD_BUTTON.expand:\r\n            props.cardTable.openTabModel(CARD.table_code, STATUS.edit, record, index);\r\n            break;\r\n\r\n        //行 展开（浏览态）\r\n        case CARD_BUTTON.unfold:\r\n        //行 收起\r\n        case CARD_BUTTON.fold:\r\n            props.cardTable.toggleTabRowView(CARD.table_code, record);\r\n            break;\r\n\r\n        //行 插行\r\n        case CARD_BUTTON.insertRow:\r\n            props.cardTable.addRow(CARD.table_code, index);\r\n            break;\r\n\r\n        //行 删行\r\n        case CARD_BUTTON.delRow:\r\n            props.cardTable.delRowsByIndex(CARD.table_code, index);\r\n            break;\r\n\r\n        //行 复制行\r\n        case CARD_BUTTON.copyRow:\r\n            props.cardTable.pasteRow(CARD.table_code, index, [PRIMARY_KEY.body_id]);\r\n            break;\r\n\r\n        //肩 复制行\r\n        case CARD_BUTTON.copyRows:\r\n            copyControl.call(this, props, true);\r\n            break;\r\n\r\n        //肩 取消复制\r\n        case CARD_BUTTON.pasteCancel:\r\n            copyControl.call(this, props, false);\r\n            break;\r\n\r\n        //肩 粘贴至末行\r\n        case CARD_BUTTON.pasteTail:\r\n            let lastIndex = props.cardTable.getNumberOfRows(CARD.table_code);\r\n            props.cardTable.insertRowsAfterIndex(CARD.table_code, getPasteRows(props), lastIndex);\r\n            copyControl.call(this, props, false);\r\n            props.cardTable.selectAllRows(CARD.table_code, false);\r\n            break;\r\n\r\n        //行 粘贴至此\r\n        case CARD_BUTTON.pasteHere:\r\n            props.cardTable.insertRowsAfterIndex(CARD.table_code, getPasteRows(props), index);\r\n            copyControl.call(this, props, false);\r\n            props.cardTable.selectAllRows(CARD.table_code, false);\r\n            break;\r\n    }\r\n    if (![CARD_BUTTON.unfold, CARD_BUTTON.fold].includes(key)) {\r\n        props.cardTable.setStatus(CARD.table_code, STATUS.edit);\r\n    }\r\n}\r\n\r\n//复制时的状态控制\r\nfunction copyControl(props, flag) {\r\n    //肩部按钮显示控制\r\n    props.button.setButtonVisible({\r\n        [CARD_BUTTON.addRow]: !flag,\r\n        [CARD_BUTTON.deleteRow]: !flag,\r\n        [CARD_BUTTON.copyRows]: !flag,\r\n\r\n        [CARD_BUTTON.pasteTail]: flag,\r\n        [CARD_BUTTON.pasteCancel]: flag,\r\n    });\r\n    props.cardTable.setAllCheckboxAble(CARD.table_code, !flag);\r\n    this.setState({ isPaste: flag });\r\n}\r\n\r\n/**\r\n * 获取粘贴行数据\r\n *\r\n * @returns 返回粘贴行数据\r\n */\r\nfunction getPasteRows(props) {\r\n    let checkedRows = props.cardTable.getCheckedRows(CARD.table_code);\r\n    let selectRowCopy = deepClone(checkedRows);\r\n    let selectArr = selectRowCopy.map(item => {\r\n        item.data.selected = false;\r\n        item.data.values[PRIMARY_KEY.head_id] ? item.data.values[PRIMARY_KEY.head_id].value = null : null;\r\n        item.data.values[PRIMARY_KEY.body_id] ? item.data.values[PRIMARY_KEY.body_id].value = null : null;\r\n        return item.data;\r\n    });\r\n    return selectArr;\r\n}\r\n","import React, { Component } from 'react';\r\nimport { createPage, base, high } from 'nc-lightapp-front';\r\nimport { initTemplate } from './events/initTemplate';\r\nimport { buttonClick } from './events/buttonClick';\r\nimport { beforeHeadEvent } from './events/beforeHeadEvent';\r\nimport { beforeTableEvent } from './events/beforeTableEvent';\r\nimport { afterHeadEvent } from './events/afterHeadEvent';\r\nimport { afterTableEvent } from './events/afterTableEvent';\r\nimport { bodySelectedEvent, bodySelectedAllEvent } from './events/bodySelectedEvent';\r\nimport { MULTILANG, CARD, PRIMARY_KEY, CARD_BUTTON, DATASOURCE, STATUS, BILL_TYPE_CODE } from '../constant';\r\nimport { pageClick, cardCommit } from './events/cardOperator';\r\nimport { bodyButtonClick } from './events/bodyButtonClick';\r\n\r\n/**\r\n* @description: 卡片\r\n*/\r\nconst { NCAffix } = base;\r\n\r\nclass Card extends Component {\r\n        constructor(props) {\r\n                super(props);\r\n                this.state = {\r\n                        json: {},\r\n                        showUploader: false,\r\n                        billInfo: {},\r\n                        compositeData: null, //指派信息\r\n                        compositeDisplay: false, //是否显示指派\r\n                        curPk: null, //当前选中数据的pk\r\n                        showApproveDetail: false, //是否显示审批详情\r\n                        billId: null\r\n                };\r\n        }\r\n\r\n        componentWillMount() {\r\n                // json： 多语json格式参数； \r\n                // status： 是否请求到json多语，可用来判断多语资源是否请求到并进行一些别的操作； \r\n                // inlt： 可用来进行占位符的一些操作\r\n                let callback = (json, status, inlt) => {\r\n                        if (status) {\r\n                                initTemplate.call(this, this.props); // 如模板内也有多语处理，平台推荐模板加载操作放于此处， 在取到json多语资源后用传参的方式传入intemplate模板函数中\r\n\r\n                                // 保存json和inlt到页面state中并刷新页面\r\n                                this.setState({ json, inlt })\r\n                        }\r\n                }\r\n                this.props.MultiInit.getMultiLang({ moduleId: MULTILANG.moduleId, domainName: MULTILANG.domainName, callback });\r\n\r\n                // 关闭浏览器\r\n                window.onbeforeunload = () => {\r\n                        let status = this.props.cardTable.getStatus(CARD.table_code);\r\n                        if (status == STATUS.edit) {\r\n                                return this.state.json['96H10108-000007'];/* 国际化处理： 当前单据未保存，您确认离开此页面？*/\r\n                        }\r\n                };\r\n        }\r\n\r\n        componentDidMount() {\r\n\r\n        }\r\n\r\n        handlePageInfoChange = (props, id) => {\r\n                pageClick({ ...props, json: this.state.json }, id);\r\n        }\r\n\r\n        //获取列表肩部信息\r\n        getTableHead = () => (\r\n                <div className=\"shoulder-definition-area\">\r\n                        <div className=\"definition-icons\">\r\n                                {this.props.button.createButtonApp({\r\n                                        area: CARD.shoulder_btn_code,\r\n                                        onButtonClick: bodyButtonClick.bind(this),\r\n                                        popContainer: document.querySelector('.header-button-area')\r\n                                })}\r\n                        </div>\r\n                </div>\r\n        );\r\n\r\n        //指派提交\r\n        getAssignUser = (value) => {\r\n                cardCommit({ ...this.props, json: this.state.json }, {\r\n                        pks: this.state.curPk,\r\n                        userObj: value\r\n                });\r\n                this.compositeTurnOff();\r\n        };\r\n\r\n        //关闭指派\r\n        compositeTurnOff = () => {\r\n                this.setState({\r\n                        compositeData: null,\r\n                        compositeDisplay: false\r\n                });\r\n        };\r\n\r\n        render() {\r\n                let { form, cardPagination, BillHeadInfo, cardTable } = this.props;\r\n                let { createCardPagination } = cardPagination;\r\n                let { createForm } = form;\r\n                let { createCardTable } = cardTable;\r\n                let { createBillHeadInfo } = BillHeadInfo;\r\n                let { NCUploader, BillTrack, ApprovalTrans, ApproveDetail } = high;\r\n                let status = this.props.getUrlParam(STATUS.status);\r\n                let id = this.props.getUrlParam(PRIMARY_KEY.id);\r\n                let billNo = this.props.form.getFormItemsValue(CARD.page_code, PRIMARY_KEY.bill_no);\r\n                return (\r\n                        <div className=\"nc-bill-card\">\r\n                                <div className=\"nc-bill-top-area\">\r\n                                        <NCAffix>\r\n                                                <div className=\"nc-bill-header-area\">\r\n                                                        <div>\r\n                                                                {createBillHeadInfo({\r\n                                                                        title: this.state.json[CARD.page_title],//标题\r\n                                                                        billCode: billNo && billNo.value,//单据号\r\n                                                                        backBtnClick: buttonClick.bind(this, this.props, CARD_BUTTON.back)\r\n                                                                })}\r\n                                                        </div>\r\n                                                        <div className=\"header-button-area\">\r\n                                                                {this.props.button.createButtonApp({\r\n                                                                        area: CARD.head_btn_code,\r\n                                                                        onButtonClick: buttonClick.bind(this)\r\n                                                                })}\r\n                                                        </div>\r\n                                                        {status == STATUS.browse && id &&\r\n                                                                <div className=\"header-cardPagination-area\" style={{ float: 'right' }}>\r\n                                                                        {createCardPagination({\r\n                                                                                dataSource: DATASOURCE,\r\n                                                                                pkname: PRIMARY_KEY.head_id,\r\n                                                                                handlePageInfoChange: this.handlePageInfoChange\r\n                                                                        })}\r\n                                                                </div>\r\n                                                        }\r\n                                                </div>\r\n                                        </NCAffix>\r\n                                        <div className=\"nc-bill-form-area\">\r\n                                                {createForm(CARD.form_id, {\r\n                                                        onAfterEvent: afterHeadEvent,\r\n                                                        onBeforeEvent: beforeHeadEvent\r\n                                                })}\r\n                                        </div>\r\n                                </div>\r\n\r\n                                <div className=\"nc-bill-bottom-area\">\r\n                                        <div className=\"nc-bill-table-area\">\r\n                                                {createCardTable(CARD.table_code, {\r\n                                                        tableHead: this.getTableHead.bind(this),\r\n                                                        showCheck: true,\r\n                                                        showIndex: true,\r\n                                                        onSelected: bodySelectedEvent,\r\n                                                        onSelectedAll: bodySelectedAllEvent,\r\n                                                        onBeforeEvent: beforeTableEvent,\r\n                                                        onAfterEvent: afterTableEvent,\r\n                                                        modelSave: buttonClick.bind(this, { ...this.props, json: this.state.json }, CARD_BUTTON.save, undefined, true),\r\n                                                })}\r\n                                        </div>\r\n                                </div>\r\n\r\n                                {/* 附件 */}\r\n                                {this.state.showUploader && (\r\n                                        <NCUploader\r\n                                                placement={'bottom'}\r\n                                                {...this.state.billInfo}\r\n                                                onHide={() => {\r\n                                                        this.setState({\r\n                                                                showUploader: false\r\n                                                        });\r\n                                                }}\r\n                                        />\r\n                                )}\r\n\r\n                                {/*联查单据追溯*/}\r\n                                {\r\n                                        <BillTrack\r\n                                                show={this.state.showBillTrack}\r\n                                                close={() => {\r\n                                                        this.setState({ showBillTrack: false });\r\n                                                }}\r\n                                                pk={this.state.billTrackBillId}\r\n                                                type={this.state.billTrackBillType}\r\n                                        />\r\n                                }\r\n\r\n                                {/* 指派 */}\r\n                                {this.state.compositeDisplay && (\r\n                                        <ApprovalTrans\r\n                                                title={this.state.json['96H10108-000018']} /* 国际化处理： 指派*/\r\n                                                data={this.state.compositeData}\r\n                                                display={this.state.compositeDisplay}\r\n                                                getResult={this.getAssignUser}\r\n                                                cancel={this.compositeTurnOff}\r\n                                        />\r\n                                )}\r\n\r\n                                {/* 联查审批详情 */}\r\n                                {\r\n                                        <ApproveDetail\r\n                                                show={this.state.showApproveDetail}\r\n                                                billtype={BILL_TYPE_CODE}\r\n                                                billid={this.state.billId}\r\n                                                close={() => {\r\n                                                        this.setState({\r\n                                                                showApproveDetail: false\r\n                                                        });\r\n                                                }}\r\n                                        />\r\n                                }\r\n                        </div>\r\n                );\r\n        }\r\n}\r\n\r\nCard = createPage({\r\n        billinfo: {\r\n                billtype: 'card',\r\n                pagecode: CARD.page_code,\r\n                headcode: CARD.form_id,\r\n                bodycode: CARD.table_code\r\n        }\r\n})(Card);\r\nexport default Card;\r\n","import { cardCache } from 'nc-lightapp-front';\r\nimport { CARD, CARD_BUTTON, STATUS, FIELD, CARD_CACHE, PRIMARY_KEY } from '../../constant';\r\nimport { cardCreate, getCardData, copyClear } from './cardOperator';\r\nimport { bodyButtonClick } from './bodyButtonClick';\r\nimport { buttonVisibilityControl } from './buttonVisibilityControl';\r\nimport { afterHeadEvent } from './afterHeadEvent';\r\nimport { getBusinessInfo } from 'nc-lightapp-front';\r\n\r\n/**\r\n* @description: 卡片模板渲染\r\n*/\r\nexport function initTemplate(props) {\r\n        props.createUIDom({},\r\n                (data) => {\r\n                        if (data) {\r\n                                if (data.button) {\r\n                                        let button = data.button;\r\n                                        props.button.setButtons(button);\r\n                                        buttonVisibilityControl(props);\r\n                                }\r\n                                if (data.template) {\r\n                                        let meta = data.template;\r\n                                        meta = modifierMeta.call(this, props, meta);\r\n                                        props.meta.setMeta(meta, () => {\r\n                                                let status = this.props.getUrlParam(STATUS.status);\r\n                                                let id = this.props.getUrlParam(PRIMARY_KEY.id);\r\n                                                if (status === STATUS.add) { //新增\r\n                                                        cardCreate(this.props);\r\n                                                } else if (id) {\r\n                                                        getCardData(this.props, id, false, copyClear);\r\n                                                }\r\n                                        });\r\n                                }\r\n                                if (data.context && data.context.pk_org) {\r\n                                        if (props.getUrlParam(STATUS.status) === STATUS.add) {\r\n                                                //设置默认组织\r\n                                                // let { pk_org, org_Name } = data.context;\r\n                                                // props.form.setFormItemsValue(CARD.form_id, {\r\n                                                //         [FIELD.org]: { value: pk_org, display: org_Name }\r\n                                                // });\r\n                                                // afterHeadEvent(props, CARD.form_id, FIELD.org, { display: org_Name, value: pk_org }, { display: null, value: null });\r\n\r\n                                                props.form.setFormItemsValue(CARD.form_id, {\r\n                                                        'billdate': { value: getBusinessInfo().businessDate, display: getBusinessInfo().businessDate },\r\n                                                        'maketime': { value: getBusinessInfo().businessDate, display: getBusinessInfo().businessDate },\r\n                                                        'creationtime': {\r\n                                                                value: getBusinessInfo().businessDate, display:\r\n                                                                        getBusinessInfo().businessDate\r\n                                                        },\r\n                                                        'pk_group': { display: getBusinessInfo().groupName, value: getBusinessInfo().groupId },\r\n                                                        'approvestatus': { value: STATUS.NOSTATE, display: '自由' },\r\n                                                        'billmaker': { display: getBusinessInfo().userName, value: getBusinessInfo().userId },\r\n                                                        'creator': { display: getBusinessInfo().userName, value: getBusinessInfo().userId }\r\n                                                });\r\n\r\n\r\n                                        }\r\n                                        // 将组织信息缓存\r\n                                        let { setDefData } = cardCache;\r\n                                        setDefData(CARD_CACHE.key, CARD_CACHE.dataSource, data.context);\r\n                                }\r\n                                //表体统一参照过滤\r\n                                /*\r\n                                props.cardTable.setQueryCondition(CARD.table_code, {\r\n                                        department: () => {\r\n                                                return {\r\n                                                        pk_org: props.form.getFormItemsValue(CARD.form_id, FIELD.org).value\r\n                                                };\r\n                                        }\r\n                                });\r\n                                */\r\n                        }\r\n                }\r\n        )\r\n}\r\n\r\nfunction modifierMeta(props, meta) {\r\n        //表头参照过滤\r\n        meta[CARD.form_id].items.map(item => {\r\n                if (item.attrcode === FIELD.org) { //财务组织\r\n                        item.queryCondition = () => {\r\n                                return {\r\n                                        funcode: props.getSearchParam('c')//appcode获取\r\n                                };\r\n                        };\r\n                }\r\n        });\r\n\r\n        for (let item of Object.keys(meta.gridrelation)) {\r\n                meta[item].items.push({\r\n                        attrcode: 'opr',\r\n                        label: this.state.json['96H10108-000006'],/* 国际化处理： 操作*/\r\n                        itemtype: 'customer',\r\n                        fixed: 'right',\r\n                        className: 'table-opr',\r\n                        visible: true,\r\n                        width: 200,\r\n                        render: (text, record, index) => {\r\n                                let status = props.getUrlParam(STATUS.status);\r\n                                let buttonAry = [];\r\n                                if (status === STATUS.browse) { //浏览态\r\n                                        buttonAry = [record.expandRowStatus ? CARD_BUTTON.fold : CARD_BUTTON.unfold];\r\n                                } else { //编辑态\r\n                                        buttonAry = this.state.isPaste ? [CARD_BUTTON.pasteHere] : [CARD_BUTTON.expand, CARD_BUTTON.insertRow, CARD_BUTTON.delRow, CARD_BUTTON.copyRow];\r\n                                }\r\n                                return props.button.createOprationButton(buttonAry, {\r\n                                        area: CARD.body_btn_code,\r\n                                        buttonLimit: 4,\r\n                                        onButtonClick: (props, key) => bodyButtonClick.call(this, props, key, text, record, index)\r\n                                });\r\n                        }\r\n                })\r\n        }\r\n        return meta;\r\n}\r\n","import { promptBox } from 'nc-lightapp-front';\r\nimport { CARD, CARD_BUTTON, STATUS } from '../../constant';\r\nimport { cardBack, cardCreate, cardSave, cardUpdate, cardDelete, cardCancel, cardRefresh, cardCopy, cardAttachment, cardBillTrack, cardCommit, cardUnCommit, cardLinkApprove } from './cardOperator';\r\n\r\n/**\r\n* @description: 卡片页头部按钮操作\r\n* @param: isFromSide 是否来自侧拉区域\r\n* @param: id 当前按钮名\r\n*/\r\nexport function buttonClick(props, id, hotkey, isFromSide) {\r\n    switch (id) {\r\n        //返回\r\n        case CARD_BUTTON.back:\r\n            cardBack(props);\r\n            break;\r\n\r\n        //头部 新增\r\n        case CARD_BUTTON.create:\r\n            cardCreate(props);\r\n            break;\r\n\r\n        //头部 保存\r\n        case CARD_BUTTON.save:\r\n            cardSave({ ...props, json: this.state.json }).then(() => {\r\n                if (isFromSide) {\r\n                    props.cardTable.closeModel(CARD.table_code);\r\n                }\r\n            });\r\n            break;\r\n\r\n        //头部 保存新增\r\n        case CARD_BUTTON.saveAdd:\r\n            cardSave({ ...props, json: this.state.json }).then(flag => {\r\n                if (flag) {\r\n                    cardCreate(props);\r\n                }\r\n            });\r\n            break;\r\n\r\n        //头部 保存提交\r\n        case CARD_BUTTON.saveCommit:\r\n            cardSave({ ...props, json: this.state.json }).then(flag => {\r\n                if (flag) {\r\n                    cardCommit.call(this, { ...props, json: this.state.json });\r\n                }\r\n            });\r\n            break;\r\n\r\n        //头部 修改\r\n        case CARD_BUTTON.update:\r\n            cardUpdate(props);\r\n            break;\r\n\r\n        //头部 复制\r\n        case CARD_BUTTON.copy:\r\n            cardCopy(props);\r\n            break;\r\n\r\n        //头部 删除\r\n        case CARD_BUTTON.delete:\r\n            promptBox({\r\n                color: STATUS.warning,\r\n                title: this.state.json['96H10108-000000'],/* 国际化处理： 删除*/\r\n                content: this.state.json['96H10108-000001'],/* 国际化处理： 确定删除吗？*/\r\n                beSureBtnClick: () => {\r\n                    cardDelete({ ...props, json: this.state.json });\r\n                }\r\n            });\r\n            break;\r\n\r\n        // 头部 取消\r\n        case CARD_BUTTON.cancel:\r\n            promptBox({\r\n                color: STATUS.warning,\r\n                title: this.state.json['96H10108-000002'],/* 国际化处理： 取消*/\r\n                content: this.state.json['96H10108-000003'],/* 国际化处理： 是否确认要取消?*/\r\n                beSureBtnClick: () => {\r\n                    cardCancel({ ...props, json: this.state.json });\r\n                }\r\n            });\r\n            break;\r\n\r\n        //头部 刷新\r\n        case CARD_BUTTON.refresh:\r\n            cardRefresh({ ...props, json: this.state.json });\r\n            break;\r\n\r\n        //附件\r\n        case CARD_BUTTON.attachment:\r\n            cardAttachment.call(this, props);\r\n            break;\r\n\r\n        //单据追溯\r\n        case CARD_BUTTON.billTrack:\r\n            cardBillTrack.call(this, props);\r\n            break;\r\n\r\n        //审批详情\r\n        case CARD_BUTTON.approvalLink:\r\n            cardLinkApprove.call(this, props);\r\n            break;\r\n\r\n        //单据提交\r\n        case CARD_BUTTON.commit:\r\n            cardCommit.call(this, { ...props, json: this.state.json });\r\n            break;\r\n\r\n        //单据收回\r\n        case CARD_BUTTON.unCommit:\r\n            cardUnCommit({ ...props, json: this.state.json });\r\n            break;\r\n\r\n        default:\r\n            break;\r\n    }\r\n}\r\n","/**\r\n* @description: 表头编辑前事件\r\n* @param: moduleId 区域编码\r\n* @param: key 当前字段编码\r\n* @return: 布尔 true表示可编辑\r\n*/\r\nexport function beforeHeadEvent(props, moduleId, key, value, data) {\r\n        return true;\r\n}","/**\r\n* @description: 表体编辑前事件\r\n* @param: moduleId 区域编码\r\n* @param: key 当前字段编码\r\n* @return: 布尔 true表示可编辑\r\n*/\r\nexport function beforeTableEvent(props, moduleId, key, value, index, record, status) {\r\n        return true;\r\n}\r\n","/**\r\n* @description: 表体编辑后事件\r\n* @param: moduleId 区域编码\r\n* @param: key 当前字段编码\r\n*/\r\nexport function afterTableEvent(props, moduleId, key, value, changedrows, index, record, type, method) {\r\n        \r\n}\r\n","import { CARD, CARD_DISABLED_BUTTON } from \"../../constant\";\r\n\r\n//单选\r\nexport function bodySelectedEvent(props, moduleId, record, index, status) {\r\n    let checkedRows = props.cardTable.getCheckedRows(CARD.table_code);\r\n    if (checkedRows.length > 0) {\r\n        props.button.setButtonDisabled(CARD_DISABLED_BUTTON, false);\r\n    } else {\r\n        props.button.setButtonDisabled(CARD_DISABLED_BUTTON, true);\r\n    }\r\n}\r\n\r\n//全选\r\nexport function bodySelectedAllEvent(props, moduleId, status, length) {\r\n    props.button.setButtonDisabled(CARD_DISABLED_BUTTON, !(status && length > 0));\r\n}\r\n","import React, { Component } from 'react';\r\nimport { createPage, createPageIcon, cardCache, high } from 'nc-lightapp-front';\r\nimport { initTemplate } from './events/initTemplate';\r\nimport { buttonClick } from './events/buttonClick';\r\nimport { searchBtnClick } from './events/searchBtnClick';\r\nimport { selectedEvent, selectedAllEvent } from './events/selectedEvent';\r\nimport { LIST_BUTTON, SEARCH_CACHE, LIST, MULTILANG, PRIMARY_KEY, BILL_TYPE_CODE } from '../constant';\r\nimport { pageInfoClick, handleDoubleClick, listCommit } from './events/listOperator';\r\n\r\nclass List extends Component {\r\n        constructor(props) {\r\n                super(props);\r\n                this.state = {\r\n                        json: {},\r\n                        showUploader: false,\r\n                        billInfo: {},\r\n                        compositeData: null, //指派信息\r\n                        compositeDisplay: false, //是否显示指派\r\n                        curPk: null, //当前选中数据的pk\r\n                        showApproveDetail: false, //是否显示审批详情\r\n                        billId: null\r\n                };\r\n        }\r\n\r\n        componentWillMount() {\r\n                // json： 多语json格式参数； \r\n                // status： 是否请求到json多语，可用来判断多语资源是否请求到并进行一些别的操作； \r\n                // inlt： 可用来进行占位符的一些操作\r\n                let callback = (json, status, inlt) => {\r\n                        if (status) {\r\n                                initTemplate.call(this, this.props); // 如模板内也有多语处理，平台推荐模板加载操作放于此处， 在取到json多语资源后用传参的方式传入intemplate模板函数中\r\n\r\n                                // 保存json和inlt到页面state中并刷新页面\r\n                                this.setState({ json, inlt })\r\n                        }\r\n                }\r\n                this.props.MultiInit.getMultiLang({ moduleId: MULTILANG.moduleId, domainName: MULTILANG.domainName, callback });\r\n        }\r\n\r\n        componentDidMount() {\r\n                let { getDefData } = cardCache;\r\n                if (getDefData(SEARCH_CACHE.key, SEARCH_CACHE.dataSource)) {\r\n                        this.props.button.setDisabled({\r\n                                [LIST_BUTTON.refresh]: false\r\n                        });\r\n                } else {\r\n                        this.props.button.setDisabled({\r\n                                [LIST_BUTTON.refresh]: true\r\n                        });\r\n                }\r\n        }\r\n\r\n        handlePageInfoChange = (props, config, pks) => {\r\n                pageInfoClick({ ...props, json: this.state.json }, config, pks);\r\n        }\r\n\r\n        onRowDoubleClick = (record, index, props) => {\r\n                handleDoubleClick(record, index, { ...props, json: this.state.json });\r\n        }\r\n\r\n        clickSearchBtn = (props) => {\r\n                searchBtnClick({ ...props, json: this.state.json });\r\n        }\r\n\r\n        clickSelectBtn = (props, moduleId, record, index, status) => {\r\n                selectedEvent(props, moduleId, record, index, status);\r\n        }\r\n\r\n        clickSelectAllBtn = (props, moduleId, status, length) => {\r\n                selectedAllEvent(props, moduleId, status, length);\r\n        }\r\n\r\n        //指派提交\r\n        getAssignUser = (value) => {\r\n                listCommit({ ...this.props, json: this.state.json }, {\r\n                        pks: this.state.curPk,\r\n                        userObj: value\r\n                });\r\n                this.compositeTurnOff();\r\n        };\r\n\r\n        //关闭指派\r\n        compositeTurnOff = () => {\r\n                this.setState({\r\n                        compositeData: null,\r\n                        compositeDisplay: false\r\n                });\r\n        };\r\n\r\n        render() {\r\n                let { table, search } = this.props;\r\n                let { createSimpleTable } = table;\r\n                let { NCCreateSearch } = search;\r\n                let { NCUploader, BillTrack, ApprovalTrans, ApproveDetail } = high;\r\n                return (\r\n                        <div className=\"nc-bill-list\">\r\n                                <div className=\"nc-bill-header-area\">\r\n                                        <div className=\"header-title-search-area\">\r\n                                                {createPageIcon()}\r\n                                                <h2 className=\"title-search-detail\">{this.state.json[LIST.page_title]}</h2>\r\n                                        </div>\r\n\r\n                                        <div className=\"header-button-area\">\r\n                                                {this.props.button.createButtonApp({\r\n                                                        area: LIST.head_btn_code,\r\n                                                        onButtonClick: buttonClick.bind(this)\r\n                                                })}\r\n                                        </div>\r\n                                </div>\r\n\r\n                                <div className=\"nc-bill-search-area\">\r\n                                        {NCCreateSearch(LIST.search_id, {\r\n                                                clickSearchBtn: this.clickSearchBtn\r\n                                        })}\r\n                                </div>\r\n\r\n                                <div className=\"table-area\">\r\n                                        {createSimpleTable(LIST.table_id, {\r\n                                                showCheck: true,\r\n                                                dataSource: SEARCH_CACHE.dataSource,\r\n                                                pkname: PRIMARY_KEY.head_id,\r\n                                                handlePageInfoChange: this.handlePageInfoChange,\r\n                                                onRowDoubleClick: this.onRowDoubleClick,\r\n                                                onSelected: this.clickSelectBtn,\r\n                                                onSelectedAll: this.clickSelectAllBtn,\r\n                                        })}\r\n                                </div>\r\n\r\n                                {/* 附件 */}\r\n                                {this.state.showUploader && (\r\n                                        <NCUploader\r\n                                                placement={'bottom'}\r\n                                                {...this.state.billInfo}\r\n                                                onHide={() => {\r\n                                                        this.setState({\r\n                                                                showUploader: false\r\n                                                        });\r\n                                                }}\r\n                                        />\r\n                                )}\r\n\r\n                                {/*联查单据追溯*/}\r\n                                {\r\n                                        <BillTrack\r\n                                                show={this.state.showBillTrack}\r\n                                                close={() => {\r\n                                                        this.setState({ showBillTrack: false });\r\n                                                }}\r\n                                                pk={this.state.billTrackBillId}\r\n                                                type={this.state.billTrackBillType}\r\n                                        />\r\n                                }\r\n\r\n                                {/* 指派 */}\r\n                                {this.state.compositeDisplay && (\r\n                                        <ApprovalTrans\r\n                                                title={this.state.json['96H10108-000018']} /* 国际化处理： 指派*/\r\n                                                data={this.state.compositeData}\r\n                                                display={this.state.compositeDisplay}\r\n                                                getResult={this.getAssignUser}\r\n                                                cancel={this.compositeTurnOff}\r\n                                        />\r\n                                )}\r\n\r\n                                {/* 联查审批详情 */}\r\n                                {\r\n                                        <ApproveDetail\r\n                                                show={this.state.showApproveDetail}\r\n                                                billtype={BILL_TYPE_CODE}\r\n                                                billid={this.state.billId}\r\n                                                close={() => {\r\n                                                        this.setState({\r\n                                                                showApproveDetail: false\r\n                                                        });\r\n                                                }}\r\n                                        />\r\n                                }\r\n                        </div>\r\n                );\r\n        }\r\n}\r\n\r\nList = createPage({\r\n})(List);\r\nexport default List;\r\n","import { LIST, LIST_BUTTON, PRIMARY_KEY, CARD, REQUEST_URL, FIELD, STATUS, LIST_DISABLED_BUTTON } from '../../constant';\r\nimport { bodyButtonClick } from '../events/bodyButtonClick';\r\n\r\n//列表模板渲染\r\nexport function initTemplate(props) {\r\n        props.createUIDom(\r\n                {\r\n                        pagecode: LIST.page_code,       //页面code\r\n                },\r\n                (data) => {\r\n                        if (data) {\r\n                                if (data.button) {\r\n                                        //将请求回来的按钮组数据设置到页面的 buttons 属性上\r\n                                        let button = data.button;\r\n                                        props.button.setButtons(button);\r\n                                        props.button.setPopContent(LIST_BUTTON.bodyDelete, this.state.json['96H10108-000008']);/* 国际化处理： 确认要删除吗?*/\r\n                                        props.button.setButtonDisabled(LIST_DISABLED_BUTTON, true);\r\n                                }\r\n                                if (data.template) {\r\n                                        let meta = data.template;\r\n                                        meta = modifierMeta.call(this, props, meta);\r\n                                        //高级查询区赋予组织\r\n                                        if (data.context && data.context.pk_org) {\r\n                                                let { pk_org, org_Name } = data.context;\r\n                                                //遍历查询区域字段，将默认业务单元赋值给组织字段\r\n                                                meta[LIST.search_id].items.map((item) => {\r\n                                                        if (item.attrcode == FIELD.org) {\r\n                                                             //   item.initialvalue = { display: org_Name, value: pk_org }\r\n                                                        }\r\n//else if (item.attrcode == FIELD.orgV) {\r\n//                                                              item.initialvalue = { display: org_v_Name, value: pk_org_v }\r\n//                                                      }\r\n                                                });\r\n                                        }\r\n                                        props.meta.setMeta(meta);\r\n                                        //查询区赋予组织\r\n                                        //判断查询区域组织是否有值，如果有则表明快速查询方案已个性化定制。无需加载默认业务单元\r\n                                        if (data.context && data.context.pk_org) {\r\n                                                let orgValue = props.search.getSearchValByField(LIST.search_id, FIELD.org);\r\n                                                //let orgVValue = props.search.getSearchValByField(LIST.search_id, FIELD.orgV);\r\n                                                // if (!(orgValue && orgValue.value) && !(orgVValue && orgVValue.value)) {\r\n                                                if (!(orgValue && orgValue.value)) {\r\n                                                        let { pk_org, org_Name } = data.context;\r\n                                                        props.search.setSearchValByField(LIST.search_id, FIELD.org, { display: org_Name, value: pk_org });\r\n                                                        //props.search.setSearchValByField(LIST.search_id, FIELD.orgV, { display: org_v_Name, value: pk_org_v });\r\n                                                }\r\n                                        }\r\n                                }\r\n                        }\r\n                }\r\n        );\r\n}\r\n\r\nfunction modifierMeta(props, meta) {\r\n\r\n        //查询区参照过滤\r\n        meta[LIST.search_id].items.map((item) => {\r\n                if (item.attrcode === FIELD.org) { //财务组织过滤\r\n                        item.isMultiSelectedEnabled = true; //财务组织多选\r\n                        item.queryCondition = () => {\r\n                                return {\r\n                                        funcode: props.getSearchParam('c')//appcode获取\r\n                                };\r\n                        };\r\n                }\r\n                //else if (item.attrcode === FIELD.orgV) {\r\n                //      item.isMultiSelectedEnabled = true;\r\n                //      item.queryCondition = () => {\r\n                //              return {\r\n                //                      funcode: props.getSearchParam('c')//appcode获取\r\n                //              };\r\n                //      };\r\n                //}\r\n        });\r\n\r\n        //开启分页\r\n        meta[LIST.table_id].pagination = true;\r\n\r\n        meta[LIST.table_id].items = meta[LIST.table_id].items.map((item, key) => {\r\n                if (item.attrcode == PRIMARY_KEY.bill_no) {\r\n                        item.render = (text, record, index) => {\r\n                                return (\r\n                                        <a\r\n                                                style={{ cursor: 'pointer' }}\r\n                                                onClick={() => {\r\n                                                        props.pushTo(REQUEST_URL.toCard, {\r\n                                                                status: STATUS.browse,\r\n                                                                id: record[PRIMARY_KEY.head_id].value,\r\n                                                                pagecode: CARD.page_code\r\n                                                        });\r\n                                                }}\r\n                                        >\r\n                                                {record[PRIMARY_KEY.bill_no] && record[PRIMARY_KEY.bill_no].value}\r\n                                        </a>\r\n                                );\r\n                        };\r\n                }\r\n                return item;\r\n        });\r\n\r\n        //添加操作列\r\n        //示例代码\r\n        meta[LIST.table_id].items.push({\r\n                itemtype: 'customer',\r\n                attrcode: 'opr',\r\n                label: this.state.json['96H10108-000006'],/* 国际化处理： 操作*/\r\n                width: '180px',\r\n                fixed: 'right',\r\n                className: \"table-opr\",\r\n                visible: true,\r\n                render: (text, record, index) => {\r\n                        let buttonAry = [];\r\n                        let billStatus = record[FIELD.billStatus] && record[FIELD.billStatus].value;\r\n                        switch (billStatus) {\r\n                                case STATUS.NOSTATE:\r\n                                        buttonAry = [LIST_BUTTON.bodyCommit, LIST_BUTTON.bodyUpdate, LIST_BUTTON.bodyDelete, LIST_BUTTON.copy];\r\n                                        break;\r\n                                case STATUS.PASSING:\r\n                                case STATUS.COMMIT:\r\n                                case STATUS.GOINGON:\r\n                                        buttonAry = [LIST_BUTTON.bodyUnCommit, LIST_BUTTON.copy];\r\n                                        break;\r\n                                default:\r\n                                        buttonAry = [LIST_BUTTON.copy];\r\n                                        break;\r\n                        }\r\n\r\n                        return props.button.createOprationButton(buttonAry, {\r\n                                area: LIST.body_btn_code,\r\n                                buttonLimit: 4,\r\n                                onButtonClick: (props, key) => bodyButtonClick.call(this, props, key, text, record, index)\r\n                        });\r\n                }\r\n        });\r\n\r\n        return meta;\r\n}\r\n\r\n","import { PRIMARY_KEY, LIST_BUTTON, FIELD } from '../../constant';\r\nimport { listEdit, listBodyDelete, listCopy, listCommit, listUnCommit } from './listOperator';\r\n\r\n//列表操作列按钮操作\r\nexport function bodyButtonClick(props, key, text, record, index) {\r\n    let pk = record[PRIMARY_KEY.head_id] && record[PRIMARY_KEY.head_id].value;\r\n    let ts = record[FIELD.ts] && record[FIELD.ts].value;\r\n    let pkMapTs = new Map();\r\n    //主键与tsMap\r\n    if (pk && ts) {\r\n        pkMapTs.set(pk, ts);\r\n    }\r\n\r\n    switch (key) {\r\n        //修改\r\n        case LIST_BUTTON.bodyUpdate:\r\n            listEdit(props, pk)\r\n            break;\r\n\r\n        //删除\r\n        case LIST_BUTTON.bodyDelete:\r\n            listBodyDelete({ ...props, json: this.state.json }, { pks: [pk], pkMapTs }, index);\r\n            break;\r\n\r\n        //复制\r\n        case LIST_BUTTON.copy:\r\n            listCopy(props, pk);\r\n            break;\r\n\r\n        //提交\r\n        case LIST_BUTTON.bodyCommit:\r\n            listCommit.call(this, { ...props, json: this.state.json }, { pks: [pk], pkMapTs });\r\n            break;\r\n\r\n        //收回\r\n        case LIST_BUTTON.bodyUnCommit:\r\n            listUnCommit({ ...props, json: this.state.json }, { pks: [pk], pkMapTs });\r\n            break;\r\n    }\r\n}\r\n","import { promptBox } from 'nc-lightapp-front';\r\nimport { listCreate, listRefresh, listHeadDelete, listAttachment, listBillTrack, listCommit, listUnCommit, listLinkApprove } from './listOperator';\r\nimport { LIST_BUTTON, STATUS } from '../../constant';\r\n\r\n//列表头部按钮操作\r\nexport function buttonClick(props, id, text, record, index) {\r\n        switch (id) {\r\n                //新增\r\n                case LIST_BUTTON.create:\r\n                        listCreate(props);\r\n                        break;\r\n\r\n                //删除\r\n                case LIST_BUTTON.delete:\r\n                        promptBox({\r\n                                color: STATUS.warning,\r\n                                title: this.state.json['96H10108-000000'],/* 国际化处理： 删除*/\r\n                                content: this.state.json['96H10108-000001'],/* 国际化处理： 确定删除吗？*/\r\n                                beSureBtnClick: () => {\r\n                                        listHeadDelete({ ...props, json: this.state.json });\r\n                                }\r\n                        });\r\n                        break;\r\n\r\n                //附件\r\n                case LIST_BUTTON.attachment:\r\n                        listAttachment.call(this, { ...props, json: this.state.json });\r\n                        break;\r\n\r\n                //单据追溯\r\n                case LIST_BUTTON.billTrack:\r\n                        listBillTrack.call(this, { ...props, json: this.state.json });\r\n                        break;\r\n\r\n                //审批详情\r\n                case LIST_BUTTON.approvalLink:\r\n                        listLinkApprove.call(this, { ...props, json: this.state.json });\r\n                        break;\r\n\r\n                //提交\r\n                case LIST_BUTTON.commit:\r\n                        listCommit.call(this, { ...props, json: this.state.json });\r\n                        break;\r\n\r\n                //收回\r\n                case LIST_BUTTON.unCommit:\r\n                        listUnCommit({ ...props, json: this.state.json });\r\n                        break;\r\n\r\n                //刷新\r\n                case LIST_BUTTON.refresh:\r\n                        listRefresh({ ...props, json: this.state.json });\r\n                        break;\r\n        }\r\n}","import { listSearch } from './listOperator';\r\n\r\n//点击查询，获取查询区数据\r\nexport function searchBtnClick(props) {\r\n        listSearch(props);\r\n}\r\n","import { LIST, LIST_BUTTON, FIELD, LIST_DISABLED_BUTTON, STATUS } from \"../../constant\";\r\n\r\n//选择事件示例\r\n\r\n//单选 props, moduleId(区域id), record（行数据）, index（当前index）, status（选框值）\r\nexport function selectedEvent(props, moduleId, record, index, status) {\r\n    props.button.setButtonDisabled(LIST_DISABLED_BUTTON, true);\r\n\r\n    let showBtn = [], deleteFlag = true, isAllNoState = true, isAllPassing = true;\r\n    let selectDatas = props.table.getCheckedRows(LIST.table_id);\r\n\r\n    if (selectDatas.length == 0) {\r\n        return;\r\n    } else if (selectDatas.length > 1) { //多选\r\n        showBtn = [LIST_BUTTON.print, LIST_BUTTON.output];\r\n        for (let selectData of selectDatas) {\r\n            let status = selectData.data.values[FIELD.billStatus].value;\r\n            if (status == STATUS.PASSING || status == STATUS.COMMIT || status == STATUS.GOINGON) {\r\n                isAllNoState = false;\r\n                deleteFlag = false;\r\n            } else if (status == STATUS.NOSTATE) {\r\n                isAllPassing = false;\r\n            }\r\n        }\r\n        if (deleteFlag) {\r\n            showBtn.push(LIST_BUTTON.delete);\r\n        }\r\n        if (isAllNoState) {\r\n            showBtn.push(LIST_BUTTON.commit);\r\n        }\r\n        if (isAllPassing) {\r\n            showBtn.push(LIST_BUTTON.unCommit);\r\n        }\r\n        props.button.setButtonDisabled(showBtn, false);\r\n    } else { //单选\r\n        let busistatus = selectDatas[0].data.values[FIELD.billStatus] && selectDatas[0].data.values[FIELD.billStatus].value;\r\n        if (busistatus == STATUS.NOSTATE) { //自由\r\n            showBtn = [LIST_BUTTON.commit, LIST_BUTTON.delete];\r\n        } else if (busistatus == STATUS.PASSING || busistatus == STATUS.COMMIT || busistatus == STATUS.GOINGON) { //提交\r\n            showBtn = [LIST_BUTTON.unCommit, LIST_BUTTON.approvalLink];\r\n        }\r\n        props.button.setButtonDisabled([...showBtn, LIST_BUTTON.print, LIST_BUTTON.output, LIST_BUTTON.attachment, LIST_BUTTON.linkGroup, LIST_BUTTON.billTrack], false);\r\n    }\r\n\r\n}\r\n\r\n//全选\r\nexport function selectedAllEvent(props, moduleId, status, length) {\r\n    props.button.setButtonDisabled(LIST_DISABLED_BUTTON, true);\r\n\r\n    let selectDatas = props.table.getCheckedRows(LIST.table_id);\r\n    if (selectDatas.length > 0) {\r\n        let showBtn = [], deleteFlag = true, isAllNoState = true, isAllPassing = true;\r\n        let selectDatas = props.table.getCheckedRows(LIST.table_id);\r\n        showBtn = [LIST_BUTTON.print, LIST_BUTTON.output];\r\n        for (let selectData of selectDatas) {\r\n            let status = selectData.data.values[FIELD.billStatus].value;\r\n            if (status == STATUS.PASSING || status == STATUS.COMMIT || status == STATUS.GOINGON) {\r\n                isAllNoState = false;\r\n                deleteFlag = false;\r\n            } else if (status == STATUS.NOSTATE) {\r\n                isAllPassing = false;\r\n            }\r\n        }\r\n        if (deleteFlag) {\r\n            showBtn.push(LIST_BUTTON.delete);\r\n        }\r\n        if (isAllNoState) {\r\n            showBtn.push(LIST_BUTTON.commit);\r\n        }\r\n        if (isAllPassing) {\r\n            showBtn.push(LIST_BUTTON.unCommit);\r\n        }\r\n        props.button.setButtonDisabled(showBtn, false);\r\n    }\r\n}\r\n","import { RenderRouter } from 'nc-lightapp-front';\r\nimport routes from './router';\r\n\r\n(function main(routers, htmlTagid) {\r\n        RenderRouter(routers, htmlTagid);\r\n})(routes, 'app');\r\n","import { asyncComponent } from 'nc-lightapp-front';\r\nimport list from '../list';\r\n\r\n/**\r\n* @description: 页面路由\r\n* 保留注释 webpackChunkName:项目名/模块名/组件名/...\r\n*/\r\nconst card = asyncComponent(() =>\r\n        import(/*webpackChunkName: \"fmc/fmc/cost/card/card\"*/ /* webpackMode: \"eager\" */ '../card')\r\n);\r\n\r\nconst routes = [\r\n        {\r\n                path: '/',\r\n                component: list,\r\n                exact: true\r\n        },\r\n        {\r\n                path: '/list',\r\n                component: list\r\n        },\r\n        {\r\n                path: '/card',\r\n                component: card\r\n        }\r\n];\r\n\r\nexport default routes;\r\n"],"sourceRoot":""}